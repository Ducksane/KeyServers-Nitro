{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Nitro}from'../../Nitro';export var Motions=/*#__PURE__*/function(){function Motions(){_classCallCheck(this,Motions);}_createClass(Motions,[{key:\"getNumRunningMotions\",value:function getNumRunningMotions(k){var _local_2=0;var _iterator=_createForOfIteratorHelper(Motions._RUNNING_MOTIONS),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _local_3=_step.value;if(_local_3.target===k)_local_2++;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return _local_2;}}],[{key:\"TIMER_TIME\",get:function get(){return 1000/Nitro.instance.ticker.FPS;}},{key:\"runMotion\",value:function runMotion(k){if(Motions._RUNNING_MOTIONS.indexOf(k)===-1&&Motions._QUEUED_MOTIONS.indexOf(k)===-1){if(Motions._IS_UPDATING){Motions._QUEUED_MOTIONS.push(k);}else{Motions._RUNNING_MOTIONS.push(k);k.start();}Motions.startTimer();}return k;}},{key:\"removeMotion\",value:function removeMotion(k){var _local_2=Motions._RUNNING_MOTIONS.indexOf(k);if(_local_2>-1){if(Motions._IS_UPDATING){_local_2=Motions._REMOVED_MOTIONS.indexOf(k);if(_local_2==-1)Motions._REMOVED_MOTIONS.push(k);}else{Motions._RUNNING_MOTIONS.splice(_local_2,1);if(k.running)k.stop();if(!Motions._RUNNING_MOTIONS.length)Motions.stopTimer();}}else{_local_2=Motions._QUEUED_MOTIONS.indexOf(k);if(_local_2>-1)Motions._QUEUED_MOTIONS.splice(_local_2,1);}}},{key:\"getMotionByTag\",value:function getMotionByTag(k){var _iterator2=_createForOfIteratorHelper(Motions._RUNNING_MOTIONS),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _local_2=_step2.value;if(_local_2.tag==k)return _local_2;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(Motions._QUEUED_MOTIONS),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _local_=_step3.value;if(_local_.tag==k)return _local_;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return null;}},{key:\"getMotionByTarget\",value:function getMotionByTarget(k){var _iterator4=_createForOfIteratorHelper(Motions._RUNNING_MOTIONS),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _local_2=_step4.value;if(_local_2.target==k)return _local_2;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}var _iterator5=_createForOfIteratorHelper(Motions._QUEUED_MOTIONS),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _local_4=_step5.value;if(_local_4.target==k)return _local_4;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return null;}},{key:\"getMotionByTagAndTarget\",value:function getMotionByTagAndTarget(k,_arg_2){var _iterator6=_createForOfIteratorHelper(Motions._RUNNING_MOTIONS),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _local_3=_step6.value;if(_local_3.tag==k&&_local_3.target==_arg_2)return _local_3;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}var _iterator7=_createForOfIteratorHelper(Motions._QUEUED_MOTIONS),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _local_5=_step7.value;if(_local_5.tag==k&&_local_5.target==_arg_2)return _local_5;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return null;}},{key:\"isRunning\",get:function get(){return!!Motions._TIMER;}},{key:\"isUpdating\",get:function get(){return Motions._IS_UPDATING;}},{key:\"onTick\",value:function onTick(){Motions._IS_UPDATING=true;var _local_2=Nitro.instance.time;var _local_3=null;// eslint-disable-next-line no-cond-assign\nwhile(_local_3=Motions._QUEUED_MOTIONS.pop()){Motions._RUNNING_MOTIONS.push(_local_3);}// eslint-disable-next-line no-cond-assign\nwhile(_local_3=Motions._REMOVED_MOTIONS.pop()){Motions._RUNNING_MOTIONS.splice(Motions._RUNNING_MOTIONS.indexOf(_local_3),1);if(_local_3.running)_local_3.stop();}var _iterator8=_createForOfIteratorHelper(Motions._RUNNING_MOTIONS),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){_local_3=_step8.value;if(_local_3.running){_local_3.tick(_local_2);if(_local_3.complete){Motions.removeMotion(_local_3);}}else{Motions.removeMotion(_local_3);}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}if(!Motions._RUNNING_MOTIONS.length)Motions.stopTimer();Motions._IS_UPDATING=false;}},{key:\"startTimer\",value:function startTimer(){if(!Motions._TIMER){Motions._TIMER=setInterval(Motions.onTick,Motions.TIMER_TIME);}}},{key:\"stopTimer\",value:function stopTimer(){if(Motions._TIMER){clearInterval(Motions._TIMER);Motions._TIMER=null;}}}]);return Motions;}();Motions._QUEUED_MOTIONS=[];Motions._RUNNING_MOTIONS=[];Motions._REMOVED_MOTIONS=[];Motions._TIMER=null;Motions._IS_UPDATING=false;","map":null,"metadata":{},"sourceType":"module"}