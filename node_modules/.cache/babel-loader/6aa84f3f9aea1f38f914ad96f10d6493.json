{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{LocalizeText}from'..';import{FurniCategory}from'./FurniCategory';export var GroupItem=/*#__PURE__*/function(){function GroupItem(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;var category=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;var roomEngine=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var stuffData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var extra=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;_classCallCheck(this,GroupItem);this._type=void 0;this._category=void 0;this._roomEngine=void 0;this._stuffData=void 0;this._extra=void 0;this._isWallItem=void 0;this._iconUrl=void 0;this._name=void 0;this._description=void 0;this._locked=void 0;this._selected=void 0;this._hasUnseenItems=void 0;this._items=void 0;this._type=type;this._category=category;this._roomEngine=roomEngine;this._stuffData=stuffData;this._extra=extra;this._isWallItem=false;this._iconUrl=null;this._name=null;this._description=null;this._locked=false;this._selected=false;this._hasUnseenItems=false;this._items=[];}_createClass(GroupItem,[{key:\"clone\",value:function clone(){var groupItem=new GroupItem();groupItem._type=this._type;groupItem._category=this._category;groupItem._roomEngine=this._roomEngine;groupItem._stuffData=this._stuffData;groupItem._extra=this._extra;groupItem._isWallItem=this._isWallItem;groupItem._iconUrl=this._iconUrl;groupItem._name=this._name;groupItem._description=this._description;groupItem._locked=this._locked;groupItem._selected=this._selected;groupItem._hasUnseenItems=this._hasUnseenItems;groupItem._items=this._items;return groupItem;}},{key:\"prepareGroup\",value:function prepareGroup(){this.setIcon();this.setName();this.setDescription();}},{key:\"dispose\",value:function dispose(){}},{key:\"getItemByIndex\",value:function getItemByIndex(index){return this._items[index];}},{key:\"getItemById\",value:function getItemById(id){var _iterator=_createForOfIteratorHelper(this._items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item.id!==id)continue;return item;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return null;}},{key:\"getTradeItems\",value:function getTradeItems(count){var items=[];var furnitureItem=this.getLastItem();if(!furnitureItem)return items;var found=0;var i=0;while(i<this._items.length){if(found>=count)break;var item=this.getItemByIndex(i);if(!item.locked&&item.isTradable&&item.type===furnitureItem.type){items.push(item);found++;}i++;}return items;}},{key:\"push\",value:function push(item){var items=_toConsumableArray(this._items);var index=0;while(index<items.length){var existingItem=items[index];if(existingItem.id===item.id){existingItem=existingItem.clone();existingItem.locked=false;items.splice(index,1);items.push(existingItem);this._items=items;return;}index++;}items.push(item);this._items=items;if(this._items.length===1)this.prepareGroup();}},{key:\"pop\",value:function pop(){var items=_toConsumableArray(this._items);var item=null;if(items.length>0){var index=items.length-1;item=items[index];items.splice(index,1);}this._items=items;return item;}},{key:\"remove\",value:function remove(k){var items=_toConsumableArray(this._items);var index=0;while(index<items.length){var existingItem=items[index];if(existingItem.id===k){items.splice(index,1);this._items=items;return existingItem;}index++;}return null;}},{key:\"getTotalCount\",value:function getTotalCount(){if(this._category===FurniCategory.POST_IT){var count=0;var index=0;while(index<this._items.length){var item=this.getItemByIndex(index);count=count+parseInt(item.stuffData.getLegacyString());index++;}return count;}return this._items.length;}},{key:\"getUnlockedCount\",value:function getUnlockedCount(){if(this.category===FurniCategory.POST_IT)return this.getTotalCount();var count=0;var index=0;while(index<this._items.length){var item=this.getItemByIndex(index);if(!item.locked)count++;index++;}return count;}},{key:\"getLastItem\",value:function getLastItem(){if(!this._items.length)return null;var item=this.getItemByIndex(this._items.length-1);return item;}},{key:\"unlockAllItems\",value:function unlockAllItems(){var items=_toConsumableArray(this._items);var index=0;while(index<items.length){var item=items[index];if(item.locked){var newItem=item.clone();newItem.locked=false;items[index]=newItem;}index++;}this._items=items;}},{key:\"lockItemIds\",value:function lockItemIds(itemIds){var items=_toConsumableArray(this._items);var index=0;var updated=false;while(index<items.length){var item=items[index];var locked=itemIds.indexOf(item.ref)>=0;if(item.locked!==locked){updated=true;var newItem=item.clone();newItem.locked=locked;items[index]=newItem;}index++;}this._items=items;return updated;}},{key:\"setName\",value:function setName(){var k=this.getLastItem();if(!k){this._name='';return;}var key='';switch(this._category){case FurniCategory.POSTER:key='poster_'+k.stuffData.getLegacyString()+'_name';break;case FurniCategory.TRAX_SONG:this._name='SONG_NAME';return;default:if(this.isWallItem){key='wallItem.name.'+k.type;}else{key='roomItem.name.'+k.type;}}this._name=LocalizeText(key);}},{key:\"setDescription\",value:function setDescription(){this._description='';}},{key:\"setIcon\",value:function setIcon(){if(this._iconUrl)return;var url=null;if(this.isWallItem){url=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString());}else{url=this._roomEngine.getFurnitureFloorIconUrl(this._type);}if(!url)return;this._iconUrl=url;}},{key:\"type\",get:function get(){return this._type;}},{key:\"category\",get:function get(){return this._category;}},{key:\"stuffData\",get:function get(){return this._stuffData;}},{key:\"extra\",get:function get(){return this._extra;}},{key:\"iconUrl\",get:function get(){return this._iconUrl;}},{key:\"name\",get:function get(){return this._name;}},{key:\"description\",get:function get(){return this._description;}},{key:\"hasUnseenItems\",get:function get(){return this._hasUnseenItems;},set:function set(flag){this._hasUnseenItems=flag;}},{key:\"locked\",get:function get(){return this._locked;},set:function set(flag){this._locked=flag;}},{key:\"selected\",get:function get(){return this._selected;},set:function set(flag){this._selected=flag;}},{key:\"isWallItem\",get:function get(){var item=this.getItemByIndex(0);return item?item.isWallItem:false;}},{key:\"isGroupable\",get:function get(){var item=this.getItemByIndex(0);return item?item.isGroupable:false;}},{key:\"isSellable\",get:function get(){var item=this.getItemByIndex(0);return item?item.sellable:false;}},{key:\"items\",get:function get(){return this._items;},set:function set(items){this._items=items;}}]);return GroupItem;}();","map":null,"metadata":{},"sourceType":"module"}