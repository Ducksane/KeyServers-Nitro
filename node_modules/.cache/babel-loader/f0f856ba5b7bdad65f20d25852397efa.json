{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{FloodControlEvent}from'../../communication/messages/incoming/room/unit/chat/FloodControlEvent';import{RemainingMuteEvent}from'../../communication/messages/incoming/room/unit/chat/RemainingMuteEvent';import{RoomUnitChatEvent}from'../../communication/messages/incoming/room/unit/chat/RoomUnitChatEvent';import{RoomUnitChatShoutEvent}from'../../communication/messages/incoming/room/unit/chat/RoomUnitChatShoutEvent';import{RoomUnitChatWhisperEvent}from'../../communication/messages/incoming/room/unit/chat/RoomUnitChatWhisperEvent';import{RoomUnitHandItemReceivedEvent}from'../../communication/messages/incoming/room/unit/RoomUnitHandItemReceivedEvent';import{PetRespectNoficationEvent}from'../../communication/messages/incoming/user/PetRespectNoficationEvent';import{PetSupplementedNotificationEvent}from'../../communication/messages/incoming/user/PetSupplementedNotificationEvent';import{PetSupplementTypeEnum}from'../../communication/messages/incoming/user/PetSupplementTypeEnum';import{RespectReceivedEvent}from'../../communication/messages/incoming/user/RespectReceivedEvent';import{SystemChatStyleEnum}from'../../ui/widget/enums/SystemChatStyleEnum';import{RoomSessionChatEvent}from'../events/RoomSessionChatEvent';import{BaseHandler}from'./BaseHandler';export var RoomChatHandler=/*#__PURE__*/function(_BaseHandler){_inherits(RoomChatHandler,_BaseHandler);var _super=_createSuper(RoomChatHandler);function RoomChatHandler(connection,listener){var _this;_classCallCheck(this,RoomChatHandler);_this=_super.call(this,connection,listener);connection.addMessageEvent(new RoomUnitChatEvent(_this.onRoomUnitChatEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new RoomUnitChatShoutEvent(_this.onRoomUnitChatEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new RoomUnitChatWhisperEvent(_this.onRoomUnitChatEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new RoomUnitHandItemReceivedEvent(_this.onRoomUnitHandItemReceivedEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new RespectReceivedEvent(_this.onRespectReceivedEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new PetRespectNoficationEvent(_this.onPetRespectNoficationEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new PetSupplementedNotificationEvent(_this.onPetSupplementedNotificationEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new FloodControlEvent(_this.onFloodControlEvent.bind(_assertThisInitialized(_this))));connection.addMessageEvent(new RemainingMuteEvent(_this.onRemainingMuteEvent.bind(_assertThisInitialized(_this))));return _this;}_createClass(RoomChatHandler,[{key:\"onRoomUnitChatEvent\",value:function onRoomUnitChatEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;var chatType=RoomSessionChatEvent.CHAT_TYPE_SPEAK;if(event instanceof RoomUnitChatShoutEvent)chatType=RoomSessionChatEvent.CHAT_TYPE_SHOUT;else if(event instanceof RoomUnitChatWhisperEvent)chatType=RoomSessionChatEvent.CHAT_TYPE_WHISPER;var chatEvent=new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,parser.roomIndex,parser.message,chatType,parser.bubble);this.listener.events.dispatchEvent(chatEvent);}},{key:\"onRoomUnitHandItemReceivedEvent\",value:function onRoomUnitHandItemReceivedEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,parser.giverUserId,'',RoomSessionChatEvent.CHAT_TYPE_HAND_ITEM_RECEIVED,SystemChatStyleEnum.GENERIC,null,parser.handItemType));}},{key:\"onRespectReceivedEvent\",value:function onRespectReceivedEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;var userData=session.userDataManager.getUserData(parser.userId);if(!userData)return;this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,userData.roomIndex,'',RoomSessionChatEvent.CHAT_TYPE_RESPECT,SystemChatStyleEnum.GENERIC));}},{key:\"onPetRespectNoficationEvent\",value:function onPetRespectNoficationEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;var petData=session.userDataManager.getPetData(parser.petData.id);if(!petData)return;var chatType=RoomSessionChatEvent.CHAT_TYPE_PETRESPECT;if(parser.isTreat)chatType=RoomSessionChatEvent.CHAT_TYPE_PETTREAT;this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,petData.roomIndex,'',chatType,SystemChatStyleEnum.GENERIC));}},{key:\"onPetSupplementedNotificationEvent\",value:function onPetSupplementedNotificationEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;var petData=session.userDataManager.getPetData(parser.petId);if(!petData)return;var userRoomIndex=-1;var userData=session.userDataManager.getUserData(parser.userId);if(userData)userRoomIndex=userData.roomIndex;var chatType=RoomSessionChatEvent.CHAT_TYPE_PETREVIVE;switch(parser.supplementType){case PetSupplementTypeEnum.REVIVE:chatType=RoomSessionChatEvent.CHAT_TYPE_PETREVIVE;break;case PetSupplementTypeEnum.REBREED_FERTILIZER:chatType=RoomSessionChatEvent.CHAT_TYPE_PET_REBREED_FERTILIZE;break;case PetSupplementTypeEnum.SPEED_FERTILIZER:chatType=RoomSessionChatEvent.CHAT_TYPE_PET_SPEED_FERTILIZE;break;}this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,petData.roomIndex,'',chatType,SystemChatStyleEnum.GENERIC,null,userRoomIndex));}},{key:\"onFloodControlEvent\",value:function onFloodControlEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;var seconds=parser.seconds;this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.FLOOD_EVENT,session,-1,seconds.toString(),0,0));}},{key:\"onRemainingMuteEvent\",value:function onRemainingMuteEvent(event){if(!this.listener)return;var session=this.listener.getSession(this.roomId);if(!session)return;var parser=event.getParser();if(!parser)return;this.listener.events.dispatchEvent(new RoomSessionChatEvent(RoomSessionChatEvent.CHAT_EVENT,session,session.ownRoomIndex,'',RoomSessionChatEvent.CHAT_TYPE_MUTE_REMAINING,SystemChatStyleEnum.GENERIC,null,parser.seconds));}}]);return RoomChatHandler;}(BaseHandler);","map":null,"metadata":{},"sourceType":"module"}