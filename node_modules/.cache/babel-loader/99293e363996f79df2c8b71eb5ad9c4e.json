{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{CreateRoomSession,DoorStateType,GoToDesktop,LocalizeText}from'../../../api';import{Button,Column,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{useNavigatorContext}from'../NavigatorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var VISIBLE_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER,DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];var DOORBELL_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER];var PASSWORD_STATES=[DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];export var NavigatorDoorStateView=function NavigatorDoorStateView(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useNavigatorContext=useNavigatorContext(),_useNavigatorContext$=_useNavigatorContext.doorData,doorData=_useNavigatorContext$===void 0?null:_useNavigatorContext$,_useNavigatorContext$2=_useNavigatorContext.setDoorData,setDoorData=_useNavigatorContext$2===void 0?null:_useNavigatorContext$2;var close=function close(){if(doorData&&doorData.state===DoorStateType.STATE_WAITING)GoToDesktop();setDoorData(null);};var ring=function ring(){if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId);setDoorData(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};var tryEntering=function tryEntering(){if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId,password);setDoorData(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};useEffect(function(){if(!doorData||doorData.state!==DoorStateType.STATE_NO_ANSWER)return;GoToDesktop();},[doorData]);if(!doorData||doorData.state===DoorStateType.NONE||VISIBLE_STATES.indexOf(doorData.state)===-1)return null;var isDoorbell=DOORBELL_STATES.indexOf(doorData.state)>=0;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-navigator-doorbell\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText(isDoorbell?'navigator.doorbell.title':'navigator.password.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},bold:true,children:doorData&&doorData.roomInfo&&doorData.roomInfo.roomName}),doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.doorbell.info')}),doorData.state===DoorStateType.STATE_WAITING&&/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.doorbell.waiting')}),doorData.state===DoorStateType.STATE_NO_ANSWER&&/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.doorbell.no.answer')}),doorData.state===DoorStateType.START_PASSWORD&&/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.password.info')}),doorData.state===DoorStateType.STATE_WRONG_PASSWORD&&/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.password.retryinfo')})]}),isDoorbell&&/*#__PURE__*/_jsxs(Column,{gap:1,children:[doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:ring,children:LocalizeText('navigator.doorbell.button.ring')}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:close,children:LocalizeText('generic.cancel')})]}),!isDoorbell&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('navigator.password.enter')}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control form-control-sm\",onChange:function onChange(event){return setPassword(event.target.value);}})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:tryEntering,children:LocalizeText('navigator.password.button.try')}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:close,children:LocalizeText('generic.cancel')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}