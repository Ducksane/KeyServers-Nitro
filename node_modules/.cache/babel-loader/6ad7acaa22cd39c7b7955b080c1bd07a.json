{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GroupSaveBadgeComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{SendMessageComposer}from'../../../../api';import{Column,Flex,Grid,LayoutBadgeImageView}from'../../../../common';import{GroupBadgePart}from'../../common/GroupBadgePart';import{useGroupsContext}from'../../GroupsContext';import{GroupBadgeCreatorView}from'../GroupBadgeCreatorView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var GroupTabBadgeView=function GroupTabBadgeView(props){var _props$groupData=props.groupData,groupData=_props$groupData===void 0?null:_props$groupData,_props$setGroupData=props.setGroupData,setGroupData=_props$setGroupData===void 0?null:_props$setGroupData,_props$setCloseAction=props.setCloseAction,setCloseAction=_props$setCloseAction===void 0?null:_props$setCloseAction,_props$skipDefault=props.skipDefault,skipDefault=_props$skipDefault===void 0?null:_props$skipDefault;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),badgeParts=_useState2[0],setBadgeParts=_useState2[1];var _useGroupsContext=useGroupsContext(),_useGroupsContext$gro=_useGroupsContext.groupCustomize,groupCustomize=_useGroupsContext$gro===void 0?null:_useGroupsContext$gro;var getModifiedBadgeCode=function getModifiedBadgeCode(){if(!badgeParts||!badgeParts.length)return'';var badgeCode='';badgeParts.forEach(function(part){return part.code&&(badgeCode+=part.code);});return badgeCode;};var saveBadge=useCallback(function(){if(!groupData||!badgeParts||!badgeParts.length)return false;if(groupData.groupBadgeParts===badgeParts)return true;if(groupData.groupId<=0){setGroupData(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.groupBadgeParts=badgeParts;return newValue;});return true;}var badge=[];badgeParts.forEach(function(part){if(!part.code)return;badge.push(part.key);badge.push(part.color);badge.push(part.position);});SendMessageComposer(new GroupSaveBadgeComposer(groupData.groupId,badge));return true;},[groupData,badgeParts,setGroupData]);useEffect(function(){if(groupData.groupBadgeParts)return;var badgeParts=[new GroupBadgePart(GroupBadgePart.BASE,groupCustomize.badgeBases[0].id,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id)];setGroupData(function(prevValue){var groupBadgeParts=badgeParts;return _objectSpread(_objectSpread({},prevValue),{},{groupBadgeParts:groupBadgeParts});});},[groupData.groupBadgeParts,groupCustomize,setGroupData]);useEffect(function(){if(groupData.groupId<=0){setBadgeParts(groupData.groupBadgeParts?_toConsumableArray(groupData.groupBadgeParts):null);return;}setBadgeParts(groupData.groupBadgeParts);},[groupData]);useEffect(function(){setCloseAction({action:saveBadge});return function(){return setCloseAction(null);};},[setCloseAction,saveBadge]);return/*#__PURE__*/_jsxs(Grid,{overflow:\"hidden\",gap:1,children:[/*#__PURE__*/_jsx(Column,{size:2,children:/*#__PURE__*/_jsx(Flex,{center:true,className:\"bg-muted rounded p-1\",children:/*#__PURE__*/_jsx(LayoutBadgeImageView,{badgeCode:getModifiedBadgeCode(),isGroup:true})})}),/*#__PURE__*/_jsx(Column,{size:10,overflow:\"auto\",children:/*#__PURE__*/_jsx(GroupBadgeCreatorView,{badgeParts:badgeParts,setBadgeParts:setBadgeParts})})]});};","map":null,"metadata":{},"sourceType":"module"}