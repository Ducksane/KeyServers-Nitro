{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{AddDataContainer}from'./AddDataContainer';import{AvatarAnimationLayerData}from'./AvatarAnimationLayerData';import{AvatarDataContainer}from'./AvatarDataContainer';import{DirectionDataContainer}from'./DirectionDataContainer';import{SpriteDataContainer}from'./SpriteDataContainer';export var Animation=/*#__PURE__*/function(){function Animation(k,_arg_2){_classCallCheck(this,Animation);this._id=void 0;this._description=void 0;this._frames=void 0;this._spriteData=void 0;this._avatarData=void 0;this._directionData=void 0;this._removeData=void 0;this._addData=void 0;this._overriddenActions=void 0;this._overrideFrames=void 0;this._resetOnToggle=void 0;this._id=_arg_2.name;this._description=this._id;this._frames=[];this._spriteData=null;this._avatarData=null;this._directionData=null;this._removeData=null;this._addData=null;this._overriddenActions=null;this._overrideFrames=null;this._resetOnToggle=_arg_2.resetOnToggle||false;if(_arg_2.sprites&&_arg_2.sprites.length){this._spriteData=[];var _iterator=_createForOfIteratorHelper(_arg_2.sprites),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var sprite=_step.value;this._spriteData.push(new SpriteDataContainer(this,sprite));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(_arg_2.avatars&&_arg_2.avatars.length)this._avatarData=new AvatarDataContainer(_arg_2.avatars[0]);if(_arg_2.directions&&_arg_2.directions.length)this._directionData=new DirectionDataContainer(_arg_2.directions[0]);if(_arg_2.removes&&_arg_2.removes.length){this._removeData=[];var _iterator2=_createForOfIteratorHelper(_arg_2.removes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var remove=_step2.value;this._removeData.push(remove.id);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}if(_arg_2.adds&&_arg_2.adds.length){this._addData=[];var _iterator3=_createForOfIteratorHelper(_arg_2.adds),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var add=_step3.value;this._addData.push(new AddDataContainer(add));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}if(_arg_2.overrides&&_arg_2.overrides.length){this._overrideFrames=new Map();this._overriddenActions=new Map();var _iterator4=_createForOfIteratorHelper(_arg_2.overrides),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var override=_step4.value;var name=override.name;var value=override.override;this._overriddenActions.set(value,name);var frames=[];this.parseFrames(frames,override.frames,k);this._overrideFrames.set(name,frames);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}this.parseFrames(this._frames,_arg_2.frames,k);}_createClass(Animation,[{key:\"parseFrames\",value:function parseFrames(frames,_arg_2,_arg_3){if(!_arg_2||!_arg_2.length)return;var _iterator5=_createForOfIteratorHelper(_arg_2),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var frame=_step5.value;var repeats=1;if(frame.repeats&&frame.repeats>1)repeats=frame.repeats;var index=0;while(index<repeats){var layers=[];if(frame.bodyparts&&frame.bodyparts.length){var _iterator6=_createForOfIteratorHelper(frame.bodyparts),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var bodyPart=_step6.value;var definition=_arg_3.getActionDefinition(bodyPart.action);var layer=new AvatarAnimationLayerData(bodyPart,AvatarAnimationLayerData.BODYPART,definition);layers.push(layer);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}if(frame.fxs&&frame.fxs.length){var _iterator7=_createForOfIteratorHelper(frame.fxs),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var fx=_step7.value;var _definition=_arg_3.getActionDefinition(fx.action);var _layer=new AvatarAnimationLayerData(fx,AvatarAnimationLayerData.FX,_definition);layers.push(_layer);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}frames.push(layers);index++;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:\"frameCount\",value:function frameCount(){var k=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!k)return this._frames.length;if(this._overrideFrames){var _local_2=this._overrideFrames.get(k);if(_local_2)return _local_2.length;}return 0;}},{key:\"hasOverriddenActions\",value:function hasOverriddenActions(){if(!this._overriddenActions)return false;return this._overriddenActions.size>0;}},{key:\"overriddenActionNames\",value:function overriddenActionNames(){if(!this._overriddenActions)return null;var keys=[];var _iterator8=_createForOfIteratorHelper(this._overriddenActions.keys()),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var key=_step8.value;keys.push(key);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return keys;}},{key:\"overridingAction\",value:function overridingAction(k){if(!this._overriddenActions)return null;return this._overriddenActions.get(k);}},{key:\"getFrame\",value:function getFrame(frameCount){var _arg_2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(frameCount<0)frameCount=0;var layers=[];if(!_arg_2){if(this._frames.length>0){layers=this._frames[frameCount%this._frames.length];}}else{var overrideLayers=this._overrideFrames.get(_arg_2);if(overrideLayers&&overrideLayers.length>0){layers=overrideLayers[frameCount%overrideLayers.length];}}return layers;}},{key:\"getAnimatedBodyPartIds\",value:function getAnimatedBodyPartIds(k){var _arg_2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var _local_3=[];var _iterator9=_createForOfIteratorHelper(this.getFrame(k,_arg_2)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var layer=_step9.value;if(layer.type===AvatarAnimationLayerData.BODYPART){_local_3.push(layer.id);}else if(layer.type===AvatarAnimationLayerData.FX){if(this._addData&&this._addData.length){var _iterator10=_createForOfIteratorHelper(this._addData),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _local_5=_step10.value;if(_local_5.id===layer.id)_local_3.push(_local_5.align);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return _local_3;}},{key:\"getLayerData\",value:function getLayerData(frameCount,spriteId){var _arg_3=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var _iterator11=_createForOfIteratorHelper(this.getFrame(frameCount,_arg_3)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var layer=_step11.value;if(layer.id===spriteId)return layer;if(layer.type===AvatarAnimationLayerData.FX){if(this._addData&&this._addData.length){var _iterator12=_createForOfIteratorHelper(this._addData),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var addData=_step12.value;if(addData.align===spriteId&&addData.id===layer.id)return layer;}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}return null;}},{key:\"hasAvatarData\",value:function hasAvatarData(){return this._avatarData!==null;}},{key:\"hasDirectionData\",value:function hasDirectionData(){return this._directionData!==null;}},{key:\"hasAddData\",value:function hasAddData(){return this._addData!==null;}},{key:\"getAddData\",value:function getAddData(k){if(this._addData){var _iterator13=_createForOfIteratorHelper(this._addData),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _local_2=_step13.value;if(_local_2.id===k)return _local_2;}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}return null;}},{key:\"id\",get:function get(){return this._id;}},{key:\"spriteData\",get:function get(){return this._spriteData||Animation.EMPTY_ARRAY;}},{key:\"avatarData\",get:function get(){return this._avatarData;}},{key:\"directionData\",get:function get(){return this._directionData;}},{key:\"removeData\",get:function get(){return this._removeData||Animation.EMPTY_ARRAY;}},{key:\"addData\",get:function get(){return this._addData||Animation.EMPTY_ARRAY;}},{key:\"toString\",value:function toString(){return this._description;}},{key:\"resetOnToggle\",get:function get(){return this._resetOnToggle;}}]);return Animation;}();Animation.EMPTY_ARRAY=[];","map":null,"metadata":{},"sourceType":"module"}