{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GroupBadgePart,GroupInformationEvent,GroupSettingsEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{LocalizeText}from'../../../api';import{Base,Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardTabsItemView,NitroCardTabsView,NitroCardView,Text}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupTabBadgeView}from'./tabs/GroupTabBadgeView';import{GroupTabColorsView}from'./tabs/GroupTabColorsView';import{GroupTabIdentityView}from'./tabs/GroupTabIdentityView';import{GroupTabSettingsView}from'./tabs/GroupTabSettingsView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TABS=[1,2,3,5];export var GroupManagerView=function GroupManagerView(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentTab=_useState2[0],setCurrentTab=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),closeAction=_useState4[0],setCloseAction=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),groupData=_useState6[0],setGroupData=_useState6[1];var close=function close(){setCloseAction(function(prevValue){if(prevValue&&prevValue.action)prevValue.action();return null;});setGroupData(null);};var changeTab=function changeTab(tab){if(closeAction&&closeAction.action)closeAction.action();setCurrentTab(tab);};var onGroupInformationEvent=useCallback(function(event){var parser=event.getParser();if(!groupData||groupData.groupId!==parser.id)return;setGroupData(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.groupName=parser.title;newValue.groupDescription=parser.description;newValue.groupState=parser.type;newValue.groupCanMembersDecorate=parser.canMembersDecorate;return newValue;});},[groupData]);UseMessageEventHook(GroupInformationEvent,onGroupInformationEvent);var onGroupSettingsEvent=useCallback(function(event){var parser=event.getParser();var groupBadgeParts=[];parser.badgeParts.forEach(function(part,id){groupBadgeParts.push(new GroupBadgePart(part.isBase?GroupBadgePart.BASE:GroupBadgePart.SYMBOL,part.key,part.color,part.position));});setGroupData({groupId:parser.id,groupName:parser.title,groupDescription:parser.description,groupHomeroomId:parser.roomId,groupState:parser.state,groupCanMembersDecorate:parser.canMembersDecorate,groupColors:[parser.colorA,parser.colorB],groupBadgeParts:groupBadgeParts});},[setGroupData]);UseMessageEventHook(GroupSettingsEvent,onGroupSettingsEvent);if(!groupData||groupData.groupId<=0)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-group-manager\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('group.window.title'),onCloseClick:close}),/*#__PURE__*/_jsx(NitroCardTabsView,{children:TABS.map(function(tab){return/*#__PURE__*/_jsx(NitroCardTabsItemView,{isActive:currentTab===tab,onClick:function onClick(){return changeTab(tab);},children:LocalizeText(\"group.edit.tab.\".concat(tab))},tab);})}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Base,{className:\"nitro-group-tab-image tab-\".concat(currentTab)}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{bold:true,fontSize:4,children:LocalizeText(\"group.edit.tabcaption.\".concat(currentTab))}),/*#__PURE__*/_jsx(Text,{children:LocalizeText(\"group.edit.tabdesc.\".concat(currentTab))})]})]}),/*#__PURE__*/_jsxs(Column,{grow:true,overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/_jsx(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:close}),currentTab===2&&/*#__PURE__*/_jsx(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,skipDefault:true}),currentTab===3&&/*#__PURE__*/_jsx(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===5&&/*#__PURE__*/_jsx(GroupTabSettingsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}