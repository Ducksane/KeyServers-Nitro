{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{HabboWebTools,RoomEnterEffect}from'@nitrots/nitro-renderer';import{CreateLinkEvent,GetConfiguration,GetNitroInstance,LocalizeText,PlaySound}from'..';import{NotificationAlertEvent,NotificationConfirmEvent}from'../../events';import{NotificationBubbleEvent}from'../../events/notification-center/NotificationBubbleEvent';import{DispatchUiEvent}from'../../hooks';import{NotificationAlertType}from'./NotificationAlertType';import{NotificationBubbleType}from'./NotificationBubbleType';export var NotificationUtilities=/*#__PURE__*/function(){function NotificationUtilities(){_classCallCheck(this,NotificationUtilities);}_createClass(NotificationUtilities,null,[{key:\"cleanText\",value:function cleanText(text){return text.replace(/\\\\r/g,'\\r');}},{key:\"getTimeZeroPadded\",value:function getTimeZeroPadded(time){var text='0'+time;return text.substr(text.length-2,text.length);}},{key:\"getMainNotificationConfig\",value:function getMainNotificationConfig(){return GetConfiguration('notification',{});}},{key:\"getNotificationConfig\",value:function getNotificationConfig(key){var mainConfig=this.getMainNotificationConfig();if(!mainConfig)return null;return mainConfig[key];}},{key:\"getNotificationPart\",value:function getNotificationPart(options,type,key,localize){if(options.has(key))return options.get(key);var localizeKey=['notification',type,key].join('.');if(GetNitroInstance().localization.hasValue(localizeKey)||localize){return LocalizeText(localizeKey,Array.from(options.keys()),Array.from(options.values()));}return null;}},{key:\"getNotificationImageUrl\",value:function getNotificationImageUrl(options,type){var imageUrl=options.get('image');if(!imageUrl)imageUrl=GetConfiguration('image.library.notifications.url','').replace('%image%',type.replace(/\\./g,'_'));return LocalizeText(imageUrl);}},{key:\"showNotification\",value:function showNotification(type){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!options)options=new Map();var configuration=this.getNotificationConfig('notification.'+type);if(configuration)for(var _key in configuration){options.set(_key,configuration[_key]);}var title=this.getNotificationPart(options,type,'title',true);var message=this.getNotificationPart(options,type,'message',true).replace(/\\\\r/g,'\\r');var linkTitle=this.getNotificationPart(options,type,'linkTitle',false);var linkUrl=this.getNotificationPart(options,type,'linkUrl',false);var image=this.getNotificationImageUrl(options,type);if(options.get('display')==='BUBBLE'){this.showSingleBubble(LocalizeText(message),NotificationBubbleType.INFO,image,linkUrl);}else{this.simpleAlert(message,type,linkUrl,linkTitle,title,image);}if(options.get('sound'))PlaySound(options.get('sound'));}},{key:\"showSingleBubble\",value:function showSingleBubble(message,type){var imageUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var internalLink=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(this.BUBBLES_DISABLED)return;DispatchUiEvent(new NotificationBubbleEvent(message,type,imageUrl,internalLink));}},{key:\"showClubGiftNotification\",value:function showClubGiftNotification(numGifts){if(numGifts<=0)return;this.showSingleBubble(numGifts.toString(),NotificationBubbleType.CLUBGIFT,null,'catalog/open/'+GetConfiguration('catalog.links')['hc.hc_gifts']);}},{key:\"handleMOTD\",value:function handleMOTD(messages){var _this=this;messages=messages.map(function(message){return _this.cleanText(message);});DispatchUiEvent(new NotificationAlertEvent(messages,NotificationAlertType.MOTD,null,null,LocalizeText('notifications.motd.title')));}},{key:\"confirm\",value:function confirm(message,onConfirm,onCancel){var confirmText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var cancelText=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var title=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var type=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;if(!confirmText||!confirmText.length)confirmText=LocalizeText('generic.confirm');if(!cancelText||!cancelText.length)cancelText=LocalizeText('generic.cancel');if(!title||!title.length)title=LocalizeText('notifications.broadcast.title');DispatchUiEvent(new NotificationConfirmEvent(type,this.cleanText(message),onConfirm,onCancel,confirmText,cancelText,title));}},{key:\"simpleAlert\",value:function simpleAlert(message){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var clickUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var clickUrlText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var title=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var imageUrl=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;if(!title||!title.length)title=LocalizeText('notifications.broadcast.title');if(!type||!type.length)type=NotificationAlertType.DEFAULT;DispatchUiEvent(new NotificationAlertEvent([this.cleanText(message)],type,clickUrl,clickUrlText,title,imageUrl));}},{key:\"showNitroAlert\",value:function showNitroAlert(){DispatchUiEvent(new NotificationAlertEvent(null,NotificationAlertType.NITRO));}},{key:\"showModeratorMessage\",value:function showModeratorMessage(message){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var showHabboWay=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.simpleAlert(message,NotificationAlertType.DEFAULT,url,LocalizeText('mod.alert.link'),LocalizeText('mod.alert.title'));}},{key:\"handleModeratorCaution\",value:function handleModeratorCaution(message){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.showModeratorMessage(message,url);}},{key:\"handleModeratorMessage\",value:function handleModeratorMessage(message){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.showModeratorMessage(message,url,false);}},{key:\"handleUserBannedMessage\",value:function handleUserBannedMessage(message){this.showModeratorMessage(message);}},{key:\"handleHotelClosedMessage\",value:function handleHotelClosedMessage(open,minute,thrownOut){this.simpleAlert(LocalizeText('opening.hours.'+(thrownOut?'disconnected':'closed'),['h','m'],[this.getTimeZeroPadded(open),this.getTimeZeroPadded(minute)]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}},{key:\"handleHotelMaintenanceMessage\",value:function handleHotelMaintenanceMessage(minutesUntilMaintenance,duration){this.simpleAlert(LocalizeText('maintenance.shutdown',['m','d'],[minutesUntilMaintenance.toString(),duration.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}},{key:\"handleHotelClosingMessage\",value:function handleHotelClosingMessage(minutes){this.simpleAlert(LocalizeText('opening.hours.shutdown',['m'],[minutes.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}},{key:\"handleLoginFailedHotelClosedMessage\",value:function handleLoginFailedHotelClosedMessage(openHour,openMinutes){this.simpleAlert(LocalizeText('opening.hours.disconnected',['h','m'],[openHour.toString(),openMinutes.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}},{key:\"openUrl\",value:function openUrl(url){if(!url||!url.length)return;if(url.startsWith('http')){HabboWebTools.openWebPage(url);}else{CreateLinkEvent(url);}}},{key:\"showModerationDisclaimer\",value:function showModerationDisclaimer(){var _this2=this;if(RoomEnterEffect.isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout(function(){_this2.showModerationDisclaimer();},RoomEnterEffect.totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS);}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble(LocalizeText('mod.chatdisclaimer'),NotificationBubbleType.INFO);this.MODERATION_DISCLAIMER_SHOWN=true;}}}]);return NotificationUtilities;}();NotificationUtilities.MODERATION_DISCLAIMER_SHOWN=false;NotificationUtilities.MODERATION_DISCLAIMER_DELAY_MS=5000;NotificationUtilities.MODERATION_DISCLAIMER_TIMEOUT=null;NotificationUtilities.BUBBLES_DISABLED=false;","map":null,"metadata":{},"sourceType":"module"}