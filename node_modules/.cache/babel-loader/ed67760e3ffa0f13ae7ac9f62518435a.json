{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Matrix}from'@pixi/math';import{NitroSprite,NitroTexture}from'../../../../../core';import{TextureUtils}from'../../../../../room/utils/TextureUtils';import{FurnitureAnimatedVisualization}from'./FurnitureAnimatedVisualization';export var IsometricImageFurniVisualization=/*#__PURE__*/function(_FurnitureAnimatedVis){_inherits(IsometricImageFurniVisualization,_FurnitureAnimatedVis);var _super=_createSuper(IsometricImageFurniVisualization);function IsometricImageFurniVisualization(){var _this;_classCallCheck(this,IsometricImageFurniVisualization);_this=_super.call(this);_this._thumbnailAssetNameNormal=void 0;_this._thumbnailImageNormal=void 0;_this._thumbnailDirection=void 0;_this._thumbnailChanged=void 0;_this._hasOutline=void 0;_this._thumbnailAssetNameNormal=null;_this._thumbnailImageNormal=null;_this._thumbnailDirection=-1;_this._thumbnailChanged=false;_this._hasOutline=false;return _this;}_createClass(IsometricImageFurniVisualization,[{key:\"hasThumbnailImage\",get:function get(){return!(this._thumbnailImageNormal==null);}},{key:\"setThumbnailImages\",value:function setThumbnailImages(k){this._thumbnailImageNormal=k;this._thumbnailChanged=true;}},{key:\"updateModel\",value:function updateModel(scale){var flag=_get(_getPrototypeOf(IsometricImageFurniVisualization.prototype),\"updateModel\",this).call(this,scale);if(!this._thumbnailChanged&&this._thumbnailDirection===this.direction)return flag;this.refreshThumbnail();return true;}},{key:\"refreshThumbnail\",value:function refreshThumbnail(){if(this.asset==null)return;if(this._thumbnailImageNormal){this.addThumbnailAsset(this._thumbnailImageNormal,64);}else{this.asset.disposeAsset(this.getThumbnailAssetName(64));}this._thumbnailChanged=false;this._thumbnailDirection=this.direction;}},{key:\"addThumbnailAsset\",value:function addThumbnailAsset(k,scale){var layerId=0;while(layerId<this.totalSprites){if(this.getLayerTag(scale,this.direction,layerId)===IsometricImageFurniVisualization.THUMBNAIL){var assetName=this.cacheSpriteAssetName(scale,layerId,false)+this.getFrameNumber(scale,layerId);var asset=this.getAsset(assetName,layerId);if(asset){var _local_6=this.generateTransformedThumbnail(k,asset);var _local_7=this.getThumbnailAssetName(scale);this.asset.disposeAsset(_local_7);this.asset.addAsset(_local_7,_local_6,true,asset.offsetX,asset.offsetY,false,false);}return;}layerId++;}}},{key:\"generateTransformedThumbnail\",value:function generateTransformedThumbnail(texture,asset){if(this._hasOutline){var container=new NitroSprite();var background=new NitroSprite(NitroTexture.WHITE);background.tint=0x000000;background.width=texture.width+40;background.height=texture.height+40;var _sprite=new NitroSprite(texture);var offsetX=(background.width-_sprite.width)/2;var offsetY=(background.height-_sprite.height)/2;_sprite.position.set(offsetX,offsetY);container.addChild(background,_sprite);texture=TextureUtils.generateTexture(container);}var scale=1.1;var matrix=new Matrix();var difference=asset.width/texture.width;switch(this.direction){case 2:matrix.a=difference;matrix.b=-0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0.5*difference*texture.width;break;case 0:case 4:matrix.a=difference;matrix.b=0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0;break;default:matrix.a=difference;matrix.b=0;matrix.c=0;matrix.d=difference;matrix.tx=0;matrix.ty=0;}var sprite=new NitroSprite(texture);sprite.transform.setFromMatrix(matrix);return TextureUtils.generateTexture(sprite);}},{key:\"getSpriteAssetName\",value:function getSpriteAssetName(scale,layerId){if(this._thumbnailImageNormal&&this.getLayerTag(scale,this.direction,layerId)===IsometricImageFurniVisualization.THUMBNAIL)return this.getThumbnailAssetName(scale);return _get(_getPrototypeOf(IsometricImageFurniVisualization.prototype),\"getSpriteAssetName\",this).call(this,scale,layerId);}},{key:\"getThumbnailAssetName\",value:function getThumbnailAssetName(scale){this._thumbnailAssetNameNormal=this.getFullThumbnailAssetName(this.object.id,64);return this._thumbnailAssetNameNormal;}},{key:\"getFullThumbnailAssetName\",value:function getFullThumbnailAssetName(k,_arg_2){return[this._type,k,'thumb',_arg_2].join('_');}}]);return IsometricImageFurniVisualization;}(FurnitureAnimatedVisualization);IsometricImageFurniVisualization.THUMBNAIL='THUMBNAIL';","map":null,"metadata":{},"sourceType":"module"}