{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Texture}from'@pixi/core';import{ColorMatrixFilter}from'@pixi/filter-color-matrix';import{EventDispatcher,NitroContainer,NitroSprite}from'../../core';import{TextureUtils}from'../../room';import{Nitro}from'../Nitro';import{RoomCameraWidgetManagerEvent}from'./events/RoomCameraWidgetManagerEvent';import{RoomCameraWidgetEffect}from'./RoomCameraWidgetEffect';export var RoomCameraWidgetManager=/*#__PURE__*/function(){function RoomCameraWidgetManager(){_classCallCheck(this,RoomCameraWidgetManager);this._effects=void 0;this._events=void 0;this._isLoaded=void 0;this._effects=new Map();this._events=new EventDispatcher();this._isLoaded=false;}_createClass(RoomCameraWidgetManager,[{key:\"init\",value:function init(){if(this._isLoaded)return;this._isLoaded=true;var imagesUrl=Nitro.instance.getConfiguration('image.library.url')+'Habbo-Stories/';var effects=Nitro.instance.getConfiguration('camera.available.effects');var _iterator=_createForOfIteratorHelper(effects),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var effect=_step.value;if(!effect.enabled)continue;var cameraEffect=new RoomCameraWidgetEffect(effect.name,effect.minLevel);if(effect.colorMatrix.length){cameraEffect.colorMatrix=effect.colorMatrix;}else{cameraEffect.texture=Texture.from(imagesUrl+effect.name+'.png');cameraEffect.blendMode=effect.blendMode;}this._effects.set(cameraEffect.name,cameraEffect);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.events.dispatchEvent(new RoomCameraWidgetManagerEvent(RoomCameraWidgetManagerEvent.INITIALIZED));}},{key:\"applyEffects\",value:function applyEffects(texture,selectedEffects,isZoomed){var container=new NitroContainer();var sprite=new NitroSprite(texture);container.addChild(sprite);var _iterator2=_createForOfIteratorHelper(selectedEffects),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var selectedEffect=_step2.value;var effect=selectedEffect.effect;if(!effect)continue;if(effect.colorMatrix){var filter=new ColorMatrixFilter();filter.matrix=effect.colorMatrix;filter.alpha=selectedEffect.alpha;if(!sprite.filters)sprite.filters=[];sprite.filters.push(filter);}else{var effectSprite=new NitroSprite(effect.texture);effectSprite.alpha=selectedEffect.alpha;effectSprite.blendMode=effect.blendMode;container.addChild(effectSprite);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return TextureUtils.generateImage(container);}},{key:\"effects\",get:function get(){return this._effects;}},{key:\"events\",get:function get(){return this._events;}},{key:\"isLoaded\",get:function get(){return this._isLoaded;}}]);return RoomCameraWidgetManager;}();","map":null,"metadata":{},"sourceType":"module"}