{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Vector3d}from'../../../room/utils/Vector3d';export var RoomCamera=/*#__PURE__*/function(){function RoomCamera(){_classCallCheck(this,RoomCamera);this._targetId=-1;this._targetCategory=-2;this._targetLoc=null;this._moveDistance=0;this._previousMoveSpeed=0;this._maintainPreviousMoveSpeed=false;this._currentLoc=null;this._targetObjectLoc=void 0;this._limitedLocX=false;this._limitedLocY=false;this._centeredLocX=false;this._centeredLocY=false;this._screenWd=0;this._screenHt=0;this._scale=0;this._roomWd=0;this._roomHt=0;this._geometryUpdateId=-1;this._scaleChanged=false;this._followDuration=void 0;this._targetObjectLoc=new Vector3d();}_createClass(RoomCamera,[{key:\"location\",get:function get(){return this._currentLoc;}},{key:\"targetId\",get:function get(){return this._targetId;},set:function set(k){this._targetId=k;}},{key:\"targetCategory\",get:function get(){return this._targetCategory;},set:function set(k){this._targetCategory=k;}},{key:\"targetObjectLoc\",get:function get(){return this._targetObjectLoc;},set:function set(k){this._targetObjectLoc.assign(k);}},{key:\"limitedLocationX\",get:function get(){return this._limitedLocX;},set:function set(k){this._limitedLocX=k;}},{key:\"limitedLocationY\",get:function get(){return this._limitedLocY;},set:function set(k){this._limitedLocY=k;}},{key:\"centeredLocX\",get:function get(){return this._centeredLocX;},set:function set(k){this._centeredLocX=k;}},{key:\"centeredLocY\",get:function get(){return this._centeredLocY;},set:function set(k){this._centeredLocY=k;}},{key:\"screenWd\",get:function get(){return this._screenWd;},set:function set(k){this._screenWd=k;}},{key:\"screenHt\",get:function get(){return this._screenHt;},set:function set(k){this._screenHt=k;}},{key:\"scale\",get:function get(){return this._scale;},set:function set(k){if(this._scale!=k){this._scale=k;this._scaleChanged=true;}}},{key:\"roomWd\",get:function get(){return this._roomWd;},set:function set(k){this._roomWd=k;}},{key:\"roomHt\",get:function get(){return this._roomHt;},set:function set(k){this._roomHt=k;}},{key:\"geometryUpdateId\",get:function get(){return this._geometryUpdateId;},set:function set(k){this._geometryUpdateId=k;}},{key:\"isMoving\",get:function get(){if(!(this._targetLoc==null)&&!(this._currentLoc==null)){return true;}return false;}},{key:\"target\",set:function set(k){var _local_2;if(this._targetLoc==null){this._targetLoc=new Vector3d();}if(!(this._targetLoc.x==k.x)||!(this._targetLoc.y==k.y)||!(this._targetLoc.z==k.z)){this._targetLoc.assign(k);_local_2=Vector3d.dif(this._targetLoc,this._currentLoc);this._moveDistance=_local_2.length;this._maintainPreviousMoveSpeed=true;}}},{key:\"dispose\",value:function dispose(){this._targetLoc=null;this._currentLoc=null;}},{key:\"initializeLocation\",value:function initializeLocation(k){if(this._currentLoc!=null){return;}this._currentLoc=new Vector3d();this._currentLoc.assign(k);}},{key:\"resetLocation\",value:function resetLocation(k){if(this._currentLoc==null){this._currentLoc=new Vector3d();}this._currentLoc.assign(k);}},{key:\"update\",value:function update(k,_arg_2){var _local_3;var _local_4;var _local_5;var _local_6;var _local_7;if(this._followDuration>0&&!(this._targetLoc==null)&&!(this._currentLoc==null)){if(this._scaleChanged){this._scaleChanged=false;this._currentLoc=this._targetLoc;this._targetLoc=null;return;}_local_3=Vector3d.dif(this._targetLoc,this._currentLoc);if(_local_3.length>this._moveDistance){this._moveDistance=_local_3.length;}if(_local_3.length<=_arg_2){this._currentLoc=this._targetLoc;this._targetLoc=null;this._previousMoveSpeed=0;}else{_local_4=Math.sin(Math.PI*_local_3.length/this._moveDistance);_local_5=_arg_2*0.5;_local_6=this._moveDistance/RoomCamera.MOVE_SPEED_DENOMINATOR;_local_7=_local_5+(_local_6-_local_5)*_local_4;if(this._maintainPreviousMoveSpeed){if(_local_7<this._previousMoveSpeed){_local_7=this._previousMoveSpeed;if(_local_7>_local_3.length){_local_7=_local_3.length;}}else{this._maintainPreviousMoveSpeed=false;}}this._previousMoveSpeed=_local_7;_local_3.divide(_local_3.length);_local_3.multiply(_local_7);this._currentLoc=Vector3d.sum(this._currentLoc,_local_3);}}}},{key:\"reset\",value:function reset(){this._geometryUpdateId=-1;}},{key:\"activateFollowing\",value:function activateFollowing(k){this._followDuration=k;}}]);return RoomCamera;}();RoomCamera.MOVE_SPEED_DENOMINATOR=12;","map":null,"metadata":{},"sourceType":"module"}