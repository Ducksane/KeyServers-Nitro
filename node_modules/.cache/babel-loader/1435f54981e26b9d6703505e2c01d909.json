{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{AvatarEditorUtilities}from'./AvatarEditorUtilities';export var FigureData=/*#__PURE__*/function(){function FigureData(){_classCallCheck(this,FigureData);this._data=void 0;this._colors=void 0;this._gender='M';this._direction=FigureData.DEFAULT_DIRECTION;this._avatarEffectType=-1;this._notifier=null;}_createClass(FigureData,[{key:\"loadAvatarData\",value:function loadAvatarData(figureString,gender){this._data=new Map();this._colors=new Map();this._gender=gender;this.parseFigureString(figureString);this.updateView();}},{key:\"parseFigureString\",value:function parseFigureString(figure){if(!figure)return;var sets=figure.split('.');if(!sets||!sets.length)return;var _iterator=_createForOfIteratorHelper(sets),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var set=_step.value;var parts=set.split('-');if(!parts.length)continue;var setType=parts[0];var setId=parseInt(parts[1]);var colorIds=[];var offset=2;while(offset<parts.length){colorIds.push(parseInt(parts[offset]));offset++;}if(!colorIds.length)colorIds.push(0);this.savePartSetId(setType,setId,false);this.savePartSetColourId(setType,colorIds,false);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:\"getPartSetId\",value:function getPartSetId(setType){var existing=this._data.get(setType);if(existing!==undefined)return existing;return-1;}},{key:\"getColorIds\",value:function getColorIds(setType){var existing=this._colors.get(setType);if(existing!==undefined)return existing;return[AvatarEditorUtilities.avatarSetFirstSelectableColor(setType)];}},{key:\"getFigureString\",value:function getFigureString(){var figureString='';var setParts=[];var _iterator2=_createForOfIteratorHelper(this._data.entries()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),setType=_step2$value[0],setId=_step2$value[1];var colorIds=this._colors.get(setType);var setPart=setType+'-'+setId;if(colorIds&&colorIds.length){var _i=0;while(_i<colorIds.length){setPart=setPart+('-'+colorIds[_i]);_i++;}}setParts.push(setPart);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var i=0;while(i<setParts.length){figureString=figureString+setParts[i];if(i<setParts.length-1)figureString=figureString+'.';i++;}return figureString;}},{key:\"savePartData\",value:function savePartData(setType,partId,colorIds){var update=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.savePartSetId(setType,partId,update);this.savePartSetColourId(setType,colorIds,update);}},{key:\"savePartSetId\",value:function savePartSetId(setType,partId){var update=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;switch(setType){case FigureData.FACE:case FigureData.HAIR:case FigureData.HAT:case FigureData.HEAD_ACCESSORIES:case FigureData.EYE_ACCESSORIES:case FigureData.FACE_ACCESSORIES:case FigureData.SHIRT:case FigureData.JACKET:case FigureData.CHEST_ACCESSORIES:case FigureData.CHEST_PRINTS:case FigureData.TROUSERS:case FigureData.SHOES:case FigureData.TROUSER_ACCESSORIES:if(partId>=0){this._data.set(setType,partId);}else{this._data.delete(setType);}break;}if(update)this.updateView();}},{key:\"savePartSetColourId\",value:function savePartSetColourId(setType,colorIds){var update=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;switch(setType){case FigureData.FACE:case FigureData.HAIR:case FigureData.HAT:case FigureData.HEAD_ACCESSORIES:case FigureData.EYE_ACCESSORIES:case FigureData.FACE_ACCESSORIES:case FigureData.SHIRT:case FigureData.JACKET:case FigureData.CHEST_ACCESSORIES:case FigureData.CHEST_PRINTS:case FigureData.TROUSERS:case FigureData.SHOES:case FigureData.TROUSER_ACCESSORIES:this._colors.set(setType,colorIds);break;}if(update)this.updateView();}},{key:\"getFigureStringWithFace\",value:function getFigureStringWithFace(k){var override=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var figureString='';var setTypes=[FigureData.FACE];var figureSets=[];for(var _i2=0,_setTypes=setTypes;_i2<_setTypes.length;_i2++){var setType=_setTypes[_i2];var colors=this._colors.get(setType);if(!colors)continue;var setId=this._data.get(setType);if(setType===FigureData.FACE&&override)setId=k;var figureSet=setType+'-'+setId;if(setId>=0){var _i3=0;while(_i3<colors.length){figureSet=figureSet+('-'+colors[_i3]);_i3++;}}figureSets.push(figureSet);}var i=0;while(i<figureSets.length){figureString=figureString+figureSets[i];if(i<figureSets.length-1)figureString=figureString+'.';i++;}return figureString;}},{key:\"updateView\",value:function updateView(){if(this.notify)this.notify();}},{key:\"gender\",get:function get(){return this._gender;}},{key:\"direction\",get:function get(){return this._direction;},set:function set(direction){this._direction=direction;this.updateView();}},{key:\"avatarEffectType\",get:function get(){return this._avatarEffectType;},set:function set(k){this._avatarEffectType=k;}},{key:\"notify\",get:function get(){return this._notifier;},set:function set(notifier){this._notifier=notifier;}}]);return FigureData;}();FigureData.DEFAULT_DIRECTION=4;FigureData.MALE='M';FigureData.FEMALE='F';FigureData.UNISEX='U';FigureData.SCALE='h';FigureData.STD='std';FigureData.DEFAULT_FRAME='0';FigureData.FACE='hd';FigureData.HAIR='hr';FigureData.HAT='ha';FigureData.HEAD_ACCESSORIES='he';FigureData.EYE_ACCESSORIES='ea';FigureData.FACE_ACCESSORIES='fa';FigureData.JACKET='cc';FigureData.SHIRT='ch';FigureData.CHEST_ACCESSORIES='ca';FigureData.CHEST_PRINTS='cp';FigureData.TROUSERS='lg';FigureData.SHOES='sh';FigureData.TROUSER_ACCESSORIES='wa';FigureData.SET_TYPES=[FigureData.FACE,FigureData.HAIR,FigureData.HAT,FigureData.HEAD_ACCESSORIES,FigureData.EYE_ACCESSORIES,FigureData.FACE_ACCESSORIES,FigureData.JACKET,FigureData.SHIRT,FigureData.CHEST_ACCESSORIES,FigureData.CHEST_PRINTS,FigureData.TROUSERS,FigureData.SHOES,FigureData.TROUSERS];","map":null,"metadata":{},"sourceType":"module"}