{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import{Vector3d}from'@nitrots/nitro-renderer';import{useEffect}from'react';import{FurniCategory,GetAvatarRenderManager,GetSessionDataManager,Offer,ProductTypeEnum}from'../../../../../api';import{AutoGrid,Column,LayoutGridItem,LayoutRoomPreviewerView}from'../../../../../common';import{useCatalog}from'../../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";export var CatalogViewProductWidgetView=function CatalogViewProductWidgetView(props){var _useCatalog=useCatalog(),_useCatalog$currentOf=_useCatalog.currentOffer,currentOffer=_useCatalog$currentOf===void 0?null:_useCatalog$currentOf,_useCatalog$roomPrevi=_useCatalog.roomPreviewer,roomPreviewer=_useCatalog$roomPrevi===void 0?null:_useCatalog$roomPrevi,_useCatalog$purchaseO=_useCatalog.purchaseOptions,purchaseOptions=_useCatalog$purchaseO===void 0?null:_useCatalog$purchaseO;var _purchaseOptions$prev=purchaseOptions.previewStuffData,previewStuffData=_purchaseOptions$prev===void 0?null:_purchaseOptions$prev;useEffect(function(){if(!currentOffer||currentOffer.pricingModel===Offer.PRICING_MODEL_BUNDLE||!roomPreviewer)return;var product=currentOffer.product;if(!product)return;switch(product.productType){case ProductTypeEnum.FLOOR:{if(!product.furnitureData)return;if(product.furnitureData.specialType===FurniCategory.FIGURE_PURCHASABLE_SET){var furniData=GetSessionDataManager().getFloorItemData(product.furnitureData.id);var customParts=furniData.customParams.split(',').map(function(value){return parseInt(value);});var figureSets=[];var _iterator=_createForOfIteratorHelper(customParts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;if(GetAvatarRenderManager().isValidFigureSetForGender(part,GetSessionDataManager().gender))figureSets.push(part);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var figureString=GetAvatarRenderManager().getFigureStringWithFigureIds(GetSessionDataManager().figure,GetSessionDataManager().gender,figureSets);roomPreviewer.addAvatarIntoRoom(figureString,product.productClassId);}else{roomPreviewer.addFurnitureIntoRoom(product.productClassId,new Vector3d(90),previewStuffData,product.extraParam);}return;}case ProductTypeEnum.WALL:{if(!product.furnitureData)return;switch(product.furnitureData.specialType){case FurniCategory.FLOOR:roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(product.extraParam);return;case FurniCategory.WALL_PAPER:roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(null,product.extraParam);return;case FurniCategory.LANDSCAPE:{roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(null,null,product.extraParam);var _furniData=GetSessionDataManager().getWallItemDataByName('ads_twi_windw');if(_furniData)roomPreviewer.addWallItemIntoRoom(_furniData.id,new Vector3d(90),_furniData.customParams);return;}default:roomPreviewer.updateObjectRoom('default','default','default');roomPreviewer.addWallItemIntoRoom(product.productClassId,new Vector3d(90),product.extraParam);return;}}case ProductTypeEnum.ROBOT:roomPreviewer.addAvatarIntoRoom(product.extraParam,0);return;case ProductTypeEnum.EFFECT:roomPreviewer.addAvatarIntoRoom(GetSessionDataManager().figure,product.productClassId);return;}},[currentOffer,previewStuffData,roomPreviewer]);if(!currentOffer)return null;if(currentOffer.pricingModel===Offer.PRICING_MODEL_BUNDLE){return/*#__PURE__*/_jsx(Column,{fit:true,overflow:\"hidden\",className:\"bg-muted p-2 rounded\",children:/*#__PURE__*/_jsx(AutoGrid,{fullWidth:true,columnCount:4,className:\"nitro-catalog-layout-bundle-grid\",children:currentOffer.products.length>0&&currentOffer.products.map(function(product,index){return/*#__PURE__*/_jsx(LayoutGridItem,{itemImage:product.getIconUrl(currentOffer),itemCount:product.productCount},index);})})});}return/*#__PURE__*/_jsx(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140});};","map":null,"metadata":{},"sourceType":"module"}