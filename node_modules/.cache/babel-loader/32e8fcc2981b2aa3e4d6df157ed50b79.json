{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"figure\",\"typeId\",\"paletteId\",\"petColor\",\"customParts\",\"posture\",\"headOnly\",\"direction\",\"scale\",\"style\"];import{PetFigureData,TextureUtils,Vector3d}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useRef,useState}from'react';import{GetRoomEngine}from'../../api';import{Base}from'../Base';import{jsx as _jsx}from\"react/jsx-runtime\";export var LayoutPetImageView=function LayoutPetImageView(props){var _props$figure=props.figure,figure=_props$figure===void 0?'':_props$figure,_props$typeId=props.typeId,typeId=_props$typeId===void 0?-1:_props$typeId,_props$paletteId=props.paletteId,paletteId=_props$paletteId===void 0?-1:_props$paletteId,_props$petColor=props.petColor,petColor=_props$petColor===void 0?0xFFFFFF:_props$petColor,_props$customParts=props.customParts,customParts=_props$customParts===void 0?[]:_props$customParts,_props$posture=props.posture,posture=_props$posture===void 0?'std':_props$posture,_props$headOnly=props.headOnly,headOnly=_props$headOnly===void 0?false:_props$headOnly,_props$direction=props.direction,direction=_props$direction===void 0?0:_props$direction,_props$scale=props.scale,scale=_props$scale===void 0?1:_props$scale,_props$style=props.style,style=_props$style===void 0?{}:_props$style,rest=_objectWithoutProperties(props,_excluded);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),petUrl=_useState2[0],setPetUrl=_useState2[1];var isDisposed=useRef(false);var getStyle=useMemo(function(){var newStyle={};if(petUrl&&petUrl.length)newStyle.backgroundImage=\"url(\".concat(petUrl,\")\");if(scale!==1){newStyle.transform=\"scale(\".concat(scale,\")\");if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle=_objectSpread(_objectSpread({},newStyle),style);return newStyle;},[petUrl,scale,style]);useEffect(function(){var url=null;var petTypeId=typeId;var petPaletteId=paletteId;var petColor1=petColor;var petCustomParts=customParts;var petHeadOnly=headOnly;if(figure&&figure.length){var petFigureData=new PetFigureData(figure);petTypeId=petFigureData.typeId;petPaletteId=petFigureData.paletteId;petColor1=petFigureData.color;petCustomParts=petFigureData.customParts;}if(petTypeId===16)petHeadOnly=false;var imageResult=GetRoomEngine().getRoomObjectPetImage(petTypeId,petPaletteId,petColor1,new Vector3d(direction*45),64,{imageReady:function imageReady(id,texture,image){if(isDisposed.current)return;if(image)setPetUrl(image.src);else if(texture)setPetUrl(TextureUtils.generateImageUrl(texture));},imageFailed:function imageFailed(id){}},petHeadOnly,0,petCustomParts,posture);if(imageResult){var image=imageResult.getImage();if(image)setPetUrl(image.src);}},[figure,typeId,paletteId,petColor,customParts,posture,headOnly,direction]);useEffect(function(){isDisposed.current=false;return function(){isDisposed.current=true;};},[]);var url=\"url('\".concat(petUrl,\"')\");return/*#__PURE__*/_jsx(Base,_objectSpread({classNames:['pet-image'],style:getStyle},rest));};","map":null,"metadata":{},"sourceType":"module"}