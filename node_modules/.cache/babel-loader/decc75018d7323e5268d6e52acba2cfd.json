{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import{AvatarFigureContainer}from'@nitrots/nitro-renderer';import{GetAvatarRenderManager}from'../../../api';import{Randomizer}from'../../../api/utils';import{FigureData}from'./FigureData';function getTotalColors(partSet){var parts=partSet.parts;var totalColors=0;var _iterator=_createForOfIteratorHelper(parts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;totalColors=Math.max(totalColors,part.colorLayerIndex);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return totalColors;}function getRandomSetTypes(requiredSets,options){options=options.filter(function(option){return requiredSets.indexOf(option)===-1;});return[].concat(_toConsumableArray(requiredSets),_toConsumableArray(Randomizer.getRandomElements(options,Randomizer.getRandomNumber(options.length)+1)));}function getRandomPartSet(setType,gender){var clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var figureSetIds=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];if(!setType)return null;var options=setType.partSets.getValues().filter(function(option){if(!option.isSelectable||option.gender!=='U'&&option.gender!==gender||option.clubLevel>clubLevel||option.isSellable&&figureSetIds.indexOf(option.id)===-1)return null;return option;});if(!options||!options.length)return null;return Randomizer.getRandomElement(options);}function getRandomColors(palette,partSet){var clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!palette)return[];var options=palette.colors.getValues().filter(function(option){if(!option.isSelectable||option.clubLevel>clubLevel)return null;return option;});if(!options||!options.length)return null;return Randomizer.getRandomElements(options,getTotalColors(partSet));}export function generateRandomFigure(figureData,gender){var clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var figureSetIds=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var ignoredSets=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];var structure=GetAvatarRenderManager().structure;var figureContainer=new AvatarFigureContainer('');var requiredSets=getRandomSetTypes(structure.getMandatorySetTypeIds(gender,clubLevel),FigureData.SET_TYPES);var _iterator2=_createForOfIteratorHelper(ignoredSets),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var setType=_step2.value;var partSetId=figureData.getPartSetId(setType);var colors=figureData.getColorIds(setType);figureContainer.updatePart(setType,partSetId,colors);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(requiredSets),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var type=_step3.value;if(figureContainer.hasPartType(type))continue;var _setType=structure.figureData.getSetType(type);var selectedSet=getRandomPartSet(_setType,gender,clubLevel,figureSetIds);if(!selectedSet)continue;var selectedColors=[];if(selectedSet.isColorable){selectedColors=getRandomColors(structure.figureData.getPalette(_setType.paletteID),selectedSet,clubLevel).map(function(color){return color.id;});}figureContainer.updatePart(_setType.type,selectedSet.id,selectedColors);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return figureContainer.getFigureString();}","map":null,"metadata":{},"sourceType":"module"}