{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{LocalizeText}from'../utils';import{GetGroupChatData}from'./GetGroupChatData';import{GroupType}from'./GroupType';import{MessengerThreadChat}from'./MessengerThreadChat';import{MessengerThreadChatGroup}from'./MessengerThreadChatGroup';export var MessengerThread=/*#__PURE__*/function(){function MessengerThread(participant){var isNew=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;_classCallCheck(this,MessengerThread);this._threadId=void 0;this._participant=void 0;this._groups=void 0;this._lastUpdated=void 0;this._unreadCount=void 0;this._threadId=++MessengerThread.THREAD_ID;this._participant=participant;this._groups=[];this._lastUpdated=new Date();this._unreadCount=0;if(isNew){this.addMessage(null,LocalizeText('messenger.moderationinfo'),0,null,MessengerThreadChat.SECURITY_NOTIFICATION);this._unreadCount=0;}}_createClass(MessengerThread,[{key:\"addMessage\",value:function addMessage(senderId,message){var secondsSinceSent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var extraData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var type=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var isGroupChat=senderId<0&&extraData;var userId=isGroupChat?GetGroupChatData(extraData).userId:senderId;var group=this.getLastGroup(userId);if(!group)return;if(isGroupChat)group.type=GroupType.GROUP_CHAT;var chat=new MessengerThreadChat(senderId,message,secondsSinceSent,extraData,type);group.addChat(chat);this._lastUpdated=new Date();this._unreadCount++;return chat;}},{key:\"getLastGroup\",value:function getLastGroup(userId){var group=this._groups[this._groups.length-1];if(group&&group.userId===userId)return group;group=new MessengerThreadChatGroup(userId);this._groups.push(group);return group;}},{key:\"setRead\",value:function setRead(){this._unreadCount=0;}},{key:\"threadId\",get:function get(){return this._threadId;}},{key:\"participant\",get:function get(){return this._participant;}},{key:\"groups\",get:function get(){return this._groups;}},{key:\"lastUpdated\",get:function get(){return this._lastUpdated;}},{key:\"unreadCount\",get:function get(){return this._unreadCount;}},{key:\"unread\",get:function get(){return this._unreadCount>0;}}]);return MessengerThread;}();MessengerThread.MESSAGE_RECEIVED='MT_MESSAGE_RECEIVED';MessengerThread.THREAD_ID=0;","map":null,"metadata":{},"sourceType":"module"}