{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RoomChatSettings}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ChatWidgetMessageView=function ChatWidgetMessageView(props){var _props$chat=props.chat,chat=_props$chat===void 0?null:_props$chat,_props$makeRoom=props.makeRoom,makeRoom=_props$makeRoom===void 0?null:_props$makeRoom,_props$onChatClicked=props.onChatClicked,onChatClicked=_props$onChatClicked===void 0?null:_props$onChatClicked,_props$bubbleWidth=props.bubbleWidth,bubbleWidth=_props$bubbleWidth===void 0?RoomChatSettings.CHAT_BUBBLE_WIDTH_NORMAL:_props$bubbleWidth;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var elementRef=useRef();var getBubbleWidth=useMemo(function(){switch(bubbleWidth){case RoomChatSettings.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case RoomChatSettings.CHAT_BUBBLE_WIDTH_THIN:return 240;case RoomChatSettings.CHAT_BUBBLE_WIDTH_WIDE:return 2000;}},[bubbleWidth]);useEffect(function(){var element=elementRef.current;if(!element)return;var width=element.offsetWidth;var height=element.offsetHeight;chat.width=width;chat.height=height;chat.elementRef=element;var left=chat.left;var top=chat.top;if(!left&&!top){left=chat.location.x-width/2;top=element.parentElement.offsetHeight-height;chat.left=left;chat.top=top;}if(!chat.visible){makeRoom(chat);chat.visible=true;}return function(){chat.elementRef=null;};},[elementRef,chat,makeRoom]);useEffect(function(){return setIsVisible(chat.visible);},[chat.visible]);return/*#__PURE__*/_jsxs(\"div\",{ref:elementRef,className:\"bubble-container \".concat(isVisible?'visible':'invisible'),onClick:function onClick(event){return onChatClicked(chat);},children:[chat.styleId===0&&/*#__PURE__*/_jsx(\"div\",{className:\"user-container-bg\",style:{backgroundColor:chat.color}}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-bubble bubble-\".concat(chat.styleId,\" type-\").concat(chat.type),style:{maxWidth:getBubbleWidth},children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-container\",children:chat.imageUrl&&chat.imageUrl.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"user-image\",style:{backgroundImage:\"url(\".concat(chat.imageUrl,\")\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-content\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"username mr-1\",dangerouslySetInnerHTML:{__html:\"\".concat(chat.username,\": \")}}),/*#__PURE__*/_jsx(\"span\",{className:\"message\",dangerouslySetInnerHTML:{__html:\"\".concat(chat.formattedText)}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pointer\"})]})]});};","map":null,"metadata":{},"sourceType":"module"}