{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{CatalogGroupsComposer,StringDataType}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../../api';import{Base,Button,Flex}from'../../../../../common';import{useCatalog}from'../../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CatalogGuildSelectorWidgetView=function CatalogGuildSelectorWidgetView(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),selectedGroupIndex=_useState2[0],setSelectedGroupIndex=_useState2[1];var _useCatalog=useCatalog(),_useCatalog$currentOf=_useCatalog.currentOffer,currentOffer=_useCatalog$currentOf===void 0?null:_useCatalog$currentOf,_useCatalog$catalogOp=_useCatalog.catalogOptions,catalogOptions=_useCatalog$catalogOp===void 0?null:_useCatalog$catalogOp,_useCatalog$setPurcha=_useCatalog.setPurchaseOptions,setPurchaseOptions=_useCatalog$setPurcha===void 0?null:_useCatalog$setPurcha;var _catalogOptions$group=catalogOptions.groups,groups=_catalogOptions$group===void 0?null:_catalogOptions$group;var previewStuffData=useMemo(function(){if(!groups||!groups.length)return null;var group=groups[selectedGroupIndex];if(!group)return null;var stuffData=new StringDataType();stuffData.setValue(['0',group.groupId.toString(),group.badgeCode,group.colorA,group.colorB]);return stuffData;},[selectedGroupIndex,groups]);useEffect(function(){if(!currentOffer)return;setPurchaseOptions(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.extraParamRequired=true;newValue.extraData=previewStuffData&&previewStuffData.getValue(1)||null;newValue.previewStuffData=previewStuffData;return newValue;});},[currentOffer,previewStuffData,setPurchaseOptions]);useEffect(function(){SendMessageComposer(new CatalogGroupsComposer());},[]);if(!groups||!groups.length){return/*#__PURE__*/_jsxs(Base,{className:\"bg-muted rounded p-1 text-black text-center\",children:[LocalizeText('catalog.guild_selector.members_only'),/*#__PURE__*/_jsx(Button,{className:\"mt-1\",children:LocalizeText('catalog.guild_selector.find_groups')})]});}var selectedGroup=groups[selectedGroupIndex];return/*#__PURE__*/_jsxs(Flex,{gap:1,children:[!!selectedGroup&&/*#__PURE__*/_jsxs(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/_jsx(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorA}}),/*#__PURE__*/_jsx(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorB}})]}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",value:selectedGroupIndex,onChange:function onChange(event){return setSelectedGroupIndex(parseInt(event.target.value));},children:groups.map(function(group,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:group.groupName},index);})})]});};","map":null,"metadata":{},"sourceType":"module"}