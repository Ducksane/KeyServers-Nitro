{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{AnimationFrame}from'./AnimationFrame';import{AnimationFrameSequenceData}from'./AnimationFrameSequenceData';export var AnimationLayerData=/*#__PURE__*/function(){function AnimationLayerData(loopCount,frameRepeat,isRandom){_classCallCheck(this,AnimationLayerData);this._frameSequences=void 0;this._frameCount=void 0;this._loopCount=void 0;this._frameRepeat=void 0;this._isRandom=void 0;this._frameSequences=[];this._frameCount=-1;this._loopCount=loopCount<0?0:loopCount;this._frameRepeat=frameRepeat<1?1:frameRepeat;this._isRandom=isRandom;}_createClass(AnimationLayerData,[{key:\"frameCount\",get:function get(){if(this._frameCount<0)this.calculateLength();return this._frameCount;}},{key:\"dispose\",value:function dispose(){if(!this._frameSequences||!this._frameSequences.length)return;var _iterator=_createForOfIteratorHelper(this._frameSequences),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var sequence=_step.value;if(!sequence)continue;sequence.dispose();}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._frameSequences=[];}},{key:\"addFrameSequence\",value:function addFrameSequence(loopCount,isRandom){var sequence=new AnimationFrameSequenceData(loopCount,isRandom);this._frameSequences.push(sequence);return sequence;}},{key:\"calculateLength\",value:function calculateLength(){this._frameCount=0;var _iterator2=_createForOfIteratorHelper(this._frameSequences),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var sequence=_step2.value;if(!sequence)continue;this._frameCount+=sequence.frameCount;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:\"getFrame\",value:function getFrame(direction,frameCount){if(this._frameCount<1)return null;frameCount=frameCount/this._frameRepeat;if(!this._isRandom){var count=Math.floor(frameCount/this._frameCount);frameCount=Math.floor(frameCount%this._frameCount);var doesRepeat=false;var _sequence=null;if(this._loopCount>0&&count>=this._loopCount||this._loopCount<=0&&this._frameCount===1){frameCount=this._frameCount-1;doesRepeat=true;}var sequenceFrameCount=0;var _sequenceId=0;while(_sequenceId<this._frameSequences.length){_sequence=this._frameSequences[_sequenceId];if(_sequence){if(frameCount<sequenceFrameCount+_sequence.frameCount)break;sequenceFrameCount+=_sequence.frameCount;}_sequenceId++;}return this.getFrameFromSpecificSequence(direction,_sequence,_sequenceId,frameCount-sequenceFrameCount,doesRepeat);}var sequenceId=Math.trunc(this._frameSequences.length*Math.random());var sequence=this._frameSequences[sequenceId];if(sequence.frameCount<1)return null;return this.getFrameFromSpecificSequence(direction,sequence,sequenceId,0,false);}},{key:\"getFrameFromSequence\",value:function getFrameFromSequence(direction,sequenceId,offset,frameCount){if(sequenceId<0||sequenceId>=this._frameSequences.length)return null;var sequence=this._frameSequences[sequenceId];if(!sequence)return null;if(offset>=sequence.frameCount)return this.getFrame(direction,frameCount);return this.getFrameFromSpecificSequence(direction,sequence,sequenceId,offset,false);}},{key:\"getFrameFromSpecificSequence\",value:function getFrameFromSpecificSequence(direction,sequence,sequenceId,offset,doesRepeat){if(!sequence)return null;var frameIndex=sequence.getFrameIndex(offset);var frame=sequence.getFrame(frameIndex);if(!frame)return null;var x=frame.getX(direction);var y=frame.getY(direction);var randomX=frame.randomX;var randomY=frame.randomY;var repeats=frame.repeats;var isLastFrame=false;if(randomX)x=Math.trunc(x+randomX*Math.random());if(randomY)y=Math.trunc(y+randomY*Math.random());if(repeats>1)repeats=sequence.getRepeats(frameIndex);var frameRepeats=this._frameRepeat*repeats;if(doesRepeat)frameRepeats=AnimationFrame.FRAME_REPEAT_FOREVER;if(!this._isRandom&&!sequence.isRandom){if(sequenceId===this._frameSequences.length-1&&offset===sequence.frameCount-1)isLastFrame=true;}return AnimationFrame.allocate(frame.id,x,y,repeats,frameRepeats,isLastFrame,sequenceId,offset);}}]);return AnimationLayerData;}();","map":null,"metadata":{},"sourceType":"module"}