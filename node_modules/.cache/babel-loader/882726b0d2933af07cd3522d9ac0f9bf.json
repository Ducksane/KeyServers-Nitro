{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{NitroLogger}from'../../../core/common/logger/NitroLogger';import{RoomObjectVariable}from'../object/RoomObjectVariable';export var TileObjectMap=/*#__PURE__*/function(){function TileObjectMap(k,_arg_2){_classCallCheck(this,TileObjectMap);this._tileObjectMap=void 0;this._width=void 0;this._height=void 0;this._tileObjectMap=new Map();var index=0;while(index<_arg_2){this._tileObjectMap.set(index,new Map());index++;}this._width=k;this._height=_arg_2;}_createClass(TileObjectMap,[{key:\"clear\",value:function clear(){var _iterator=_createForOfIteratorHelper(this._tileObjectMap.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var k=_step.value;if(!k)continue;k.clear();}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._tileObjectMap.clear();}},{key:\"populate\",value:function populate(k){this.clear();var _iterator2=_createForOfIteratorHelper(k),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _local_2=_step2.value;this.addRoomObject(_local_2);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:\"dispose\",value:function dispose(){this._tileObjectMap=null;this._width=0;this._height=0;}},{key:\"getObjectIntTile\",value:function getObjectIntTile(k,_arg_2){if(k>=0&&k<this._width&&_arg_2>=0&&_arg_2<this._height){var existing=this._tileObjectMap.get(_arg_2);if(existing)return existing.get(k);}return null;}},{key:\"setObjectInTile\",value:function setObjectInTile(k,_arg_2,_arg_3){if(!_arg_3.isReady){NitroLogger.log('Assigning non initialized object to tile object map!');return;}if(k>=0&&k<this._width&&_arg_2>=0&&_arg_2<this._height){var existing=this._tileObjectMap.get(_arg_2);if(existing)existing.set(k,_arg_3);}}},{key:\"addRoomObject\",value:function addRoomObject(k){if(!k||!k.model||!k.isReady)return;var location=k.getLocation();var direction=k.getDirection();if(!location||!direction)return;var sizeX=k.model.getValue(RoomObjectVariable.FURNITURE_SIZE_X);var sizeY=k.model.getValue(RoomObjectVariable.FURNITURE_SIZE_Y);if(sizeX<1)sizeX=1;if(sizeY<1)sizeY=1;var directionNumber=Math.trunc(direction.x+45)%360/90;if(directionNumber===1||directionNumber===3){var _ref=[sizeY,sizeX];sizeX=_ref[0];sizeY=_ref[1];}var y=location.y;while(y<location.y+sizeY){var x=location.x;while(x<location.x+sizeX){var roomObject=this.getObjectIntTile(x,y);if(!roomObject||!(roomObject===k)&&roomObject.getLocation().z<=location.z){this.setObjectInTile(x,y,k);}x++;}y++;}}}]);return TileObjectMap;}();","map":null,"metadata":{},"sourceType":"module"}