{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Nitro}from'../../nitro/Nitro';import{Disposable}from'../common/disposable/Disposable';import{NitroLogger}from'../common/logger/NitroLogger';export var EventDispatcher=/*#__PURE__*/function(_Disposable){_inherits(EventDispatcher,_Disposable);var _super=_createSuper(EventDispatcher);function EventDispatcher(){var _this;_classCallCheck(this,EventDispatcher);_this=_super.call(this);_this._logger=void 0;_this._listeners=void 0;_this._logger=new NitroLogger(_this.constructor.name);_this._listeners=new Map();return _this;}_createClass(EventDispatcher,[{key:\"onDispose\",value:function onDispose(){this.removeAllListeners();_get(_getPrototypeOf(EventDispatcher.prototype),\"onDispose\",this).call(this);}},{key:\"addEventListener\",value:function addEventListener(type,callback){if(!type||!callback)return;var existing=this._listeners.get(type);if(!existing){this._listeners.set(type,[callback]);return;}existing.push(callback);}},{key:\"removeEventListener\",value:function removeEventListener(type,callback){if(!type||!callback)return;var existing=this._listeners.get(type);if(!existing||!existing.length)return;var _iterator=_createForOfIteratorHelper(existing.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),i=_step$value[0],cb=_step$value[1];if(!cb||cb!==callback)continue;existing.splice(i,1);if(!existing.length)this._listeners.delete(type);return;}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:\"dispatchEvent\",value:function dispatchEvent(event){if(!event)return false;if(Nitro.instance.getConfiguration('system.dispatcher.log'))this._logger.log(\"DISPATCHED: \".concat(event.type));this.processEvent(event);return true;}},{key:\"processEvent\",value:function processEvent(event){var existing=this._listeners.get(event.type);if(!existing||!existing.length)return;var callbacks=[];var _iterator2=_createForOfIteratorHelper(existing),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _callback=_step2.value;if(!_callback)continue;callbacks.push(_callback);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}while(callbacks.length){var callback=callbacks.shift();try{callback(event);}catch(err){this._logger.error(err.stack);return;}}}},{key:\"removeAllListeners\",value:function removeAllListeners(){this._listeners.clear();}}]);return EventDispatcher;}(Disposable);","map":null,"metadata":{},"sourceType":"module"}