{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IssueMessageData}from'@nitrots/nitro-renderer';import{useCallback,useMemo,useState}from'react';import{GetSessionDataManager}from'../../../../api';import{NitroCardContentView,NitroCardHeaderView,NitroCardTabsItemView,NitroCardTabsView,NitroCardView}from'../../../../common';import{useModToolsContext}from'../../ModToolsContext';import{ModToolsIssueInfoView}from'./ModToolsIssueInfoView';import{ModToolsMyIssuesTabView}from'./ModToolsMyIssuesTabView';import{ModToolsOpenIssuesTabView}from'./ModToolsOpenIssuesTabView';import{ModToolsPickedIssuesTabView}from'./ModToolsPickedIssuesTabView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TABS=['Open Issues','My Issues','Picked Issues'];export var ModToolsTicketsView=function ModToolsTicketsView(props){var _props$onCloseClick=props.onCloseClick,onCloseClick=_props$onCloseClick===void 0?null:_props$onCloseClick;var _useModToolsContext=useModToolsContext(),_useModToolsContext$m=_useModToolsContext.modToolsState,modToolsState=_useModToolsContext$m===void 0?null:_useModToolsContext$m;var _modToolsState$ticket=modToolsState.tickets,tickets=_modToolsState$ticket===void 0?null:_modToolsState$ticket;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentTab=_useState2[0],setCurrentTab=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),issueInfoWindows=_useState4[0],setIssueInfoWindows=_useState4[1];var openIssues=useMemo(function(){if(!tickets)return[];return tickets.filter(function(issue){return issue.state===IssueMessageData.STATE_OPEN;});},[tickets]);var myIssues=useMemo(function(){if(!tickets)return[];return tickets.filter(function(issue){return issue.state===IssueMessageData.STATE_PICKED&&issue.pickerUserId===GetSessionDataManager().userId;});},[tickets]);var pickedIssues=useMemo(function(){if(!tickets)return[];return tickets.filter(function(issue){return issue.state===IssueMessageData.STATE_PICKED;});},[tickets]);var onIssueInfoClosed=useCallback(function(issueId){var indexOfValue=issueInfoWindows.indexOf(issueId);if(indexOfValue===-1)return;var newValues=Array.from(issueInfoWindows);newValues.splice(indexOfValue,1);setIssueInfoWindows(newValues);},[issueInfoWindows]);var onIssueHandleClicked=useCallback(function(issueId){if(issueInfoWindows.indexOf(issueId)===-1){var newValues=Array.from(issueInfoWindows);newValues.push(issueId);setIssueInfoWindows(newValues);}else{onIssueInfoClosed(issueId);}},[issueInfoWindows,onIssueInfoClosed]);var CurrentTabComponent=useCallback(function(){switch(currentTab){case 0:return/*#__PURE__*/_jsx(ModToolsOpenIssuesTabView,{openIssues:openIssues});case 1:return/*#__PURE__*/_jsx(ModToolsMyIssuesTabView,{myIssues:myIssues,onIssueHandleClick:onIssueHandleClicked});case 2:return/*#__PURE__*/_jsx(ModToolsPickedIssuesTabView,{pickedIssues:pickedIssues});default:return null;}},[currentTab,myIssues,onIssueHandleClicked,openIssues,pickedIssues]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-tickets\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'Tickets',onCloseClick:onCloseClick}),/*#__PURE__*/_jsx(NitroCardTabsView,{children:TABS.map(function(tab,index){return/*#__PURE__*/_jsx(NitroCardTabsItemView,{isActive:currentTab===index,onClick:function onClick(event){return setCurrentTab(index);},children:tab},index);})}),/*#__PURE__*/_jsx(NitroCardContentView,{gap:1,children:/*#__PURE__*/_jsx(CurrentTabComponent,{})})]}),issueInfoWindows&&issueInfoWindows.length>0&&issueInfoWindows.map(function(issueId){return/*#__PURE__*/_jsx(ModToolsIssueInfoView,{issueId:issueId,onIssueInfoClosed:onIssueInfoClosed},issueId);})]});};","map":null,"metadata":{},"sourceType":"module"}