{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RoomObjectVariable}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{attemptBotPlacement,GetRoomEngine,LocalizeText,UnseenItemCategory}from'../../../../api';import{AutoGrid,Button,Column,Grid,LayoutRoomPreviewerView,Text}from'../../../../common';import{useInventoryBots,useInventoryUnseenTracker}from'../../../../hooks';import{InventoryCategoryEmptyView}from'../InventoryCategoryEmptyView';import{InventoryBotItemView}from'./InventoryBotItemView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var InventoryBotView=function InventoryBotView(props){var _props$roomSession=props.roomSession,roomSession=_props$roomSession===void 0?null:_props$roomSession,_props$roomPreviewer=props.roomPreviewer,roomPreviewer=_props$roomPreviewer===void 0?null:_props$roomPreviewer;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useInventoryBots=useInventoryBots(),_useInventoryBots$bot=_useInventoryBots.botItems,botItems=_useInventoryBots$bot===void 0?[]:_useInventoryBots$bot,_useInventoryBots$sel=_useInventoryBots.selectedBot,selectedBot=_useInventoryBots$sel===void 0?null:_useInventoryBots$sel,_useInventoryBots$act=_useInventoryBots.activate,activate=_useInventoryBots$act===void 0?null:_useInventoryBots$act,_useInventoryBots$dea=_useInventoryBots.deactivate,deactivate=_useInventoryBots$dea===void 0?null:_useInventoryBots$dea;var _useInventoryUnseenTr=useInventoryUnseenTracker(),_useInventoryUnseenTr2=_useInventoryUnseenTr.isUnseen,isUnseen=_useInventoryUnseenTr2===void 0?null:_useInventoryUnseenTr2,_useInventoryUnseenTr3=_useInventoryUnseenTr.removeUnseen,removeUnseen=_useInventoryUnseenTr3===void 0?null:_useInventoryUnseenTr3;useEffect(function(){if(!selectedBot||!roomPreviewer)return;var botData=selectedBot.botData;var roomEngine=GetRoomEngine();var wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_WALL_TYPE);var floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_FLOOR_TYPE);var landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.addAvatarIntoRoom(botData.figure,0);},[roomPreviewer,selectedBot]);useEffect(function(){if(!selectedBot||!isUnseen(UnseenItemCategory.BOT,selectedBot.botData.id))return;removeUnseen(UnseenItemCategory.BOT,selectedBot.botData.id);},[selectedBot,isUnseen,removeUnseen]);useEffect(function(){if(!isVisible)return;var id=activate();return function(){return deactivate(id);};},[isVisible,activate,deactivate]);useEffect(function(){setIsVisible(true);return function(){return setIsVisible(false);};},[]);if(!botItems||!botItems.length)return/*#__PURE__*/_jsx(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.bots.title'),desc:LocalizeText('inventory.empty.bots.desc')});return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/_jsx(AutoGrid,{columnCount:5,children:botItems&&botItems.length>0&&botItems.map(function(item){return/*#__PURE__*/_jsx(InventoryBotItemView,{botItem:item},item.botData.id);})})}),/*#__PURE__*/_jsxs(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/_jsx(Column,{overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/_jsx(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140})}),selectedBot&&/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",grow:true,truncate:true,children:selectedBot.botData.name}),!!roomSession&&/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:function onClick(event){return attemptBotPlacement(selectedBot);},children:LocalizeText('inventory.furni.placetoroom')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}