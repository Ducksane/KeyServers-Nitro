{"ast":null,"code":"import _objectSpread from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"figure\",\"gender\",\"headOnly\",\"direction\",\"scale\",\"classNames\",\"style\"];import{AvatarScaleType,AvatarSetType}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useRef,useState}from'react';import{GetAvatarRenderManager}from'../../api';import{Base}from'../Base';import{jsx as _jsx}from\"react/jsx-runtime\";export var LayoutAvatarImageView=function LayoutAvatarImageView(props){var _props$figure=props.figure,figure=_props$figure===void 0?'':_props$figure,_props$gender=props.gender,gender=_props$gender===void 0?'M':_props$gender,_props$headOnly=props.headOnly,headOnly=_props$headOnly===void 0?false:_props$headOnly,_props$direction=props.direction,direction=_props$direction===void 0?0:_props$direction,_props$scale=props.scale,scale=_props$scale===void 0?1:_props$scale,_props$classNames=props.classNames,classNames=_props$classNames===void 0?[]:_props$classNames,_props$style=props.style,style=_props$style===void 0?{}:_props$style,rest=_objectWithoutProperties(props,_excluded);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),avatarUrl=_useState2[0],setAvatarUrl=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),randomValue=_useState4[0],setRandomValue=_useState4[1];var isDisposed=useRef(false);var getClassNames=useMemo(function(){var newClassNames=['avatar-image'];if(classNames.length)newClassNames.push.apply(newClassNames,_toConsumableArray(classNames));return newClassNames;},[classNames]);var getStyle=useMemo(function(){var newStyle={};if(avatarUrl&&avatarUrl.length)newStyle.backgroundImage=\"url('\".concat(avatarUrl,\"')\");if(scale!==1){newStyle.transform=\"scale(\".concat(scale,\")\");if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle=_objectSpread(_objectSpread({},newStyle),style);return newStyle;},[avatarUrl,scale,style]);useEffect(function(){var avatarImage=GetAvatarRenderManager().createAvatarImage(figure,AvatarScaleType.LARGE,gender,{resetFigure:function resetFigure(figure){if(isDisposed.current)return;setRandomValue(Math.random());},dispose:function dispose(){},disposed:false},null);if(!avatarImage)return;var setType=AvatarSetType.FULL;if(headOnly)setType=AvatarSetType.HEAD;avatarImage.setDirection(setType,direction);var image=avatarImage.getCroppedImage(setType);if(image)setAvatarUrl(image.src);avatarImage.dispose();},[figure,gender,direction,headOnly,randomValue]);useEffect(function(){isDisposed.current=false;return function(){isDisposed.current=true;};},[]);return/*#__PURE__*/_jsx(Base,_objectSpread({classNames:getClassNames,style:getStyle},rest));};","map":null,"metadata":{},"sourceType":"module"}