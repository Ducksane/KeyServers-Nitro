{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{GetFurnitureData,GetProductDataForLocalization,LocalizeText,ProductTypeEnum}from'..';import{Product}from'./Product';export var Offer=/*#__PURE__*/function(){function Offer(offerId,localizationId,isRentOffer,priceInCredits,priceInActivityPoints,activityPointType,giftable,clubLevel,products,bundlePurchaseAllowed){_classCallCheck(this,Offer);this._pricingModel=void 0;this._priceType=void 0;this._offerId=void 0;this._localizationId=void 0;this._priceInCredits=void 0;this._priceInActivityPoints=void 0;this._activityPointType=void 0;this._giftable=void 0;this._isRentOffer=void 0;this._page=void 0;this._clubLevel=0;this._products=void 0;this._badgeCode=void 0;this._bundlePurchaseAllowed=false;this._offerId=offerId;this._localizationId=localizationId;this._isRentOffer=isRentOffer;this._priceInCredits=priceInCredits;this._priceInActivityPoints=priceInActivityPoints;this._activityPointType=activityPointType;this._giftable=giftable;this._clubLevel=clubLevel;this._products=products;this._bundlePurchaseAllowed=bundlePurchaseAllowed;this.setPricingModelForProducts();this.setPricingType();var _iterator=_createForOfIteratorHelper(products),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var product=_step.value;if(product.productType===ProductTypeEnum.BADGE){this._badgeCode=product.extraParam;break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}_createClass(Offer,[{key:\"activate\",value:function activate(){}},{key:\"clubLevel\",get:function get(){return this._clubLevel;}},{key:\"page\",get:function get(){return this._page;},set:function set(k){this._page=k;}},{key:\"offerId\",get:function get(){return this._offerId;}},{key:\"localizationId\",get:function get(){return this._localizationId;}},{key:\"priceInCredits\",get:function get(){return this._priceInCredits;}},{key:\"priceInActivityPoints\",get:function get(){return this._priceInActivityPoints;}},{key:\"activityPointType\",get:function get(){return this._activityPointType;}},{key:\"giftable\",get:function get(){return this._giftable;}},{key:\"product\",get:function get(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];var products=Product.stripAddonProducts(this._products);if(products.length)return products[0];return null;}},{key:\"pricingModel\",get:function get(){return this._pricingModel;}},{key:\"priceType\",get:function get(){return this._priceType;}},{key:\"bundlePurchaseAllowed\",get:function get(){return this._bundlePurchaseAllowed;}},{key:\"isRentOffer\",get:function get(){return this._isRentOffer;}},{key:\"badgeCode\",get:function get(){return this._badgeCode;}},{key:\"localizationName\",get:function get(){var productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.name;return LocalizeText(this._localizationId);}},{key:\"localizationDescription\",get:function get(){var productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.description;return LocalizeText(this._localizationId);}},{key:\"isLazy\",get:function get(){return false;}},{key:\"products\",get:function get(){return this._products;}},{key:\"setPricingModelForProducts\",value:function setPricingModelForProducts(){var products=Product.stripAddonProducts(this._products);if(products.length===1){if(products[0].productCount===1){this._pricingModel=Offer.PRICING_MODEL_SINGLE;}else{this._pricingModel=Offer.PRICING_MODEL_MULTI;}}else if(products.length>1){this._pricingModel=Offer.PRICING_MODEL_BUNDLE;}else{this._pricingModel=Offer.PRICING_MODEL_UNKNOWN;}}},{key:\"setPricingType\",value:function setPricingType(){if(this._priceInCredits>0&&this._priceInActivityPoints>0){this._priceType=Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS;}else if(this._priceInCredits>0){this._priceType=Offer.PRICE_TYPE_CREDITS;}else if(this._priceInActivityPoints>0){this._priceType=Offer.PRICE_TYPE_ACTIVITYPOINTS;}else{this._priceType=Offer.PRICE_TYPE_NONE;}}},{key:\"clone\",value:function clone(){var products=[];var productData=GetProductDataForLocalization(this.localizationId);var _iterator2=_createForOfIteratorHelper(this._products),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var product=_step2.value;var furnitureData=GetFurnitureData(product.productClassId,product.productType);products.push(new Product(product.productType,product.productClassId,product.extraParam,product.productCount,productData,furnitureData));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var offer=new Offer(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,products,this.bundlePurchaseAllowed);offer.page=this.page;return offer;}}]);return Offer;}();Offer.PRICING_MODEL_UNKNOWN='pricing_model_unknown';Offer.PRICING_MODEL_SINGLE='pricing_model_single';Offer.PRICING_MODEL_MULTI='pricing_model_multi';Offer.PRICING_MODEL_BUNDLE='pricing_model_bundle';Offer.PRICING_MODEL_FURNITURE='pricing_model_furniture';Offer.PRICE_TYPE_NONE='price_type_none';Offer.PRICE_TYPE_CREDITS='price_type_credits';Offer.PRICE_TYPE_ACTIVITYPOINTS='price_type_activitypoints';Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS='price_type_credits_and_activitypoints';","map":null,"metadata":{},"sourceType":"module"}