{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{AvatarExpressionEnum,HabboClubLevelEnum,RoomControllerLevel,RoomRotatingEffect,RoomSessionChatEvent,RoomSettingsComposer,RoomShakingEffect,RoomWidgetEnum,RoomZoomEvent,TextureUtils}from'@nitrots/nitro-renderer';import{GetClubMemberLevel,GetConfiguration,GetNitroInstance,SendMessageComposer}from'../../..';import{GetRoomEngine,GetSessionDataManager,LocalizeText,NotificationUtilities}from'../../../..';import{CreateLinkEvent}from'../../../CreateLinkEvent';import{RoomWidgetFloodControlEvent}from'../events';import{RoomWidgetChatMessage,RoomWidgetChatSelectAvatarMessage,RoomWidgetChatTypingMessage,RoomWidgetRequestWidgetMessage}from'../messages';import{RoomWidgetHandler}from'./RoomWidgetHandler';export var RoomWidgetChatInputHandler=/*#__PURE__*/function(_RoomWidgetHandler){_inherits(RoomWidgetChatInputHandler,_RoomWidgetHandler);var _super=_createSuper(RoomWidgetChatInputHandler);function RoomWidgetChatInputHandler(){_classCallCheck(this,RoomWidgetChatInputHandler);return _super.apply(this,arguments);}_createClass(RoomWidgetChatInputHandler,[{key:\"processEvent\",value:function processEvent(event){switch(event.type){case RoomSessionChatEvent.FLOOD_EVENT:{var floodEvent=event;this.container.eventDispatcher.dispatchEvent(new RoomWidgetFloodControlEvent(parseInt(floodEvent.message)));}}}},{key:\"processWidgetMessage\",value:function processWidgetMessage(message){switch(message.type){case RoomWidgetChatTypingMessage.TYPING_STATUS:{var typingMessage=message;this.container.roomSession.sendChatTypingMessage(typingMessage.isTyping);break;}case RoomWidgetChatMessage.MESSAGE_CHAT:{var chatMessage=message;if(chatMessage.text==='')return null;var text=chatMessage.text;var parts=text.split(' ');if(parts.length>0){var firstPart=parts[0];var secondPart='';if(parts.length>1)secondPart=parts[1];if(firstPart.charAt(0)===':'&&secondPart==='x'){var selectedAvatarId=GetRoomEngine().selectedAvatarId;if(selectedAvatarId>-1){var userData=this.container.roomSession.userDataManager.getUserDataByIndex(selectedAvatarId);if(userData){secondPart=userData.name;text=chatMessage.text.replace(' x',' '+userData.name);}}}switch(firstPart.toLowerCase()){case':compass':CreateLinkEvent('mediaroom/video/BBjCFrR-QqA');return null;case':shake':RoomShakingEffect.init(2500,5000);RoomShakingEffect.turnVisualizationOn();return null;case':rotate':RoomRotatingEffect.init(2500,5000);RoomRotatingEffect.turnVisualizationOn();return null;case':d':case';d':if(GetClubMemberLevel()===HabboClubLevelEnum.VIP){this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.LAUGH.ordinal);}break;case'o/':case'_o/':this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.WAVE.ordinal);return null;case':kiss':if(GetClubMemberLevel()===HabboClubLevelEnum.VIP){this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.BLOW.ordinal);return null;}break;case':jump':if(GetClubMemberLevel()===HabboClubLevelEnum.VIP){this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.JUMP.ordinal);return null;}break;case':idle':this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.IDLE.ordinal);return null;case'_b':this.container.roomSession.sendExpressionMessage(AvatarExpressionEnum.RESPECT.ordinal);return null;case':sign':this.container.roomSession.sendSignMessage(parseInt(secondPart));return null;case':iddqd':case':flip':GetRoomEngine().events.dispatchEvent(new RoomZoomEvent(this.container.roomSession.roomId,-1,true));return null;case':zoom':GetRoomEngine().events.dispatchEvent(new RoomZoomEvent(this.container.roomSession.roomId,parseFloat(secondPart),false));return null;case':screenshot':var texture=GetRoomEngine().createTextureFromRoom(this.container.roomSession.roomId,1);var image=new Image();image.src=TextureUtils.generateImageUrl(texture);var newWindow=window.open('');newWindow.document.write(image.outerHTML);return null;case':pickall':if(this.container.roomSession.isRoomOwner||GetSessionDataManager().isModerator){NotificationUtilities.confirm(LocalizeText('room.confirm.pick_all'),function(){GetSessionDataManager().sendSpecialCommandMessage(':pickall');},null,null,null,LocalizeText('generic.alert.title'));}return null;case':furni':this.container.processWidgetMessage(new RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage.FURNI_CHOOSER));return null;case':chooser':this.container.processWidgetMessage(new RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage.USER_CHOOSER));return null;case':floor':case':bcfloor':if(this.container.roomSession.controllerLevel>=RoomControllerLevel.ROOM_OWNER)CreateLinkEvent('floor-editor/show');return null;case':togglefps':{if(GetNitroInstance().ticker.maxFPS>0)GetNitroInstance().ticker.maxFPS=0;else GetNitroInstance().ticker.maxFPS=GetConfiguration('system.animation.fps');return null;}case':client':case':nitro':case':billsonnn':NotificationUtilities.showNitroAlert();return null;case':settings':if(this.container.roomSession.isRoomOwner||GetSessionDataManager().isModerator){SendMessageComposer(new RoomSettingsComposer(this.container.roomSession.roomId));}return null;}}var styleId=chatMessage.styleId;if(this.container&&this.container.roomSession){switch(chatMessage.chatType){case RoomWidgetChatMessage.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(text,styleId);break;case RoomWidgetChatMessage.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(text,styleId);break;case RoomWidgetChatMessage.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(chatMessage.recipientName,text,styleId);break;}}break;}case RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR:{var selectedEvent=message;GetRoomEngine().setSelectedAvatar(selectedEvent.roomId,selectedEvent.objectId);break;}}return null;}},{key:\"type\",get:function get(){return RoomWidgetEnum.CHAT_INPUT_WIDGET;}},{key:\"eventTypes\",get:function get(){return[RoomSessionChatEvent.FLOOD_EVENT];}},{key:\"messageTypes\",get:function get(){return[RoomWidgetChatTypingMessage.TYPING_STATUS,RoomWidgetChatMessage.MESSAGE_CHAT,RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR];}}]);return RoomWidgetChatInputHandler;}(RoomWidgetHandler);","map":null,"metadata":{},"sourceType":"module"}