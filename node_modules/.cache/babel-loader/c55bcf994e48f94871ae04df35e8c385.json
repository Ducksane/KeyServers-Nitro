{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{BinaryReader}from'../BinaryReader';import{BinaryWriter}from'../BinaryWriter';import{Byte}from'../Byte';import{Short}from'../Short';import{EvaWireDataWrapper}from'./EvaWireDataWrapper';export var EvaWireFormat=/*#__PURE__*/function(){function EvaWireFormat(){_classCallCheck(this,EvaWireFormat);}_createClass(EvaWireFormat,[{key:\"encode\",value:function encode(header,messages){var writer=new BinaryWriter();writer.writeShort(header);var _iterator=_createForOfIteratorHelper(messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;var type=typeof value;if(type==='object'){if(value===null)type='null';else if(value instanceof Byte)type='byte';else if(value instanceof Short)type='short';else if(value instanceof ArrayBuffer)type='arraybuffer';}switch(type){case'undefined':case'null':writer.writeShort(0);break;case'byte':writer.writeByte(value.value);break;case'short':writer.writeShort(value.value);break;case'number':writer.writeInt(value);break;case'boolean':writer.writeByte(value?1:0);break;case'string':if(!value)writer.writeShort(0);else{writer.writeString(value,true);}break;case'arraybuffer':writer.writeBytes(value);break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var buffer=writer.getBuffer();if(!buffer)return null;return new BinaryWriter().writeInt(buffer.byteLength).writeBytes(buffer);}},{key:\"decode\",value:function decode(connection){if(!connection||!connection.dataBuffer||!connection.dataBuffer.byteLength)return null;var wrappers=[];while(connection.dataBuffer.byteLength){if(connection.dataBuffer.byteLength<4)break;var container=new BinaryReader(connection.dataBuffer);var length=container.readInt();if(length>connection.dataBuffer.byteLength-4)break;var extracted=container.readBytes(length);wrappers.push(new EvaWireDataWrapper(extracted.readShort(),extracted));connection.dataBuffer=connection.dataBuffer.slice(length+4);}return wrappers;}}]);return EvaWireFormat;}();","map":null,"metadata":{},"sourceType":"module"}