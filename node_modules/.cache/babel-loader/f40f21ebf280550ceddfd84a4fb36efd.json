{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ObjectDataFactory,RoomEngineTriggerWidgetEvent,RoomObjectCategory,RoomObjectVariable}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetRoomEngine,LocalizeText}from'../../../../../api';import{Column,Flex,Text}from'../../../../../common';import{UseRoomEngineEvent}from'../../../../../hooks';import{useRoomContext}from'../../../RoomContext';import{ContextMenuHeaderView}from'../../context-menu/ContextMenuHeaderView';import{ContextMenuListView}from'../../context-menu/ContextMenuListView';import{ObjectLocationView}from'../../object-location/ObjectLocationView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SCORE_TYPES=['perteam','mostwins','classic'];var CLEAR_TYPES=['alltime','daily','weekly','monthly'];export var FurnitureHighScoreView=function FurnitureHighScoreView(props){var _useState=useState(new Map()),_useState2=_slicedToArray(_useState,2),stuffDatas=_useState2[0],setStuffDatas=_useState2[1];var _useRoomContext=useRoomContext(),_useRoomContext$roomS=_useRoomContext.roomSession,roomSession=_useRoomContext$roomS===void 0?null:_useRoomContext$roomS;var onRoomEngineTriggerWidgetEvent=useCallback(function(event){switch(event.type){case RoomEngineTriggerWidgetEvent.REQUEST_HIGH_SCORE_DISPLAY:{var object=GetRoomEngine().getRoomObject(roomSession.roomId,event.objectId,event.category);if(!object)return;var formatKey=object.model.getValue(RoomObjectVariable.FURNITURE_DATA_FORMAT);var stuffData=ObjectDataFactory.getData(formatKey);stuffData.initializeFromRoomObjectModel(object.model);setStuffDatas(function(prevValue){var newValue=new Map(prevValue);newValue.set(object.id,stuffData);return newValue;});return;}case RoomEngineTriggerWidgetEvent.REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(event.roomId!==roomSession.roomId)return;setStuffDatas(function(prevValue){var newValue=new Map(prevValue);newValue.delete(event.objectId);return newValue;});return;}},[roomSession]);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_HIGH_SCORE_DISPLAY,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_HIDE_HIGH_SCORE_DISPLAY,onRoomEngineTriggerWidgetEvent);if(!stuffDatas.size)return null;return/*#__PURE__*/_jsx(_Fragment,{children:Array.from(stuffDatas.entries()).map(function(_ref,index){var _ref2=_slicedToArray(_ref,2),objectId=_ref2[0],stuffData=_ref2[1];return/*#__PURE__*/_jsx(ObjectLocationView,{objectId:objectId,category:RoomObjectCategory.FLOOR,children:/*#__PURE__*/_jsxs(Column,{className:\"nitro-widget-high-score nitro-context-menu\",gap:0,children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:LocalizeText('high.score.display.caption',['scoretype','cleartype'],[LocalizeText(\"high.score.display.scoretype.\".concat(SCORE_TYPES[stuffData.scoreType])),LocalizeText(\"high.score.display.cleartype.\".concat(CLEAR_TYPES[stuffData.clearType]))])}),/*#__PURE__*/_jsxs(ContextMenuListView,{overflow:\"hidden\",gap:1,className:\"h-100\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Text,{center:true,bold:true,variant:\"white\",className:\"col-8\",children:LocalizeText('high.score.display.users.header')}),/*#__PURE__*/_jsx(Text,{center:true,bold:true,variant:\"white\",className:\"col-4\",children:LocalizeText('high.score.display.score.header')})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/_jsx(Column,{overflow:\"auto\",gap:1,className:\"overflow-y-scroll\",children:stuffData.entries.map(function(entry,index){return/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Text,{center:true,variant:\"white\",className:\"col-8\",children:entry.users.join(', ')}),/*#__PURE__*/_jsx(Text,{center:true,variant:\"white\",className:\"col-4\",children:entry.score})]},index);})})]})]})},index);})});};","map":null,"metadata":{},"sourceType":"module"}