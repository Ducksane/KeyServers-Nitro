{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{BadgePointLimitsEvent,RoomEngineObjectEvent,RoomPreviewer,RoomSessionEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{AddEventLinkTracker,GetLocalization,GetRoomEngine,LocalizeText,RemoveLinkEventTracker,UnseenItemCategory}from'../../api';import{isObjectMoverRequested,setObjectMoverRequested}from'../../api/inventory/InventoryUtilities';import{NitroCardContentView,NitroCardHeaderView,NitroCardView}from'../../common';import{useInventoryTrade,useInventoryUnseenTracker,UseMessageEventHook,UseRoomEngineEvent,UseRoomSessionManagerEvent}from'../../hooks';import{InventoryBadgeView}from'./views/badge/InventoryBadgeView';import{InventoryBotView}from'./views/bot/InventoryBotView';import{InventoryFurnitureView}from'./views/furniture/InventoryFurnitureView';import{InventoryTradeView}from'./views/furniture/InventoryTradeView';import{InventoryPetView}from'./views/pet/InventoryPetView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TAB_FURNITURE='inventory.furni';var TAB_BOTS='inventory.bots';var TAB_PETS='inventory.furni.tab.pets';var TAB_BADGES='inventory.badges';var TABS=[TAB_FURNITURE,TAB_BOTS,TAB_PETS,TAB_BADGES];var UNSEEN_CATEGORIES=[UnseenItemCategory.FURNI,UnseenItemCategory.BOT,UnseenItemCategory.PET,UnseenItemCategory.BADGE];export var InventoryView=function InventoryView(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useState3=useState(TABS[0]),_useState4=_slicedToArray(_useState3,2),currentTab=_useState4[0],setCurrentTab=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),roomSession=_useState6[0],setRoomSession=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),roomPreviewer=_useState8[0],setRoomPreviewer=_useState8[1];var _useInventoryTrade=useInventoryTrade(),_useInventoryTrade$is=_useInventoryTrade.isTrading,isTrading=_useInventoryTrade$is===void 0?false:_useInventoryTrade$is,_useInventoryTrade$st=_useInventoryTrade.stopTrading,stopTrading=_useInventoryTrade$st===void 0?null:_useInventoryTrade$st;var _useInventoryUnseenTr=useInventoryUnseenTracker(),_useInventoryUnseenTr2=_useInventoryUnseenTr.getCount,getCount=_useInventoryUnseenTr2===void 0?null:_useInventoryUnseenTr2,_useInventoryUnseenTr3=_useInventoryUnseenTr.resetCategory,resetCategory=_useInventoryUnseenTr3===void 0?null:_useInventoryUnseenTr3;var close=function close(){if(isTrading)stopTrading();setIsVisible(false);};var onRoomEngineObjectPlacedEvent=useCallback(function(event){if(!isObjectMoverRequested())return;setObjectMoverRequested(false);if(!event.placedInRoom)setIsVisible(true);},[]);UseRoomEngineEvent(RoomEngineObjectEvent.PLACED,onRoomEngineObjectPlacedEvent);var onRoomSessionEvent=useCallback(function(event){switch(event.type){case RoomSessionEvent.CREATED:setRoomSession(event.session);return;case RoomSessionEvent.ENDED:setRoomSession(null);setIsVisible(false);return;}},[]);UseRoomSessionManagerEvent(RoomSessionEvent.CREATED,onRoomSessionEvent);UseRoomSessionManagerEvent(RoomSessionEvent.ENDED,onRoomSessionEvent);var onBadgePointLimitsEvent=useCallback(function(event){var parser=event.getParser();var _iterator=_createForOfIteratorHelper(parser.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var data=_step.value;GetLocalization().setBadgePointLimit(data.badgeId,data.limit);}}catch(err){_iterator.e(err);}finally{_iterator.f();}},[]);UseMessageEventHook(BadgePointLimitsEvent,onBadgePointLimitsEvent);useEffect(function(){var linkTracker={linkReceived:function linkReceived(url){var parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(function(prevValue){return!prevValue;});return;}},eventUrlPrefix:'inventory/'};AddEventLinkTracker(linkTracker);return function(){return RemoveLinkEventTracker(linkTracker);};},[]);useEffect(function(){setRoomPreviewer(new RoomPreviewer(GetRoomEngine(),++RoomPreviewer.PREVIEW_COUNTER));return function(){setRoomPreviewer(function(prevValue){prevValue.dispose();return null;});};},[]);useEffect(function(){if(!isVisible&&isTrading)setIsVisible(true);},[isVisible,isTrading]);if(!isVisible)return null;return/*#__PURE__*/_jsxs(NitroCardView,{uniqueKey:'inventory',className:\"nitro-inventory\",theme:isTrading?'primary-slim':'',children:[!isTrading&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"drag-handler\",children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:\"10px\",fontSize:\"21px\",fontWeight:\"bold\",color:\"var(--test-galaxytext)\",display:\"inline-block\"},children:\"Inventario\"}),TABS.map(function(name,index){return/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline-block\",backgroundColor:\"var(--test-galaxytwo)\",padding:\"4px\",borderRadius:\"4px\",marginRight:\"5px\",cursor:\"pointer\"},onClick:function onClick(event){return setCurrentTab(name);},children:LocalizeText(name)});}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline-block\",float:\"right\",padding:\"13px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"inline-block\",backgroundColor:\"#a61c1c\",padding:\"4px\",borderRadius:\"4px\",marginRight:\"2px\",cursor:\"pointer\"},onClick:function onClick(){return setIsVisible(!isVisible);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"times\"})})}),/*#__PURE__*/_jsx(NitroCardContentView,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"height-fix\",children:[currentTab===TAB_FURNITURE&&/*#__PURE__*/_jsx(InventoryFurnitureView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_BOTS&&/*#__PURE__*/_jsx(InventoryBotView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_PETS&&/*#__PURE__*/_jsx(InventoryPetView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_BADGES&&/*#__PURE__*/_jsx(InventoryBadgeView,{})]})})]})}),isTrading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('inventory.title'),onCloseClick:close}),/*#__PURE__*/_jsx(NitroCardContentView,{children:/*#__PURE__*/_jsx(InventoryTradeView,{cancelTrade:close})})]})]});};","map":null,"metadata":{},"sourceType":"module"}