{"ast":null,"code":"import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _get from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{NitroManager}from'../../core/common/NitroManager';import{SocketConnectionEvent}from'../../core/communication/events/SocketConnectionEvent';import{Nitro}from'../Nitro';import{NitroCommunicationDemo}from'./demo/NitroCommunicationDemo';import{NitroCommunicationDemoEvent}from'./demo/NitroCommunicationDemoEvent';import{NitroMessages}from'./NitroMessages';export var NitroCommunicationManager=/*#__PURE__*/function(_NitroManager){_inherits(NitroCommunicationManager,_NitroManager);var _super=_createSuper(NitroCommunicationManager);function NitroCommunicationManager(communication){var _this;_classCallCheck(this,NitroCommunicationManager);_this=_super.call(this);_this._communication=void 0;_this._connection=void 0;_this._messages=void 0;_this._demo=void 0;_this._communication=communication;_this._connection=null;_this._messages=new NitroMessages();_this._demo=new NitroCommunicationDemo(_assertThisInitialized(_this));_this.onConnectionOpenedEvent=_this.onConnectionOpenedEvent.bind(_assertThisInitialized(_this));_this.onConnectionClosedEvent=_this.onConnectionClosedEvent.bind(_assertThisInitialized(_this));_this.onConnectionErrorEvent=_this.onConnectionErrorEvent.bind(_assertThisInitialized(_this));_this.onConnectionAuthenticatedEvent=_this.onConnectionAuthenticatedEvent.bind(_assertThisInitialized(_this));return _this;}_createClass(NitroCommunicationManager,[{key:\"onInit\",value:function onInit(){if(this._connection)return;Nitro.instance.events.addEventListener(NitroCommunicationDemoEvent.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent);this._connection=this._communication.createConnection(this);this._connection.registerMessages(this._messages);this._connection.addEventListener(SocketConnectionEvent.CONNECTION_OPENED,this.onConnectionOpenedEvent);this._connection.addEventListener(SocketConnectionEvent.CONNECTION_CLOSED,this.onConnectionClosedEvent);this._connection.addEventListener(SocketConnectionEvent.CONNECTION_ERROR,this.onConnectionErrorEvent);if(this._demo)this._demo.init();this._connection.init(Nitro.instance.getConfiguration('socket.url'));}},{key:\"onDispose\",value:function onDispose(){if(this._demo)this._demo.dispose();if(this._connection){this._connection.removeEventListener(SocketConnectionEvent.CONNECTION_OPENED,this.onConnectionOpenedEvent);this._connection.removeEventListener(SocketConnectionEvent.CONNECTION_CLOSED,this.onConnectionClosedEvent);this._connection.removeEventListener(SocketConnectionEvent.CONNECTION_ERROR,this.onConnectionErrorEvent);}Nitro.instance.events.removeEventListener(NitroCommunicationDemoEvent.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent);_get(_getPrototypeOf(NitroCommunicationManager.prototype),\"onDispose\",this).call(this);}},{key:\"onConnectionOpenedEvent\",value:function onConnectionOpenedEvent(event){this.logger.log('Connection Initialized');}},{key:\"onConnectionClosedEvent\",value:function onConnectionClosedEvent(event){this.logger.log('Connection Closed');}},{key:\"onConnectionErrorEvent\",value:function onConnectionErrorEvent(event){this.logger.log('Connection Error');}},{key:\"onConnectionAuthenticatedEvent\",value:function onConnectionAuthenticatedEvent(event){this.logger.log('Connection Authenticated');if(this._connection)this._connection.authenticated();}},{key:\"connectionInit\",value:function connectionInit(socketUrl){this.logger.log(\"Initializing Connection: \".concat(socketUrl));}},{key:\"registerMessageEvent\",value:function registerMessageEvent(event){if(this._connection)this._connection.addMessageEvent(event);return event;}},{key:\"removeMessageEvent\",value:function removeMessageEvent(event){if(!this._connection)return;this._connection.removeMessageEvent(event);}},{key:\"demo\",get:function get(){return this._demo;}},{key:\"connection\",get:function get(){return this._connection;}}]);return NitroCommunicationManager;}(NitroManager);","map":null,"metadata":{},"sourceType":"module"}