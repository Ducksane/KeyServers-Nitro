{"ast":null,"code":"import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{MouseEventType}from'../../../../ui/MouseEventType';import{RoomObjectHSLColorEnableEvent}from'../../../events/RoomObjectHSLColorEnableEvent';import{RoomObjectWidgetRequestEvent}from'../../../events/RoomObjectWidgetRequestEvent';import{ObjectDataUpdateMessage}from'../../../messages/ObjectDataUpdateMessage';import{NumberDataType}from'../../data/type/NumberDataType';import{RoomObjectVariable}from'../../RoomObjectVariable';import{FurnitureMultiStateLogic}from'./FurnitureMultiStateLogic';export var FurnitureRoomBackgroundColorLogic=/*#__PURE__*/function(_FurnitureMultiStateL){_inherits(FurnitureRoomBackgroundColorLogic,_FurnitureMultiStateL);var _super=_createSuper(FurnitureRoomBackgroundColorLogic);function FurnitureRoomBackgroundColorLogic(){var _this;_classCallCheck(this,FurnitureRoomBackgroundColorLogic);_this=_super.call(this);_this._roomColorUpdated=void 0;_this._roomColorUpdated=false;return _this;}_createClass(FurnitureRoomBackgroundColorLogic,[{key:\"getEventTypes\",value:function getEventTypes(){var types=[RoomObjectWidgetRequestEvent.BACKGROUND_COLOR,RoomObjectHSLColorEnableEvent.ROOM_BACKGROUND_COLOR];return this.mergeTypes(_get(_getPrototypeOf(FurnitureRoomBackgroundColorLogic.prototype),\"getEventTypes\",this).call(this),types);}},{key:\"onDispose\",value:function onDispose(){if(this._roomColorUpdated){if(this.eventDispatcher&&this.object){var realRoomObject=this.object.model.getValue(RoomObjectVariable.FURNITURE_REAL_ROOM_OBJECT);if(realRoomObject===1){this.eventDispatcher.dispatchEvent(new RoomObjectHSLColorEnableEvent(RoomObjectHSLColorEnableEvent.ROOM_BACKGROUND_COLOR,this.object,false,0,0,0));}}this._roomColorUpdated=false;}_get(_getPrototypeOf(FurnitureRoomBackgroundColorLogic.prototype),\"onDispose\",this).call(this);}},{key:\"processUpdateMessage\",value:function processUpdateMessage(message){_get(_getPrototypeOf(FurnitureRoomBackgroundColorLogic.prototype),\"processUpdateMessage\",this).call(this,message);if(message instanceof ObjectDataUpdateMessage){message.data.writeRoomObjectModel(this.object.model);var realRoomObject=this.object.model.getValue(RoomObjectVariable.FURNITURE_REAL_ROOM_OBJECT);if(realRoomObject===1)this.processColorUpdate();}}},{key:\"processColorUpdate\",value:function processColorUpdate(){if(!this.object||!this.object.model)return;var numberData=new NumberDataType();numberData.initializeFromRoomObjectModel(this.object.model);var state=numberData.getValue(0);var hue=numberData.getValue(1);var saturation=numberData.getValue(2);var lightness=numberData.getValue(3);if(state>-1&&hue>-1&&saturation>-1&&lightness>-1){this.object.model.setValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_HUE,hue);this.object.model.setValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION,saturation);this.object.model.setValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS,lightness);this.object.setState(state,0);if(this.eventDispatcher){this.eventDispatcher.dispatchEvent(new RoomObjectHSLColorEnableEvent(RoomObjectHSLColorEnableEvent.ROOM_BACKGROUND_COLOR,this.object,state===1,hue,saturation,lightness));}this._roomColorUpdated=true;}}},{key:\"mouseEvent\",value:function mouseEvent(event,geometry){if(!event||!geometry||!this.object)return;switch(event.type){case MouseEventType.DOUBLE_CLICK:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.BACKGROUND_COLOR,this.object));return;}_get(_getPrototypeOf(FurnitureRoomBackgroundColorLogic.prototype),\"mouseEvent\",this).call(this,event,geometry);}}]);return FurnitureRoomBackgroundColorLogic;}(FurnitureMultiStateLogic);","map":null,"metadata":{},"sourceType":"module"}