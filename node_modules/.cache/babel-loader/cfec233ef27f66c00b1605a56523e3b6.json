{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Matrix,Point}from'@pixi/math';import{NitroSprite}from'../../../../../../../core';import{Randomizer}from'../../utils';export var PlaneMaterialCell=/*#__PURE__*/function(){function PlaneMaterialCell(texture){var assets=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var offsetPoints=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var limit=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;_classCallCheck(this,PlaneMaterialCell);this._cachedSprite=void 0;this._texture=void 0;this._extraItemOffsets=void 0;this._extraItemAssets=void 0;this._extraItemCount=0;this._cachedSprite=null;this._texture=texture;this._extraItemOffsets=[];this._extraItemAssets=[];this._extraItemCount=0;if(assets&&assets.length&&limit>0){var assetIndex=0;while(assetIndex<assets.length){var graphic=assets[assetIndex];if(graphic)this._extraItemAssets.push(graphic);assetIndex++;}if(this._extraItemAssets.length){if(offsetPoints){var pointIndex=0;while(pointIndex<offsetPoints.length){var point=offsetPoints[pointIndex];if(point)this._extraItemOffsets.push(new Point(point.x,point.y));pointIndex++;}}this._extraItemCount=limit;}}}_createClass(PlaneMaterialCell,[{key:\"isStatic\",get:function get(){return this._extraItemCount==0;}},{key:\"dispose\",value:function dispose(){if(this._texture){this._texture.dispose();this._texture=null;}if(this._cachedSprite){this._cachedSprite.destroy();this._cachedSprite=null;}this._extraItemAssets=null;this._extraItemOffsets=null;this._extraItemCount=0;}},{key:\"clearCache\",value:function clearCache(){if(this._cachedSprite){this._cachedSprite.destroy();this._cachedSprite=null;}}},{key:\"getHeight\",value:function getHeight(normal){if(this._texture){var texture=this._texture.getBitmap(normal);if(texture)return texture.height;}return 0;}},{key:\"render\",value:function render(normal,textureOffsetX,textureOffsetY){if(!this._texture)return null;var texture=this._texture.getBitmap(normal);if(!texture)return null;var bitmap=new NitroSprite(texture);if(textureOffsetX!==0||textureOffsetY!==0){while(textureOffsetX<0){textureOffsetX+=texture.width;}while(textureOffsetY<0){textureOffsetY+=texture.height;}bitmap.x=textureOffsetX%texture.width;bitmap.y=textureOffsetY%texture.height;if(textureOffsetX){bitmap.anchor.x=1;bitmap.scale.x=-1;}if(textureOffsetY){bitmap.anchor.y=1;bitmap.scale.y=-1;}}if(bitmap){if(!this.isStatic){if(this._cachedSprite){if(this._cachedSprite.width!==bitmap.width||this._cachedSprite.height!==bitmap.height){this._cachedSprite.destroy();this._cachedSprite=null;}}if(!this._cachedSprite){this._cachedSprite=new NitroSprite(texture);}var limitMin=Math.min(this._extraItemCount,this._extraItemOffsets.length);var limitMax=Math.max(this._extraItemCount,this._extraItemOffsets.length);var offsetIndexes=Randomizer.getArray(this._extraItemCount,limitMax);var i=0;while(i<limitMin){var offset=this._extraItemOffsets[offsetIndexes[i]];var item=this._extraItemAssets[i%this._extraItemAssets.length];if(offset&&item){var assetTexture=item.texture;if(assetTexture){var offsetFinal=new Point(offset.x+item.offsetX,offset.y+item.offsetY);var flipMatrix=new Matrix();var x=1;var y=1;var translateX=0;var translateY=0;if(item.flipH){x=-1;translateX=assetTexture.width;}if(item.flipV){y=-1;translateY=assetTexture.height;}var offsetX=offsetFinal.x+translateX;offsetX=offsetX>>1<<1;flipMatrix.scale(x,y);flipMatrix.translate(offsetX,offsetFinal.y+translateY);var sprite=new NitroSprite(assetTexture);sprite.transform.setFromMatrix(flipMatrix);sprite.x=flipMatrix.tx;sprite.y=flipMatrix.ty;this._cachedSprite.addChild(sprite);}}i++;}return this._cachedSprite;}return bitmap;}return null;}},{key:\"getAssetName\",value:function getAssetName(normal){return this._texture==null?null:this._texture.getAssetName(normal);}}]);return PlaneMaterialCell;}();","map":null,"metadata":{},"sourceType":"module"}