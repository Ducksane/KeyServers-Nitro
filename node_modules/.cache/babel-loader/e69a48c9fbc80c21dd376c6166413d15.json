{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{FlatControllerAddedEvent,FlatControllerRemovedEvent,FlatControllersEvent,RemoveAllRightsMessageComposer,RoomTakeRightsComposer,RoomUsersWithRightsComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{Button,Column,Flex,Grid,Text,UserProfileIconView}from'../../../../common';import{UseMessageEventHook}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var NavigatorRoomSettingsRightsTabView=function NavigatorRoomSettingsRightsTabView(props){var _props$roomData=props.roomData,roomData=_props$roomData===void 0?null:_props$roomData;var _useState=useState(new Map()),_useState2=_slicedToArray(_useState,2),usersWithRights=_useState2[0],setUsersWithRights=_useState2[1];var onFlatControllersEvent=useCallback(function(event){var parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(parser.users);},[roomData]);UseMessageEventHook(FlatControllersEvent,onFlatControllersEvent);var onFlatControllerAddedEvent=useCallback(function(event){var parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(function(prevValue){var newValue=new Map(prevValue);newValue.set(parser.data.userId,parser.data.userName);return newValue;});},[roomData]);UseMessageEventHook(FlatControllerAddedEvent,onFlatControllerAddedEvent);var onFlatControllerRemovedEvent=useCallback(function(event){var parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(function(prevValue){var newValue=new Map(prevValue);newValue.delete(parser.userId);return newValue;});},[roomData]);UseMessageEventHook(FlatControllerRemovedEvent,onFlatControllerRemovedEvent);useEffect(function(){SendMessageComposer(new RoomUsersWithRightsComposer(roomData.roomId));},[roomData.roomId]);return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsxs(Column,{size:6,children:[/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},bold:true,children:LocalizeText('navigator.flatctrls.userswithrights',['displayed','total'],[usersWithRights.size.toString(),usersWithRights.size.toString()])}),/*#__PURE__*/_jsx(Flex,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:/*#__PURE__*/_jsx(Column,{fullWidth:true,overflow:\"auto\",gap:1,children:Array.from(usersWithRights.entries()).map(function(_ref,index){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],name=_ref2[1];return/*#__PURE__*/_jsxs(Flex,{shrink:true,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(UserProfileIconView,{userName:name}),/*#__PURE__*/_jsxs(Text,{pointer:true,grow:true,onClick:function onClick(event){return SendMessageComposer(new RoomTakeRightsComposer(id));},children:[\" \",name]})]},index);})})})]}),/*#__PURE__*/_jsx(Column,{size:6,justifyContent:\"end\",children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",disabled:!usersWithRights.size,onClick:function onClick(event){return SendMessageComposer(new RemoveAllRightsMessageComposer(roomData.roomId));},children:LocalizeText('navigator.flatctrls.clear')})})]});};","map":null,"metadata":{},"sourceType":"module"}