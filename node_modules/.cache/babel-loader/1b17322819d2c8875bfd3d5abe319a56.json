{"ast":null,"code":"import _objectSpread from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{FurnitureStackHeightComposer,FurnitureStackHeightEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import ReactSlider from'react-slider';import{LocalizeText,RoomWidgetUpdateCustomStackHeightEvent,SendMessageComposer}from'../../../../../api';import{Button,Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../../common';import{UseEventDispatcherHook,UseMessageEventHook}from'../../../../../hooks';import{useRoomContext}from'../../../RoomContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MAX_HEIGHT=40;export var FurnitureCustomStackHeightView=function FurnitureCustomStackHeightView(props){var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),objectId=_useState2[0],setObjectId=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),height=_useState4[0],setHeight=_useState4[1];var _useState5=useState(-1),_useState6=_slicedToArray(_useState5,2),pendingHeight=_useState6[0],setPendingHeight=_useState6[1];var _useRoomContext=useRoomContext(),_useRoomContext$event=_useRoomContext.eventDispatcher,eventDispatcher=_useRoomContext$event===void 0?null:_useRoomContext$event;var close=function close(){setObjectId(-1);setHeight(0);};var updateHeight=useCallback(function(height){var fromServer=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!height)height=0;height=Math.abs(height);if(!fromServer)height>MAX_HEIGHT&&(height=MAX_HEIGHT);setHeight(parseFloat(height.toFixed(2)));if(!fromServer)setPendingHeight(height*100);},[]);var onRoomWidgetUpdateCustomStackHeightEvent=useCallback(function(event){switch(event.type){case RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT:{setObjectId(event.objectId);updateHeight(event.height,true);}}},[updateHeight]);UseEventDispatcherHook(RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT,eventDispatcher,onRoomWidgetUpdateCustomStackHeightEvent);var onFurnitureStackHeightEvent=useCallback(function(event){var parser=event.getParser();if(objectId!==parser.furniId)return;updateHeight(parser.height,true);},[objectId,updateHeight]);UseMessageEventHook(FurnitureStackHeightEvent,onFurnitureStackHeightEvent);var sendUpdate=useCallback(function(height){SendMessageComposer(new FurnitureStackHeightComposer(objectId,~~height));},[objectId]);useEffect(function(){if(objectId===-1||pendingHeight===-1)return;var timeout=setTimeout(function(){return sendUpdate(~~pendingHeight);},10);return function(){return clearTimeout(timeout);};},[objectId,pendingHeight,sendUpdate]);if(objectId===-1)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-widget-custom-stack-height\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('widget.custom.stack.height.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('widget.custom.stack.height.text')}),/*#__PURE__*/_jsxs(Flex,{gap:2,children:[/*#__PURE__*/_jsx(ReactSlider,{className:\"nitro-slider\",min:0,max:MAX_HEIGHT,step:0.01,value:height,onChange:function onChange(event){return updateHeight(event);},renderThumb:function renderThumb(props,state){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},props),{},{children:state.valueNow}));}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:0,max:MAX_HEIGHT,value:height,onChange:function onChange(event){return updateHeight(parseFloat(event.target.value));}})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return sendUpdate(-100);},children:LocalizeText('furniture.above.stack')}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return sendUpdate(0);},children:LocalizeText('furniture.floor.level')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}