{"ast":null,"code":"import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{RoomObjectLogicBase}from'../../../../room/object/logic/RoomObjectLogicBase';import{Vector3d}from'../../../../room/utils/Vector3d';import{ObjectMoveUpdateMessage}from'../../messages/ObjectMoveUpdateMessage';import{RoomObjectVariable}from'../RoomObjectVariable';export var MovingObjectLogic=/*#__PURE__*/function(_RoomObjectLogicBase){_inherits(MovingObjectLogic,_RoomObjectLogicBase);var _super=_createSuper(MovingObjectLogic);function MovingObjectLogic(){var _this;_classCallCheck(this,MovingObjectLogic);_this=_super.call(this);_this._liftAmount=void 0;_this._location=void 0;_this._locationDelta=void 0;_this._lastUpdateTime=void 0;_this._changeTime=void 0;_this._updateInterval=void 0;_this._liftAmount=0;_this._location=new Vector3d();_this._locationDelta=new Vector3d();_this._lastUpdateTime=0;_this._changeTime=0;_this._updateInterval=MovingObjectLogic.DEFAULT_UPDATE_INTERVAL;return _this;}_createClass(MovingObjectLogic,[{key:\"onDispose\",value:function onDispose(){this._liftAmount=0;_get(_getPrototypeOf(MovingObjectLogic.prototype),\"onDispose\",this).call(this);}},{key:\"update\",value:function update(time){_get(_getPrototypeOf(MovingObjectLogic.prototype),\"update\",this).call(this,time);var locationOffset=this.getLocationOffset();var model=this.object&&this.object.model;if(model){if(locationOffset){if(this._liftAmount!==locationOffset.z){this._liftAmount=locationOffset.z;model.setValue(RoomObjectVariable.FURNITURE_LIFT_AMOUNT,this._liftAmount);}}else{if(this._liftAmount!==0){this._liftAmount=0;model.setValue(RoomObjectVariable.FURNITURE_LIFT_AMOUNT,this._liftAmount);}}}if(this._locationDelta.length>0||locationOffset){var vector=MovingObjectLogic.TEMP_VECTOR;var difference=this.time-this._changeTime;if(difference===this._updateInterval>>1)difference++;if(difference>this._updateInterval)difference=this._updateInterval;if(this._locationDelta.length>0){vector.assign(this._locationDelta);vector.multiply(difference/this._updateInterval);vector.add(this._location);}else{vector.assign(this._location);}if(locationOffset)vector.add(locationOffset);this.object.setLocation(vector);if(difference===this._updateInterval){this._locationDelta.x=0;this._locationDelta.y=0;this._locationDelta.z=0;}}this._lastUpdateTime=this.time;}},{key:\"setObject\",value:function setObject(object){_get(_getPrototypeOf(MovingObjectLogic.prototype),\"setObject\",this).call(this,object);if(object)this._location.assign(object.getLocation());}},{key:\"processUpdateMessage\",value:function processUpdateMessage(message){if(!message)return;_get(_getPrototypeOf(MovingObjectLogic.prototype),\"processUpdateMessage\",this).call(this,message);if(message.location)this._location.assign(message.location);if(message instanceof ObjectMoveUpdateMessage)return this.processMoveMessage(message);}},{key:\"processMoveMessage\",value:function processMoveMessage(message){if(!message||!this.object||!message.location)return;this._changeTime=this._lastUpdateTime;this._locationDelta.assign(message.targetLocation);this._locationDelta.subtract(this._location);}},{key:\"getLocationOffset\",value:function getLocationOffset(){return null;}},{key:\"lastUpdateTime\",get:function get(){return this._lastUpdateTime;}},{key:\"updateInterval\",set:function set(interval){if(interval<=0)interval=1;this._updateInterval=interval;}}]);return MovingObjectLogic;}(RoomObjectLogicBase);MovingObjectLogic.DEFAULT_UPDATE_INTERVAL=500;MovingObjectLogic.TEMP_VECTOR=new Vector3d();","map":null,"metadata":{},"sourceType":"module"}