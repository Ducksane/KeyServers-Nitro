{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ContextMenuEnum,GroupFurniContextMenuInfoMessageEvent,RoomEngineTriggerWidgetEvent,RoomObjectCategory}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetGroupInformation,GetRoomEngine,IsOwnerOfFurniture,LocalizeText,RoomWidgetFurniActionMessage,TryJoinGroup,TryVisitRoom}from'../../../../../api';import{UseMessageEventHook,UseRoomEngineEvent}from'../../../../../hooks';import{useRoomContext}from'../../../RoomContext';import{ContextMenuHeaderView}from'../../context-menu/ContextMenuHeaderView';import{ContextMenuListItemView}from'../../context-menu/ContextMenuListItemView';import{ContextMenuView}from'../../context-menu/ContextMenuView';import{EffectBoxConfirmView}from'./EffectBoxConfirmView';import{MonsterPlantSeedConfirmView}from'./MonsterPlantSeedConfirmView';import{PurchasableClothingConfirmView}from'./PurchasableClothingConfirmView';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MONSTERPLANT_SEED_CONFIRMATION='MONSTERPLANT_SEED_CONFIRMATION';var PURCHASABLE_CLOTHING_CONFIRMATION='PURCHASABLE_CLOTHING_CONFIRMATION';var GROUP_FURNITURE='GROUP_FURNITURE';var EFFECTBOX_OPEN='EFFECTBOX_OPEN';export var FurnitureContextMenuView=function FurnitureContextMenuView(props){var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),objectId=_useState2[0],setObjectId=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),mode=_useState4[0],setMode=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),confirmMode=_useState6[0],setConfirmMode=_useState6[1];var _useState7=useState(-1),_useState8=_slicedToArray(_useState7,2),confirmingObjectId=_useState8[0],setConfirmingObjectId=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),groupData=_useState10[0],setGroupData=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isGroupMember=_useState12[0],setIsGroupMember=_useState12[1];var _useRoomContext=useRoomContext(),_useRoomContext$roomS=_useRoomContext.roomSession,roomSession=_useRoomContext$roomS===void 0?null:_useRoomContext$roomS,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var close=useCallback(function(){setObjectId(-1);setGroupData(null);setIsGroupMember(false);setMode(null);},[]);var closeConfirm=function closeConfirm(){setConfirmMode(null);setConfirmingObjectId(-1);};var onRoomEngineTriggerWidgetEvent=useCallback(function(event){var object=GetRoomEngine().getRoomObject(roomSession.roomId,event.objectId,event.category);if(!object)return;switch(event.type){case RoomEngineTriggerWidgetEvent.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(MONSTERPLANT_SEED_CONFIRMATION);close();return;case RoomEngineTriggerWidgetEvent.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(EFFECTBOX_OPEN);close();return;case RoomEngineTriggerWidgetEvent.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(PURCHASABLE_CLOTHING_CONFIRMATION);close();return;case RoomEngineTriggerWidgetEvent.OPEN_FURNI_CONTEXT_MENU:setObjectId(object.id);switch(event.contextMenu){case ContextMenuEnum.FRIEND_FURNITURE:setMode(ContextMenuEnum.FRIEND_FURNITURE);return;case ContextMenuEnum.MONSTERPLANT_SEED:if(IsOwnerOfFurniture(object))setMode(ContextMenuEnum.MONSTERPLANT_SEED);return;case ContextMenuEnum.MYSTERY_BOX:return;case ContextMenuEnum.RANDOM_TELEPORT:setMode(ContextMenuEnum.RANDOM_TELEPORT);return;case ContextMenuEnum.PURCHASABLE_CLOTHING:if(IsOwnerOfFurniture(object))setMode(ContextMenuEnum.PURCHASABLE_CLOTHING);return;}return;case RoomEngineTriggerWidgetEvent.CLOSE_FURNI_CONTEXT_MENU:if(object.id===objectId)close();return;}},[roomSession,objectId,close]);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.OPEN_FURNI_CONTEXT_MENU,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.CLOSE_FURNI_CONTEXT_MENU,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_EFFECTBOX_OPEN_DIALOG,onRoomEngineTriggerWidgetEvent);var onGroupFurniContextMenuInfoMessageEvent=useCallback(function(event){var parser=event.getParser();setObjectId(parser.objectId);setGroupData(parser);setIsGroupMember(parser.userIsMember);setMode(GROUP_FURNITURE);},[]);UseMessageEventHook(GroupFurniContextMenuInfoMessageEvent,onGroupFurniContextMenuInfoMessageEvent);var processAction=function processAction(name){if(name){switch(name){case'use_friend_furni':roomSession.useMultistateItem(objectId);break;case'use_monsterplant_seed':setConfirmMode(MONSTERPLANT_SEED_CONFIRMATION);setConfirmingObjectId(objectId);break;case'use_random_teleport':widgetHandler.processWidgetMessage(new RoomWidgetFurniActionMessage(RoomWidgetFurniActionMessage.USE,objectId,RoomObjectCategory.FLOOR));break;case'use_purchaseable_clothing':setConfirmMode(PURCHASABLE_CLOTHING_CONFIRMATION);setConfirmingObjectId(objectId);break;case'join_group':TryJoinGroup(groupData.guildId);setIsGroupMember(true);return;case'go_to_group_homeroom':if(groupData)TryVisitRoom(groupData.guildHomeRoomId);break;}}close();};return/*#__PURE__*/_jsxs(_Fragment,{children:[confirmMode===MONSTERPLANT_SEED_CONFIRMATION&&/*#__PURE__*/_jsx(MonsterPlantSeedConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),confirmMode===PURCHASABLE_CLOTHING_CONFIRMATION&&/*#__PURE__*/_jsx(PurchasableClothingConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),confirmMode===EFFECTBOX_OPEN&&/*#__PURE__*/_jsx(EffectBoxConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),objectId>=0&&mode&&/*#__PURE__*/_jsxs(ContextMenuView,{objectId:objectId,category:RoomObjectCategory.FLOOR,close:close,fades:true,children:[mode===ContextMenuEnum.FRIEND_FURNITURE&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:LocalizeText('friendfurni.context.title')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('use_friend_furni');},children:LocalizeText('friendfurni.context.use')})]}),mode===ContextMenuEnum.MONSTERPLANT_SEED&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:LocalizeText('furni.mnstr_seed.name')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('use_monsterplant_seed');},children:LocalizeText('widget.monsterplant_seed.button.use')})]}),mode===ContextMenuEnum.RANDOM_TELEPORT&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:LocalizeText('furni.random_teleport.name')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('use_random_teleport');},children:LocalizeText('widget.random_teleport.button.use')})]}),mode===ContextMenuEnum.PURCHASABLE_CLOTHING&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:LocalizeText('furni.generic_usable.name')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('use_purchaseable_clothing');},children:LocalizeText('widget.generic_usable.button.use')})]}),mode===GROUP_FURNITURE&&groupData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{className:\"cursor-pointer text-truncate\",onClick:function onClick(){return GetGroupInformation(groupData.guildId);},children:groupData.guildName}),!isGroupMember&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('join_group');},children:LocalizeText('widget.furniture.button.join.group')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('go_to_group_homeroom');},children:LocalizeText('widget.furniture.button.go.to.group.home.room')}),groupData.guildHasReadableForum&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('open_forum');},children:LocalizeText('widget.furniture.button.open_group_forum')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}