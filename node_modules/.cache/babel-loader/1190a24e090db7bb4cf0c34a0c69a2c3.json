{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{GetAvatarPalette,GetAvatarRenderManager,GetAvatarSetType,GetClubMemberLevel,GetConfiguration}from'../../../api';import{AvatarEditorGridColorItem}from'./AvatarEditorGridColorItem';import{AvatarEditorGridPartItem}from'./AvatarEditorGridPartItem';import{CategoryData}from'./CategoryData';import{FigureData}from'./FigureData';export var AvatarEditorUtilities=/*#__PURE__*/function(){function AvatarEditorUtilities(){_classCallCheck(this,AvatarEditorUtilities);}_createClass(AvatarEditorUtilities,null,[{key:\"getGender\",value:function getGender(gender){switch(gender){case FigureData.MALE:case'm':case'M':gender=FigureData.MALE;break;case FigureData.FEMALE:case'f':case'F':gender=FigureData.FEMALE;break;default:gender=FigureData.MALE;}return gender;}},{key:\"hasFigureSetId\",value:function hasFigureSetId(setId){return this.FIGURE_SET_IDS.indexOf(setId)>=0;}},{key:\"createCategory\",value:function createCategory(model,name){if(!model||!name||!this.CURRENT_FIGURE)return null;var partItems=[];var colorItems=[];var i=0;while(i<this.MAX_PALETTES){colorItems.push([]);i++;}var setType=GetAvatarSetType(name);if(!setType)return null;var palette=GetAvatarPalette(setType.paletteID);if(!palette)return null;var colorIds=this.CURRENT_FIGURE.getColorIds(name);if(!colorIds)colorIds=[];var partColors=new Array(colorIds.length);var clubItemsDimmed=this.clubItemsDimmed;var clubMemberLevel=GetClubMemberLevel();var _iterator=_createForOfIteratorHelper(palette.colors.getValues()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var partColor=_step.value;if(partColor.isSelectable&&(clubItemsDimmed||clubMemberLevel>=partColor.clubLevel)){var _i=0;while(_i<this.MAX_PALETTES){var _isDisabled=clubMemberLevel<partColor.clubLevel;var colorItem=new AvatarEditorGridColorItem(partColor,_isDisabled);colorItems[_i].push(colorItem);_i++;}if(name!==FigureData.FACE){var _i2=0;while(_i2<colorIds.length){if(partColor.id===colorIds[_i2])partColors[_i2]=partColor;_i2++;}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var mandatorySetIds=[];if(clubItemsDimmed){mandatorySetIds=GetAvatarRenderManager().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2);}else{mandatorySetIds=GetAvatarRenderManager().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,clubMemberLevel);}var isntMandatorySet=mandatorySetIds.indexOf(name)===-1;if(isntMandatorySet){var partItem=new AvatarEditorGridPartItem(null,null,false);partItem.isClear=true;partItems.push(partItem);}var usesColors=name!==FigureData.FACE;var partSets=setType.partSets;var totalPartSets=partSets.length;i=totalPartSets-1;while(i>=0){var partSet=partSets.getWithIndex(i);var isValidGender=false;if(partSet.gender===FigureData.UNISEX){isValidGender=true;}else if(partSet.gender===this.CURRENT_FIGURE.gender){isValidGender=true;}if(partSet.isSelectable&&isValidGender&&(clubItemsDimmed||clubMemberLevel>=partSet.clubLevel)){var isDisabled=clubMemberLevel<partSet.clubLevel;var isValid=true;if(partSet.isSellable)isValid=this.hasFigureSetId(partSet.id);if(isValid)partItems.push(new AvatarEditorGridPartItem(partSet,partColors,usesColors,isDisabled));}i--;}partItems.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter);// if(this._forceSellableClothingVisibility || GetNitroInstance().getConfiguration<boolean>(\"avatareditor.support.sellablefurni\", false))\n// {\n//     _local_31 = (this._manager.windowManager.assets.getAssetByName(\"camera_zoom_in\") as BitmapDataAsset);\n//     _local_32 = (_local_31.content as BitmapData).clone();\n//     _local_33 = (AvatarEditorView._Str_6802.clone() as IWindowContainer);\n//     _local_33.name = AvatarEditorGridView.GET_MORE;\n//     _local_7 = new AvatarEditorGridPartItem(_local_33, k, null, null, false);\n//     _local_7._Str_3093 = _local_32;\n//     _local_3.push(_local_7);\n// }\ni=0;while(i<this.MAX_PALETTES){colorItems[i].sort(this.colorSorter);i++;}return new CategoryData(name,partItems,colorItems);}},{key:\"clubSorter\",value:function clubSorter(a,b){var clubLevelA=!a.partSet?9999999999:a.partSet.clubLevel;var clubLevelB=!b.partSet?9999999999:b.partSet.clubLevel;var isSellableA=!a.partSet?false:a.partSet.isSellable;var isSellableB=!b.partSet?false:b.partSet.isSellable;if(isSellableA&&!isSellableB)return 1;if(isSellableB&&!isSellableA)return-1;if(clubLevelA>clubLevelB)return-1;if(clubLevelA<clubLevelB)return 1;if(a.partSet.id>b.partSet.id)return-1;if(a.partSet.id<b.partSet.id)return 1;return 0;}},{key:\"colorSorter\",value:function colorSorter(a,b){var clubLevelA=!a.partColor?-1:a.partColor.clubLevel;var clubLevelB=!b.partColor?-1:b.partColor.clubLevel;if(clubLevelA<clubLevelB)return-1;if(clubLevelA>clubLevelB)return 1;if(a.partColor.index<b.partColor.index)return-1;if(a.partColor.index>b.partColor.index)return 1;return 0;}},{key:\"noobSorter\",value:function noobSorter(a,b){var clubLevelA=!a.partSet?-1:a.partSet.clubLevel;var clubLevelB=!b.partSet?-1:b.partSet.clubLevel;var isSellableA=!a.partSet?false:a.partSet.isSellable;var isSellableB=!b.partSet?false:b.partSet.isSellable;if(isSellableA&&!isSellableB)return 1;if(isSellableB&&!isSellableA)return-1;if(clubLevelA<clubLevelB)return-1;if(clubLevelA>clubLevelB)return 1;if(a.partSet.id<b.partSet.id)return-1;if(a.partSet.id>b.partSet.id)return 1;return 0;}},{key:\"avatarSetFirstSelectableColor\",value:function avatarSetFirstSelectableColor(name){var setType=GetAvatarSetType(name);if(!setType)return-1;var palette=GetAvatarPalette(setType.paletteID);if(!palette)return-1;var _iterator2=_createForOfIteratorHelper(palette.colors.getValues()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var color=_step2.value;if(!color.isSelectable||GetClubMemberLevel()<color.clubLevel)continue;return color.id;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return-1;}},{key:\"clubItemsFirst\",get:function get(){return GetConfiguration('avatareditor.show.clubitems.first',true);}},{key:\"clubItemsDimmed\",get:function get(){return GetConfiguration('avatareditor.show.clubitems.dimmed',true);}}]);return AvatarEditorUtilities;}();AvatarEditorUtilities.MAX_PALETTES=2;AvatarEditorUtilities.CURRENT_FIGURE=null;AvatarEditorUtilities.FIGURE_SET_IDS=[];AvatarEditorUtilities.BOUND_FURNITURE_NAMES=[];","map":null,"metadata":{},"sourceType":"module"}