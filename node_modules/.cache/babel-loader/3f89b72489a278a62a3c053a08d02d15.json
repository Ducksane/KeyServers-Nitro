{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{DefaultSanctionMessageComposer,ModAlertMessageComposer,ModBanMessageComposer,ModKickMessageComposer,ModMessageMessageComposer,ModMuteMessageComposer,ModTradingLockMessageComposer}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{LocalizeText,NotificationAlertType,NotificationUtilities,SendMessageComposer}from'../../../../api';import{Button,Column,DraggableWindowPosition,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{ModActionDefinition}from'../../common/ModActionDefinition';import{useModToolsContext}from'../../ModToolsContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MOD_ACTION_DEFINITIONS=[new ModActionDefinition(1,'Alert',ModActionDefinition.ALERT,1,0),new ModActionDefinition(2,'Mute 1h',ModActionDefinition.MUTE,2,0),new ModActionDefinition(3,'Ban 18h',ModActionDefinition.BAN,3,0),new ModActionDefinition(4,'Ban 7 days',ModActionDefinition.BAN,4,0),new ModActionDefinition(5,'Ban 30 days (step 1)',ModActionDefinition.BAN,5,0),new ModActionDefinition(7,'Ban 30 days (step 2)',ModActionDefinition.BAN,7,0),new ModActionDefinition(6,'Ban 100 years',ModActionDefinition.BAN,6,0),new ModActionDefinition(106,'Ban avatar-only 100 years',ModActionDefinition.BAN,6,0),new ModActionDefinition(101,'Kick',ModActionDefinition.KICK,0,0),new ModActionDefinition(102,'Lock trade 1 week',ModActionDefinition.TRADE_LOCK,0,168),new ModActionDefinition(104,'Lock trade permanent',ModActionDefinition.TRADE_LOCK,0,876000),new ModActionDefinition(105,'Message',ModActionDefinition.MESSAGE,0,0)];export var ModToolsUserModActionView=function ModToolsUserModActionView(props){var _props$user=props.user,user=_props$user===void 0?null:_props$user,_props$onCloseClick=props.onCloseClick,_onCloseClick=_props$onCloseClick===void 0?null:_props$onCloseClick;var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),selectedTopic=_useState2[0],setSelectedTopic=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),selectedAction=_useState4[0],setSelectedAction=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useModToolsContext=useModToolsContext(),_useModToolsContext$m=_useModToolsContext.modToolsState,modToolsState=_useModToolsContext$m===void 0?null:_useModToolsContext$m;var _modToolsState$cfhCat=modToolsState.cfhCategories,cfhCategories=_modToolsState$cfhCat===void 0?null:_modToolsState$cfhCat,_modToolsState$settin=modToolsState.settings,settings=_modToolsState$settin===void 0?null:_modToolsState$settin;var topics=useMemo(function(){var values=[];if(cfhCategories&&cfhCategories.length){var _iterator=_createForOfIteratorHelper(cfhCategories),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var category=_step.value;var _iterator2=_createForOfIteratorHelper(category.topics),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var topic=_step2.value;values.push(topic);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}return values;},[cfhCategories]);var sendAlert=function sendAlert(message){NotificationUtilities.simpleAlert(message,NotificationAlertType.DEFAULT,null,null,'Error');};var sendDefaultSanction=function sendDefaultSanction(){var errorMessage=null;var category=topics[selectedTopic];if(selectedTopic===-1)errorMessage='You must select a CFH topic';if(errorMessage)return sendAlert(errorMessage);var messageOrDefault=message.trim().length===0?LocalizeText(\"help.cfh.topic.\".concat(category.id)):message;SendMessageComposer(new DefaultSanctionMessageComposer(user.userId,selectedTopic,messageOrDefault));_onCloseClick();};var sendSanction=function sendSanction(){var errorMessage=null;var category=topics[selectedTopic];var sanction=MOD_ACTION_DEFINITIONS[selectedAction];if(selectedTopic===-1||selectedAction===-1)errorMessage='You must select a CFH topic and Sanction';else if(!settings||!settings.cfhPermission)errorMessage='You do not have permission to do this';else if(!category)errorMessage='You must select a CFH topic';else if(!sanction)errorMessage='You must select a sanction';if(errorMessage){sendAlert(errorMessage);return;}var messageOrDefault=message.trim().length===0?LocalizeText(\"help.cfh.topic.\".concat(category.id)):message;switch(sanction.actionType){case ModActionDefinition.ALERT:{if(!settings.alertPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new ModAlertMessageComposer(user.userId,messageOrDefault,category.id));break;}case ModActionDefinition.MUTE:SendMessageComposer(new ModMuteMessageComposer(user.userId,messageOrDefault,category.id));break;case ModActionDefinition.BAN:{if(!settings.banPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new ModBanMessageComposer(user.userId,messageOrDefault,category.id,selectedAction,sanction.actionId===106));break;}case ModActionDefinition.KICK:{if(!settings.kickPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new ModKickMessageComposer(user.userId,messageOrDefault,category.id));break;}case ModActionDefinition.TRADE_LOCK:{var numSeconds=sanction.actionLengthHours*60;SendMessageComposer(new ModTradingLockMessageComposer(user.userId,messageOrDefault,numSeconds,category.id));break;}case ModActionDefinition.MESSAGE:{if(message.trim().length===0){sendAlert('Please write a message to user');return;}SendMessageComposer(new ModMessageMessageComposer(user.userId,message,category.id));break;}}_onCloseClick();};if(!user)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-user-action\",theme:\"primary-slim\",windowPosition:DraggableWindowPosition.TOP_LEFT,children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'Mod Action: '+(user?user.username:''),onCloseClick:function onCloseClick(){return _onCloseClick();}}),/*#__PURE__*/_jsxs(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:selectedTopic,onChange:function onChange(event){return setSelectedTopic(parseInt(event.target.value));},children:[/*#__PURE__*/_jsx(\"option\",{value:-1,disabled:true,children:\"CFH Topic\"}),topics.map(function(topic,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:LocalizeText('help.cfh.topic.'+topic.id)},index);})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:selectedAction,onChange:function onChange(event){return setSelectedAction(parseInt(event.target.value));},children:[/*#__PURE__*/_jsx(\"option\",{value:-1,disabled:true,children:\"Sanction Type\"}),MOD_ACTION_DEFINITIONS.map(function(action,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:action.name},index);})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,style:{color:\"var(--test-galaxytext)\"},variant:\"none\",children:\"Optional message type, overrides default\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:message,onChange:function onChange(event){return setMessage(event.target.value);}})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:sendDefaultSanction,children:\"Default Sanction\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:sendSanction,children:\"Sanction\"})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}