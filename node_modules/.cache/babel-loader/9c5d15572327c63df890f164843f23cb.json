{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{SaveWardrobeOutfitMessageComposer}from'@nitrots/nitro-renderer';import{useCallback,useMemo}from'react';import{GetAvatarRenderManager,GetClubMemberLevel,GetConfiguration,LocalizeText,SendMessageComposer}from'../../../../api';import{AutoGrid,Base,Button,Flex,LayoutAvatarImageView,LayoutCurrencyIcon,LayoutGridItem}from'../../../../common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AvatarEditorWardrobeView=function AvatarEditorWardrobeView(props){var _props$figureData=props.figureData,figureData=_props$figureData===void 0?null:_props$figureData,_props$savedFigures=props.savedFigures,savedFigures=_props$savedFigures===void 0?[]:_props$savedFigures,_props$setSavedFigure=props.setSavedFigures,setSavedFigures=_props$setSavedFigure===void 0?null:_props$setSavedFigure,_props$loadAvatarInEd=props.loadAvatarInEditor,loadAvatarInEditor=_props$loadAvatarInEd===void 0?null:_props$loadAvatarInEd;var hcDisabled=GetConfiguration('hc.disabled',false);var wearFigureAtIndex=useCallback(function(index){if(index>=savedFigures.length||index<0)return;var _savedFigures$index=_slicedToArray(savedFigures[index],2),figure=_savedFigures$index[0],gender=_savedFigures$index[1];loadAvatarInEditor(figure.getFigureString(),gender);},[savedFigures,loadAvatarInEditor]);var saveFigureAtWardrobeIndex=useCallback(function(index){if(!figureData||index>=savedFigures.length||index<0)return;var newFigures=_toConsumableArray(savedFigures);var figure=figureData.getFigureString();var gender=figureData.gender;newFigures[index]=[GetAvatarRenderManager().createFigureContainer(figure),gender];setSavedFigures(newFigures);SendMessageComposer(new SaveWardrobeOutfitMessageComposer(index+1,figure,gender));},[figureData,savedFigures,setSavedFigures]);var figures=useMemo(function(){if(!savedFigures||!savedFigures.length)return[];var items=[];savedFigures.forEach(function(_ref,index){var _ref2=_slicedToArray(_ref,2),figureContainer=_ref2[0],gender=_ref2[1];var clubLevel=0;if(figureContainer)clubLevel=GetAvatarRenderManager().getFigureClubLevel(figureContainer,gender);items.push(/*#__PURE__*/_jsxs(LayoutGridItem,{position:\"relative\",overflow:\"hidden\",className:\"nitro-avatar-editor-wardrobe-figure-preview\",children:[figureContainer&&/*#__PURE__*/_jsx(LayoutAvatarImageView,{figure:figureContainer.getFigureString(),gender:gender,direction:2}),/*#__PURE__*/_jsx(Base,{className:\"avatar-shadow\"}),!hcDisabled&&clubLevel>0&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{className:\"position-absolute top-1 start-1\",type:\"hc\"}),/*#__PURE__*/_jsxs(Flex,{gap:1,className:\"button-container\",children:[/*#__PURE__*/_jsx(Button,{variant:\"link\",fullWidth:true,onClick:function onClick(event){return saveFigureAtWardrobeIndex(index);},children:LocalizeText('avatareditor.wardrobe.save')}),figureContainer&&/*#__PURE__*/_jsx(Button,{variant:\"link\",fullWidth:true,onClick:function onClick(event){return wearFigureAtIndex(index);},disabled:clubLevel>GetClubMemberLevel(),children:LocalizeText('generic_usable.button.use')})]})]},index));});return items;},[savedFigures,hcDisabled,saveFigureAtWardrobeIndex,wearFigureAtIndex]);return/*#__PURE__*/_jsx(AutoGrid,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:figures});};","map":null,"metadata":{},"sourceType":"module"}