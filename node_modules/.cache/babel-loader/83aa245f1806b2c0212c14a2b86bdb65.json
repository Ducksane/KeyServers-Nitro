{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import{CreateLinkEvent}from'../nitro';import{cancelRoomObjectPlacement,getPlacingItemId}from'./InventoryUtilities';import{UnseenItemCategory}from'./unseen';export var getAllPetIds=function getAllPetIds(petItems){return petItems.map(function(item){return item.petData.id;});};export var addSinglePetItem=function addSinglePetItem(petData,set){var unseen=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var petItem={petData:petData};if(unseen){//petItem.isUnseen = true;\nset.unshift(petItem);}else{set.push(petItem);}return petItem;};export var removePetItemById=function removePetItemById(id,set){var index=0;while(index<set.length){var petItem=set[index];if(petItem&&petItem.petData.id===id){if(getPlacingItemId()===petItem.petData.id){cancelRoomObjectPlacement();CreateLinkEvent('inventory/open');}set.splice(index,1);return petItem;}index++;}return null;};export var processPetFragment=function processPetFragment(set,fragment,isUnseen){var existingIds=getAllPetIds(set);var addedIds=[];var removedIds=[];var _iterator=_createForOfIteratorHelper(fragment.keys()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;existingIds.indexOf(key)===-1&&addedIds.push(key);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(existingIds),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _itemId=_step2.value;!fragment.get(_itemId)&&removedIds.push(_itemId);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var emptyExistingSet=existingIds.length===0;for(var _i=0,_removedIds=removedIds;_i<_removedIds.length;_i++){var id=_removedIds[_i];removePetItemById(id,set);}for(var _i2=0,_addedIds=addedIds;_i2<_addedIds.length;_i2++){var _id=_addedIds[_i2];var parser=fragment.get(_id);if(!parser)continue;addSinglePetItem(parser,set,isUnseen(UnseenItemCategory.PET,parser.id));}return set;};export var mergePetFragments=function mergePetFragments(fragment,totalFragments,fragmentNumber,fragments){if(totalFragments===1)return fragment;fragments[fragmentNumber]=fragment;var _iterator3=_createForOfIteratorHelper(fragments),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var frag=_step3.value;if(!frag)return null;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var merged=new Map();var _iterator4=_createForOfIteratorHelper(fragments),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _frag=_step4.value;var _iterator5=_createForOfIteratorHelper(_frag),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),key=_step5$value[0],value=_step5$value[1];merged.set(key,value);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_frag.clear();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}fragments=null;return merged;};","map":null,"metadata":{},"sourceType":"module"}