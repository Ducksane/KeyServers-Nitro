{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GetGuestRoomResultEvent,RoomLikeRoomComposer}from'@nitrots/nitro-renderer';import classNames from'classnames';import{useCallback,useEffect,useState}from'react';import{CreateLinkEvent,GetRoomEngine,LocalizeText,SendMessageComposer}from'../../../../api';import{Base,Column,Flex,Text,TransitionAnimation,TransitionAnimationTypes}from'../../../../common';import{UseMessageEventHook,useSharedNavigatorData}from'../../../../hooks';import{useRoomContext}from'../../RoomContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var RoomToolsWidgetView=function RoomToolsWidgetView(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isZoomedIn=_useState2[0],setIsZoomedIn=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),roomOwner=_useState6[0],setRoomOwner=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),roomTags=_useState8[0],setRoomTags=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),roomInfoDisplay=_useState10[0],setRoomInfoDisplay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isOpen=_useState12[0],setIsOpen=_useState12[1];var _useSharedNavigatorDa=useSharedNavigatorData(),_useSharedNavigatorDa2=_slicedToArray(_useSharedNavigatorDa,2),navigatorData=_useSharedNavigatorDa2[0],setNavigatorData=_useSharedNavigatorDa2[1];var _useRoomContext=useRoomContext(),_useRoomContext$roomS=_useRoomContext.roomSession,roomSession=_useRoomContext$roomS===void 0?null:_useRoomContext$roomS,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var sso=new URLSearchParams(window.location.search).get('sso');function openBawTool(){fetch(\"https://int.ultrahabbo.fun/?type=builderTool&sso=\"+sso);}var handleToolClick=function handleToolClick(action){switch(action){case'settings':CreateLinkEvent('navigator/toggle-room-info');return;case'zoom':setIsZoomedIn(function(prevValue){var scale=GetRoomEngine().getRoomInstanceRenderingCanvasScale(roomSession.roomId,1);if(!prevValue)scale/=2;else scale*=2;GetRoomEngine().setRoomInstanceRenderingCanvasScale(roomSession.roomId,1,scale);return!prevValue;});return;case'chat_history':CreateLinkEvent('chat-history/toggle');return;case'like_room':SendMessageComposer(new RoomLikeRoomComposer(1));return;case'toggle_room_link':CreateLinkEvent('navigator/toggle-room-link');return;}};var onGetGuestRoomResultEvent=useCallback(function(event){var parser=event.getParser();if(!parser.roomEnter)return;if(roomName!==parser.data.roomName)setRoomName(parser.data.roomName);if(roomOwner!==parser.data.ownerName)setRoomOwner(parser.data.ownerName);if(roomTags!==parser.data.tags)setRoomTags(parser.data.tags);},[roomName,roomOwner,roomTags]);UseMessageEventHook(GetGuestRoomResultEvent,onGetGuestRoomResultEvent);useEffect(function(){setIsOpen(true);var timeout=setTimeout(function(){return setIsOpen(false);},5000);return function(){return clearTimeout(timeout);};},[roomName,roomOwner,roomTags]);return/*#__PURE__*/_jsxs(Flex,{className:\"nitro-room-tools-container\",gap:2,style:{marginBottom:\"45px\"},children:[/*#__PURE__*/_jsxs(Column,{center:true,className:\"nitro-room-tools p-2\",children:[/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.settings.button.text'),className:\"icon icon-cog\",onClick:function onClick(){return handleToolClick('settings');}}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.zoom.button.text'),onClick:function onClick(){return handleToolClick('zoom');},className:'icon '+classNames({'icon-zoom-less':!isZoomedIn,'icon-zoom-more':isZoomedIn})}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.chathistory.button.text'),onClick:function onClick(){return handleToolClick('chat_history');},className:\"icon icon-chat-history\"}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.chathistory.button.text'),onClick:function onClick(e){return openBawTool();},className:\"icon icon-baw-tool\"}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.chathistory.button.text'),onClick:function onClick(event){return CreateLinkEvent('ratecatalog/show');},className:\"icon icon-ltd-catalog\"}),navigatorData.canRate&&/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.like.button.text'),onClick:function onClick(){return handleToolClick('like_room');},className:\"icon icon-like-room\"})]}),/*#__PURE__*/_jsx(Column,{justifyContent:\"center\",children:/*#__PURE__*/_jsx(TransitionAnimation,{type:TransitionAnimationTypes.SLIDE_LEFT,inProp:isOpen,timeout:300,children:/*#__PURE__*/_jsx(Column,{center:true,children:/*#__PURE__*/_jsxs(Column,{className:\"nitro-room-tools-info rounded py-2 px-3\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{wrap:true,variant:\"none\",style:{color:\"var(--test-galaxytext)\"},fontSize:4,children:roomName}),/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},fontSize:5,children:roomOwner})]}),roomTags&&roomTags.length>0&&/*#__PURE__*/_jsx(Flex,{gap:2,children:roomTags.map(function(tag,index){return/*#__PURE__*/_jsxs(Text,{small:true,variant:\"white\",className:\"rounded bg-primary p-1\",children:[\"#\",tag]},index);})})]})})})})]});};","map":null,"metadata":{},"sourceType":"module"}