{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{useCallback,useEffect,useState}from'react';import{Button,Overlay,Popover}from'react-bootstrap';import{LocalizeText,RoomWidgetChatMessage}from'../../../../api';import{Base,Flex,Grid,NitroCardContentView}from'../../../../common';import{useRoomContext}from'../../RoomContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ChatInputStickersSelectorView=function ChatInputStickersSelectorView(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),target=_useState2[0],setTarget=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),selectorVisible=_useState4[0],setSelectorVisible=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),stickers=_useState6[0],setStickers=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),stickersGiphy=_useState8[0],setStickersGiphy=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),showNativeStickers=_useState10[0],setShowNativeStickers=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showGiphyStickers=_useState12[0],setShowGiphyStickers=_useState12[1];var _useRoomContext=useRoomContext(),_useRoomContext$event=_useRoomContext.eventDispatcher,eventDispatcher=_useRoomContext$event===void 0?null:_useRoomContext$event,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var evadeClosing=false;function searchStickers(strSearch){evadeClosing=true;if(strSearch.length==0){setShowGiphyStickers(false);setShowNativeStickers(true);return;}fetch('https://api.giphy.com/v1/gifs/search?api_key=4qwMrfzYMYVl1lhhl3wDaVxDNWAzAv6s&q='+strSearch+'&limit=25&offset=0&rating=g&lang=en').then(function(response){return response.json();}).then(function(result){setStickersGiphy(result);setShowNativeStickers(false);setShowGiphyStickers(true);});}function sendSticker(sticker){var stickerArgs=sticker.split(\".gif\");sendChat(stickerArgs[0],RoomWidgetChatMessage.CHAT_DEFAULT,'',2);}function NativeStickers(){if(stickers==null)return null;else return/*#__PURE__*/_jsx(\"div\",{});}function GiphyStickers(){if(stickersGiphy==null)return null;else return/*#__PURE__*/_jsx(Grid,{columnCount:4,overflow:\"auto\",id:\"giphyStickers\",children:stickersGiphy.data.map(function(sticker){return/*#__PURE__*/ (// eslint-disable-next-line react/jsx-key\n_jsx(Base,{children:/*#__PURE__*/_jsx(\"img\",{src:sticker.images.downsized_medium.url,width:50,height:50,className:\"sticker-img\",onClick:function onClick(e){return sendSticker(sticker.images.fixed_height_small.url);}})},sticker.images.downsized_medium.url));})});}var sendChat=useCallback(function(text,chatType){var recipientName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var styleId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;widgetHandler.processWidgetMessage(new RoomWidgetChatMessage(RoomWidgetChatMessage.MESSAGE_CHAT,text,chatType,recipientName,styleId));setSelectorVisible(false);},[widgetHandler]);var toggleSelector=function toggleSelector(event){if(evadeClosing)return;var visible=true;setSelectorVisible(function(prevValue){visible=!prevValue;return visible;});if(visible)setTarget(event.target);evadeClosing=false;};function handleClose(){evadeClosing=true;}var inputText=\"\";function onChangeInput(value){inputText=value;}useEffect(function(){if(selectorVisible)return;setTarget(null);},[selectorVisible]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Base,{pointer:true,className:\"icon chatstickers-icon\",onClick:toggleSelector,style:{marginLeft:\"13px\",display:\"inline-block\"},children:/*#__PURE__*/_jsx(Overlay,{show:selectorVisible,target:target,placement:\"top\",children:/*#__PURE__*/_jsx(Popover,{className:\"nitro-chat-sticker-selector-container image-rendering-pixelated\",children:/*#__PURE__*/_jsxs(NitroCardContentView,{overflow:\"hidden\",className:\"bg-transparent\",children:[/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(\"input\",{onClick:function onClick(e){return handleClose();},onChange:function onChange(e){return onChangeInput(e.target.value);},type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search')}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"stickers-search-button\",onClick:function onClick(e){return searchStickers(inputText);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"search\"})})]}),showNativeStickers?/*#__PURE__*/_jsx(NativeStickers,{}):null,showGiphyStickers?/*#__PURE__*/_jsx(GiphyStickers,{}):null]})})})})});};","map":null,"metadata":{},"sourceType":"module"}