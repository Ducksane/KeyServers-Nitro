{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{IgnoredUsersEvent}from'../communication/messages/incoming/user/IgnoredUsersEvent';import{IgnoreResultEvent}from'../communication/messages/incoming/user/IgnoreResultEvent';import{GetIgnoredUsersComposer}from'../communication/messages/outgoing/user/data/GetIgnoredUsersComposer';import{IgnoreUserComposer}from'../communication/messages/outgoing/user/data/IgnoreUserComposer';import{IgnoreUserIdComposer}from'../communication/messages/outgoing/user/data/IgnoreUserIdComposer';import{UnignoreUserComposer}from'../communication/messages/outgoing/user/data/UnignoreUserComposer';export var IgnoredUsersManager=/*#__PURE__*/function(){function IgnoredUsersManager(sessionDataManager){_classCallCheck(this,IgnoredUsersManager);this._sessionDataManager=void 0;this._ignoredUsers=void 0;this._messages=void 0;this._sessionDataManager=sessionDataManager;this._ignoredUsers=[];}_createClass(IgnoredUsersManager,[{key:\"init\",value:function init(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new IgnoredUsersEvent(this.onIgnoredUsersEvent.bind(this)),new IgnoreResultEvent(this.onIgnoreResultEvent.bind(this))];var _iterator=_createForOfIteratorHelper(this._messages),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var message=_step.value;this._sessionDataManager.communication.registerMessageEvent(message);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}},{key:\"dispose\",value:function dispose(){if(this.disposed)return;if(this._messages&&this._messages.length){var _iterator2=_createForOfIteratorHelper(this._messages),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var message=_step2.value;this._sessionDataManager.communication.removeMessageEvent(message);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._messages=null;}this._sessionDataManager=null;}},{key:\"requestIgnoredUsers\",value:function requestIgnoredUsers(){this._sessionDataManager.send(new GetIgnoredUsersComposer(this._sessionDataManager.userName));}},{key:\"onIgnoredUsersEvent\",value:function onIgnoredUsersEvent(event){if(!event)return;var parser=event.getParser();if(!parser)return;this._ignoredUsers=parser.ignoredUsers;}},{key:\"onIgnoreResultEvent\",value:function onIgnoreResultEvent(event){if(!event)return;var parser=event.getParser();if(!parser)return;var name=parser.name;switch(parser.result){case 0:return;case 1:this.addUserToIgnoreList(name);return;case 2:this.addUserToIgnoreList(name);this._ignoredUsers.shift();return;case 3:this.removeUserFromIgnoreList(name);return;}}},{key:\"addUserToIgnoreList\",value:function addUserToIgnoreList(name){if(this._ignoredUsers.indexOf(name)<0)this._ignoredUsers.push(name);}},{key:\"removeUserFromIgnoreList\",value:function removeUserFromIgnoreList(name){var index=this._ignoredUsers.indexOf(name);if(index>=0)this._ignoredUsers.splice(index,1);}},{key:\"ignoreUserId\",value:function ignoreUserId(id){this._sessionDataManager.send(new IgnoreUserIdComposer(id));}},{key:\"ignoreUser\",value:function ignoreUser(name){this._sessionDataManager.send(new IgnoreUserComposer(name));}},{key:\"unignoreUser\",value:function unignoreUser(name){this._sessionDataManager.send(new UnignoreUserComposer(name));}},{key:\"isIgnored\",value:function isIgnored(name){return this._ignoredUsers.indexOf(name)>=0;}},{key:\"disposed\",get:function get(){return!!this._sessionDataManager;}}]);return IgnoredUsersManager;}();","map":null,"metadata":{},"sourceType":"module"}