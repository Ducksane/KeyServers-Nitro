{"ast":null,"code":"import _objectSpread from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ApplyTonerComposer,RoomControllerLevel,RoomEngineTriggerWidgetEvent,RoomObjectVariable}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import ReactSlider from'react-slider';import{GetRoomEngine,GetSessionDataManager,LocalizeText,RoomWidgetUpdateBackgroundColorPreviewEvent,RoomWidgetUpdateRoomObjectEvent,SendMessageComposer}from'../../../../../api';import{Button,Column,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../../common';import{UseEventDispatcherHook,UseRoomEngineEvent}from'../../../../../hooks';import{useRoomContext}from'../../../RoomContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var FurnitureBackgroundColorView=function FurnitureBackgroundColorView(props){var _useState=useState(-1),_useState2=_slicedToArray(_useState,2),objectId=_useState2[0],setObjectId=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),hue=_useState4[0],setHue=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),saturation=_useState6[0],setSaturation=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),lightness=_useState8[0],setLightness=_useState8[1];var _useRoomContext=useRoomContext(),_useRoomContext$roomS=_useRoomContext.roomSession,roomSession=_useRoomContext$roomS===void 0?null:_useRoomContext$roomS,_useRoomContext$event=_useRoomContext.eventDispatcher,eventDispatcher=_useRoomContext$event===void 0?null:_useRoomContext$event;var close=useCallback(function(){eventDispatcher.dispatchEvent(new RoomWidgetUpdateBackgroundColorPreviewEvent(RoomWidgetUpdateBackgroundColorPreviewEvent.CLEAR_PREVIEW));setObjectId(-1);},[eventDispatcher]);var canOpenBackgroundToner=useCallback(function(){return roomSession.isRoomOwner||roomSession.controllerLevel>=RoomControllerLevel.GUEST||GetSessionDataManager().isModerator;},[roomSession]);var onRoomEngineObjectEvent=useCallback(function(event){switch(event.type){case RoomEngineTriggerWidgetEvent.REQUEST_BACKGROUND_COLOR:{if(!canOpenBackgroundToner())return;var roomObject=GetRoomEngine().getRoomObject(event.roomId,event.objectId,event.category);var model=roomObject.model;setObjectId(roomObject.id);setHue(parseInt(model.getValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)));setSaturation(parseInt(model.getValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)));setLightness(parseInt(model.getValue(RoomObjectVariable.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)));return;}case RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{if(objectId!==event.objectId)return;close();return;}}},[objectId,canOpenBackgroundToner,close]);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_BACKGROUND_COLOR,onRoomEngineObjectEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomEngineObjectEvent);var processAction=useCallback(function(name){switch(name){case'apply':SendMessageComposer(new ApplyTonerComposer(objectId,hue,saturation,lightness));break;case'toggle':roomSession.useMultistateItem(objectId);break;}},[roomSession,objectId,hue,saturation,lightness]);useEffect(function(){if(objectId===-1)return;eventDispatcher.dispatchEvent(new RoomWidgetUpdateBackgroundColorPreviewEvent(RoomWidgetUpdateBackgroundColorPreviewEvent.PREVIEW,hue,saturation,lightness));},[eventDispatcher,objectId,hue,saturation,lightness]);if(objectId===-1)return null;return/*#__PURE__*/_jsxs(NitroCardView,{theme:\"primary-slim\",className:\"nitro-room-widget-toner\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('widget.backgroundcolor.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{overflow:\"hidden\",justifyContent:\"between\",children:[/*#__PURE__*/_jsxs(Column,{overflow:\"auto\",gap:1,children:[/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.hue')}),/*#__PURE__*/_jsx(ReactSlider,{className:'nitro-slider',min:0,max:360,value:hue,onChange:function onChange(event){return setHue(event);},thumbClassName:'thumb degree',renderThumb:function renderThumb(props,state){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},props),{},{children:state.valueNow}));}})]}),/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.saturation')}),/*#__PURE__*/_jsx(ReactSlider,{className:'nitro-slider',min:0,max:255,value:saturation,onChange:function onChange(event){return setSaturation(event);},thumbClassName:'thumb percent',renderThumb:function renderThumb(props,state){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},props),{},{children:state.valueNow}));}})]}),/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.lightness')}),/*#__PURE__*/_jsx(ReactSlider,{className:'nitro-slider',min:0,max:255,value:lightness,onChange:function onChange(event){return setLightness(event);},thumbClassName:'thumb percent',renderThumb:function renderThumb(props,state){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},props),{},{children:state.valueNow}));}})]})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"primary\",onClick:function onClick(event){return processAction('toggle');},children:LocalizeText('widget.backgroundcolor.button.on')}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"primary\",onClick:function onClick(event){return processAction('apply');},children:LocalizeText('widget.backgroundcolor.button.apply')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}