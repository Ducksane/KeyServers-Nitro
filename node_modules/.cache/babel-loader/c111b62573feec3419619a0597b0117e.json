{"ast":null,"code":"import{MouseEventType,TouchEventType}from'@nitrots/nitro-renderer';import{GetRoomEngine}from'./GetRoomEngine';var didMouseMove=false;var lastClick=0;var clickCount=0;var touchTimer=null;export var DispatchTouchEvent=function DispatchTouchEvent(event){var canvasId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var longTouch=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var altKey=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var ctrlKey=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var shiftKey=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var eventType=event.type;if(longTouch)eventType=TouchEventType.TOUCH_LONG;if(eventType===TouchEventType.TOUCH_END&&!didMouseMove){eventType=MouseEventType.MOUSE_CLICK;if(lastClick){clickCount=1;if(lastClick>=Date.now()-300)clickCount++;}lastClick=Date.now();if(clickCount===2){eventType=MouseEventType.DOUBLE_CLICK;clickCount=0;lastClick=null;}}if(touchTimer)clearTimeout(touchTimer);var x=0;var y=0;if(event.touches[0]){x=event.touches[0].clientX;y=event.touches[0].clientY;}else if(event.changedTouches[0]){x=event.changedTouches[0].clientX;y=event.changedTouches[0].clientY;}switch(eventType){case MouseEventType.MOUSE_CLICK:break;case MouseEventType.DOUBLE_CLICK:break;case TouchEventType.TOUCH_START:touchTimer=setTimeout(function(){if(didMouseMove)return;DispatchTouchEvent(event,canvasId,true);},300);eventType=MouseEventType.MOUSE_DOWN;didMouseMove=false;break;case TouchEventType.TOUCH_MOVE:eventType=MouseEventType.MOUSE_MOVE;didMouseMove=true;break;case TouchEventType.TOUCH_END:eventType=MouseEventType.MOUSE_UP;break;case TouchEventType.TOUCH_LONG:eventType=MouseEventType.MOUSE_DOWN_LONG;break;default:return;}GetRoomEngine().dispatchMouseEvent(canvasId,x,y,eventType,altKey,ctrlKey,shiftKey,false);};","map":null,"metadata":{},"sourceType":"module"}