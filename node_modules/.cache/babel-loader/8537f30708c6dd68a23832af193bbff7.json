{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Point}from'@pixi/math';import{AnimationActionPart}from'./AnimationActionPart';export var AnimationAction=/*#__PURE__*/function(){function AnimationAction(data){_classCallCheck(this,AnimationAction);this._id=void 0;this._actionParts=void 0;this._bodyPartOffsets=void 0;this._frameCount=void 0;this._frameIndexes=void 0;this._id=data.id;this._actionParts=new Map();this._bodyPartOffsets=new Map();this._frameCount=0;this._frameIndexes=[];if(data.parts&&data.parts.length>0){var _iterator=_createForOfIteratorHelper(data.parts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;if(!part)continue;var newPart=new AnimationActionPart(part);this._actionParts.set(part.setType,newPart);this._frameCount=Math.max(this._frameCount,newPart.frames.length);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(data.offsets&&data.offsets.frames&&data.offsets.frames.length>0){var _iterator2=_createForOfIteratorHelper(data.offsets.frames),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var frame=_step2.value;if(!frame)continue;var frameId=frame.id;this._frameCount=Math.max(this._frameCount,frameId);var directions=new Map();this._bodyPartOffsets.set(frameId,directions);if(frame.directions&&frame.directions.length>0){var _iterator3=_createForOfIteratorHelper(frame.directions),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var direction=_step3.value;if(!direction)continue;var directionId=direction.id;var offsets=new Map();directions.set(directionId,offsets);if(direction.bodyParts&&direction.bodyParts.length>0){var _iterator4=_createForOfIteratorHelper(direction.bodyParts),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _part=_step4.value;if(!_part)continue;var partId=_part.id;var dx=0;var dy=0;if(_part.dx!==undefined)dx=_part.dx;if(_part.dy!==undefined)dy=_part.dy;offsets.set(partId,new Point(dx,dy));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}this._frameIndexes.push(frameId);if(frame.repeats!==undefined){var repeats=frame.repeats||0;if(repeats>1)while(--repeats>0){this._frameIndexes.push(frameId);}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}_createClass(AnimationAction,[{key:\"getPart\",value:function getPart(type){if(!type)return null;var existing=this._actionParts.get(type);if(!existing)return null;return existing;}},{key:\"getFrameBodyPartOffset\",value:function getFrameBodyPartOffset(frameId,frameCount,partId){var frameIndex=frameCount%this._frameIndexes.length;var frameNumber=this._frameIndexes[frameIndex];var offsets=this._bodyPartOffsets.get(frameNumber);if(!offsets)return AnimationAction.DEFAULT_OFFSET;var frameOffset=offsets.get(frameId);if(!frameOffset)return AnimationAction.DEFAULT_OFFSET;var offset=frameOffset.get(partId);if(!offset)return AnimationAction.DEFAULT_OFFSET;return offset;}},{key:\"id\",get:function get(){return this._id;}},{key:\"parts\",get:function get(){return this._actionParts;}},{key:\"frameCount\",get:function get(){return this._frameCount;}}]);return AnimationAction;}();AnimationAction.DEFAULT_OFFSET=new Point(0,0);","map":null,"metadata":{},"sourceType":"module"}