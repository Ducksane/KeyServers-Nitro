{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{AnimationLayerData}from'./AnimationLayerData';import{DirectionalOffsetData}from'./DirectionalOffsetData';export var AnimationData=/*#__PURE__*/function(){function AnimationData(){_classCallCheck(this,AnimationData);this._layers=void 0;this._frameCount=void 0;this._randomStart=void 0;this._immediateChanges=void 0;this._layers=new Map();this._frameCount=-1;this._randomStart=false;this._immediateChanges=null;}_createClass(AnimationData,[{key:\"dispose\",value:function dispose(){var _iterator=_createForOfIteratorHelper(this._layers.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var layer=_step.value;if(!layer)continue;layer.dispose();}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._layers.clear();this._immediateChanges=null;}},{key:\"setImmediateChanges\",value:function setImmediateChanges(k){this._immediateChanges=k;}},{key:\"isImmediateChange\",value:function isImmediateChange(k){if(!this._immediateChanges||this._immediateChanges.indexOf(k)===-1)return false;return true;}},{key:\"getStartFrame\",value:function getStartFrame(direction){if(!this._randomStart)return 0;return Math.random()*this._frameCount;}},{key:\"initialize\",value:function initialize(k){if(k.randomStart)this._randomStart=true;if(k.layers){for(var key in k.layers){var layer=k.layers[key];if(!layer)return false;var animationId=parseInt(key);var loopCount=layer.loopCount!==undefined?layer.loopCount:1;var frameRepeat=layer.frameRepeat!==undefined?layer.frameRepeat:1;var isRandom=layer.random!==undefined&&layer.random!==0?true:false;if(!this.addLayer(animationId,loopCount,frameRepeat,isRandom,layer))return false;}}return true;}},{key:\"addLayer\",value:function addLayer(animationId,loopCount,frameRepeat,isRandom,layer){var layerData=new AnimationLayerData(loopCount,frameRepeat,isRandom);if(layer.frameSequences){for(var key in layer.frameSequences){var animationSequence=layer.frameSequences[key];if(!animationSequence)continue;var _loopCount=animationSequence.loopCount!==undefined?animationSequence.loopCount:1;var isSequenceRandom=animationSequence.random!==undefined&&animationSequence.random!==0?true:false;var frame=layerData.addFrameSequence(_loopCount,isSequenceRandom);if(animationSequence.frames){for(var _key in animationSequence.frames){var animationFrame=animationSequence.frames[_key];if(!animationFrame){layerData.dispose();return false;}frame.addFrame(animationFrame.id,animationFrame.x||0,animationFrame.y||0,animationFrame.randomX||0,animationFrame.randomY||0,this.readDirectionalOffsets(animationFrame));}}frame.initialize();}}layerData.calculateLength();this._layers.set(animationId,layerData);var frameCount=layerData.frameCount;if(frameCount>this._frameCount)this._frameCount=frameCount;return true;}},{key:\"readDirectionalOffsets\",value:function readDirectionalOffsets(frame){var directionalOffset=null;if(frame&&frame.offsets){for(var directionId in frame.offsets){var offset=frame.offsets[directionId];if(!offset)continue;if(!directionalOffset)directionalOffset=new DirectionalOffsetData();directionalOffset.setDirection(offset.direction,offset.x,offset.y);}}return directionalOffset;}},{key:\"getFrame\",value:function getFrame(direction,layerId,frameCount){var layer=this._layers.get(layerId);if(!layer)return null;return layer.getFrame(direction,frameCount);}},{key:\"getFrameFromSequence\",value:function getFrameFromSequence(direction,layerId,sequenceId,offset,frameCount){var layer=this._layers.get(layerId);if(!layer)return null;return layer.getFrameFromSequence(direction,sequenceId,offset,frameCount);}}],[{key:\"getTransitionToAnimationId\",value:function getTransitionToAnimationId(animationId){return AnimationData.TRANSITION_TO_ANIMATION_OFFSET+animationId;}},{key:\"getTransitionFromAnimationId\",value:function getTransitionFromAnimationId(animationId){return AnimationData.TRANSITION_FROM_ANIMATION_OFFSET+animationId;}},{key:\"isTransitionToAnimation\",value:function isTransitionToAnimation(animationId){return animationId>=AnimationData.TRANSITION_TO_ANIMATION_OFFSET&&animationId<AnimationData.TRANSITION_FROM_ANIMATION_OFFSET;}},{key:\"isTransitionFromAnimation\",value:function isTransitionFromAnimation(animationId){return animationId>=AnimationData.TRANSITION_FROM_ANIMATION_OFFSET;}}]);return AnimationData;}();AnimationData.TRANSITION_TO_ANIMATION_OFFSET=1000000;AnimationData.TRANSITION_FROM_ANIMATION_OFFSET=2000000;AnimationData.DEFAULT_FRAME_NUMBER=0;","map":null,"metadata":{},"sourceType":"module"}