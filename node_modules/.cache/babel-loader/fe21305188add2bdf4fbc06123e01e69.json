{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Disposable}from'../../core/common/disposable/Disposable';import{Vector3d}from'../utils/Vector3d';import{RoomObjectModel}from'./RoomObjectModel';export var RoomObject=/*#__PURE__*/function(_Disposable){_inherits(RoomObject,_Disposable);var _super=_createSuper(RoomObject);function RoomObject(id,stateCount,type){var _this;_classCallCheck(this,RoomObject);_this=_super.call(this);_this._id=void 0;_this._instanceId=void 0;_this._type=void 0;_this._model=void 0;_this._location=void 0;_this._direction=void 0;_this._states=void 0;_this._visualization=void 0;_this._logic=void 0;_this._pendingLogicMessages=void 0;_this._updateCounter=void 0;_this._isReady=void 0;_this._id=id;_this._instanceId=RoomObject.OBJECT_COUNTER++;_this._type=type;_this._model=new RoomObjectModel();_this._location=new Vector3d();_this._direction=new Vector3d();_this._states=[];_this._visualization=null;_this._logic=null;_this._pendingLogicMessages=[];_this._updateCounter=0;_this._isReady=false;var i=stateCount-1;while(i>=0){_this._states[i]=0;i--;}return _this;}_createClass(RoomObject,[{key:\"onDispose\",value:function onDispose(){this._pendingLogicMessages=[];this.setVisualization(null);this.setLogic(null);if(this._model)this._model.dispose();_get(_getPrototypeOf(RoomObject.prototype),\"onDispose\",this).call(this);}},{key:\"getLocation\",value:function getLocation(){return this._location;}},{key:\"setLocation\",value:function setLocation(vector){if(!vector)return;if(vector.x===this._location.x&&vector.y===this._location.y&&vector.z===this._location.z)return;this._location.x=vector.x;this._location.y=vector.y;this._location.z=vector.z;this._updateCounter++;}},{key:\"getDirection\",value:function getDirection(){return this._direction;}},{key:\"setDirection\",value:function setDirection(vector){if(!vector)return;if(vector.x===this._direction.x&&vector.y===this._direction.y&&vector.z===this._direction.z)return;this._direction.x=(vector.x%360+360)%360;this._direction.y=(vector.y%360+360)%360;this._direction.z=(vector.z%360+360)%360;this._updateCounter++;}},{key:\"getState\",value:function getState(){var index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(index>=0&&index<this._states.length){return this._states[index];}return-1;}},{key:\"setState\",value:function setState(state){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(index>=0&&index<this._states.length){if(this._states[index]!==state){this._states[index]=state;this._updateCounter++;}return true;}return false;}},{key:\"setVisualization\",value:function setVisualization(visualization){if(this._visualization===visualization)return;if(this._visualization)this._visualization.dispose();this._visualization=visualization;if(this._visualization)this._visualization.object=this;}},{key:\"setLogic\",value:function setLogic(logic){if(this._logic===logic)return;var eventHandler=this._logic;if(eventHandler){this._logic=null;eventHandler.setObject(null);}this._logic=logic;if(this._logic){this._logic.setObject(this);while(this._pendingLogicMessages.length){var message=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(message);}}}},{key:\"processUpdateMessage\",value:function processUpdateMessage(message){if(this._logic)return this._logic.processUpdateMessage(message);this._pendingLogicMessages.push(message);}},{key:\"tearDown\",value:function tearDown(){if(this._logic)this._logic.tearDown();}},{key:\"id\",get:function get(){return this._id;}},{key:\"instanceId\",get:function get(){return this._instanceId;}},{key:\"type\",get:function get(){return this._type;}},{key:\"model\",get:function get(){return this._model;}},{key:\"visualization\",get:function get(){return this._visualization;}},{key:\"mouseHandler\",get:function get(){return this._logic;}},{key:\"logic\",get:function get(){return this._logic;}},{key:\"location\",get:function get(){return this._location;}},{key:\"direction\",get:function get(){return this._direction;}},{key:\"updateCounter\",get:function get(){return this._updateCounter;},set:function set(count){this._updateCounter=count;}},{key:\"isReady\",get:function get(){return this._isReady;},set:function set(flag){this._isReady=flag;}}]);return RoomObject;}(Disposable);RoomObject.OBJECT_COUNTER=0;","map":null,"metadata":{},"sourceType":"module"}