{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\nitro\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";var __classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if(kind===\"m\")throw new TypeError(\"Private method is not writable\");if(kind===\"a\"&&!f)throw new TypeError(\"Private accessor was defined without a setter\");if(typeof state===\"function\"?receiver!==state||!f:!state.has(receiver))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return kind===\"a\"?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value;};var __classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if(kind===\"a\"&&!f)throw new TypeError(\"Private accessor was defined without a getter\");if(typeof state===\"function\"?receiver!==state||!f:!state.has(receiver))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return kind===\"m\"?f:kind===\"a\"?f.call(receiver):f?f.value:state.get(receiver);};var _Container_engine,_Container_eventListeners;import{animate,cancelAnimation}from\"../Utils/Utils\";import{Canvas}from\"./Canvas\";import{EventListeners}from\"./Utils/EventListeners\";import{FrameManager}from\"./Utils/FrameManager\";import{Options}from\"../Options/Classes/Options\";import{Particles}from\"./Particles\";import{Retina}from\"./Retina\";import{getRangeValue}from\"../Utils/NumberUtils\";import{loadOptions}from\"../Utils/OptionsUtils\";function guardCheck(container){return!container.destroyed;}function loadContainerOptions(engine,container){var options=new Options(engine,container);for(var _len=arguments.length,sourceOptionsArr=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){sourceOptionsArr[_key-2]=arguments[_key];}loadOptions.apply(void 0,[options].concat(sourceOptionsArr));return options;}export var Container=/*#__PURE__*/function(){function Container(engine,id,sourceOptions){var _this=this;_classCallCheck(this,Container);this.id=id;_Container_engine.set(this,void 0);_Container_eventListeners.set(this,void 0);__classPrivateFieldSet(this,_Container_engine,engine,\"f\");this.fpsLimit=120;this.duration=0;this.lifeTime=0;this.firstStart=true;this.started=false;this.destroyed=false;this.paused=true;this.lastFrameTime=0;this.zLayers=100;this.pageHidden=false;this._sourceOptions=sourceOptions;this._initialSourceOptions=sourceOptions;this.retina=new Retina(this);this.canvas=new Canvas(this);this.particles=new Particles(__classPrivateFieldGet(this,_Container_engine,\"f\"),this);this.drawer=new FrameManager(this);this.pathGenerator={generate:function generate(p){var v=p.velocity.copy();v.angle+=v.length*Math.PI/180;return v;},init:function init(){},update:function update(){}};this.interactivity={mouse:{clicking:false,inside:false}};this.plugins=new Map();this.drawers=new Map();this.density=1;this._options=loadContainerOptions(__classPrivateFieldGet(this,_Container_engine,\"f\"),this);this.actualOptions=loadContainerOptions(__classPrivateFieldGet(this,_Container_engine,\"f\"),this);__classPrivateFieldSet(this,_Container_eventListeners,new EventListeners(this),\"f\");if(typeof IntersectionObserver!==\"undefined\"&&IntersectionObserver){this.intersectionObserver=new IntersectionObserver(function(entries){return _this.intersectionManager(entries);});}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerBuilt\",{container:this});}_createClass(Container,[{key:\"options\",get:function get(){return this._options;}},{key:\"sourceOptions\",get:function get(){return this._sourceOptions;}},{key:\"addClickHandler\",value:function addClickHandler(callback){var _this2=this;if(!guardCheck(this)){return;}var el=this.interactivity.element;if(!el){return;}var clickOrTouchHandler=function clickOrTouchHandler(e,pos,radius){if(!guardCheck(_this2)){return;}var pxRatio=_this2.retina.pixelRatio,posRetina={x:pos.x*pxRatio,y:pos.y*pxRatio},particles=_this2.particles.quadTree.queryCircle(posRetina,radius*pxRatio);callback(e,particles);};var clickHandler=function clickHandler(e){if(!guardCheck(_this2)){return;}var mouseEvent=e,pos={x:mouseEvent.offsetX||mouseEvent.clientX,y:mouseEvent.offsetY||mouseEvent.clientY};clickOrTouchHandler(e,pos,1);};var touchStartHandler=function touchStartHandler(){if(!guardCheck(_this2)){return;}touched=true;touchMoved=false;};var touchMoveHandler=function touchMoveHandler(){if(!guardCheck(_this2)){return;}touchMoved=true;};var touchEndHandler=function touchEndHandler(e){var _a,_b,_c;if(!guardCheck(_this2)){return;}if(touched&&!touchMoved){var touchEvent=e;var lastTouch=touchEvent.touches[touchEvent.touches.length-1];if(!lastTouch){lastTouch=touchEvent.changedTouches[touchEvent.changedTouches.length-1];if(!lastTouch){return;}}var canvasRect=(_a=_this2.canvas.element)===null||_a===void 0?void 0:_a.getBoundingClientRect(),pos={x:lastTouch.clientX-((_b=canvasRect===null||canvasRect===void 0?void 0:canvasRect.left)!==null&&_b!==void 0?_b:0),y:lastTouch.clientY-((_c=canvasRect===null||canvasRect===void 0?void 0:canvasRect.top)!==null&&_c!==void 0?_c:0)};clickOrTouchHandler(e,pos,Math.max(lastTouch.radiusX,lastTouch.radiusY));}touched=false;touchMoved=false;};var touchCancelHandler=function touchCancelHandler(){if(!guardCheck(_this2)){return;}touched=false;touchMoved=false;};var touched=false;var touchMoved=false;el.addEventListener(\"click\",clickHandler);el.addEventListener(\"touchstart\",touchStartHandler);el.addEventListener(\"touchmove\",touchMoveHandler);el.addEventListener(\"touchend\",touchEndHandler);el.addEventListener(\"touchcancel\",touchCancelHandler);}},{key:\"destroy\",value:function destroy(){var _this3=this;if(!guardCheck(this)){return;}this.stop();this.particles.destroy();this.canvas.destroy();var _iterator=_createForOfIteratorHelper(this.drawers),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),drawer=_step$value[1];if(drawer.destroy){drawer.destroy(this);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(this.drawers.keys()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;this.drawers.delete(key);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.destroyed=true;var mainArr=__classPrivateFieldGet(this,_Container_engine,\"f\").dom(),idx=mainArr.findIndex(function(t){return t===_this3;});if(idx>=0){mainArr.splice(idx,1);}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerDestroyed\",{container:this});}},{key:\"draw\",value:function draw(force){var _this4=this;if(!guardCheck(this)){return;}var refreshTime=force;this.drawAnimationFrame=animate()(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(timestamp){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(refreshTime){_this4.lastFrameTime=undefined;refreshTime=false;}_context.next=3;return _this4.drawer.nextFrame(timestamp);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"exportConfiguration\",value:function exportConfiguration(){return JSON.stringify(this.actualOptions,undefined,2);}},{key:\"exportImage\",value:function exportImage(callback,type,quality){var _a;return(_a=this.canvas.element)===null||_a===void 0?void 0:_a.toBlob(callback,type!==null&&type!==void 0?type:\"image/png\",quality);}},{key:\"exportImg\",value:function exportImg(callback){this.exportImage(callback);}},{key:\"getAnimationStatus\",value:function getAnimationStatus(){return!this.paused&&!this.pageHidden&&guardCheck(this);}},{key:\"handleClickMode\",value:function handleClickMode(mode){if(!guardCheck(this)){return;}this.particles.handleClickMode(mode);var _iterator3=_createForOfIteratorHelper(this.plugins),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),plugin=_step3$value[1];if(plugin.handleClickMode){plugin.handleClickMode(mode);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:\"init\",value:function(){var _init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var shapes,_iterator4,_step4,type,drawer,availablePlugins,_iterator5,_step5,_step5$value,id,plugin,_iterator6,_step6,_step6$value,_drawer,_iterator7,_step7,_step7$value,_plugin,pathOptions,_iterator8,_step8,_step8$value,_plugin2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(guardCheck(this)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:shapes=__classPrivateFieldGet(this,_Container_engine,\"f\").plugins.getSupportedShapes();_iterator4=_createForOfIteratorHelper(shapes);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){type=_step4.value;drawer=__classPrivateFieldGet(this,_Container_engine,\"f\").plugins.getShapeDrawer(type);if(drawer){this.drawers.set(type,drawer);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._options=loadContainerOptions(__classPrivateFieldGet(this,_Container_engine,\"f\"),this,this._initialSourceOptions,this.sourceOptions);this.actualOptions=loadContainerOptions(__classPrivateFieldGet(this,_Container_engine,\"f\"),this,this._options);this.retina.init();this.canvas.init();this.updateActualOptions();this.canvas.initBackground();this.canvas.resize();this.zLayers=this.actualOptions.zLayers;this.duration=getRangeValue(this.actualOptions.duration);this.lifeTime=0;this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120;availablePlugins=__classPrivateFieldGet(this,_Container_engine,\"f\").plugins.getAvailablePlugins(this);_iterator5=_createForOfIteratorHelper(availablePlugins);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){_step5$value=_slicedToArray(_step5.value,2),id=_step5$value[0],plugin=_step5$value[1];this.plugins.set(id,plugin);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}_iterator6=_createForOfIteratorHelper(this.drawers);_context2.prev=20;_iterator6.s();case 22:if((_step6=_iterator6.n()).done){_context2.next=29;break;}_step6$value=_slicedToArray(_step6.value,2),_drawer=_step6$value[1];if(!_drawer.init){_context2.next=27;break;}_context2.next=27;return _drawer.init(this);case 27:_context2.next=22;break;case 29:_context2.next=34;break;case 31:_context2.prev=31;_context2.t0=_context2[\"catch\"](20);_iterator6.e(_context2.t0);case 34:_context2.prev=34;_iterator6.f();return _context2.finish(34);case 37:_iterator7=_createForOfIteratorHelper(this.plugins);_context2.prev=38;_iterator7.s();case 40:if((_step7=_iterator7.n()).done){_context2.next=51;break;}_step7$value=_slicedToArray(_step7.value,2),_plugin=_step7$value[1];if(!_plugin.init){_context2.next=46;break;}_plugin.init(this.actualOptions);_context2.next=49;break;case 46:if(!(_plugin.initAsync!==undefined)){_context2.next=49;break;}_context2.next=49;return _plugin.initAsync(this.actualOptions);case 49:_context2.next=40;break;case 51:_context2.next=56;break;case 53:_context2.prev=53;_context2.t1=_context2[\"catch\"](38);_iterator7.e(_context2.t1);case 56:_context2.prev=56;_iterator7.f();return _context2.finish(56);case 59:pathOptions=this.actualOptions.particles.move.path;if(pathOptions.generator){this.setPath(__classPrivateFieldGet(this,_Container_engine,\"f\").plugins.getPathGenerator(pathOptions.generator));}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerInit\",{container:this});this.particles.init();this.particles.setDensity();_iterator8=_createForOfIteratorHelper(this.plugins);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){_step8$value=_slicedToArray(_step8.value,2),_plugin2=_step8$value[1];if(_plugin2.particlesSetup!==undefined){_plugin2.particlesSetup();}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"particlesSetup\",{container:this});case 67:case\"end\":return _context2.stop();}}},_callee2,this,[[20,31,34,37],[38,53,56,59]]);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"loadTheme\",value:function(){var _loadTheme=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(guardCheck(this)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:this.currentTheme=name;_context3.next=5;return this.refresh();case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function loadTheme(_x2){return _loadTheme.apply(this,arguments);}return loadTheme;}()},{key:\"pause\",value:function pause(){if(!guardCheck(this)){return;}if(this.drawAnimationFrame!==undefined){cancelAnimation()(this.drawAnimationFrame);delete this.drawAnimationFrame;}if(this.paused){return;}var _iterator9=_createForOfIteratorHelper(this.plugins),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_slicedToArray(_step9.value,2),plugin=_step9$value[1];if(plugin.pause){plugin.pause();}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if(!this.pageHidden){this.paused=true;}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerPaused\",{container:this});}},{key:\"play\",value:function play(force){if(!guardCheck(this)){return;}var needsUpdate=this.paused||force;if(this.firstStart&&!this.actualOptions.autoPlay){this.firstStart=false;return;}if(this.paused){this.paused=false;}if(needsUpdate){var _iterator10=_createForOfIteratorHelper(this.plugins),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _step10$value=_slicedToArray(_step10.value,2),plugin=_step10$value[1];if(plugin.play){plugin.play();}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerPlay\",{container:this});this.draw(needsUpdate||false);}},{key:\"refresh\",value:function(){var _refresh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(guardCheck(this)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:this.stop();return _context4.abrupt(\"return\",this.start());case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function refresh(){return _refresh.apply(this,arguments);}return refresh;}()},{key:\"reset\",value:function(){var _reset=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(guardCheck(this)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:this._options=loadContainerOptions(__classPrivateFieldGet(this,_Container_engine,\"f\"),this);return _context5.abrupt(\"return\",this.refresh());case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function reset(){return _reset.apply(this,arguments);}return reset;}()},{key:\"setNoise\",value:function setNoise(noiseOrGenerator,init,update){if(!guardCheck(this)){return;}this.setPath(noiseOrGenerator,init,update);}},{key:\"setPath\",value:function setPath(pathOrGenerator,init,update){var _a,_b,_c;if(!pathOrGenerator||!guardCheck(this)){return;}if(typeof pathOrGenerator===\"function\"){this.pathGenerator.generate=pathOrGenerator;if(init){this.pathGenerator.init=init;}if(update){this.pathGenerator.update=update;}}else{var oldGenerator=this.pathGenerator;this.pathGenerator=pathOrGenerator;(_a=this.pathGenerator).generate||(_a.generate=oldGenerator.generate);(_b=this.pathGenerator).init||(_b.init=oldGenerator.init);(_c=this.pathGenerator).update||(_c.update=oldGenerator.update);}}},{key:\"start\",value:function(){var _start=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _iterator11,_step11,_step11$value,plugin;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(this.started||!guardCheck(this))){_context6.next=2;break;}return _context6.abrupt(\"return\");case 2:_context6.next=4;return this.init();case 4:this.started=true;__classPrivateFieldGet(this,_Container_eventListeners,\"f\").addListeners();if(this.interactivity.element instanceof HTMLElement&&this.intersectionObserver){this.intersectionObserver.observe(this.interactivity.element);}_iterator11=_createForOfIteratorHelper(this.plugins);_context6.prev=8;_iterator11.s();case 10:if((_step11=_iterator11.n()).done){_context6.next=20;break;}_step11$value=_slicedToArray(_step11.value,2),plugin=_step11$value[1];if(!(plugin.startAsync!==undefined)){_context6.next=17;break;}_context6.next=15;return plugin.startAsync();case 15:_context6.next=18;break;case 17:if(plugin.start!==undefined){plugin.start();}case 18:_context6.next=10;break;case 20:_context6.next=25;break;case 22:_context6.prev=22;_context6.t0=_context6[\"catch\"](8);_iterator11.e(_context6.t0);case 25:_context6.prev=25;_iterator11.f();return _context6.finish(25);case 28:__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerStarted\",{container:this});this.play();case 30:case\"end\":return _context6.stop();}}},_callee6,this,[[8,22,25,28]]);}));function start(){return _start.apply(this,arguments);}return start;}()},{key:\"stop\",value:function stop(){if(!this.started||!guardCheck(this)){return;}this.firstStart=true;this.started=false;__classPrivateFieldGet(this,_Container_eventListeners,\"f\").removeListeners();this.pause();this.particles.clear();this.canvas.clear();if(this.interactivity.element instanceof HTMLElement&&this.intersectionObserver){this.intersectionObserver.unobserve(this.interactivity.element);}var _iterator12=_createForOfIteratorHelper(this.plugins),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _step12$value=_slicedToArray(_step12.value,2),plugin=_step12$value[1];if(plugin.stop){plugin.stop();}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}var _iterator13=_createForOfIteratorHelper(this.plugins.keys()),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var key=_step13.value;this.plugins.delete(key);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}__classPrivateFieldGet(this,_Container_engine,\"f\").plugins.destroy(this);delete this.particles.grabLineColor;this._sourceOptions=this._options;__classPrivateFieldGet(this,_Container_engine,\"f\").dispatchEvent(\"containerStopped\",{container:this});}},{key:\"updateActualOptions\",value:function updateActualOptions(){this.actualOptions.responsive=[];var newMaxWidth=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);this.actualOptions.setTheme(this.currentTheme);if(this.responsiveMaxWidth!=newMaxWidth){this.responsiveMaxWidth=newMaxWidth;return true;}return false;}},{key:\"intersectionManager\",value:function intersectionManager(entries){if(!this.actualOptions.pauseOnOutsideViewport){return;}var _iterator14=_createForOfIteratorHelper(entries),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var entry=_step14.value;if(entry.target!==this.interactivity.element){continue;}if(entry.isIntersecting){this.play();}else{this.pause();}}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}}]);return Container;}();_Container_engine=new WeakMap(),_Container_eventListeners=new WeakMap();","map":null,"metadata":{},"sourceType":"module"}