{"ast":null,"code":"import _objectSpread from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RoomObjectType}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{LocalizeText}from'../../../api';import{AutoGrid,Button,Column,Flex,LayoutGridItem,Text}from'../../../common';import{ChatEntryType}from'../../chat-history/common/ChatEntryType';import{GetChatHistory}from'../../chat-history/common/GetChatHistory';import{useHelpContext}from'../HelpContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var SelectReportedChatsView=function SelectReportedChatsView(props){var _useState=useState(new Map()),_useState2=_slicedToArray(_useState,2),selectedChats=_useState2[0],setSelectedChats=_useState2[1];var _useHelpContext=useHelpContext(),_useHelpContext$helpR=_useHelpContext.helpReportState,helpReportState=_useHelpContext$helpR===void 0?null:_useHelpContext$helpR,_useHelpContext$setHe=_useHelpContext.setHelpReportState,setHelpReportState=_useHelpContext$setHe===void 0?null:_useHelpContext$setHe;var _helpReportState$repo=helpReportState.reportedUserId,reportedUserId=_helpReportState$repo===void 0?-1:_helpReportState$repo;var userChats=useMemo(function(){return GetChatHistory().chats.filter(function(chat){return chat.type===ChatEntryType.TYPE_CHAT&&chat.entityId===reportedUserId&&chat.entityType===RoomObjectType.USER;});},[reportedUserId]);var selectChat=function selectChat(chatEntry){var chats=new Map(selectedChats);if(chats.has(chatEntry.id))chats.delete(chatEntry.id);else chats.set(chatEntry.id,chatEntry);setSelectedChats(chats);};var submitChats=function submitChats(){if(!selectedChats||selectedChats.size<=0)return;setHelpReportState(function(prevValue){var reportedChats=Array.from(selectedChats.values());var currentStep=3;return _objectSpread(_objectSpread({},prevValue),{},{reportedChats:reportedChats,currentStep:currentStep});});};var back=function back(){setHelpReportState(function(prevValue){var currentStep=prevValue.currentStep-1;return _objectSpread(_objectSpread({},prevValue),{},{currentStep:currentStep});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",fontSize:4,children:LocalizeText('help.emergency.chat_report.subtitle')}),/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",children:LocalizeText('help.emergency.chat_report.description')})]}),/*#__PURE__*/_jsxs(Column,{gap:1,overflow:\"hidden\",children:[!!!userChats.length&&/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",children:LocalizeText('help.cfh.error.no_user_data')}),userChats.length>0&&/*#__PURE__*/_jsx(AutoGrid,{gap:1,columnCount:1,columnMinHeight:25,overflow:\"auto\",children:userChats.map(function(chat,index){return/*#__PURE__*/_jsx(LayoutGridItem,{onClick:function onClick(event){return selectChat(chat);},itemActive:selectedChats.has(chat.id),children:/*#__PURE__*/_jsx(Text,{children:chat.message})},chat.id);})})]}),/*#__PURE__*/_jsxs(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/_jsx(Button,{disabled:selectedChats.size<=0,onClick:submitChats,children:LocalizeText('help.emergency.main.submit.button')})]})]});};","map":null,"metadata":{},"sourceType":"module"}