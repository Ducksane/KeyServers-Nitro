{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{PetType,RoomControllerLevel,RoomObjectCategory,RoomObjectType,RoomObjectVariable}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useState}from'react';import{GetOwnRoomObject,GetSessionDataManager,LocalizeText,RoomWidgetUserActionMessage}from'../../../../api';import{useRoomContext}from'../../RoomContext';import{ContextMenuHeaderView}from'../context-menu/ContextMenuHeaderView';import{ContextMenuListItemView}from'../context-menu/ContextMenuListItemView';import{ContextMenuView}from'../context-menu/ContextMenuView';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _Str_2906=0;var _Str_5818=1;var _Str_5938=2;var _Str_13388=3;export var AvatarInfoWidgetPetView=function AvatarInfoWidgetPetView(props){var _props$petData=props.petData,petData=_props$petData===void 0?null:_props$petData,_props$close=props.close,close=_props$close===void 0?null:_props$close;var _useState=useState(_Str_2906),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),respectsLeft=_useState4[0],setRespectsLeft=_useState4[1];var _useRoomContext=useRoomContext(),_useRoomContext$roomS=_useRoomContext.roomSession,roomSession=_useRoomContext$roomS===void 0?null:_useRoomContext$roomS,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var canPickUp=useMemo(function(){return roomSession.isRoomOwner||roomSession.controllerLevel>=RoomControllerLevel.GUEST||GetSessionDataManager().isModerator;},[roomSession]);var canGiveHandItem=useMemo(function(){var flag=false;var roomObject=GetOwnRoomObject();if(roomObject){var carryId=roomObject.model.getValue(RoomObjectVariable.FIGURE_CARRY_OBJECT);if(carryId>0&&carryId<999999)flag=true;}return flag;},[]);var processAction=function processAction(name){var messageType=null;var message=null;var hideMenu=true;if(name){switch(name){case'respect':var newRespectsLeft=0;setRespectsLeft(function(prevValue){newRespectsLeft=prevValue-1;return newRespectsLeft;});messageType=RoomWidgetUserActionMessage.RESPECT_PET;if(newRespectsLeft>0)hideMenu=false;break;case'treat':messageType=RoomWidgetUserActionMessage.TREAT_PET;break;case'pass_handitem':messageType=RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET;break;case'pick_up':messageType=RoomWidgetUserActionMessage.PICKUP_PET;break;case'mount':messageType=RoomWidgetUserActionMessage.MOUNT_PET;break;case'dismount':messageType=RoomWidgetUserActionMessage.DISMOUNT_PET;break;}if(messageType)message=new RoomWidgetUserActionMessage(messageType,petData.id);if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();};useEffect(function(){setMode(function(prevValue){if(petData.petType===PetType.MONSTERPLANT)return _Str_13388;else if(petData.saddle&&!petData.rider)return _Str_5818;else if(petData.rider)return _Str_5938;return _Str_2906;});setRespectsLeft(petData.respectsPetLeft);},[petData]);return/*#__PURE__*/_jsxs(ContextMenuView,{objectId:petData.roomIndex,category:RoomObjectCategory.UNIT,userType:RoomObjectType.PET,close:close,collapsable:true,children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{children:petData.name}),mode===_Str_2906&&respectsLeft>0&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('respect');},children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])}),mode===_Str_5818&&/*#__PURE__*/_jsxs(_Fragment,{children:[!!petData.publiclyRideable&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('mount');},children:LocalizeText('infostand.button.mount')}),respectsLeft>0&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('respect');},children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])})]}),mode===_Str_5938&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('dismount');},children:LocalizeText('infostand.button.dismount')}),respectsLeft>0&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('respect');},children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])})]}),mode===_Str_13388&&!petData.dead&&petData.energy/petData.maximumEnergy<0.98&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('treat');},children:LocalizeText('infostand.button.treat')}),canPickUp&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('pick_up');},children:LocalizeText('infostand.button.pickup')}),canGiveHandItem&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:function onClick(event){return processAction('pass_hand_item');},children:LocalizeText('infostand.button.pass_hand_item')})]});};","map":null,"metadata":{},"sourceType":"module"}