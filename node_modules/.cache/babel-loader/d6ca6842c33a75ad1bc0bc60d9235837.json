{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{UpdateFloorPropertiesMessageComposer}from'@nitrots/nitro-renderer';import{useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../api';import{Button,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView}from'../../../common';import{UseMountEffect}from'../../../hooks';import{ConvertTileMapToString}from'../common/ConvertMapToString';import{convertNumbersForSaving}from'../common/Utils';import{useFloorplanEditorContext}from'../FloorplanEditorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var FloorplanImportExportView=function FloorplanImportExportView(props){var _props$onCloseClick=props.onCloseClick,onCloseClick=_props$onCloseClick===void 0?null:_props$onCloseClick;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var _useFloorplanEditorCo=useFloorplanEditorContext(),_useFloorplanEditorCo2=_useFloorplanEditorCo.originalFloorplanSettings,originalFloorplanSettings=_useFloorplanEditorCo2===void 0?null:_useFloorplanEditorCo2;var saveFloorChanges=function saveFloorChanges(){SendMessageComposer(new UpdateFloorPropertiesMessageComposer(map.split('\\n').join('\\r'),originalFloorplanSettings.entryPoint[0],originalFloorplanSettings.entryPoint[1],originalFloorplanSettings.entryPointDir,convertNumbersForSaving(originalFloorplanSettings.thicknessWall),convertNumbersForSaving(originalFloorplanSettings.thicknessFloor),originalFloorplanSettings.wallHeight-1));};UseMountEffect(function(){setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap));});return/*#__PURE__*/_jsxs(NitroCardView,{theme:\"primary-slim\",className:\"floorplan-import-export\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('floor.plan.editor.import.export'),onCloseClick:onCloseClick}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"h-100\",value:map,onChange:function onChange(event){return setMap(event.target.value);}}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap));},children:LocalizeText('floor.plan.editor.revert.to.last.received.map')}),/*#__PURE__*/_jsx(Button,{onClick:saveFloorChanges,children:LocalizeText('floor.plan.editor.save')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}