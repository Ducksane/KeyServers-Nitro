{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GetModeratorRoomInfoMessageComposer,ModerateRoomMessageComposer,ModeratorActionMessageComposer,ModeratorRoomInfoEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{SendMessageComposer,TryVisitRoom}from'../../../../api';import{Button,Column,DraggableWindowPosition,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{ModToolsOpenRoomChatlogEvent}from'../../../../events/mod-tools/ModToolsOpenRoomChatlogEvent';import{DispatchUiEvent,UseMessageEventHook}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ModToolsRoomView=function ModToolsRoomView(props){var _props$roomId=props.roomId,roomId=_props$roomId===void 0?null:_props$roomId,_props$onCloseClick=props.onCloseClick,_onCloseClick=_props$onCloseClick===void 0?null:_props$onCloseClick;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),infoRequested=_useState2[0],setInfoRequested=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loadedRoomId=_useState4[0],setLoadedRoomId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),ownerId=_useState8[0],setOwnerId=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),ownerName=_useState10[0],setOwnerName=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),ownerInRoom=_useState12[0],setOwnerInRoom=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),usersInRoom=_useState14[0],setUsersInRoom=_useState14[1];//form data\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),kickUsers=_useState16[0],setKickUsers=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),lockRoom=_useState18[0],setLockRoom=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),changeRoomName=_useState20[0],setChangeRoomName=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),message=_useState22[0],setMessage=_useState22[1];var onModtoolRoomInfoEvent=useCallback(function(event){var parser=event.getParser();if(!parser||parser.data.flatId!==roomId)return;setLoadedRoomId(parser.data.flatId);setName(parser.data.room.name);setOwnerId(parser.data.ownerId);setOwnerName(parser.data.ownerName);setOwnerInRoom(parser.data.ownerInRoom);setUsersInRoom(parser.data.userCount);},[roomId]);UseMessageEventHook(ModeratorRoomInfoEvent,onModtoolRoomInfoEvent);var handleClick=useCallback(function(action,value){if(!action)return;switch(action){case'alert_only':if(message.trim().length===0)return;SendMessageComposer(new ModeratorActionMessageComposer(ModeratorActionMessageComposer.ACTION_ALERT,message,''));SendMessageComposer(new ModerateRoomMessageComposer(roomId,lockRoom?1:0,changeRoomName?1:0,kickUsers?1:0));return;case'send_message':if(message.trim().length===0)return;SendMessageComposer(new ModeratorActionMessageComposer(ModeratorActionMessageComposer.ACTION_MESSAGE,message,''));SendMessageComposer(new ModerateRoomMessageComposer(roomId,lockRoom?1:0,changeRoomName?1:0,kickUsers?1:0));return;}},[changeRoomName,kickUsers,lockRoom,message,roomId]);useEffect(function(){if(infoRequested)return;SendMessageComposer(new GetModeratorRoomInfoMessageComposer(roomId));setInfoRequested(true);},[roomId,infoRequested,setInfoRequested]);return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-room\",theme:\"primary-slim\",windowPosition:DraggableWindowPosition.TOP_LEFT,children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'Room Info'+(name?': '+name:''),onCloseClick:function onCloseClick(event){return _onCloseClick();}}),/*#__PURE__*/_jsxs(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/_jsxs(Flex,{gap:2,children:[/*#__PURE__*/_jsxs(Column,{justifyContent:\"center\",grow:true,gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Text,{bold:true,align:\"end\",className:\"col-7\",children:\"Room Owner:\"}),/*#__PURE__*/_jsx(Text,{underline:true,pointer:true,truncate:true,children:ownerName})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Text,{bold:true,align:\"end\",className:\"col-7\",children:\"Users in room:\"}),/*#__PURE__*/_jsx(Text,{children:usersInRoom})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Text,{bold:true,align:\"end\",className:\"col-7\",children:\"Owner in room:\"}),/*#__PURE__*/_jsx(Text,{children:ownerInRoom?'Yes':'No'})]})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return TryVisitRoom(roomId);},children:\"Visit Room\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return DispatchUiEvent(new ModToolsOpenRoomChatlogEvent(roomId));},children:\"Chatlog\"})]})]}),/*#__PURE__*/_jsxs(Column,{className:\"bg-muted rounded p-2\",gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:kickUsers,onChange:function onChange(event){return setKickUsers(event.target.checked);}}),/*#__PURE__*/_jsx(Text,{small:true,children:\"Kick everyone out\"})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:lockRoom,onChange:function onChange(event){return setLockRoom(event.target.checked);}}),/*#__PURE__*/_jsx(Text,{small:true,children:\"Enable the doorbell\"})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:changeRoomName,onChange:function onChange(event){return setChangeRoomName(event.target.checked);}}),/*#__PURE__*/_jsx(Text,{small:true,children:\"Change room name\"})]})]}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",placeholder:\"Type a mandatory message to the users in this text box...\",value:message,onChange:function onChange(event){return setMessage(event.target.value);}}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(event){return handleClick('send_message');},children:\"Send Caution\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return handleClick('alert_only');},children:\"Send Alert only\"})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}