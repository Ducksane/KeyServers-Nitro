{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GroupBadgePartsComposer,GroupBadgePartsEvent,GroupPurchasedEvent,GroupSettingsComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{AddEventLinkTracker,RemoveLinkEventTracker,SendMessageComposer,TryVisitRoom}from'../../api';import{UseMessageEventHook}from'../../hooks';import{CompareId}from'./common/CompareId';import{GroupsContextProvider}from'./GroupsContext';import{GroupCreatorView}from'./views/GroupCreatorView';import{GroupInformationStandaloneView}from'./views/GroupInformationStandaloneView';import{GroupManagerView}from'./views/GroupManagerView';import{GroupMembersView}from'./views/GroupMembersView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var GroupsView=function GroupsView(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCreatorVisible=_useState2[0],setCreatorVisible=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),groupCustomize=_useState4[0],setGroupCustomize=_useState4[1];var onGroupPurchasedEvent=useCallback(function(event){var parser=event.getParser();setCreatorVisible(false);TryVisitRoom(parser.roomId);},[]);UseMessageEventHook(GroupPurchasedEvent,onGroupPurchasedEvent);var onGroupBadgePartsEvent=useCallback(function(event){var parser=event.getParser();var customize={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};parser.bases.forEach(function(images,id){return customize.badgeBases.push({id:id,images:images});});parser.symbols.forEach(function(images,id){return customize.badgeSymbols.push({id:id,images:images});});parser.partColors.forEach(function(color,id){return customize.badgePartColors.push({id:id,color:color});});parser.colorsA.forEach(function(color,id){return customize.groupColorsA.push({id:id,color:color});});parser.colorsB.forEach(function(color,id){return customize.groupColorsB.push({id:id,color:color});});customize.badgeBases.sort(CompareId);customize.badgeSymbols.sort(CompareId);customize.badgePartColors.sort(CompareId);customize.groupColorsA.sort(CompareId);customize.groupColorsB.sort(CompareId);setGroupCustomize(customize);},[setGroupCustomize]);UseMessageEventHook(GroupBadgePartsEvent,onGroupBadgePartsEvent);var linkReceived=useCallback(function(url){var parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'create':setCreatorVisible(true);return;case'manage':if(!parts[2])return;setCreatorVisible(false);SendMessageComposer(new GroupSettingsComposer(Number(parts[2])));return;}},[]);useEffect(function(){var linkTracker={linkReceived:linkReceived,eventUrlPrefix:'groups/'};AddEventLinkTracker(linkTracker);return function(){return RemoveLinkEventTracker(linkTracker);};},[linkReceived]);useEffect(function(){SendMessageComposer(new GroupBadgePartsComposer());},[]);return/*#__PURE__*/_jsxs(GroupsContextProvider,{value:{groupCustomize:groupCustomize,setGroupCustomize:setGroupCustomize},children:[isCreatorVisible&&/*#__PURE__*/_jsx(GroupCreatorView,{onClose:function onClose(){return setCreatorVisible(false);}}),!isCreatorVisible&&/*#__PURE__*/_jsx(GroupManagerView,{}),/*#__PURE__*/_jsx(GroupMembersView,{}),/*#__PURE__*/_jsx(GroupInformationStandaloneView,{})]});};","map":null,"metadata":{},"sourceType":"module"}