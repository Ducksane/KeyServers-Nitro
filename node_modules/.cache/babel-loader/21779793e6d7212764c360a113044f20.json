{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RoomSessionDoorbellEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetRoomSession}from'../../../api';import{UseRoomSessionManagerEvent}from'../../events';var useDoorbellWidgetState=function useDoorbellWidgetState(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var addUser=useCallback(function(userName){if(users.indexOf(userName)>=0)return;setUsers([].concat(_toConsumableArray(users),[userName]));},[users]);var removeUser=useCallback(function(userName){var index=users.indexOf(userName);if(index===-1)return;var newUsers=_toConsumableArray(users);newUsers.splice(index,1);setUsers(newUsers);},[users]);var answer=useCallback(function(userName,flag){GetRoomSession().sendDoorbellApprovalMessage(userName,flag);removeUser(userName);},[removeUser]);var onRoomSessionDoorbellEvent=useCallback(function(event){switch(event.type){case RoomSessionDoorbellEvent.DOORBELL:addUser(event.userName);return;case RoomSessionDoorbellEvent.RSDE_REJECTED:case RoomSessionDoorbellEvent.RSDE_ACCEPTED:removeUser(event.userName);return;}},[addUser,removeUser]);UseRoomSessionManagerEvent(RoomSessionDoorbellEvent.DOORBELL,onRoomSessionDoorbellEvent);UseRoomSessionManagerEvent(RoomSessionDoorbellEvent.RSDE_REJECTED,onRoomSessionDoorbellEvent);UseRoomSessionManagerEvent(RoomSessionDoorbellEvent.RSDE_ACCEPTED,onRoomSessionDoorbellEvent);return{users:users,addUser:addUser,removeUser:removeUser,answer:answer};};export var useDoorbellWidget=useDoorbellWidgetState;","map":null,"metadata":{},"sourceType":"module"}