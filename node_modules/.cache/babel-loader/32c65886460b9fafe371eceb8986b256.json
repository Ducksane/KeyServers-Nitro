{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{AvatarSetType}from'../../../../avatar/enum/AvatarSetType';import{RoomObjectVariable}from'../../RoomObjectVariable';import{FurnitureMannequinVisualizationData}from'./FurnitureMannequinVisualizationData';import{FurnitureVisualization}from'./FurnitureVisualization';export var FurnitureMannequinVisualization=/*#__PURE__*/function(_FurnitureVisualizati){_inherits(FurnitureMannequinVisualization,_FurnitureVisualizati);var _super=_createSuper(FurnitureMannequinVisualization);function FurnitureMannequinVisualization(){var _this;_classCallCheck(this,FurnitureMannequinVisualization);_this=_super.call(this);_this._data=void 0;_this._mannequinScale=void 0;_this._figure=void 0;_this._gender=void 0;_this._dynamicAssetName=void 0;_this._needsUpdate=void 0;_this._placeHolderFigure=void 0;_this._disposed=void 0;_this._mannequinScale=-1;_this._figure=null;_this._gender=null;_this._dynamicAssetName=null;_this._needsUpdate=false;_this._placeHolderFigure='hd-99999-99998';_this._disposed=false;return _this;}_createClass(FurnitureMannequinVisualization,[{key:\"initialize\",value:function initialize(data){if(!(data instanceof FurnitureMannequinVisualizationData))return false;return _get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"initialize\",this).call(this,data);}},{key:\"dispose\",value:function dispose(){if(this._disposed)return;this._disposed=true;if(this._dynamicAssetName&&this.asset){this.asset.disposeAsset(this._dynamicAssetName);this._dynamicAssetName=null;}_get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"dispose\",this).call(this);}},{key:\"updateObject\",value:function updateObject(scale,direction){var updateObject=_get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"updateObject\",this).call(this,scale,direction);if(updateObject){if(this._mannequinScale!==scale){this._mannequinScale=scale;this.updateAvatar();}}return updateObject;}},{key:\"updateModel\",value:function updateModel(scale){var updateModel=_get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"updateModel\",this).call(this,scale);if(updateModel){var figure=this.object.model.getValue(RoomObjectVariable.FURNITURE_MANNEQUIN_FIGURE)||null;if(figure){this._figure=figure+'.'+this._placeHolderFigure;this._gender=this.object.model.getValue(RoomObjectVariable.FURNITURE_MANNEQUIN_GENDER)||null;this.updateAvatar();}}updateModel=updateModel||this._needsUpdate;this._needsUpdate=false;return updateModel;}},{key:\"updateAvatar\",value:function updateAvatar(){var forceUpdate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.avatarExists()||forceUpdate){var avatarImage=this._data.createAvatarImage(this._figure,this._mannequinScale,this._gender,this);if(avatarImage){avatarImage.setDirection(AvatarSetType.FULL,this.direction);if(this._dynamicAssetName)this.asset.disposeAsset(this._dynamicAssetName);this.asset.addAsset(this.getAvatarAssetName(),avatarImage.getImage(AvatarSetType.FULL,false,1,false),true);this._dynamicAssetName=this.getAvatarAssetName();this._needsUpdate=true;avatarImage.dispose();}}}},{key:\"avatarExists\",value:function avatarExists(){return this._figure&&this.getAsset(this.getAvatarAssetName())!==null;}},{key:\"getAvatarAssetName\",value:function getAvatarAssetName(){return'mannequin_'+this._figure+'_'+this._mannequinScale+'_'+this.direction+'_'+this.object.id;}},{key:\"resetFigure\",value:function resetFigure(figure){if(figure===this._figure)this.updateAvatar(true);}},{key:\"getSpriteAssetName\",value:function getSpriteAssetName(scale,layerId){var tag=this.getLayerTag(scale,this.direction,layerId);if(this._figure&&tag===FurnitureMannequinVisualization.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()){return this.getAvatarAssetName();}return _get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"getSpriteAssetName\",this).call(this,scale,layerId);}},{key:\"getLayerXOffset\",value:function getLayerXOffset(scale,direction,layerId){var tag=this.getLayerTag(scale,direction,layerId);if(tag===FurnitureMannequinVisualization.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists())return-this.getSprite(layerId).width/2;return _get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"getLayerXOffset\",this).call(this,scale,direction,layerId);}},{key:\"getLayerYOffset\",value:function getLayerYOffset(scale,direction,layerId){var tag=this.getLayerTag(scale,direction,layerId);if(tag===FurnitureMannequinVisualization.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists())return-this.getSprite(layerId).height;return _get(_getPrototypeOf(FurnitureMannequinVisualization.prototype),\"getLayerYOffset\",this).call(this,scale,direction,layerId);}},{key:\"disposed\",get:function get(){return this._disposed;}}]);return FurnitureMannequinVisualization;}(FurnitureVisualization);FurnitureMannequinVisualization.AVATAR_IMAGE_SPRITE_TAG='avatar_image';","map":null,"metadata":{},"sourceType":"module"}