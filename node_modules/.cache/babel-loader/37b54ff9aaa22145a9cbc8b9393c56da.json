{"ast":null,"code":"import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{Point,Rectangle}from'@pixi/math';import{NitroContainer,NitroSprite}from'../../../core';import{TextureUtils}from'../../utils/TextureUtils';import{RoomObjectSprite}from'./RoomObjectSprite';export var RoomObjectSpriteVisualization=/*#__PURE__*/function(){function RoomObjectSpriteVisualization(){_classCallCheck(this,RoomObjectSpriteVisualization);this._id=void 0;this._object=void 0;this._asset=void 0;this._sprites=void 0;this._scale=void 0;this._updateObjectCounter=void 0;this._updateModelCounter=void 0;this._updateSpriteCounter=void 0;this._id=RoomObjectSpriteVisualization.VISUALIZATION_COUNTER++;this._object=null;this._asset=null;this._sprites=[];this._scale=-1;this._updateObjectCounter=-1;this._updateModelCounter=-1;this._updateSpriteCounter=-1;}_createClass(RoomObjectSpriteVisualization,[{key:\"initialize\",value:function initialize(data){return false;}},{key:\"update\",value:function update(geometry,time,_update,skipUpdate){return;}},{key:\"reset\",value:function reset(){this._scale=-1;}},{key:\"dispose\",value:function dispose(){if(this._sprites){while(this._sprites.length){var sprite=this._sprites[0];if(sprite)sprite.dispose();this._sprites.pop();}this._sprites=null;}this._object=null;this._asset=null;}},{key:\"getSprite\",value:function getSprite(index){if(index>=0&&index<this._sprites.length)return this._sprites[index];return null;}},{key:\"getSpriteList\",value:function getSpriteList(){return null;}},{key:\"createSprite\",value:function createSprite(){return this.createSpriteAtIndex(this._sprites.length);}},{key:\"createSpriteAtIndex\",value:function createSpriteAtIndex(index){var sprite=new RoomObjectSprite();if(index>=this._sprites.length){this._sprites.push(sprite);}else{this._sprites.splice(index,0,sprite);}return sprite;}},{key:\"createSprites\",value:function createSprites(count){while(this._sprites.length>count){var sprite=this._sprites[this._sprites.length-1];if(sprite)sprite.dispose();this._sprites.pop();}while(this._sprites.length<count){this._sprites.push(new RoomObjectSprite());}}},{key:\"image\",get:function get(){return this.getImage(0,-1);}},{key:\"getImage\",value:function getImage(bgColor,originalId){var boundingRectangle=this.getBoundingRectangle();if(boundingRectangle.width*boundingRectangle.height===0)return null;var spriteCount=this.totalSprites;var spriteList=[];var index=0;while(index<spriteCount){var objectSprite=this.getSprite(index);if(objectSprite&&objectSprite.visible&&objectSprite.texture)spriteList.push(objectSprite);index++;}spriteList.sort(function(a,b){return b.relativeDepth-a.relativeDepth;});var container=new NitroContainer();index=0;while(index<spriteList.length){var _objectSprite=spriteList[index];var _texture=_objectSprite.texture;if(_texture){var sprite=new NitroSprite(_texture);sprite.alpha=_objectSprite.alpha/255;sprite.tint=_objectSprite.color;sprite.x=_objectSprite.offsetX;sprite.y=_objectSprite.offsetY;sprite.blendMode=_objectSprite.blendMode;sprite.filters=_objectSprite.filters;if(_objectSprite.flipH)sprite.scale.x=-1;if(_objectSprite.flipV)sprite.scale.y=-1;container.addChild(sprite);}index++;}var texture=TextureUtils.generateTexture(container);if(!texture)return null;return texture;}},{key:\"getBoundingRectangle\",value:function getBoundingRectangle(){var totalSprites=this.totalSprites;var rectangle=new Rectangle();var iterator=0;while(iterator<totalSprites){var sprite=this.getSprite(iterator);if(sprite&&sprite.texture&&sprite.visible){var offsetX=sprite.flipH?-sprite.width+sprite.offsetX:sprite.offsetX;var offsetY=sprite.flipV?-sprite.height+sprite.offsetY:sprite.offsetY;var point=new Point(offsetX,offsetY);if(iterator===0){rectangle.x=point.x;rectangle.y=point.y;rectangle.width=sprite.width;rectangle.height=sprite.height;}else{if(point.x<rectangle.x)rectangle.x=point.x;if(point.y<rectangle.y)rectangle.y=point.y;if(point.x+sprite.width>rectangle.right)rectangle.width=point.x+sprite.width-rectangle.x;if(point.y+sprite.height>rectangle.bottom)rectangle.height=point.y+sprite.height-rectangle.y;}}iterator++;}return rectangle;}},{key:\"instanceId\",get:function get(){return this._id;}},{key:\"object\",get:function get(){return this._object;},set:function set(object){this._object=object;}},{key:\"asset\",get:function get(){return this._asset;},set:function set(asset){if(this._asset)this._asset.removeReference();this._asset=asset;if(this._asset)this._asset.addReference();}},{key:\"sprites\",get:function get(){return this._sprites;}},{key:\"totalSprites\",get:function get(){return this._sprites.length;}},{key:\"updateObjectCounter\",get:function get(){return this._updateObjectCounter;},set:function set(count){this._updateObjectCounter=count;}},{key:\"updateModelCounter\",get:function get(){return this._updateModelCounter;},set:function set(count){this._updateModelCounter=count;}},{key:\"updateSpriteCounter\",get:function get(){return this._updateSpriteCounter;},set:function set(count){this._updateSpriteCounter=count;}},{key:\"spriteCount\",get:function get(){return this._sprites.length;}}]);return RoomObjectSpriteVisualization;}();RoomObjectSpriteVisualization.VISUALIZATION_COUNTER=0;","map":null,"metadata":{},"sourceType":"module"}