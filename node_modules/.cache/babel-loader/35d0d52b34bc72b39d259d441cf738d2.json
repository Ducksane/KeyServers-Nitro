{"ast":null,"code":"import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Vector3d}from'../../../../../room/utils/Vector3d';import{RoomObjectFloorHoleEvent}from'../../../events/RoomObjectFloorHoleEvent';import{ObjectDataUpdateMessage}from'../../../messages/ObjectDataUpdateMessage';import{RoomObjectVariable}from'../../RoomObjectVariable';import{FurnitureMultiStateLogic}from'./FurnitureMultiStateLogic';export var FurnitureFloorHoleLogic=/*#__PURE__*/function(_FurnitureMultiStateL){_inherits(FurnitureFloorHoleLogic,_FurnitureMultiStateL);var _super=_createSuper(FurnitureFloorHoleLogic);function FurnitureFloorHoleLogic(){var _this;_classCallCheck(this,FurnitureFloorHoleLogic);_this=_super.call(this);_this._currentState=void 0;_this._currentLocation=void 0;_this._currentState=-1;_this._currentLocation=null;return _this;}_createClass(FurnitureFloorHoleLogic,[{key:\"getEventTypes\",value:function getEventTypes(){var types=[RoomObjectFloorHoleEvent.ADD_HOLE,RoomObjectFloorHoleEvent.REMOVE_HOLE];return this.mergeTypes(_get(_getPrototypeOf(FurnitureFloorHoleLogic.prototype),\"getEventTypes\",this).call(this),types);}},{key:\"onDispose\",value:function onDispose(){if(this._currentState===FurnitureFloorHoleLogic.STATE_HOLE){this.eventDispatcher.dispatchEvent(new RoomObjectFloorHoleEvent(RoomObjectFloorHoleEvent.REMOVE_HOLE,this.object));}_get(_getPrototypeOf(FurnitureFloorHoleLogic.prototype),\"onDispose\",this).call(this);}},{key:\"update\",value:function update(time){_get(_getPrototypeOf(FurnitureFloorHoleLogic.prototype),\"update\",this).call(this,time);this.handleAutomaticStateUpdate();}},{key:\"processUpdateMessage\",value:function processUpdateMessage(message){_get(_getPrototypeOf(FurnitureFloorHoleLogic.prototype),\"processUpdateMessage\",this).call(this,message);if(!this.object)return;if(message instanceof ObjectDataUpdateMessage){this.handleStateUpdate(this.object.getState(0));}var location=this.object.getLocation();if(!this._currentLocation){this._currentLocation=new Vector3d();}else{if(location.x!==this._currentLocation.x||location.y!==this._currentLocation.y){if(this._currentState===FurnitureFloorHoleLogic.STATE_HOLE){if(this.eventDispatcher)this.eventDispatcher.dispatchEvent(new RoomObjectFloorHoleEvent(RoomObjectFloorHoleEvent.ADD_HOLE,this.object));}}}this._currentLocation.assign(location);}},{key:\"handleStateUpdate\",value:function handleStateUpdate(state){if(state===this._currentState)return;if(this.eventDispatcher){if(state===FurnitureFloorHoleLogic.STATE_HOLE){this.eventDispatcher.dispatchEvent(new RoomObjectFloorHoleEvent(RoomObjectFloorHoleEvent.ADD_HOLE,this.object));}else if(this._currentState===FurnitureFloorHoleLogic.STATE_HOLE){this.eventDispatcher.dispatchEvent(new RoomObjectFloorHoleEvent(RoomObjectFloorHoleEvent.REMOVE_HOLE,this.object));}}this._currentState=state;}},{key:\"handleAutomaticStateUpdate\",value:function handleAutomaticStateUpdate(){if(!this.object)return;var model=this.object.model;if(!model)return;var stateIndex=model.getValue(RoomObjectVariable.FURNITURE_AUTOMATIC_STATE_INDEX);if(!isNaN(stateIndex))this.handleStateUpdate(stateIndex%2);}}]);return FurnitureFloorHoleLogic;}(FurnitureMultiStateLogic);FurnitureFloorHoleLogic.STATE_HOLE=0;","map":null,"metadata":{},"sourceType":"module"}