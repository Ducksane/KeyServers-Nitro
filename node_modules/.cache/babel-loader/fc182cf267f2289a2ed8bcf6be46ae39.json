{"ast":null,"code":"import _toConsumableArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{CalendarItemState,GetSessionDataManager,LocalizeText}from'../../api';import{Base,Button,Column,Flex,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../common';import{CalendarItemView}from'./CalendarItemView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TOTAL_SHOWN_ITEMS=5;export var CalendarView=function CalendarView(props){var _props$close=props.close,close=_props$close===void 0?null:_props$close,_props$campaignName=props.campaignName,campaignName=_props$campaignName===void 0?null:_props$campaignName,_props$currentDay=props.currentDay,currentDay=_props$currentDay===void 0?null:_props$currentDay,_props$numDays=props.numDays,numDays=_props$numDays===void 0?null:_props$numDays,_props$missedDays=props.missedDays,missedDays=_props$missedDays===void 0?null:_props$missedDays,_props$openedDays=props.openedDays,openedDays=_props$openedDays===void 0?null:_props$openedDays,_props$openPackage=props.openPackage,openPackage=_props$openPackage===void 0?null:_props$openPackage,_props$receivedProduc=props.receivedProducts,receivedProducts=_props$receivedProduc===void 0?null:_props$receivedProduc;var _useState=useState(currentDay),_useState2=_slicedToArray(_useState,2),selectedDay=_useState2[0],setSelectedDay=_useState2[1];var _useState3=useState(Math.max(0,selectedDay-1)),_useState4=_slicedToArray(_useState3,2),index=_useState4[0],setIndex=_useState4[1];var getDayState=function getDayState(day){if(openedDays.includes(day))return CalendarItemState.STATE_UNLOCKED;if(day>currentDay)return CalendarItemState.STATE_LOCKED_FUTURE;if(missedDays.includes(day))return CalendarItemState.STATE_LOCKED_EXPIRED;return CalendarItemState.STATE_LOCKED_AVAILABLE;};var dayMessage=function dayMessage(day){var state=getDayState(day);switch(state){case CalendarItemState.STATE_UNLOCKED:return LocalizeText('campaign.calendar.info.unlocked');case CalendarItemState.STATE_LOCKED_FUTURE:return LocalizeText('campaign.calendar.info.future');case CalendarItemState.STATE_LOCKED_EXPIRED:return LocalizeText('campaign.calendar.info.expired');default:return LocalizeText('campaign.calendar.info.available.desktop');}};var onClickNext=function onClickNext(){var nextDay=selectedDay+1;if(nextDay===numDays)return;setSelectedDay(nextDay);if(index+TOTAL_SHOWN_ITEMS<nextDay+1)setIndex(index+1);};var onClickPrev=function onClickPrev(){var prevDay=selectedDay-1;if(prevDay<0)return;setSelectedDay(prevDay);if(index>prevDay)setIndex(index-1);};var onClickItem=function onClickItem(item){if(selectedDay===item){var state=getDayState(item);if(state===CalendarItemState.STATE_LOCKED_AVAILABLE)openPackage(item,false);return;}setSelectedDay(item);};var forceOpen=function forceOpen(){var id=selectedDay;var state=getDayState(id);if(state!==CalendarItemState.STATE_UNLOCKED)openPackage(id,true);};return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-campaign-calendar\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText(\"campaign.calendar.\".concat(campaignName,\".title\")),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Grid,{fullHeight:false,justifyContent:\"between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Column,{size:1}),/*#__PURE__*/_jsx(Column,{size:10,children:/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{fontSize:3,children:LocalizeText('campaign.calendar.heading.day',['number'],[(selectedDay+1).toString()])}),/*#__PURE__*/_jsx(Text,{children:dayMessage(selectedDay)})]}),/*#__PURE__*/_jsx(\"div\",{children:GetSessionDataManager().isModerator&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:forceOpen,children:\"Force open\"})})]})}),/*#__PURE__*/_jsx(Column,{size:1})]}),/*#__PURE__*/_jsxs(Flex,{fullHeight:true,gap:2,children:[/*#__PURE__*/_jsx(Flex,{center:true,children:/*#__PURE__*/_jsx(Base,{pointer:true,className:\"campaign-spritesheet prev\",onClick:onClickPrev})}),/*#__PURE__*/_jsx(Column,{center:true,fullWidth:true,children:/*#__PURE__*/_jsx(Grid,{fit:true,columnCount:TOTAL_SHOWN_ITEMS,gap:1,children:_toConsumableArray(Array(TOTAL_SHOWN_ITEMS)).map(function(e,i){var day=index+i;return/*#__PURE__*/_jsx(Column,{overflow:\"hidden\",children:/*#__PURE__*/_jsx(CalendarItemView,{itemId:day,state:getDayState(day),active:selectedDay===day,product:receivedProducts.has(day)?receivedProducts.get(day):null,onClick:onClickItem})},i);})})}),/*#__PURE__*/_jsx(Flex,{center:true,children:/*#__PURE__*/_jsx(Base,{pointer:true,className:\"campaign-spritesheet next\",onClick:onClickNext})})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}