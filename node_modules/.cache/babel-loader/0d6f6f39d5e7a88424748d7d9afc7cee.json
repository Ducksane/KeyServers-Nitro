{"ast":null,"code":"import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Disposable}from'../../core/common/disposable/Disposable';import{CompostPlantMessageComposer,FurnitureMultiStateComposer,HarvestPetMessageComposer,PetMountComposer,PollAnswerComposer,PollRejectComposer,PollStartComposer,RemovePetSaddleComposer,TogglePetBreedingComposer,TogglePetRidingComposer,UsePetProductComposer}from'../communication';import{RoomDoorbellAccessComposer}from'../communication/messages/outgoing/room/access/RoomDoorbellAccessComposer';import{RoomEnterComposer}from'../communication/messages/outgoing/room/access/RoomEnterComposer';import{RoomAmbassadorAlertComposer}from'../communication/messages/outgoing/room/action/RoomAmbassadorAlertComposer';import{RoomBanUserComposer}from'../communication/messages/outgoing/room/action/RoomBanUserComposer';import{RoomGiveRightsComposer}from'../communication/messages/outgoing/room/action/RoomGiveRightsComposer';import{RoomKickUserComposer}from'../communication/messages/outgoing/room/action/RoomKickUserComposer';import{RoomMuteUserComposer}from'../communication/messages/outgoing/room/action/RoomMuteUserComposer';import{RoomTakeRightsComposer}from'../communication/messages/outgoing/room/action/RoomTakeRightsComposer';import{BotRemoveComposer}from'../communication/messages/outgoing/room/engine/BotRemoveComposer';import{PetRemoveComposer}from'../communication/messages/outgoing/room/engine/PetRemoveComposer';import{MoodlightSettingsComposer}from'../communication/messages/outgoing/room/furniture/dimmer/MoodlightSettingsComposer';import{MoodlightSettingsSaveComposer}from'../communication/messages/outgoing/room/furniture/dimmer/MoodlightSettingsSaveComposer';import{MoodlightTogggleStateComposer}from'../communication/messages/outgoing/room/furniture/dimmer/MoodlightTogggleStateComposer';import{OpenPresentComposer}from'../communication/messages/outgoing/room/furniture/presents/OpenPresentComposer';import{RoomUnitChatComposer}from'../communication/messages/outgoing/room/unit/chat/RoomUnitChatComposer';import{RoomUnitChatShoutComposer}from'../communication/messages/outgoing/room/unit/chat/RoomUnitChatShoutComposer';import{RoomUnitChatWhisperComposer}from'../communication/messages/outgoing/room/unit/chat/RoomUnitChatWhisperComposer';import{RoomUnitTypingStartComposer}from'../communication/messages/outgoing/room/unit/chat/RoomUnitTypingStartComposer';import{RoomUnitTypingStopComposer}from'../communication/messages/outgoing/room/unit/chat/RoomUnitTypingStopComposer';import{RoomUnitActionComposer}from'../communication/messages/outgoing/room/unit/RoomUnitActionComposer';import{RoomUnitDanceComposer}from'../communication/messages/outgoing/room/unit/RoomUnitDanceComposer';import{RoomUnitPostureComposer}from'../communication/messages/outgoing/room/unit/RoomUnitPostureComposer';import{RoomUnitSignComposer}from'../communication/messages/outgoing/room/unit/RoomUnitSignComposer';import{UserMottoComposer}from'../communication/messages/outgoing/user/data/UserMottoComposer';import{RoomControllerLevel}from'./enum/RoomControllerLevel';import{RoomTradingLevelEnum}from'./enum/RoomTradingLevelEnum';import{RoomSessionEvent}from'./events/RoomSessionEvent';import{UserDataManager}from'./UserDataManager';export var RoomSession=/*#__PURE__*/function(_Disposable){_inherits(RoomSession,_Disposable);var _super=_createSuper(RoomSession);function RoomSession(){var _this;_classCallCheck(this,RoomSession);_this=_super.call(this);_this._connection=void 0;_this._userData=void 0;_this._roomId=void 0;_this._password=void 0;_this._state=void 0;_this._tradeMode=void 0;_this._doorMode=void 0;_this._allowPets=void 0;_this._controllerLevel=void 0;_this._ownRoomIndex=void 0;_this._isGuildRoom=void 0;_this._isRoomOwner=void 0;_this._isDecorating=void 0;_this._isSpectator=void 0;_this._moderationSettings=void 0;_this._connection=null;_this._userData=new UserDataManager();_this._roomId=0;_this._password=null;_this._state=RoomSessionEvent.CREATED;_this._tradeMode=RoomTradingLevelEnum.NO_TRADING;_this._doorMode=0;_this._controllerLevel=RoomControllerLevel.NONE;_this._ownRoomIndex=-1;_this._isGuildRoom=false;_this._isRoomOwner=false;_this._isDecorating=false;_this._isSpectator=false;_this._moderationSettings=null;return _this;}_createClass(RoomSession,[{key:\"onDispose\",value:function onDispose(){if(this._userData){this._userData.dispose();this._userData=null;}this._connection=null;}},{key:\"setConnection\",value:function setConnection(connection){if(this._connection||!connection)return;this._connection=connection;if(this._userData)this._userData.setConnection(connection);}},{key:\"setControllerLevel\",value:function setControllerLevel(level){if(level>=RoomControllerLevel.NONE&&level<=RoomControllerLevel.MODERATOR){this._controllerLevel=level;return;}this._controllerLevel=RoomControllerLevel.NONE;}},{key:\"setOwnRoomIndex\",value:function setOwnRoomIndex(roomIndex){this._ownRoomIndex=roomIndex;}},{key:\"setRoomOwner\",value:function setRoomOwner(){this._isRoomOwner=true;}},{key:\"start\",value:function start(){if(this._state!==RoomSessionEvent.CREATED||!this._connection)return false;this._state=RoomSessionEvent.STARTED;return this.enterRoom();}},{key:\"enterRoom\",value:function enterRoom(){if(!this._connection)return false;this._connection.send(new RoomEnterComposer(this._roomId,this._password));return true;}},{key:\"reset\",value:function reset(roomId){if(roomId===this._roomId)return;this._roomId=roomId;}},{key:\"sendChatMessage\",value:function sendChatMessage(text,styleId){this._connection.send(new RoomUnitChatComposer(text,styleId));}},{key:\"sendShoutMessage\",value:function sendShoutMessage(text,styleId){this._connection.send(new RoomUnitChatShoutComposer(text,styleId));}},{key:\"sendWhisperMessage\",value:function sendWhisperMessage(recipientName,text,styleId){this._connection.send(new RoomUnitChatWhisperComposer(recipientName,text,styleId));}},{key:\"sendChatTypingMessage\",value:function sendChatTypingMessage(isTyping){if(isTyping)this._connection.send(new RoomUnitTypingStartComposer());else this._connection.send(new RoomUnitTypingStopComposer());}},{key:\"sendMottoMessage\",value:function sendMottoMessage(motto){this._connection.send(new UserMottoComposer(motto));}},{key:\"sendDanceMessage\",value:function sendDanceMessage(danceId){this._connection.send(new RoomUnitDanceComposer(danceId));}},{key:\"sendExpressionMessage\",value:function sendExpressionMessage(expression){this._connection.send(new RoomUnitActionComposer(expression));}},{key:\"sendSignMessage\",value:function sendSignMessage(sign){if(sign<0||sign>17)return;this._connection.send(new RoomUnitSignComposer(sign));}},{key:\"sendPostureMessage\",value:function sendPostureMessage(posture){this._connection.send(new RoomUnitPostureComposer(posture));}},{key:\"sendDoorbellApprovalMessage\",value:function sendDoorbellApprovalMessage(userName,flag){this._connection.send(new RoomDoorbellAccessComposer(userName,flag));}},{key:\"sendAmbassadorAlertMessage\",value:function sendAmbassadorAlertMessage(userId){this._connection.send(new RoomAmbassadorAlertComposer(userId));}},{key:\"sendKickMessage\",value:function sendKickMessage(userId){this._connection.send(new RoomKickUserComposer(userId));}},{key:\"sendMuteMessage\",value:function sendMuteMessage(userId,minutes){this._connection.send(new RoomMuteUserComposer(userId,minutes,this._roomId));}},{key:\"sendBanMessage\",value:function sendBanMessage(userId,type){this._connection.send(new RoomBanUserComposer(userId,this._roomId,type));}},{key:\"sendGiveRightsMessage\",value:function sendGiveRightsMessage(userId){this._connection.send(new RoomGiveRightsComposer(userId));}},{key:\"sendTakeRightsMessage\",value:function sendTakeRightsMessage(userId){this._connection.send(new RoomTakeRightsComposer(userId));}},{key:\"sendPollStartMessage\",value:function sendPollStartMessage(pollId){this._connection.send(new PollStartComposer(pollId));}},{key:\"sendPollRejectMessage\",value:function sendPollRejectMessage(pollId){this._connection.send(new PollRejectComposer(pollId));}},{key:\"sendPollAnswerMessage\",value:function sendPollAnswerMessage(pollId,questionId,answers){this._connection.send(new PollAnswerComposer(pollId,questionId,answers));}},{key:\"updateMoodlightData\",value:function updateMoodlightData(id,effectId,color,brightness,apply){var colorString='000000'+color.toString(16).toUpperCase();colorString='#'+colorString.substring(colorString.length-6);this.connection.send(new MoodlightSettingsSaveComposer(id,effectId,colorString,brightness,apply));}},{key:\"toggleMoodlightState\",value:function toggleMoodlightState(){this.connection.send(new MoodlightTogggleStateComposer());}},{key:\"pickupPet\",value:function pickupPet(id){if(!this._connection)return;this._connection.send(new PetRemoveComposer(id));}},{key:\"pickupBot\",value:function pickupBot(id){if(!this._connection)return;this._connection.send(new BotRemoveComposer(id));}},{key:\"requestMoodlightSettings\",value:function requestMoodlightSettings(){if(!this._connection)return;this._connection.send(new MoodlightSettingsComposer());}},{key:\"openGift\",value:function openGift(objectId){this._connection.send(new OpenPresentComposer(objectId));}},{key:\"mountPet\",value:function mountPet(id){this._connection.send(new PetMountComposer(id,true));}},{key:\"dismountPet\",value:function dismountPet(id){this._connection.send(new PetMountComposer(id,false));}},{key:\"usePetProduct\",value:function usePetProduct(itemId,petId){this._connection.send(new UsePetProductComposer(itemId,petId));}},{key:\"removePetSaddle\",value:function removePetSaddle(id){this._connection.send(new RemovePetSaddleComposer(id));}},{key:\"togglePetBreeding\",value:function togglePetBreeding(id){this._connection.send(new TogglePetBreedingComposer(id));}},{key:\"togglePetRiding\",value:function togglePetRiding(id){this._connection.send(new TogglePetRidingComposer(id));}},{key:\"useMultistateItem\",value:function useMultistateItem(id){this._connection.send(new FurnitureMultiStateComposer(id));}},{key:\"harvestPet\",value:function harvestPet(id){this._connection.send(new HarvestPetMessageComposer(id));}},{key:\"compostPlant\",value:function compostPlant(id){this._connection.send(new CompostPlantMessageComposer(id));}},{key:\"connection\",get:function get(){return this._connection;}},{key:\"userDataManager\",get:function get(){return this._userData;}},{key:\"roomId\",get:function get(){return this._roomId;},set:function set(roomId){this._roomId=roomId;}},{key:\"password\",get:function get(){return this._password;},set:function set(password){this._password=password;}},{key:\"state\",get:function get(){return this._state;}},{key:\"_Str_7411\",get:function get(){return true;}},{key:\"tradeMode\",get:function get(){return this._tradeMode;},set:function set(mode){this._tradeMode=mode;}},{key:\"doorMode\",get:function get(){return this._doorMode;},set:function set(mode){this._doorMode=mode;}},{key:\"allowPets\",get:function get(){return this._allowPets;},set:function set(flag){this._allowPets=flag;}},{key:\"controllerLevel\",get:function get(){return this._controllerLevel;}},{key:\"ownRoomIndex\",get:function get(){return this._ownRoomIndex;}},{key:\"isGuildRoom\",get:function get(){return this._isGuildRoom;},set:function set(flag){this._isGuildRoom=flag;}},{key:\"isRoomOwner\",get:function get(){return this._isRoomOwner;}},{key:\"isDecorating\",get:function get(){return this._isDecorating;},set:function set(flag){this._isDecorating=flag;}},{key:\"isSpectator\",get:function get(){return this._isSpectator;},set:function set(flag){this._isSpectator=flag;}},{key:\"moderationSettings\",get:function get(){return this._moderationSettings;},set:function set(parser){this._moderationSettings=parser;}}]);return RoomSession;}(Disposable);","map":null,"metadata":{},"sourceType":"module"}