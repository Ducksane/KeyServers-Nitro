{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{MouseEventType}from'../../../../ui/MouseEventType';import{RoomObjectFurnitureActionEvent}from'../../../events/RoomObjectFurnitureActionEvent';import{RoomObjectWidgetRequestEvent}from'../../../events/RoomObjectWidgetRequestEvent';import{ObjectDataUpdateMessage}from'../../../messages/ObjectDataUpdateMessage';import{ObjectModelDataUpdateMessage}from'../../../messages/ObjectModelDataUpdateMessage';import{MapDataType}from'../../data/type/MapDataType';import{RoomObjectVariable}from'../../RoomObjectVariable';import{FurnitureLogic}from'./FurnitureLogic';export var FurniturePresentLogic=/*#__PURE__*/function(_FurnitureLogic){_inherits(FurniturePresentLogic,_FurnitureLogic);var _super=_createSuper(FurniturePresentLogic);function FurniturePresentLogic(){_classCallCheck(this,FurniturePresentLogic);return _super.apply(this,arguments);}_createClass(FurniturePresentLogic,[{key:\"getEventTypes\",value:function getEventTypes(){var types=[RoomObjectWidgetRequestEvent.PRESENT];return this.mergeTypes(_get(_getPrototypeOf(FurniturePresentLogic.prototype),\"getEventTypes\",this).call(this),types);}},{key:\"initialize\",value:function initialize(asset){_get(_getPrototypeOf(FurniturePresentLogic.prototype),\"initialize\",this).call(this,asset);if(asset.logic){if(asset.logic.particleSystems&&asset.logic.particleSystems.length){this.object.model.setValue(RoomObjectVariable.FURNITURE_FIREWORKS_DATA,asset.logic.particleSystems);}}}},{key:\"processUpdateMessage\",value:function processUpdateMessage(message){_get(_getPrototypeOf(FurniturePresentLogic.prototype),\"processUpdateMessage\",this).call(this,message);if(message instanceof ObjectDataUpdateMessage){message.data.writeRoomObjectModel(this.object.model);this.updateStuffData();}if(message instanceof ObjectModelDataUpdateMessage){if(message.numberKey===RoomObjectVariable.FURNITURE_DISABLE_PICKING_ANIMATION){this.object.model.setValue(RoomObjectVariable.FURNITURE_DISABLE_PICKING_ANIMATION,message.numberValue);}}}},{key:\"updateStuffData\",value:function updateStuffData(){if(!this.object||!this.object.model)return;var stuffData=new MapDataType();stuffData.initializeFromRoomObjectModel(this.object.model);var message=stuffData.getValue(FurniturePresentLogic.MESSAGE);var data=this.object.model.getValue(RoomObjectVariable.FURNITURE_DATA);if(!message&&typeof data==='string'){this.object.model.setValue(RoomObjectVariable.FURNITURE_DATA,data.substr(1));}else{this.object.model.setValue(RoomObjectVariable.FURNITURE_DATA,stuffData.getValue(FurniturePresentLogic.MESSAGE));}this.writeToModel(RoomObjectVariable.FURNITURE_TYPE_ID,stuffData.getValue(FurniturePresentLogic.PRODUCT_CODE));this.writeToModel(RoomObjectVariable.FURNITURE_PURCHASER_NAME,stuffData.getValue(FurniturePresentLogic.PURCHASER_NAME));this.writeToModel(RoomObjectVariable.FURNITURE_PURCHASER_FIGURE,stuffData.getValue(FurniturePresentLogic.PURCHASER_FIGURE));}},{key:\"writeToModel\",value:function writeToModel(key,value){if(!value)return;this.object.model.setValue(key,value);}},{key:\"mouseEvent\",value:function mouseEvent(event,geometry){if(!event||!geometry||!this.object)return;switch(event.type){case MouseEventType.ROLL_OVER:this.eventDispatcher.dispatchEvent(new RoomObjectFurnitureActionEvent(RoomObjectFurnitureActionEvent.MOUSE_BUTTON,this.object));break;case MouseEventType.ROLL_OUT:this.eventDispatcher.dispatchEvent(new RoomObjectFurnitureActionEvent(RoomObjectFurnitureActionEvent.MOUSE_ARROW,this.object));break;}_get(_getPrototypeOf(FurniturePresentLogic.prototype),\"mouseEvent\",this).call(this,event,geometry);}},{key:\"useObject\",value:function useObject(){if(!this.object||!this.eventDispatcher)return;this.eventDispatcher.dispatchEvent(new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.PRESENT,this.object));}}]);return FurniturePresentLogic;}(FurnitureLogic);FurniturePresentLogic.MESSAGE='MESSAGE';FurniturePresentLogic.PRODUCT_CODE='PRODUCT_CODE';FurniturePresentLogic.EXTRA_PARAM='EXTRA_PARAM';FurniturePresentLogic.PURCHASER_NAME='PURCHASER_NAME';FurniturePresentLogic.PURCHASER_FIGURE='PURCHASER_FIGURE';","map":null,"metadata":{},"sourceType":"module"}