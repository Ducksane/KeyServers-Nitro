{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GroupBuyComposer,GroupBuyDataComposer,GroupBuyDataEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{HasHabboClub,LocalizeText,SendMessageComposer}from'../../../api';import{Base,Button,Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupTabBadgeView}from'./tabs/GroupTabBadgeView';import{GroupTabColorsView}from'./tabs/GroupTabColorsView';import{GroupTabCreatorConfirmationView}from'./tabs/GroupTabCreatorConfirmationView';import{GroupTabIdentityView}from'./tabs/GroupTabIdentityView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TABS=[1,2,3,4];export var GroupCreatorView=function GroupCreatorView(props){var _props$onClose=props.onClose,onClose=_props$onClose===void 0?null:_props$onClose;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentTab=_useState2[0],setCurrentTab=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),closeAction=_useState4[0],setCloseAction=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),groupData=_useState6[0],setGroupData=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),availableRooms=_useState8[0],setAvailableRooms=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),purchaseCost=_useState10[0],setPurchaseCost=_useState10[1];var close=function close(){setCloseAction(null);setGroupData(null);if(onClose)onClose();};var buyGroup=function buyGroup(){if(!groupData)return;var badge=[];groupData.groupBadgeParts.forEach(function(part){if(part.code){badge.push(part.key);badge.push(part.color);badge.push(part.position);}});SendMessageComposer(new GroupBuyComposer(groupData.groupName,groupData.groupDescription,groupData.groupHomeroomId,groupData.groupColors[0],groupData.groupColors[1],badge));};var previousStep=function previousStep(){if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===1){onClose();return;}setCurrentTab(function(value){return value-1;});};var nextStep=function nextStep(){if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===4){buyGroup();return;}setCurrentTab(function(value){return value===4?value:value+1;});};var onGroupBuyDataEvent=useCallback(function(event){var parser=event.getParser();var rooms=[];parser.availableRooms.forEach(function(name,id){return rooms.push({id:id,name:name});});setAvailableRooms(rooms);setPurchaseCost(parser.groupCost);},[]);UseMessageEventHook(GroupBuyDataEvent,onGroupBuyDataEvent);useEffect(function(){setCurrentTab(1);setGroupData({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:true,groupColors:null,groupBadgeParts:null});SendMessageComposer(new GroupBuyDataComposer());},[setGroupData]);if(!groupData)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-group-creator\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('group.create.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsx(Flex,{center:true,className:\"creator-tabs\",children:TABS.map(function(tab,index){return/*#__PURE__*/_jsx(Flex,{center:true,className:\"tab tab-\".concat(tab===1?'blue-flat':tab===4?'yellow':'blue-arrow',\" \").concat(currentTab===tab?'active':''),children:/*#__PURE__*/_jsx(Text,{variant:\"white\",children:LocalizeText(\"group.create.steplabel.\".concat(tab))})},index);})}),/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Base,{className:\"nitro-group-tab-image tab-\".concat(currentTab)}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{bold:true,fontSize:4,children:LocalizeText(\"group.create.stepcaption.\".concat(currentTab))}),/*#__PURE__*/_jsx(Text,{children:LocalizeText(\"group.create.stepdesc.\".concat(currentTab))})]})]}),/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/_jsx(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:null,isCreator:true,availableRooms:availableRooms}),currentTab===2&&/*#__PURE__*/_jsx(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===3&&/*#__PURE__*/_jsx(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===4&&/*#__PURE__*/_jsx(GroupTabCreatorConfirmationView,{groupData:groupData,setGroupData:setGroupData,purchaseCost:purchaseCost})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"link\",className:\"text-black\",onClick:previousStep,children:LocalizeText(currentTab===1?'generic.cancel':'group.create.previousstep')}),/*#__PURE__*/_jsx(Button,{disabled:currentTab===4&&!HasHabboClub(),variant:currentTab===4?HasHabboClub()?'success':'danger':'primary',onClick:nextStep,children:LocalizeText(currentTab===4?HasHabboClub()?'group.create.confirm.buy':'group.create.confirm.viprequired':'group.create.nextstep')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}