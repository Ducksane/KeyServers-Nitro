{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{CloseIssuesMessageComposer,ReleaseIssuesMessageComposer}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{Button,Column,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{ModToolsOpenUserInfoEvent}from'../../../../events';import{DispatchUiEvent}from'../../../../hooks';import{getSourceName}from'../../common/IssueCategoryNames';import{useModToolsContext}from'../../ModToolsContext';import{CfhChatlogView}from'./CfhChatlogView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ModToolsIssueInfoView=function ModToolsIssueInfoView(props){var _props$issueId=props.issueId,issueId=_props$issueId===void 0?null:_props$issueId,_props$onIssueInfoClo=props.onIssueInfoClosed,onIssueInfoClosed=_props$onIssueInfoClo===void 0?null:_props$onIssueInfoClo;var _useModToolsContext=useModToolsContext(),_useModToolsContext$m=_useModToolsContext.modToolsState,modToolsState=_useModToolsContext$m===void 0?null:_useModToolsContext$m;var _modToolsState$ticket=modToolsState.tickets,tickets=_modToolsState$ticket===void 0?null:_modToolsState$ticket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cfhChatlogOpen=_useState2[0],setcfhChatlogOpen=_useState2[1];var ticket=useMemo(function(){if(!tickets||!tickets.length)return null;return tickets.find(function(issue){return issue.issueId===issueId;});},[issueId,tickets]);var releaseIssue=function releaseIssue(issueId){SendMessageComposer(new ReleaseIssuesMessageComposer([issueId]));onIssueInfoClosed(issueId);};var closeIssue=function closeIssue(resolutionType){SendMessageComposer(new CloseIssuesMessageComposer([issueId],resolutionType));onIssueInfoClosed(issueId);};var openUserInfo=function openUserInfo(userId){return DispatchUiEvent(new ModToolsOpenUserInfoEvent(userId));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-handle-issue\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'Resolving issue '+issueId,onCloseClick:function onCloseClick(){return onIssueInfoClosed(issueId);}}),/*#__PURE__*/_jsxs(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",fontSize:4,children:\"Issue Information\"}),/*#__PURE__*/_jsxs(Grid,{overflow:\"auto\",children:[/*#__PURE__*/_jsx(Column,{size:8,children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{color:\"var(--test-galaxytext)\"},children:\"Source\"}),/*#__PURE__*/_jsx(\"td\",{style:{color:\"var(--test-galaxytext)\"},children:getSourceName(ticket.categoryId)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{color:\"var(--test-galaxytext)\"},children:\"Category\"}),/*#__PURE__*/_jsx(\"td\",{style:{color:\"var(--test-galaxytext)\"},className:\"text-break\",children:LocalizeText('help.cfh.topic.'+ticket.reportedCategoryId)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{color:\"var(--test-galaxytext)\"},children:\"Description\"}),/*#__PURE__*/_jsx(\"td\",{style:{color:\"var(--test-galaxytext)\"},className:\"text-break\",children:ticket.message})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{color:\"var(--test-galaxytext)\"},children:\"Caller\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",bold:true,underline:true,pointer:true,onClick:function onClick(event){return openUserInfo(ticket.reporterUserId);},children:ticket.reporterUserName})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{color:\"var(--test-galaxytext)\"},children:\"Reported User\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",bold:true,underline:true,pointer:true,onClick:function onClick(event){return openUserInfo(ticket.reportedUserId);},children:ticket.reportedUserName})})]})]})})}),/*#__PURE__*/_jsxs(Column,{size:4,gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return setcfhChatlogOpen(!cfhChatlogOpen);},children:\"Chatlog\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){return closeIssue(CloseIssuesMessageComposer.RESOLUTION_USELESS);},children:\"Close as useless\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(event){return closeIssue(CloseIssuesMessageComposer.RESOLUTION_ABUSIVE);},children:\"Close as abusive\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:function onClick(event){return closeIssue(CloseIssuesMessageComposer.RESOLUTION_RESOLVED);},children:\"Close as resolved\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(event){return releaseIssue(issueId);},children:\"Release\"})]})]})]})]}),cfhChatlogOpen&&/*#__PURE__*/_jsx(CfhChatlogView,{issueId:issueId,onCloseClick:function onCloseClick(){return setcfhChatlogOpen(false);}})]});};","map":null,"metadata":{},"sourceType":"module"}