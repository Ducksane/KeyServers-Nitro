{"ast":null,"code":"import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _get from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/get.js\";import _getPrototypeOf from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";import _inherits from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{RenderTexture}from'@pixi/core';import{Matrix}from'@pixi/math';import{NitroSprite}from'../../../../../core/utils/proxy/NitroSprite';import{Nitro}from'../../../../Nitro';import{FurnitureBBVisualization}from'./FurnitureBBVisualization';import{FurnitureBrandedImageVisualization}from'./FurnitureBrandedImageVisualization';export var FurnitureIsometricBBVisualization=/*#__PURE__*/function(_FurnitureBBVisualiza){_inherits(FurnitureIsometricBBVisualization,_FurnitureBBVisualiza);var _super=_createSuper(FurnitureIsometricBBVisualization);function FurnitureIsometricBBVisualization(){var _this;_classCallCheck(this,FurnitureIsometricBBVisualization);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this._needsTransform=true;return _this;}_createClass(FurnitureIsometricBBVisualization,[{key:\"transformGifTextures\",value:function transformGifTextures(asset){if(!this._gifCollection)return;var textures=this._gifCollection.textures;if(!textures.length)return;for(var i=0;i<textures.length;i++){var texture=textures[i];if(!texture)continue;var existingAsset=this.getAsset(\"\".concat(this._imageUrl,\"_\").concat(i));if(!existingAsset)continue;var scale=1.1;var matrix=new Matrix();var difference=asset.width/texture.width;switch(this.direction){case 2:matrix.a=difference;matrix.b=-0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0.5*difference*texture.width;break;case 0:case 4:matrix.a=difference;matrix.b=0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0;break;default:matrix.a=difference;matrix.b=0;matrix.c=0;matrix.d=difference;matrix.tx=0;matrix.ty=0;}var sprite=new NitroSprite(texture);var renderTexture=RenderTexture.create({width:asset.width+matrix.tx,height:asset.height+matrix.ty});Nitro.instance.renderer.render(sprite,{renderTexture:renderTexture,clear:true,transform:matrix});this.asset.disposeAsset(\"\".concat(this._imageUrl,\"_\").concat(i));this.asset.addAsset(\"\".concat(this._imageUrl,\"_\").concat(i),renderTexture,true,asset.x,asset.y,asset.flipH,asset.flipV);}this._needsTransform=false;}},{key:\"generateTransformedImage\",value:function generateTransformedImage(texture,asset){var scale=1.1;var matrix=new Matrix();var difference=asset.width/texture.width;switch(this.direction){case 2:matrix.a=difference;matrix.b=-0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0.5*difference*texture.width;break;case 0:case 4:matrix.a=difference;matrix.b=0.5*difference;matrix.c=0;matrix.d=difference*scale;matrix.tx=0;matrix.ty=0;break;default:matrix.a=difference;matrix.b=0;matrix.c=0;matrix.d=difference;matrix.tx=0;matrix.ty=0;}var sprite=new NitroSprite(texture);var renderTexture=RenderTexture.create({width:asset.width+matrix.tx,height:asset.height+matrix.ty});Nitro.instance.renderer.render(sprite,{renderTexture:renderTexture,clear:true,transform:matrix});this.asset.disposeAsset(\"\".concat(this._imageUrl,\"_0\"));this.asset.addAsset(\"\".concat(this._imageUrl,\"_0\"),renderTexture,true,sprite.x,sprite.y,asset.flipH,asset.flipV);this._needsTransform=false;}},{key:\"checkAndCreateImageForCurrentState\",value:function checkAndCreateImageForCurrentState(){_get(_getPrototypeOf(FurnitureIsometricBBVisualization.prototype),\"checkAndCreateImageForCurrentState\",this).call(this);this._needsTransform=true;}},{key:\"getSpriteAssetName\",value:function getSpriteAssetName(scale,layerId){var tag=this.getLayerTag(scale,this._direction,layerId);if(tag===FurnitureBrandedImageVisualization.BRANDED_IMAGE&&this._imageUrl){if(this._needsTransform){if(this._isAnimated){this.transformGifTextures(this.getAsset(_get(_getPrototypeOf(FurnitureIsometricBBVisualization.prototype),\"getSpriteAssetName\",this).call(this,scale,layerId)));}else{this.generateTransformedImage(Nitro.instance.core.asset.getTexture(this._imageUrl),this.getAsset(_get(_getPrototypeOf(FurnitureIsometricBBVisualization.prototype),\"getSpriteAssetName\",this).call(this,scale,layerId)));}}return\"\".concat(this._imageUrl,\"_\").concat(this.getFrameNumber(scale,layerId));}return _get(_getPrototypeOf(FurnitureIsometricBBVisualization.prototype),\"getSpriteAssetName\",this).call(this,scale,layerId);}}]);return FurnitureIsometricBBVisualization;}(FurnitureBBVisualization);","map":null,"metadata":{},"sourceType":"module"}