{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{EventDispatcher}from'../../../core/events/EventDispatcher';import{NitroEvent}from'../../../core/events/NitroEvent';import{ProductData}from'./ProductData';export var ProductDataLoader=/*#__PURE__*/function(_EventDispatcher){_inherits(ProductDataLoader,_EventDispatcher);var _super=_createSuper(ProductDataLoader);function ProductDataLoader(products){var _this;_classCallCheck(this,ProductDataLoader);_this=_super.call(this);_this._products=void 0;_this._products=products;return _this;}_createClass(ProductDataLoader,[{key:\"dispose\",value:function dispose(){this._products=null;}},{key:\"loadProductData\",value:function loadProductData(url){var _this2=this;if(!url)return;fetch(url).then(function(response){return response.json();}).then(function(data){return _this2.onProductDataLoadedEvent(data);}).catch(function(err){return _this2.onProductDataError(err);});}},{key:\"onProductDataLoadedEvent\",value:function onProductDataLoadedEvent(data){if(!data)return;this.parseProducts(data.productdata);this.dispatchEvent(new NitroEvent(ProductDataLoader.PDP_PRODUCT_DATA_READY));}},{key:\"onProductDataError\",value:function onProductDataError(error){if(!error)return;this.dispatchEvent(new NitroEvent(ProductDataLoader.PDP_PRODUCT_DATA_FAILED));}},{key:\"parseProducts\",value:function parseProducts(data){if(!data)return;var _iterator=_createForOfIteratorHelper(data.product),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var product=_step.value;product&&this._products.set(product.code,new ProductData(product.code,product.name,product.description));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return ProductDataLoader;}(EventDispatcher);ProductDataLoader.PDP_PRODUCT_DATA_READY='PDP_PRODUCT_DATA_READY';ProductDataLoader.PDP_PRODUCT_DATA_FAILED='PDP_PRODUCT_DATA_FAILED';","map":null,"metadata":{},"sourceType":"module"}