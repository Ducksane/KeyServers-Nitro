{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{RoomControllerLevel,RoomEngineDimmerStateEvent,RoomEngineTriggerWidgetEvent,RoomSessionDimmerPresetsEvent,RoomWidgetEnum}from'@nitrots/nitro-renderer';import{GetRoomEngine}from'../..';import{GetSessionDataManager}from'../../..';import{RoomWidgetUpdateDimmerEvent,RoomWidgetUpdateDimmerStateEvent}from'../events';import{RoomWidgetDimmerChangeStateMessage,RoomWidgetDimmerPreviewMessage,RoomWidgetDimmerSavePresetMessage,RoomWidgetFurniToWidgetMessage}from'../messages';import{RoomWidgetHandler}from'./RoomWidgetHandler';export var FurnitureDimmerWidgetHandler=/*#__PURE__*/function(_RoomWidgetHandler){_inherits(FurnitureDimmerWidgetHandler,_RoomWidgetHandler);var _super=_createSuper(FurnitureDimmerWidgetHandler);function FurnitureDimmerWidgetHandler(){_classCallCheck(this,FurnitureDimmerWidgetHandler);return _super.apply(this,arguments);}_createClass(FurnitureDimmerWidgetHandler,[{key:\"processEvent\",value:function processEvent(event){switch(event.type){case RoomSessionDimmerPresetsEvent.ROOM_DIMMER_PRESETS:{var presetsEvent=event;var updateEvent=new RoomWidgetUpdateDimmerEvent(RoomWidgetUpdateDimmerEvent.PRESETS);updateEvent.selectedPresetId=presetsEvent.selectedPresetId;var i=0;while(i<presetsEvent.presetCount){var preset=presetsEvent.getPreset(i);if(preset)updateEvent.setPresetValues(preset.id,preset.type,preset.color,preset.brightness);i++;}this.container.eventDispatcher.dispatchEvent(updateEvent);return;}case RoomEngineDimmerStateEvent.ROOM_COLOR:{var stateEvent=event;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateDimmerStateEvent(stateEvent.state,stateEvent.presetId,stateEvent.effectId,stateEvent.color,stateEvent.brightness));return;}case RoomEngineTriggerWidgetEvent.REMOVE_DIMMER:{this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateDimmerEvent(RoomWidgetUpdateDimmerEvent.HIDE));return;}}}},{key:\"processWidgetMessage\",value:function processWidgetMessage(message){switch(message.type){case RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER:{if(this.canOpenWidget())this.container.roomSession.requestMoodlightSettings();break;}case RoomWidgetDimmerSavePresetMessage.SAVE_PRESET:{if(this.canOpenWidget()){var savePresetMessage=message;this.container.roomSession.updateMoodlightData(savePresetMessage.presetNumber,savePresetMessage.effectTypeId,savePresetMessage.color,savePresetMessage.brightness,savePresetMessage.apply);}break;}case RoomWidgetDimmerChangeStateMessage.CHANGE_STATE:{if(this.canOpenWidget())this.container.roomSession.toggleMoodlightState();break;}case RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET:{var roomId=this.container.roomSession.roomId;var previewMessage=message;GetRoomEngine().updateObjectRoomColor(roomId,previewMessage.color,previewMessage.brightness,previewMessage.bgOnly);break;}}return null;}},{key:\"canOpenWidget\",value:function canOpenWidget(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=RoomControllerLevel.GUEST||GetSessionDataManager().isModerator;}},{key:\"type\",get:function get(){return RoomWidgetEnum.ROOM_DIMMER;}},{key:\"eventTypes\",get:function get(){return[RoomSessionDimmerPresetsEvent.ROOM_DIMMER_PRESETS,RoomEngineDimmerStateEvent.ROOM_COLOR,RoomEngineTriggerWidgetEvent.REMOVE_DIMMER];}},{key:\"messageTypes\",get:function get(){return[RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER,RoomWidgetDimmerSavePresetMessage.SAVE_PRESET,RoomWidgetDimmerChangeStateMessage.CHANGE_STATE,RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET];}}]);return FurnitureDimmerWidgetHandler;}(RoomWidgetHandler);","map":null,"metadata":{},"sourceType":"module"}