{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{RoomPlaneParser}from'../../../../../room/object/RoomPlaneParser';export var FloorHeightMapMessageParser=/*#__PURE__*/function(){function FloorHeightMapMessageParser(){_classCallCheck(this,FloorHeightMapMessageParser);this._model=void 0;this._width=void 0;this._height=void 0;this._heightMap=void 0;this._wallHeight=void 0;this._scale=void 0;}_createClass(FloorHeightMapMessageParser,[{key:\"flush\",value:function flush(){this._model=null;this._width=0;this._height=0;this._wallHeight=-1;this._heightMap=[];this._scale=64;this._model=null;return true;}},{key:\"parse\",value:function parse(wrapper){if(!wrapper)return false;var scale=wrapper.readBoolean();var wallHeight=wrapper.readInt();var model=wrapper.readString();return this.parseExplicitly(model,wallHeight,scale);}},{key:\"parseModel\",value:function parseModel(modelString,wallHeight){var scale=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;return this.parseExplicitly(modelString,wallHeight,scale);}},{key:\"parseExplicitly\",value:function parseExplicitly(modelString,wallHeight){var scale=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this._scale=scale?32:64;this._wallHeight=wallHeight;this._model=modelString;var model=this._model.split('\\r');var modelRows=model.length;var width=0;var height=0;var iterator=0;while(iterator<modelRows){var row=model[iterator];if(row.length>width){width=row.length;}iterator++;}this._heightMap=[];iterator=0;while(iterator<modelRows){var heightMap=[];var subIterator=0;while(subIterator<width){heightMap.push(RoomPlaneParser.TILE_BLOCKED);subIterator++;}this._heightMap.push(heightMap);iterator++;}this._width=width;this._height=modelRows;iterator=0;while(iterator<modelRows){var _heightMap=this._heightMap[iterator];var text=model[iterator];if(text.length>0){var _subIterator=0;while(_subIterator<text.length){var char=text.charAt(_subIterator);var _height=RoomPlaneParser.TILE_BLOCKED;if(char!=='x'&&char!=='X')_height=parseInt(char,36);_heightMap[_subIterator]=_height;_subIterator++;}}iterator++;}return true;}},{key:\"getHeight\",value:function getHeight(x,y){if(x<0||x>=this._width||y<0||y>=this._height)return-110;var row=this._heightMap[y];if(row===undefined)return-110;var height=row[x];if(height===undefined)return-110;return height;}},{key:\"model\",get:function get(){return this._model;}},{key:\"width\",get:function get(){return this._width;}},{key:\"height\",get:function get(){return this._height;}},{key:\"heightMap\",get:function get(){return this._heightMap;}},{key:\"wallHeight\",get:function get(){return this._wallHeight;}},{key:\"scale\",get:function get(){return this._scale;}}]);return FloorHeightMapMessageParser;}();","map":null,"metadata":{},"sourceType":"module"}