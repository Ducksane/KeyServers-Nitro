{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RoomEngineTriggerWidgetEvent,RoomObjectVariable}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetRoomEngine,RoomWidgetUpdateRoomObjectEvent}from'../../../../../api';import{LayoutTrophyView}from'../../../../../common';import{UseEventDispatcherHook,UseRoomEngineEvent}from'../../../../../hooks';import{useRoomContext}from'../../../RoomContext';import{FurnitureTrophyData}from'./FurnitureTrophyData';import{jsx as _jsx}from\"react/jsx-runtime\";export var FurnitureTrophyView=function FurnitureTrophyView(props){var _useRoomContext=useRoomContext(),_useRoomContext$event=_useRoomContext.eventDispatcher,eventDispatcher=_useRoomContext$event===void 0?null:_useRoomContext$event,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),trophyData=_useState2[0],setTrophyData=_useState2[1];var onNitroEvent=useCallback(function(event){switch(event.type){case RoomEngineTriggerWidgetEvent.REQUEST_TROPHY:{var widgetEvent=event;var roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;var data=roomObject.model.getValue(RoomObjectVariable.FURNITURE_DATA);var extra=roomObject.model.getValue(RoomObjectVariable.FURNITURE_EXTRAS);if(!extra)extra='0';var color=roomObject.model.getValue(RoomObjectVariable.FURNITURE_COLOR);var ownerName=data.substring(0,data.indexOf('\\t'));data=data.substring(ownerName.length+1,data.length);var trophyDate=data.substring(0,data.indexOf('\\t'));var trophyText=data.substr(trophyDate.length+1,data.length);setTrophyData(new FurnitureTrophyData(widgetEvent.objectId,widgetEvent.category,color,ownerName,trophyDate,trophyText));return;}case RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{var _widgetEvent=event;setTrophyData(function(prevState){if(!prevState||_widgetEvent.id!==prevState.objectId||_widgetEvent.category!==prevState.category)return prevState;return null;});return;}}},[]);UseRoomEngineEvent(RoomEngineTriggerWidgetEvent.REQUEST_TROPHY,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,widgetHandler.eventDispatcher,onNitroEvent);var processAction=useCallback(function(type){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':setTrophyData(null);return;}},[]);if(!trophyData)return null;return/*#__PURE__*/_jsx(LayoutTrophyView,{color:trophyData.color,message:trophyData.message,date:trophyData.date,senderName:trophyData.ownerName,onCloseClick:function onCloseClick(){return processAction('close');}});};","map":null,"metadata":{},"sourceType":"module"}