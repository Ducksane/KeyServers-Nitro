{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{MessageEvent}from'./MessageEvent';export var MessageClassManager=/*#__PURE__*/function(){function MessageClassManager(){_classCallCheck(this,MessageClassManager);this._messageIdByEvent=void 0;this._messageIdByComposer=void 0;this._messageInstancesById=void 0;this._messageIdByEvent=new Map();this._messageIdByComposer=new Map();this._messageInstancesById=new Map();}_createClass(MessageClassManager,[{key:\"dispose\",value:function dispose(){this._messageIdByEvent.clear();this._messageIdByComposer.clear();this._messageInstancesById.clear();}},{key:\"registerMessages\",value:function registerMessages(configuration){var _iterator=_createForOfIteratorHelper(configuration.events),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),header=_step$value[0],handler=_step$value[1];this.registerMessageEventClass(header,handler);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(configuration.composers),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),_header=_step2$value[0],_handler=_step2$value[1];this.registerMessageComposerClass(_header,_handler);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:\"registerMessageEventClass\",value:function registerMessageEventClass(header,handler){if(!header||!handler)return;this._messageIdByEvent.set(handler,header);}},{key:\"registerMessageComposerClass\",value:function registerMessageComposerClass(header,handler){if(!header||!handler)return;this._messageIdByComposer.set(handler,header);}},{key:\"registerMessageEvent\",value:function registerMessageEvent(event){if(!event)return;var header=this.getEventId(event);if(!header)return;var existing=this._messageInstancesById.get(header);if(!existing||!existing.length){existing=[];this._messageInstancesById.set(header,existing);}existing.push(event);}},{key:\"removeMessageEvent\",value:function removeMessageEvent(event){if(!event)return;var header=this.getEventId(event);if(!header)return;var existing=this._messageInstancesById.get(header);if(!existing)return;var _iterator3=_createForOfIteratorHelper(existing.entries()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),index=_step3$value[0],message=_step3$value[1];if(!message)continue;if(message!==event)continue;existing.splice(index,1);if(existing.length===0)this._messageInstancesById.delete(header);message.dispose();return;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:\"getEvents\",value:function getEvents(header){if(!header)return;var existing=this._messageInstancesById.get(header);if(!existing)return;return existing;}},{key:\"getEventId\",value:function getEventId(event){if(!event)return-1;//@ts-ignore\nvar name=event instanceof MessageEvent?event.constructor:event;var existing=this._messageIdByEvent.get(name);if(!existing)return-1;return existing;}},{key:\"getComposerId\",value:function getComposerId(composer){if(!composer)return-1;var existing=this._messageIdByComposer.get(composer.constructor);if(!existing)return-1;return existing;}}]);return MessageClassManager;}();","map":null,"metadata":{},"sourceType":"module"}