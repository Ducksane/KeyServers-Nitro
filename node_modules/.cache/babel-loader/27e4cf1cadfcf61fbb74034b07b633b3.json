{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{DesktopViewEvent,GetGuestRoomResultEvent,GroupInformationComposer,GroupInformationEvent,GroupRemoveMemberComposer,HabboGroupDeactivatedMessageEvent,RoomEntryInfoMessageEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetGroupInformation,GetGroupManager,GetSessionDataManager,LocalizeText,NotificationUtilities,SendMessageComposer,TryJoinGroup}from'../../../api';import{Base,Button,Column,Flex,LayoutBadgeImageView,Text}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupMembershipType}from'../common/GroupMembershipType';import{GroupType}from'../common/GroupType';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var GroupRoomInformationView=function GroupRoomInformationView(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),expectedGroupId=_useState2[0],setExpectedGroupId=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),groupInformation=_useState4[0],setGroupInformation=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var onDesktopViewEvent=useCallback(function(event){setExpectedGroupId(0);setGroupInformation(null);},[]);UseMessageEventHook(DesktopViewEvent,onDesktopViewEvent);var onRoomEntryInfoMessageEvent=useCallback(function(event){setExpectedGroupId(0);setGroupInformation(null);},[]);UseMessageEventHook(RoomEntryInfoMessageEvent,onRoomEntryInfoMessageEvent);var onGetGuestRoomResultEvent=useCallback(function(event){var parser=event.getParser();if(!parser.roomEnter)return;if(parser.data.habboGroupId>0){setExpectedGroupId(parser.data.habboGroupId);SendMessageComposer(new GroupInformationComposer(parser.data.habboGroupId,false));}else{setExpectedGroupId(0);setGroupInformation(null);}},[]);UseMessageEventHook(GetGuestRoomResultEvent,onGetGuestRoomResultEvent);var onHabboGroupDeactivatedMessageEvent=useCallback(function(event){var parser=event.getParser();if(!groupInformation||parser.groupId!==groupInformation.id&&parser.groupId!==expectedGroupId)return;setExpectedGroupId(0);setGroupInformation(null);},[expectedGroupId,groupInformation]);UseMessageEventHook(HabboGroupDeactivatedMessageEvent,onHabboGroupDeactivatedMessageEvent);var onGroupInformationEvent=useCallback(function(event){var parser=event.getParser();if(parser.id!==expectedGroupId)return;setGroupInformation(parser);},[expectedGroupId]);UseMessageEventHook(GroupInformationEvent,onGroupInformationEvent);var leaveGroup=function leaveGroup(){NotificationUtilities.confirm(LocalizeText('group.leaveconfirm.desc'),function(){SendMessageComposer(new GroupRemoveMemberComposer(groupInformation.id,GetSessionDataManager().userId));},null);};var isRealOwner=groupInformation&&groupInformation.ownerName===GetSessionDataManager().userName;var getButtonText=function getButtonText(){if(isRealOwner)return'group.manage';if(groupInformation.type===GroupType.PRIVATE)return'';if(groupInformation.membershipType===GroupMembershipType.MEMBER)return'group.leave';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType.REGULAR)return'group.join';if(groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return'group.membershippending';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType.EXCLUSIVE)return'group.requestmembership';};var handleButtonClick=function handleButtonClick(){if(isRealOwner)return GetGroupManager(groupInformation.id);if(groupInformation.type===GroupType.PRIVATE&&groupInformation.membershipType===GroupMembershipType.NOT_MEMBER)return;if(groupInformation.membershipType===GroupMembershipType.MEMBER){leaveGroup();return;}TryJoinGroup(groupInformation.id);};if(!groupInformation)return null;return/*#__PURE__*/_jsx(Base,{className:\"nitro-notification-bubble rounded\",children:/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"between\",pointer:true,onClick:function onClick(event){return setIsOpen(function(value){return!value;});},children:[/*#__PURE__*/_jsx(Text,{variant:\"none\",style:{color:\"var(--test-galaxytext)\"},children:LocalizeText('group.homeroominfo.title')}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isOpen?'chevron-up':'chevron-down'})]}),isOpen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{pointer:true,alignItems:\"center\",gap:2,onClick:function onClick(event){return GetGroupInformation(groupInformation.id);},children:[/*#__PURE__*/_jsx(Base,{className:\"group-badge\",children:/*#__PURE__*/_jsx(LayoutBadgeImageView,{badgeCode:groupInformation.badge,isGroup:true})}),/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},children:groupInformation.title})]}),(groupInformation.type!==GroupType.PRIVATE||isRealOwner)&&/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"success\",disabled:groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING,onClick:handleButtonClick,children:LocalizeText(getButtonText())})]})]})});};","map":null,"metadata":{},"sourceType":"module"}