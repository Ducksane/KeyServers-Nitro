{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{RoomSpriteCanvas}from'./RoomSpriteCanvas';export var RoomRenderer=/*#__PURE__*/function(){function RoomRenderer(){_classCallCheck(this,RoomRenderer);this._objects=void 0;this._canvases=void 0;this._disposed=void 0;this._roomObjectVariableAccurateZ=void 0;this._objects=new Map();this._canvases=new Map();this._disposed=false;this._roomObjectVariableAccurateZ=null;}_createClass(RoomRenderer,[{key:\"dispose\",value:function dispose(){if(this._disposed)return;if(this._canvases){var _iterator=_createForOfIteratorHelper(this._canvases.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],canvas=_step$value[1];this._canvases.delete(key);if(!canvas)continue;canvas.dispose();}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._canvases=null;}if(this._objects){this._objects=null;}this._disposed=true;}},{key:\"reset\",value:function reset(){this._objects.clear();}},{key:\"getInstanceId\",value:function getInstanceId(object){if(!object)return-1;return object.instanceId;}},{key:\"getRoomObject\",value:function getRoomObject(instanceId){return this._objects.get(instanceId);}},{key:\"addObject\",value:function addObject(object){if(!object)return;this._objects.set(this.getInstanceId(object),object);}},{key:\"removeObject\",value:function removeObject(object){var instanceId=this.getInstanceId(object);this._objects.delete(instanceId);var _iterator2=_createForOfIteratorHelper(this._canvases.values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var canvas=_step2.value;if(!canvas)continue;var spriteCanvas=canvas;spriteCanvas.removeFromCache(instanceId.toString());}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:\"render\",value:function render(time){var update=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this._canvases||!this._canvases.size)return;var _iterator3=_createForOfIteratorHelper(this._canvases.values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var canvas=_step3.value;canvas&&canvas.render(time,update);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:\"update\",value:function update(time){var _update=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this._canvases||!this._canvases.size)return;this.render(time,_update);var _iterator4=_createForOfIteratorHelper(this._canvases.values()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var canvas=_step4.value;canvas&&canvas.update();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}},{key:\"getCanvas\",value:function getCanvas(id){var existing=this._canvases.get(id);if(!existing)return;return existing;}},{key:\"createCanvas\",value:function createCanvas(id,width,height,scale){var existing=this._canvases.get(id);if(existing){existing.initialize(width,height);if(existing.geometry)existing.geometry.scale=scale;return existing;}var canvas=this.createSpriteCanvas(id,width,height,scale);if(!canvas)return;this._canvases.set(id,canvas);return canvas;}},{key:\"createSpriteCanvas\",value:function createSpriteCanvas(id,width,height,scale){return new RoomSpriteCanvas(this,id,width,height,scale);}},{key:\"removeCanvas\",value:function removeCanvas(id){var existing=this._canvases.get(id);if(!existing)return;this._canvases.delete(id);existing.dispose();}},{key:\"objects\",get:function get(){return this._objects;}},{key:\"disposed\",get:function get(){return this._disposed;}},{key:\"roomObjectVariableAccurateZ\",get:function get(){return this._roomObjectVariableAccurateZ;},set:function set(z){this._roomObjectVariableAccurateZ=z;}}]);return RoomRenderer;}();","map":null,"metadata":{},"sourceType":"module"}