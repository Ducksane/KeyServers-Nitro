{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{SecurityLevel}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetSessionDataManager,LocalizeText,RoomWidgetChooserContentEvent,RoomWidgetRequestWidgetMessage,RoomWidgetUpdateRoomObjectEvent}from'../../../../api';import{UseEventDispatcherHook}from'../../../../hooks';import{useRoomContext}from'../../RoomContext';import{ChooserWidgetView}from'./ChooserWidgetView';import{jsx as _jsx}from\"react/jsx-runtime\";export var FurniChooserWidgetView=function FurniChooserWidgetView(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),items=_useState4[0],setItems=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),refreshTimeout=_useState6[0],setRefreshTimeout=_useState6[1];var _useRoomContext=useRoomContext(),_useRoomContext$event=_useRoomContext.eventDispatcher,eventDispatcher=_useRoomContext$event===void 0?null:_useRoomContext$event,_useRoomContext$widge=_useRoomContext.widgetHandler,widgetHandler=_useRoomContext$widge===void 0?null:_useRoomContext$widge;var refreshChooser=useCallback(function(){if(!isVisible)return;setRefreshTimeout(function(prevValue){if(prevValue)clearTimeout(prevValue);return setTimeout(function(){return widgetHandler.processWidgetMessage(new RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage.FURNI_CHOOSER));},100);});},[isVisible,widgetHandler]);var onRoomWidgetChooserContentEvent=useCallback(function(event){setItems(event.items);setIsVisible(true);},[]);UseEventDispatcherHook(RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT,eventDispatcher,onRoomWidgetChooserContentEvent);var onRoomWidgetRoomObjectUpdateEvent=useCallback(function(event){if(!isVisible)return;switch(event.type){case RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED:case RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:refreshChooser();return;}},[isVisible,refreshChooser]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);var close=useCallback(function(){setIsVisible(false);setItems(null);},[]);if(!items)return null;return/*#__PURE__*/_jsx(ChooserWidgetView,{title:LocalizeText('widget.chooser.furni.title'),displayItemId:GetSessionDataManager().hasSecurity(SecurityLevel.MODERATOR),items:items,onCloseClick:close});};","map":null,"metadata":{},"sourceType":"module"}