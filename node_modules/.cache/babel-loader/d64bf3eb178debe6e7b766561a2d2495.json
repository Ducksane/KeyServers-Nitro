{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";export var CategoryData=/*#__PURE__*/function(){function CategoryData(name,partItems,colorItems){_classCallCheck(this,CategoryData);this._name=void 0;this._parts=void 0;this._palettes=void 0;this._selectedPartIndex=-1;this._paletteIndexes=void 0;this._name=name;this._parts=partItems;this._palettes=colorItems;this._selectedPartIndex=-1;}_createClass(CategoryData,[{key:\"init\",value:function init(){var _iterator=_createForOfIteratorHelper(this._parts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var part=_step.value;if(!part)continue;part.init();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:\"dispose\",value:function dispose(){if(this._parts){var _iterator2=_createForOfIteratorHelper(this._parts),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var part=_step2.value;part.dispose();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._parts=null;}if(this._palettes){var _iterator3=_createForOfIteratorHelper(this._palettes),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var palette=_step3.value;var _iterator4=_createForOfIteratorHelper(palette),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var colorItem=_step4.value;colorItem.dispose();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._palettes=null;}this._selectedPartIndex=-1;this._paletteIndexes=null;}},{key:\"selectPartId\",value:function selectPartId(partId){if(!this._parts)return;var i=0;while(i<this._parts.length){var partItem=this._parts[i];if(partItem.id===partId){this.selectPartIndex(i);return;}i++;}}},{key:\"selectColorIds\",value:function selectColorIds(colorIds){if(!colorIds||!this._palettes)return;this._paletteIndexes=new Array(colorIds.length);var i=0;while(i<this._palettes.length){var palette=this.getPalette(i);if(palette){var colorId=0;if(colorIds.length>i){colorId=colorIds[i];}else{var colorItem=palette[0];if(colorItem&&colorItem.partColor)colorId=colorItem.partColor.id;}var j=0;while(j<palette.length){var _colorItem=palette[j];if(_colorItem.partColor.id===colorId){this._paletteIndexes[i]=j;_colorItem.isSelected=true;}else{_colorItem.isSelected=false;}j++;}}i++;}this.updatePartColors();}},{key:\"selectPartIndex\",value:function selectPartIndex(partIndex){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){var partItem=this._parts[this._selectedPartIndex];if(partItem)partItem.isSelected=false;}if(this._parts.length>partIndex){var _partItem=this._parts[partIndex];if(_partItem){_partItem.isSelected=true;this._selectedPartIndex=partIndex;return _partItem;}}return null;}},{key:\"selectColorIndex\",value:function selectColorIndex(colorIndex,paletteId){var palette=this.getPalette(paletteId);if(!palette)return null;if(palette.length<=colorIndex)return null;this.deselectColorIndex(this._paletteIndexes[paletteId],paletteId);this._paletteIndexes[paletteId]=colorIndex;var colorItem=palette[colorIndex];if(!colorItem)return null;colorItem.isSelected=true;this.updatePartColors();return colorItem;}},{key:\"getCurrentColorIndex\",value:function getCurrentColorIndex(k){return this._paletteIndexes[k];}},{key:\"deselectColorIndex\",value:function deselectColorIndex(colorIndex,paletteIndex){var palette=this.getPalette(paletteIndex);if(!palette)return;if(palette.length<=colorIndex)return;var colorItem=palette[colorIndex];if(!colorItem)return;colorItem.isSelected=false;}},{key:\"getSelectedColorIds\",value:function getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;var palette=this._palettes[0];if(!palette||!palette.length)return null;var colorItem=palette[0];if(!colorItem||!colorItem.partColor)return null;var colorId=colorItem.partColor.id;var colorIds=[];var i=0;while(i<this._paletteIndexes.length){var paletteSet=this._palettes[i];if(!(!paletteSet||paletteSet.length<=i)){if(paletteSet.length>this._paletteIndexes[i]){var color=paletteSet[this._paletteIndexes[i]];if(color&&color.partColor){colorIds.push(color.partColor.id);}else{colorIds.push(colorId);}}else{colorIds.push(colorId);}}i++;}var partItem=this.getCurrentPart();if(!partItem)return null;return colorIds.slice(0,Math.max(partItem.maxColorIndex,1));}},{key:\"getSelectedColors\",value:function getSelectedColors(){var partColors=[];var i=0;while(i<this._paletteIndexes.length){var colorItem=this.getSelectedColor(i);if(colorItem){partColors.push(colorItem.partColor);}else{partColors.push(null);}i++;}return partColors;}},{key:\"getSelectedColor\",value:function getSelectedColor(paletteId){var palette=this.getPalette(paletteId);if(!palette||palette.length<=this._paletteIndexes[paletteId])return null;return palette[this._paletteIndexes[paletteId]];}},{key:\"getSelectedColorId\",value:function getSelectedColorId(paletteId){var colorItem=this.getSelectedColor(paletteId);if(colorItem&&colorItem.partColor)return colorItem.partColor.id;return 0;}},{key:\"getPalette\",value:function getPalette(paletteId){if(!this._paletteIndexes||!this._palettes||this._palettes.length<=paletteId){return null;}return this._palettes[paletteId];}},{key:\"getCurrentPart\",value:function getCurrentPart(){return this._parts[this._selectedPartIndex];}},{key:\"updatePartColors\",value:function updatePartColors(){var partColors=this.getSelectedColors();var _iterator5=_createForOfIteratorHelper(this._parts),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var partItem=_step5.value;if(partItem)partItem.partColors=partColors;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:\"hasClubSelectionsOverLevel\",value:function hasClubSelectionsOverLevel(level){var hasInvalidSelections=false;var partColors=this.getSelectedColors();if(partColors){var i=0;while(i<partColors.length){var partColor=partColors[i];if(partColor&&partColor.clubLevel>level)hasInvalidSelections=true;i++;}}var partItem=this.getCurrentPart();if(partItem&&partItem.partSet){var partSet=partItem.partSet;if(partSet&&partSet.clubLevel>level)hasInvalidSelections=true;}return hasInvalidSelections;}},{key:\"hasInvalidSelectedItems\",value:function hasInvalidSelectedItems(ownedItems){var part=this.getCurrentPart();if(!part)return false;var partSet=part.partSet;if(!partSet||!partSet.isSellable)return;return ownedItems.indexOf(partSet.id)>-1;}},{key:\"stripClubItemsOverLevel\",value:function stripClubItemsOverLevel(level){var partItem=this.getCurrentPart();if(partItem&&partItem.partSet){var partSet=partItem.partSet;if(partSet.clubLevel>level){var newPartItem=this.selectPartIndex(0);if(newPartItem&&!newPartItem.partSet)this.selectPartIndex(1);return true;}}return false;}},{key:\"stripClubColorsOverLevel\",value:function stripClubColorsOverLevel(level){var colorIds=[];var partColors=this.getSelectedColors();var colorItems=this.getPalette(0);var didStrip=false;var colorId=CategoryData.defaultColorId(colorItems,level);if(colorId===-1)return false;var i=0;while(i<partColors.length){var partColor=partColors[i];if(!partColor){colorIds.push(colorId);didStrip=true;}else{if(partColor.clubLevel>level){colorIds.push(colorId);didStrip=true;}else{colorIds.push(partColor.id);}}i++;}if(didStrip)this.selectColorIds(colorIds);return didStrip;}// public stripInvalidSellableItems(k:IHabboInventory): boolean\n// {\n//     var _local_3:IFigurePartSet;\n//     var _local_4:AvatarEditorGridPartItem;\n//     var _local_2:AvatarEditorGridPartItem = this._Str_6315();\n//     if (((_local_2) && (_local_2.partSet)))\n//     {\n//         _local_3 = _local_2.partSet;\n//         if (((_local_3.isSellable) && (!(k._Str_14439(_local_3.id)))))\n//         {\n//             _local_4 = this._Str_8066(0);\n//             if (((!(_local_4 == null)) && (_local_4.partSet == null)))\n//             {\n//                 this._Str_8066(1);\n//             }\n//             return true;\n//         }\n//     }\n//     return false;\n// }\n},{key:\"name\",get:function get(){return this._name;}},{key:\"parts\",get:function get(){return this._parts;}},{key:\"selectedPartIndex\",get:function get(){return this._selectedPartIndex;}}],[{key:\"defaultColorId\",value:function defaultColorId(palettes,clubLevel){if(!palettes||!palettes.length)return-1;var i=0;while(i<palettes.length){var colorItem=palettes[i];if(colorItem.partColor&&colorItem.partColor.clubLevel<=clubLevel){return colorItem.partColor.id;}i++;}return-1;}}]);return CategoryData;}();","map":null,"metadata":{},"sourceType":"module"}