{"ast":null,"code":"import _objectSpread from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _toConsumableArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"columnCount\",\"children\"];import{useEffect,useState}from'react';import{LocalizeText,Offer,ProductTypeEnum}from'../../../../../api';import{AutoGrid,Button,ButtonGroup}from'../../../../../common';import{useCatalog}from'../../../../../hooks';import{CatalogGridOfferView}from'../common/CatalogGridOfferView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SPACES_GROUP_NAMES=['floors','walls','views'];export var CatalogSpacesWidgetView=function CatalogSpacesWidgetView(props){var _props$columnCount=props.columnCount,columnCount=_props$columnCount===void 0?5:_props$columnCount,_props$children=props.children,children=_props$children===void 0?null:_props$children,rest=_objectWithoutProperties(props,_excluded);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),groupedOffers=_useState2[0],setGroupedOffers=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),selectedGroupIndex=_useState4[0],setSelectedGroupIndex=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedOfferForGroup=_useState6[0],setSelectedOfferForGroup=_useState6[1];var _useCatalog=useCatalog(),_useCatalog$currentPa=_useCatalog.currentPage,currentPage=_useCatalog$currentPa===void 0?null:_useCatalog$currentPa,_useCatalog$currentOf=_useCatalog.currentOffer,currentOffer=_useCatalog$currentOf===void 0?null:_useCatalog$currentOf,_useCatalog$setCurren=_useCatalog.setCurrentOffer,setCurrentOffer=_useCatalog$setCurren===void 0?null:_useCatalog$setCurren,_useCatalog$setPurcha=_useCatalog.setPurchaseOptions,setPurchaseOptions=_useCatalog$setPurcha===void 0?null:_useCatalog$setPurcha;var setSelectedOffer=function setSelectedOffer(offer){if(!offer)return;setSelectedOfferForGroup(function(prevValue){var newValue=_toConsumableArray(prevValue);newValue[selectedGroupIndex]=offer;return newValue;});};useEffect(function(){if(!currentPage)return;var groupedOffers=[[],[],[]];var _iterator=_createForOfIteratorHelper(currentPage.offers),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var offer=_step.value;if(offer.pricingModel!==Offer.PRICING_MODEL_SINGLE&&offer.pricingModel!==Offer.PRICING_MODEL_MULTI)continue;var product=offer.product;if(!product||product.productType!==ProductTypeEnum.WALL&&product.productType!==ProductTypeEnum.FLOOR||!product.furnitureData)continue;var className=product.furnitureData.className;switch(className){case'floor':groupedOffers[0].push(offer);break;case'wallpaper':groupedOffers[1].push(offer);break;case'landscape':groupedOffers[2].push(offer);break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}setGroupedOffers(groupedOffers);setSelectedGroupIndex(0);setSelectedOfferForGroup([groupedOffers[0][0],groupedOffers[1][0],groupedOffers[2][0]]);},[currentPage]);useEffect(function(){if(selectedGroupIndex===-1||!selectedOfferForGroup)return;setCurrentOffer(selectedOfferForGroup[selectedGroupIndex]);},[selectedGroupIndex,selectedOfferForGroup,setCurrentOffer]);useEffect(function(){if(selectedGroupIndex===-1||!selectedOfferForGroup||!currentOffer)return;setPurchaseOptions(function(prevValue){var newValue=_objectSpread({},prevValue);newValue.extraData=selectedOfferForGroup[selectedGroupIndex].product.extraParam;newValue.extraParamRequired=true;return newValue;});},[currentOffer,selectedGroupIndex,selectedOfferForGroup,setPurchaseOptions]);if(!groupedOffers||selectedGroupIndex===-1)return null;var offers=groupedOffers[selectedGroupIndex];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ButtonGroup,{children:SPACES_GROUP_NAMES.map(function(name,index){return/*#__PURE__*/_jsx(Button,{active:selectedGroupIndex===index,onClick:function onClick(event){return setSelectedGroupIndex(index);},children:LocalizeText(\"catalog.spaces.tab.\".concat(name))},index);})}),/*#__PURE__*/_jsxs(AutoGrid,_objectSpread(_objectSpread({columnCount:columnCount},rest),{},{children:[offers&&offers.length>0&&offers.map(function(offer,index){return/*#__PURE__*/_jsx(CatalogGridOfferView,{itemActive:currentOffer&&currentOffer===offer,offer:offer,selectOffer:function selectOffer(offer){return setSelectedOffer(offer);}},index);}),children]}))]});};","map":null,"metadata":{},"sourceType":"module"}