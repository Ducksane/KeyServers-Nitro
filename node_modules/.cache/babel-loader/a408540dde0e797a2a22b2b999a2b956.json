{"ast":null,"code":"import _classCallCheck from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{RoomObjectType}from'../../../../../room/object/RoomObjectType';import{UserMessageData}from'./UserMessageData';export var RoomUnitParser=/*#__PURE__*/function(){function RoomUnitParser(){_classCallCheck(this,RoomUnitParser);this._users=void 0;}_createClass(RoomUnitParser,[{key:\"flush\",value:function flush(){this._users=[];return true;}},{key:\"parse\",value:function parse(wrapper){if(!wrapper)return false;this._users=[];var totalUsers=wrapper.readInt();var i=0;while(i<totalUsers){var id=wrapper.readInt();var username=wrapper.readString();var custom=wrapper.readString();var figure=wrapper.readString();var roomIndex=wrapper.readInt();var x=wrapper.readInt();var y=wrapper.readInt();var z=parseFloat(wrapper.readString());var direction=wrapper.readInt();var type=wrapper.readInt();var user=new UserMessageData(roomIndex);user.dir=direction;user.name=username;user.custom=custom;user.x=x;user.y=y;user.z=z;this._users.push(user);if(type===1){user.webID=id;user.userType=RoomObjectType.USER;user.sex=this.resolveSex(wrapper.readString());user.groupID=wrapper.readInt();user.groupStatus=wrapper.readInt();user.groupName=wrapper.readString();var swimFigure=wrapper.readString();if(swimFigure!=='')figure=this.convertSwimFigure(swimFigure,figure,user.sex);user.figure=figure;user.activityPoints=wrapper.readInt();user.isModerator=wrapper.readBoolean();}else if(type===2){user.userType=RoomObjectType.PET;user.figure=figure;user.webID=id;user.subType=wrapper.readInt().toString();user.ownerId=wrapper.readInt();user.ownerName=wrapper.readString();user.rarityLevel=wrapper.readInt();user.hasSaddle=wrapper.readBoolean();user.isRiding=wrapper.readBoolean();user.canBreed=wrapper.readBoolean();user.canHarvest=wrapper.readBoolean();user.canRevive=wrapper.readBoolean();user.hasBreedingPermission=wrapper.readBoolean();user.petLevel=wrapper.readInt();user.petPosture=wrapper.readString();}else if(type===3){user.userType=RoomObjectType.BOT;user.webID=roomIndex*-1;if(figure.indexOf('/')===-1)user.figure=figure;else user.figure='hr-100-.hd-180-1.ch-876-66.lg-270-94.sh-300-64';user.sex=UserMessageData.M;}else if(type===4){user.userType=RoomObjectType.RENTABLE_BOT;user.webID=id;user.sex=this.resolveSex(wrapper.readString());user.figure=figure;user.ownerId=wrapper.readInt();user.ownerName=wrapper.readString();var totalSkills=wrapper.readInt();if(totalSkills){var skills=[];var j=0;while(j<totalSkills){skills.push(wrapper.readShort());j++;}user.botSkills=skills;}}i++;}return true;}},{key:\"resolveSex\",value:function resolveSex(sex){if(sex.substr(0,1).toLowerCase()==='f')return UserMessageData.F;return UserMessageData.M;}},{key:\"convertSwimFigure\",value:function convertSwimFigure(k,_arg_2,_arg_3){var _local_4=_arg_2.split('.');var _local_5=1;var _local_6=1;var _local_7=1;var _local_8=10000;var i=0;while(i<_local_4.length){var _local_13=_local_4[i];var _local_14=_local_13.split('-');if(_local_14.length>2){var _local_15=_local_14[0];if(_local_15==='hd')_local_5=parseInt(_local_14[2]);}i++;}var _local_10=['238,238,238','250,56,49','253,146,160','42,199,210','53,51,44','239,255,146','198,255,152','255,146,90','157,89,126','182,243,255','109,255,51','51,120,201','255,182,49','223,161,233','249,251,50','202,175,143','197,198,197','71,98,61','138,131,97','255,140,51','84,198,39','30,108,153','152,79,136','119,200,255','255,192,142','60,75,135','124,44,71','215,255,227','143,63,28','255,99,147','31,155,121','253,255,51'];var _local_11=k.split('=');if(_local_11.length>1){var _local_16=_local_11[1].split('/');var _local_17=_local_16[0];var _local_18=_local_16[1];if(_arg_3==='F')_local_7=10010;else _local_7=10011;var _local_19=_local_10.indexOf(_local_18);_local_6=_local_8+_local_19+1;}return _arg_2+('.bds-10001-'+_local_5+'.ss-'+_local_7+'-'+_local_6);}},{key:\"users\",get:function get(){return this._users;}}]);return RoomUnitParser;}();","map":null,"metadata":{},"sourceType":"module"}