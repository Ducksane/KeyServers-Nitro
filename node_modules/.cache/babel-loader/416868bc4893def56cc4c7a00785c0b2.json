{"ast":null,"code":"import _slicedToArray from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{RelationshipStatusInfoEvent,RoomEngineObjectEvent,RoomObjectCategory,RoomObjectType,UserCurrentBadgesComposer,UserCurrentBadgesEvent,UserProfileEvent,UserRelationshipsComposer}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{CreateLinkEvent,GetRoomSession,GetSessionDataManager,GetUserProfile,LocalizeText,SendMessageComposer}from'../../api';import{Column,Flex,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../common';import{UseMessageEventHook,UseRoomEngineEvent}from'../../hooks';import{BadgesContainerView}from'./views/BadgesContainerView';import{FriendsContainerView}from'./views/FriendsContainerView';import{GroupsContainerView}from'./views/GroupsContainerView';import{UserContainerView}from'./views/UserContainerView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserProfileView=function UserProfileView(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userProfile=_useState2[0],setUserProfile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userBadges=_useState4[0],setUserBadges=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userRelationships=_useState6[0],setUserRelationships=_useState6[1];var onClose=function onClose(){setUserProfile(null);setUserBadges([]);setUserRelationships(null);};var onLeaveGroup=useCallback(function(){if(!userProfile||userProfile.id!==GetSessionDataManager().userId)return;GetUserProfile(userProfile.id);},[userProfile]);var onUserCurrentBadgesEvent=useCallback(function(event){var parser=event.getParser();if(!userProfile||parser.userId!==userProfile.id)return;setUserBadges(parser.badges);},[userProfile]);UseMessageEventHook(UserCurrentBadgesEvent,onUserCurrentBadgesEvent);var onUserRelationshipsEvent=useCallback(function(event){var parser=event.getParser();if(!userProfile||parser.userId!==userProfile.id)return;setUserRelationships(parser);},[userProfile]);UseMessageEventHook(RelationshipStatusInfoEvent,onUserRelationshipsEvent);var onUserProfileEvent=useCallback(function(event){var parser=event.getParser();var isSameProfile=false;setUserProfile(function(prevValue){if(prevValue&&prevValue.id)isSameProfile=prevValue.id===parser.id;return parser;});if(!isSameProfile){setUserBadges([]);setUserRelationships(null);}SendMessageComposer(new UserCurrentBadgesComposer(parser.id));SendMessageComposer(new UserRelationshipsComposer(parser.id));},[]);UseMessageEventHook(UserProfileEvent,onUserProfileEvent);var onRoomEngineObjectEvent=useCallback(function(event){if(!userProfile)return;if(event.category!==RoomObjectCategory.UNIT)return;var userData=GetRoomSession().userDataManager.getUserDataByIndex(event.objectId);if(userData.type!==RoomObjectType.USER)return;GetUserProfile(userData.webID);},[userProfile]);UseRoomEngineEvent(RoomEngineObjectEvent.SELECTED,onRoomEngineObjectEvent);if(!userProfile)return null;return/*#__PURE__*/_jsxs(NitroCardView,{uniqueKey:\"nitro-user-profile\",theme:\"primary-slim\",className:\"user-profile\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('extendedprofile.caption'),onCloseClick:onClose}),/*#__PURE__*/_jsxs(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Grid,{fullHeight:false,gap:2,children:[/*#__PURE__*/_jsxs(Column,{size:7,gap:1,className:\"user-container pe-2\",children:[/*#__PURE__*/_jsx(UserContainerView,{userProfile:userProfile}),/*#__PURE__*/_jsx(Grid,{columnCount:5,fullHeight:true,className:\"bg-muted rounded px-2 py-1\",children:/*#__PURE__*/_jsx(BadgesContainerView,{fullWidth:true,center:true,badges:userBadges})})]}),/*#__PURE__*/_jsx(Column,{size:5,children:userRelationships&&/*#__PURE__*/_jsx(FriendsContainerView,{relationships:userRelationships,friendsCount:userProfile.friendsCount})})]}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",className:\"rooms-button-container px-2 py-1\",children:/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,onClick:function onClick(event){return CreateLinkEvent(\"navigator/search/hotel_view/owner:\".concat(userProfile.username));},children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-rooms\"}),/*#__PURE__*/_jsx(Text,{style:{color:\"var(--test-galaxytext)\"},variant:\"none\",bold:true,underline:true,pointer:true,children:LocalizeText('extendedprofile.rooms')})]})}),/*#__PURE__*/_jsx(GroupsContainerView,{fullWidth:true,itsMe:userProfile.id===GetSessionDataManager().userId,groups:userProfile.groups,onLeaveGroup:onLeaveGroup})]})]});};","map":null,"metadata":{},"sourceType":"module"}