{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{SpriteUtilities}from'../../../../../room/utils/SpriteUtilities';import{ColorData}from'./ColorData';import{DirectionData}from'./DirectionData';import{LayerData}from'./LayerData';export var SizeData=/*#__PURE__*/function(){function SizeData(layerCount,angle){_classCallCheck(this,SizeData);this._layerCount=void 0;this._angle=void 0;this._defaultDirection=void 0;this._directions=void 0;this._colors=void 0;this._lastDirectionData=void 0;this._lastDirection=void 0;this._layerCount=layerCount<0?0:layerCount>SizeData.MAX_LAYERS?SizeData.MAX_LAYERS:layerCount;this._angle=angle<1?1:angle>360?360:angle;this._defaultDirection=new DirectionData(this._layerCount);this._directions=new Map();this._colors=[];this._lastDirectionData=null;this._lastDirection=-1;}_createClass(SizeData,[{key:\"dispose\",value:function dispose(){if(this._defaultDirection)this._defaultDirection.dispose();var _iterator=_createForOfIteratorHelper(this._directions.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var direction=_step.value;if(!direction)continue;direction.dispose();}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(this._colors),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var color=_step2.value;if(!color)continue;color.dispose();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.reset();}},{key:\"reset\",value:function reset(){this._defaultDirection=null;this._colors=[];this._lastDirectionData=null;this._lastDirection=-1;this._directions.clear();}},{key:\"processLayers\",value:function processLayers(layers){if(!layers)return false;return this.setDirectionLayers(this._defaultDirection,layers);}},{key:\"processDirections\",value:function processDirections(directions){if(!directions)return false;for(var key in directions){var direction=directions[key];if(!direction)continue;var directionNumber=parseInt(key);if(this._directions.get(directionNumber))return false;var directionData=new DirectionData(this._layerCount);directionData.setFromDirection(this._defaultDirection);this.setDirectionLayers(directionData,direction.layers);this._directions.set(directionNumber,directionData);this._lastDirectionData=null;this._lastDirection=-1;}return true;}},{key:\"processColors\",value:function processColors(colors){if(!colors)return false;for(var key in colors){var color=colors[key];if(!color)continue;var colorNumber=parseInt(key);if(this._colors[colorNumber])return false;var colorData=new ColorData(this._layerCount);for(var layer in color.layers){var colorLayer=color.layers[layer];if(!colorLayer)continue;var layerId=parseInt(layer);var colorId=colorLayer.color;colorData.setColorLayer(layerId,colorId);}this._colors[colorNumber]=colorData;}return true;}},{key:\"setDirectionLayers\",value:function setDirectionLayers(directionData,layers){if(!directionData||!layers)return false;for(var key in layers){var layer=layers[key];if(!layer)continue;var layerId=parseInt(key);if(layerId<0||layerId>=this._layerCount)return false;if(layer.ink!==undefined)directionData.setLayerInk(layerId,SpriteUtilities.inkToBlendMode(layer.ink));if(layer.tag!==undefined)directionData.setLayerTag(layerId,layer.tag);if(layer.alpha!==undefined)directionData.setLayerAlpha(layerId,layer.alpha);if(layer.ignoreMouse!==undefined)directionData.setLayerIgnoreMouse(layerId,layer.ignoreMouse);if(layer.x!==undefined)directionData.setLayerXOffset(layerId,layer.x);if(layer.y!==undefined)directionData.setLayerYOffset(layerId,layer.y);if(layer.z!==undefined)directionData.setLayerZOffset(layerId,layer.z/-1000);}return true;}},{key:\"getValidDirection\",value:function getValidDirection(direction){var existing=this._directions.get(direction);if(existing)return direction;direction=(direction%360+360)%360;var currentAngle=-1;var validDirection=-1;var _iterator3=_createForOfIteratorHelper(this._directions.keys()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;var angle=(key*this._angle-direction+360)%360;if(angle>180)angle=360-angle;if(angle<currentAngle||currentAngle<0){currentAngle=angle;validDirection=key;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}if(validDirection>=0)return Math.trunc(validDirection);return 0;}},{key:\"getDirectionData\",value:function getDirectionData(direction){if(direction===this._lastDirection&&this._lastDirectionData)return this._lastDirectionData;var directionData=this._directions.get(direction);if(!directionData)directionData=this._defaultDirection;this._lastDirection=direction;this._lastDirectionData=directionData;return this._lastDirectionData;}},{key:\"getLayerTag\",value:function getLayerTag(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_TAG;return directionData.getLayerTag(layerId);}},{key:\"getLayerInk\",value:function getLayerInk(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_INK;return directionData.getLayerInk(layerId);}},{key:\"getLayerAlpha\",value:function getLayerAlpha(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_ALPHA;return directionData.getLayerAlpha(layerId);}},{key:\"getLayerColor\",value:function getLayerColor(layerId,colorId){var existing=this._colors[colorId];if(!existing)return ColorData.DEFAULT_COLOR;return existing.getLayerColor(layerId);}},{key:\"getLayerIgnoreMouse\",value:function getLayerIgnoreMouse(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_IGNORE_MOUSE;return directionData.getLayerIgnoreMouse(layerId);}},{key:\"getLayerXOffset\",value:function getLayerXOffset(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_XOFFSET;return directionData.getLayerXOffset(layerId);}},{key:\"getLayerYOffset\",value:function getLayerYOffset(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_YOFFSET;return directionData.getLayerYOffset(layerId);}},{key:\"getLayerZOffset\",value:function getLayerZOffset(direction,layerId){var directionData=this.getDirectionData(direction);if(!directionData)return LayerData.DEFAULT_ZOFFSET;return directionData.getLayerZOffset(layerId);}},{key:\"layerCount\",get:function get(){return this._layerCount;}}]);return SizeData;}();SizeData.MAX_LAYERS=26;","map":null,"metadata":{},"sourceType":"module"}