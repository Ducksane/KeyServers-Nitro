{"ast":null,"code":"import _classCallCheck from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/muphy/Documents/habboom/Nitro-Edit-main/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{RoomObjectCategory,RoomObjectVariable,RoomWidgetEnum}from'@nitrots/nitro-renderer';import{GetRoomEngine,GetSessionDataManager}from'../../../..';import{LocalizeText}from'../../../../utils';import{RoomObjectItem,RoomWidgetChooserContentEvent}from'../events';import{RoomWidgetRequestWidgetMessage,RoomWidgetRoomObjectMessage}from'../messages';import{RoomWidgetHandler}from'./RoomWidgetHandler';export var FurniChooserWidgetHandler=/*#__PURE__*/function(_RoomWidgetHandler){_inherits(FurniChooserWidgetHandler,_RoomWidgetHandler);var _super=_createSuper(FurniChooserWidgetHandler);function FurniChooserWidgetHandler(){_classCallCheck(this,FurniChooserWidgetHandler);return _super.apply(this,arguments);}_createClass(FurniChooserWidgetHandler,[{key:\"processEvent\",value:function processEvent(event){}},{key:\"processWidgetMessage\",value:function processWidgetMessage(message){if(!message)return null;switch(message.type){case RoomWidgetRequestWidgetMessage.FURNI_CHOOSER:this.processChooser();break;case RoomWidgetRoomObjectMessage.SELECT_OBJECT:this.selectRoomObject(message);break;}return null;}},{key:\"processChooser\",value:function processChooser(){var roomId=this.container.roomSession.roomId;var items=[];var wallItems=GetRoomEngine().getRoomObjects(roomId,RoomObjectCategory.WALL);var floorItems=GetRoomEngine().getRoomObjects(roomId,RoomObjectCategory.FLOOR);wallItems.forEach(function(roomObject){var name=roomObject.type;if(name.startsWith('poster')){name=LocalizeText(\"poster_\".concat(name.replace('poster',''),\"_name\"));}else{var typeId=roomObject.model.getValue(RoomObjectVariable.FURNITURE_TYPE_ID);var furniData=GetSessionDataManager().getWallItemData(typeId);if(furniData&&furniData.name.length)name=furniData.name;}items.push(new RoomObjectItem(roomObject.id,RoomObjectCategory.WALL,name));});floorItems.forEach(function(roomObject){var name=roomObject.type;var typeId=roomObject.model.getValue(RoomObjectVariable.FURNITURE_TYPE_ID);var furniData=GetSessionDataManager().getFloorItemData(typeId);if(furniData&&furniData.name.length)name=furniData.name;items.push(new RoomObjectItem(roomObject.id,RoomObjectCategory.FLOOR,name));});items.sort(function(a,b){return a.name<b.name?-1:1;});this.container.eventDispatcher.dispatchEvent(new RoomWidgetChooserContentEvent(RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT,items));}},{key:\"selectRoomObject\",value:function selectRoomObject(message){if(message.category!==RoomObjectCategory.WALL&&message.category!==RoomObjectCategory.FLOOR)return;GetRoomEngine().selectRoomObject(this.container.roomSession.roomId,message.id,message.category);}},{key:\"type\",get:function get(){return RoomWidgetEnum.FURNI_CHOOSER;}},{key:\"eventTypes\",get:function get(){return[];}},{key:\"messageTypes\",get:function get(){return[RoomWidgetRequestWidgetMessage.FURNI_CHOOSER,RoomWidgetRoomObjectMessage.SELECT_OBJECT];}}]);return FurniChooserWidgetHandler;}(RoomWidgetHandler);","map":null,"metadata":{},"sourceType":"module"}