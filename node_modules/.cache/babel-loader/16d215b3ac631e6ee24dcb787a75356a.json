{"ast":null,"code":"import _slicedToArray from\"C:/Users/Administrator/Desktop/nitro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{CheckUserNameMessageComposer,CheckUserNameResultMessageEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{UseMessageEventHook}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AVAILABLE=0;var TOO_SHORT=2;var TOO_LONG=3;var NOT_VALID=4;var TAKEN_WITH_SUGGESTIONS=5;var DISABLED=6;export var NameChangeInputView=function NameChangeInputView(props){var _props$onAction=props.onAction,onAction=_props$onAction===void 0?null:_props$onAction;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newUsername=_useState2[0],setNewUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),canProceed=_useState4[0],setCanProceed=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isChecking=_useState6[0],setIsChecking=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorCode=_useState8[0],setErrorCode=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),suggestions=_useState10[0],setSuggestions=_useState10[1];var onCheckUserNameResultMessageEvent=useCallback(function(event){setIsChecking(false);var parser=event.getParser();if(!parser)return;switch(parser.resultCode){case AVAILABLE:setCanProceed(true);break;case TOO_SHORT:setErrorCode('short');break;case TOO_LONG:setErrorCode('long');break;case NOT_VALID:setErrorCode('invalid');break;case TAKEN_WITH_SUGGESTIONS:setSuggestions(parser.nameSuggestions);setErrorCode('taken');break;case DISABLED:setErrorCode('change_not_allowed');}},[]);UseMessageEventHook(CheckUserNameResultMessageEvent,onCheckUserNameResultMessageEvent);var check=useCallback(function(){if(newUsername==='')return;setCanProceed(false);setSuggestions([]);setErrorCode(null);setIsChecking(true);SendMessageComposer(new CheckUserNameMessageComposer(newUsername));},[newUsername]);var handleUsernameChange=useCallback(function(username){setCanProceed(false);setSuggestions([]);setErrorCode(null);setNewUsername(username);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column gap-3 h-100\",children:[/*#__PURE__*/_jsx(\"div\",{children:LocalizeText('tutorial.name_change.info.select')}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:newUsername,onChange:function onChange(e){return handleUsernameChange(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",disabled:newUsername===''||isChecking,onClick:check,children:LocalizeText('tutorial.name_change.check')})]}),!errorCode&&!canProceed&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:LocalizeText('help.tutorial.name.info')}),errorCode&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-danger rounded p-2 text-center text-white\",children:LocalizeText(\"help.tutorial.name.\".concat(errorCode),['name'],[newUsername])}),canProceed&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-success rounded p-2 text-center text-white\",children:LocalizeText('help.tutorial.name.available',['name'],[newUsername])}),suggestions&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column gap-2\",children:suggestions.map(function(suggestion,i){return/*#__PURE__*/_jsx(\"div\",{className:\"col bg-muted rounded p-1 cursor-pointer\",onClick:function onClick(){return handleUsernameChange(suggestion);},children:suggestion},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success w-100\",disabled:!canProceed,onClick:function onClick(){return onAction('confirmation',newUsername);},children:LocalizeText('tutorial.name_change.pick')}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100\",onClick:function onClick(){return onAction('close');},children:LocalizeText('cancel')})]})]});};","map":null,"metadata":{},"sourceType":"module"}