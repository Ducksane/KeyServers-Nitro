{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{RoomEngineTriggerWidgetEvent}from'@nitrots/nitro-renderer';export var RoomWidgetHandlerManager=/*#__PURE__*/function(){function RoomWidgetHandlerManager(roomSession,eventDispatcher){_classCallCheck(this,RoomWidgetHandlerManager);this._roomSession=void 0;this._eventDispatcher=void 0;this._handlers=[];this._eventMap=new Map();this._messageMap=new Map();this._roomSession=roomSession;this._eventDispatcher=eventDispatcher;}_createClass(RoomWidgetHandlerManager,[{key:\"registerHandler\",value:function registerHandler(handler){var eventTypes=handler.eventTypes;eventTypes.push(RoomEngineTriggerWidgetEvent.OPEN_WIDGET,RoomEngineTriggerWidgetEvent.CLOSE_WIDGET);if(eventTypes&&eventTypes.length){var _iterator=_createForOfIteratorHelper(eventTypes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value;if(!name)continue;var events=this._eventMap.get(name);if(!events){events=[];this._eventMap.set(name,events);}events.push(handler);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var messageTypes=handler.messageTypes;if(messageTypes&&messageTypes.length){var _iterator2=_createForOfIteratorHelper(messageTypes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _name=_step2.value;if(!_name)continue;var messages=this._messageMap.get(_name);if(!messages){messages=[];this._messageMap.set(_name,messages);}messages.push(handler);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}handler.container=this;this._handlers.push(handler);}},{key:\"processEvent\",value:function processEvent(event){var handlers=this._eventMap.get(event.type);if(!handlers||!handlers.length)return null;var _iterator3=_createForOfIteratorHelper(handlers),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var handler=_step3.value;if(!handler)continue;var dispatch=true;if(event.type===RoomEngineTriggerWidgetEvent.OPEN_WIDGET||event.type===RoomEngineTriggerWidgetEvent.CLOSE_WIDGET){if(event instanceof RoomEngineTriggerWidgetEvent){dispatch=handler.type===event.widget;}}if(dispatch)handler.processEvent(event);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}},{key:\"processWidgetMessage\",value:function processWidgetMessage(message){var handlers=this._messageMap.get(message.type);if(!handlers||!handlers.length)return null;var _iterator4=_createForOfIteratorHelper(handlers),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var handler=_step4.value;if(!handler)continue;var update=handler.processWidgetMessage(message);if(!update)continue;return update;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return null;}},{key:\"roomSession\",get:function get(){return this._roomSession;}},{key:\"eventDispatcher\",get:function get(){return this._eventDispatcher;}}]);return RoomWidgetHandlerManager;}();","map":null,"metadata":{},"sourceType":"module"}