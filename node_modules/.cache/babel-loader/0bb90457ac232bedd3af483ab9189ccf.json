{"ast":null,"code":"import _slicedToArray from\"C:/Users/Luis/Downloads/Habboom/Nitro-Edit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useMemo,useState}from'react';import{AddEventLinkTracker,GetAchievementCategoryImageUrl,LocalizeText,RemoveLinkEventTracker}from'../../api';import{Base,Column,LayoutImage,LayoutProgressBar,NitroCardContentView,NitroCardHeaderView,NitroCardSubHeaderView,NitroCardView,Text}from'../../common';import{useAchievements}from'../../hooks';import{AchievementCategoryView}from'./views/AchievementCategoryView';import{AchievementsCategoryListView}from'./views/category-list/AchievementsCategoryListView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var AchievementsView=function AchievementsView(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var _useAchievements=useAchievements(),_useAchievements$achi=_useAchievements.achievementCategories,achievementCategories=_useAchievements$achi===void 0?[]:_useAchievements$achi,_useAchievements$sele=_useAchievements.selectedCategoryCode,selectedCategoryCode=_useAchievements$sele===void 0?null:_useAchievements$sele,_useAchievements$setS=_useAchievements.setSelectedCategoryCode,setSelectedCategoryCode=_useAchievements$setS===void 0?null:_useAchievements$setS,_useAchievements$sele2=_useAchievements.selectedAchievementId,selectedAchievementId=_useAchievements$sele2===void 0?-1:_useAchievements$sele2,_useAchievements$setS2=_useAchievements.setSelectedAchievementId,setSelectedAchievementId=_useAchievements$setS2===void 0?null:_useAchievements$setS2,_useAchievements$achi2=_useAchievements.achievementScore,achievementScore=_useAchievements$achi2===void 0?0:_useAchievements$achi2,_useAchievements$getP=_useAchievements.getProgress,getProgress=_useAchievements$getP===void 0?0:_useAchievements$getP,_useAchievements$getM=_useAchievements.getMaxProgress,getMaxProgress=_useAchievements$getM===void 0?0:_useAchievements$getM,_useAchievements$setA=_useAchievements.setAchievementSeen,setAchievementSeen=_useAchievements$setA===void 0?null:_useAchievements$setA;var selectedCategory=useMemo(function(){if(selectedCategoryCode===null)return null;return achievementCategories.find(function(category){return category.code===selectedCategoryCode;});},[achievementCategories,selectedCategoryCode]);useEffect(function(){var linkTracker={linkReceived:function linkReceived(url){var parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(function(prevValue){return!prevValue;});return;}},eventUrlPrefix:'achievements/'};AddEventLinkTracker(linkTracker);return function(){return RemoveLinkEventTracker(linkTracker);};},[]);if(!isVisible)return null;return/*#__PURE__*/_jsxs(NitroCardView,{uniqueKey:\"achievements\",className:\"nitro-achievements\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('inventory.achievements'),onCloseClick:function onCloseClick(event){return setIsVisible(false);}}),selectedCategory&&/*#__PURE__*/_jsxs(NitroCardSubHeaderView,{position:\"relative\",className:\"justify-content-center align-items-center cursor-pointer\",gap:3,children:[/*#__PURE__*/_jsx(Base,{onClick:function onClick(event){return setSelectedCategoryCode(null);},className:\"nitro-achievements-back-arrow\"}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{fontSize:4,fontWeight:\"bold\",className:\"text-small\",children:LocalizeText(\"quests.\".concat(selectedCategory.code,\".name\"))}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('achievements.details.categoryprogress',['progress','limit'],[selectedCategory.getProgress().toString(),selectedCategory.getMaxProgress().toString()])})]}),/*#__PURE__*/_jsx(LayoutImage,{imageUrl:GetAchievementCategoryImageUrl(selectedCategory,null,true)})]}),/*#__PURE__*/_jsxs(NitroCardContentView,{gap:1,children:[!selectedCategory&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AchievementsCategoryListView,{categories:achievementCategories,selectedCategoryCode:selectedCategoryCode,setSelectedCategoryCode:setSelectedCategoryCode}),/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"end\",gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,center:true,children:LocalizeText('achievements.categories.score',['score'],[achievementScore.toString()])}),/*#__PURE__*/_jsx(LayoutProgressBar,{text:LocalizeText('achievements.categories.totalprogress',['progress','limit'],[getProgress.toString(),getMaxProgress.toString()]),progress:getProgress,maxProgress:getMaxProgress})]})]}),selectedCategory&&/*#__PURE__*/_jsx(AchievementCategoryView,{category:selectedCategory,selectedAchievementId:selectedAchievementId,setSelectedAchievementId:setSelectedAchievementId,setAchievementSeen:setAchievementSeen})]})]});};","map":null,"metadata":{},"sourceType":"module"}