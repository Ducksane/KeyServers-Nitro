(this["webpackJsonpnitro-react"]=this["webpackJsonpnitro-react"]||[]).push([[1],{25:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i(1),s=i(2),r=function(){function t(e){Object(n.a)(this,t),this._type=void 0,this._type=e}return Object(s.a)(t,[{key:"type",get:function(){return this._type}}]),t}()},4:function(t,e,i){"use strict";var n=i(82);i.d(e,"a",(function(){return n.a})),i.d(e,"b",(function(){return n.b})),i.d(e,"c",(function(){return n.c})),i.d(e,"d",(function(){return n.d})),i.d(e,"e",(function(){return n.e})),i.d(e,"f",(function(){return n.f})),i.d(e,"g",(function(){return n.g})),i.d(e,"h",(function(){return n.i})),i.d(e,"i",(function(){return n.j})),i.d(e,"j",(function(){return n.k})),i.d(e,"k",(function(){return n.l})),i.d(e,"l",(function(){return n.m})),i.d(e,"m",(function(){return n.n})),i.d(e,"n",(function(){return n.o})),i.d(e,"o",(function(){return n.p})),i.d(e,"p",(function(){return n.q})),i.d(e,"q",(function(){return n.r})),i.d(e,"r",(function(){return n.s})),i.d(e,"s",(function(){return n.t})),i.d(e,"t",(function(){return n.u})),i.d(e,"u",(function(){return n.v})),i.d(e,"v",(function(){return n.w})),i.d(e,"w",(function(){return n.x})),i.d(e,"x",(function(){return n.y})),i.d(e,"y",(function(){return n.z})),i.d(e,"z",(function(){return n.A})),i.d(e,"A",(function(){return n.B})),i.d(e,"B",(function(){return n.C})),i.d(e,"C",(function(){return n.D})),i.d(e,"D",(function(){return n.E})),i.d(e,"E",(function(){return n.F})),i.d(e,"F",(function(){return n.G})),i.d(e,"G",(function(){return n.H})),i.d(e,"H",(function(){return n.I})),i.d(e,"I",(function(){return n.J})),i.d(e,"J",(function(){return n.K})),i.d(e,"K",(function(){return n.L})),i.d(e,"L",(function(){return n.M})),i.d(e,"M",(function(){return n.N})),i.d(e,"N",(function(){return n.O})),i.d(e,"O",(function(){return n.P})),i.d(e,"P",(function(){return n.Q})),i.d(e,"Q",(function(){return n.R})),i.d(e,"R",(function(){return n.S})),i.d(e,"S",(function(){return n.T})),i.d(e,"T",(function(){return n.U})),i.d(e,"U",(function(){return n.V})),i.d(e,"V",(function(){return n.W})),i.d(e,"W",(function(){return n.X})),i.d(e,"X",(function(){return n.Y})),i.d(e,"Y",(function(){return n.Z})),i.d(e,"Z",(function(){return n.ab})),i.d(e,"ab",(function(){return n.bb})),i.d(e,"bb",(function(){return n.cb})),i.d(e,"cb",(function(){return n.db})),i.d(e,"db",(function(){return n.eb})),i.d(e,"eb",(function(){return n.fb})),i.d(e,"fb",(function(){return n.gb})),i.d(e,"gb",(function(){return n.hb})),i.d(e,"hb",(function(){return n.ib})),i.d(e,"ib",(function(){return n.jb})),i.d(e,"jb",(function(){return n.kb})),i.d(e,"kb",(function(){return n.lb})),i.d(e,"lb",(function(){return n.mb})),i.d(e,"mb",(function(){return n.nb})),i.d(e,"nb",(function(){return n.ob})),i.d(e,"ob",(function(){return n.pb})),i.d(e,"pb",(function(){return n.qb})),i.d(e,"qb",(function(){return n.rb})),i.d(e,"rb",(function(){return n.sb})),i.d(e,"sb",(function(){return n.tb})),i.d(e,"tb",(function(){return n.ub})),i.d(e,"ub",(function(){return n.vb})),i.d(e,"vb",(function(){return n.wb})),i.d(e,"wb",(function(){return n.xb})),i.d(e,"xb",(function(){return n.yb})),i.d(e,"yb",(function(){return n.zb})),i.d(e,"zb",(function(){return n.Ab})),i.d(e,"Ab",(function(){return n.Bb})),i.d(e,"Bb",(function(){return n.Cb})),i.d(e,"Cb",(function(){return n.Db})),i.d(e,"Db",(function(){return n.Eb})),i.d(e,"Eb",(function(){return n.Fb})),i.d(e,"Fb",(function(){return n.Gb})),i.d(e,"Gb",(function(){return n.Hb})),i.d(e,"Hb",(function(){return n.Ib})),i.d(e,"Ib",(function(){return n.Jb})),i.d(e,"Jb",(function(){return n.Kb})),i.d(e,"Kb",(function(){return n.Lb})),i.d(e,"Lb",(function(){return n.Mb})),i.d(e,"Mb",(function(){return n.Nb})),i.d(e,"Nb",(function(){return n.Ob})),i.d(e,"Ob",(function(){return n.Pb})),i.d(e,"Pb",(function(){return n.Qb})),i.d(e,"Qb",(function(){return n.Rb})),i.d(e,"Rb",(function(){return n.Sb})),i.d(e,"Sb",(function(){return n.Tb})),i.d(e,"Tb",(function(){return n.Ub})),i.d(e,"Ub",(function(){return n.Vb})),i.d(e,"Vb",(function(){return n.Wb})),i.d(e,"Wb",(function(){return n.Xb})),i.d(e,"Xb",(function(){return n.Yb})),i.d(e,"Yb",(function(){return n.Zb})),i.d(e,"Zb",(function(){return n.ac})),i.d(e,"ac",(function(){return n.bc})),i.d(e,"bc",(function(){return n.cc})),i.d(e,"cc",(function(){return n.dc})),i.d(e,"dc",(function(){return n.ec})),i.d(e,"ec",(function(){return n.fc})),i.d(e,"fc",(function(){return n.gc})),i.d(e,"gc",(function(){return n.hc})),i.d(e,"hc",(function(){return n.ic})),i.d(e,"ic",(function(){return n.jc})),i.d(e,"jc",(function(){return n.kc})),i.d(e,"kc",(function(){return n.lc})),i.d(e,"lc",(function(){return n.mc})),i.d(e,"mc",(function(){return n.nc})),i.d(e,"nc",(function(){return n.oc})),i.d(e,"oc",(function(){return n.pc})),i.d(e,"pc",(function(){return n.qc})),i.d(e,"qc",(function(){return n.rc})),i.d(e,"rc",(function(){return n.sc})),i.d(e,"sc",(function(){return n.tc})),i.d(e,"tc",(function(){return n.uc})),i.d(e,"uc",(function(){return n.vc})),i.d(e,"vc",(function(){return n.wc})),i.d(e,"wc",(function(){return n.xc})),i.d(e,"xc",(function(){return n.yc})),i.d(e,"yc",(function(){return n.zc})),i.d(e,"zc",(function(){return n.Ac})),i.d(e,"Ac",(function(){return n.Bc})),i.d(e,"Bc",(function(){return n.Cc})),i.d(e,"Cc",(function(){return n.Dc})),i.d(e,"Dc",(function(){return n.Ec})),i.d(e,"Ec",(function(){return n.Fc})),i.d(e,"Fc",(function(){return n.Gc})),i.d(e,"Gc",(function(){return n.Hc})),i.d(e,"Hc",(function(){return n.Ic})),i.d(e,"Ic",(function(){return n.Jc})),i.d(e,"Jc",(function(){return n.Kc})),i.d(e,"Kc",(function(){return n.Lc})),i.d(e,"Lc",(function(){return n.Mc})),i.d(e,"Mc",(function(){return n.Nc})),i.d(e,"Nc",(function(){return n.Oc})),i.d(e,"Oc",(function(){return n.Pc})),i.d(e,"Pc",(function(){return n.Qc})),i.d(e,"Qc",(function(){return n.Rc})),i.d(e,"Rc",(function(){return n.Sc})),i.d(e,"Sc",(function(){return n.Tc})),i.d(e,"Tc",(function(){return n.Uc})),i.d(e,"Uc",(function(){return n.Vc})),i.d(e,"Vc",(function(){return n.Wc})),i.d(e,"Wc",(function(){return n.Xc})),i.d(e,"Xc",(function(){return n.Yc})),i.d(e,"Yc",(function(){return n.Zc})),i.d(e,"Zc",(function(){return n.ad})),i.d(e,"ad",(function(){return n.bd})),i.d(e,"bd",(function(){return n.cd})),i.d(e,"cd",(function(){return n.dd})),i.d(e,"dd",(function(){return n.ed})),i.d(e,"ed",(function(){return n.fd})),i.d(e,"fd",(function(){return n.gd})),i.d(e,"gd",(function(){return n.hd})),i.d(e,"hd",(function(){return n.id})),i.d(e,"id",(function(){return n.jd})),i.d(e,"jd",(function(){return n.kd})),i.d(e,"kd",(function(){return n.ld})),i.d(e,"ld",(function(){return n.md})),i.d(e,"md",(function(){return n.nd})),i.d(e,"nd",(function(){return n.od})),i.d(e,"od",(function(){return n.pd})),i.d(e,"pd",(function(){return n.qd})),i.d(e,"qd",(function(){return n.rd})),i.d(e,"rd",(function(){return n.sd})),i.d(e,"sd",(function(){return n.td})),i.d(e,"td",(function(){return n.ud})),i.d(e,"ud",(function(){return n.vd})),i.d(e,"vd",(function(){return n.wd})),i.d(e,"wd",(function(){return n.xd})),i.d(e,"xd",(function(){return n.yd})),i.d(e,"yd",(function(){return n.zd})),i.d(e,"zd",(function(){return n.Ad})),i.d(e,"Ad",(function(){return n.Bd})),i.d(e,"Bd",(function(){return n.Cd})),i.d(e,"Cd",(function(){return n.Dd})),i.d(e,"Dd",(function(){return n.Ed})),i.d(e,"Ed",(function(){return n.Fd})),i.d(e,"Fd",(function(){return n.Gd})),i.d(e,"Gd",(function(){return n.Hd})),i.d(e,"Hd",(function(){return n.Id})),i.d(e,"Id",(function(){return n.Jd})),i.d(e,"Jd",(function(){return n.Kd})),i.d(e,"Kd",(function(){return n.Ld})),i.d(e,"Ld",(function(){return n.Md})),i.d(e,"Md",(function(){return n.Nd})),i.d(e,"Nd",(function(){return n.Od})),i.d(e,"Od",(function(){return n.Pd})),i.d(e,"Pd",(function(){return n.Qd})),i.d(e,"Qd",(function(){return n.Rd})),i.d(e,"Rd",(function(){return n.Sd})),i.d(e,"Sd",(function(){return n.Td})),i.d(e,"Td",(function(){return n.Ud})),i.d(e,"Ud",(function(){return n.Vd})),i.d(e,"Vd",(function(){return n.Wd})),i.d(e,"Wd",(function(){return n.Xd})),i.d(e,"Xd",(function(){return n.Yd})),i.d(e,"Yd",(function(){return n.Zd})),i.d(e,"Zd",(function(){return n.ae})),i.d(e,"ae",(function(){return n.be})),i.d(e,"be",(function(){return n.ce})),i.d(e,"ce",(function(){return n.de})),i.d(e,"de",(function(){return n.ee})),i.d(e,"ee",(function(){return n.fe})),i.d(e,"fe",(function(){return n.ge})),i.d(e,"ge",(function(){return n.he})),i.d(e,"he",(function(){return n.ie})),i.d(e,"ie",(function(){return n.je})),i.d(e,"je",(function(){return n.ke})),i.d(e,"ke",(function(){return n.le})),i.d(e,"le",(function(){return n.me})),i.d(e,"me",(function(){return n.ne})),i.d(e,"ne",(function(){return n.oe})),i.d(e,"oe",(function(){return n.pe})),i.d(e,"pe",(function(){return n.qe})),i.d(e,"qe",(function(){return n.re})),i.d(e,"re",(function(){return n.se})),i.d(e,"se",(function(){return n.te})),i.d(e,"te",(function(){return n.ue})),i.d(e,"ue",(function(){return n.ve})),i.d(e,"ve",(function(){return n.we})),i.d(e,"we",(function(){return n.xe})),i.d(e,"xe",(function(){return n.ye})),i.d(e,"ye",(function(){return n.ze})),i.d(e,"ze",(function(){return n.Ae})),i.d(e,"Ae",(function(){return n.Be})),i.d(e,"Be",(function(){return n.Ce})),i.d(e,"Ce",(function(){return n.De})),i.d(e,"De",(function(){return n.Ee})),i.d(e,"Ee",(function(){return n.Fe})),i.d(e,"Fe",(function(){return n.Ge})),i.d(e,"Ge",(function(){return n.He})),i.d(e,"He",(function(){return n.Ie})),i.d(e,"Ie",(function(){return n.Je})),i.d(e,"Je",(function(){return n.Ke})),i.d(e,"Ke",(function(){return n.Le})),i.d(e,"Le",(function(){return n.Me})),i.d(e,"Me",(function(){return n.Ne})),i.d(e,"Ne",(function(){return n.Oe})),i.d(e,"Oe",(function(){return n.Pe})),i.d(e,"Pe",(function(){return n.Qe})),i.d(e,"Qe",(function(){return n.Re})),i.d(e,"Re",(function(){return n.Se})),i.d(e,"Se",(function(){return n.Te})),i.d(e,"Te",(function(){return n.Ue})),i.d(e,"Ue",(function(){return n.Ve})),i.d(e,"Ve",(function(){return n.We})),i.d(e,"We",(function(){return n.Xe})),i.d(e,"Xe",(function(){return n.Ye})),i.d(e,"Ye",(function(){return n.Ze})),i.d(e,"Ze",(function(){return n.af})),i.d(e,"af",(function(){return n.bf})),i.d(e,"bf",(function(){return n.cf})),i.d(e,"cf",(function(){return n.df})),i.d(e,"df",(function(){return n.ef})),i.d(e,"ef",(function(){return n.ff})),i.d(e,"ff",(function(){return n.gf})),i.d(e,"gf",(function(){return n.hf})),i.d(e,"hf",(function(){return n.if})),i.d(e,"if",(function(){return n.jf})),i.d(e,"jf",(function(){return n.kf})),i.d(e,"kf",(function(){return n.lf})),i.d(e,"lf",(function(){return n.mf})),i.d(e,"mf",(function(){return n.nf})),i.d(e,"nf",(function(){return n.of})),i.d(e,"of",(function(){return n.pf})),i.d(e,"pf",(function(){return n.qf})),i.d(e,"qf",(function(){return n.rf})),i.d(e,"rf",(function(){return n.sf})),i.d(e,"sf",(function(){return n.tf})),i.d(e,"tf",(function(){return n.uf})),i.d(e,"uf",(function(){return n.vf})),i.d(e,"vf",(function(){return n.wf})),i.d(e,"wf",(function(){return n.xf})),i.d(e,"xf",(function(){return n.yf})),i.d(e,"yf",(function(){return n.zf})),i.d(e,"zf",(function(){return n.Af})),i.d(e,"Af",(function(){return n.Bf})),i.d(e,"Bf",(function(){return n.Cf})),i.d(e,"Cf",(function(){return n.Df})),i.d(e,"Df",(function(){return n.Ef})),i.d(e,"Ef",(function(){return n.Ff})),i.d(e,"Ff",(function(){return n.Gf})),i.d(e,"Gf",(function(){return n.Hf})),i.d(e,"Hf",(function(){return n.If})),i.d(e,"If",(function(){return n.Jf})),i.d(e,"Jf",(function(){return n.Kf})),i.d(e,"Kf",(function(){return n.Lf})),i.d(e,"Lf",(function(){return n.Mf})),i.d(e,"Mf",(function(){return n.Nf})),i.d(e,"Nf",(function(){return n.Of})),i.d(e,"Of",(function(){return n.Pf})),i.d(e,"Pf",(function(){return n.Qf})),i.d(e,"Qf",(function(){return n.Rf})),i.d(e,"Rf",(function(){return n.Sf})),i.d(e,"Sf",(function(){return n.Tf})),i.d(e,"Tf",(function(){return n.Uf})),i.d(e,"Uf",(function(){return n.Vf})),i.d(e,"Vf",(function(){return n.Wf})),i.d(e,"Wf",(function(){return n.Xf})),i.d(e,"Xf",(function(){return n.Yf})),i.d(e,"Yf",(function(){return n.Zf})),i.d(e,"Zf",(function(){return n.ag})),i.d(e,"ag",(function(){return n.bg})),i.d(e,"bg",(function(){return n.cg})),i.d(e,"cg",(function(){return n.dg})),i.d(e,"dg",(function(){return n.eg})),i.d(e,"eg",(function(){return n.fg})),i.d(e,"fg",(function(){return n.gg})),i.d(e,"gg",(function(){return n.hg})),i.d(e,"hg",(function(){return n.ig})),i.d(e,"ig",(function(){return n.jg})),i.d(e,"jg",(function(){return n.kg})),i.d(e,"kg",(function(){return n.lg})),i.d(e,"lg",(function(){return n.mg})),i.d(e,"mg",(function(){return n.og})),i.d(e,"ng",(function(){return n.pg})),i.d(e,"og",(function(){return n.qg})),i.d(e,"pg",(function(){return n.rg})),i.d(e,"qg",(function(){return n.sg})),i.d(e,"rg",(function(){return n.tg})),i.d(e,"sg",(function(){return n.ug})),i.d(e,"tg",(function(){return n.vg})),i.d(e,"ug",(function(){return n.wg})),i.d(e,"vg",(function(){return n.xg})),i.d(e,"wg",(function(){return n.yg})),i.d(e,"xg",(function(){return n.zg})),i.d(e,"yg",(function(){return n.Ag})),i.d(e,"zg",(function(){return n.Bg})),i.d(e,"Ag",(function(){return n.Cg})),i.d(e,"Bg",(function(){return n.Dg})),i.d(e,"Cg",(function(){return n.Eg})),i.d(e,"Dg",(function(){return n.Fg})),i.d(e,"Eg",(function(){return n.Gg})),i.d(e,"Fg",(function(){return n.Hg})),i.d(e,"Gg",(function(){return n.Ig})),i.d(e,"Hg",(function(){return n.Jg})),i.d(e,"Ig",(function(){return n.Kg})),i.d(e,"Jg",(function(){return n.Lg})),i.d(e,"Kg",(function(){return n.Mg})),i.d(e,"Lg",(function(){return n.Ng})),i.d(e,"Mg",(function(){return n.Og})),i.d(e,"Ng",(function(){return n.Pg})),i.d(e,"Og",(function(){return n.Qg})),i.d(e,"Pg",(function(){return n.Rg})),i.d(e,"Qg",(function(){return n.Sg})),i.d(e,"Rg",(function(){return n.Tg})),i.d(e,"Sg",(function(){return n.Ug})),i.d(e,"Tg",(function(){return n.Vg})),i.d(e,"Ug",(function(){return n.Wg})),i.d(e,"Vg",(function(){return n.Xg})),i.d(e,"Wg",(function(){return n.Yg})),i.d(e,"Xg",(function(){return n.Zg})),i.d(e,"Yg",(function(){return n.ah})),i.d(e,"Zg",(function(){return n.bh})),i.d(e,"ah",(function(){return n.ch})),i.d(e,"bh",(function(){return n.dh})),i.d(e,"ch",(function(){return n.eh})),i.d(e,"dh",(function(){return n.fh})),i.d(e,"eh",(function(){return n.gh})),i.d(e,"fh",(function(){return n.hh})),i.d(e,"gh",(function(){return n.ih})),i.d(e,"hh",(function(){return n.jh})),i.d(e,"ih",(function(){return n.kh})),i.d(e,"jh",(function(){return n.lh})),i.d(e,"kh",(function(){return n.mh})),i.d(e,"lh",(function(){return n.nh})),i.d(e,"mh",(function(){return n.oh})),i.d(e,"nh",(function(){return n.ph})),i.d(e,"oh",(function(){return n.qh})),i.d(e,"ph",(function(){return n.rh})),i.d(e,"qh",(function(){return n.sh})),i.d(e,"rh",(function(){return n.th})),i.d(e,"sh",(function(){return n.uh})),i.d(e,"th",(function(){return n.vh})),i.d(e,"uh",(function(){return n.wh})),i.d(e,"vh",(function(){return n.xh})),i.d(e,"wh",(function(){return n.yh})),i.d(e,"xh",(function(){return n.zh})),i.d(e,"yh",(function(){return n.Ah})),i.d(e,"zh",(function(){return n.Bh})),i.d(e,"Ah",(function(){return n.Ch})),i.d(e,"Bh",(function(){return n.Dh})),i.d(e,"Ch",(function(){return n.Eh})),i.d(e,"Dh",(function(){return n.Fh})),i.d(e,"Eh",(function(){return n.Gh})),i.d(e,"Fh",(function(){return n.Hh})),i.d(e,"Gh",(function(){return n.Ih})),i.d(e,"Hh",(function(){return n.Jh})),i.d(e,"Ih",(function(){return n.Kh})),i.d(e,"Jh",(function(){return n.Lh})),i.d(e,"Kh",(function(){return n.Mh})),i.d(e,"Lh",(function(){return n.Nh})),i.d(e,"Mh",(function(){return n.Oh})),i.d(e,"Nh",(function(){return n.Ph})),i.d(e,"Oh",(function(){return n.Qh})),i.d(e,"Ph",(function(){return n.Rh})),i.d(e,"Qh",(function(){return n.Sh})),i.d(e,"Rh",(function(){return n.Th})),i.d(e,"Sh",(function(){return n.Uh})),i.d(e,"Th",(function(){return n.Vh})),i.d(e,"Uh",(function(){return n.Wh})),i.d(e,"Vh",(function(){return n.Xh})),i.d(e,"Wh",(function(){return n.Yh})),i.d(e,"Xh",(function(){return n.Zh})),i.d(e,"Yh",(function(){return n.ai})),i.d(e,"Zh",(function(){return n.bi})),i.d(e,"ai",(function(){return n.ci})),i.d(e,"bi",(function(){return n.di})),i.d(e,"ci",(function(){return n.ei})),i.d(e,"di",(function(){return n.fi})),i.d(e,"ei",(function(){return n.gi})),i.d(e,"fi",(function(){return n.hi})),i.d(e,"gi",(function(){return n.ii})),i.d(e,"hi",(function(){return n.ji})),i.d(e,"ii",(function(){return n.ki})),i.d(e,"ji",(function(){return n.li})),i.d(e,"ki",(function(){return n.mi})),i.d(e,"li",(function(){return n.ni})),i.d(e,"mi",(function(){return n.oi})),i.d(e,"ni",(function(){return n.pi})),i.d(e,"oi",(function(){return n.qi})),i.d(e,"pi",(function(){return n.ri})),i.d(e,"qi",(function(){return n.si})),i.d(e,"ri",(function(){return n.ti})),i.d(e,"si",(function(){return n.ui})),i.d(e,"ti",(function(){return n.vi})),i.d(e,"ui",(function(){return n.wi})),i.d(e,"vi",(function(){return n.xi})),i.d(e,"wi",(function(){return n.yi})),i.d(e,"xi",(function(){return n.zi})),i.d(e,"yi",(function(){return n.Ai})),i.d(e,"zi",(function(){return n.Bi})),i.d(e,"Ai",(function(){return n.Ci})),i.d(e,"Bi",(function(){return n.Di})),i.d(e,"Ci",(function(){return n.Ei})),i.d(e,"Di",(function(){return n.Fi})),i.d(e,"Ei",(function(){return n.Gi})),i.d(e,"Fi",(function(){return n.Hi})),i.d(e,"Gi",(function(){return n.Ii})),i.d(e,"Hi",(function(){return n.Ji})),i.d(e,"Ii",(function(){return n.Ki})),i.d(e,"Ji",(function(){return n.Li})),i.d(e,"Ki",(function(){return n.Mi})),i.d(e,"Li",(function(){return n.Ni})),i.d(e,"Mi",(function(){return n.Oi})),i.d(e,"Ni",(function(){return n.Pi})),i.d(e,"Oi",(function(){return n.Qi})),i.d(e,"Pi",(function(){return n.Ri})),i.d(e,"Qi",(function(){return n.Si})),i.d(e,"Ri",(function(){return n.Ti})),i.d(e,"Si",(function(){return n.Ui})),i.d(e,"Ti",(function(){return n.Vi})),i.d(e,"Ui",(function(){return n.Wi})),i.d(e,"Vi",(function(){return n.Xi})),i.d(e,"Wi",(function(){return n.Yi})),i.d(e,"Xi",(function(){return n.Zi})),i.d(e,"Yi",(function(){return n.aj})),i.d(e,"Zi",(function(){return n.bj})),i.d(e,"aj",(function(){return n.cj})),i.d(e,"bj",(function(){return n.dj})),i.d(e,"cj",(function(){return n.ej})),i.d(e,"dj",(function(){return n.fj}))},58:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1),s=i(2),r=i(5),a=i(6),o=function(t){Object(r.a)(i,t);var e=Object(a.a)(i);function i(t,s){var r;return Object(n.a)(this,i),(r=e.call(this,t))._sampleCode=void 0,r._sampleCode=s,r}return Object(s.a)(i,[{key:"sampleCode",get:function(){return this._sampleCode}}]),i}(i(25).a);o.PLAY_SOUND="NSOE_PLAY_SOUND"},82:function(t,e,i){"use strict";i.d(e,"Se",(function(){return I})),i.d(e,"lb",(function(){return p})),i.d(e,"wb",(function(){return b})),i.d(e,"Pe",(function(){return E.a})),i.d(e,"af",(function(){return ED})),i.d(e,"g",(function(){return H})),i.d(e,"Le",(function(){return Y})),i.d(e,"Me",(function(){return K})),i.d(e,"Oe",(function(){return q})),i.d(e,"Qe",(function(){return Q})),i.d(e,"Te",(function(){return J})),i.d(e,"Ue",(function(){return $})),i.d(e,"We",(function(){return et})),i.d(e,"Xe",(function(){return it})),i.d(e,"tf",(function(){return nt})),i.d(e,"ff",(function(){return rt.a})),i.d(e,"Ye",(function(){return at})),i.d(e,"p",(function(){return Nt})),i.d(e,"l",(function(){return qt})),i.d(e,"m",(function(){return Bt})),i.d(e,"n",(function(){return Kk})),i.d(e,"q",(function(){return Gt})),i.d(e,"r",(function(){return Ht})),i.d(e,"s",(function(){return Qt})),i.d(e,"jf",(function(){return zT})),i.d(e,"kf",(function(){return YT})),i.d(e,"rf",(function(){return ds})),i.d(e,"Uf",(function(){return yi})),i.d(e,"Vf",(function(){return pD})),i.d(e,"Ne",(function(){return Di})),i.d(e,"Gd",(function(){return y_})),i.d(e,"Hd",(function(){return E_})),i.d(e,"Id",(function(){return p_})),i.d(e,"Yd",(function(){return m_})),i.d(e,"eb",(function(){return b_})),i.d(e,"yb",(function(){return T_})),i.d(e,"y",(function(){return A_})),i.d(e,"A",(function(){return S_})),i.d(e,"C",(function(){return N_})),i.d(e,"ab",(function(){return Ji})),i.d(e,"bb",(function(){return en})),i.d(e,"yh",(function(){return nn})),i.d(e,"M",(function(){return D_})),i.d(e,"N",(function(){return M_})),i.d(e,"O",(function(){return C_})),i.d(e,"Kd",(function(){return U_})),i.d(e,"P",(function(){return w_})),i.d(e,"Q",(function(){return F_})),i.d(e,"E",(function(){return B_})),i.d(e,"I",(function(){return G_})),i.d(e,"V",(function(){return Y_})),i.d(e,"W",(function(){return bn})),i.d(e,"X",(function(){return W_})),i.d(e,"Y",(function(){return X_})),i.d(e,"gb",(function(){return q_})),i.d(e,"ib",(function(){return Q_})),i.d(e,"Kb",(function(){return Rn})),i.d(e,"Ac",(function(){return J_})),i.d(e,"Bc",(function(){return $_})),i.d(e,"Bd",(function(){return el})),i.d(e,"Td",(function(){return nl})),i.d(e,"uf",(function(){return al})),i.d(e,"wf",(function(){return ol})),i.d(e,"zf",(function(){return ul})),i.d(e,"Af",(function(){return cl})),i.d(e,"Fh",(function(){return ll})),i.d(e,"Ri",(function(){return vl})),i.d(e,"Si",(function(){return gl})),i.d(e,"sb",(function(){return ml})),i.d(e,"Gb",(function(){return Rl})),i.d(e,"Hb",(function(){return kl})),i.d(e,"Ib",(function(){return Sl})),i.d(e,"Ed",(function(){return jl})),i.d(e,"he",(function(){return Ml})),i.d(e,"Ie",(function(){return Ul})),i.d(e,"Je",(function(){return Pl})),i.d(e,"zg",(function(){return wl})),i.d(e,"Ag",(function(){return Fl})),i.d(e,"ac",(function(){return Bl})),i.d(e,"Gc",(function(){return Gl})),i.d(e,"Jc",(function(){return Hl})),i.d(e,"Kc",(function(){return Vl})),i.d(e,"Qc",(function(){return zl})),i.d(e,"Tc",(function(){return Yl})),i.d(e,"Wc",(function(){return Wl})),i.d(e,"ed",(function(){return Kl})),i.d(e,"Cd",(function(){return Xl})),i.d(e,"L",(function(){return Id})),i.d(e,"gd",(function(){return Sd})),i.d(e,"hd",(function(){return jd})),i.d(e,"jd",(function(){return Nd})),i.d(e,"kd",(function(){return Dd})),i.d(e,"pd",(function(){return Cd})),i.d(e,"rd",(function(){return Ld})),i.d(e,"td",(function(){return Ud})),i.d(e,"vd",(function(){return Pd})),i.d(e,"xd",(function(){return wd})),i.d(e,"Ld",(function(){return Gd})),i.d(e,"b",(function(){return Yd})),i.d(e,"d",(function(){return Wd})),i.d(e,"e",(function(){return Kd})),i.d(e,"u",(function(){return Jd})),i.d(e,"v",(function(){return $d})),i.d(e,"w",(function(){return tf})),i.d(e,"xb",(function(){return nf})),i.d(e,"Mb",(function(){return sf})),i.d(e,"Ob",(function(){return rf})),i.d(e,"Pb",(function(){return af})),i.d(e,"Qb",(function(){return of})),i.d(e,"Wb",(function(){return uf})),i.d(e,"if",(function(){return hf})),i.d(e,"lf",(function(){return _f})),i.d(e,"nf",(function(){return lf})),i.d(e,"of",(function(){return df})),i.d(e,"Rh",(function(){return ff})),i.d(e,"Uh",(function(){return vf})),i.d(e,"Wh",(function(){return gf})),i.d(e,"Yh",(function(){return Of})),i.d(e,"bi",(function(){return yf})),i.d(e,"di",(function(){return Ef})),i.d(e,"fi",(function(){return pf})),i.d(e,"gi",(function(){return mf})),i.d(e,"hi",(function(){return If})),i.d(e,"ji",(function(){return bf})),i.d(e,"be",(function(){return kf})),i.d(e,"ce",(function(){return Af})),i.d(e,"de",(function(){return jf})),i.d(e,"ee",(function(){return Df})),i.d(e,"ae",(function(){return Mf})),i.d(e,"fe",(function(){return Cf})),i.d(e,"Z",(function(){return Lf})),i.d(e,"Md",(function(){return Uf})),i.d(e,"Nd",(function(){return Pf})),i.d(e,"Pd",(function(){return wf})),i.d(e,"qe",(function(){return Ff})),i.d(e,"re",(function(){return xf})),i.d(e,"se",(function(){return Bf})),i.d(e,"te",(function(){return Gf})),i.d(e,"ue",(function(){return Hf})),i.d(e,"ve",(function(){return Vf})),i.d(e,"we",(function(){return zf})),i.d(e,"Yf",(function(){return Yf})),i.d(e,"sh",(function(){return Wf})),i.d(e,"si",(function(){return Kf})),i.d(e,"ti",(function(){return Xf})),i.d(e,"R",(function(){return Qf})),i.d(e,"Ae",(function(){return Zf})),i.d(e,"Be",(function(){return tv})),i.d(e,"De",(function(){return iv})),i.d(e,"Ee",(function(){return nv})),i.d(e,"Ge",(function(){return rv})),i.d(e,"c",(function(){return uv})),i.d(e,"f",(function(){return cv})),i.d(e,"hb",(function(){return _v})),i.d(e,"zd",(function(){return lv})),i.d(e,"Jd",(function(){return dv})),i.d(e,"Xd",(function(){return fv})),i.d(e,"bf",(function(){return vv})),i.d(e,"mf",(function(){return gv})),i.d(e,"li",(function(){return yv})),i.d(e,"gf",(function(){return Ev})),i.d(e,"eg",(function(){return wv})),i.d(e,"fg",(function(){return Fv})),i.d(e,"gg",(function(){return xv})),i.d(e,"rg",(function(){return Vv})),i.d(e,"sg",(function(){return zv})),i.d(e,"vg",(function(){return Yv})),i.d(e,"z",(function(){return Wv})),i.d(e,"kc",(function(){return Kv})),i.d(e,"Xf",(function(){return Xv})),i.d(e,"tg",(function(){return qv})),i.d(e,"Og",(function(){return Qv})),i.d(e,"fh",(function(){return Jv})),i.d(e,"gh",(function(){return tg})),i.d(e,"bg",(function(){return ng})),i.d(e,"Yb",(function(){return dg})),i.d(e,"Oc",(function(){return fg})),i.d(e,"Ud",(function(){return gg})),i.d(e,"Vd",(function(){return Og})),i.d(e,"Wd",(function(){return yg})),i.d(e,"dj",(function(){return Rg})),i.d(e,"ej",(function(){return kg})),i.d(e,"fj",(function(){return Ag})),i.d(e,"Db",(function(){return Sg})),i.d(e,"ug",(function(){return jg})),i.d(e,"Lg",(function(){return Mg})),i.d(e,"th",(function(){return Ug})),i.d(e,"kb",(function(){return Mh})),i.d(e,"ki",(function(){return Lh})),i.d(e,"Vi",(function(){return Nh})),i.d(e,"Wi",(function(){return sO})),i.d(e,"Xi",(function(){return rO})),i.d(e,"Yi",(function(){return aO})),i.d(e,"Zi",(function(){return oO})),i.d(e,"aj",(function(){return uO})),i.d(e,"bj",(function(){return cO})),i.d(e,"cj",(function(){return hO})),i.d(e,"x",(function(){return _O})),i.d(e,"Ab",(function(){return lO})),i.d(e,"Bb",(function(){return dO})),i.d(e,"Cb",(function(){return fO})),i.d(e,"Di",(function(){return gO})),i.d(e,"k",(function(){return OO})),i.d(e,"Hf",(function(){return yO})),i.d(e,"yi",(function(){return EO})),i.d(e,"Bi",(function(){return pO})),i.d(e,"Ci",(function(){return mO})),i.d(e,"Fi",(function(){return IO})),i.d(e,"Ii",(function(){return bO})),i.d(e,"yd",(function(){return RO})),i.d(e,"ui",(function(){return NO})),i.d(e,"wi",(function(){return DO})),i.d(e,"Ni",(function(){return MO})),i.d(e,"Rf",(function(){return UO})),i.d(e,"Ch",(function(){return PO})),i.d(e,"Pi",(function(){return wO})),i.d(e,"Lf",(function(){return BO})),i.d(e,"cb",(function(){return GO})),i.d(e,"db",(function(){return HO})),i.d(e,"yc",(function(){return VO})),i.d(e,"Ah",(function(){return zO})),i.d(e,"vf",(function(){return WO})),i.d(e,"Bf",(function(){return KO})),i.d(e,"Of",(function(){return QO})),i.d(e,"df",(function(){return ZO})),i.d(e,"ef",(function(){return JO})),i.d(e,"F",(function(){return $O})),i.d(e,"G",(function(){return ty})),i.d(e,"H",(function(){return ey})),i.d(e,"cc",(function(){return sy})),i.d(e,"dc",(function(){return ry})),i.d(e,"gc",(function(){return uy})),i.d(e,"hc",(function(){return cy})),i.d(e,"jc",(function(){return _y})),i.d(e,"sc",(function(){return Oy})),i.d(e,"wc",(function(){return py})),i.d(e,"xf",(function(){return Ty})),i.d(e,"yf",(function(){return Ry})),i.d(e,"Ff",(function(){return jy})),i.d(e,"Eh",(function(){return Dy})),i.d(e,"rb",(function(){return Xy})),i.d(e,"Fb",(function(){return qy})),i.d(e,"a",(function(){return Qy})),i.d(e,"pb",(function(){return Zy})),i.d(e,"Eb",(function(){return $y})),i.d(e,"ic",(function(){return eE})),i.d(e,"Dd",(function(){return iE})),i.d(e,"ge",(function(){return nE})),i.d(e,"Kf",(function(){return sE})),i.d(e,"Pf",(function(){return rE})),i.d(e,"Gh",(function(){return aE})),i.d(e,"Hh",(function(){return oE})),i.d(e,"Kh",(function(){return uE})),i.d(e,"Cc",(function(){return gE})),i.d(e,"Dc",(function(){return OE})),i.d(e,"Fc",(function(){return yE})),i.d(e,"Hc",(function(){return EE})),i.d(e,"Ic",(function(){return pE})),i.d(e,"Lc",(function(){return mE})),i.d(e,"Mc",(function(){return IE})),i.d(e,"Nc",(function(){return bE})),i.d(e,"Pc",(function(){return TE})),i.d(e,"Rc",(function(){return RE})),i.d(e,"Sc",(function(){return kE})),i.d(e,"Uc",(function(){return AE})),i.d(e,"Vc",(function(){return SE})),i.d(e,"Yc",(function(){return jE})),i.d(e,"Zc",(function(){return NE})),i.d(e,"ad",(function(){return DE})),i.d(e,"bd",(function(){return ME})),i.d(e,"cd",(function(){return CE})),i.d(e,"dd",(function(){return LE})),i.d(e,"fd",(function(){return UE})),i.d(e,"K",(function(){return np})),i.d(e,"fc",(function(){return cp})),i.d(e,"rc",(function(){return dp})),i.d(e,"id",(function(){return vp})),i.d(e,"ld",(function(){return gp})),i.d(e,"md",(function(){return Op})),i.d(e,"nd",(function(){return yp})),i.d(e,"od",(function(){return Ep})),i.d(e,"qd",(function(){return mp})),i.d(e,"sd",(function(){return Ip})),i.d(e,"ud",(function(){return Tp})),i.d(e,"wd",(function(){return Rp})),i.d(e,"Mf",(function(){return Sp})),i.d(e,"Ih",(function(){return jp})),i.d(e,"bc",(function(){return Np})),i.d(e,"Nb",(function(){return Mp})),i.d(e,"Qf",(function(){return Cp})),i.d(e,"Qh",(function(){return Lp})),i.d(e,"Sh",(function(){return Up})),i.d(e,"Th",(function(){return Pp})),i.d(e,"Xh",(function(){return wp})),i.d(e,"Zh",(function(){return Fp})),i.d(e,"ai",(function(){return xp})),i.d(e,"ci",(function(){return Bp})),i.d(e,"ei",(function(){return Gp})),i.d(e,"ii",(function(){return Hp})),i.d(e,"mi",(function(){return Vp})),i.d(e,"ni",(function(){return zp})),i.d(e,"J",(function(){return Kp})),i.d(e,"S",(function(){return qp})),i.d(e,"lc",(function(){return Zp})),i.d(e,"mc",(function(){return $p})),i.d(e,"nc",(function(){return tm})),i.d(e,"Zd",(function(){return em})),i.d(e,"Ef",(function(){return im})),i.d(e,"fb",(function(){return sm})),i.d(e,"qb",(function(){return am})),i.d(e,"ec",(function(){return om})),i.d(e,"oc",(function(){return um})),i.d(e,"pc",(function(){return cm})),i.d(e,"tc",(function(){return hm})),i.d(e,"vc",(function(){return _m})),i.d(e,"xc",(function(){return lm})),i.d(e,"ie",(function(){return dm})),i.d(e,"je",(function(){return rm})),i.d(e,"oe",(function(){return fm})),i.d(e,"pe",(function(){return vm})),i.d(e,"ke",(function(){return gm})),i.d(e,"le",(function(){return Om})),i.d(e,"me",(function(){return ym})),i.d(e,"ne",(function(){return mm})),i.d(e,"sf",(function(){return Im})),i.d(e,"If",(function(){return bm})),i.d(e,"ob",(function(){return Tm})),i.d(e,"ze",(function(){return Rm})),i.d(e,"Ce",(function(){return Am})),i.d(e,"Fe",(function(){return jm})),i.d(e,"He",(function(){return Mm})),i.d(e,"pf",(function(){return wm})),i.d(e,"qf",(function(){return Fm})),i.d(e,"Jf",(function(){return _I})),i.d(e,"dg",(function(){return fI})),i.d(e,"Bg",(function(){return OI})),i.d(e,"ih",(function(){return EI})),i.d(e,"jh",(function(){return pI})),i.d(e,"lh",(function(){return mI})),i.d(e,"Nf",(function(){return II})),i.d(e,"Tf",(function(){return bI})),i.d(e,"yg",(function(){return TI})),i.d(e,"eh",(function(){return RI})),i.d(e,"qh",(function(){return kI})),i.d(e,"zh",(function(){return AI})),i.d(e,"B",(function(){return jI})),i.d(e,"D",(function(){return NI})),i.d(e,"Jh",(function(){return BI})),i.d(e,"Ub",(function(){return XI})),i.d(e,"Vb",(function(){return qI})),i.d(e,"Lb",(function(){return eb})),i.d(e,"Tb",(function(){return ib})),i.d(e,"Xb",(function(){return rb})),i.d(e,"Rb",(function(){return ob})),i.d(e,"Sb",(function(){return ub})),i.d(e,"i",(function(){return hb})),i.d(e,"nb",(function(){return lb})),i.d(e,"zc",(function(){return db})),i.d(e,"Lh",(function(){return fb})),i.d(e,"qc",(function(){return vb})),i.d(e,"uc",(function(){return Ob})),i.d(e,"qi",(function(){return yb})),i.d(e,"Df",(function(){return Eb})),i.d(e,"ag",(function(){return pb})),i.d(e,"mh",(function(){return Nb})),i.d(e,"nh",(function(){return Db})),i.d(e,"oh",(function(){return Mb})),i.d(e,"Dg",(function(){return xb})),i.d(e,"oi",(function(){return Bb})),i.d(e,"pi",(function(){return Gb})),i.d(e,"ri",(function(){return Hb})),i.d(e,"j",(function(){return $b})),i.d(e,"U",(function(){return tT})),i.d(e,"xi",(function(){return aT})),i.d(e,"zi",(function(){return oT})),i.d(e,"Ai",(function(){return uT})),i.d(e,"Ei",(function(){return hT})),i.d(e,"Gi",(function(){return _T})),i.d(e,"vi",(function(){return dT})),i.d(e,"Mi",(function(){return fT})),i.d(e,"Bh",(function(){return vT})),i.d(e,"Hi",(function(){return gT})),i.d(e,"Ji",(function(){return OT})),i.d(e,"Ki",(function(){return yT})),i.d(e,"Li",(function(){return ET})),i.d(e,"Xc",(function(){return mr})),i.d(e,"Vh",(function(){return za})),i.d(e,"Od",(function(){return Eo})),i.d(e,"hf",(function(){return Eu})),i.d(e,"T",(function(){return Yu})),i.d(e,"Wf",(function(){return ic})),i.d(e,"cg",(function(){return iu})),i.d(e,"Cg",(function(){return rc})),i.d(e,"Oi",(function(){return ls})),i.d(e,"Gf",(function(){return Qn})),i.d(e,"Ve",(function(){return QN})),i.d(e,"Ze",(function(){return XT})),i.d(e,"Sd",(function(){return LT})),i.d(e,"Re",(function(){return wT})),i.d(e,"Ke",(function(){return gD})),i.d(e,"Hg",(function(){return dS})),i.d(e,"Sf",(function(){return JT})),i.d(e,"hg",(function(){return $T})),i.d(e,"ig",(function(){return tR})),i.d(e,"jg",(function(){return VT})),i.d(e,"kg",(function(){return eR})),i.d(e,"lg",(function(){return iR})),i.d(e,"mg",(function(){return rR})),i.d(e,"ng",(function(){return aR})),i.d(e,"og",(function(){return oR})),i.d(e,"pg",(function(){return uR})),i.d(e,"Fg",(function(){return fR})),i.d(e,"xh",(function(){return kR})),i.d(e,"cf",(function(){return ja})),i.d(e,"Rd",(function(){return Ta})),i.d(e,"Mh",(function(){return Aa})),i.d(e,"Eg",(function(){return _t})),i.d(e,"Gg",(function(){return yS})),i.d(e,"Ig",(function(){return mh})),i.d(e,"Jg",(function(){return lt})),i.d(e,"Kg",(function(){return dt})),i.d(e,"Mg",(function(){return mD})),i.d(e,"rh",(function(){return cS})),i.d(e,"Ec",(function(){return $N})),i.d(e,"Zf",(function(){return Zu})),i.d(e,"kh",(function(){return WN})),i.d(e,"Dh",(function(){return iD})),i.d(e,"t",(function(){return qT})),i.d(e,"Pg",(function(){return lN})),i.d(e,"Qg",(function(){return AN})),i.d(e,"Rg",(function(){return ON})),i.d(e,"Sg",(function(){return bN})),i.d(e,"Tg",(function(){return oN})),i.d(e,"Ug",(function(){return QT})),i.d(e,"Vg",(function(){return SN})),i.d(e,"Wg",(function(){return DN})),i.d(e,"Xg",(function(){return CN})),i.d(e,"Yg",(function(){return hN})),i.d(e,"Zg",(function(){return mN})),i.d(e,"ah",(function(){return UN})),i.d(e,"bh",(function(){return PN})),i.d(e,"ch",(function(){return wN})),i.d(e,"dh",(function(){return xN})),i.d(e,"Zb",(function(){return ct})),i.d(e,"Ad",(function(){return ID})),i.d(e,"ph",(function(){return VN})),i.d(e,"ye",(function(){return _i})),i.d(e,"Ph",(function(){return NS})),i.d(e,"o",(function(){return DS})),i.d(e,"mb",(function(){return MS})),i.d(e,"uh",(function(){return LS})),i.d(e,"vh",(function(){return SS})),i.d(e,"wh",(function(){return US})),i.d(e,"Nh",(function(){return PS})),i.d(e,"zb",(function(){return Aj})),i.d(e,"Jb",(function(){return Sj})),i.d(e,"Fd",(function(){return jj})),i.d(e,"Ui",(function(){return Nj})),i.d(e,"tb",(function(){return TD})),i.d(e,"ub",(function(){return kD})),i.d(e,"vb",(function(){return AD})),i.d(e,"Qd",(function(){return SD})),i.d(e,"xe",(function(){return jD})),i.d(e,"Cf",(function(){return ND})),i.d(e,"Ti",(function(){return DD})),i.d(e,"h",(function(){return ze})),i.d(e,"jb",(function(){return Qe})),i.d(e,"qg",(function(){return ti})),i.d(e,"wg",(function(){return ei})),i.d(e,"xg",(function(){return ii})),i.d(e,"Ng",(function(){return ni})),i.d(e,"hh",(function(){return si})),i.d(e,"Oh",(function(){return Ut})),i.d(e,"Qi",(function(){return Et}));var n=i(7),s=i(8),r=i(1),a=i(2),o=i(5),u=i(6),c=i(21),h=i(41),_=i(52),l=i(20),d=i(10),f=i(9),v=i(57),g=i(13),O=i(27),y=i(43),E=i(25),p=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(E.a);p.LOADED="NCE_LOADED",p.FAILED="NCE_FAILED";var m=function(){function t(){Object(r.a)(this,t),this._isDisposed=void 0,this._isDisposing=void 0,this._isDisposed=!1,this._isDisposing=!1}return Object(a.a)(t,[{key:"dispose",value:function(){this._isDisposed||this._isDisposing||(this._isDisposing=!0,this.onDispose(),this._isDisposed=!0,this._isDisposing=!1)}},{key:"onDispose",value:function(){}},{key:"disposed",get:function(){return this._isDisposed}},{key:"isDisposing",get:function(){return this._isDisposing}}]),t}(),I=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r.a)(this,t),this._name=void 0,this._description=void 0,this._print=void 0,this._name=e,this._description=i,this._print=!0}return Object(a.a)(t,[{key:"log",value:function(t){this.printMessage(t,"log")}},{key:"error",value:function(t,e){this.printMessage(e||t,"error")}},{key:"warn",value:function(t){this.printMessage(t,"warn")}},{key:"printMessage",value:function(e,i){this._print&&t.log(e,this._name,i)}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"print",get:function(){return this._print},set:function(t){this._print=t}}],[{key:"log",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nitro",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="[Nitro] [".concat(e,"] ").concat(t," ").concat(this.getTimestamp());switch(i){case"error":console.error(n);break;case"warn":console.warn(n);break;default:console.log(n)}}},{key:"error",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nitro";return this.log(t,e,"error")}},{key:"warn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nitro";return this.log(t,e,"warn")}},{key:"getTimestamp",value:function(){var e=Date.now(),i=" +".concat(e-t.LAST_TIMESTAMP||0,"ms");return this.LAST_TIMESTAMP=e,i}}]),t}();I.LAST_TIMESTAMP=Date.now();var b=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._logger=void 0,t._listeners=void 0,t._logger=new I(t.constructor.name),t._listeners=new Map,t}return Object(a.a)(i,[{key:"onDispose",value:function(){this.removeAllListeners(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"addEventListener",value:function(t,e){if(t&&e){var i=this._listeners.get(t);i?i.push(e):this._listeners.set(t,[e])}}},{key:"removeEventListener",value:function(t,e){if(t&&e){var i=this._listeners.get(t);if(i&&i.length){var r,a=Object(s.a)(i.entries());try{for(a.s();!(r=a.n()).done;){var o=Object(n.a)(r.value,2),u=o[0],c=o[1];if(c&&c===e)return i.splice(u,1),void(i.length||this._listeners.delete(t))}}catch(h){a.e(h)}finally{a.f()}}}}},{key:"dispatchEvent",value:function(t){return!!t&&(gD.instance.getConfiguration("system.dispatcher.log")&&this._logger.log("DISPATCHED: ".concat(t.type)),this.processEvent(t),!0)}},{key:"processEvent",value:function(t){var e=this._listeners.get(t.type);if(e&&e.length){var i,n=[],r=Object(s.a)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;a&&n.push(a)}}catch(u){r.e(u)}finally{r.f()}for(;n.length;){var o=n.shift();try{o(t)}catch(u){return void this._logger.error(u.stack)}}}}},{key:"removeAllListeners",value:function(){this._listeners.clear()}}]),i}(m),T=i(16),R=function(){function t(e){Object(r.a)(this,t),this._position=void 0,this._dataView=void 0,this._position=0,this._dataView=new DataView(e)}return Object(a.a)(t,[{key:"readBytes",value:function(e){var i=new t(this._dataView.buffer.slice(this._position,this._position+e));return this._position+=e,i}},{key:"readByte",value:function(){var t=this._dataView.getInt8(this._position);return this._position++,t}},{key:"readShort",value:function(){var t=this._dataView.getInt16(this._position);return this._position+=2,t}},{key:"readInt",value:function(){var t=this._dataView.getInt32(this._position);return this._position+=4,t}},{key:"readFloat",value:function(){var t=this._dataView.getFloat32(this._position);return this._position+=4,t}},{key:"readDouble",value:function(){var t=this._dataView.getFloat64(this._position);return this._position+=8,t}},{key:"remaining",value:function(){return this._dataView.byteLength-this._position}},{key:"toString",value:function(t){return(new TextDecoder).decode(this._dataView.buffer)}},{key:"toArrayBuffer",value:function(){return this._dataView.buffer}}]),t}(),k=function(){function t(){Object(r.a)(this,t),this._buffer=void 0,this._position=void 0,this._buffer=new Uint8Array,this._position=0}return Object(a.a)(t,[{key:"writeByte",value:function(t){var e=new Uint8Array(1);return e[0]=t,this.appendArray(e),this}},{key:"writeBytes",value:function(t){var e=new Uint8Array(t);return this.appendArray(e),this}},{key:"writeShort",value:function(t){var e=new Uint8Array(2);return e[0]=t>>8,e[1]=255&t,this.appendArray(e),this}},{key:"writeInt",value:function(t){var e=new Uint8Array(4);return e[0]=t>>24,e[1]=t>>16,e[2]=t>>8,e[3]=255&t,this.appendArray(e),this}},{key:"writeString",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(new TextEncoder).encode(t);return e?(this.writeShort(i.length),this.appendArray(i)):this.appendArray(i),this}},{key:"appendArray",value:function(t){if(t){var e=new Uint8Array(this.position+t.length>this._buffer.length?this.position+t.length:this._buffer.length);e.set(this._buffer),e.set(t,this.position),this._buffer=e,this.position+=t.length}}},{key:"getBuffer",value:function(){return this._buffer.buffer}},{key:"position",get:function(){return this._position},set:function(t){this._position=t}},{key:"toString",value:function(t){return new TextDecoder(t).decode(this._buffer)}}]),t}(),A=function(){function t(e){Object(r.a)(this,t),this._value=void 0,this._value=e}return Object(a.a)(t,[{key:"value",get:function(){return this._value}}]),t}(),S=function(){function t(e){Object(r.a)(this,t),this._value=void 0,this._value=e}return Object(a.a)(t,[{key:"value",get:function(){return this._value}}]),t}(),j=function(){function t(e,i){Object(r.a)(this,t),this._header=void 0,this._buffer=void 0,this._header=e,this._buffer=i}return Object(a.a)(t,[{key:"readBytes",value:function(t){return this._buffer?this._buffer.readBytes(t):null}},{key:"readByte",value:function(){return this._buffer?this._buffer.readByte():-1}},{key:"readBoolean",value:function(){return 1===this.readByte()}},{key:"readShort",value:function(){return this._buffer?this._buffer.readShort():-1}},{key:"readInt",value:function(){return this._buffer?this._buffer.readInt():-1}},{key:"readFloat",value:function(){return this._buffer?this._buffer.readFloat():-1}},{key:"readDouble",value:function(){return this._buffer?this._buffer.readDouble():-1}},{key:"readString",value:function(){var t=this.readShort();return this._buffer.readBytes(t).toString("utf8")}},{key:"header",get:function(){return this._header}},{key:"bytesAvailable",get:function(){return this._buffer&&this._buffer.remaining()>0}}]),t}(),N=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"encode",value:function(t,e){var i=new k;i.writeShort(t);var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=typeof a;switch("object"===o&&(null===a?o="null":a instanceof A?o="byte":a instanceof S?o="short":a instanceof ArrayBuffer&&(o="arraybuffer")),o){case"undefined":case"null":i.writeShort(0);break;case"byte":i.writeByte(a.value);break;case"short":i.writeShort(a.value);break;case"number":i.writeInt(a);break;case"boolean":i.writeByte(a?1:0);break;case"string":a?i.writeString(a,!0):i.writeShort(0);break;case"arraybuffer":i.writeBytes(a)}}}catch(c){r.e(c)}finally{r.f()}var u=i.getBuffer();return u?(new k).writeInt(u.byteLength).writeBytes(u):null}},{key:"decode",value:function(t){if(!t||!t.dataBuffer||!t.dataBuffer.byteLength)return null;for(var e=[];t.dataBuffer.byteLength&&!(t.dataBuffer.byteLength<4);){var i=new R(t.dataBuffer),n=i.readInt();if(n>t.dataBuffer.byteLength-4)break;var s=i.readBytes(n);e.push(new j(s.readShort(),s)),t.dataBuffer=t.dataBuffer.slice(n+4)}return e}}]),t}(),D=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t))._connection=void 0,a._originalEvent=void 0,a._connection=n,a._originalEvent=event,a}return Object(a.a)(i,[{key:"connection",get:function(){return this._connection}},{key:"originalEvent",get:function(){return this._originalEvent}}]),i}(E.a);D.CONNECTION_OPENED="SCE_OPEN",D.CONNECTION_CLOSED="SCE_CLOSED",D.CONNECTION_ERROR="SCE_ERROR",D.CONNECTION_MESSAGE="SCE_MESSAGE";var M=function(){function t(e,i){Object(r.a)(this,t),this._callBack=void 0,this._parserClass=void 0,this._parser=void 0,this._connection=void 0,this._callBack=e,this._parserClass=i,this._parser=null,this._connection=null}return Object(a.a)(t,[{key:"dispose",value:function(){this._callBack=null,this._parserClass=null,this._parser=null,this._connection=null}},{key:"callBack",get:function(){return this._callBack}},{key:"parserClass",get:function(){return this._parserClass}},{key:"parser",get:function(){return this._parser},set:function(t){this._parser=t}},{key:"connection",get:function(){return this._connection},set:function(t){this._connection=t}}]),t}(),C=function(){function t(){Object(r.a)(this,t),this._messageIdByEvent=void 0,this._messageIdByComposer=void 0,this._messageInstancesById=void 0,this._messageIdByEvent=new Map,this._messageIdByComposer=new Map,this._messageInstancesById=new Map}return Object(a.a)(t,[{key:"dispose",value:function(){this._messageIdByEvent.clear(),this._messageIdByComposer.clear(),this._messageInstancesById.clear()}},{key:"registerMessages",value:function(t){var e,i=Object(s.a)(t.events);try{for(i.s();!(e=i.n()).done;){var r=Object(n.a)(e.value,2),a=r[0],o=r[1];this.registerMessageEventClass(a,o)}}catch(d){i.e(d)}finally{i.f()}var u,c=Object(s.a)(t.composers);try{for(c.s();!(u=c.n()).done;){var h=Object(n.a)(u.value,2),_=h[0],l=h[1];this.registerMessageComposerClass(_,l)}}catch(d){c.e(d)}finally{c.f()}}},{key:"registerMessageEventClass",value:function(t,e){t&&e&&this._messageIdByEvent.set(e,t)}},{key:"registerMessageComposerClass",value:function(t,e){t&&e&&this._messageIdByComposer.set(e,t)}},{key:"registerMessageEvent",value:function(t){if(t){var e=this.getEventId(t);if(e){var i=this._messageInstancesById.get(e);i&&i.length||(i=[],this._messageInstancesById.set(e,i)),i.push(t)}}}},{key:"removeMessageEvent",value:function(t){if(t){var e=this.getEventId(t);if(e){var i=this._messageInstancesById.get(e);if(i){var r,a=Object(s.a)(i.entries());try{for(a.s();!(r=a.n()).done;){var o=Object(n.a)(r.value,2),u=o[0],c=o[1];if(c&&c===t)return i.splice(u,1),0===i.length&&this._messageInstancesById.delete(e),void c.dispose()}}catch(h){a.e(h)}finally{a.f()}}}}}},{key:"getEvents",value:function(t){if(t){var e=this._messageInstancesById.get(t);if(e)return e}}},{key:"getEventId",value:function(t){if(!t)return-1;var e=t instanceof M?t.constructor:t,i=this._messageIdByEvent.get(e);return i||-1}},{key:"getComposerId",value:function(t){if(!t)return-1;var e=this._messageIdByComposer.get(t.constructor);return e||-1}}]),t}(),L=Object(a.a)((function t(){Object(r.a)(this,t)}));L.CONNECTION_OPENED="open",L.CONNECTION_CLOSED="close",L.CONNECTION_ERROR="error",L.CONNECTION_MESSAGE="message";var U=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._communicationManager=void 0,s._stateListener=void 0,s._socket=void 0,s._messages=void 0,s._codec=void 0,s._dataBuffer=void 0,s._isReady=void 0,s._pendingClientMessages=void 0,s._pendingServerMessages=void 0,s._isAuthenticated=void 0,s._communicationManager=t,s._stateListener=n,s._socket=null,s._messages=new C,s._codec=new N,s._dataBuffer=null,s._isReady=!1,s._pendingClientMessages=[],s._pendingServerMessages=[],s._isAuthenticated=!1,s.onOpen=s.onOpen.bind(Object(l.a)(s)),s.onClose=s.onClose.bind(Object(l.a)(s)),s.onError=s.onError.bind(Object(l.a)(s)),s.onMessage=s.onMessage.bind(Object(l.a)(s)),s}return Object(a.a)(i,[{key:"init",value:function(t){this._stateListener&&this._stateListener.connectionInit(t),this.createSocket(t)}},{key:"onDispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this),this.destroySocket(),this._communicationManager=null,this._stateListener=null,this._messages=null,this._codec=null,this._dataBuffer=null}},{key:"onReady",value:function(){this._isReady||(this._isReady=!0,this._pendingServerMessages&&this._pendingServerMessages.length&&this.processWrappers.apply(this,Object(T.a)(this._pendingServerMessages)),this._pendingClientMessages&&this._pendingClientMessages.length&&this.send.apply(this,Object(T.a)(this._pendingClientMessages)),this._pendingServerMessages=[],this._pendingClientMessages=[])}},{key:"createSocket",value:function(t){t&&(this.destroySocket(),this._dataBuffer=new ArrayBuffer(0),this._socket=new WebSocket(t),this._socket.addEventListener(L.CONNECTION_OPENED,this.onOpen),this._socket.addEventListener(L.CONNECTION_CLOSED,this.onClose),this._socket.addEventListener(L.CONNECTION_ERROR,this.onError),this._socket.addEventListener(L.CONNECTION_MESSAGE,this.onMessage))}},{key:"destroySocket",value:function(){this._socket&&(this._socket.removeEventListener(L.CONNECTION_OPENED,this.onOpen),this._socket.removeEventListener(L.CONNECTION_CLOSED,this.onClose),this._socket.removeEventListener(L.CONNECTION_ERROR,this.onError),this._socket.removeEventListener(L.CONNECTION_MESSAGE,this.onMessage),this._socket.readyState===WebSocket.OPEN&&this._socket.close(),this._socket=null)}},{key:"onOpen",value:function(t){this.dispatchConnectionEvent(D.CONNECTION_OPENED,t)}},{key:"onClose",value:function(t){this.dispatchConnectionEvent(D.CONNECTION_CLOSED,t)}},{key:"onError",value:function(t){this.dispatchConnectionEvent(D.CONNECTION_ERROR,t)}},{key:"onMessage",value:function(t){var e=this;if(t){var i=new FileReader;i.readAsArrayBuffer(t.data),i.onloadend=function(){e._dataBuffer=e.concatArrayBuffers(e._dataBuffer,i.result),e.processReceivedData()}}}},{key:"dispatchConnectionEvent",value:function(t,e){this.dispatchEvent(new D(t,this,e))}},{key:"authenticated",value:function(){this._isAuthenticated=!0}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(this.disposed||!e)return!1;var n;if(e=Object(T.a)(e),this._isAuthenticated&&!this._isReady)return this._pendingClientMessages||(this._pendingClientMessages=[]),(n=this._pendingClientMessages).push.apply(n,Object(T.a)(e)),!1;var r,a=Object(s.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o){var u=this._messages.getComposerId(o);if(-1!==u){var c=o.getMessageArray(),h=this._codec.encode(u,c);h?(gD.instance.getConfiguration("system.packet.log")&&console.log("OutgoingComposer: [".concat(u,"] ").concat(o.constructor.name),c),this.write(h.getBuffer())):gD.instance.getConfiguration("system.packet.log")&&console.log("Encoding Failed: ".concat(o.constructor.name))}else I.log("Unknown Composer: ".concat(o.constructor.name))}}}catch(_){a.e(_)}finally{a.f()}return!0}},{key:"write",value:function(t){this._socket.readyState===WebSocket.OPEN&&this._socket.send(t)}},{key:"processReceivedData",value:function(){try{this.processData()}catch(t){I.log(t)}}},{key:"processData",value:function(){var t=this.splitReceivedMessages();if(t&&t.length){var e;if(this._isAuthenticated&&!this._isReady)return this._pendingServerMessages||(this._pendingServerMessages=[]),void(e=this._pendingServerMessages).push.apply(e,Object(T.a)(t));this.processWrappers.apply(this,Object(T.a)(t))}}},{key:"processWrappers",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e&&e.length)for(var n=0,s=e;n<s.length;n++){var r=s[n];if(r){var a=this.getMessagesForWrapper(r);a&&a.length&&(gD.instance.getConfiguration("system.packet.log")&&console.log("IncomingMessage: [".concat(r.header,"] ").concat(a[0].constructor.name),a[0].parser),this.handleMessages.apply(this,Object(T.a)(a)))}}}},{key:"splitReceivedMessages",value:function(){return this._dataBuffer&&this._dataBuffer.byteLength?this._codec.decode(this):null}},{key:"concatArrayBuffers",value:function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer}},{key:"getMessagesForWrapper",value:function(t){if(!t)return null;var e=this._messages.getEvents(t.header);if(e&&e.length){try{var i=new e[0].parserClass;if(!i||!i.flush()||!i.parse(t))return null;var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){n.value.parser=i}}catch(a){r.e(a)}finally{r.f()}}catch(o){return I.log("Error parsing message: ".concat(o),e[0].constructor.name),null}return e}gD.instance.getConfiguration("system.packet.log")&&console.log("IncomingMessage: [".concat(t.header,"] UNREGISTERED"),t)}},{key:"handleMessages",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e=Object(T.a)(e);var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&(a.connection=this,a.callBack&&a.callBack(a))}}catch(o){r.e(o)}finally{r.f()}}},{key:"registerMessages",value:function(t){t&&this._messages.registerMessages(t)}},{key:"addMessageEvent",value:function(t){t&&this._messages&&this._messages.registerMessageEvent(t)}},{key:"removeMessageEvent",value:function(t){t&&this._messages&&this._messages.removeMessageEvent(t)}},{key:"isAuthenticated",get:function(){return this._isAuthenticated}},{key:"dataBuffer",get:function(){return this._dataBuffer},set:function(t){this._dataBuffer=t}}]),i}(b),P=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._connections=void 0,t._connections=[],t}return Object(a.a)(i,[{key:"onDispose",value:function(){if(this._connections&&this._connections.length){var t,e=Object(s.a)(this._connections.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}}}},{key:"createConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=new U(this,t);if(e)return this._connections.push(e),e}},{key:"update",value:function(t){for(var e=0;e<this._connections.length;){var i=this._connections[e];if(i.processReceivedData(),this.disposed)return;i.disposed?this._connections.splice(e,1):e++}}}]),i}(m),w=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(r.a)(this,i),(t=e.call(this))._logger=void 0,t._events=void 0,t._isLoaded=void 0,t._isLoading=void 0,t._logger=n instanceof I?n:new I(t.constructor.name),t._events=new b,t._isLoaded=!1,t._isLoading=!1,t}return Object(a.a)(i,[{key:"init",value:function(){this._isLoaded||this._isLoading||this.isDisposing||(this._isLoading=!0,this.onInit(),this._isLoaded=!0,this._isLoading=!1)}},{key:"onInit",value:function(){}},{key:"onDispose",value:function(){this._events&&this._events.dispose(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"reload",value:function(){this.dispose(),this.init()}},{key:"logger",get:function(){return this._logger}},{key:"events",get:function(){return this._events}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"isLoading",get:function(){return this._isLoading}}]),i}(m),F=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._definitions=void 0,t._pendingUrls=void 0,t._missingKeys=void 0,t._definitions=new Map,t._pendingUrls=[],t._missingKeys=[],t.onConfigurationLoaded=t.onConfigurationLoaded.bind(Object(l.a)(t)),t}return Object(a.a)(i,[{key:"onInit",value:function(){this.parseConfiguration(this.getDefaultConfig(),!0),this._pendingUrls=this.getValue("config.urls").slice(),this.loadNextConfiguration()}},{key:"loadNextConfiguration",value:function(){this._pendingUrls.length?this.loadConfigurationFromUrl(this._pendingUrls[0]):this.dispatchConfigurationEvent(p.LOADED)}},{key:"loadConfigurationFromUrl",value:function(t){var e=this;t&&""!==t?fetch(t).then((function(t){return t.json()})).then((function(i){return e.onConfigurationLoaded(i,t)})).catch((function(t){return e.onConfigurationFailed(t)})):this.dispatchConfigurationEvent(p.FAILED)}},{key:"onConfigurationLoaded",value:function(t,e){if(t){if(this.parseConfiguration(t)){var i=this._pendingUrls.indexOf(e);return i>=0&&this._pendingUrls.splice(i,1),void this.loadNextConfiguration()}this.dispatchConfigurationEvent(p.FAILED)}}},{key:"onConfigurationFailed",value:function(t){this.dispatchConfigurationEvent(p.FAILED)}},{key:"dispatchConfigurationEvent",value:function(t){this.events&&this.events.dispatchEvent(new p(t))}},{key:"parseConfiguration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;try{var i=new RegExp(/\${(.*?)}/g);for(var n in t){var s=t[n];"string"===typeof s&&(s=this.interpolate(s,i)),this._definitions.has(n)?e&&this.setValue(n,s):this.setValue(n,s)}return!0}catch(r){return this.logger.error(r.stack),!1}}},{key:"interpolate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||(e=new RegExp(/\${(.*?)}/g));var i=t.match(e);if(i&&i.length){var n,r=Object(s.a)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=this._definitions.get(this.removeInterpolateKey(a));o&&(t=t.replace(a,o))}}catch(u){r.e(u)}finally{r.f()}}return t}},{key:"removeInterpolateKey",value:function(t){return t.replace("${","").replace("}","")}},{key:"getValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._definitions.get(t);if(void 0===i){if(this._missingKeys.indexOf(t)>=0)return e;this._missingKeys.push(t),this.logger.warn("Missing configuration key: ".concat(t)),i=e}return i}},{key:"setValue",value:function(t,e){this._definitions.set(t,e)}},{key:"getDefaultConfig",value:function(){return NitroConfig}},{key:"definitions",get:function(){return this._definitions}}]),i}(w),x=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._configuration=void 0,t._communication=void 0,t._asset=void 0,function(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t,e=["\n %c %c %c Nitro ".concat(ED.UI_VERSION," - Renderer ").concat(ED.RENDERER_VERSION," %c %c %c https://discord.nitrodev.co %c %c \n\n"),"background: #ffffff; padding:5px 0;","background: #ffffff; padding:5px 0;","color: #ffffff; background: #000000; padding:5px 0;","background: #ffffff; padding:5px 0;","background: #ffffff; padding:5px 0;","background: #000000; padding:5px 0;","background: #ffffff; padding:5px 0;","background: #ffffff; padding:5px 0;"];(t=self.console).log.apply(t,e)}else self.console&&self.console.log("Nitro ".concat(ED.UI_VERSION," - Renderer ").concat(ED.RENDERER_VERSION," "))}(),t._configuration=new F,t._communication=new P,t._asset=new yD,t}return Object(a.a)(i,[{key:"onDispose",value:function(){this._asset&&(this._asset.dispose(),this._asset=null),this._communication&&(this._communication.dispose(),this._communication=null)}},{key:"configuration",get:function(){return this._configuration}},{key:"communication",get:function(){return this._communication}},{key:"asset",get:function(){return this._asset}}]),i}(m),B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(r.a)(this,t),this._elapsedTime=void 0,this._percision=void 0,this._timer=void 0,this._elapsedTime=0,this._percision=e,this._timer=null,this.start()}return Object(a.a)(t,[{key:"start",value:function(){var t=this;this._elapsedTime=0,this._timer||(this._timer=setInterval((function(){return t.increase()}),this._percision))}},{key:"stop",value:function(){this._timer&&clearTimeout(this._timer)}},{key:"increase",value:function(){this._elapsedTime+=this._percision}},{key:"getTimer",value:function(){return this._elapsedTime}}]),t}(),G=i(101),H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(r.a)(this,t),this._length=void 0,this._dictionary=void 0,this._array=void 0,this._keys=void 0,this._length=0,this._dictionary=new Map,this._array=[],this._keys=[],e){var i,a=Object(s.a)(e.entries());try{for(a.s();!(i=a.n()).done;){var o=Object(n.a)(i.value,2),u=o[0],c=o[1];this.add(u,c)}}catch(h){a.e(h)}finally{a.f()}}}return Object(a.a)(t,[{key:"length",get:function(){return this._length}},{key:"disposed",get:function(){return!this._dictionary}},{key:"dispose",value:function(){if(!this._dictionary){var t,e=Object(s.a)(this._dictionary.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;this._dictionary.delete(i)}}catch(n){e.e(n)}finally{e.f()}this._dictionary=null}this._length=0,this._array=null,this._keys=null}},{key:"reset",value:function(){var t,e=Object(s.a)(this._dictionary.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;this._dictionary.delete(i)}}catch(n){e.e(n)}finally{e.f()}this._length=0,this._array=[],this._keys=[]}},{key:"unshift",value:function(t,e){return null===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array.unshift(e),this._keys.unshift(t),this._length++,!0)}},{key:"add",value:function(t,e){return void 0===this._dictionary.get(t)&&(this._dictionary.set(t,e),this._array[this._length]=e,this._keys[this._length]=t,this._length++,!0)}},{key:"remove",value:function(t){var e=this._dictionary.get(t);if(!e)return null;var i=this._array.indexOf(e);return i>=0&&(this._array.splice(i,1),this._keys.splice(i,1),this._length--),this._dictionary.delete(t),e}},{key:"getWithIndex",value:function(t){return t<0||t>=this._length?null:this._array[t]}},{key:"getKey",value:function(t){return t<0||t>=this._length?null:this._keys[t]}},{key:"getKeys",value:function(){return this._keys.slice()}},{key:"hasKey",value:function(t){return this._keys.indexOf(t)>-1}},{key:"getValue",value:function(t){return this._dictionary.get(t)}},{key:"getValues",value:function(){return this._array.slice()}},{key:"hasValue",value:function(t){return this._array.indexOf(t)>-1}},{key:"indexOf",value:function(t){return this._array.indexOf(t)}},{key:"concatenate",value:function(t){var e,i=Object(s.a)(t._keys);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.add(n,t.getValue(n))}}catch(r){i.e(r)}finally{i.f()}}},{key:"clone",value:function(){var e=new t;return e.concatenate(this),e}}]),t}(),V=function(t){for(var e="",i=new Uint8Array(t),n=i.byteLength,s=0;s<n;s++)e+=String.fromCharCode(i[s]);return window.btoa(e)},z=i(87),Y=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(z.a),W=i(78),K=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(W.a),X=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(c.c),q=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(i(28).b),Q=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(c.j),Z=i(14),J=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Z.g),$=(Z.h,function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Z.j)),tt=(c.o,i(42)),et=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(tt.a),it=(_.a,function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(c.t)),nt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(v.a),st=i(88),rt=(st.a,h.b,i(72)),at=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(rt.c),ot=function(){function t(e){Object(r.a)(this,t),this._jsonFile=null,this._image=null,this._imageData=null,this._baseTexture=null,this.parse(e)}return Object(a.a)(t,[{key:"parse",value:function(e){for(var i=new R(e),n=i.readShort();n>0;){var s=i.readShort(),r=i.readBytes(s).toString(),a=i.readInt(),o=i.readBytes(a);if(r.endsWith(".json")){var u=Object(G.a)(o.toArrayBuffer());this._jsonFile=JSON.parse(t.TEXT_DECODER.decode(u))}else{var h=Object(G.a)(o.toArrayBuffer()),_=V(h);this._baseTexture=new c.c("data:image/png;base64,"+_)}n--}}},{key:"jsonFile",get:function(){return this._jsonFile}},{key:"baseTexture",get:function(){return this._baseTexture}}]),t}();ot.TEXT_DECODER=new TextDecoder("utf-8");var ut=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._contentType=void 0,s._contentType=n,s}return Object(a.a)(i,[{key:"contentType",get:function(){return this._contentType}}]),i}(E.a);ut.RCLE_SUCCESS="RCLE_SUCCESS",ut.RCLE_FAILURE="RCLE_FAILURE",ut.RCLE_CANCEL="RCLE_CANCEL";var ct,ht=Object(a.a)((function t(e,i,n){Object(r.a)(this,t),this.name=e,this.textures=i,this.durations=n}));!function(t){t.FLOOR="S",t.WALL="I",t.EFFECT="E",t.BADGE="B",t.ROBOT="R",t.HABBO_CLUB="H",t.PET="P"}(ct||(ct={}));var _t=Object(a.a)((function t(){Object(r.a)(this,t)}));_t.MINIMUM=-2,_t.ROOM=0,_t.FLOOR=10,_t.WALL=20,_t.UNIT=100,_t.CURSOR=200;var lt=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getTypeNumber",value:function(e){return t.AVATAR_TYPES[e]}},{key:"getTypeString",value:function(e){for(var i in t.AVATAR_TYPES)if(i&&t.AVATAR_TYPES[i]===e)return i;return null}},{key:"getRealType",value:function(e){switch(e){case t.BOT:case t.RENTABLE_BOT:return t.USER;default:return e}}}]),t}();lt.USER="user",lt.PET="pet",lt.BOT="bot",lt.RENTABLE_BOT="rentable_bot",lt.MONSTER_PLANT="monsterplant",lt.AVATAR_TYPES={user:1,pet:2,bot:3,rentable_bot:4};var dt=Object(a.a)((function t(){Object(r.a)(this,t)}));dt.OBJECT_ROOM_ID="object_room_id",dt.OBJECT_ACCURATE_Z_VALUE="object_accurate_z_value",dt.TILE_CURSOR_HEIGHT="tile_cursor_height",dt.FIGURE="figure",dt.GENDER="gender",dt.OWN_USER="own_user",dt.FIGURE_CAN_STAND_UP="figure_can_stand_up",dt.FIGURE_VERTICAL_OFFSET="figure_vertical_offset",dt.FIGURE_TALK="figure_talk",dt.FIGURE_DANCE="figure_dance",dt.FIGURE_SLEEP="figure_sleep",dt.FIGURE_BLINK="figure_blink",dt.FIGURE_EFFECT="figure_effect",dt.FIGURE_CARRY_OBJECT="figure_carry_object",dt.FIGURE_USE_OBJECT="figure_use_object",dt.FIGURE_GESTURE="figure_gesture",dt.FIGURE_POSTURE="figure_posture",dt.FIGURE_POSTURE_PARAMETER="figure_posture_parameter",dt.FIGURE_HIGHLIGHT_ENABLE="figure_highlight_enable",dt.FIGURE_HIGHLIGHT="figure_highlight",dt.FURNITURE_PURCHASER_NAME="furniture_purchaser_name",dt.FURNITURE_PURCHASER_FIGURE="furniture_purchaser_figure",dt.STD="std",dt.FIGURE_SIGN="figure_sign",dt.FIGURE_FLAT_CONTROL="figure_flat_control",dt.FIGURE_IS_TYPING="figure_is_typing",dt.FIGURE_IS_MUTED="figure_is_muted",dt.FIGURE_GAINED_EXPERIENCE="figure_gained_experience",dt.FIGURE_EXPERIENCE_TIMESTAMP="figure_experience_timestamp",dt.FIGURE_NUMBER_VALUE="figure_number_value",dt.FIGURE_IS_PLAYING_GAME="figure_is_playing_game",dt.FIGURE_GUIDE_STATUS="figure_guide_status",dt.FIGURE_EXPRESSION="figure_expression",dt.HEAD_DIRECTION="head_direction",dt.FURNITURE_CUSTOM_VARIABLES="furniture_custom_variables",dt.FURNITURE_AUTOMATIC_STATE_INDEX="furniture_automatic_state_index",dt.FURNITURE_ALWAYS_STACKABLE="furniture_always_stackable",dt.FURNITURE_DISABLE_PICKING_ANIMATION="furniture_disable_picking_animation",dt.FURNITURE_DATA_FORMAT="furniture_data_format",dt.FURNITURE_UNIQUE_SERIAL_NUMBER="furniture_unique_serial_number",dt.FURNITURE_UNIQUE_EDITION_SIZE="furniture_unique_edition_size",dt.FURNITURE_CRACKABLE_STATE="furniture_crackable_state",dt.FURNITURE_CRACKABLE_HITS="furniture_crackable_hits",dt.FURNITURE_CRACKABLE_TARGET="furniture_crackable_target",dt.FURNITURE_CREDIT_VALUE="furniture_credit_value",dt.FURNITURE_DATA="furniture_data",dt.FURNITURE_ITEMDATA="furniture_itemdata",dt.FURNITURE_COLOR="furniture_color",dt.FURNITURE_LIFT_AMOUNT="furniure_lift_amount",dt.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID="furniture_guild_customized_guild_id",dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME="furniture_guild_customized_asset_name",dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_1="furniture_guild_customized_color_1",dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_2="furniture_guild_customized_color_2",dt.FURNITURE_STATE_UPDATE_TIME="furniture_state_update_time",dt.FURNITURE_SELECTION_DISABLED="furniture_selection_disabled",dt.FURNITURE_SIZE_X="furniture_size_x",dt.FURNITURE_SIZE_Y="furniture_size_y",dt.FURNITURE_SIZE_Z="furniture_size_z",dt.FURNITURE_CENTER_X="furniture_center_x",dt.FURNITURE_CENTER_Y="furniture_center_y",dt.FURNITURE_CENTER_Z="furniture_center_z",dt.FURNITURE_ALLOWED_DIRECTIONS="furniture_allowed_directions",dt.FURNITURE_AD_URL="furniture_ad_url",dt.FURNITURE_TYPE_ID="furniture_type_id",dt.FURNITURE_EXTRAS="furniture_extras",dt.FURNITURE_EXPIRY_TIME="furniture_expiry_time",dt.FURNITURE_EXPIRTY_TIMESTAMP="furniture_expiry_timestamp",dt.FURNITURE_REAL_ROOM_OBJECT="furniture_real_room_object",dt.FURNITURE_IS_STICKIE="furniture_is_stickie",dt.FURNITURE_BRANDING_IMAGE_STATUS="furniture_branding_image_status",dt.FURNITURE_BRANDING_IMAGE_URL="furniture_branding_image_url",dt.FURNITURE_BRANDING_URL="furniture_branding_url",dt.FURNITURE_BRANDING_OFFSET_X="furniture_branding_offset_x",dt.FURNITURE_BRANDING_OFFSET_Y="furniture_branding_offset_y",dt.FURNITURE_BRANDING_OFFSET_Z="furniture_branding_offset_z",dt.FURNITURE_BRANDING_IS_ANIMATED="furniture_branding_is_animated",dt.FURNITURE_BADGE_IMAGE_STATUS="furniture_badge_image_status",dt.FURNITURE_BADGE_ASSET_NAME="furniture_badge_asset_name",dt.FURNITURE_BADGE_VISIBLE_IN_STATE="furniture_badge_visible_in_state",dt.FURNITURE_ALPHA_MULTIPLIER="furniture_alpha_multiplier",dt.FURNITURE_USAGE_POLICY="furniture_usage_policy",dt.FURNITURE_OWNER_ID="furniture_owner_id",dt.FURNITURE_OWNER_NAME="furniture_owner_name",dt.FURNITURE_ROOM_BACKGROUND_COLOR_HUE="furniture_room_background_color_hue",dt.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION="furniture_room_background_color_saturation",dt.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS="furniture_room_background_color_lightness",dt.FURNITURE_USES_PLANE_MASK="furniture_uses_plane_mask",dt.FURNITURE_PLANE_MASK_TYPE="furniture_plane_mask_type",dt.FURNITURE_IS_VARIABLE_HEIGHT="furniture_is_variable_height",dt.FURNITURE_VOTE_MAJORITY_RESULT="furniture_vote_majority_result",dt.FURNITURE_VOTE_COUNTER_COUNT="furniture_vote_counter_count",dt.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED="furniture_soundblock_relative_animation_speed",dt.FURNITURE_MANNEQUIN_NAME="furniture_mannequin_name",dt.FURNITURE_MANNEQUIN_GENDER="furniture_mannequin_gender",dt.FURNITURE_MANNEQUIN_FIGURE="furniture_mannequin_figure",dt.FURNITURE_HIGHSCORE_SCORE_TYPE="furniture_highscore_score_type",dt.FURNITURE_HIGHSCORE_CLEAR_TYPE="furniture_highscore_clear_type",dt.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT="furniture_highscore_data_entry_count",dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_="furniture_highscore_data_entry_base_users_",dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_="furniture_highscore_data_entry_base_score_",dt.FURNITURE_INTERNAL_LINK="furniture_internal_link",dt.FURNITURE_CLOTHING_BOY="furniture_clothing_boy",dt.FURNITURE_CLOTHING_GIRL="furniture_clothing_girl",dt.FURNITURE_PLANETSYSTEM_DATA="furniture_planetsystem_data",dt.FURNITURE_FIREWORKS_DATA="furniture_fireworks_data",dt.PET_PALETTE_INDEX="pet_palette_index",dt.PET_COLOR="pet_color",dt.PET_HEAD_ONLY="pet_head_only",dt.PET_CUSTOM_LAYER_IDS="pet_custom_layer_ids",dt.PET_CUSTOM_PARTS_IDS="pet_custom_part_ids",dt.PET_CUSTOM_PALETTE_IDS="pet_custom_palette_ids",dt.PET_IS_RIDING="pet_is_riding",dt.PET_TYPE="pet_type",dt.PET_ALLOWED_DIRECTIONS="pet_allowed_directions",dt.RACE="race",dt.ROOM_MAP_DATA="room_map_data",dt.ROOM_PLANE_MASK_XML="room_plane_mask_xml",dt.ROOM_FLOOR_TYPE="room_floor_type",dt.ROOM_WALL_TYPE="room_wall_type",dt.ROOM_LANDSCAPE_TYPE="room_landscape_type",dt.ROOM_WALL_THICKNESS="room_wall_thickness",dt.ROOM_FLOOR_THICKNESS="room_floor_thickness",dt.ROOM_FLOOR_HOLE_UPDATE_TIME="room_floor_hole_update_time",dt.ROOM_FLOOR_VISIBILITY="room_floor_visibility",dt.ROOM_WALL_VISIBILITY="room_wall_visibility",dt.ROOM_LANDSCAPE_VISIBILITY="room_landscape_visibility",dt.ROOM_DOOR_X="room_door_x",dt.ROOM_DOOR_Y="room_door_y",dt.ROOM_DOOR_Z="room_door_z",dt.ROOM_DOOR_DIR="room_door_dir",dt.ROOM_BACKGROUND_COLOR="room_background_color",dt.ROOM_COLORIZE_BG_ONLY="room_colorize_bg_only",dt.ROOM_RANDOM_SEED="room_random_seed",dt.ROOM_WORLD_TYPE="room_world_type",dt.ROOM_SELECTED_X="room_selected_x",dt.ROOM_SELECTED_Y="room_selected_y",dt.ROOM_SELECTED_Z="room_selected_z",dt.ROOM_SELECTED_PLANE="room_selected_plane",dt.IMAGE_QUERY_SCALE="image_query_scale",dt.FURNITURE_FRIENDFURNI_ENGRAVING="furniture_friendfurni_engraving_type",dt.SESSION_URL_PREFIX="session_url_prefix",dt.SESSION_CURRENT_USER_ID="session_current_user_id";var ft=Object(a.a)((function t(){Object(r.a)(this,t)}));ft.FURNITURE_STATIC="furniture_static",ft.FURNITURE_ANIMATED="furniture_animated",ft.FURNITURE_RESETTING_ANIMATED="furniture_resetting_animated",ft.FURNITURE_POSTER="furniture_poster",ft.FURNITURE_EXTERNAL_IMAGE="furniture_external_image",ft.FURNITURE_HABBOWHEEL="furniture_habbowheel",ft.FURNITURE_VAL_RANDOMIZER="furniture_val_randomizer",ft.FURNITURE_BOTTLE="furniture_bottle",ft.FURNITURE_PLANET_SYSTEM="furniture_planet_system",ft.FURNITURE_QUEUE_TILE="furniture_queue_tile",ft.FURNITURE_PARTY_BEAMER="furniture_party_beamer",ft.FURNITURE_CUBOID="furniture_cuboid",ft.FURNITURE_GIFT_WRAPPED="furniture_gift_wrapped",ft.FURNITURE_GIFT_WRAPPED_FIREWORKS="furniture_gift_wrapped_fireworks",ft.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",ft.FURNITURE_WATER_AREA="furniture_water_area",ft.FURNITURE_SCORE_BOARD="furniture_score_board",ft.FURNITURE_FIREWORKS="furniture_fireworks",ft.FURNITURE_BB="furniture_bb",ft.FURNITURE_ISOMETRIC_BB="furniture_isometric_bb",ft.FURNITURE_BG="furniture_bg",ft.FURNITURE_STICKIE="furniture_stickie",ft.FURNITURE_MANNEQUIN="furniture_mannequin",ft.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",ft.FURNITURE_GUILD_ISOMETRIC_BADGE="furniture_guild_isometric_badge",ft.FURNITURE_VOTE_COUNTER="furniture_vote_counter",ft.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",ft.FURNITURE_SOUNDBLOCK="furniture_soundblock",ft.FURNITURE_BADGE_DISPLAY="furniture_badge_display",ft.FURNITURE_YOUTUBE="furniture_youtube",ft.FURNITURE_BUILDER_PLACEHOLDER="furniture_builder_placeholder",ft.ROOM="room",ft.USER="user",ft.PET_ANIMATED="pet_animated",ft.BOT="bot",ft.RENTABLE_BOT="rentable_bot",ft.TILE_CURSOR="tile_cursor";var vt=function(){function t(e,i,n,s,a,o,u){Object(r.a)(this,t),this._breed=void 0,this._tag=void 0,this._id=void 0,this._primaryColor=void 0,this._secondaryColor=void 0,this._isMaster=void 0,this._layerTags=void 0,this._layerTags=[],this._primaryColor=16777215&e,this._secondaryColor=16777215&i,this._breed=n,this._tag=s>-1&&s<t.COLOR_TAGS.length?t.COLOR_TAGS[s]:"",this._id=a,this._isMaster=o,this._layerTags=u}return Object(a.a)(t,[{key:"primaryColor",get:function(){return this._primaryColor}},{key:"secondaryColor",get:function(){return this._secondaryColor}},{key:"breed",get:function(){return this._breed}},{key:"tag",get:function(){return this._tag}},{key:"id",get:function(){return this._id}},{key:"isMaster",get:function(){return this._isMaster}},{key:"layerTags",get:function(){return this._layerTags}}]),t}();vt.COLOR_TAGS=["Null","Black","White","Grey","Red","Orange","Pink","Green","Lime","Blue","Light-Blue","Dark-Blue","Yellow","Brown","Dark-Brown","Beige","Cyan","Purple","Gold"];var gt=function(){function t(){Object(r.a)(this,t),this._logger=void 0,this._stateEvents=void 0,this._sessionDataManager=void 0,this._waitingForSessionDataManager=void 0,this._iconListener=void 0,this._collections=void 0,this._gifCollections=void 0,this._images=void 0,this._events=void 0,this._activeObjects=void 0,this._activeObjectTypes=void 0,this._activeObjectTypeIds=void 0,this._objectTypeAdUrls=void 0,this._wallItems=void 0,this._wallItemTypes=void 0,this._wallItemTypeIds=void 0,this._furniRevisions=void 0,this._pets=void 0,this._petColors=void 0,this._objectAliases=void 0,this._objectOriginalNames=void 0,this._pendingContentTypes=void 0,this._dataInitialized=void 0,this._logger=new I(this.constructor.name),this._stateEvents=null,this._sessionDataManager=null,this._waitingForSessionDataManager=!1,this._iconListener=null,this._collections=new Map,this._gifCollections=new Map,this._images=new Map,this._events=new Map,this._activeObjects={},this._activeObjectTypes=new Map,this._activeObjectTypeIds=new Map,this._objectTypeAdUrls=new Map,this._wallItems={},this._wallItemTypes=new Map,this._wallItemTypeIds=new Map,this._furniRevisions=new Map,this._pets={},this._petColors=new Map,this._objectAliases=new Map,this._objectOriginalNames=new Map,this._pendingContentTypes=[],this._dataInitialized=!1}return Object(a.a)(t,[{key:"initialize",value:function(t){this._stateEvents=t,this.setFurnitureData();var e,i=Object(s.a)(gD.instance.getConfiguration("pet.types").entries());try{for(i.s();!(e=i.n()).done;){var r=Object(n.a)(e.value,2),a=r[0],o=r[1];this._pets[o]=a}}catch(u){i.e(u)}finally{i.f()}}},{key:"dispose",value:function(){}},{key:"setSessionDataManager",value:function(t){this._sessionDataManager=t,this._waitingForSessionDataManager&&(this._waitingForSessionDataManager=!1,this.setFurnitureData())}},{key:"loadFurnitureData",value:function(){this.setFurnitureData()}},{key:"setFurnitureData",value:function(){if(this._sessionDataManager){var e=this._sessionDataManager.getAllFurnitureData(this);e&&(this._sessionDataManager.removePendingFurniDataListener(this),this.processFurnitureData(e),this._stateEvents.dispatchEvent(new E.a(t.LOADER_READY)))}else this._waitingForSessionDataManager=!0}},{key:"processFurnitureData",value:function(t){if(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.id,a=n.className;n.hasIndexedColor&&(a=a+"*"+n.colorIndex);var o=n.revision,u=n.adUrl;u&&u.length>0&&this._objectTypeAdUrls.set(a,u);var c=n.className;n.type===ct.FLOOR?(this._activeObjectTypes.set(r,a),this._activeObjectTypeIds.set(a,r),this._activeObjects[c]||(this._activeObjects[c]=1)):n.type===ct.WALL&&("post.it"===c&&(a="post_it",c="post_it"),"post.it.vd"===c&&(a="post_it_vd",c="post_id_vd"),this._wallItemTypes.set(r,a),this._wallItemTypeIds.set(a,r),this._wallItems[c]||(this._wallItems[c]=1)),o>this._furniRevisions.get(c)&&(this._furniRevisions.delete(c),this._furniRevisions.set(c,o))}}}catch(h){i.e(h)}finally{i.f()}}}},{key:"getFurnitureFloorNameForTypeId",value:function(t){var e=this._activeObjectTypes.get(t);return this.removeColorIndex(e)}},{key:"getFurnitureWallNameForTypeId",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._wallItemTypes.get(t);return"poster"===i&&null!==e&&(i+=e),this.removeColorIndex(i)}},{key:"getFurnitureFloorColorIndex",value:function(t){var e=this._activeObjectTypes.get(t);return e?this.getColorIndexFromName(e):-1}},{key:"getFurnitureWallColorIndex",value:function(t){var e=this._wallItemTypes.get(t);return e?this.getColorIndexFromName(e):-1}},{key:"getColorIndexFromName",value:function(t){if(!t)return-1;var e=t.indexOf("*");return-1===e?0:parseInt(t.substr(e+1))}},{key:"removeColorIndex",value:function(t){if(!t)return null;var e=t.indexOf("*");return-1===e?t:t.substr(0,e)}},{key:"getRoomObjectAdUrl",value:function(t){var e=this._objectTypeAdUrls.get(t);return e||""}},{key:"getPetColorResult",value:function(t,e){var i=this._petColors.get(t);return i?i.get(e):null}},{key:"getPetColorResultsForTag",value:function(t,e){var i=this._petColors.get(t),n=[];if(i){var r,a=Object(s.a)(i.values());try{for(a.s();!(r=a.n()).done;){var o=r.value;o.tag===e&&n.push(o)}}catch(u){a.e(u)}finally{a.f()}}return n}},{key:"getCollection",value:function(t){if(!t)return null;var e=this._collections.get(t);if(!e){var i=gD.instance.core.asset.getCollection(t);return i?(this._collections.set(t,i),i):null}return e}},{key:"getGifCollection",value:function(t){return t&&this._gifCollections.get(t)||null}},{key:"getImage",value:function(t){if(!t)return null;var e=this._images.get(t);if(!e)return null;var i=new Image;return i.src=e.src,i}},{key:"addAssetToCollection",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=this.getCollection(t);return!!s&&s.addAsset(e,i,n,0,0,!1,!1)}},{key:"createGifCollection",value:function(t,e,i){if(!t||!e||!i)return null;var n=new ht(t,e,i);return this._gifCollections.set(t,n),n}},{key:"createCollection",value:function(t,e){if(!t||!e)return null;var i=new OD(t,e);this._collections.set(i.name,i);var n=this._pets[i.name];if(void 0!==n){var r,a=i.getPaletteNames(),o=new Map,u=Object(s.a)(a);try{for(u.s();!(r=u.n()).done;){var c=r.value,h=i.getPalette(c),_=t.palettes[c],l=h.primaryColor,d=h.secondaryColor,f=void 0!==_.breed?_.breed:0,v=void 0!==_.colorTag?_.colorTag:-1,g=void 0!==_.master&&_.master,O=void 0!==_.tags?_.tags:[];o.set(parseInt(c),new vt(l,d,f,v,c,g,O))}}catch(y){u.e(y)}finally{u.f()}this._petColors.set(n,o)}}},{key:"getPlaceholderName",value:function(e){switch(this.getCategoryForType(e)){case _t.FLOOR:return t.PLACE_HOLDER;case _t.WALL:return t.PLACE_HOLDER_WALL;default:return void 0!==this._pets[e]?t.PLACE_HOLDER_PET:t.PLACE_HOLDER_DEFAULT}}},{key:"getCategoryForType",value:function(e){return e?void 0!==this._activeObjects[e]?_t.FLOOR:void 0!==this._wallItems[e]?_t.WALL:void 0!==this._pets[e]?_t.UNIT:0===e.indexOf("poster")?_t.WALL:"room"===e?_t.ROOM:e===lt.USER||e===lt.PET||e===lt.BOT||e===lt.RENTABLE_BOT?_t.UNIT:e===t.TILE_CURSOR||e===t.SELECTION_ARROW?_t.CURSOR:_t.MINIMUM:_t.MINIMUM}},{key:"getPetNameForType",value:function(t){return gD.instance.getConfiguration("pet.types")[t]||null}},{key:"isLoaderType",value:function(t){return(t=lt.getRealType(t))!==ft.USER}},{key:"downloadImage",value:function(t,e,i){var n=this,s=null,r=[];if(e&&e.indexOf(",")>=0&&(e=(s=e).split(",")[0]),(r=s?this.getAssetUrls(s,i,!0):this.getAssetUrls(e,i,!0))&&r.length){var a=r[0],o=new Image;return o.src=a,o.onload=function(){o.onerror=null,n._images.set([e,i].join("_"),o),n._iconListener.onRoomContentLoaded(t,[e,i].join("_"),!0)},o.onerror=function(){o.onload=null,n._logger.error("Failed to download asset: "+a),n._iconListener.onRoomContentLoaded(t,[e,i].join("_"),!1)},!0}return!1}},{key:"downloadAsset",value:function(t,e){var i=this,n=this.getAssetUrls(t);if(n&&n.length&&!(this._pendingContentTypes.indexOf(t)>=0||this.getOrRemoveEventDispatcher(t))){this._pendingContentTypes.push(t),this._events.set(t,e);var r,a=new h.b,o=Object(s.a)(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;u&&u.length&&a.add({url:u,crossOrigin:"anonymous",loadType:h.c.LOAD_TYPE.XHR,xhrType:h.c.XHR_RESPONSE_TYPE.BUFFER})}}catch(l){o.e(l)}finally{o.f()}var c=n.length,_=function(n,s){if(!n)return i._logger.error("Failed to download asset: "+s),a.destroy(),void e.dispatchEvent(new ut(ut.RCLE_FAILURE,t));if(--c);else{a.destroy();var r=i._events.get(t);if(!r)return;r.dispatchEvent(new ut(ut.RCLE_SUCCESS,t))}};a.load((function(t,e){var n=function(t){var n=e[t];if(!n||n.error||!n.xhr)return _(!1,n.url),{v:void 0};if("application/octet-stream"===(n.xhr.getResponseHeader("Content-Type")||"application/octet-stream")){var s=new ot(n.data);return i.processAsset(s.baseTexture,s.jsonFile,(function(t){_(t,n.url)})),"continue"}};for(var s in e){var r=n(s);if("continue"!==r&&"object"===typeof r)return r.v}}))}}},{key:"processAsset",value:function(t,e,i){var n=this,s=e.spritesheet;if(!t||!s||!Object.keys(s).length)return this.createCollection(e,null),void i(!0);var r=function(){var r=new _.a(t,s);r.parse((function(){n.createCollection(e,r),i(!0)}))};t.valid?r():t.once("update",(function(){return r()}))}},{key:"setAssetAliasName",value:function(t,e){this._objectAliases.set(t,e),this._objectOriginalNames.set(e,t)}},{key:"getAssetAliasName",value:function(t){var e=this._objectAliases.get(t);return e||t}},{key:"getAssetOriginalName",value:function(t){var e=this._objectOriginalNames.get(t);return e||t}},{key:"getAssetUrls",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case t.PLACE_HOLDER:return[this.getAssetUrlWithGenericBase(t.PLACE_HOLDER)];case t.PLACE_HOLDER_WALL:return[this.getAssetUrlWithGenericBase(t.PLACE_HOLDER_WALL)];case t.PLACE_HOLDER_PET:return[this.getAssetUrlWithGenericBase(t.PLACE_HOLDER_PET)];case t.ROOM:return[this.getAssetUrlWithGenericBase("room")];case t.TILE_CURSOR:return[this.getAssetUrlWithGenericBase(t.TILE_CURSOR)];case t.SELECTION_ARROW:return[this.getAssetUrlWithGenericBase(t.SELECTION_ARROW)];default:var s=this.getCategoryForType(e);if(s===_t.FLOOR||s===_t.WALL){var r=this.getAssetAliasName(e),a=n?this.getAssetUrlWithFurniIconBase(r):this.getAssetUrlWithFurniBase(e);if(n){var o=i&&""!==i&&this._activeObjectTypeIds.has(r+"*"+i);a=a.replace(/%param%/gi,o?"_"+i:"")}return[a]}return s===_t.UNIT?[this.getAssetUrlWithPetBase(e)]:null}}},{key:"getAssetIconUrl",value:function(t,e){var i=null,n=[];return t&&t.indexOf(",")>=0&&(t=(i=t).split(",")[0]),(n=i?this.getAssetUrls(i,e,!0):this.getAssetUrls(t,e,!0))&&n.length?n[0]:null}},{key:"getAssetUrlWithGenericBase",value:function(t){return gD.instance.getConfiguration("generic.asset.url").replace(/%libname%/gi,t)}},{key:"getAssetUrlWithFurniBase",value:function(t){return gD.instance.getConfiguration("furni.asset.url").replace(/%libname%/gi,t)}},{key:"getAssetUrlWithFurniIconBase",value:function(t){return gD.instance.getConfiguration("furni.asset.icon.url").replace(/%libname%/gi,t)}},{key:"getAssetUrlWithPetBase",value:function(t){return gD.instance.getConfiguration("pet.asset.url").replace(/%libname%/gi,t)}},{key:"setRoomObjectRoomId",value:function(t,e){var i=t&&t.model;i&&i.setValue(dt.OBJECT_ROOM_ID,e)}},{key:"getOrRemoveEventDispatcher",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._events.get(t);return e&&this._events.delete(t),i}},{key:"setIconListener",value:function(t){this._iconListener=t}}]),t}();gt.PLACE_HOLDER="place_holder",gt.PLACE_HOLDER_WALL="place_holder_wall",gt.PLACE_HOLDER_PET="place_holder_pet",gt.PLACE_HOLDER_DEFAULT=gt.PLACE_HOLDER,gt.ROOM="room",gt.TILE_CURSOR="tile_cursor",gt.SELECTION_ARROW="selection_arrow",gt.LOADER_READY="RCL_LOADER_READY",gt.MANDATORY_LIBRARIES=[gt.PLACE_HOLDER,gt.PLACE_HOLDER_WALL,gt.PLACE_HOLDER_PET,gt.ROOM,gt.TILE_CURSOR,gt.SELECTION_ARROW];var Ot=function(){function t(){Object(r.a)(this,t),this._map=void 0,this._updateCounter=void 0,this._map=new Map,this._updateCounter=0}return Object(a.a)(t,[{key:"dispose",value:function(){this._map.clear(),this._updateCounter=0}},{key:"getValue",value:function(t){return this._map.get(t)}},{key:"setValue",value:function(t,e){this._map.has(t)&&this._map.get(t)===e||(this._map.set(t,e),this._updateCounter++)}},{key:"removeKey",value:function(t){t&&(this._map.delete(t),this._updateCounter++)}},{key:"updateCounter",get:function(){return this._updateCounter}}]),t}(),yt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._id=void 0,s._container=void 0,s._renderer=void 0,s._managers=void 0,s._updateCategories=void 0,s._model=void 0,s._id=t,s._container=n,s._renderer=null,s._managers=new Map,s._updateCategories=[],s._model=new Ot,s}return Object(a.a)(i,[{key:"onDispose",value:function(){this.removeAllManagers(),this.destroyRenderer(),this._container=null,this._model.dispose()}},{key:"setRenderer",value:function(t){if(t!==this._renderer&&(this._renderer&&this.destroyRenderer(),this._renderer=t,this._renderer&&(this._renderer.reset(),this._managers.size))){var e,i=Object(s.a)(this._managers.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.objects;if(r.length){var a,o=Object(s.a)(r.getValues());try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&this._renderer.addObject(u)}}catch(c){o.e(c)}finally{o.f()}}}}}catch(c){i.e(c)}finally{i.f()}}}},{key:"destroyRenderer",value:function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)}},{key:"getManager",value:function(t){var e=this._managers.get(t);return e||null}},{key:"getManagerOrCreate",value:function(t){var e=this.getManager(t);return e||((e=this._container.createRoomObjectManager(t))?(this._managers.set(t,e),e):null)}},{key:"getTotalObjectsForManager",value:function(t){var e=this.getManager(t);return e?e.totalObjects:0}},{key:"getRoomObject",value:function(t,e){var i=this.getManager(e);if(!i)return null;var n=i.getObject(t);return n||null}},{key:"getRoomObjectsForCategory",value:function(t){var e=this.getManager(t);return e?e.objects.getValues():[]}},{key:"getRoomObjectByIndex",value:function(t,e){var i=this.getManager(e);if(!i)return null;var n=i.getObjectByIndex(t);return n||null}},{key:"createRoomObject",value:function(t,e,i,n){var s=this.getManagerOrCreate(n);if(!s)return null;var r=s.createObject(t,e,i);return r?(this._renderer&&this._renderer.addObject(r),r):null}},{key:"createRoomObjectAndInitalize",value:function(t,e,i){return this._container?this._container.createRoomObjectAndInitalize(this._id,t,e,i):null}},{key:"removeRoomObject",value:function(t,e){var i=this.getManager(e);if(i){var n=i.getObject(t);n&&(n.tearDown(),this._renderer&&this._renderer.removeObject(n),i.removeObject(t))}}},{key:"removeAllManagers",value:function(){var t,e=Object(s.a)(this._managers.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i){if(this._renderer){var n=i.objects;if(n.length){var r,a=Object(s.a)(n.getValues());try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&this._renderer.removeObject(o)}}catch(u){a.e(u)}finally{a.f()}}}i.dispose()}}}catch(u){e.e(u)}finally{e.f()}this._managers.clear()}},{key:"addUpdateCategory",value:function(t){this._updateCategories.indexOf(t)>=0||this._updateCategories.push(t)}},{key:"removeUpdateCategory",value:function(t){var e=this._updateCategories.indexOf(t);-1!==e&&this._updateCategories.splice(e,1)}},{key:"update",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(s.a)(this._updateCategories);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this.getManager(r);if(a){var o=a.objects;if(o.length){var u,c=Object(s.a)(o.getValues());try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h){var _=h.logic;_&&_.update(t)}}}catch(l){c.e(l)}finally{c.f()}}}}}catch(l){n.e(l)}finally{n.f()}this._renderer&&this._renderer.update(t,i)}},{key:"hasUninitializedObjects",value:function(){var t,e=Object(s.a)(this._managers.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i){var n,r=Object(s.a)(i.objects.getValues());try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a&&!a.isReady)return!0}}catch(o){r.e(o)}finally{r.f()}}}}catch(o){e.e(o)}finally{e.f()}return!1}},{key:"id",get:function(){return this._id}},{key:"container",get:function(){return this._container}},{key:"renderer",get:function(){return this._renderer}},{key:"managers",get:function(){return this._managers}},{key:"model",get:function(){return this._model}}]),i}(m),Et=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._z=void 0,this._length=void 0,this._x=e,this._y=i,this._z=n,this._length=NaN}return Object(a.a)(t,[{key:"negate",value:function(){this._x=-this._x,this._y=-this._y,this._z=-this._z}},{key:"add",value:function(t){t&&(this._x+=t.x,this._y+=t.y,this._z+=t.z,this._length=NaN)}},{key:"subtract",value:function(t){t&&(this._x-=t.x,this._y-=t.y,this._z-=t.z,this._length=NaN)}},{key:"multiply",value:function(t){this._x*=t,this._y*=t,this._z*=t,this._length=NaN}},{key:"divide",value:function(t){t&&(this._x/=t,this._y/=t,this._z/=t,this._length=NaN)}},{key:"assign",value:function(t){t&&(this._x=t.x,this._y=t.y,this._z=t.z,this._length=NaN)}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._length=NaN}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._length=NaN}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._length=NaN}},{key:"length",get:function(){return isNaN(this._length)&&(this._length=Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)),this._length}},{key:"toString",value:function(){return"[Vector3d: ".concat(this._x,", ").concat(this._y,", ").concat(this._z,"]")}}],[{key:"sum",value:function(e,i){return e&&i?new t(e.x+i.x,e.y+i.y,e.z+i.z):null}},{key:"dif",value:function(e,i){return e&&i?new t(e.x-i.x,e.y-i.y,e.z-i.z):null}},{key:"product",value:function(e,i){return e?new t(e.x*i,e.y*i,e.z*i):null}},{key:"dotProduct",value:function(t,e){return t&&e?t.x*e.x+t.y*e.y+t.z*e.z:0}},{key:"crossProduct",value:function(e,i){return e&&i?new t(e.y*i.z-e.z*i.y,e.z*i.x-e.x*i.z,e.x*i.y-e.y*i.x):null}},{key:"scalarProjection",value:function(t,e){if(!t||!e)return-1;var i=e.length;return i>0?(t.x*e.x+t.y*e.y+t.z*e.z)/i:-1}},{key:"cosAngle",value:function(e,i){if(!e||!i)return 0;var n=e.length*i.length;return n?t.dotProduct(e,i)/n:0}},{key:"isEqual",value:function(t,e){return!(!t||!e)&&(t.x===e.x&&t.y===e.y&&t.z===e.z)}}]),t}(),pt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;Object(r.a)(this,i),(a=e.call(this))._id=void 0,a._instanceId=void 0,a._type=void 0,a._model=void 0,a._location=void 0,a._direction=void 0,a._states=void 0,a._visualization=void 0,a._logic=void 0,a._pendingLogicMessages=void 0,a._updateCounter=void 0,a._isReady=void 0,a._id=t,a._instanceId=i.OBJECT_COUNTER++,a._type=s,a._model=new Ot,a._location=new Et,a._direction=new Et,a._states=[],a._visualization=null,a._logic=null,a._pendingLogicMessages=[],a._updateCounter=0,a._isReady=!1;for(var o=n-1;o>=0;)a._states[o]=0,o--;return a}return Object(a.a)(i,[{key:"onDispose",value:function(){this._pendingLogicMessages=[],this.setVisualization(null),this.setLogic(null),this._model&&this._model.dispose(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"getLocation",value:function(){return this._location}},{key:"setLocation",value:function(t){t&&(t.x===this._location.x&&t.y===this._location.y&&t.z===this._location.z||(this._location.x=t.x,this._location.y=t.y,this._location.z=t.z,this._updateCounter++))}},{key:"getDirection",value:function(){return this._direction}},{key:"setDirection",value:function(t){t&&(t.x===this._direction.x&&t.y===this._direction.y&&t.z===this._direction.z||(this._direction.x=(t.x%360+360)%360,this._direction.y=(t.y%360+360)%360,this._direction.z=(t.z%360+360)%360,this._updateCounter++))}},{key:"getState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>=0&&t<this._states.length?this._states[t]:-1}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=0&&e<this._states.length&&(this._states[e]!==t&&(this._states[e]=t,this._updateCounter++),!0)}},{key:"setVisualization",value:function(t){this._visualization!==t&&(this._visualization&&this._visualization.dispose(),this._visualization=t,this._visualization&&(this._visualization.object=this))}},{key:"setLogic",value:function(t){if(this._logic!==t){var e=this._logic;if(e&&(this._logic=null,e.setObject(null)),this._logic=t,this._logic)for(this._logic.setObject(this);this._pendingLogicMessages.length;){var i=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(i)}}}},{key:"processUpdateMessage",value:function(t){if(this._logic)return this._logic.processUpdateMessage(t);this._pendingLogicMessages.push(t)}},{key:"tearDown",value:function(){this._logic&&this._logic.tearDown()}},{key:"id",get:function(){return this._id}},{key:"instanceId",get:function(){return this._instanceId}},{key:"type",get:function(){return this._type}},{key:"model",get:function(){return this._model}},{key:"visualization",get:function(){return this._visualization}},{key:"mouseHandler",get:function(){return this._logic}},{key:"logic",get:function(){return this._logic}},{key:"location",get:function(){return this._location}},{key:"direction",get:function(){return this._direction}},{key:"updateCounter",get:function(){return this._updateCounter},set:function(t){this._updateCounter=t}},{key:"isReady",get:function(){return this._isReady},set:function(t){this._isReady=t}}]),i}(m);pt.OBJECT_COUNTER=0;var mt=function(){function t(){Object(r.a)(this,t),this._objects=void 0,this._objectsPerType=void 0,this._objects=new H,this._objectsPerType=new H}return Object(a.a)(t,[{key:"dispose",value:function(){this.removeAllObjects()}},{key:"getObject",value:function(t){var e=this._objects.getValue(t);return e||null}},{key:"getObjectByIndex",value:function(t){var e=this._objects.getWithIndex(t);return e||null}},{key:"createObject",value:function(t,e,i){var n=new pt(t,e,i);return this.addObject(t,i,n)}},{key:"addObject",value:function(t,e,i){if(this._objects.getValue(t))return i.dispose(),null;this._objects.add(t,i);var n=this.getTypeMap(e);return n&&n.add(t,i),i}},{key:"removeObject",value:function(t){var e=this._objects.remove(t);if(e){var i=this.getTypeMap(e.type);i&&i.remove(e.id),e.dispose()}}},{key:"removeAllObjects",value:function(){for(var t=0;t<this._objects.length;){var e=this._objects.getWithIndex(t);e&&e.dispose(),t++}for(this._objects.reset(),t=0;t<this._objectsPerType.length;){var i=this._objectsPerType.getWithIndex(t);i&&i.dispose(),t++}this._objectsPerType.reset()}},{key:"getTypeMap",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._objectsPerType.getValue(t);return!i&&e&&(i=new H,this._objectsPerType.add(t,i)),i}},{key:"objects",get:function(){return this._objects}},{key:"totalObjects",get:function(){return this._objects.length}}]),t}(),It=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this))._state=void 0,a._rooms=void 0,a._contentLoader=void 0,a._updateCategories=void 0,a._listener=void 0,a._visualizationFactory=void 0,a._logicFactory=void 0,a._initialLoadList=void 0,a._pendingContentTypes=void 0,a._skipContentProcessing=void 0,a._disposed=void 0,a._state=i.ROOM_MANAGER_LOADED,a._rooms=new Map,a._contentLoader=null,a._updateCategories=[],a._listener=t,a._visualizationFactory=n,a._logicFactory=s,a._initialLoadList=[],a._pendingContentTypes=[],a._skipContentProcessing=!1,a._disposed=!1,a.onRoomContentLoadedEvent=a.onRoomContentLoadedEvent.bind(Object(l.a)(a)),a.events.addEventListener(ut.RCLE_SUCCESS,a.onRoomContentLoadedEvent),a.events.addEventListener(ut.RCLE_FAILURE,a.onRoomContentLoadedEvent),a.events.addEventListener(ut.RCLE_CANCEL,a.onRoomContentLoadedEvent),a}return Object(a.a)(i,[{key:"onInit",value:function(){if(!(this._state>=i.ROOM_MANAGER_INITIALIZING)&&this._contentLoader){var t,e=gt.MANDATORY_LIBRARIES,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&(-1===this._initialLoadList.indexOf(r)&&(this._contentLoader.downloadAsset(r,this.events),this._initialLoadList.push(r)))}}catch(a){n.e(a)}finally{n.f()}this._state=i.ROOM_MANAGER_INITIALIZING}}},{key:"getRoomInstance",value:function(t){var e=this._rooms.get(t);return e||null}},{key:"createRoomInstance",value:function(t){if(this._rooms.get(t))return null;var e=new yt(t,this);if(this._rooms.set(e.id,e),this._updateCategories.length){var i,n=Object(s.a)(this._updateCategories);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.addUpdateCategory(r)}}catch(a){n.e(a)}finally{n.f()}}return e}},{key:"removeRoomInstance",value:function(t){var e=this._rooms.get(t);return!!e&&(this._rooms.delete(t),e.dispose(),!0)}},{key:"createRoomObjectAndInitalize",value:function(t,e,i,n){var s=this.getRoomInstance(t);if(!s)return null;var r=i,a=i,o=i,u=null,c=!1;if(this._contentLoader.isLoaderType(i)){if(!(u=this._contentLoader.getCollection(i))&&(c=!0,this._contentLoader.downloadAsset(i,this.events),o=this._contentLoader.getPlaceholderName(i),!(u=this._contentLoader.getCollection(o))))return null;r=u.data.visualizationType,a=u.data.logicType}var h=s.createRoomObject(e,1,i,n);if(!h)return null;if(this._visualizationFactory){var _=this._visualizationFactory.getVisualization(r);if(!_)return s.removeRoomObject(e,n),null;_.asset=u;var l=this._visualizationFactory.getVisualizationData(o,r,u&&u.data||null);if(!l||!_.initialize(l))return s.removeRoomObject(e,n),null;h.setVisualization(_)}if(this._logicFactory){var d=this._logicFactory.getLogic(a);h.setLogic(d),d&&d.initialize(u&&u.data||null)}return c||(h.isReady=!0),this._contentLoader.setRoomObjectRoomId(h,t),h}},{key:"reinitializeRoomObjectsByType",value:function(t){if(t&&this._contentLoader&&this._visualizationFactory&&this._logicFactory){var e=this._contentLoader.getCollection(t);if(e){var i,r=e.data.visualizationType,a=e.data.logicType,o=this._visualizationFactory.getVisualizationData(t,r,e.data),u=Object(s.a)(this._rooms.values());try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c){var h,_=Object(s.a)(c.managers.entries());try{for(_.s();!(h=_.n()).done;){var l=Object(n.a)(h.value,2),d=l[0],f=l[1];if(f){var v,g=Object(s.a)(f.objects.getValues());try{for(g.s();!(v=g.n()).done;){var O=v.value;if(O&&O.type===t){var y=this._visualizationFactory.getVisualization(r);if(y)if(y.asset=e,o&&y.initialize(o)){O.setVisualization(y);var E=this._logicFactory.getLogic(a);O.setLogic(E),E&&E.initialize(e.data),O.isReady=!0,this._listener&&this._listener.objectInitialized(c.id,O.id,d)}else f.removeObject(O.id);else f.removeObject(O.id)}}}catch(p){g.e(p)}finally{g.f()}}}}catch(p){_.e(p)}finally{_.f()}}}}catch(p){u.e(p)}finally{u.f()}}}}},{key:"addUpdateCategory",value:function(t){if(!(this._updateCategories.indexOf(t)>=0)&&(this._updateCategories.push(t),this._rooms.size)){var e,i=Object(s.a)(this._rooms.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&n.addUpdateCategory(t)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"removeUpdateCategory",value:function(t){var e=this._updateCategories.indexOf(t);if(-1!==e&&(this._updateCategories.splice(e,1),this._rooms.size)){var i,n=Object(s.a)(this._rooms.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&r.removeUpdateCategory(t)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"setContentLoader",value:function(t){this._contentLoader&&this._contentLoader.dispose(),this._contentLoader=t}},{key:"processPendingContentTypes",value:function(t){if(this._skipContentProcessing)this._skipContentProcessing=!1;else for(;this._pendingContentTypes.length;){var e=this._pendingContentTypes.shift();this._contentLoader.getCollection(e)?(this.reinitializeRoomObjectsByType(e),this._listener&&this._listener.initalizeTemporaryObjectsByType(e,!0),this._initialLoadList.length>0&&this.removeFromInitialLoad(e)):(this._listener&&this._listener.initalizeTemporaryObjectsByType(e,!1),this.logger.log("Invalid Collection: ".concat(e)))}}},{key:"removeFromInitialLoad",value:function(t){if(t&&this._state!==i.ROOM_MANAGER_ERROR)if(this._contentLoader||(this._state=i.ROOM_MANAGER_ERROR),this._contentLoader.getCollection(t)){var e=this._initialLoadList.indexOf(t);e>=0&&this._initialLoadList.splice(e,1),this._initialLoadList.length||(this._state=i.ROOM_MANAGER_INITIALIZED,this._listener&&this._listener.onRoomEngineInitalized(!0))}else this._state=i.ROOM_MANAGER_ERROR,this._listener&&this._listener.onRoomEngineInitalized(!1)}},{key:"onRoomContentLoadedEvent",value:function(t){if(this._contentLoader){var e=t.contentType;this._pendingContentTypes.indexOf(e)>=0||this._pendingContentTypes.push(e)}}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.processPendingContentTypes(t),this._rooms.size){var i,n=Object(s.a)(this._rooms.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&r.update(t,e)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"createRoomObjectManager",value:function(t){return new mt}},{key:"rooms",get:function(){return this._rooms}},{key:"disposed",get:function(){return this._disposed}}]),i}(w);It.ROOM_MANAGER_ERROR=-1,It.ROOM_MANAGER_LOADING=0,It.ROOM_MANAGER_LOADED=1,It.ROOM_MANAGER_INITIALIZING=2,It.ROOM_MANAGER_INITIALIZED=3,It.CONTENT_PROCESSING_TIME_LIMIT_MILLISECONDS=40;var bt=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._colors=void 0,this._gender="M",this._isDisposed=void 0,this._avatarEffectType=-1}return Object(a.a)(t,[{key:"loadAvatarData",value:function(t,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(t)}},{key:"dispose",value:function(){this._data=null,this._colors=null,this._isDisposed=!0}},{key:"disposed",get:function(){return this._isDisposed}},{key:"parseFigureString",value:function(t){if(t){var e,i=Object(s.a)(t.split("."));try{for(i.s();!(e=i.n()).done;){var n=e.value.split("-");if(n.length>0){for(var r=n[0],a=parseInt(n[1]),o=[],u=2;u<n.length;)o.push(parseInt(n[u])),u++;o.length||o.push(0),this.savePartSetId(r,a,!1),this.savePartSetColourId(r,o,!1)}}}catch(c){i.e(c)}finally{i.f()}}}},{key:"hasSetType",value:function(t){return!!this._data.get(t)}},{key:"getPartSetId",value:function(t){return this.hasSetType(t)?this._data.get(t):-1}},{key:"getColourIds",value:function(t){return this._colors.get(t)?this._colors.get(t):[]}},{key:"getFigureString",value:function(){var t,e="",i=[],r=Object(s.a)(this._data.entries());try{for(r.s();!(t=r.n()).done;){var a=Object(n.a)(t.value,2),o=a[0],u=o+"-"+a[1],c=this._colors.get(o);if(c){var h,_=Object(s.a)(c);try{for(_.s();!(h=_.n()).done;){u=u+"-"+h.value}}catch(d){_.e(d)}finally{_.f()}}i.push(u)}}catch(d){r.e(d)}finally{r.f()}for(var l=0;l<i.length;)e+=i[l],l<i.length-1&&(e+="."),l++;return e}},{key:"savePartData",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(t,e,n),this.savePartSetColourId(t,i,n)}},{key:"savePartSetId",value:function(e,i){switch(e){case t.HD:case t.HAIR:case t.HAT:case t.HEAD_ACCESSORIES:case t.EYE_ACCESSORIES:case t.FACE_ACCESSORIES:case t.SHIRT:case t.JACKET:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.TROUSERS:case t.SHOES:case t.TROUSER_ACCESSORIES:i>=0?this._data.set(e,i):this._data.delete(e)}}},{key:"savePartSetColourId",value:function(e,i){switch(e){case t.HD:case t.HAIR:case t.HAT:case t.HEAD_ACCESSORIES:case t.EYE_ACCESSORIES:case t.FACE_ACCESSORIES:case t.SHIRT:case t.JACKET:case t.CHEST_ACCESSORIES:case t.CHEST_PRINTS:case t.TROUSERS:case t.SHOES:case t.TROUSER_ACCESSORIES:return void this._colors.set(e,i)}}},{key:"getFigureStringWithFace",value:function(e){for(var i="",n=[],s=0,r=[t.HD];s<r.length;s++){var a=r[s],o=this._colors.get(a);if(o){var u=this._data.get(a);a===t.HD&&(u=e);var c=a+"-"+u;if(u>=0)for(var h=0;h<o.length;)c=c+"-"+o[h],h++;n.push(c)}}for(var _=0;_<n.length;)i+=n[_],_<n.length-1&&(i+="."),_++;return i}},{key:"gender",get:function(){return this._gender}}]),t}();bt.MALE="M",bt.FEMALE="F",bt.UNISEX="U",bt.SCALE="h",bt.STD="std",bt.DEFAULT_FRAME="0",bt.HD="hd",bt.HAIR="hr",bt.HAT="ha",bt.HEAD_ACCESSORIES="he",bt.EYE_ACCESSORIES="ea",bt.FACE_ACCESSORIES="fa",bt.JACKET="cc",bt.SHIRT="ch",bt.CHEST_ACCESSORIES="ca",bt.CHEST_PRINTS="cp",bt.TROUSERS="lg",bt.SHOES="sh",bt.TROUSER_ACCESSORIES="wa",bt.BLOCKED_FX_TYPES=[28,29,30,33,34,35,36,37,38,39,40,41,42,43,68];var Tt=function(){function t(e,i){Object(r.a)(this,t),this._name=void 0,this._link=void 0,this._flipH=void 0,this._flipV=void 0,this._name=e,this._link=i.link,this._flipH=i.flipH,this._flipV=i.flipV}return Object(a.a)(t,[{key:"name",get:function(){return this._name}},{key:"link",get:function(){return this._link}},{key:"flipH",get:function(){return this._flipH}},{key:"flipV",get:function(){return this._flipV}}]),t}(),Rt=function(){function t(e,i){Object(r.a)(this,t),this._assets=void 0,this._aliases=void 0,this._avatarRenderManager=void 0,this._missingAssetNames=void 0,this._avatarRenderManager=e,this._aliases=new Map,this._assets=i,this._missingAssetNames=[]}return Object(a.a)(t,[{key:"dispose",value:function(){this._assets=null,this._aliases=null}},{key:"reset",value:function(){this.init()}},{key:"init",value:function(){var t,e=Object(s.a)(this._assets.collections.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i){var n=i.data&&i.data.aliases;if(n)for(var r in n){var a=n[r];a&&this._aliases.set(r,new Tt(r,a))}}}}catch(o){e.e(o)}finally{e.f()}}},{key:"hasAlias",value:function(t){return!!this._aliases.get(t)}},{key:"getAssetName",value:function(t){for(var e=t,i=5;this.hasAlias(e)&&i>=0;){e=this._aliases.get(e).link,i--}return e}},{key:"getAsset",value:function(t){if(!this._assets)return null;t=this.getAssetName(t);var e=this._assets.getAsset(t);return e||null}}]),t}(),kt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._library=void 0,s._library=n,s}return Object(a.a)(i,[{key:"library",get:function(){return this._library}}]),i}(E.a);kt.DOWNLOAD_COMPLETE="ARLE_DOWNLOAD_COMPLETE";var At=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this))._state=void 0,o._libraryName=void 0,o._revision=void 0,o._downloadUrl=void 0,o._assets=void 0,o._state=i.NOT_LOADED,o._libraryName=t,o._revision=n,o._downloadUrl=a,o._assets=s,o._downloadUrl=o._downloadUrl.replace(/%libname%/gi,o._libraryName),o._downloadUrl=o._downloadUrl.replace(/%revision%/gi,o._revision),o._assets.getCollection(o._libraryName)&&(o._state=i.LOADED),o}return Object(a.a)(i,[{key:"downloadAsset",value:function(){var t=this;if(this._assets&&this._state!==i.LOADING&&this._state!==i.LOADED){if(this._assets.getCollection(this._libraryName))return this._state=i.LOADED,void this.dispatchEvent(new kt(kt.DOWNLOAD_COMPLETE,this));this._state=i.LOADING,this._assets.downloadAsset(this._downloadUrl,(function(e){e&&(t._state=i.LOADED,t.dispatchEvent(new kt(kt.DOWNLOAD_COMPLETE,t)))}))}}},{key:"libraryName",get:function(){return this._libraryName}},{key:"isLoaded",get:function(){return this._state===i.LOADED}}]),i}(b);At.DOWNLOAD_COMPLETE="AADL_DOWNLOAD_COMPLETE",At.NOT_LOADED=0,At.LOADING=1,At.LOADED=2;var St=Object(a.a)((function t(){Object(r.a)(this,t)}));St.AVATAR_RENDER_READY="AVATAR_RENDER_READY";var jt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._assets=void 0,s._structure=void 0,s._missingMandatoryLibs=void 0,s._figureMap=void 0,s._pendingContainers=void 0,s._figureListeners=void 0,s._incompleteFigures=void 0,s._pendingDownloadQueue=void 0,s._currentDownloads=void 0,s._libraryNames=void 0,s._isReady=void 0,s._assets=t,s._structure=n,s._missingMandatoryLibs=gD.instance.getConfiguration("avatar.mandatory.libraries"),s._figureMap=new Map,s._pendingContainers=[],s._figureListeners=new Map,s._incompleteFigures=new Map,s._pendingDownloadQueue=[],s._currentDownloads=[],s._libraryNames=[],s._isReady=!1,s.onLibraryLoaded=s.onLibraryLoaded.bind(Object(l.a)(s)),s.onAvatarRenderReady=s.onAvatarRenderReady.bind(Object(l.a)(s)),s.loadFigureMap(),s._structure.renderManager.events.addEventListener(St.AVATAR_RENDER_READY,s.onAvatarRenderReady),s}return Object(a.a)(i,[{key:"loadFigureMap",value:function(){var t=this,e=new XMLHttpRequest;try{e.open("GET",gD.instance.getConfiguration("avatar.figuremap.url")),e.send(),e.onloadend=function(n){if(e.responseText){var s=JSON.parse(e.responseText);t.processFigureMap(s.libraries),t.processMissingLibraries(),t._isReady=!0,t.dispatchEvent(new E.a(i.DOWNLOADER_READY))}},e.onerror=function(t){throw new Error("invalid_avatar_figure_map")}}catch(n){I.log(n)}}},{key:"processFigureMap",value:function(t){if(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.id,a=n.revision||"";if(!(this._libraryNames.indexOf(r)>=0)){this._libraryNames.push(r);var o=new At(r,a,this._assets,gD.instance.getConfiguration("avatar.asset.url"));o.addEventListener(kt.DOWNLOAD_COMPLETE,this.onLibraryLoaded);var u,c=Object(s.a)(n.parts);try{for(c.s();!(u=c.n()).done;){var h=u.value,_=h.id,l=h.type+":"+_,d=this._figureMap.get(l);d||(d=[]),d.push(o),this._figureMap.set(l,d)}}catch(f){c.e(f)}finally{c.f()}}}}}catch(f){i.e(f)}finally{i.f()}}}},{key:"onAvatarRenderReady",value:function(t){if(t){var e,i=Object(s.a)(this._pendingContainers);try{for(i.s();!(e=i.n()).done;){var r=Object(n.a)(e.value,2),a=r[0],o=r[1];this.downloadAvatarFigure(a,o)}}catch(u){i.e(u)}finally{i.f()}this._pendingContainers=[]}}},{key:"onLibraryLoaded",value:function(t){if(t&&t.library){var e,r=[],a=Object(s.a)(this._incompleteFigures.entries());try{for(a.s();!(e=a.n()).done;){var o,u=Object(n.a)(e.value,2),c=u[0],h=u[1],_=!0,l=Object(s.a)(h);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(d&&!d.isLoaded){_=!1;break}}}catch(T){l.e(T)}finally{l.f()}if(_){r.push(c);var f=this._figureListeners.get(c);if(f){var v,g=Object(s.a)(f);try{for(g.s();!(v=g.n()).done;){var O=v.value;O&&!O.disposed&&O.resetFigure(c)}}catch(T){g.e(T)}finally{g.f()}}this._figureListeners.delete(c),this.dispatchEvent(new E.a(i.LIBRARY_LOADED))}}}catch(T){a.e(T)}finally{a.f()}for(var y=0,p=r;y<p.length;y++){var m=p[y];m&&this._incompleteFigures.delete(m)}for(var I=0;I<this._currentDownloads.length;){var b=this._currentDownloads[I];b&&b.libraryName===t.library.libraryName&&this._currentDownloads.splice(I,1),I++}}}},{key:"processMissingLibraries",value:function(){var t,e=this._missingMandatoryLibs.slice(),i=Object(s.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n){var r=this._figureMap.get(n);if(r){var a,o=Object(s.a)(r);try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&this.downloadLibrary(u)}}catch(c){o.e(c)}finally{o.f()}}}}}catch(c){i.e(c)}finally{i.f()}}},{key:"isAvatarFigureContainerReady",value:function(t){return!(!this._isReady||!this._structure.renderManager.isReady)&&!this.getAvatarFigurePendingLibraries(t).length}},{key:"getAvatarFigurePendingLibraries",value:function(t){var e=[];if(!t||!this._structure)return e;var i=this._structure.figureData;if(!i)return e;var n,r=t.getPartTypeIds(),a=Object(s.a)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=i.getSetType(o);if(u){var c=u.getPartSet(t.getPartSetId(o));if(c){var h,_=Object(s.a)(c.parts);try{for(_.s();!(h=_.n()).done;){var l=h.value;if(l){var d=l.type+":"+l.id,f=this._figureMap.get(d);if(void 0!==f){var v,g=Object(s.a)(f);try{for(g.s();!(v=g.n()).done;){var O=v.value;O&&!O.isLoaded&&(e.indexOf(O)>=0||e.push(O))}}catch(y){g.e(y)}finally{g.f()}}}}}catch(y){_.e(y)}finally{_.f()}}}}}catch(y){a.e(y)}finally{a.f()}return e}},{key:"downloadAvatarFigure",value:function(t,e){if(this._isReady&&this._structure.renderManager.isReady){var i=t.getFigureString(),n=this.getAvatarFigurePendingLibraries(t);if(n&&n.length){if(e&&!e.disposed){var r=this._figureListeners.get(i);r||(r=[],this._figureListeners.set(i,r)),r.push(e)}this._incompleteFigures.set(i,n);var a,o=Object(s.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&this.downloadLibrary(u)}}catch(c){o.e(c)}finally{o.f()}}else e&&!e.disposed&&e.resetFigure(i)}else this._pendingContainers.push([t,e])}},{key:"downloadLibrary",value:function(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}},{key:"processDownloadQueue",value:function(){for(;this._pendingDownloadQueue.length;){this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}}]),i}(b);jt.DOWNLOADER_READY="AADM_DOWNLOADER_READY",jt.LIBRARY_LOADED="AADM_LIBRARY_LOADED",jt.MAX_DOWNLOADS=2;var Nt=function(){function t(e){Object(r.a)(this,t),this._parts=void 0,this._parts=new Map,this.parseFigure(e)}return Object(a.a)(t,[{key:"getPartTypeIds",value:function(){return this.partSets().keys()}},{key:"hasPartType",value:function(t){return!!this.partSets().get(t)}},{key:"getPartSetId",value:function(t){var e=this.partSets().get(t);return e?e.get("setid"):0}},{key:"getPartColorIds",value:function(t){var e=this.partSets().get(t);return e?e.get("colorids"):null}},{key:"updatePart",value:function(t,e,i){var n=new Map;n.set("type",t),n.set("setid",e),n.set("colorids",i);var s=this.partSets();s.delete(t),s.set(t,n)}},{key:"removePart",value:function(t){this.partSets().delete(t)}},{key:"getFigureString",value:function(){var t,e=[],i=Object(s.a)(this.partSets().keys());try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n){var r=[];r.push(n),r.push(this.getPartSetId(n)),r=r.concat(this.getPartColorIds(n)),e.push(r.join("-"))}}}catch(a){i.e(a)}finally{i.f()}return e.join(".")}},{key:"partSets",value:function(){return this._parts||(this._parts=new Map),this._parts}},{key:"parseFigure",value:function(t){t||(t="");var e,i=Object(s.a)(t.split("."));try{for(i.s();!(e=i.n()).done;){var n=e.value.split("-");if(n.length>=2){for(var r=n[0],a=parseInt(n[1]),o=[],u=2;u<n.length;)o.push(parseInt(n[u])),u++;this.updatePart(r,a,o)}}}catch(c){i.e(c)}finally{i.f()}}}]),t}(),Dt=i(89),Mt="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Ct="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D lut;\nuniform int channel;\n\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec4 adjusted = currentColor;\n\n    if(currentColor.a > 0.0)\n    {\n        if(channel == 0)\n        {\n            adjusted = texture2D(lut, vec2((currentColor.r * 255.0 + 0.5) / 256.0, 0.5));\n        } else if(channel == 1) {\n            adjusted = texture2D(lut, vec2((currentColor.g * 255.0 + 0.5) / 256.0, 0.5));\n        } else if(channel == 2) {\n            adjusted = texture2D(lut, vec2((currentColor.b * 255.0 + 0.5) / 256.0, 0.5));\n        } else if(channel == 3) {\n            adjusted = texture2D(lut, vec2((currentColor.a * 255.0 + 0.5) / 256.0, 0.5));\n        }\n    }\n\n    gl_FragColor = vec4(adjusted.r, adjusted.g, adjusted.b, currentColor.a);\n}",Lt=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.CHANNEL_RED;Object(r.a)(this,i),(n=e.call(this,Mt,Ct))._lut=void 0,n._channel=void 0,n._channel=s;var a=[];return a=n.getLutForPalette(t),n._lut=X.fromBuffer(Uint8Array.from(a),a.length/4,1,{mipmap:0,scaleMode:0}),n.uniforms.lut=n._lut,n.uniforms.channel=n._channel,n}return Object(a.a)(i,[{key:"getLutForPalette",value:function(t){for(var e=[],n=0;n<t.length;n++)e[4*n+i.CHANNEL_RED]=t[n]>>16&255,e[4*n+i.CHANNEL_GREEN]=t[n]>>8&255,e[4*n+i.CHANNEL_BLUE]=255&t[n],e[4*n+i.CHANNEL_ALPHA]=t[n]>>24&255;return e}},{key:"lut",get:function(){return this._lut}},{key:"channel",get:function(){return this._channel}}]),i}(Q);Lt.CHANNEL_RED=0,Lt.CHANNEL_GREEN=1,Lt.CHANNEL_BLUE=2,Lt.CHANNEL_ALPHA=3;var Ut=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"generateTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.p.NEAREST,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return t?this.getRenderer().generateTexture(t,{scaleMode:i,resolution:n,region:e}):null}},{key:"generateTextureFromImage",value:function(t){return t?c.t.from(t):null}},{key:"generateImage",value:function(t){return t?this.getExtractor().image(t):null}},{key:"generateImageUrl",value:function(t){return t?this.getExtractor().base64(t):null}},{key:"generateCanvas",value:function(t){return t?this.getExtractor().canvas(t):null}},{key:"getRenderer",value:function(){return gD.instance.renderer}},{key:"getExtractor",value:function(){return this.getRenderer().plugins.extract}}]),t}(),Pt=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this._actionType=void 0,this._actionParameter=void 0,this._definition=void 0,this._startFrame=void 0,this._overridingAction=void 0,this._actionType=e||"",this._actionParameter=i||"",this._definition=null,this._startFrame=n||0,this._overridingAction=null}return Object(a.a)(t,[{key:"dispose",value:function(){this._actionType=null,this._actionParameter=null,this._definition=null}},{key:"id",get:function(){return this._definition?this._definition.id+"_"+this._actionParameter:""}},{key:"actionType",get:function(){return this._actionType}},{key:"actionParameter",get:function(){return this._actionParameter},set:function(t){this._actionParameter=t}},{key:"definition",get:function(){return this._definition},set:function(t){this._definition=t}},{key:"startFrame",get:function(){return this._startFrame}},{key:"overridingAction",get:function(){return this._overridingAction},set:function(t){this._overridingAction=t}}]),t}(),wt=Object(a.a)((function t(){Object(r.a)(this,t),this.objectId=void 0,this.x=void 0,this.y=void 0,this.z=void 0,this.name=void 0,this.blendMode=void 0,this.flipH=void 0,this.skew=void 0,this.frame=void 0,this.color=void 0,this.alpha=void 0,this.width=void 0,this.height=void 0,this.type=void 0,this.posture=void 0})),Ft=function(){function t(e,i,n){if(Object(r.a)(this,t),this._id=void 0,this._action=void 0,this._animationFrame=void 0,this._dx=void 0,this._dy=void 0,this._dz=void 0,this._directionOffset=void 0,this._type=void 0,this._base=void 0,this._items=void 0,this._id=e.id,this._animationFrame=e.frame||0,this._dx=e.dx||0,this._dy=e.dy||0,this._dz=e.dz||0,this._directionOffset=e.dd||0,this._type=i,this._base=e.base||"",this._items=new Map,e.items){var a,o=Object(s.a)(e.items);try{for(o.s();!(a=o.n()).done;){var u=a.value;this._items.set(u.id,u.base)}}catch(c){o.e(c)}finally{o.f()}}""!==this._base&&this.baseAsInt().toString(),n&&(this._action=new Pt(n.state,this.base),this._action.definition=n)}return Object(a.a)(t,[{key:"items",get:function(){return this._items}},{key:"baseAsInt",value:function(){for(var t=0,e=0;e<this._base.length;)t+=this._base.charCodeAt(e),e++;return t}},{key:"id",get:function(){return this._id}},{key:"animationFrame",get:function(){return this._animationFrame}},{key:"dx",get:function(){return this._dx}},{key:"dy",get:function(){return this._dy}},{key:"dz",get:function(){return this._dz}},{key:"dd",get:function(){return this._directionOffset}},{key:"type",get:function(){return this._type}},{key:"base",get:function(){return this._base}},{key:"action",get:function(){return this._action}}]),t}();Ft.BODYPART="bodypart",Ft.FX="fx";var xt=function(){function t(e,i,n){Object(r.a)(this,t),this._image=void 0,this._regPoint=void 0,this._offset=void 0,this._isCacheable=void 0,this._image=e,this._regPoint=i,this._offset=new Z.g(0,0),this._regPoint=i,this._isCacheable=n,this.cleanPoints()}return Object(a.a)(t,[{key:"dispose",value:function(){this._image&&this._image.destroy({children:!0}),this._image=null,this._regPoint=null,this._offset=null}},{key:"cleanPoints",value:function(){}},{key:"setRegPoint",value:function(t){this._regPoint=t,this.cleanPoints()}},{key:"image",get:function(){return this._image},set:function(t){this._image&&this._image!==t&&this._image.destroy({children:!0}),this._image=t}},{key:"regPoint",get:function(){var t=this._regPoint.clone();return t.x+=this._offset.x,t.y+=this._offset.y,t}},{key:"offset",set:function(t){this._offset=t,this.cleanPoints()}},{key:"isCacheable",get:function(){return this._isCacheable}}]),t}(),Bt=Object(a.a)((function t(){Object(r.a)(this,t)}));Bt.DIRECTION_TO_ANGLE=[45,90,135,180,225,270,315,0],Bt.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1],Bt.MIN_DIRECTION=0,Bt.MAX_DIRECTION=7;var Gt=Object(a.a)((function t(){Object(r.a)(this,t)}));Gt.BODY="bd",Gt.SHOES="sh",Gt.LEGS="lg",Gt.CHEST="ch",Gt.WAIST_ACCESSORY="wa",Gt.CHEST_ACCESSORY="ca",Gt.HEAD="hd",Gt.HAIR="hr",Gt.FACE_ACCESSORY="fa",Gt.EYE_ACCESSORY="ea",Gt.HEAD_ACCESSORY="ha",Gt.HEAD_ACCESSORY_EXTRA="he",Gt.COAT_CHEST="cc",Gt.CHEST_PRINT="cp",Gt.LEFT_HAND_ITEM="li",Gt.LEFT_HAND="lh",Gt.LEFT_SLEEVE="ls",Gt.RIGHT_HAND="rh",Gt.RIGHT_SLEEVE="rs",Gt.FACE="fc",Gt.EYES="ey",Gt.HAIR_BIG="hrb",Gt.RIGHT_HAND_ITEM="ri",Gt.LEFT_COAT_SLEEVE="lc",Gt.RIGHT_COAT_SLEEVE="rc",Gt.FIGURE_SETS=[Gt.SHOES,Gt.LEGS,Gt.CHEST,Gt.WAIST_ACCESSORY,Gt.CHEST_ACCESSORY,Gt.HEAD,Gt.HAIR,Gt.FACE_ACCESSORY,Gt.EYE_ACCESSORY,Gt.HEAD_ACCESSORY,Gt.HEAD_ACCESSORY_EXTRA,Gt.COAT_CHEST,Gt.CHEST_PRINT];var Ht=Object(a.a)((function t(){Object(r.a)(this,t)}));Ht.LARGE="h",Ht.SMALL="sh";var Vt=Object(a.a)((function t(){Object(r.a)(this,t)}));Vt.VERTICAL="vertical",Vt.SITTING="sitting",Vt.HORIZONTAL="horizontal",Vt.SWIM="swim",Vt.SNOWWARS_HORIZONTAL="swhorizontal";var zt=function(){function t(){Object(r.a)(this,t),this._cache=void 0,this._lastAccessTime=void 0,this._cache=new Map,this.setLastAccessTime(gD.instance.time)}return Object(a.a)(t,[{key:"dispose",value:function(){if(this.debugInfo("[dispose]"),this._cache){var t,e=Object(s.a)(this._cache.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._cache.clear()}}},{key:"getDirectionCache",value:function(t){var e=this._cache.get(t.toString());return e||null}},{key:"updateDirectionCache",value:function(t,e){this._cache.set(t.toString(),e)}},{key:"setLastAccessTime",value:function(t){this._lastAccessTime=t}},{key:"getLastAccessTime",value:function(){return this._lastAccessTime}},{key:"debugInfo",value:function(t){}}]),t}(),Yt=function(){function t(){Object(r.a)(this,t),this._cache=void 0,this._currentAction=void 0,this._currentDirection=void 0,this._disposed=void 0,this._cache=new Map}return Object(a.a)(t,[{key:"setAction",value:function(t,e){this._currentAction||(this._currentAction=t);var i=this.getActionCache(this._currentAction);i&&i.setLastAccessTime(e),this._currentAction=t}},{key:"dispose",value:function(){if(!this._disposed){if(!this._cache)return;this.disposeActions(0,2147483647),this._cache.clear(),this._cache=null,this._disposed=!0}}},{key:"disposeActions",value:function(t,e){if(this._cache&&!this._disposed){var i,r=Object(s.a)(this._cache.entries());try{for(r.s();!(i=r.n()).done;){var a=Object(n.a)(i.value,2),o=a[0],u=a[1];if(u)e-u.getLastAccessTime()>=t&&(u.dispose(),this._cache.delete(o))}}catch(c){r.e(c)}finally{r.f()}}}},{key:"getAction",value:function(){return this._currentAction}},{key:"setDirection",value:function(t){this._currentDirection=t}},{key:"getDirection",value:function(){return this._currentDirection}},{key:"getActionCache",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._currentAction?(t||(t=this._currentAction),t.overridingAction?this._cache.get(t.overridingAction):this._cache.get(t.id)):null}},{key:"updateActionCache",value:function(t,e){t.overridingAction?this._cache.set(t.overridingAction,e):this._cache.set(t.id,e)}},{key:"debugInfo",value:function(t){}}]),t}(),Wt=function(){function t(e){Object(r.a)(this,t),this._partList=void 0,this._images=void 0,this._partList=e,this._images=new Map}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._images.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._images=null}},{key:"getPartList",value:function(){return this._partList}},{key:"getImageContainer",value:function(t){var e=this._images.get(this.getCacheKey(t));return e||null}},{key:"updateImageContainer",value:function(t,e){var i=this.getCacheKey(e),n=this._images.get(i);n&&n.dispose(),this._images.set(i,t)}},{key:"getCacheKey",value:function(t){var e,i="",n=Object(s.a)(this._partList);try{for(n.s();!(e=n.n()).done;){i+=e.value.getCacheableKey(t)+"/"}}catch(r){n.e(r)}finally{n.f()}return i}},{key:"debugInfo",value:function(t){}}]),t}(),Kt=function(){function t(e,i,n,s,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(r.a)(this,t),this._texture=void 0,this._container=void 0,this._rect=void 0,this._regPoint=void 0,this._flipH=void 0,this._colorTransform=void 0,this._texture=e,this._container=o,this._rect=i,this._regPoint=n,this._flipH=s,this._colorTransform=a,s&&(this._regPoint.x=-this._regPoint.x+i.width)}return Object(a.a)(t,[{key:"dispose",value:function(){this._texture=null,this._regPoint=null,this._colorTransform=null}},{key:"texture",get:function(){return this._texture}},{key:"container",get:function(){return this._container}},{key:"rect",get:function(){return this._rect}},{key:"regPoint",get:function(){return this._regPoint}},{key:"flipH",get:function(){return this._flipH}},{key:"colorTransform",get:function(){return this._colorTransform}},{key:"offsetRect",get:function(){return new Z.j(-this._regPoint.x,-this._regPoint.y,this._rect.width,this._rect.height)}}]),t}(),Xt=function(){function t(e,i,n,s){Object(r.a)(this,t),this._structure=void 0,this._avatar=void 0,this._assets=void 0,this._scale=void 0,this._cache=void 0,this._canvas=void 0,this._disposed=void 0,this._geometryType=void 0,this._unionImages=void 0,this._matrix=void 0,this._serverRenderData=void 0,this._structure=e,this._avatar=i,this._assets=n,this._scale=s,this._cache=new Map,this._canvas=null,this._disposed=!1,this._unionImages=[],this._matrix=new Z.d,this._serverRenderData=[]}return Object(a.a)(t,[{key:"dispose",value:function(){if(!this._disposed){if(this._structure=null,this._avatar=null,this._assets=null,this._canvas=null,this._disposed=!0,this._cache){var t,e=Object(s.a)(this._cache.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(o){e.e(o)}finally{e.f()}this._cache=null}if(this._unionImages){var n,r=Object(s.a)(this._unionImages);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&a.dispose()}}catch(o){r.e(o)}finally{r.f()}this._unionImages=[]}}}},{key:"disposeInactiveActions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,e=gD.instance.time;if(this._cache){var i,n=Object(s.a)(this._cache.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&r.disposeActions(t,e)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"resetBodyPartCache",value:function(t){if(this._cache){var e,i=Object(s.a)(this._cache.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&n.setAction(t,0)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"setDirection",value:function(t,e){var i=this._structure.getBodyPartsUnordered(t);if(i){var n,r=Object(s.a)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=this.getBodyPartCache(a);o&&o.setDirection(e)}}catch(u){r.e(u)}finally{r.f()}}}},{key:"setAction",value:function(t,e){var i,n=this._structure.getActiveBodyPartIds(t,this._avatar),r=Object(s.a)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=this.getBodyPartCache(a);o&&o.setAction(t,e)}}catch(u){r.e(u)}finally{r.f()}}},{key:"setGeometryType",value:function(t){if(this._geometryType!==t){if(this._geometryType===Vt.SITTING&&t===Vt.VERTICAL||this._geometryType===Vt.VERTICAL&&t===Vt.SITTING||this._geometryType===Vt.SNOWWARS_HORIZONTAL&&(t=Vt.SNOWWARS_HORIZONTAL))return this._geometryType=t,void(this._canvas=null);this.disposeInactiveActions(0),this._geometryType=t,this._canvas=null}}},{key:"getImageContainer",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getBodyPartCache(t);n||(n=new Yt,this._cache.set(t,n));var s=n.getDirection(),r=n.getAction(),a=e;r.definition.startFromFrameZero&&(a-=r.startFrame);var o=r,u=[],c=new Map,h=new Z.g;if(r&&r.definition&&r.definition.isAnimation){var _=s,l=this._structure.getAnimation(r.definition.state+"."+r.actionParameter),d=e-r.startFrame;if(l){var f=l.getLayerData(d,t,r.overridingAction);f&&(_=s+f.dd,f.dd<0?_<0?_=8+_:_>7&&(_=8-_):_<0?_+=8:_>7&&(_-=8),this._scale===Ht.LARGE?(h.x=f.dx,h.y=f.dy):(h.x=f.dx/2,h.y=f.dy/2),a=f.animationFrame,f.action&&(r=f.action),f.type===Ft.BODYPART?(null!=f.action&&(o=f.action),s=_):f.type===Ft.FX&&(s=_),c=f.items),u=l.removeData}}var v=n.getActionCache(o);v&&!i||(v=new zt,n.updateActionCache(o,v));var g=v.getDirectionCache(s);if(!g||i){var O=this._structure.getParts(t,this._avatar.getFigure(),o,this._geometryType,s,u,this._avatar,c);g=new Wt(O),v.updateDirectionCache(s,g)}var y=g.getImageContainer(a);if(!y||i){var E=g.getPartList();if(!(y=this.renderBodyPart(s,E,a,r,i))||i)return null;y.isCacheable&&g.updateImageContainer(y,a)}var p=this._structure.getFrameBodyPartOffset(o,s,a,t);return h.x+=p.x,h.y+=p.y,y.offset=h,y}},{key:"getServerRenderData",value:function(){return this._serverRenderData=[],this._serverRenderData}},{key:"getBodyPartCache",value:function(t){var e=this._cache.get(t);return e||(e=new Yt,this._cache.set(t,e)),e}},{key:"renderBodyPart",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e||!e.length)return null;if(!this._canvas&&(this._canvas=this._structure.getCanvas(this._scale,this._geometryType),!this._canvas))return null;for(var r=Bt.DIRECTION_IS_FLIPPED[t]||!1,a=n.definition.assetPartDefinition,o=!0,u=e.length-1;u>=0;){var c=e[u],h=16777215;if((7!=t||"fc"!==c.partType&&"ey"!==c.partType)&&("ri"!==c.partType||c.partId)){var _=c.partId,l=c.getFrameDefinition(i),d=c.partType,f=0;l?(f=l.number,l.assetPartDefinition&&""!==l.assetPartDefinition&&(a=l.assetPartDefinition)):f=c.getFrameIndex(i);var v=t,g=!1;r&&("wav"===a&&(d===Gt.LEFT_HAND||d===Gt.LEFT_SLEEVE||d===Gt.LEFT_COAT_SLEEVE)||"drk"===a&&(d===Gt.RIGHT_HAND||d===Gt.RIGHT_SLEEVE||d===Gt.RIGHT_COAT_SLEEVE)||"blw"===a&&d===Gt.RIGHT_HAND||"sig"===a&&d===Gt.LEFT_HAND||"respect"===a&&d===Gt.LEFT_HAND||d===Gt.RIGHT_HAND_ITEM||d===Gt.LEFT_HAND_ITEM||d===Gt.CHEST_PRINT?g=!0:(4===t?v=2:5===t?v=1:6===t&&(v=0),c.flippedPartType!==d&&(d=c.flippedPartType)));var O=this._scale+"_"+a+"_"+d+"_"+_+"_"+v+"_"+f,y=this._assets.getAsset(O);if(y||(O=this._scale+"_std_"+d+"_"+_+"_"+v+"_0",y=this._assets.getAsset(O)),y){var E=y.texture;if(E&&E.valid&&E.baseTexture){c.isColorable&&c.color&&(h=c.color.rgb);var p=new Z.g(-y.x,-y.y);if(g&&(p.x=p.x+(this._scale===Ht.LARGE?65:31)),s){var m=new wt;m.name=this._assets.getAssetName(O),m.x=-p.x-33,m.y=-p.y,m.z=-1e-4*this._serverRenderData.length,m.width=y.rectangle.width,m.height=y.rectangle.height,m.flipH=g,"lay"===a&&(m.x=m.x+53),r&&(m.flipH=!m.flipH,m.flipH?m.x=-m.x-E.width:m.x=m.x+65),c.isColorable&&(m.color="".concat(h)),this._serverRenderData.push(m)}this._unionImages.push(new Kt(E,y.rectangle,p,g,h))}else o=!1}}u--}if(!this._unionImages.length)return null;var I=this.createUnionImage(this._unionImages,r),b=this._scale===Ht.LARGE?this._canvas.height-16:this._canvas.height-8,T=new Z.g(-I.regPoint.x,b-I.regPoint.y);r&&"lay"!==a&&(T.x=T.x+(this._scale===Ht.LARGE?67:31));for(var R=this._unionImages.length-1;R>=0;){var k=this._unionImages.pop();k&&k.dispose(),R--}return new xt(I.container,T,o)}},{key:"convertColorToHex",value:function(t){var e=(255*t).toString(16);return e.length<2&&(e="0"+e),e}},{key:"createUnionImage",value:function(t,e){var i,n=new Z.j,r=Object(s.a)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;a&&n.enlarge(a.offsetRect)}}catch(E){r.e(E)}finally{r.f()}var o=new Z.g(-n.x,-n.y),u=new q,h=new et(c.t.EMPTY);h.width=n.width,h.height=n.height,u.addChild(h);var _,l=Object(s.a)(t);try{for(l.s();!(_=l.n()).done;){var d=_.value;if(d){var f=d.texture,v=d.colorTransform,g=!(e&&d.flipH)&&(e||d.flipH),O=o.clone();O.x-=d.regPoint.x,O.y-=d.regPoint.y,e&&(O.x=u.width-(O.x+d.rect.width)),g?(this._matrix.a=-1,this._matrix.tx=d.rect.x+d.rect.width+O.x,this._matrix.ty=O.y-d.rect.y):(this._matrix.a=1,this._matrix.tx=O.x-d.rect.x,this._matrix.ty=O.y-d.rect.y);var y=new et(f);y.tint=v,y.transform.setFromMatrix(this._matrix),u.addChild(y)}}}catch(E){l.e(E)}finally{l.f()}return new Kt(null,u.getLocalBounds(),o,e,null,u)}}]),t}();Xt.DEFAULT_MAX_CACHE_STORAGE_TIME_MS=6e4;var qt=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getExpressionTimeout",value:function(t){switch(t=parseInt(t)){case 1:return 5e3;case 2:return 1400;case 3:case 4:case 7:return 2e3;case 5:default:return 0;case 6:return 700;case 8:case 9:case 10:return 1500}}},{key:"getExpressionId",value:function(e){return t.EXPRESSION_MAP.indexOf(e)}},{key:"getExpression",value:function(e){return e>t.EXPRESSION_MAP.length?null:t.EXPRESSION_MAP[e]}},{key:"getGestureId",value:function(e){return t.GESTURE_MAP.indexOf(e)}},{key:"getGesture",value:function(e){return e>t.GESTURE_MAP.length?null:t.GESTURE_MAP[e]}},{key:"idToAvatarActionState",value:function(t){return"Lay"===t?"lay":"Float"===t?"float":"Swim"===t?"swim":"Sit"===t?"sit":"Respect"===t?"respect":"Wave"===t?"wave":"Idle"===t?"idle":"Dance"===t?"dance":"UseItem"===t?"usei":"CarryItem"===t?"cri":"Talk"===t?"talk":"Sleep"===t?"Sleep":"Move"===t?"mv":"std"}}]),t}();qt.CARRY_OBJECT="cri",qt.DANCE="dance",qt.EFFECT="fx",qt.EXPRESSION="expression",qt.EXPRESSION_BLOW_A_KISS="blow",qt.EXPRESSION_CRY="cry",qt.EXPRESSION_IDLE="idle",qt.EXPRESSION_LAUGH="laugh",qt.EXPRESSION_RESPECT="respect",qt.EXPRESSION_RIDE_JUMP="ridejump",qt.EXPRESSION_SNOWBOARD_OLLIE="sbollie",qt.EXPRESSION_SNOWBORD_360="sb360",qt.EXPRESSION_WAVE="wave",qt.GESTURE="gest",qt.GESTURE_AGGRAVATED="agr",qt.GESTURE_SAD="sad",qt.GESTURE_SMILE="sml",qt.GESTURE_SURPRISED="srp",qt.GUIDE_STATUS="guide",qt.MUTED="muted",qt.PET_GESTURE_BLINK="eyb",qt.PET_GESTURE_CRAZY="crz",qt.PET_GESTURE_JOY="joy",qt.PET_GESTURE_MISERABLE="mis",qt.PET_GESTURE_PUZZLED="puz",qt.PET_GESTURE_TONGUE="tng",qt.PLAYING_GAME="playing_game",qt.POSTURE="posture",qt.POSTURE_FLOAT="float",qt.POSTURE_LAY="lay",qt.POSTURE_SIT="sit",qt.POSTURE_STAND="std",qt.POSTURE_SWIM="swim",qt.POSTURE_WALK="mv",qt.SIGN="sign",qt.SLEEP="sleep",qt.SNOWWAR_DIE_BACK="swdieback",qt.SNOWWAR_DIE_FRONT="swdiefront",qt.SNOWWAR_PICK="swpick",qt.SNOWWAR_RUN="swrun",qt.SNOWWAR_THROW="swthrow",qt.TALK="talk",qt.BLINK="blink",qt.TYPING="typing",qt.USE_OBJECT="usei",qt.VOTE="vote",qt.GESTURE_MAP=["",qt.GESTURE_SMILE,qt.GESTURE_AGGRAVATED,qt.GESTURE_SURPRISED,qt.GESTURE_SAD,qt.PET_GESTURE_JOY,qt.PET_GESTURE_CRAZY,qt.PET_GESTURE_TONGUE,qt.PET_GESTURE_BLINK,qt.PET_GESTURE_MISERABLE,qt.PET_GESTURE_PUZZLED],qt.EXPRESSION_MAP=["",qt.EXPRESSION_WAVE,qt.EXPRESSION_BLOW_A_KISS,qt.EXPRESSION_LAUGH,qt.EXPRESSION_CRY,qt.EXPRESSION_IDLE,qt.DANCE,qt.EXPRESSION_RESPECT,qt.EXPRESSION_SNOWBOARD_OLLIE,qt.EXPRESSION_SNOWBORD_360,qt.EXPRESSION_RIDE_JUMP];var Qt=Object(a.a)((function t(){Object(r.a)(this,t)}));Qt.FULL="full",Qt.HEAD="head",Qt.BODY="body";var Zt=function(){function t(e,i,n,s,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(r.a)(this,t),this._structure=void 0,this._scale=void 0,this._mainDirection=void 0,this._headDirection=void 0,this._mainAction=void 0,this._disposed=void 0,this._canvasOffsets=void 0,this._assets=void 0,this._cache=void 0,this._figure=void 0,this._avatarSpriteData=void 0,this._actions=void 0,this._image=void 0,this._reusableTexture=void 0,this._defaultAction=void 0,this._frameCounter=0,this._directionOffset=0,this._changes=void 0,this._sprites=void 0,this._isAnimating=!1,this._animationHasResetOnToggle=!1,this._actionsSorted=!1,this._sortedActions=void 0,this._lastActionsString=void 0,this._currentActionsString=void 0,this._fullImageCache=void 0,this._fullImageCacheSize=5,this._isCachedImage=!1,this._useFullImageCache=!1,this._effectIdInUse=-1,this._animationFrameCount=void 0,this._cachedBodyParts=void 0,this._cachedBodyPartsDirection=-1,this._cachedBodyPartsGeometryType=null,this._cachedBodyPartsAvatarSet=null,this._effectManager=void 0,this._effectListener=void 0,this._canvasOffsets=[],this._actions=[],this._cachedBodyParts=[],this._changes=!0,this._disposed=!1,this._effectManager=a,this._structure=e,this._assets=i,this._scale=s,this._effectListener=o,null==this._scale&&(this._scale=Ht.LARGE),null==n&&(n=new Nt("hr-893-45.hd-180-2.ch-210-66.lg-270-82.sh-300-91.wa-2007-.ri-1-")),this._figure=n,this._cache=new Xt(this._structure,this,this._assets,this._scale),this.setDirection(t.DEFAULT_AVATAR_SET,t.DEFAULT_DIRECTION),this._actions=[],this._defaultAction=new Pt(qt.POSTURE_STAND),this._defaultAction.definition=this._structure.getActionDefinition(t.DEFAULT_ACTION),this.resetActions(),this._fullImageCache=new H,this._animationFrameCount=0}return Object(a.a)(t,[{key:"getServerRenderData",value:function(){return this.getAvatarPartsForCamera(Qt.FULL),this._cache.getServerRenderData()}},{key:"dispose",value:function(){if(!this._disposed){if(this._structure=null,this._assets=null,this._mainAction=null,this._figure=null,this._avatarSpriteData=null,this._actions=null,this._image&&(this._image.destroy(),this._image=null),this._cache&&(this._cache.dispose(),this._cache=null),this._fullImageCache){var t,e=Object(s.a)(this._fullImageCache.getValues());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.destroy()}}catch(n){e.e(n)}finally{e.f()}this._fullImageCache=null}this._image=null,this._canvasOffsets=null,this._disposed=!0}}},{key:"disposed",get:function(){return this._disposed}},{key:"getFigure",value:function(){return this._figure}},{key:"getScale",value:function(){return this._scale}},{key:"getPartColor",value:function(t){return this._structure.getPartColor(this._figure,t)}},{key:"setDirection",value:function(t,e){(e+=this._directionOffset)<Bt.MIN_DIRECTION&&(e=Bt.MAX_DIRECTION+(e+1)),e>Bt.MAX_DIRECTION&&(e-=Bt.MAX_DIRECTION+1),this._structure.isMainAvatarSet(t)&&(this._mainDirection=e),t!==Qt.HEAD&&t!==Qt.FULL||(t===Qt.HEAD&&this.isHeadTurnPreventedByAction()&&(e=this._mainDirection),this._headDirection=e),this._cache.setDirection(t,e),this._changes=!0}},{key:"setDirectionAngle",value:function(t,e){this.setDirection(t,Math.floor(e/45))}},{key:"getSprites",value:function(){return this._sprites}},{key:"getCanvasOffsets",value:function(){return this._canvasOffsets}},{key:"getLayerData",value:function(t){return this._structure.getBodyPartData(t.animation.id,this._frameCounter,t.id)}},{key:"updateAnimationByFrames",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._frameCounter+=t,this._changes=!0}},{key:"resetAnimationFrameCounter",value:function(){this._frameCounter=0,this._changes=!0}},{key:"getFullImageCacheKey",value:function(){if(!this._useFullImageCache)return null;if(1==this._sortedActions.length&&this._mainDirection==this._headDirection)return this._mainDirection+this._currentActionsString+this._frameCounter%4;if(2==this._sortedActions.length){var t,e=Object(s.a)(this._sortedActions);try{for(e.s();!(t=e.n()).done;){var i=t.value;if("fx"==i.actionType&&("33"==i.actionParameter||"34"==i.actionParameter||"35"==i.actionParameter||"36"==i.actionParameter))return this._mainDirection+this._currentActionsString+0;if("fx"==i.actionType&&("38"==i.actionParameter||"39"==i.actionParameter))return this._mainDirection+"_"+this._headDirection+this._currentActionsString+this._frameCounter%11;if("dance"===i.actionType&&("1"===i.actionParameter||"2"===i.actionParameter||"3"===i.actionParameter||"4"===i.actionParameter)){var n=this._frameCounter%8;return"3"===i.actionParameter&&(n=this._frameCounter%10),"4"===i.actionParameter&&(n=this._frameCounter%16),this._mainDirection+i.actionType+i.actionParameter+n}}}catch(r){e.e(r)}finally{e.f()}}return null}},{key:"getBodyParts",value:function(t,e,i){return i==this._cachedBodyPartsDirection&&e==this._cachedBodyPartsGeometryType&&t==this._cachedBodyPartsAvatarSet||(this._cachedBodyPartsDirection=i,this._cachedBodyPartsGeometryType=e,this._cachedBodyPartsAvatarSet=t,this._cachedBodyParts=this._structure.getBodyParts(t,e,i)),this._cachedBodyParts}},{key:"getAvatarPartsForCamera",value:function(t){var e;if(null!=this._mainAction&&null!=this._structure.getCanvas(this._scale,this._mainAction.definition.geometryType))for(var i=this.getBodyParts(t,this._mainAction.definition.geometryType,this._mainDirection),n=i.length-1;n>=0;){e=i[n];this._cache.getImageContainer(e,this._frameCounter,!0);n--}}},{key:"getImage",value:function(t,e){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!this._changes)return this._image;if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();var n=this._structure.getCanvas(this._scale,this._mainAction.definition.geometryType);if(!n)return null;!this._image||this._image.width===n.width&&this._image.height===n.height||(this._reusableTexture&&(this._reusableTexture.destroy(!0),this._reusableTexture=null),this._image=null,this._isCachedImage=!1);var s=this.getBodyParts(t,this._mainAction.definition.geometryType,this._mainDirection);this._image=null;for(var r=new q,a=!0,o=s.length-1;o>=0;){var u=s[o],c=this._cache.getImageContainer(u,this._frameCounter);if(c){var h=c.image;if(!h)return r.destroy({children:!0}),null;a=a&&c.isCacheable;var _=c.regPoint.clone();if(_){_.x+=n.offset.x,_.y+=n.offset.y,_.x+=n.regPoint.x,_.y+=n.regPoint.y;var l=new q;l.addChild(h),l&&(l.position.set(_.x,_.y),r.addChild(l))}}o--}return this._avatarSpriteData&&(r.filters||(r.filters=[]),this._avatarSpriteData.colorTransform&&r.filters.push(this._avatarSpriteData.colorTransform),this._avatarSpriteData.paletteIsGrayscale&&(this.convertToGrayscale(r),r.filters.push(new Lt(this._avatarSpriteData.reds,Lt.CHANNEL_RED)))),i?(this._reusableTexture?gD.instance.renderer.render(r,{renderTexture:this._reusableTexture,clear:!0}):this._reusableTexture=Ut.generateTexture(r,new Z.j(0,0,n.width,n.height)),this._reusableTexture?(this._image=this._reusableTexture,this._changes=!1,this._image):null):Ut.generateTexture(r,new Z.j(0,0,n.width,n.height))}},{key:"applyPalette",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=Ut.generateCanvas(t),r=s.getContext("2d"),a=r.getImageData(0,0,s.width,s.height),o=a.data,u=0;u<o.length;u+=4){if(256==e.length){var h=e[o[u]];void 0===h&&(h=0),o[u]=h>>16&255,o[u+1]=h>>8&255,o[u+2]=255&h}if(256==i.length){var _=i[o[u+1]];void 0===_&&(_=0),o[u]=_>>16&255,o[u+1]=_>>8&255,o[u+2]=255&_}if(256==n.length){var l=i[o[u+2]];void 0===l&&(l=0),o[u]=l>>16&255,o[u+1]=l>>8&255,o[u+2]=255&l}}r.putImageData(a,0,0);var d=new tt.a(c.t.from(s));return gD.instance.renderer.render(d,{renderTexture:t,clear:!0}),t}},{key:"getImageAsSprite",value:function(t){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();var e=this._structure.getCanvas(this._scale,this._mainAction.definition.geometryType);if(!e)return null;var i=this.getBodyParts(t,this._mainAction.definition.geometryType,this._mainDirection),n=new et,s=new et(c.t.EMPTY);s.width=e.width,s.height=e.height,n.addChild(s);for(var r=i.length-1;r>=0;){var a=i[r],o=this._cache.getImageContainer(a,this._frameCounter);if(o){var u=o.image;if(!u)return n.destroy({children:!0}),null;var h=o.regPoint.clone();if(h){h.x+=e.offset.x,h.y+=e.offset.y,h.x+=e.regPoint.x,h.y+=e.regPoint.y;var _=new q;_.addChild(u),_.position.set(h.x,h.y),n.addChild(_)}}r--}return n}},{key:"getCroppedImage",value:function(t){if(!this._mainAction)return null;this._actionsSorted||this.endActionAppends();var e=this._structure.getCanvas(this._scale,this._mainAction.definition.geometryType);if(!e)return null;for(var i=this.getBodyParts(t,this._mainAction.definition.geometryType,this._mainDirection),n=new q,s=i.length-1;s>=0;){var r=i[s],a=this._cache.getImageContainer(r,this._frameCounter);if(a){var o=a.image;if(!o)return n.destroy({children:!0}),null;var u=a.regPoint.clone();if(u){u.x+=e.offset.x,u.y+=e.offset.y,u.x+=e.regPoint.x,u.y+=e.regPoint.y;var c=new q;c.addChild(o),c&&(c.position.set(u.x,u.y),n.addChild(c))}}s--}var h=Ut.generateTexture(n,new Z.j(0,0,e.width,e.height)),_=Ut.generateImage(h);return _||null}},{key:"getFullImage",value:function(t){var e=this._fullImageCache.getValue(t);return e?(e.valid||(this._fullImageCache.remove(t),e.destroy(!0)),e):null}},{key:"cacheFullImage",value:function(t,e){var i=this._fullImageCache.getValue(t);if(i&&(this._fullImageCache.remove(t),i.destroy(!0)),this._fullImageCache.length===this._fullImageCacheSize){var n=this._fullImageCache.getKey(0);if(n)this._fullImageCache.remove(n).destroy(!0)}this._fullImageCache.add(t,e)}},{key:"getAsset",value:function(t){return this._assets.getAsset(t)}},{key:"getDirection",value:function(){return this._mainDirection}},{key:"initActionAppends",value:function(){this._actions=[],this._actionsSorted=!1,this._currentActionsString="",this._useFullImageCache=!1}},{key:"endActionAppends",value:function(){if(this.sortActions()){var t,e=Object(s.a)(this._sortedActions);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.actionType===qt.EFFECT&&(this._effectManager.isAvatarEffectReady(parseInt(i.actionParameter))||this._effectManager.downloadAvatarEffect(parseInt(i.actionParameter),this))}}catch(n){e.e(n)}finally{e.f()}this.resetActions(),this.setActionsToParts()}}},{key:"appendAction",value:function(t){var e,i="";this._actionsSorted=!1;for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];switch(s&&s.length>0&&(i=null===(e=s[0])||void 0===e?void 0:e.toString()),t){case qt.POSTURE:switch(i){case qt.POSTURE_LAY:0==this._mainDirection?this.setDirection(Qt.FULL,4):this.setDirection(Qt.FULL,2);case qt.POSTURE_WALK:this._useFullImageCache=!0;case qt.POSTURE_STAND:this._useFullImageCache=!0;case qt.POSTURE_SWIM:case qt.POSTURE_FLOAT:case qt.POSTURE_SIT:case qt.SNOWWAR_RUN:case qt.SNOWWAR_DIE_FRONT:case qt.SNOWWAR_DIE_BACK:case qt.SNOWWAR_PICK:case qt.SNOWWAR_THROW:this.addActionData(i)}break;case qt.GESTURE:switch(i){case qt.GESTURE_AGGRAVATED:case qt.GESTURE_SAD:case qt.GESTURE_SMILE:case qt.GESTURE_SURPRISED:this.addActionData(i)}break;case qt.EFFECT:"33"!==i&&"34"!==i&&"35"!==i&&"36"!==i&&"38"!==i&&"39"!==i||(this._useFullImageCache=!0);case qt.DANCE:case qt.TALK:case qt.EXPRESSION_WAVE:case qt.SLEEP:case qt.SIGN:case qt.EXPRESSION_RESPECT:case qt.EXPRESSION_BLOW_A_KISS:case qt.EXPRESSION_LAUGH:case qt.EXPRESSION_CRY:case qt.EXPRESSION_IDLE:case qt.EXPRESSION_SNOWBOARD_OLLIE:case qt.EXPRESSION_SNOWBORD_360:case qt.EXPRESSION_RIDE_JUMP:this.addActionData(t,i);break;case qt.CARRY_OBJECT:case qt.USE_OBJECT:var a=this._structure.getActionDefinitionWithState(t);a&&(i=a.getParameterValue(i)),this.addActionData(t,i)}return!0}},{key:"addActionData",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._actions||(this._actions=[]);for(var n=0;n<this._actions.length;){if((e=this._actions[n]).actionType==t&&e.actionParameter==i)return;n++}this._actions.push(new Pt(t,i,this._frameCounter))}},{key:"isAnimating",value:function(){return this._isAnimating||this._animationFrameCount>1}},{key:"resetActions",value:function(){return this._animationHasResetOnToggle=!1,this._isAnimating=!1,this._sprites=[],this._avatarSpriteData=null,this._directionOffset=0,this._structure.removeDynamicItems(this),this._mainAction=this._defaultAction,this._mainAction.definition=this._defaultAction.definition,this.resetBodyPartCache(this._defaultAction),!0}},{key:"isHeadTurnPreventedByAction",value:function(){var t,e;if(null==this._sortedActions)return!1;var i,n=Object(s.a)(this._sortedActions);try{for(n.s();!(i=n.n()).done;){var r=i.value;null!=(t=this._structure.getActionDefinitionWithState(r.actionType))&&t.getPreventHeadTurn(r.actionParameter)&&(e=!0)}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"sortActions",value:function(){var t,e,i;if(this._currentActionsString="",this._sortedActions=this._structure.sortActions(this._actions),this._animationFrameCount=this._structure.maxFrames(this._sortedActions),this._sortedActions){this._canvasOffsets=this._structure.getCanvasOffsets(this._sortedActions,this._scale,this._mainDirection);var n,r=Object(s.a)(this._sortedActions);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(this._currentActionsString=this._currentActionsString+(a.actionType+a.actionParameter),a.actionType===qt.EFFECT){var o=parseInt(a.actionParameter);this._effectIdInUse!==o&&(t=!0),this._effectIdInUse=o,e=!0}}}catch(u){r.e(u)}finally{r.f()}e||(this._effectIdInUse>-1&&(t=!0),this._effectIdInUse=-1),t&&this._cache.disposeInactiveActions(0),this._lastActionsString!=this._currentActionsString&&(i=!0,this._lastActionsString=this._currentActionsString)}else this._canvasOffsets=[0,0,0],""!==this._lastActionsString&&(i=!0,this._lastActionsString="");return this._actionsSorted=!0,i}},{key:"setActionsToParts",value:function(){if(null!=!this._sortedActions){var t,e=gD.instance.time,i=[],n=Object(s.a)(this._sortedActions);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(r.actionType)}}catch(y){n.e(y)}finally{n.f()}var a,o=Object(s.a)(this._sortedActions);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u&&u.definition&&u.definition.isAnimation){var c=this._structure.getAnimation(u.definition.state+"."+u.actionParameter);if(c&&c.hasOverriddenActions()){var h=c.overriddenActionNames();if(h){var _,l=Object(s.a)(h);try{for(l.s();!(_=l.n()).done;){var d=_.value;i.indexOf(d)>=0&&(u.overridingAction=c.overridingAction(d))}}catch(y){l.e(y)}finally{l.f()}}}c&&c.resetOnToggle&&(this._animationHasResetOnToggle=!0)}}}catch(y){o.e(y)}finally{o.f()}var f,v=Object(s.a)(this._sortedActions);try{for(v.s();!(f=v.n()).done;){var g=f.value;if(g&&g.definition&&(g.definition.isAnimation&&""===g.actionParameter&&(g.actionParameter="1"),this.setActionToParts(g,e),g.definition.isAnimation)){this._isAnimating=g.definition.isAnimated(g.actionParameter);var O=this._structure.getAnimation(g.definition.state+"."+g.actionParameter);O&&(this._sprites=this._sprites.concat(O.spriteData),O.hasDirectionData()&&(this._directionOffset=O.directionData.offset),O.hasAvatarData()&&(this._avatarSpriteData=O.avatarData))}}}catch(y){v.e(y)}finally{v.f()}}}},{key:"setActionToParts",value:function(t,e){null!=t&&null!=t.definition&&""!=t.definition.assetPartDefinition&&(t.definition.isMain&&(this._mainAction=t,this._cache.setGeometryType(t.definition.geometryType)),this._cache.setAction(t,e),this._changes=!0)}},{key:"resetBodyPartCache",value:function(t){t&&""!==t.definition.assetPartDefinition&&(t.definition.isMain&&(this._mainAction=t,this._cache.setGeometryType(t.definition.geometryType)),this._cache.resetBodyPartCache(t),this._changes=!0)}},{key:"avatarSpriteData",get:function(){return this._avatarSpriteData}},{key:"convertToGrayscale",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CHANNELS_EQUAL",n=.33,s=.33,r=.33;switch(i){case t.CHANNELS_UNIQUE:n=.3,s=.59,r=.11;break;case t.CHANNELS_RED:n=1,s=0,r=0;break;case t.CHANNELS_GREEN:n=0,s=1,r=0;break;case t.CHANNELS_BLUE:n=0,s=0,r=1;break;case t.CHANNELS_DESATURATED:n=.3086,s=.6094,r=.082}var a=new Dt.a;return a.matrix=[n,s,r,0,0,n,s,r,0,0,n,s,r,0,0,0,0,0,1,0],e.filters.push(a),e}},{key:"errorThis",value:function(t){}},{key:"logThis",value:function(t){}},{key:"isPlaceholder",value:function(){return!1}},{key:"forceActionUpdate",value:function(){this._lastActionsString=""}},{key:"animationHasResetOnToggle",get:function(){return this._animationHasResetOnToggle}},{key:"mainAction",get:function(){return this._mainAction.actionType}},{key:"resetEffect",value:function(t){t===this._effectIdInUse&&(this.resetActions(),this.setActionsToParts(),this._animationHasResetOnToggle=!0,this._changes=!0,this._effectListener&&this._effectListener.resetEffect(t))}}]),t}();Zt.CHANNELS_EQUAL="CHANNELS_EQUAL",Zt.CHANNELS_UNIQUE="CHANNELS_UNIQUE",Zt.CHANNELS_RED="CHANNELS_RED",Zt.CHANNELS_GREEN="CHANNELS_GREEN",Zt.CHANNELS_BLUE="CHANNELS_BLUE",Zt.CHANNELS_DESATURATED="CHANNELS_DESATURATED",Zt.DEFAULT_ACTION="Default",Zt.DEFAULT_DIRECTION=2,Zt.DEFAULT_AVATAR_SET=Qt.FULL;var Jt=function(){function t(e){Object(r.a)(this,t),this._id=void 0,this._value=void 0,this._prevents=void 0,this._preventHeadTurn=void 0,this._isAnimated=void 0,this._id=parseInt(e.id),this._value=parseInt(e.id),this._prevents=e.prevents||[],this._preventHeadTurn=e.preventHeadTurn||!1,this._isAnimated=!0,void 0!==e.animated&&!1===e.animated&&(this._isAnimated=!1)}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"value",get:function(){return this._value}},{key:"prevents",get:function(){return this._prevents}},{key:"preventHeadTurn",get:function(){return this._preventHeadTurn}},{key:"isAnimated",get:function(){return this._isAnimated}}]),t}(),$t=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._state=void 0,this._precedence=void 0,this._activePartSet=void 0,this._assetPartDefinition=void 0,this._lay=void 0,this._geometryType=void 0,this._isMain=void 0,this._isDefault=void 0,this._isAnimation=void 0,this._startFromFrameZero=void 0,this._prevents=void 0,this._preventHeadTurn=void 0,this._types=void 0,this._params=void 0,this._defaultParameterValue=void 0,this._canvasOffsets=void 0,this._id=e.id,this._state=e.state,this._precedence=e.precedence,this._activePartSet=e.activePartSet,this._assetPartDefinition=e.assetPartDefinition,this._lay=e.lay,this._geometryType=e.geometryType,this._isMain=e.main||!1,this._isDefault=e.isDefault||!1,this._isAnimation=e.animation||!1,this._startFromFrameZero=e.startFromFrameZero||!1,this._prevents=e.prevents||[],this._preventHeadTurn=e.preventHeadTurn||!1,this._types=new Map,this._params=new Map,this._defaultParameterValue="",this._canvasOffsets=null,e.params&&e.params.length>0){var i,n=Object(s.a)(e.params);try{for(n.s();!(i=n.n()).done;){var a=i.value;a&&("default"===a.id?this._defaultParameterValue=a.value:this._params.set(a.id,a.value))}}catch(_){n.e(_)}finally{n.f()}}if(e.types&&e.types.length>0){var o,u=Object(s.a)(e.types);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c){var h=new Jt(c);this._types.set(h.id,h)}}}catch(_){u.e(_)}finally{u.f()}}}return Object(a.a)(t,[{key:"setOffsets",value:function(t,e,i){this._canvasOffsets||(this._canvasOffsets=new Map);var n=this._canvasOffsets.get(t);n||(n=new Map,this._canvasOffsets.set(t,n)),n.set(e,i)}},{key:"getOffsets",value:function(t,e){if(!this._canvasOffsets)return null;var i=this._canvasOffsets.get(t);return i?i.get(e):null}},{key:"getType",value:function(t){if(!t)return null;var e=this._types.get(parseInt(t));return e||null}},{key:"getParameterValue",value:function(t){if(!t)return"";var e=this._params.get(t);return e||this._defaultParameterValue}},{key:"getPrevents",value:function(t){return this._prevents.concat(this.getTypePrevents(t))}},{key:"getTypePrevents",value:function(t){if(!t)return[];var e=this._types.get(parseInt(t));return e?e.prevents:[]}},{key:"getPreventHeadTurn",value:function(t){if(!t)return this._preventHeadTurn;var e=this.getType(t);return e?e.preventHeadTurn:this._preventHeadTurn}},{key:"isAnimated",value:function(t){if(!t)return!0;var e=this.getType(t);return!e||e.isAnimated}},{key:"id",get:function(){return this._id}},{key:"state",get:function(){return this._state}},{key:"precedence",get:function(){return this._precedence}},{key:"activePartSet",get:function(){return this._activePartSet}},{key:"assetPartDefinition",get:function(){return this._assetPartDefinition}},{key:"lay",get:function(){return this._lay}},{key:"geometryType",get:function(){return this._geometryType}},{key:"isMain",get:function(){return this._isMain}},{key:"isDefault",get:function(){return this._isDefault}},{key:"isAnimation",get:function(){return this._isAnimation}},{key:"startFromFrameZero",get:function(){return this._startFromFrameZero}},{key:"prevents",get:function(){return this._prevents}},{key:"preventHeadTurn",get:function(){return this._preventHeadTurn}},{key:"params",get:function(){return this._params}}]),t}(),te=function(){function t(e,i){Object(r.a)(this,t),this._assets=void 0,this._actions=void 0,this._defaultAction=void 0,this._assets=e,this._actions=new Map,this._defaultAction=null,this.updateActions(i)}return Object(a.a)(t,[{key:"updateActions",value:function(t){if(t){var e,i=Object(s.a)(t.actions);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.state){var r=new $t(n);this._actions.set(r.state,r)}}}catch(a){i.e(a)}finally{i.f()}t.actionOffsets&&this.parseActionOffsets(t.actionOffsets)}}},{key:"parseActionOffsets",value:function(t){if(t&&t.length){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=this._actions.get(n.action);if(r){var a,o=Object(s.a)(n.offsets);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=u.size||"",h=u.direction;if(""!==c&&void 0!==h){var _=u.x||0,l=u.y||0,d=u.z||0;r.setOffsets(c,h,[_,l,d])}}}catch(f){o.e(f)}finally{o.f()}}}}catch(f){i.e(f)}finally{i.f()}}}},{key:"getActionDefinition",value:function(t){if(!t)return null;var e,i=Object(s.a)(this._actions.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.id===t)return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"getActionDefinitionWithState",value:function(t){var e=this._actions.get(t);return e||null}},{key:"getDefaultAction",value:function(){if(this._defaultAction)return this._defaultAction;var t,e=Object(s.a)(this._actions.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i&&i.isDefault)return this._defaultAction=i,i}}catch(n){e.e(n)}finally{e.f()}return null}},{key:"getCanvasOffsets",value:function(t,e,i){var n,r=[],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var u=this._actions.get(o.actionType),c=u&&u.getOffsets(e,i);c&&(r=c)}}}catch(h){a.e(h)}finally{a.f()}return r}},{key:"sortActions",value:function(t){if(!t)return null;t=this.filterActions(t);var e,i=[],n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r){var a=this._actions.get(r.actionType);a&&(r.definition=a,i.push(r))}}}catch(o){n.e(o)}finally{n.f()}return i.sort(this.sortByPrecedence),i}},{key:"filterActions",value:function(t){var e,i=[],n=[],r=Object(s.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a){var o=this._actions.get(a.actionType);o&&(i=i.concat(o.getPrevents(a.actionParameter)))}}}catch(l){r.e(l)}finally{r.f()}var u,c=Object(s.a)(t);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h){var _=h.actionType;"fx"===h.actionType&&(_=_+"."+h.actionParameter),i.indexOf(_)>=0||n.push(h)}}}catch(l){c.e(l)}finally{c.f()}return n}},{key:"sortByPrecedence",value:function(t,e){if(!t||!e)return 0;var i=t.definition.precedence,n=e.definition.precedence;return i<n?1:i>n?-1:0}}]),t}(),ee=function(){function t(e){Object(r.a)(this,t),this._id=void 0,this._align=void 0,this._base=void 0,this._ink=void 0,this._blend=void 0,this._id=e.id||"",this._align=e.align||"",this._base=e.base||"",this._ink=e.ink||0,this._blend=0;var i=e.blend;i&&i.length>0&&(this._blend=parseInt(i),this._blend>1&&(this._blend=this._blend/100))}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"align",get:function(){return this._align}},{key:"base",get:function(){return this._base}},{key:"ink",get:function(){return this._ink}},{key:"blend",get:function(){return this._blend}},{key:"isBlended",get:function(){return 1!==this._blend}}]),t}(),ie=function(){function t(e){Object(r.a)(this,t),this._ink=void 0,this._foreGround=void 0,this._backGround=void 0,this._colorTransform=void 0,this._rgb=void 0,this._r=void 0,this._g=void 0,this._b=void 0,this._redMultiplier=void 0,this._greenMultiplier=void 0,this._blueMultiplier=void 0,this._alphaMultiplier=void 0,this._colorMap=void 0,this._paletteIsGrayscale=void 0,this._ink=e.ink;var i=e.foreground,n=e.background;i=i.replace("#",""),n=n.replace("#",""),this._foreGround=parseInt(i,16),this._backGround=parseInt(n,16),this._colorTransform=null,this._rgb=parseInt(i,16),this._r=this._rgb>>16&255,this._g=this._rgb>>8&255,this._b=this._rgb>>0&255,this._redMultiplier=this._r/255*1,this._greenMultiplier=this._g/255*1,this._blueMultiplier=this._b/255*1,this._alphaMultiplier=1,this._paletteIsGrayscale=!0,37===this._ink&&(this._alphaMultiplier=.5,this._paletteIsGrayscale=!1),this._colorTransform=new z.a({red:this._r/255,green:this._g/255,blue:this._b/255,alpha:this._alphaMultiplier}),this._colorMap=this.generatePaletteMapForGrayscale(this._backGround,this._foreGround)}return Object(a.a)(t,[{key:"ink",get:function(){return this._ink}},{key:"colorTransform",get:function(){return this._colorTransform}},{key:"reds",get:function(){return this._colorMap.get("reds")}},{key:"greens",get:function(){return this._colorMap.get("greens")}},{key:"blues",get:function(){return this._colorMap.get("blues")}},{key:"alphas",get:function(){return this._colorMap.get("alphas")}},{key:"paletteIsGrayscale",get:function(){return this._paletteIsGrayscale}},{key:"generatePaletteMapForGrayscale",value:function(t,e){for(var i=t>>24&255,n=t>>16&255,s=t>>8&255,r=t>>0&255,a=((e>>24&255)-i)/255,o=((e>>16&255)-n)/255,u=((e>>8&255)-s)/255,c=((e>>0&255)-r)/255,h=new Map,_=[],l=[],d=[],f=[],v=i,g=n,O=s,y=r,E=0;E<256;E++)g==n&&O==s&&y==r&&(v=0),v+=a,g+=o,O+=u,y+=c,f.push(v<<24),_.push(v<<24|g<<16|O<<8|y),l.push(v<<24|g<<16|O<<8|y),d.push(v<<24|g<<16|O<<8|y);return h.set("alphas",_),h.set("reds",_),h.set("greens",l),h.set("blues",d),h}}]),t}(),ne=function(){function t(e){Object(r.a)(this,t),this._offset=void 0,this._offset=e.offset}return Object(a.a)(t,[{key:"offset",get:function(){return this._offset}}]),t}(),se=function(){function t(e,i){Object(r.a)(this,t),this._animation=void 0,this._id=void 0,this._ink=void 0,this._member=void 0,this._hasDirections=void 0,this._hasStaticY=void 0,this._dx=void 0,this._dy=void 0,this._dz=void 0,this._animation=e,this._id=i.id,this._ink=i.ink,this._member=i.member,this._hasStaticY=!!i.staticY,this._hasDirections=!!i.directions,this._dx=[],this._dy=[],this._dz=[];var n=i.directionList;if(n&&n.length){var a,o=Object(s.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=u.id;void 0!==c&&(this._dx[c]=u.dx||0,this._dy[c]=u.dy||0,this._dz[c]=u.dz||0)}}catch(h){o.e(h)}finally{o.f()}}}return Object(a.a)(t,[{key:"getDirectionOffsetX",value:function(t){return t<this._dx.length?this._dx[t]:0}},{key:"getDirectionOffsetY",value:function(t){return t<this._dy.length?this._dy[t]:0}},{key:"getDirectionOffsetZ",value:function(t){return t<this._dz.length?this._dz[t]:0}},{key:"animation",get:function(){return this._animation}},{key:"id",get:function(){return this._id}},{key:"ink",get:function(){return this._ink}},{key:"member",get:function(){return this._member}},{key:"hasDirections",get:function(){return this._hasDirections}},{key:"hasStaticY",get:function(){return this._hasStaticY}}]),t}(),re=function(){function t(e,i){if(Object(r.a)(this,t),this._id=void 0,this._description=void 0,this._frames=void 0,this._spriteData=void 0,this._avatarData=void 0,this._directionData=void 0,this._removeData=void 0,this._addData=void 0,this._overriddenActions=void 0,this._overrideFrames=void 0,this._resetOnToggle=void 0,this._id=i.name,this._description=this._id,this._frames=[],this._spriteData=null,this._avatarData=null,this._directionData=null,this._removeData=null,this._addData=null,this._overriddenActions=null,this._overrideFrames=null,this._resetOnToggle=i.resetOnToggle||!1,i.sprites&&i.sprites.length){this._spriteData=[];var n,a=Object(s.a)(i.sprites);try{for(a.s();!(n=a.n()).done;){var o=n.value;this._spriteData.push(new se(this,o))}}catch(p){a.e(p)}finally{a.f()}}if(i.avatars&&i.avatars.length&&(this._avatarData=new ie(i.avatars[0])),i.directions&&i.directions.length&&(this._directionData=new ne(i.directions[0])),i.removes&&i.removes.length){this._removeData=[];var u,c=Object(s.a)(i.removes);try{for(c.s();!(u=c.n()).done;){var h=u.value;this._removeData.push(h.id)}}catch(p){c.e(p)}finally{c.f()}}if(i.adds&&i.adds.length){this._addData=[];var _,l=Object(s.a)(i.adds);try{for(l.s();!(_=l.n()).done;){var d=_.value;this._addData.push(new ee(d))}}catch(p){l.e(p)}finally{l.f()}}if(i.overrides&&i.overrides.length){this._overrideFrames=new Map,this._overriddenActions=new Map;var f,v=Object(s.a)(i.overrides);try{for(v.s();!(f=v.n()).done;){var g=f.value,O=g.name,y=g.override;this._overriddenActions.set(y,O);var E=[];this.parseFrames(E,g.frames,e),this._overrideFrames.set(O,E)}}catch(p){v.e(p)}finally{v.f()}}this.parseFrames(this._frames,i.frames,e)}return Object(a.a)(t,[{key:"parseFrames",value:function(t,e,i){if(e&&e.length){var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=1;a.repeats&&a.repeats>1&&(o=a.repeats);for(var u=0;u<o;){var c=[];if(a.bodyparts&&a.bodyparts.length){var h,_=Object(s.a)(a.bodyparts);try{for(_.s();!(h=_.n()).done;){var l=h.value,d=i.getActionDefinition(l.action),f=new Ft(l,Ft.BODYPART,d);c.push(f)}}catch(p){_.e(p)}finally{_.f()}}if(a.fxs&&a.fxs.length){var v,g=Object(s.a)(a.fxs);try{for(g.s();!(v=g.n()).done;){var O=v.value,y=i.getActionDefinition(O.action),E=new Ft(O,Ft.FX,y);c.push(E)}}catch(p){g.e(p)}finally{g.f()}}t.push(c),u++}}}catch(p){r.e(p)}finally{r.f()}}}},{key:"frameCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)return this._frames.length;if(this._overrideFrames){var e=this._overrideFrames.get(t);if(e)return e.length}return 0}},{key:"hasOverriddenActions",value:function(){return!!this._overriddenActions&&this._overriddenActions.size>0}},{key:"overriddenActionNames",value:function(){if(!this._overriddenActions)return null;var t,e=[],i=Object(s.a)(this._overriddenActions.keys());try{for(i.s();!(t=i.n()).done;){var n=t.value;e.push(n)}}catch(r){i.e(r)}finally{i.f()}return e}},{key:"overridingAction",value:function(t){return this._overriddenActions?this._overriddenActions.get(t):null}},{key:"getFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t<0&&(t=0);var i=[];if(e){var n=this._overrideFrames.get(e);n&&n.length>0&&(i=n[t%n.length])}else this._frames.length>0&&(i=this._frames[t%this._frames.length]);return i}},{key:"getAnimatedBodyPartIds",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[],r=Object(s.a)(this.getFrame(t,i));try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a.type===Ft.BODYPART)n.push(a.id);else if(a.type===Ft.FX&&this._addData&&this._addData.length){var o,u=Object(s.a)(this._addData);try{for(u.s();!(o=u.n()).done;){var c=o.value;c.id===a.id&&n.push(c.align)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){r.e(h)}finally{r.f()}return n}},{key:"getLayerData",value:function(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(s.a)(this.getFrame(t,n));try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.id===e)return a;if(a.type===Ft.FX&&this._addData&&this._addData.length){var o,u=Object(s.a)(this._addData);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.align===e&&c.id===a.id)return a}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){r.e(h)}finally{r.f()}return null}},{key:"hasAvatarData",value:function(){return null!==this._avatarData}},{key:"hasDirectionData",value:function(){return null!==this._directionData}},{key:"hasAddData",value:function(){return null!==this._addData}},{key:"getAddData",value:function(t){if(this._addData){var e,i=Object(s.a)(this._addData);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.id===t)return n}}catch(r){i.e(r)}finally{i.f()}}return null}},{key:"id",get:function(){return this._id}},{key:"spriteData",get:function(){return this._spriteData||t.EMPTY_ARRAY}},{key:"avatarData",get:function(){return this._avatarData}},{key:"directionData",get:function(){return this._directionData}},{key:"removeData",get:function(){return this._removeData||t.EMPTY_ARRAY}},{key:"addData",get:function(){return this._addData||t.EMPTY_ARRAY}},{key:"toString",value:function(){return this._description}},{key:"resetOnToggle",get:function(){return this._resetOnToggle}}]),t}();re.EMPTY_ARRAY=[];var ae=function(){function t(){Object(r.a)(this,t),this._animations=void 0,this._animations=new Map}return Object(a.a)(t,[{key:"registerAnimation",value:function(t,e){var i=e[Object.keys(e)[0]],n=new re(t,i);return this._animations.set(i.name,n),!0}},{key:"getAnimation",value:function(t){var e=this._animations.get(t);return e||null}},{key:"getLayerData",value:function(t,e,i){var n=this.getAnimation(t);return n?n.getLayerData(e,i):null}},{key:"animations",get:function(){return this._animations}}]),t}(),oe=function(){function t(e){Object(r.a)(this,t),this._number=void 0,this._assetPartDefinition=void 0,this._number=e.number,this._assetPartDefinition=e.assetPartDefinition||null}return Object(a.a)(t,[{key:"number",get:function(){return this._number}},{key:"assetPartDefinition",get:function(){return this._assetPartDefinition}}]),t}(),ue=function(){function t(e,i,n,s,a,o,u,c){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",_=arguments.length>9&&void 0!==arguments[9]&&arguments[9];Object(r.a)(this,t),this._bodyPartId=void 0,this._partType=void 0,this._flippedPartType=void 0,this._partId=void 0,this._color=void 0,this._frames=void 0,this._action=void 0,this._isColorable=void 0,this._isBlendable=void 0,this._blendTransform=void 0,this._paletteMapId=void 0,this._bodyPartId=e,this._partType=i,this._partId=n,this._color=s,this._frames=a,this._action=o,this._isColorable=u,this._paletteMapId=c,this._flippedPartType=h,this._isBlendable=_,this._blendTransform=null,"ey"===this._partType&&(this._isColorable=!1)}return Object(a.a)(t,[{key:"getFrameIndex",value:function(t){if(!this._frames||!this._frames.length)return 0;var e=t%this._frames.length;return this._frames[e]instanceof oe?this._frames[e].number:e}},{key:"getFrameDefinition",value:function(t){var e=t%this._frames.length;return this._frames&&this._frames.length>e&&this._frames[e]instanceof oe?this._frames[e]:null}},{key:"getCacheableKey",value:function(t){var e=t%this._frames.length;if(this._frames&&this._frames.length>e&&this._frames[e]instanceof oe){var i=this._frames[e];return this.partId+":"+i.assetPartDefinition+":"+i.number}return this.partId+":"+e}},{key:"bodyPartId",get:function(){return this._bodyPartId}},{key:"partType",get:function(){return this._partType}},{key:"partId",get:function(){return this._partId}},{key:"color",get:function(){return this._color}},{key:"action",get:function(){return this._action}},{key:"isColorable",get:function(){return this._isColorable},set:function(t){this._isColorable=t}},{key:"paletteMapId",get:function(){return this._paletteMapId}},{key:"flippedPartType",get:function(){return this._flippedPartType}},{key:"isBlendable",get:function(){return this._isBlendable}},{key:"toString",value:function(){return[this._bodyPartId,this._partType,this._partId].join(":")}}]),t}(),ce=function(){function t(e,i){Object(r.a)(this,t),this._id=void 0,this._width=void 0,this._height=void 0,this._offset=void 0,this._regPoint=void 0,this._id=e.id,this._width=e.width,this._height=e.height,this._offset=new Z.g(e.dx,e.dy),i==Ht.LARGE?this._regPoint=new Z.g((this._width-64)/2,0):this._regPoint=new Z.g((this._width-32)/2,0)}return Object(a.a)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"offset",get:function(){return this._offset}},{key:"id",get:function(){return this._id}},{key:"regPoint",get:function(){return this._regPoint}}]),t}(),he=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._isMain=void 0,this._avatarSets=void 0,this._bodyParts=void 0,this._allBodyParts=void 0,this._id=e.id,this._isMain=e.main||!1,this._avatarSets=new Map,this._bodyParts=[],this._allBodyParts=[],e.avatarSets&&e.avatarSets.length>0){var i,n=Object(s.a)(e.avatarSets);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a){var o=new t(a);this._avatarSets.set(o.id,o)}}}catch(v){n.e(v)}finally{n.f()}}if(e.bodyParts&&e.bodyParts.length>0){var u,c=Object(s.a)(e.bodyParts);try{for(c.s();!(u=c.n()).done;){var h=u.value;h&&this._bodyParts.push(h.id)}}catch(v){c.e(v)}finally{c.f()}}var _,l=this._bodyParts.concat(),d=Object(s.a)(this._avatarSets.values());try{for(d.s();!(_=d.n()).done;){var f=_.value;f&&(l=l.concat(f.getBodyParts()))}}catch(v){d.e(v)}finally{d.f()}this._allBodyParts=l}return Object(a.a)(t,[{key:"findAvatarSet",value:function(t){if(t===this._id)return this;var e,i=Object(s.a)(this._avatarSets.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.findAvatarSet(t))return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"getBodyParts",value:function(){return this._allBodyParts.concat()}},{key:"id",get:function(){return this._id}},{key:"isMain",get:function(){if(this._isMain)return!0;var t,e=Object(s.a)(this._avatarSets.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i&&i.isMain)return!0}}catch(n){e.e(n)}finally{e.f()}return!1}}]),t}(),_e=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._z=void 0,this._x=e,this._y=i,this._z=n}return Object(a.a)(t,[{key:"dot",value:function(t){return this._x*t.x+this._y*t.y+this._z*t.z}},{key:"cross",value:function(e){var i=new t;return i.x=this._y*e.z-this._z*e.y,i.y=this._z*e.x-this._x*e.z,i.z=this._x*e.y-this._y*e.x,i}},{key:"subtract",value:function(t){this._x=this._x-t.x,this._y=this._y-t.y,this._z=this._z-t.z}},{key:"add",value:function(t){this._x=this._x+t.x,this._y=this._y+t.y,this._z=this._z+t.z}},{key:"normalize",value:function(){var t=1/this.length();this._x=this._x*t,this._y=this._y*t,this._z=this._z*t}},{key:"scaleBy",value:function(t){this._x*=t,this._y*=t,this._z*=t}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"toString",value:function(){return"Vector3D: ("+this._x+","+this._y+","+this._z+")"}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._z=t}}],[{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"cross",value:function(e,i){var n=new t;return n.x=e.y*i.z-e.z*i.y,n.y=e.z*i.x-e.x*i.z,n.z=e.x*i.y-e.y*i.x,n}},{key:"subtract",value:function(e,i){return new t(e.x-i.x,e.y-i.y,e.z-i.z)}}]),t}(),le=function(){function t(e,i,n){Object(r.a)(this,t),this._location=void 0,this._transformedLocation=void 0,this._needsTransformation=void 0,this._location=new _e(e,i,n),this._transformedLocation=new _e,this._needsTransformation=!1,0==e&&0==i&&0==n||(this._needsTransformation=!0)}return Object(a.a)(t,[{key:"location",get:function(){return this._location}},{key:"transformedLocation",get:function(){return this._transformedLocation}},{key:"applyTransform",value:function(t){this._needsTransformation&&(this._transformedLocation=t.vectorMultiplication(this._location))}}]),t}(),de=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r.a)(this,i),(n=e.call(this,parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)))._id=void 0,n._radius=void 0,n._normal=void 0,n._isDoubleSided=void 0,n._isDynamic=void 0,n._id=t.id,n._radius=parseFloat(t.radius),n._normal=new _e(parseFloat(t.nx),parseFloat(t.ny),parseFloat(t.nz)),n._isDoubleSided=t.double||!1,n._isDynamic=s,n}return Object(a.a)(i,[{key:"getDistance",value:function(t){var e=Math.abs(t.z-this.transformedLocation.z-this._radius),i=Math.abs(t.z-this.transformedLocation.z+this._radius);return Math.min(e,i)}},{key:"id",get:function(){return this._id}},{key:"normal",get:function(){return this._normal}},{key:"isDoubleSided",get:function(){return this._isDoubleSided}},{key:"toString",value:function(){return this._id+": "+this.location+" - "+this.transformedLocation}},{key:"isDynamic",get:function(){return this._isDynamic}}]),i}(le),fe=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;if(Object(r.a)(this,i),(n=e.call(this,parseFloat(t.x),parseFloat(t.y),parseFloat(t.z)))._id=void 0,n._radius=void 0,n._parts=void 0,n._dynamicParts=void 0,n._id=t.id,n._radius=parseFloat(t.radius),n._parts=new Map,n._dynamicParts=new Map,t.items&&t.items.length>0){var a,o=Object(s.a)(t.items);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u){var c=new de(u);n._parts.set(c.id,c)}}}catch(h){o.e(h)}finally{o.f()}}return n}return Object(a.a)(i,[{key:"getDynamicParts",value:function(t){var e=this._dynamicParts.get(t),i=[];if(e)for(var n in e){var s=e[n];s&&i.push(s)}return i}},{key:"getPartIds",value:function(t){var e,i=[],n=Object(s.a)(this._parts.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&i.push(r.id)}}catch(c){n.e(c)}finally{n.f()}if(t){var a=this._dynamicParts.get(t);if(a)for(var o in a){var u=a[o];u&&i.push(u.id)}}return i}},{key:"removeDynamicParts",value:function(t){return this._dynamicParts.delete(t),!0}},{key:"addPart",value:function(t,e){if(this.hasPart(t.id,e))return!1;var i=this._dynamicParts.get(e);return i||(i={},this._dynamicParts.set(e,i)),i[t.id]=new de(t,!0),!0}},{key:"hasPart",value:function(t,e){var i=this._parts.get(t)||null;return i||void 0===this._dynamicParts.get(e)||(i=this._dynamicParts.get(e)[t]||null),null!==i}},{key:"getParts",value:function(t,e,i,n){var r,a=[],o=Object(s.a)(this._parts.values());try{for(o.s();!(r=o.n()).done;){var u=r.value;u&&(u.applyTransform(t),a.push([u.getDistance(e),u]))}}catch(g){o.e(g)}finally{o.f()}var c=this._dynamicParts.get(n);if(c)for(var h in c){var _=c[h];_&&(_.applyTransform(t),a.push([_.getDistance(e),_]))}a.sort((function(t,e){var i=t[0],n=e[0];return i<n?-1:i>n?1:0}));for(var l=[],d=0,f=a;d<f.length;d++){var v=f[d];v&&l.push(v[1].id)}return l}},{key:"getDistance",value:function(t){var e=Math.abs(t.z-this.transformedLocation.z-this._radius),i=Math.abs(t.z-this.transformedLocation.z+this._radius);return Math.min(e,i)}},{key:"id",get:function(){return this._id}},{key:"radius",get:function(){return this._radius}}]),i}(le),ve=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o,u,c,h]}return Object(a.a)(t,[{key:"identity",value:function(){return this._data=[1,0,0,0,1,0,0,0,1],this}},{key:"vectorMultiplication",value:function(t){var e=t.x*this._data[0]+t.y*this._data[3]+t.z*this._data[6],i=t.x*this._data[1]+t.y*this._data[4]+t.z*this._data[7],n=t.x*this._data[2]+t.y*this._data[5]+t.z*this._data[8];return new _e(e,i,n)}},{key:"multiply",value:function(e){return new t(this._data[0]*e.data[0]+this._data[1]*e.data[3]+this._data[2]*e.data[6],this._data[0]*e.data[1]+this._data[1]*e.data[4]+this._data[2]*e.data[7],this._data[0]*e.data[2]+this._data[1]*e.data[5]+this._data[2]*e.data[8],this._data[3]*e.data[0]+this._data[4]*e.data[3]+this._data[5]*e.data[6],this._data[3]*e.data[1]+this._data[4]*e.data[4]+this._data[5]*e.data[7],this._data[3]*e.data[2]+this._data[4]*e.data[5]+this._data[5]*e.data[8],this._data[6]*e.data[0]+this._data[7]*e.data[3]+this._data[8]*e.data[6],this._data[6]*e.data[1]+this._data[7]*e.data[4]+this._data[8]*e.data[7],this._data[6]*e.data[2]+this._data[7]*e.data[5]+this._data[8]*e.data[8])}},{key:"scalarMultiply",value:function(t){for(var e=0;e<this._data.length;)this._data[e]=this._data[e]*t,e++}},{key:"rotateX",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(1,0,0,0,n,-s,0,s,n).multiply(this)}},{key:"rotateY",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(n,0,s,0,1,0,-s,0,n).multiply(this)}},{key:"rotateZ",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(n,-s,0,s,n,0,0,0,1).multiply(this)}},{key:"skew",value:function(){}},{key:"transpose",value:function(){return new t(this._data[0],this._data[3],this._data[6],this._data[1],this._data[4],this._data[7],this._data[2],this._data[5],this._data[8])}},{key:"equals",value:function(t){return!1}},{key:"data",get:function(){return this._data}}],[{key:"getXRotationMatrix",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(1,0,0,0,n,-s,0,s,n)}},{key:"getYRotationMatrix",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(n,0,s,0,1,0,-s,0,n)}},{key:"getZRotationMatrix",value:function(e){var i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i);return new t(n,-s,0,s,n,0,0,0,1)}}]),t}();ve.IDENTITY=new ve(1,0,0,0,1,0,0,0,1),ve.TOLERANS=1e-18;var ge=function(){function t(e){Object(r.a)(this,t),this._camera=void 0,this._avatarSet=void 0,this._geometryTypes=void 0,this._itemIdToBodyPartMap=void 0,this._transformation=void 0,this._canvases=void 0,this._camera=new _e(0,0,10),this._avatarSet=new he(e.avatarSets[0]),this._geometryTypes=new Map,this._itemIdToBodyPartMap=new Map,this._transformation=new ve,this._canvases=new Map;var i=e.camera;if(i&&(this._camera.x=parseFloat(i.x),this._camera.y=parseFloat(i.y),this._camera.z=parseFloat(i.z)),e.canvases&&e.canvases.length>0){var n,a=Object(s.a)(e.canvases);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var u=o.scale,c=new Map;if(o.geometries&&o.geometries.length>0){var h,_=Object(s.a)(o.geometries);try{for(_.s();!(h=_.n()).done;){var l=h.value;if(l){var d=new ce(l,u);c.set(d.id,d)}}}catch(k){_.e(k)}finally{_.f()}}this._canvases.set(u,c)}}}catch(k){a.e(k)}finally{a.f()}}if(e.types&&e.types.length>0){var f,v=Object(s.a)(e.types);try{for(v.s();!(f=v.n()).done;){var g=f.value;if(g){var O=new Map,y=new Map;if(g.bodyParts&&g.bodyParts.length>0){var E,p=Object(s.a)(g.bodyParts);try{for(p.s();!(E=p.n()).done;){var m=E.value;if(m){var I=new fe(m);O.set(I.id,I);var b,T=Object(s.a)(I.getPartIds(null));try{for(T.s();!(b=T.n()).done;){var R=b.value;y.set(R,I)}}catch(k){T.e(k)}finally{T.f()}}}}catch(k){p.e(k)}finally{p.f()}}this._geometryTypes.set(g.id,O),this._itemIdToBodyPartMap.set(g.id,y)}}}catch(k){v.e(k)}finally{v.f()}}}return Object(a.a)(t,[{key:"removeDynamicItems",value:function(t){var e,i=Object(s.a)(this._geometryTypes.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r,a=Object(s.a)(n.values());try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&o.removeDynamicParts(t)}}catch(u){a.e(u)}finally{a.f()}}}}catch(u){i.e(u)}finally{i.f()}}},{key:"getBodyPartIdsInAvatarSet",value:function(t){var e=this._avatarSet.findAvatarSet(t);return e?e.getBodyParts():[]}},{key:"isMainAvatarSet",value:function(t){var e=this._avatarSet.findAvatarSet(t);return!!e&&e.isMain}},{key:"getCanvas",value:function(t,e){var i=this._canvases.get(t);return i&&i.get(e)||null}},{key:"typeExists",value:function(t){return!!this._geometryTypes.get(t)}},{key:"hasBodyPart",value:function(t,e){if(this.typeExists(t)){var i=this._geometryTypes.get(t);if(i&&i.get(e))return!0}return!1}},{key:"getBodyPartIDs",value:function(t){var e=this.getBodyPartsOfType(t),i=[];if(e){var n,r=Object(s.a)(e.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&i.push(a.id)}}catch(o){r.e(o)}finally{r.f()}}return i}},{key:"getBodyPartsOfType",value:function(t){return this.typeExists(t)?this._geometryTypes.get(t):new Map}},{key:"getBodyPart",value:function(t,e){return this.getBodyPartsOfType(t).get(e)||null}},{key:"getBodyPartOfItem",value:function(t,e,i){var n=this._itemIdToBodyPartMap.get(t);if(n){var r=n.get(e);if(r)return r;var a=this.getBodyPartsOfType(t);if(a){var o,u=Object(s.a)(a.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c&&c.hasPart(e,i))return c}}catch(h){u.e(h)}finally{u.f()}}}return null}},{key:"getBodyPartsInAvatarSet",value:function(t,e){var i,n=this.getBodyPartIdsInAvatarSet(e),r=[],a=Object(s.a)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o){var u=t.get(o);u&&r.push(u)}}}catch(c){a.e(c)}finally{a.f()}return r}},{key:"getBodyPartsAtAngle",value:function(t,e,i){if(!i)return[];var n=this.getBodyPartsOfType(i),r=this.getBodyPartsInAvatarSet(n,t),a=[],o=[];this._transformation=ve.getYRotationMatrix(e);var u,c=Object(s.a)(r.values());try{for(c.s();!(u=c.n()).done;){var h=u.value;h&&(h.applyTransform(this._transformation),a.push([h.getDistance(this._camera),h]))}}catch(f){c.e(f)}finally{c.f()}a.sort((function(t,e){var i=t[0],n=e[0];return i<n?-1:i>n?1:0}));for(var _=0,l=a;_<l.length;_++){var d=l[_];d&&o.push(d[1].id)}return o}},{key:"getParts",value:function(t,e,i,n,s){if(this.hasBodyPart(t,e)){var r=this.getBodyPartsOfType(t).get(e);return this._transformation=ve.getYRotationMatrix(i),r.getParts(this._transformation,this._camera,n,s)}return[]}}]),t}(),Oe=function(){function t(e){if(Object(r.a)(this,t),this._frames=void 0,this._frames=[],e.frames&&e.frames.length>0){var i,n=Object(s.a)(e.frames);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a){this._frames.push(new oe(a));var o=a.repeats||0;if(o>1)for(;--o>0;)this._frames.push(this._frames[this._frames.length-1])}}}catch(u){n.e(u)}finally{n.f()}}}return Object(a.a)(t,[{key:"frames",get:function(){return this._frames}}]),t}(),ye=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._actionParts=void 0,this._bodyPartOffsets=void 0,this._frameCount=void 0,this._frameIndexes=void 0,this._id=e.id,this._actionParts=new Map,this._bodyPartOffsets=new Map,this._frameCount=0,this._frameIndexes=[],e.parts&&e.parts.length>0){var i,n=Object(s.a)(e.parts);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a){var o=new Oe(a);this._actionParts.set(a.setType,o),this._frameCount=Math.max(this._frameCount,o.frames.length)}}}catch(R){n.e(R)}finally{n.f()}}if(e.offsets&&e.offsets.frames&&e.offsets.frames.length>0){var u,c=Object(s.a)(e.offsets.frames);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h){var _=h.id;this._frameCount=Math.max(this._frameCount,_);var l=new Map;if(this._bodyPartOffsets.set(_,l),h.directions&&h.directions.length>0){var d,f=Object(s.a)(h.directions);try{for(f.s();!(d=f.n()).done;){var v=d.value;if(v){var g=v.id,O=new Map;if(l.set(g,O),v.bodyParts&&v.bodyParts.length>0){var y,E=Object(s.a)(v.bodyParts);try{for(E.s();!(y=E.n()).done;){var p=y.value;if(p){var m=p.id,I=0,b=0;void 0!==p.dx&&(I=p.dx),void 0!==p.dy&&(b=p.dy),O.set(m,new Z.g(I,b))}}}catch(R){E.e(R)}finally{E.f()}}}}}catch(R){f.e(R)}finally{f.f()}}if(this._frameIndexes.push(_),void 0!==h.repeats){var T=h.repeats||0;if(T>1)for(;--T>0;)this._frameIndexes.push(_)}}}}catch(R){c.e(R)}finally{c.f()}}}return Object(a.a)(t,[{key:"getPart",value:function(t){if(!t)return null;var e=this._actionParts.get(t);return e||null}},{key:"getFrameBodyPartOffset",value:function(e,i,n){var s=i%this._frameIndexes.length,r=this._frameIndexes[s],a=this._bodyPartOffsets.get(r);if(!a)return t.DEFAULT_OFFSET;var o=a.get(e);if(!o)return t.DEFAULT_OFFSET;var u=o.get(n);return u||t.DEFAULT_OFFSET}},{key:"id",get:function(){return this._id}},{key:"parts",get:function(){return this._actionParts}},{key:"frameCount",get:function(){return this._frameCount}}]),t}();ye.DEFAULT_OFFSET=new Z.g(0,0);var Ee=function(){function t(){Object(r.a)(this,t),this._actions=void 0,this._actions=new Map}return Object(a.a)(t,[{key:"parse",value:function(t){if(t&&t.length>0){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=new ye(n);this._actions.set(r.id,r)}}}catch(a){i.e(a)}finally{i.f()}}return!0}},{key:"appendJSON",value:function(t){var e,i=Object(s.a)(t.action);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._actions.set(n.id,new ye(n))}}catch(r){i.e(r)}finally{i.f()}return!0}},{key:"getAction",value:function(t){var e=this._actions.get(t.id);return e||null}},{key:"getFrameCount",value:function(t){var e=this.getAction(t);return e?e.frameCount:0}}]),t}(),pe=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._index=void 0,this._clubLevel=void 0,this._isSelectable=void 0,this._rgb=void 0,!e)throw new Error("invalid_data");this._id=e.id,this._index=e.index,this._clubLevel=e.club||0,this._isSelectable=e.selectable,this._rgb=parseInt("0x"+e.hexCode,16)}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"index",get:function(){return this._index}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"isSelectable",get:function(){return this._isSelectable}},{key:"rgb",get:function(){return this._rgb}}]),t}(),me=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._colors=void 0,!e)throw new Error("invalid_data");this._id=e.id,this._colors=new H,this.append(e)}return Object(a.a)(t,[{key:"append",value:function(t){var e,i=Object(s.a)(t.colors);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=new pe(n);this._colors.add(n.id.toString(),r)}}catch(a){i.e(a)}finally{i.f()}}},{key:"getColor",value:function(t){return void 0===t||t<0?null:this._colors.getValue(t.toString())||null}},{key:"id",get:function(){return this._id}},{key:"colors",get:function(){return this._colors}}]),t}(),Ie=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._type=void 0,this._breed=void 0,this._index=void 0,this._colorLayerIndex=void 0,this._paletteMapId=void 0,!e)throw new Error("invalid_data");this._id=e.id,this._type=e.type,this._index=e.index,this._colorLayerIndex=e.colorindex,this._paletteMapId=-1,this._breed=-1}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"breed",get:function(){return this._breed}},{key:"index",get:function(){return this._index}},{key:"colorLayerIndex",get:function(){return this._colorLayerIndex}},{key:"paletteMap",get:function(){return this._paletteMapId}}]),t}(),be=function(){function t(e,i){if(Object(r.a)(this,t),this._id=void 0,this._type=void 0,this._gender=void 0,this._clubLevel=void 0,this._isColorable=void 0,this._isSelectable=void 0,this._parts=void 0,this._hiddenLayers=void 0,this._isPreSelectable=void 0,this._isSellable=void 0,!e||!i)throw new Error("invalid_data");this._id=i.id,this._type=e,this._gender=i.gender,this._clubLevel=i.club,this._isColorable=i.colorable,this._isSelectable=i.selectable,this._parts=[],this._hiddenLayers=[],this._isPreSelectable=i.preselectable,this._isSellable=i.sellable;var n,a=Object(s.a)(i.parts);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=new Ie(o),c=this.getPartIndex(u);-1!==c?this._parts.splice(c,0,u):this._parts.push(u)}}catch(d){a.e(d)}finally{a.f()}if(i.hiddenLayers){var h,_=Object(s.a)(i.hiddenLayers);try{for(_.s();!(h=_.n()).done;){var l=h.value;this._hiddenLayers.push(l.partType)}}catch(d){_.e(d)}finally{_.f()}}}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._parts);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(i){e.e(i)}finally{e.f()}this._parts=null,this._hiddenLayers=null}},{key:"getPartIndex",value:function(t){var e=this._parts.length;if(!e)return-1;for(var i=0;i<e;i++){var n=this._parts[i];if(n&&!(n.type!==t.type||n.index>t.index))return i}return-1}},{key:"getPart",value:function(t,e){var i,n=Object(s.a)(this._parts);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.type===t&&r.id===e)return r}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"gender",get:function(){return this._gender}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"isColorable",get:function(){return this._isColorable}},{key:"isSelectable",get:function(){return this._isSelectable}},{key:"parts",get:function(){return this._parts}},{key:"hiddenLayers",get:function(){return this._hiddenLayers}},{key:"isPreSelectable",get:function(){return this._isPreSelectable}},{key:"isSellable",get:function(){return this._isSellable}}]),t}(),Te=function(){function t(e){if(Object(r.a)(this,t),this._type=void 0,this._paletteId=void 0,this._isMandatory=void 0,this._partSets=void 0,!e)throw new Error("invalid_data");this._type=e.type,this._paletteId=e.paletteId,this._isMandatory={},this._isMandatory.F=[e.mandatory_f_0,e.mandatory_f_1],this._isMandatory.M=[e.mandatory_m_0,e.mandatory_m_1],this._partSets=new H,this.append(e)}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._partSets.getValues());try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(i){e.e(i)}finally{e.f()}this._partSets=null}},{key:"cleanUp",value:function(t){var e,i=Object(s.a)(t.sets);try{for(i.s();!(e=i.n()).done;){var n=e.value.id.toString(),r=this._partSets.getValue(n);r&&(r.dispose(),this._partSets.remove(n))}}catch(a){i.e(a)}finally{i.f()}}},{key:"append",value:function(t){if(t&&t.sets){var e,i=Object(s.a)(t.sets);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._partSets.add(n.id.toString(),new be(this._type,n))}}catch(r){i.e(r)}finally{i.f()}}}},{key:"getDefaultPartSet",value:function(t){var e,i=Object(s.a)(this._partSets.getValues());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&(0===n.clubLevel&&(n.gender===t||"U"===n.gender)))return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"getPartSet",value:function(t){return this._partSets.getValue(t.toString())}},{key:"type",get:function(){return this._type}},{key:"paletteID",get:function(){return this._paletteId}},{key:"isMandatory",value:function(t,e){return this._isMandatory[t.toUpperCase()][Math.min(e,1)]}},{key:"optionalFromClubLevel",value:function(t){return this._isMandatory[t.toUpperCase()].indexOf(!1)}},{key:"partSets",get:function(){return this._partSets}}]),t}(),Re=function(){function t(){Object(r.a)(this,t),this._palettes=void 0,this._setTypes=void 0,this._palettes=new Map,this._setTypes=new Map}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"parse",value:function(t){if(!t)return!1;var e,i=Object(s.a)(t.palettes);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=new me(n);r&&this._palettes.set(r.id.toString(),r)}}catch(h){i.e(h)}finally{i.f()}var a,o=Object(s.a)(t.setTypes);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=new Te(u);c&&this._setTypes.set(c.type,c)}}catch(h){o.e(h)}finally{o.f()}return!0}},{key:"injectJSON",value:function(t){var e,i=Object(s.a)(t.setTypes);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=this._setTypes.get(n.type);r?r.cleanUp(n):this._setTypes.set(n.type,new Te(n))}}catch(a){i.e(a)}finally{i.f()}this.appendJSON(t)}},{key:"appendJSON",value:function(t){if(!t)return!1;var e,i=Object(s.a)(t.palettes);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=n.id.toString(),a=this._palettes.get(r);a?a.append(n):this._palettes.set(r,new me(n))}}catch(l){i.e(l)}finally{i.f()}var o,u=Object(s.a)(t.setTypes);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=c.type,_=this._setTypes.get(h);_?_.append(c):this._setTypes.set(h,new Te(c))}}catch(l){u.e(l)}finally{u.f()}return!1}},{key:"getMandatorySetTypeIds",value:function(t,e){var i,n=[],r=Object(s.a)(this._setTypes.values());try{for(r.s();!(i=r.n()).done;){var a=i.value;a&&a.isMandatory(t,e)&&n.push(a.type)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"getDefaultPartSet",value:function(t,e){var i=this._setTypes.get(t);return i?i.getDefaultPartSet(e):null}},{key:"getSetType",value:function(t){return this._setTypes.get(t)||null}},{key:"getPalette",value:function(t){return this._palettes.get(t.toString())||null}},{key:"getFigurePartSet",value:function(t){var e,i=Object(s.a)(this._setTypes.values());try{for(i.s();!(e=i.n()).done;){var n=e.value.getPartSet(t);if(n)return n}}catch(r){i.e(r)}finally{i.f()}return null}}]),t}(),ke=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._parts=void 0,this._id=e.id,this._parts=[],e.activeParts&&e.activeParts.length>0){var i,n=Object(s.a)(e.activeParts);try{for(n.s();!(i=n.n()).done;){var a=i.value;a&&this._parts.push(a.setType)}}catch(o){n.e(o)}finally{n.f()}}}return Object(a.a)(t,[{key:"parts",get:function(){return this._parts}}]),t}(),Ae=function(){function t(e){if(Object(r.a)(this,t),this._setType=void 0,this._flippedSetType=void 0,this._removeSetType=void 0,this._appendToFigure=void 0,this._staticId=void 0,!e)throw new Error("invalid_data");this._setType=e.setType,this._flippedSetType=e.flippedSetType||null,this._removeSetType=e.removeSetType||null,this._appendToFigure=!1,this._staticId=-1}return Object(a.a)(t,[{key:"hasStaticId",value:function(){return this._staticId>=0}},{key:"staticId",get:function(){return this._staticId},set:function(t){this._staticId=t}},{key:"setType",get:function(){return this._setType}},{key:"flippedSetType",get:function(){return this._flippedSetType},set:function(t){this._flippedSetType=t}},{key:"removeSetType",get:function(){return this._removeSetType}},{key:"appendToFigure",get:function(){return this._appendToFigure},set:function(t){this._appendToFigure=t}}]),t}(),Se=function(){function t(){Object(r.a)(this,t),this._parts=void 0,this._activePartSets=void 0,this._parts=new Map,this._activePartSets=new Map}return Object(a.a)(t,[{key:"parse",value:function(t){if(t.partSet&&t.partSet.length>0){var e,i=Object(s.a)(t.partSet);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this._parts.set(n.setType,new Ae(n))}}catch(u){i.e(u)}finally{i.f()}}if(t.activePartSets&&t.activePartSets.length>0){var r,a=Object(s.a)(t.activePartSets);try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&this._activePartSets.set(o.id,new ke(o))}}catch(u){a.e(u)}finally{a.f()}}return!0}},{key:"appendJSON",value:function(t){if(t.partSet&&t.partSet.length>0){var e,i=Object(s.a)(t.partSet);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this._parts.set(n.setType,new Ae(n))}}catch(u){i.e(u)}finally{i.f()}}if(t.activePartSets&&t.activePartSets.length>0){var r,a=Object(s.a)(t.activePartSets);try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&this._activePartSets.set(o.id,new ke(o))}}catch(u){a.e(u)}finally{a.f()}}return!1}},{key:"getActiveParts",value:function(t){var e=this._activePartSets.get(t.activePartSet);return e?e.parts:[]}},{key:"getPartDefinition",value:function(t){var e=this._parts.get(t);return e||null}},{key:"addPartDefinition",value:function(t){var e=t.setType,i=this._parts.get(e);return i||(i=new Ae(t),this._parts.set(e,i)),i}},{key:"getActivePartSet",value:function(t){var e=this._activePartSets.get(t.activePartSet);return e||null}},{key:"parts",get:function(){return this._parts}},{key:"activePartSets",get:function(){return this._activePartSets}}]),t}(),je=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._renderManager=void 0,n._geometry=void 0,n._figureData=void 0,n._partSetsData=void 0,n._animationData=void 0,n._animationManager=void 0,n._mandatorySetTypeIds=void 0,n._actionManager=void 0,n._defaultAction=void 0,n._renderManager=t,n._geometry=null,n._figureData=new Re,n._partSetsData=new Se,n._animationData=new Ee,n._animationManager=new ae,n._mandatorySetTypeIds={},n._actionManager=null,n._defaultAction=null,n}return Object(a.a)(i,[{key:"init",value:function(){}},{key:"dispose",value:function(){this.disposed||(Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._renderManager=null,this._figureData=null,this._partSetsData=null,this._animationData=null,this._mandatorySetTypeIds=null)}},{key:"initGeometry",value:function(t){t&&(this._geometry=new ge(t))}},{key:"initActions",value:function(t,e){e&&(this._actionManager=new te(t,e),this._defaultAction=this._actionManager.getDefaultAction())}},{key:"updateActions",value:function(t){this._actionManager.updateActions(t),this._defaultAction=this._actionManager.getDefaultAction()}},{key:"initPartSets",value:function(t){return!!t&&(!!this._partSetsData.parse(t)&&(this._partSetsData.getPartDefinition("ri").appendToFigure=!0,this._partSetsData.getPartDefinition("li").appendToFigure=!0,!0))}},{key:"initAnimation",value:function(t){return!!t&&this._animationData.parse(t)}},{key:"initFigureData",value:function(t){return!!t&&this._figureData.parse(t)}},{key:"injectFigureData",value:function(t){this._figureData.injectJSON(t)}},{key:"registerAnimations",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fx",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=0;n<i;){var s=t.getCollection(e+n);if(s){var r=s.data;this._animationManager.registerAnimation(this,r.animations)}n++}}},{key:"registerAnimation",value:function(t){this._animationManager.registerAnimation(this,t)}},{key:"getPartColor",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.getPartColorIds(e);if(!n||n.length<i)return null;var s=this._figureData.getSetType(e);if(null==s)return null;var r=this._figureData.getPalette(s.paletteID);return r?r.getColor(n[i]):null}},{key:"getBodyPartData",value:function(t,e,i){return this._animationManager.getLayerData(t,e,i)}},{key:"getAnimation",value:function(t){return this._animationManager.getAnimation(t)}},{key:"getActionDefinition",value:function(t){return this._actionManager.getActionDefinition(t)}},{key:"getActionDefinitionWithState",value:function(t){return this._actionManager.getActionDefinitionWithState(t)}},{key:"isMainAvatarSet",value:function(t){return this._geometry.isMainAvatarSet(t)}},{key:"sortActions",value:function(t){return this._actionManager.sortActions(t)}},{key:"maxFrames",value:function(t){var e,i=0,n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;i=Math.max(i,this._animationData.getFrameCount(r.definition))}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"getMandatorySetTypeIds",value:function(t,e){return this._mandatorySetTypeIds[t]||(this._mandatorySetTypeIds[t]=[]),this._mandatorySetTypeIds[t][e]||(this._mandatorySetTypeIds[t][e]=this._figureData.getMandatorySetTypeIds(t,e)),this._mandatorySetTypeIds[t][e]}},{key:"getDefaultPartSet",value:function(t,e){return this._figureData.getDefaultPartSet(t,e)}},{key:"getCanvasOffsets",value:function(t,e,i){return this._actionManager.getCanvasOffsets(t,e,i)}},{key:"getCanvas",value:function(t,e){return this._geometry.getCanvas(t,e)}},{key:"removeDynamicItems",value:function(t){this._geometry.removeDynamicItems(t)}},{key:"getActiveBodyPartIds",value:function(t,e){var i=[],n=[],r=t.definition.geometryType;if(t.definition.isAnimation){var a=t.definition.state+"."+t.actionParameter,o=this._animationManager.getAnimation(a);if(o&&(i=o.getAnimatedBodyPartIds(0,t.overridingAction),o.hasAddData())){var u,c={id:"",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:1},h={setType:""},_=Object(s.a)(o.addData);try{for(_.s();!(u=_.n()).done;){var l=u.value,d=this._geometry.getBodyPart(r,l.align);if(d){c.id=l.id,d.addPart(c,e),h.setType=l.id;var f=this._partSetsData.addPartDefinition(h);f.appendToFigure=!0,""===l.base&&(f.staticId=1),-1===n.indexOf(d.id)&&n.push(d.id)}}}catch(b){_.e(b)}finally{_.f()}}var v,g=Object(s.a)(i);try{for(g.s();!(v=g.n()).done;){var O=v.value,y=this._geometry.getBodyPart(r,O);y&&-1===n.indexOf(y.id)&&n.push(y.id)}}catch(b){g.e(b)}finally{g.f()}}else{i=this._partSetsData.getActiveParts(t.definition);var E,p=Object(s.a)(i);try{for(p.s();!(E=p.n()).done;){var m=E.value,I=this._geometry.getBodyPartOfItem(r,m,e);I&&-1===n.indexOf(I.id)&&n.push(I.id)}}catch(b){p.e(b)}finally{p.f()}}return n}},{key:"getBodyPartsUnordered",value:function(t){return this._geometry.getBodyPartIdsInAvatarSet(t)}},{key:"getBodyParts",value:function(t,e,i){var n=Bt.DIRECTION_TO_ANGLE[i];return this._geometry.getBodyPartsAtAngle(t,n,e)}},{key:"getFrameBodyPartOffset",value:function(t,e,i,n){var s=this._animationData.getAction(t.definition);return s?s.getFrameBodyPartOffset(e,i,n):ye.DEFAULT_OFFSET}},{key:"getParts",value:function(t,e,i,n,r,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=null,h=null,_=[],l=null;if(null==!i)return[];var d=this._partSetsData.getActiveParts(i.definition),f=[],v=[0],g=this._animationData.getAction(i.definition);if(i.definition.isAnimation){var O=i.definition.state+"."+i.actionParameter,y=this._animationManager.getAnimation(O);if(y){v=this.getPopulatedArray(y.frameCount(i.overridingAction));var E,p=Object(s.a)(y.getAnimatedBodyPartIds(0,i.overridingAction));try{for(p.s();!(E=p.n()).done;){var m=E.value;if(m===t){var I=this._geometry.getBodyPart(n,m);if(I){var b,T=Object(s.a)(I.getDynamicParts(o));try{for(T.s();!(b=T.n()).done;){var R=b.value;d.push(R.id)}}catch(lt){T.e(lt)}finally{T.f()}}}}}catch(lt){p.e(lt)}finally{p.f()}}}var k,A=this._geometry.getParts(n,t,r,d,o),S=e.getPartTypeIds(),j=Object(s.a)(S);try{for(j.s();!(k=j.n()).done;){var N=k.value;if(!u||!u.get(N)){var D=e.getPartSetId(N),M=e.getPartColorIds(N),C=this._figureData.getSetType(N);if(C){var L=this._figureData.getPalette(C.paletteID);if(L){var U=C.getPartSet(D);if(U){a=a.concat(U.hiddenLayers);var P,w=Object(s.a)(U.parts);try{for(w.s();!(P=w.n()).done;){var F=P.value;if(A.indexOf(F.type)>-1){if(g){var x=g.getPart(F.type);_=x?x.frames:v}else _=v;h=i.definition,-1===d.indexOf(F.type)&&(h=this._defaultAction);var B=this._partSetsData.getPartDefinition(F.type),G=B?B.flippedSetType:F.type;G&&""!==G||(G=F.type),M&&M.length>F.colorLayerIndex-1&&(l=L.getColor(M[F.colorLayerIndex-1]));var H=F.colorLayerIndex>0,V=new ue(t,F.type,F.id.toString(),l,_,h,H,F.paletteMap,G);f.push(V)}}}catch(lt){w.e(lt)}finally{w.f()}}}}}}}catch(lt){j.e(lt)}finally{j.f()}var z,Y=[],W=Object(s.a)(A);try{for(W.s();!(z=W.n()).done;){var K,X=z.value,q=null,Q=!1,Z=u&&u.get(X),J=Object(s.a)(f);try{for(J.s();!(K=J.n()).done;){var $=K.value;$.partType===X&&(Z?q=$.color:(Q=!0,-1===a.indexOf(X)&&Y.push($)))}}catch(lt){J.e(lt)}finally{J.f()}if(!Q)if(Z){for(var tt=u.get(X),et=0;et<tt.length;)tt.charCodeAt(et),et++;if(g){var it=g.getPart(X);_=it?it.frames:v}else _=v;var nt=new ue(t,X,tt,q,_,i.definition,!(null==q),-1,X,!1,1);Y.push(nt)}else if(d.indexOf(X)>-1){var st=this._geometry.getBodyPartOfItem(n,X,o);if(t!==st.id);else{var rt=this._partSetsData.getPartDefinition(X),at=!1,ot=1;if(rt.appendToFigure){var ut="1";if(""!==i.actionParameter&&(ut=i.actionParameter),rt.hasStaticId()&&(ut=rt.staticId.toString()),null!=c){var ct=c.getAddData(X);ct&&(at=ct.isBlended,ot=ct.blend)}if(g){var ht=g.getPart(X);_=ht?ht.frames:v}else _=v;var _t=new ue(t,X,ut,null,_,i.definition,!1,-1,X,at,ot);Y.push(_t)}}}}}catch(lt){W.e(lt)}finally{W.f()}return Y}},{key:"getPopulatedArray",value:function(t){for(var e=[],i=0;i<t;)e.push(i),i++;return e}},{key:"getItemIds",value:function(){if(this._actionManager){var t,e=this._actionManager.getActionDefinition("CarryItem").params,i=[],n=Object(s.a)(e.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(r)}}catch(a){n.e(a)}finally{n.f()}return i}return[]}},{key:"renderManager",get:function(){return this._renderManager}},{key:"figureData",get:function(){return this._figureData}},{key:"partData",get:function(){return this._partSetsData}},{key:"animationManager",get:function(){return this._animationManager}}]),i}(b),Ne=[{id:"Move",parts:[{setType:"bd",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"bds",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"ss",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"lg",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"sh",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"lh",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"lhs",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"ls",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"lc",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"rh",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"rhs",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"rs",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"rc",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]},{setType:"ch",frames:[{number:0,assetPartDefinition:"wlk"},{number:1,assetPartDefinition:"wlk"},{number:2,assetPartDefinition:"wlk"},{number:3,assetPartDefinition:"wlk"}]}]},{id:"Wave",parts:[{setType:"lh",frames:[{number:0,assetPartDefinition:"wav"},{number:1,assetPartDefinition:"wav"}]},{setType:"lhs",frames:[{number:0,assetPartDefinition:"wav"},{number:1,assetPartDefinition:"wav"}]},{setType:"ls",frames:[{number:0,assetPartDefinition:"wav"},{number:1,assetPartDefinition:"wav"}]},{setType:"lc",frames:[{number:0,assetPartDefinition:"wav"},{number:1,assetPartDefinition:"wav"}]},{setType:"ch",frames:[{number:0,assetPartDefinition:"wav"},{number:1,assetPartDefinition:"wav"},{number:2,assetPartDefinition:"wav"},{number:3,assetPartDefinition:"wav"}]}]},{id:"Talk",parts:[{setType:"hd",frames:[{number:0,assetPartDefinition:"spk"},{number:1,assetPartDefinition:"spk"}]},{setType:"fc",frames:[{number:0,assetPartDefinition:"spk"},{number:1,assetPartDefinition:"spk"}]},{setType:"fa",frames:[{number:0,assetPartDefinition:"spk"},{number:1,assetPartDefinition:"spk"}]}]},{id:"Sign",parts:[{setType:"lh",frames:[{number:0,assetPartDefinition:"sig"}]},{setType:"li",frames:[{number:0,assetPartDefinition:"sig"}]},{setType:"ls",frames:[{number:0,assetPartDefinition:"wav"}]},{setType:"lc",frames:[{number:0,assetPartDefinition:"wav"}]}]},{id:"Respect",parts:[{setType:"lh",frames:[{number:0,assetPartDefinition:"respect",repeats:15},{number:1,assetPartDefinition:"respect",repeats:15}]},{setType:"ls",frames:[{number:0,assetPartDefinition:"wav",repeats:15},{number:1,assetPartDefinition:"wav",repeats:15}]},{setType:"lc",frames:[{number:0,assetPartDefinition:"wav",repeats:15},{number:1,assetPartDefinition:"wav",repeats:15}]}]},{id:"Blow",parts:[{setType:"rh",frames:[{number:0,assetPartDefinition:"blw",repeats:10},{number:1,assetPartDefinition:"blw",repeats:10}]},{setType:"rs",frames:[{number:0,assetPartDefinition:"drk"}]},{setType:"rc",frames:[{number:0,assetPartDefinition:"drk"}]},{setType:"ri",frames:[{number:0,assetPartDefinition:""}]},{setType:"ey",frames:[{number:0,assetPartDefinition:"std",repeats:10},{number:0,assetPartDefinition:"eyb",repeats:10}]},{setType:"fc",frames:[{number:0,assetPartDefinition:"std",repeats:10},{number:0,assetPartDefinition:"blw",repeats:10}]}]},{id:"Laugh",parts:[{setType:"rh",frames:[{number:0,assetPartDefinition:"blw"}]},{setType:"rs",frames:[{number:0,assetPartDefinition:"drk"}]},{setType:"rc",frames:[{number:0,assetPartDefinition:"drk"}]},{setType:"ri",frames:[{number:0,assetPartDefinition:""}]},{setType:"ey",frames:[{number:0,assetPartDefinition:"std",repeats:2}]},{setType:"fc",frames:[{number:0,assetPartDefinition:"sml"}]}],offsets:{frames:[{id:0,directions:[{id:0,bodyParts:[{id:"head",dx:0,dy:1}]},{id:1,bodyParts:[{id:"head",dx:0,dy:1}]},{id:2,bodyParts:[{id:"head",dx:0,dy:1}]},{id:3,bodyParts:[{id:"head",dx:0,dy:1}]},{id:4,bodyParts:[{id:"head",dx:0,dy:1}]},{id:5,bodyParts:[{id:"head",dx:0,dy:1}]},{id:6,bodyParts:[{id:"head",dx:0,dy:1}]},{id:7,bodyParts:[{id:"head",dx:0,dy:1}]}]},{id:1,directions:[{id:0,bodyParts:[{id:"head",dx:0,dy:0}]},{id:1,bodyParts:[{id:"head",dx:0,dy:0}]},{id:2,bodyParts:[{id:"head",dx:0,dy:0}]},{id:3,bodyParts:[{id:"head",dx:0,dy:0}]},{id:4,bodyParts:[{id:"head",dx:0,dy:0}]},{id:5,bodyParts:[{id:"head",dx:0,dy:0}]},{id:6,bodyParts:[{id:"head",dx:0,dy:0}]},{id:7,bodyParts:[{id:"head",dx:0,dy:0}]}]}]}}],De={direction:0,camera:{x:0,y:0,z:10},canvases:[{scale:"h",geometries:[{id:"vertical",width:90,height:130,dx:0,dy:0},{id:"sitting",width:90,height:130,dx:0,dy:0},{id:"horizontal",width:128,height:80,dx:30,dy:0},{id:"swhorizontal",width:192,height:120,dx:0,dy:-40}]},{scale:"sh",geometries:[{id:"vertical",width:45,height:72,dx:0,dy:0},{id:"sitting",width:45,height:72,dx:0,dy:0},{id:"horizontal",width:64,height:50,dx:15,dy:-10},{id:"swhorizontal",width:96,height:70,dx:0,dy:-20},{id:"swim",width:64,height:70,dx:25,dy:10}]}],avatarSets:[{id:"full",avatarSets:[{id:"body",main:!0,bodyParts:[{id:"top"},{id:"bottom"},{id:"behind"},{id:"torso"},{id:"leftitem"},{id:"rightitem"},{id:"leftarm"},{id:"rightarm"}]},{id:"head",bodyParts:[{id:"head"}]}]}],types:[{id:"vertical",bodyParts:[{id:"top",x:0,y:0,z:0,radius:2},{id:"bottom",x:0,y:0,z:0,radius:.001},{id:"behind",x:0,y:0,z:.2,radius:.3},{id:"torso",x:0,y:0,z:0,radius:.4,items:[{id:"bd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"bds",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"ch",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"sh",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"lg",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"ss",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"cp",x:0,y:0,z:0,radius:.045,nx:0,ny:0,nz:-1,double:!1},{id:"wa",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!1},{id:"cc",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ca",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"li",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"ri",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftarm",x:-1,y:0,z:-.51,radius:.5,items:[{id:"lh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"lhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"ls",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"lc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightarm",x:1,y:0,z:-.51,radius:.5,items:[{id:"rh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rs",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"rc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"head",x:0,y:0,z:0,radius:.5,items:[{id:"hd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"fc",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ey",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"hr",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!0},{id:"hrb",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!0},{id:"fa",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ea",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1},{id:"ha",x:0,y:0,z:0,radius:.08,nx:0,ny:0,nz:-1,double:!1},{id:"he",x:0,y:0,z:0,radius:.09,nx:0,ny:0,nz:-1,double:!1}]}]},{id:"sitting",bodyParts:[{id:"top",x:0,y:0,z:0,radius:2},{id:"bottom",x:0,y:0,z:0,radius:.001},{id:"behind",x:0,y:0,z:.2,radius:.3},{id:"torso",x:0,y:0,z:0,radius:.4,items:[{id:"bd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"bds",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"ch",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"sh",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"lg",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ss",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"cp",x:0,y:0,z:0,radius:.045,nx:0,ny:0,nz:-1,double:!1},{id:"wa",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!1},{id:"cc",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ca",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"li",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"ri",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftarm",x:-1,y:0,z:-.51,radius:.5,items:[{id:"lh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"lhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"ls",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"lc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightarm",x:1,y:0,z:-.51,radius:.5,items:[{id:"rh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rs",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"rc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"head",x:0,y:0,z:0,radius:.5,items:[{id:"hd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"fc",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ey",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"hr",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!0},{id:"hrb",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!0},{id:"fa",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ea",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1},{id:"ha",x:0,y:0,z:0,radius:.08,nx:0,ny:0,nz:-1,double:!1},{id:"he",x:0,y:0,z:0,radius:.09,nx:0,ny:0,nz:-1,double:!1}]}]},{id:"horizontal",bodyParts:[{id:"torso",x:0,y:0,z:0,radius:.4,items:[{id:"bd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"bds",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"ch",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"cp",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1},{id:"sh",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"lg",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"ss",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"wa",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!1},{id:"cc",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ca",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"li",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"ri",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftarm",x:-1,y:0,z:-.51,radius:.6,items:[{id:"lh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"lhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"ls",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"lc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightarm",x:1,y:0,z:-.51,radius:.6,items:[{id:"rh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rs",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"rc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"head",x:0,y:0,z:0,radius:.5,items:[{id:"hd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"fc",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ey",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"hr",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!0},{id:"hrb",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!0},{id:"fa",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ea",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1},{id:"ha",x:0,y:0,z:0,radius:.08,nx:0,ny:0,nz:-1,double:!1},{id:"he",x:0,y:0,z:0,radius:.09,nx:0,ny:0,nz:-1,double:!1}]}]},{id:"swhorizontal",bodyParts:[{id:"torso",x:0,y:0,z:0,radius:.4,items:[{id:"bd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"bds",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"ch",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"cp",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1},{id:"sh",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!1},{id:"lg",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"ss",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"wa",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!1},{id:"cc",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ca",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"li",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightitem",x:0,y:0,z:-.29,radius:.3,items:[{id:"ri",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1}]},{id:"leftarm",x:-1,y:0,z:-.51,radius:.6,items:[{id:"lh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"lhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"ls",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"lc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"rightarm",x:1,y:0,z:-.51,radius:.6,items:[{id:"rh",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rhs",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!1},{id:"rs",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"rc",x:0,y:0,z:0,radius:.025,nx:0,ny:0,nz:-1,double:!1}]},{id:"head",x:0,y:0,z:0,radius:.5,items:[{id:"hd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"fc",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ey",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"hr",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!0},{id:"hrb",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!0},{id:"fa",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ea",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1},{id:"ha",x:0,y:0,z:0,radius:.08,nx:0,ny:0,nz:-1,double:!1},{id:"he",x:0,y:0,z:0,radius:.09,nx:0,ny:0,nz:-1,double:!1}]}]},{id:"swim",bodyParts:[{id:"torso",x:0,y:0,z:0,radius:.4,items:[{id:"bds",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"ss",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1}]},{id:"head",x:0,y:0,z:0,radius:.5,items:[{id:"hd",x:0,y:0,z:0,radius:.01,nx:0,ny:0,nz:-1,double:!0},{id:"fc",x:0,y:0,z:0,radius:.02,nx:0,ny:0,nz:-1,double:!1},{id:"ey",x:0,y:0,z:0,radius:.03,nx:0,ny:0,nz:-1,double:!1},{id:"hr",x:0,y:0,z:0,radius:.04,nx:0,ny:0,nz:-1,double:!0},{id:"hrb",x:0,y:0,z:0,radius:.05,nx:0,ny:0,nz:-1,double:!0},{id:"fa",x:0,y:0,z:0,radius:.06,nx:0,ny:0,nz:-1,double:!1},{id:"ea",x:0,y:0,z:0,radius:.07,nx:0,ny:0,nz:-1,double:!1},{id:"ha",x:0,y:0,z:0,radius:.08,nx:0,ny:0,nz:-1,double:!1},{id:"he",x:0,y:0,z:0,radius:.09,nx:0,ny:0,nz:-1,double:!1}]}]}]},Me={partSet:[{setType:"ri",flippedSetType:"ri"},{setType:"ri",flippedSetType:"ri"},{setType:"rh",flippedSetType:"lh"},{setType:"rhs",flippedSetType:"lhs"},{setType:"rs",swim:"0",flippedSetType:"ls"},{setType:"rc",flippedSetType:"lc"},{setType:"bd"},{setType:"bds"},{setType:"ss"},{setType:"sh"},{setType:"lg"},{setType:"ch"},{setType:"cp"},{setType:"cc"},{setType:"hd"},{setType:"fc"},{setType:"ey"},{setType:"hr"},{setType:"hrb",removeSetType:"hr"},{setType:"li",flippedSetType:"li"},{setType:"lh",flippedSetType:"rh"},{setType:"lhs",flippedSetType:"rhs"},{setType:"ls",flippedSetType:"rs"},{setType:"lc",flippedSetType:"rc"},{setType:"wa"},{setType:"ea"},{setType:"ca"},{setType:"fa"},{setType:"ha"},{setType:"he"}],activePartSets:[{id:"figure",activeParts:[{setType:"rh"},{setType:"rh"},{setType:"rhs"},{setType:"rs"},{setType:"rc"},{setType:"bd"},{setType:"bds"},{setType:"ss"},{setType:"sh"},{setType:"lg"},{setType:"ch"},{setType:"cp"},{setType:"cc"},{setType:"wa"},{setType:"hd"},{setType:"fc"},{setType:"ey"},{setType:"hr"},{setType:"hrb"},{setType:"lh"},{setType:"lhs"},{setType:"ls"},{setType:"lc"},{setType:"ea"},{setType:"ca"},{setType:"fa"},{setType:"ha"},{setType:"he"}]},{id:"head",activeParts:[{setType:"hd"},{setType:"fc"},{setType:"ey"},{setType:"hr"},{setType:"hrb"},{setType:"ea"},{setType:"fa"},{setType:"ha"},{setType:"he"}]},{id:"speak",activeParts:[{setType:"hd"},{setType:"hr"},{setType:"hrb"},{setType:"fc"},{setType:"fa"},{setType:"ha"}]},{id:"gesture",activeParts:[{setType:"ey"},{setType:"fc"}]},{id:"eye",activeParts:[{setType:"ey"}]},{id:"handRight",activeParts:[{setType:"rh"},{setType:"rhs"},{setType:"rs"},{setType:"rc"},{setType:"ri"}]},{id:"handRightAndHead",activeParts:[{setType:"rh"},{setType:"rhs"},{setType:"rs"},{setType:"rc"},{setType:"ri"},{setType:"ey"},{setType:"fc"},{setType:"hd"}]},{id:"handLeft",activeParts:[{setType:"lh"},{setType:"lhs"},{setType:"ls"},{setType:"lc"},{setType:"li"}]},{id:"walk",activeParts:[{setType:"bd"},{setType:"bds"},{setType:"ss"},{setType:"lg"},{setType:"lh"},{setType:"lhs"},{setType:"rh"},{setType:"rhs"},{setType:"ls"},{setType:"lc"},{setType:"rs"},{setType:"rc"},{setType:"sh"}]},{id:"sit",activeParts:[{setType:"bd"},{setType:"bds"},{setType:"ss"},{setType:"lg"},{setType:"sh"},{setType:"cc"}]},{id:"itemRight",activeParts:[{setType:"ri"}]}]},Ce=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._library=void 0,s._library=n,s}return Object(a.a)(i,[{key:"library",get:function(){return this._library}}]),i}(E.a);Ce.DOWNLOAD_COMPLETE="ARELE_DOWNLOAD_COMPLETE";var Le=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this))._state=void 0,o._libraryName=void 0,o._revision=void 0,o._downloadUrl=void 0,o._assets=void 0,o._animation=void 0,o._state=i.NOT_LOADED,o._libraryName=t,o._revision=n,o._downloadUrl=a,o._assets=s,o._animation=null,o._downloadUrl=o._downloadUrl.replace(/%libname%/gi,o._libraryName),o._downloadUrl=o._downloadUrl.replace(/%revision%/gi,o._revision),o._assets.getCollection(o._libraryName)&&(o._state=i.LOADED),o}return Object(a.a)(i,[{key:"downloadAsset",value:function(){var t=this;if(this._assets&&this._state!==i.LOADING&&this._state!==i.LOADED){if(this._assets.getCollection(this._libraryName))return this._state=i.LOADED,void this.dispatchEvent(new Ce(Ce.DOWNLOAD_COMPLETE,this));this._state=i.LOADING,this._assets.downloadAsset(this._downloadUrl,(function(e){if(e){t._state=i.LOADED;var n=t._assets.getCollection(t._libraryName);n&&(t._animation=n.data.animations),t.dispatchEvent(new Ce(Ce.DOWNLOAD_COMPLETE,t))}}))}}},{key:"libraryName",get:function(){return this._libraryName}},{key:"animation",get:function(){return this._animation}},{key:"isLoaded",get:function(){return this._state===i.LOADED}}]),i}(b);Le.DOWNLOAD_COMPLETE="EADL_DOWNLOAD_COMPLETE",Le.NOT_LOADED=0,Le.LOADING=1,Le.LOADED=2;var Ue=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._assets=void 0,s._structure=void 0,s._missingMandatoryLibs=void 0,s._effectMap=void 0,s._initDownloadBuffer=void 0,s._effectListeners=void 0,s._incompleteEffects=void 0,s._pendingDownloadQueue=void 0,s._currentDownloads=void 0,s._libraryNames=void 0,s._isReady=void 0,s._assets=t,s._structure=n,s._missingMandatoryLibs=gD.instance.getConfiguration("avatar.mandatory.effect.libraries"),s._effectMap=new Map,s._effectListeners=new Map,s._incompleteEffects=new Map,s._initDownloadBuffer=[],s._pendingDownloadQueue=[],s._currentDownloads=[],s._libraryNames=[],s._isReady=!1,s.onLibraryLoaded=s.onLibraryLoaded.bind(Object(l.a)(s)),s.onAvatarRenderReady=s.onAvatarRenderReady.bind(Object(l.a)(s)),s.loadEffectMap(),s._structure.renderManager.events.addEventListener(St.AVATAR_RENDER_READY,s.onAvatarRenderReady),s}return Object(a.a)(i,[{key:"loadEffectMap",value:function(){var t=this,e=new XMLHttpRequest;try{e.open("GET",gD.instance.getConfiguration("avatar.effectmap.url")),e.send(),e.onloadend=function(n){if(e.responseText){var s=JSON.parse(e.responseText);t.processEffectMap(s.effects),t.processMissingLibraries(),t._isReady=!0,t.dispatchEvent(new E.a(i.DOWNLOADER_READY))}},e.onerror=function(t){throw new Error("invalid_avatar_effect_map")}}catch(n){I.log(n)}}},{key:"processEffectMap",value:function(t){if(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.id,a=n.lib,o=n.revision||"";if(!(this._libraryNames.indexOf(a)>=0)){this._libraryNames.push(a);var u=new Le(a,o,this._assets,gD.instance.getConfiguration("avatar.asset.effect.url"));u.addEventListener(Ce.DOWNLOAD_COMPLETE,this.onLibraryLoaded);var c=this._effectMap.get(r);c||(c=[]),c.push(u),this._effectMap.set(r,c)}}}}catch(h){i.e(h)}finally{i.f()}}}},{key:"downloadAvatarEffect",value:function(t,e){if(this._isReady&&this._structure.renderManager.isReady){var i=this.getAvatarEffectPendingLibraries(t);if(i&&i.length){if(e&&!e.disposed){var n=this._effectListeners.get(t.toString());n||(n=[]),n.push(e),this._effectListeners.set(t.toString(),n)}this._incompleteEffects.set(t.toString(),i);var r,a=Object(s.a)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&this.downloadLibrary(o)}}catch(u){a.e(u)}finally{a.f()}}else e&&!e.disposed&&e.resetEffect(t)}else this._initDownloadBuffer.push([t,e])}},{key:"onAvatarRenderReady",value:function(t){if(t){var e,i=Object(s.a)(this._initDownloadBuffer);try{for(i.s();!(e=i.n()).done;){var r=Object(n.a)(e.value,2),a=r[0],o=r[1];this.downloadAvatarEffect(a,o)}}catch(u){i.e(u)}finally{i.f()}this._initDownloadBuffer=[]}}},{key:"onLibraryLoaded",value:function(t){if(t&&t.library){var e=[];this._structure.registerAnimation(t.library.animation);var r,a=Object(s.a)(this._incompleteEffects.entries());try{for(a.s();!(r=a.n()).done;){var o,u=Object(n.a)(r.value,2),c=u[0],h=u[1],_=!0,l=Object(s.a)(h);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(d&&!d.isLoaded){_=!1;break}}}catch(T){l.e(T)}finally{l.f()}if(_){e.push(c);var f,v=this._effectListeners.get(c),g=Object(s.a)(v);try{for(g.s();!(f=g.n()).done;){var O=f.value;O&&!O.disposed&&O.resetEffect(parseInt(c))}}catch(T){g.e(T)}finally{g.f()}this._effectListeners.delete(c),this.dispatchEvent(new E.a(i.LIBRARY_LOADED))}}}catch(T){a.e(T)}finally{a.f()}for(var y=0,p=e;y<p.length;y++){var m=p[y];this._incompleteEffects.delete(m)}for(var I=0;I<this._currentDownloads.length;){var b=this._currentDownloads[I];b&&b.libraryName===t.library.libraryName&&this._currentDownloads.splice(I,1),I++}}}},{key:"processMissingLibraries",value:function(){var t,e=this._missingMandatoryLibs.slice(),i=Object(s.a)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n){var r=this._effectMap.get(n);if(r){var a,o=Object(s.a)(r);try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&this.downloadLibrary(u)}}catch(c){o.e(c)}finally{o.f()}}}}}catch(c){i.e(c)}finally{i.f()}}},{key:"isAvatarEffectReady",value:function(t){return!(!this._isReady||!this._structure.renderManager.isReady)&&!this.getAvatarEffectPendingLibraries(t).length}},{key:"getAvatarEffectPendingLibraries",value:function(t){var e=[];if(!this._structure)return e;var i=this._effectMap.get(t.toString());if(i){var n,r=Object(s.a)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&!a.isLoaded&&(-1===e.indexOf(a)&&e.push(a))}}catch(o){r.e(o)}finally{r.f()}}return e}},{key:"downloadLibrary",value:function(t){t&&!t.isLoaded&&(this._pendingDownloadQueue.indexOf(t)>=0||this._currentDownloads.indexOf(t)>=0||(this._pendingDownloadQueue.push(t),this.processDownloadQueue()))}},{key:"processDownloadQueue",value:function(){for(;this._pendingDownloadQueue.length;){this._pendingDownloadQueue[0].downloadAsset(),this._currentDownloads.push(this._pendingDownloadQueue.shift())}}}]),i}(b);Ue.DOWNLOADER_READY="EADM_DOWNLOADER_READY",Ue.LIBRARY_LOADED="EADM_LIBRARY_LOADED",Ue.MAX_DOWNLOADS=2;var Pe=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){return Object(r.a)(this,i),e.call(this,t,n,s,a,o,null)}return Object(a.a)(i,[{key:"isPlaceholder",value:function(){return!0}}]),i}(Zt),we=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._dataReceiver=void 0,s._dataReceiver=n,s.download(t),s}return Object(a.a)(i,[{key:"download",value:function(t){var e=this,n=new XMLHttpRequest;try{n.open("GET",t),n.send(),n.onloadend=function(t){var s=n.responseText;if(!s||!s.length)throw new Error("invalid_figure_data");e._dataReceiver&&e._dataReceiver.appendJSON(JSON.parse(s)),e.dispatchEvent(new E.a(i.AVATAR_STRUCTURE_DONE))},n.onerror=function(t){throw new Error("invalid_avatar_figure_data")}}catch(s){I.log(s)}}}]),i}(b);we.AVATAR_STRUCTURE_DONE="AVATAR_STRUCTURE_DONE";var Fe=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._aliasCollection=void 0,t._structure=void 0,t._avatarAssetDownloadManager=void 0,t._effectAssetDownloadManager=void 0,t._placeHolderFigure=void 0,t._figureMapReady=void 0,t._effectMapReady=void 0,t._actionsReady=void 0,t._structureReady=void 0,t._geometryReady=void 0,t._partSetsReady=void 0,t._animationsReady=void 0,t._isReady=void 0,t._structure=null,t._avatarAssetDownloadManager=null,t._placeHolderFigure=null,t._figureMapReady=!1,t._effectMapReady=!1,t._actionsReady=!1,t._geometryReady=!1,t._partSetsReady=!1,t._animationsReady=!1,t._isReady=!1,t.onAvatarAssetDownloaderReady=t.onAvatarAssetDownloaderReady.bind(Object(l.a)(t)),t.onAvatarAssetDownloaded=t.onAvatarAssetDownloaded.bind(Object(l.a)(t)),t.onEffectAssetDownloaderReady=t.onEffectAssetDownloaderReady.bind(Object(l.a)(t)),t.onEffectAssetDownloaded=t.onEffectAssetDownloaded.bind(Object(l.a)(t)),t.onAvatarStructureDownloadDone=t.onAvatarStructureDownloadDone.bind(Object(l.a)(t)),t}return Object(a.a)(i,[{key:"onInit",value:function(){this._structure=new je(this),this.loadGeometry(),this.loadPartSets(),this.loadActions(),this.loadAnimations(),this.loadFigureData(),this._aliasCollection=new Rt(this,gD.instance.core.asset),this._aliasCollection.init(),this._avatarAssetDownloadManager||(this._avatarAssetDownloadManager=new jt(gD.instance.core.asset,this._structure),this._avatarAssetDownloadManager.addEventListener(jt.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.addEventListener(jt.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager||(this._effectAssetDownloadManager=new Ue(gD.instance.core.asset,this._structure),this._effectAssetDownloadManager.addEventListener(Ue.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.addEventListener(Ue.LIBRARY_LOADED,this.onEffectAssetDownloaded)),this.checkReady()}},{key:"onDispose",value:function(){this._avatarAssetDownloadManager&&(this._avatarAssetDownloadManager.removeEventListener(jt.DOWNLOADER_READY,this.onAvatarAssetDownloaderReady),this._avatarAssetDownloadManager.removeEventListener(jt.LIBRARY_LOADED,this.onAvatarAssetDownloaded)),this._effectAssetDownloadManager&&(this._effectAssetDownloadManager.removeEventListener(Ue.DOWNLOADER_READY,this.onEffectAssetDownloaderReady),this._effectAssetDownloadManager.removeEventListener(Ue.LIBRARY_LOADED,this.onEffectAssetDownloaded))}},{key:"loadGeometry",value:function(){this._structure&&(this._structure.initGeometry(De),this._geometryReady=!0,this.checkReady())}},{key:"loadPartSets",value:function(){this._structure&&(this._structure.initPartSets(Me),this._partSetsReady=!0,this.checkReady())}},{key:"loadActions",value:function(){var t=this,e=gD.instance.getConfiguration("avatar.default.actions");e&&this._structure.initActions(gD.instance.core.asset,e);var i=new XMLHttpRequest;try{i.open("GET",gD.instance.getConfiguration("avatar.actions.url")),i.send(),i.onloadend=function(e){t._structure&&(t._structure.updateActions(JSON.parse(i.responseText)),t._actionsReady=!0,t.checkReady())},i.onerror=function(t){throw new Error("invalid_avatar_actions")}}catch(n){this.logger.error(n)}}},{key:"loadAnimations",value:function(){this._structure&&(this._structure.initAnimation(Ne),this._animationsReady=!0,this.checkReady())}},{key:"loadFigureData",value:function(){var t=gD.instance.getConfiguration("avatar.default.figuredata");t&&"string"!==typeof t?(this._structure&&this._structure.initFigureData(t),new we(gD.instance.getConfiguration("avatar.figuredata.url"),this._structure.figureData).addEventListener(we.AVATAR_STRUCTURE_DONE,this.onAvatarStructureDownloadDone)):I.log("XML figuredata is no longer supported.")}},{key:"onAvatarStructureDownloadDone",value:function(t){this._structureReady=!0,this._structure.init(),this.checkReady()}},{key:"onAvatarAssetDownloaderReady",value:function(t){t&&(this._figureMapReady=!0,this.checkReady())}},{key:"onAvatarAssetDownloaded",value:function(t){t&&this._aliasCollection.reset()}},{key:"onEffectAssetDownloaderReady",value:function(t){t&&(this._effectMapReady=!0,this.checkReady())}},{key:"onEffectAssetDownloaded",value:function(t){t&&this._aliasCollection.reset()}},{key:"checkReady",value:function(){this._isReady||this._geometryReady&&this._partSetsReady&&this._actionsReady&&this._animationsReady&&this._figureMapReady&&this._effectMapReady&&this._structureReady&&(this._isReady=!0,this.events&&this.events.dispatchEvent(new E.a(St.AVATAR_RENDER_READY)))}},{key:"createFigureContainer",value:function(t){return new Nt(t)}},{key:"isFigureContainerReady",value:function(t){return!!this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.isAvatarFigureContainerReady(t)}},{key:"createAvatarImage",value:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!this._structure||!this._avatarAssetDownloadManager)return null;var a=new Nt(t);return n&&this.validateAvatarFigure(a,n),this._avatarAssetDownloadManager.isAvatarFigureContainerReady(a)?new Zt(this._structure,this._aliasCollection,a,e,this._effectAssetDownloadManager,r):(this._placeHolderFigure||(this._placeHolderFigure=new Nt(i.DEFAULT_FIGURE)),this._avatarAssetDownloadManager.downloadAvatarFigure(a,s),new Pe(this._structure,this._aliasCollection,this._placeHolderFigure,e,this._effectAssetDownloadManager))}},{key:"downloadAvatarFigure",value:function(t,e){this._avatarAssetDownloadManager&&this._avatarAssetDownloadManager.downloadAvatarFigure(t,e)}},{key:"validateAvatarFigure",value:function(t,e){var i=!1,n=this._structure.getMandatorySetTypeIds(e,2);if(n){var r,a=this._structure.figureData,o=Object(s.a)(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(t.hasPartType(u)){var c=a.getSetType(u);if(c)if(!c.getPartSet(t.getPartSetId(u))){var h=this._structure.getDefaultPartSet(u,e);h&&(t.updatePart(u,h.id,[0]),i=!0)}}else{var _=this._structure.getDefaultPartSet(u,e);_&&(t.updatePart(u,_.id,[0]),i=!0)}}}catch(l){o.e(l)}finally{o.f()}}return!i}},{key:"getFigureClubLevel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this._structure)return 0;for(var n=this._structure.figureData,r=Array.from(t.getPartTypeIds()),a=0,o=0,u=r;o<u.length;o++){var c=u[o],h=n.getSetType(c);if(h){var _=t.getPartSetId(c),l=h.getPartSet(_);if(l){a=Math.max(l.clubLevel,a);var d,f=n.getPalette(h.paletteID),v=t.getPartColorIds(c),g=Object(s.a)(v);try{for(g.s();!(d=g.n()).done;){var O=d.value,y=f.getColor(O);y&&(a=Math.max(y.clubLevel,a))}}catch(b){g.e(b)}finally{g.f()}}}}i||(i=this._structure.getBodyPartsUnordered(Qt.FULL));var E,p=Object(s.a)(i);try{for(p.s();!(E=p.n()).done;){var m=E.value,I=n.getSetType(m);I&&(-1===r.indexOf(m)&&(a=Math.max(I.optionalFromClubLevel(e),a)))}}catch(b){p.e(b)}finally{p.f()}return a}},{key:"isValidFigureSetForGender",value:function(t,e){var i=this.structureData.getFigurePartSet(t);return!(!i||"U"!==i.gender.toUpperCase()&&i.gender.toUpperCase()!==e.toUpperCase())}},{key:"getFigureStringWithFigureIds",value:function(t,e,i){var n=new bt;n.loadAvatarData(t,e);var r,a=this.resolveFigureSets(i),o=Object(s.a)(a);try{for(o.s();!(r=o.n()).done;){var u=r.value;n.savePartData(u.type,u.id,n.getColourIds(u.type))}}catch(c){o.e(c)}finally{o.f()}return n.getFigureString()}},{key:"resolveFigureSets",value:function(t){var e,i=this.structureData,n=[],r=Object(s.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=i.getFigurePartSet(a);o&&n.push(o)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"getMandatoryAvatarPartSetIds",value:function(t,e){return this._structure?this._structure.getMandatorySetTypeIds(t,e):null}},{key:"getAssetByName",value:function(t){return this._aliasCollection.getAsset(t)}},{key:"assets",get:function(){return gD.instance.core.asset}},{key:"isReady",get:function(){return this._isReady}},{key:"structure",get:function(){return this._structure}},{key:"structureData",get:function(){return this._structure?this._structure.figureData:null}},{key:"downloadManager",get:function(){return this._avatarAssetDownloadManager}}]),i}(w);Fe.DEFAULT_FIGURE="hd-99999-99999";var xe=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._object=void 0,s._object=n,s}return Object(a.a)(i,[{key:"object",get:function(){return this._object}},{key:"objectId",get:function(){return this._object?this._object.id:-1}},{key:"objectType",get:function(){return this._object?this._object.type:null}}]),i}(E.a),Be=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(r.a)(this,i),(a=e.call(this,t,n))._eventId="",a._altKey=void 0,a._ctrlKey=void 0,a._shiftKey=void 0,a._buttonDown=void 0,a._localX=void 0,a._localY=void 0,a._spriteOffsetX=void 0,a._spriteOffsetY=void 0,a._eventId=s,a._altKey=o,a._ctrlKey=u,a._shiftKey=c,a._buttonDown=h,a}return Object(a.a)(i,[{key:"eventId",get:function(){return this._eventId}},{key:"altKey",get:function(){return this._altKey}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"buttonDown",get:function(){return this._buttonDown}},{key:"localX",get:function(){return this._localX},set:function(t){this._localX=t}},{key:"localY",get:function(){return this._localY},set:function(t){this._localY=t}},{key:"spriteOffsetX",get:function(){return this._spriteOffsetX},set:function(t){this._spriteOffsetX=t}},{key:"spriteOffsetY",get:function(){return this._spriteOffsetY},set:function(t){this._spriteOffsetY=t}}]),i}(xe);Be.CLICK="ROE_MOUSE_CLICK",Be.DOUBLE_CLICK="ROE_MOUSE_DOUBLE_CLICK",Be.MOUSE_MOVE="ROE_MOUSE_MOVE",Be.MOUSE_DOWN="ROE_MOUSE_DOWN",Be.MOUSE_DOWN_LONG="ROE_MOUSE_DOWN_LONG",Be.MOUSE_UP="ROE_MOUSE_UP",Be.MOUSE_ENTER="ROE_MOUSE_ENTER",Be.MOUSE_LEAVE="ROE_MOUSE_LEAVE";var Ge=function(){function t(e,i,n,s,a,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],_=arguments.length>9&&void 0!==arguments[9]&&arguments[9],l=arguments.length>10&&void 0!==arguments[10]&&arguments[10],d=arguments.length>11&&void 0!==arguments[11]&&arguments[11];Object(r.a)(this,t),this._type=void 0,this._eventId=void 0,this._canvasId=void 0,this._spriteTag=void 0,this._screenX=void 0,this._screenY=void 0,this._localX=void 0,this._localY=void 0,this._ctrlKey=void 0,this._altKey=void 0,this._shiftKey=void 0,this._buttonDown=void 0,this._spriteOffsetX=void 0,this._spriteOffsetY=void 0,this._type=e,this._eventId=i,this._canvasId=n,this._spriteTag=s,this._screenX=a,this._screenY=o,this._localX=u,this._localY=c,this._ctrlKey=h,this._altKey=_,this._shiftKey=l,this._buttonDown=d,this._spriteOffsetX=0,this._spriteOffsetY=0}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"eventId",get:function(){return this._eventId}},{key:"canvasId",get:function(){return this._canvasId}},{key:"spriteTag",get:function(){return this._spriteTag}},{key:"screenX",get:function(){return this._screenX}},{key:"screenY",get:function(){return this._screenY}},{key:"localX",get:function(){return this._localX}},{key:"localY",get:function(){return this._localY}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"altKey",get:function(){return this._altKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"buttonDown",get:function(){return this._buttonDown}},{key:"spriteOffsetX",get:function(){return this._spriteOffsetX},set:function(t){this._spriteOffsetX=t}},{key:"spriteOffsetY",get:function(){return this._spriteOffsetY},set:function(t){this._spriteOffsetY=t}}]),t}(),He=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(E.a),Ve=function(){function t(e,i){Object(r.a)(this,t),this._location=void 0,this._direction=void 0,this._location=e,this._direction=i}return Object(a.a)(t,[{key:"location",get:function(){return this._location}},{key:"direction",get:function(){return this._direction}}]),t}(),ze=Object(a.a)((function t(){Object(r.a)(this,t)}));ze.MATCH_ALL_PIXELS=-1,ze.MATCH_OPAQUE_PIXELS=128,ze.MATCH_NOTHING=256;var Ye=Object(a.a)((function t(){Object(r.a)(this,t)}));Ye.DEFAULT=1,Ye.ROOM_PLANE=2,Ye.AVATAR=3,Ye.AVATAR_OWN=4;var We=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._events=void 0,t._object=void 0,t._time=void 0,t._object=null,t._events=null,t._time=0,t}return Object(a.a)(i,[{key:"initialize",value:function(t){}},{key:"onDispose",value:function(){this._object=null}},{key:"update",value:function(t){this._time=t}},{key:"processUpdateMessage",value:function(t){t&&this._object&&(this._object.setLocation(t.location),this._object.setDirection(t.direction))}},{key:"getEventTypes",value:function(){return[]}},{key:"mergeTypes",value:function(t,e){var i,n=t.concat(),r=Object(s.a)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;!a||n.indexOf(a)>=0||n.push(a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"mouseEvent",value:function(t,e){}},{key:"useObject",value:function(){}},{key:"setObject",value:function(t){if(this._object!==t){if(this._object&&this._object.setLogic(null),!t)return this.dispose(),void(this._object=null);this._object=t,this._object.setLogic(this)}}},{key:"tearDown",value:function(){}},{key:"object",get:function(){return this._object}},{key:"eventDispatcher",get:function(){return this._events},set:function(t){this._events=t}},{key:"widget",get:function(){return null}},{key:"contextMenu",get:function(){return null}},{key:"time",get:function(){return this._time}}]),i}(m),Ke=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._type=void 0,this._spriteType=void 0,this._texture=void 0,this._container=void 0,this._width=void 0,this._height=void 0,this._offsetX=void 0,this._offsetY=void 0,this._flipH=void 0,this._flipV=void 0,this._direction=void 0,this._alpha=void 0,this._blendMode=void 0,this._color=void 0,this._relativeDepth=void 0,this._varyingDepth=void 0,this._libraryAssetName=void 0,this._clickHandling=void 0,this._visible=void 0,this._tag=void 0,this._posture=void 0,this._alphaTolerance=void 0,this._filters=void 0,this._updateCounter=void 0,this._updateContainer=void 0,this._id=t.SPRITE_COUNTER++,this._name="",this._type="",this._spriteType=Ye.DEFAULT,this._texture=null,this._container=null,this._width=0,this._height=0,this._offsetX=0,this._offsetY=0,this._flipH=!1,this._flipV=!1,this._direction=0,this._alpha=255,this._blendMode=g.b.NORMAL,this._color=16777215,this._relativeDepth=0,this._varyingDepth=!1,this._libraryAssetName="",this._clickHandling=!1,this._visible=!0,this._tag="",this._posture=null,this._alphaTolerance=ze.MATCH_OPAQUE_PIXELS,this._filters=[],this._updateCounter=0,this._updateContainer=!1}return Object(a.a)(t,[{key:"dispose",value:function(){this._texture=null,this._width=0,this._height=0}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"name",get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._updateCounter++)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"spriteType",get:function(){return this._spriteType},set:function(t){this._spriteType=t}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(t&&(this._width=t.width,this._height=t.height),this._texture=t,this._updateCounter++)}},{key:"container",get:function(){return this._container},set:function(t){this._container!==t&&(this.texture=c.t.EMPTY,t&&(this._width=t.width,this._height=t.height),this._container=t,this._updateCounter++,this._updateContainer=!0)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"offsetX",get:function(){return this._offsetX},set:function(t){this._offsetX!==t&&(this._offsetX=t,this._updateCounter++)}},{key:"offsetY",get:function(){return this._offsetY},set:function(t){this._offsetY!==t&&(this._offsetY=t,this._updateCounter++)}},{key:"flipH",get:function(){return this._flipH},set:function(t){this._flipH!==t&&(this._flipH=t,this._updateCounter++)}},{key:"flipV",get:function(){return this._flipV},set:function(t){this._flipV!==t&&(this._flipV=t,this._updateCounter++)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){t&=255,this._alpha!==t&&(this._alpha=t,this._updateCounter++)}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode!==t&&(this._blendMode=t,this._updateCounter++)}},{key:"color",get:function(){return this._color},set:function(t){t&=16777215,this._color!==t&&(this._color=t,this._updateCounter++)}},{key:"relativeDepth",get:function(){return this._relativeDepth},set:function(t){this._relativeDepth!==t&&(this._relativeDepth=t,this._updateCounter++)}},{key:"varyingDepth",get:function(){return this._varyingDepth},set:function(t){t!==this._varyingDepth&&(this._varyingDepth=t,this._updateCounter++)}},{key:"libraryAssetName",get:function(){return this._libraryAssetName},set:function(t){this._libraryAssetName=t}},{key:"clickHandling",get:function(){return this._clickHandling},set:function(t){this._clickHandling=t}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateCounter++)}},{key:"tag",get:function(){return this._tag},set:function(t){this._tag!==t&&(this._tag=t,this._updateCounter++)}},{key:"posture",get:function(){return this._posture},set:function(t){this._posture!==t&&(this._posture=t,this._updateCounter++)}},{key:"alphaTolerance",get:function(){return this._alphaTolerance},set:function(t){this._alphaTolerance!==t&&(this._alphaTolerance=t,this._updateCounter++)}},{key:"filters",get:function(){return this._filters},set:function(t){this._filters=t,this._updateCounter++}},{key:"updateCounter",get:function(){return this._updateCounter}},{key:"updateContainer",get:function(){return this._updateContainer},set:function(t){this._updateContainer=t}}]),t}();Ke.SPRITE_COUNTER=0;var Xe=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._object=void 0,this._asset=void 0,this._sprites=void 0,this._scale=void 0,this._updateObjectCounter=void 0,this._updateModelCounter=void 0,this._updateSpriteCounter=void 0,this._id=t.VISUALIZATION_COUNTER++,this._object=null,this._asset=null,this._sprites=[],this._scale=-1,this._updateObjectCounter=-1,this._updateModelCounter=-1,this._updateSpriteCounter=-1}return Object(a.a)(t,[{key:"initialize",value:function(t){return!1}},{key:"update",value:function(t,e,i,n){}},{key:"reset",value:function(){this._scale=-1}},{key:"dispose",value:function(){if(this._sprites){for(;this._sprites.length;){var t=this._sprites[0];t&&t.dispose(),this._sprites.pop()}this._sprites=null}this._object=null,this._asset=null}},{key:"getSprite",value:function(t){return t>=0&&t<this._sprites.length?this._sprites[t]:null}},{key:"getSpriteList",value:function(){return null}},{key:"createSprite",value:function(){return this.createSpriteAtIndex(this._sprites.length)}},{key:"createSpriteAtIndex",value:function(t){var e=new Ke;return t>=this._sprites.length?this._sprites.push(e):this._sprites.splice(t,0,e),e}},{key:"createSprites",value:function(t){for(;this._sprites.length>t;){var e=this._sprites[this._sprites.length-1];e&&e.dispose(),this._sprites.pop()}for(;this._sprites.length<t;)this._sprites.push(new Ke)}},{key:"image",get:function(){return this.getImage(0,-1)}},{key:"getImage",value:function(t,e){var i=this.getBoundingRectangle();if(i.width*i.height===0)return null;for(var n=this.totalSprites,s=[],r=0;r<n;){var a=this.getSprite(r);a&&a.visible&&a.texture&&s.push(a),r++}s.sort((function(t,e){return e.relativeDepth-t.relativeDepth}));var o=new q;for(r=0;r<s.length;){var u=s[r],c=u.texture;if(c){var h=new et(c);h.alpha=u.alpha/255,h.tint=u.color,h.x=u.offsetX,h.y=u.offsetY,h.blendMode=u.blendMode,h.filters=u.filters,u.flipH&&(h.scale.x=-1),u.flipV&&(h.scale.y=-1),o.addChild(h)}r++}var _=Ut.generateTexture(o);return _||null}},{key:"getBoundingRectangle",value:function(){for(var t=this.totalSprites,e=new Z.j,i=0;i<t;){var n=this.getSprite(i);if(n&&n.texture&&n.visible){var s=n.flipH?-n.width+n.offsetX:n.offsetX,r=n.flipV?-n.height+n.offsetY:n.offsetY,a=new Z.g(s,r);0===i?(e.x=a.x,e.y=a.y,e.width=n.width,e.height=n.height):(a.x<e.x&&(e.x=a.x),a.y<e.y&&(e.y=a.y),a.x+n.width>e.right&&(e.width=a.x+n.width-e.x),a.y+n.height>e.bottom&&(e.height=a.y+n.height-e.y))}i++}return e}},{key:"instanceId",get:function(){return this._id}},{key:"object",get:function(){return this._object},set:function(t){this._object=t}},{key:"asset",get:function(){return this._asset},set:function(t){this._asset&&this._asset.removeReference(),this._asset=t,this._asset&&this._asset.addReference()}},{key:"sprites",get:function(){return this._sprites}},{key:"totalSprites",get:function(){return this._sprites.length}},{key:"updateObjectCounter",get:function(){return this._updateObjectCounter},set:function(t){this._updateObjectCounter=t}},{key:"updateModelCounter",get:function(){return this._updateModelCounter},set:function(t){this._updateModelCounter=t}},{key:"updateSpriteCounter",get:function(){return this._updateSpriteCounter},set:function(t){this._updateSpriteCounter=t}},{key:"spriteCount",get:function(){return this._sprites.length}}]),t}();Xe.VISUALIZATION_COUNTER=0;var qe=function(){function t(){Object(r.a)(this,t),this._name=void 0,this._source=void 0,this._texture=void 0,this._usesPalette=void 0,this._x=void 0,this._y=void 0,this._width=void 0,this._height=void 0,this._flipH=void 0,this._flipV=void 0,this._rectangle=void 0,this._initialized=void 0}return Object(a.a)(t,[{key:"recycle",value:function(){this._texture=null,t.GRAPHIC_POOL.push(this)}},{key:"initialize",value:function(){!this._initialized&&this._texture&&(this._width=this._texture.width,this._height=this._texture.height,this._initialized=!0)}},{key:"name",get:function(){return this._name}},{key:"source",get:function(){return this._source}},{key:"texture",get:function(){return this._texture}},{key:"usesPalette",get:function(){return this._usesPalette}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this.initialize(),this._width}},{key:"height",get:function(){return this.initialize(),this._height}},{key:"offsetX",get:function(){return this._flipH?-this._x:this._x}},{key:"offsetY",get:function(){return this._flipV?-this._y:this._y}},{key:"flipH",get:function(){return this._flipH}},{key:"flipV",get:function(){return this._flipV}},{key:"rectangle",get:function(){return this._rectangle||(this._rectangle=new Z.j(0,0,this.width,this.height)),this._rectangle}}],[{key:"createAsset",value:function(e,i,n,s,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=t.GRAPHIC_POOL.length?t.GRAPHIC_POOL.pop():new t;return c._name=e,c._source=i||null,n?(c._texture=n,c._initialized=!1):(c._texture=null,c._initialized=!0),c._usesPalette=u,c._x=s,c._y=r,c._flipH=a,c._flipV=o,c._rectangle=null,c}}]),t}();qe.GRAPHIC_POOL=[];var Qe=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"hex2rgb",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}},{key:"hex2rgba",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e[3]=255&t,e}},{key:"rgb2hex",value:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}},{key:"rgba2hex",value:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)+(0|t[3])}},{key:"rgbStringToHex",value:function(e){var i=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t.getHex(i[1])+t.getHex(i[2])+t.getHex(i[3])}},{key:"getHex",value:function(e){return isNaN(e)?"00":t.HEX_DIGITS[(e-e%16)/16]+t.HEX_DIGITS[e%16]}},{key:"int2rgb",value:function(t){t>>>=0;return"rgba("+[(16711680&t)>>>16,(65280&t)>>>8,255&t,1].join(",")+")"}},{key:"rgbToHSL",value:function(t){var e,i=(t>>16&255)/255,n=(t>>8&255)/255,s=(255&t)/255,r=Math.max(i,n,s),a=Math.min(i,n,s),o=r-a,u=0,c=0;return 0==o?u=0:r==i?u=n>s?60*(n-s)/o:60*(n-s)/o+360:r==n?u=60*(s-i)/o+120:r==s&&(u=60*(i-n)/o+240),e=.5*(r+a),c=0==o?0:e<=.5?o/e*.5:o/(1-e)*.5,(Math.round(u/360*255)<<16)+(Math.round(255*c)<<8)+Math.round(255*e)}},{key:"hslToRGB",value:function(t){var e,i,n,s,r,a=(t>>16&255)/255,o=(t>>8&255)/255,u=(255&t)/255,c=0,h=0,_=0;return o>0?(e=0,0,i=2*u-(e=u<.5?u*(1+o):u+o-u*o),(n=a+1/3)<0?n+=1:n>1&&n--,(s=a)<0?s+=1:s>1&&s--,(r=a-1/3)<0?r+=1:r>1&&r--,c=6*n<1?i+6*(e-i)*n:2*n<1?e:3*n<2?i+6*(e-i)*(2/3-n):i,h=6*s<1?i+6*(e-i)*s:2*s<1?e:3*s<2?i+6*(e-i)*(2/3-s):i,_=6*r<1?i+6*(e-i)*r:2*r<1?e:3*r<2?i+6*(e-i)*(2/3-r):i):(c=u,h=u,_=u),(Math.round(255*c)<<16)+(Math.round(255*h)<<8)+Math.round(255*_)}},{key:"rgb2xyz",value:function(t){var e=(t>>16&255)/255,i=(t>>8&255)/255,n=(t>>0&255)/255;return e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,new Et(.4124*(e*=100)+.3576*(i*=100)+.1805*(n*=100),.2126*e+.7152*i+.0722*n,.0193*e+.1192*i+.9505*n)}},{key:"xyz2CieLab",value:function(t){var e=t.x/95.047,i=t.y/100,n=t.z/108.883;return e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,new Et(116*i-16,500*(e-i),200*(i-n))}},{key:"rgb2CieLab",value:function(e){return t.xyz2CieLab(t.rgb2xyz(e))}}]),t}();Qe.HEX_DIGITS=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var Ze=function(){function t(e){Object(r.a)(this,t),this._reservedNumbers=void 0,this._freeNumbers=void 0,e<0&&(e=0),this._reservedNumbers=[],this._freeNumbers=[];for(var i=0;i<e;)this._freeNumbers.push(i),i++}return Object(a.a)(t,[{key:"dispose",value:function(){this._reservedNumbers=null,this._freeNumbers=null}},{key:"reserveNumber",value:function(){if(this._freeNumbers.length>0){var t=this._freeNumbers.pop();return this._reservedNumbers.push(t),t}return-1}},{key:"freeNumber",value:function(t){var e=this._reservedNumbers.indexOf(t);e>=0&&(this._reservedNumbers.splice(e,1),this._freeNumbers.push(t))}}]),t}(),Je=i(37),$e=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getFlipHBitmapData",value:function(t){if(!t)return null;var e=new Z.d;e.scale(-1,1),e.translate(t.width,0);var i=new Je.a;return i.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),Ut.generateTexture(i)}},{key:"getFlipVBitmapData",value:function(t){if(!t)return null;var e=new Z.d;e.scale(1,-1),e.translate(0,t.height);var i=new Je.a;return i.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),Ut.generateTexture(i)}},{key:"getFlipHVBitmapData",value:function(t){if(!t)return null;var e=new Z.d;e.scale(-1,-1),e.translate(t.width,t.height);var i=new Je.a;return i.beginTextureFill({texture:t,matrix:e}).drawRect(0,0,t.width,t.height).endFill(),Ut.generateTexture(i)}}]),t}(),ti=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"init",value:function(e,i){t._currentDelta=0,t._startDelayMs=e,t._effectDurationMs=i,t._initializationTimeMs=gD.instance.time,t._state=t.STATE_START_DELAY}},{key:"turnVisualizationOn",value:function(){if(t._state!==t.STATE_NOT_INITIALIZED&&t._state!==t.STATE_OVER){var e=gD.instance.time-t._initializationTimeMs;e>t._startDelayMs+t._effectDurationMs?t._state=t.STATE_OVER:(t._visualizationOn=!0,e<t._startDelayMs?t._state=t.STATE_START_DELAY:(t._state=t.STATE_RUNNING,t._currentDelta=(e-t._startDelayMs)/t._effectDurationMs))}}},{key:"turnVisualizationOff",value:function(){t._visualizationOn=!1}},{key:"isVisualizationOn",value:function(){return t._visualizationOn&&t.isRunning()}},{key:"isRunning",value:function(){return t._state===t.STATE_START_DELAY||t._state===t.STATE_RUNNING}},{key:"getDelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.min(Math.max(t._currentDelta,e),i)}},{key:"totalRunningTime",get:function(){return t._startDelayMs+t._effectDurationMs}}]),t}();ti.STATE_NOT_INITIALIZED=0,ti.STATE_START_DELAY=1,ti.STATE_RUNNING=2,ti.STATE_OVER=3,ti._state=ti.STATE_NOT_INITIALIZED,ti._visualizationOn=!1,ti._currentDelta=0,ti._initializationTimeMs=0,ti._startDelayMs=2e4,ti._effectDurationMs=2e3;var ei=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(r.a)(this,t),this._updateId=0,this._x=void 0,this._y=void 0,this._z=void 0,this._directionAxis=void 0,this._location=void 0,this._direction=void 0,this._depth=void 0,this._scale=1,this._x_scale=1,this._y_scale=1,this._z_scale=1,this._x_scale_internal=1,this._y_scale_internal=1,this._z_scale_internal=1,this._loc=void 0,this._dir=void 0,this._clipNear=-500,this._clipFar=500,this._displacements=null,this.scale=e,this._x=new Et,this._y=new Et,this._z=new Et,this._directionAxis=new Et,this._location=new Et,this._direction=new Et,this._depth=new Et,this._x_scale_internal=1,this._y_scale_internal=1,this.x_scale=1,this.y_scale=1,this._z_scale_internal=Math.sqrt(.5)/Math.sqrt(3/4),this.z_scale=1,this.location=new Et(n.x,n.y,n.z),this.direction=new Et(i.x,i.y,i.z),null!=s?this.setDepthVector(s):this.setDepthVector(i),this._displacements=new Map}return Object(a.a)(t,[{key:"updateId",get:function(){return this._updateId}},{key:"scale",get:function(){return this._scale/Math.sqrt(.5)},set:function(t){t<=1&&(t=1),(t*=Math.sqrt(.5))!=this._scale&&(this._scale=t,this._updateId++)}},{key:"directionAxis",get:function(){return this._directionAxis}},{key:"location",get:function(){return this._location.assign(this._loc),this._location.x=this._location.x*this._x_scale,this._location.y=this._location.y*this._y_scale,this._location.z=this._location.z*this._z_scale,this._location},set:function(t){if(null!=t){null==this._loc&&(this._loc=new Et);var e=this._loc.x,i=this._loc.y,n=this._loc.z;this._loc.assign(t),this._loc.x=this._loc.x/this._x_scale,this._loc.y=this._loc.y/this._y_scale,this._loc.z=this._loc.z/this._z_scale,this._loc.x==e&&this._loc.y==i&&this._loc.z==n||this._updateId++}}},{key:"direction",get:function(){return this._direction},set:function(t){var e,i,n,s,r;if(null!=t){null==this._dir&&(this._dir=new Et);var a=this._dir.x,o=this._dir.y,u=this._dir.z;this._dir.assign(t),this._direction.assign(t),this._dir.x==a&&this._dir.y==o&&this._dir.z==u||this._updateId++;var c=new Et(0,1,0),h=new Et(0,0,1),_=new Et(1,0,0),l=t.x/180*Math.PI,d=t.y/180*Math.PI,f=t.z/180*Math.PI,v=Math.cos(l),g=Math.sin(l),O=Et.sum(Et.product(c,v),Et.product(_,-g)),y=new Et(h.x,h.y,h.z),E=Et.sum(Et.product(c,g),Et.product(_,v)),p=Math.cos(d),m=Math.sin(d),I=new Et(O.x,O.y,O.z),b=Et.sum(Et.product(y,p),Et.product(E,m)),T=Et.sum(Et.product(y,-m),Et.product(E,p));0!=f?(e=Math.cos(f),i=Math.sin(f),n=Et.sum(Et.product(I,e),Et.product(b,i)),s=Et.sum(Et.product(I,-i),Et.product(b,e)),r=new Et(T.x,T.y,T.z),this._x.assign(n),this._y.assign(s),this._z.assign(r),this._directionAxis.assign(this._z)):(this._x.assign(I),this._y.assign(b),this._z.assign(T),this._directionAxis.assign(this._z))}}},{key:"x_scale",set:function(t){this._x_scale!=t*this._x_scale_internal&&(this._x_scale=t*this._x_scale_internal,this._updateId++)}},{key:"y_scale",set:function(t){this._y_scale!=t*this._y_scale_internal&&(this._y_scale=t*this._y_scale_internal,this._updateId++)}},{key:"z_scale",set:function(t){this._z_scale!=t*this._z_scale_internal&&(this._z_scale=t*this._z_scale_internal,this._updateId++)}},{key:"dispose",value:function(){this._x=null,this._y=null,this._z=null,this._loc=null,this._dir=null,this._directionAxis=null,this._location=null,null!=this._displacements&&(this._displacements.clear(),this._displacements=null)}},{key:"setDisplacement",value:function(t,e){var i,n;null!=t&&null!=e&&null!=this._displacements&&(i=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.delete(i),(n=new Et).assign(e),this._displacements.set(i,n),this._updateId++)}},{key:"getDisplacenent",value:function(t){var e;return null!=this._displacements?(e=Math.trunc(Math.round(t.x))+"_"+Math.trunc(Math.round(t.y))+"_"+Math.trunc(Math.round(t.z)),this._displacements.get(e)):null}},{key:"setDepthVector",value:function(t){var e,i,n,s=new Et(0,1,0),r=new Et(0,0,1),a=new Et(1,0,0),o=t.x/180*Math.PI,u=t.y/180*Math.PI,c=t.z/180*Math.PI,h=Math.cos(o),_=Math.sin(o),l=Et.sum(Et.product(s,h),Et.product(a,-_)),d=new Et(r.x,r.y,r.z),f=Et.sum(Et.product(s,_),Et.product(a,h)),v=Math.cos(u),g=Math.sin(u),O=new Et(l.x,l.y,l.z),y=Et.sum(Et.product(d,v),Et.product(f,g)),E=Et.sum(Et.product(d,-g),Et.product(f,v));0!=c?(e=Math.cos(c),i=Math.sin(c),Et.sum(Et.product(O,e),Et.product(y,i)),Et.sum(Et.product(O,-i),Et.product(y,e)),n=new Et(E.x,E.y,E.z),this._depth.assign(n)):this._depth.assign(E),this._updateId++}},{key:"adjustLocation",value:function(t,e){if(null!=t&&null!=this._z){var i=Et.product(this._z,-e),n=new Et(t.x+i.x,t.y+i.y,t.z+i.z);this.location=n}}},{key:"getCoordinatePosition",value:function(t){if(null==t)return null;var e=Et.scalarProjection(t,this._x),i=Et.scalarProjection(t,this._y),n=Et.scalarProjection(t,this._z);return new Et(e,i,n)}},{key:"getScreenPosition",value:function(t){var e=Et.dif(t,this._loc);e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale;var i=Et.scalarProjection(e,this._depth);if(i<this._clipNear||i>this._clipFar)return null;var n=Et.scalarProjection(e,this._x),s=-Et.scalarProjection(e,this._y);n*=this._scale,s*=this._scale;var r=this.getDisplacenent(t);return null!=r&&((e=Et.dif(t,this._loc)).add(r),e.x=e.x*this._x_scale,e.y=e.y*this._y_scale,e.z=e.z*this._z_scale,i=Et.scalarProjection(e,this._depth)),e.x=n,e.y=s,e.z=i,e}},{key:"getScreenPoint",value:function(t){var e=this.getScreenPosition(t);return null==e?null:new Z.g(e.x,e.y)}},{key:"getPlanePosition",value:function(e,i,n,s){var r,a,o=e.x/this._scale,u=-e.y/this._scale,c=Et.product(this._x,o);c.add(Et.product(this._y,u));var h=new Et(this._loc.x*this._x_scale,this._loc.y*this._y_scale,this._loc.z*this._z_scale);h.add(c);var _=this._z,l=new Et(i.x*this._x_scale,i.y*this._y_scale,i.z*this._z_scale),d=new Et(n.x*this._x_scale,n.y*this._y_scale,n.z*this._z_scale),f=new Et(s.x*this._x_scale,s.y*this._y_scale,s.z*this._z_scale),v=Et.crossProduct(d,f),g=new Et;return g.assign(t.getIntersectionVector(h,_,l,v)),null!=g?(g.subtract(l),r=Et.scalarProjection(g,n)/d.length*n.length,a=Et.scalarProjection(g,s)/f.length*s.length,new Z.g(r,a)):null}},{key:"performZoom",value:function(){this.isZoomedIn()?this.scale=t.SCALE_ZOOMED_OUT:this.scale=t.SCALE_ZOOMED_IN}},{key:"isZoomedIn",value:function(){return this.scale==t.SCALE_ZOOMED_IN}},{key:"performZoomOut",value:function(){this.scale=t.SCALE_ZOOMED_OUT}},{key:"performZoomIn",value:function(){this.scale=t.SCALE_ZOOMED_IN}}],[{key:"getIntersectionVector",value:function(t,e,i,n){var s=Et.dotProduct(e,n);if(Math.abs(s)<1e-5)return null;var r=Et.dif(t,i),a=-Et.dotProduct(n,r)/s;return Et.sum(t,Et.product(e,a))}}]),t}();ei.SCALE_ZOOMED_IN=64,ei.SCALE_ZOOMED_OUT=32;var ii=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"makeRoomPreviewerId",value:function(e){return(65535&e)+t.PREVIEW_ROOM_ID_BASE}},{key:"isRoomPreviewerId",value:function(e){return e>=t.PREVIEW_ROOM_ID_BASE}}]),t}();ii.PREVIEW_ROOM_ID_BASE=2147418112;var ni=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"init",value:function(t,e){this._SafeStr_4513=0,this._SafeStr_4515=t,this._SafeStr_4516=e,this._SafeStr_4514=gD.instance.time,this._SafeStr_448=1}},{key:"turnVisualizationOn",value:function(){var t=this;if(0!==this._SafeStr_448&&3!==this._SafeStr_448){this._SafeStr_4524||(this._SafeStr_4524=setTimeout((function(){return t.turnVisualizationOff()}),this._SafeStr_4516));var e=gD.instance.time-this._SafeStr_4514;e>this._SafeStr_4515+this._SafeStr_4516?this._SafeStr_448=3:(this._SafeStr_4512=!0,e<this._SafeStr_4515?this._SafeStr_448=1:(this._SafeStr_448=2,this._SafeStr_4513=(e-this._SafeStr_4515)/this._SafeStr_4516))}}},{key:"turnVisualizationOff",value:function(){this._SafeStr_4512=!1,clearTimeout(this._SafeStr_4524),this._SafeStr_4524=null}},{key:"isVisualizationOn",value:function(){return this._SafeStr_4512&&this.isRunning()}},{key:"isRunning",value:function(){return 1===this._SafeStr_448||2===this._SafeStr_448}}]),t}();ni.STATE_NOT_INITIALIZED=0,ni.STATE_START_DELAY=1,ni.STATE_RUNNING=2,ni.STATE_OVER=3,ni._SafeStr_448=0,ni._SafeStr_4512=!1,ni._SafeStr_4513=0,ni._SafeStr_4514=0,ni._SafeStr_4515=2e4,ni._SafeStr_4516=5e3,ni._SafeStr_4524=void 0;var si=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"init",value:function(t,e){this._SafeStr_4513=0,this._SafeStr_4515=t,this._SafeStr_4516=e,this._SafeStr_4514=gD.instance.time,this._SafeStr_448=1}},{key:"turnVisualizationOn",value:function(){var t=this;if(0!==this._SafeStr_448&&3!==this._SafeStr_448){this._SafeStr_4524||(this._SafeStr_4524=setTimeout((function(){return t.turnVisualizationOff()}),this._SafeStr_4516));var e=gD.instance.time-this._SafeStr_4514;e>this._SafeStr_4515+this._SafeStr_4516?this._SafeStr_448=3:(this._SafeStr_4512=!0,e<this._SafeStr_4515?this._SafeStr_448=1:(this._SafeStr_448=2,this._SafeStr_4513=(e-this._SafeStr_4515)/this._SafeStr_4516))}}},{key:"turnVisualizationOff",value:function(){this._SafeStr_4512=!1,clearTimeout(this._SafeStr_4524),this._SafeStr_4524=null}},{key:"isVisualizationOn",value:function(){return this._SafeStr_4512&&this.isRunning()}},{key:"isRunning",value:function(){return 1===this._SafeStr_448||2===this._SafeStr_448}}]),t}();si.STATE_NOT_INITIALIZED=0,si.STATE_START_DELAY=1,si.STATE_RUNNING=2,si.STATE_OVER=3,si._SafeStr_448=0,si._SafeStr_4512=!1,si._SafeStr_4513=void 0,si._SafeStr_4514=0,si._SafeStr_4515=2e4,si._SafeStr_4516=5e3,si._SafeStr_4524=void 0;var ri=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"hex2int",value:function(t){return parseInt(t,16)}},{key:"inkToBlendMode",value:function(t){return"ADD"==t||33==t?g.b.ADD:"SUBTRACT"==t?g.b.SUBTRACT:"DARKEN"==t?g.b.DARKEN:g.b.NORMAL}}]),t}(),ai=function(){function t(e,i,n){for(Object(r.a)(this,t),this._palette=void 0,this._primaryColor=void 0,this._secondaryColor=void 0,this._palette=e;this._palette.length<256;)this._palette.push([0,0,0]);this._primaryColor=i,this._secondaryColor=n}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"applyPalette",value:function(t){for(var e=new et(t),i=Ut.generateCanvas(e),n=i.getContext("2d"),s=n.getImageData(0,0,i.width,i.height),r=s.data,a=0;a<r.length;a+=4){var o=this._palette[r[a+1]];void 0===o&&(o=[0,0,0]),r[a]=o[0],r[a+1]=o[1],r[a+2]=o[2]}return n.putImageData(s,0,0),c.t.from(i)}},{key:"primaryColor",get:function(){return this._primaryColor}},{key:"secondaryColor",get:function(){return this._secondaryColor}}]),t}(),oi=function(){function t(e){Object(r.a)(this,t),this._roomObjectVariableAccurateZ=void 0,this._location=void 0,this._screenLocation=void 0,this._locationChanged=void 0,this._geometryUpdateId=void 0,this._objectUpdateId=void 0,this._roomObjectVariableAccurateZ=e||"",this._location=new Et,this._screenLocation=new Et,this._locationChanged=!1,this._geometryUpdateId=-1,this._objectUpdateId=-1}return Object(a.a)(t,[{key:"dispose",value:function(){this._screenLocation=null}},{key:"updateLocation",value:function(t,e){if(!t||!e)return null;var i=!1,n=t.getLocation();if(e.updateId===this._geometryUpdateId&&t.updateCounter===this._objectUpdateId||(this._objectUpdateId=t.updateCounter,e.updateId===this._geometryUpdateId&&n.x===this._location.x&&n.y===this._location.y&&n.z===this._location.z||(this._geometryUpdateId=e.updateId,this._location.assign(n),i=!0)),this._locationChanged=i,this._locationChanged){var s=e.getScreenPosition(n);if(!s)return null;var r=t.model.getValue(this._roomObjectVariableAccurateZ);if(isNaN(r)||0===r){var a=new Et(Math.round(n.x),Math.round(n.y),n.z);if(a.x!==n.x||a.y!==n.y){var o=e.getScreenPosition(a);this._screenLocation.assign(s),o&&(this._screenLocation.z=o.z)}else this._screenLocation.assign(s)}else this._screenLocation.assign(s);this._screenLocation.x=Math.round(this._screenLocation.x),this._screenLocation.y=Math.round(this._screenLocation.y)}return this._screenLocation}},{key:"locationChanged",get:function(){return this._locationChanged}}]),t}(),ui=function(){function t(){Object(r.a)(this,t),this._sprites=void 0,this._updateId1=void 0,this._updateId2=void 0,this._isEmpty=void 0,this._sprites=[],this._updateId1=-1,this._updateId2=-1,this._isEmpty=!1}return Object(a.a)(t,[{key:"spriteCount",get:function(){return this._sprites.length}},{key:"isEmpty",get:function(){return this._isEmpty}},{key:"dispose",value:function(){this.setSpriteCount(0)}},{key:"addSprite",value:function(t){this._sprites.push(t)}},{key:"getSprite",value:function(t){return this._sprites[t]}},{key:"sprites",get:function(){return this._sprites}},{key:"needsUpdate",value:function(t,e){return(t!==this._updateId1||e!==this._updateId2)&&(this._updateId1=t,this._updateId2=e,!0)}},{key:"setSpriteCount",value:function(t){if(t<this._sprites.length){for(var e=t;e<this._sprites.length;){var i=this._sprites[e];i&&i.dispose(),e++}this._sprites.splice(t,this._sprites.length-t)}this._isEmpty=!this._sprites.length}}]),t}(),ci=function(){function t(e){Object(r.a)(this,t),this._objectId=void 0,this._location=void 0,this._sprites=void 0,this._location=new oi(e),this._sprites=new ui}return Object(a.a)(t,[{key:"location",get:function(){return this._location}},{key:"sprites",get:function(){return this._sprites}},{key:"dispose",value:function(){this._location&&(this._location.dispose(),this._location=null),this._sprites&&(this._sprites.dispose(),this._sprites=null)}},{key:"objectId",get:function(){return this._objectId},set:function(t){this._objectId=t}}]),t}(),hi=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._roomObjectVariableAccurateZ=void 0,this._data=new Map,this._roomObjectVariableAccurateZ=e}return Object(a.a)(t,[{key:"dispose",value:function(){if(this._data){var t,e=Object(s.a)(this._data.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(n.a)(t.value,2),r=i[0],a=i[1];a&&(this._data.delete(r),a.dispose())}}catch(o){e.e(o)}finally{e.f()}this._data=null}}},{key:"getObjectCache",value:function(t){var e=this._data.get(t);return e||(e=new ci(this._roomObjectVariableAccurateZ),this._data.set(t,e)),e}},{key:"removeObjectCache",value:function(t){var e=this._data.get(t);e&&(this._data.delete(t),e.dispose())}},{key:"getSortableSpriteList",value:function(){var e,i=[],n=Object(s.a)(this._data.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r){var a=r.sprites&&r.sprites.sprites;if(a&&a.length){var o,u=Object(s.a)(a);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c&&(c.sprite.spriteType!==Ye.ROOM_PLANE&&""!==c.sprite.name)){var h=new wt;h.objectId=r.objectId,h.x=c.x,h.y=c.y,h.z=c.z,h.name=c.sprite.name||"",h.flipH=c.sprite.flipH,h.alpha=c.sprite.alpha,h.color=c.sprite.color.toString(),h.blendMode=c.sprite.blendMode.toString(),h.width=c.sprite.width,h.height=c.sprite.height,h.type=c.sprite.type,h.posture=c.sprite.posture;var _=this.isSkewedSprite(c.sprite);_&&(h.skew=c.sprite.direction%4===0?-.5:.5),(_||c.name.indexOf("%image.library.url%")>=0||c.name.indexOf("%group.badge.url%")>=0)&&h.width<=t.MAX_SIZE_FOR_AVG_COLOR&&h.height<=t.MAX_SIZE_FOR_AVG_COLOR&&0===c.sprite.name.indexOf("external_image_wallitem")&&(h.frame=!0),i.push(h)}}}catch(l){u.e(l)}finally{u.f()}}}}}catch(l){n.e(l)}finally{n.f()}return i&&i.length?i:null}},{key:"isSkewedSprite",value:function(t){return!!t.type&&(0===t.type.indexOf("external_image_wallitem")&&"THUMBNAIL"===t.tag||0===t.type.indexOf("guild_forum")&&"THUMBNAIL"===t.tag)}},{key:"getPlaneSortableSprites",value:function(){var t,e=[],i=Object(s.a)(this._data.values());try{for(i.s();!(t=i.n()).done;){var n,r=t.value,a=Object(s.a)(r.sprites.sprites);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.sprite.spriteType===Ye.ROOM_PLANE&&e.push(o)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){i.e(u)}finally{i.f()}return e}}]),t}();hi.MAX_SIZE_FOR_AVG_COLOR=200;var _i=Object(a.a)((function t(){Object(r.a)(this,t)}));_i.MOUSE_CLICK="click",_i.DOUBLE_CLICK="double_click",_i.MOUSE_MOVE="mousemove",_i.MOUSE_DOWN="mousedown",_i.MOUSE_DOWN_LONG="mousedown_long",_i.MOUSE_UP="mouseup",_i.ROLL_OVER="mouseover",_i.ROLL_OUT="mouseout",_i.RIGHT_CLICK="contextmenu";var li=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(r.a)(this,i),(t=e.call(this,n))._offsetX=void 0,t._offsetY=void 0,t._tag=void 0,t._alphaTolerance=void 0,t._varyingDepth=void 0,t._clickHandling=void 0,t._pairedSpriteId=void 0,t._pairedSpriteUpdateCounter=void 0,t.name=void 0,t._offsetX=0,t._offsetY=0,t._tag="",t._alphaTolerance=128,t._varyingDepth=!1,t._clickHandling=!1,t._pairedSpriteId=-1,t._pairedSpriteUpdateCounter=-1,t}return Object(a.a)(i,[{key:"needsUpdate",value:function(t,e){return(this._pairedSpriteId!==t||this._pairedSpriteUpdateCounter!==e)&&(this._pairedSpriteId=t,this._pairedSpriteUpdateCounter=e,!0)}},{key:"calculateVertices",value:function(){this.texture.orig&&Object(d.a)(Object(f.a)(i.prototype),"calculateVertices",this).call(this)}},{key:"setTexture",value:function(t){t||(t=c.t.EMPTY),t!==this.texture&&(t===c.t.EMPTY&&(this._pairedSpriteId=-1,this._pairedSpriteUpdateCounter=-1),this.texture=t)}},{key:"containsPoint",value:function(t){return i.containsPoint(this,t)}},{key:"offsetX",get:function(){return this._offsetX},set:function(t){this._offsetX=t}},{key:"offsetY",get:function(){return this._offsetY},set:function(t){this._offsetY=t}},{key:"tag",get:function(){return this._tag},set:function(t){this._tag=t}},{key:"alphaTolerance",get:function(){return this._alphaTolerance},set:function(t){this._alphaTolerance=t}},{key:"varyingDepth",get:function(){return this._varyingDepth},set:function(t){this._varyingDepth=t}},{key:"clickHandling",get:function(){return this._clickHandling},set:function(t){this._clickHandling=t}}],[{key:"containsPoint",value:function(t,e){if(!t||!e||t.alphaTolerance>255)return!1;if(!(t instanceof tt.a))return!1;if(t.texture!==c.t.EMPTY&&t.blendMode===g.b.NORMAL){var n=t.texture,s=n.baseTexture;if(!n||!s||!s.valid)return!1;var r=e.x*t.scale.x,a=e.y*t.scale.y;if(!t.getLocalBounds().contains(r,a))return!1;if(!s.hitMap){var o=null;if(!s.resource)if(n.getLocalBounds)o=Ut.generateCanvas(n);else{var u=new et(n);o=Ut.generateCanvas(u),u.destroy()}if(!i.generateHitMap(s,o))return!1}var h=s.hitMap,_=r+n.frame.x,l=a+n.frame.y;n.trim&&(_-=n.trim.x,l-=n.trim.y);var d=(_=Math.round(_)*s.resolution)+(l=Math.round(l)*s.resolution)*s.realWidth,f=d%32;return 0!==(h[d/32|0]&1<<f)}}},{key:"generateHitMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null,n=null;if(e)n=(i=e).getContext("2d");else{if(!t.resource)return!1;var s=t.resource.source;if(!s)return!1;if(s.getContext)n=(i=s).getContext("2d");else{if(!(s instanceof Image))return!1;(i=document.createElement("canvas")).width=s.width,i.height=s.height,(n=i.getContext("2d")).drawImage(s,0,0)}}for(var r=i.width,a=i.height,o=n.getImageData(0,0,r,a),u=new Uint32Array(Math.ceil(r*a/32)),c=128,h=0;h<r*a;h++){var _=h%32,l=h/32|0;o.data[4*h+3]>=c&&(u[l]=u[l]|1<<_)}return t.hitMap=u,!0}}]),i}(tt.a),di=function(){function t(){Object(r.a)(this,t),this._objectId=void 0,this._spriteTag=void 0,this._objectId="",this._spriteTag=""}return Object(a.a)(t,[{key:"objectId",get:function(){return this._objectId},set:function(t){this._objectId=t}},{key:"spriteTag",get:function(){return this._spriteTag},set:function(t){this._spriteTag=t}}]),t}(),fi=function(){function t(){Object(r.a)(this,t),this._name=void 0,this._sprite=void 0,this._x=void 0,this._y=void 0,this._z=void 0,this._name="",this._sprite=null,this._x=0,this._y=0,this._z=0}return Object(a.a)(t,[{key:"dispose",value:function(){this._z=-t.Z_INFINITY,this._sprite=null}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"sprite",get:function(){return this._sprite},set:function(t){this._sprite=t}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._z=t}}]),t}();fi.Z_INFINITY=1e8;var vi=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._id=void 0,this._container=void 0,this._geometry=void 0,this._animationFPS=void 0,this._renderTimestamp=void 0,this._totalTimeRunning=void 0,this._lastFrame=void 0,this._master=void 0,this._display=void 0,this._mask=void 0,this._sortableSprites=void 0,this._spriteCount=void 0,this._activeSpriteCount=void 0,this._spritePool=void 0,this._skipObjectUpdate=void 0,this._runningSlow=void 0,this._width=void 0,this._height=void 0,this._renderedWidth=void 0,this._renderedHeight=void 0,this._screenOffsetX=void 0,this._screenOffsetY=void 0,this._mouseLocation=void 0,this._mouseOldX=void 0,this._mouseOldY=void 0,this._mouseCheckCount=void 0,this._mouseSpriteWasHit=void 0,this._mouseActiveObjects=void 0,this._eventCache=void 0,this._eventId=void 0,this._scale=void 0,this._SafeStr_4507=!1,this._rotation=0,this._rotationOrigin=null,this._rotationRodLength=0,this._effectDirection=void 0,this._effectLocation=void 0,this._SafeStr_795=0,this._restrictsScaling=void 0,this._noSpriteVisibilityChecking=void 0,this._usesExclusionRectangles=void 0,this._usesMask=void 0,this._canvasUpdated=void 0,this._objectCache=void 0,this._mouseListener=void 0,this._id=i,this._container=e,this._geometry=new ei(a,new Et(-135,30,0),new Et(11,11,5),new Et(-135,.5,0)),this._animationFPS=gD.instance.getConfiguration("system.animation.fps",24),this._renderTimestamp=0,this._totalTimeRunning=0,this._lastFrame=0,this._master=null,this._display=null,this._mask=null,this._sortableSprites=[],this._spriteCount=0,this._activeSpriteCount=0,this._spritePool=[],this._skipObjectUpdate=!1,this._runningSlow=!1,this._width=0,this._height=0,this._renderedWidth=0,this._renderedHeight=0,this._screenOffsetX=0,this._screenOffsetY=0,this._mouseLocation=new Z.g,this._mouseOldX=0,this._mouseOldY=0,this._mouseCheckCount=0,this._mouseSpriteWasHit=!1,this._mouseActiveObjects=new Map,this._eventCache=new Map,this._eventId=0,this._scale=1,this._restrictsScaling=!1,this._noSpriteVisibilityChecking=!1,this._usesExclusionRectangles=!1,this._usesMask=!0,this._canvasUpdated=!1,this._objectCache=new hi(this._container.roomObjectVariableAccurateZ),this._mouseListener=null,this.setupCanvas(),this.initialize(n,s)}return Object(a.a)(t,[{key:"setupCanvas",value:function(){if(this._master||(this._master=new et,this._master.interactiveChildren=!1),!this._display){var t=new q;this._master.addChild(t),this._display=t}}},{key:"dispose",value:function(){if(this.cleanSprites(0,!0),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._mask&&(this._mask=null),this._objectCache&&(this._objectCache.dispose(),this._objectCache=null),this._master){for(;this._master.children.length;){this._master.removeChildAt(0).destroy()}this._master.parent&&this._master.parent.removeChild(this._master),this._master.destroy(),this._master=null}if(this._display=null,this._sortableSprites=[],this._mouseActiveObjects&&(this._mouseActiveObjects.clear(),this._mouseActiveObjects=null),this._spritePool){var t,e=Object(s.a)(this._spritePool);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.cleanSprite(i,!0)}}catch(n){e.e(n)}finally{e.f()}this._spritePool=[]}this._eventCache&&(this._eventCache.clear(),this._eventCache=null),this._mouseListener=null}},{key:"initialize",value:function(t,e){if(t=t<1?1:t,e=e<1?1:e,this._usesMask&&(this._mask?this._mask.clear().beginFill(16711680).drawRect(0,0,t,e).endFill():(this._mask=(new Je.a).beginFill(16711680).drawRect(0,0,t,e).endFill(),this._master&&(this._master.addChild(this._mask),this._display&&(this._display.mask=this._mask)))),this._master){if(this._master.hitArea){var i=this._master.hitArea;i.width=t,i.height=e}else this._master.hitArea=new Z.j(0,0,t,e);if(this._master.filterArea){var n=this._master.filterArea;n.width=t,n.height=e}else this._master.filterArea=new Z.j(0,0,t,e)}this._width=t,this._height=e}},{key:"setMask",value:function(t){t&&!this._usesMask?(this._usesMask=!0,this._mask&&this._mask.parent!==this._master&&(this._master.addChild(this._mask),this._display.mask=this._mask)):!t&&this._usesMask&&(this._usesMask=!1,this._mask&&this._mask.parent===this._master&&(this._master.removeChild(this._mask),this._display.mask=null))}},{key:"setScale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._master&&this._display&&(this._restrictsScaling&&!n||(e||(e=new Z.g(this._width/2,this._height/2)),i||(i=e),e=this._display.toLocal(e),s?this._scale*=t:this._scale=t,this.screenOffsetX=i.x-e.x*this._scale,this.screenOffsetY=i.y-e.y*this._scale))}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._canvasUpdated=!1,this._totalTimeRunning+=gD.instance.ticker.deltaTime,this._totalTimeRunning!==this._renderTimestamp&&(-1===t&&(t=this._renderTimestamp+1),this._container&&this._geometry)){this._width===this._renderedWidth&&this._height===this._renderedHeight||(e=!0),this._display.x===this._screenOffsetX&&this._display.y===this._screenOffsetY||(this._display.x=this._screenOffsetX,this._display.y=this._screenOffsetY,e=!0),this._display.scale.x!==this._scale&&(this._display.scale.set(this._scale),e=!0),this.doMagic();var i=Math.round(this._totalTimeRunning/(60/this._animationFPS)),n=!1;i!==this._lastFrame&&(this._lastFrame=i,n=!0);var r=0,a=this._container.objects;if(a.size){var o,u=Object(s.a)(a.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;c&&(r+=this.renderObject(c,c.instanceId.toString(),t,e,n,r))}}catch(l){u.e(l)}finally{u.f()}}this._sortableSprites.sort((function(t,e){return e.z-t.z})),r<this._sortableSprites.length&&this._sortableSprites.splice(r);for(var h=0;h<r;){var _=this._sortableSprites[h];_&&_.sprite&&this.renderSprite(h,_),h++}this.cleanSprites(r),(e||n)&&(this._canvasUpdated=!0),this._renderTimestamp=this._totalTimeRunning,this._renderedWidth=this._width,this._renderedHeight=this._height}}},{key:"skipSpriteVisibilityChecking",value:function(){this._noSpriteVisibilityChecking=!0,this.render(-1,!0)}},{key:"resumeSpriteVisibilityChecking",value:function(){this._noSpriteVisibilityChecking=!1}},{key:"getSortableSpriteList",value:function(){return this._objectCache.getSortableSpriteList()}},{key:"getPlaneSortableSprites",value:function(){return this._objectCache.getPlaneSortableSprites()}},{key:"removeFromCache",value:function(t){this._objectCache.removeObjectCache(t)}},{key:"renderObject",value:function(t,e,i,n,r,a){if(!t)return 0;var o=t.visualization;if(!o)return this.removeFromCache(e),0;var u=this.getCacheItem(e);u.objectId=t.instanceId;var c=u.location,h=u.sprites,_=c.updateLocation(t,this._geometry);if(!_)return this.removeFromCache(e),0;if(r&&o.update(this._geometry,i,!h.isEmpty||n,this._skipObjectUpdate&&this._runningSlow),c.locationChanged&&(n=!0),!h.needsUpdate(o.instanceId,o.updateSpriteCounter)&&!n)return h.spriteCount;var l=_.x,d=_.y,f=_.z;f+=l>0?12e-8*l:12e-8*-l,l+=Math.trunc(this._width/2),d+=Math.trunc(this._height/2);var v,g=0,O=Object(s.a)(o.sprites.values());try{for(O.s();!(v=O.n()).done;){var y=v.value;if(y&&y.visible){var E=y.texture,p=E&&E.baseTexture;if(E&&p){var m=l+y.offsetX+this._screenOffsetX,I=d+y.offsetY+this._screenOffsetY;if(y.flipH){var b=l+-(E.width+-y.offsetX)+this._screenOffsetX;if(!this.isSpriteVisible(b,I,E.width,E.height))continue}else if(y.flipV){var T=d+-(E.height+-y.offsetY)+this._screenOffsetY;if(!this.isSpriteVisible(m,T,E.width,E.height))continue}else if(!this.isSpriteVisible(m,I,E.width,E.height))continue;var R=h.getSprite(g);R||(R=new fi,h.addSprite(R),this._sortableSprites.push(R),R.name=e),R.sprite=y,y.spriteType!==Ye.AVATAR&&y.spriteType!==Ye.AVATAR_OWN||(R.sprite.libraryAssetName="avatar_"+t.id),R.x=m-this._screenOffsetX,R.y=I-this._screenOffsetY,R.z=f+y.relativeDepth+37e-12*a,g++,a++}}}}catch(k){O.e(k)}finally{O.f()}return h.setSpriteCount(g),this._canvasUpdated=!0,g}},{key:"getExtendedSprite",value:function(t){if(t<0||t>=this._spriteCount)return null;var e=this._display.getChildAt(t);return e||null}},{key:"getExtendedSpriteIdentifier",value:function(t){return t?t.name:""}},{key:"renderSprite",value:function(t,e){if(t>=this._spriteCount)return this.createAndAddSprite(e),!0;if(!e)return!1;var i=e.sprite,n=this.getExtendedSprite(t);if(!i||!n)return!1;if(n.varyingDepth!==i.varyingDepth)return n.varyingDepth&&!i.varyingDepth?(this._display.removeChildAt(t),this._spritePool.push(n),this.renderSprite(t,e)):(this.createAndAddSprite(e,t),!0);if(n.needsUpdate(i.id,i.updateCounter)||ti.isVisualizationOn()){n.tag=i.tag,n.alphaTolerance=i.alphaTolerance,n.name=e.name,n.varyingDepth=i.varyingDepth,n.clickHandling=i.clickHandling,n.filters=i.filters;var s=i.alpha/255;if(n.alpha!==s&&(n.alpha=s),n.tint!==i.color&&(n.tint=i.color),n.blendMode!==i.blendMode&&(n.blendMode=i.blendMode),n.texture!==i.texture&&n.setTexture(i.texture),i.updateContainer)1===n.children.length&&n.removeChildAt(0),n.addChild(i.container),i.updateContainer=!1;i.flipH?-1!==n.scale.x&&(n.scale.x=-1):1!==n.scale.x&&(n.scale.x=1),i.flipV?-1!==n.scale.y&&(n.scale.y=-1):1!==n.scale.y&&(n.scale.y=1),this.updateEnterRoomEffect(n,i)}return n.x!==e.x&&(n.x=e.x),n.y!==e.y&&(n.y=e.y),n.offsetX=i.offsetX,n.offsetY=i.offsetY,!0}},{key:"createAndAddSprite",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=t.sprite;if(i){var n=null;this._spritePool.length>0&&(n=this._spritePool.pop()),n||(n=new li),n.children.length&&n.removeChildren(),n.tag=i.tag,n.alphaTolerance=i.alphaTolerance,n.alpha=i.alpha/255,n.tint=i.color,n.x=t.x,n.y=t.y,n.offsetX=i.offsetX,n.offsetY=i.offsetY,n.name=i.name,n.varyingDepth=i.varyingDepth,n.clickHandling=i.clickHandling,n.blendMode=i.blendMode,n.filters=i.filters,n.setTexture(i.texture),i.updateContainer&&(n.addChild(i.container),i.updateContainer=!1),i.flipH&&(n.scale.x=-1),i.flipV&&(n.scale.y=-1),this.updateEnterRoomEffect(n,i),e<0||e>=this._spriteCount?(this._display.addChild(n),this._spriteCount++):this._display.addChildAt(n,e),this._activeSpriteCount++}}},{key:"cleanSprites",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._display){if(t<0&&(t=0),t<this._activeSpriteCount||!this._activeSpriteCount)for(var i=this._spriteCount-1;i>=t;)this.cleanSprite(this.getExtendedSprite(i),e),i--;this._activeSpriteCount=t}}},{key:"updateEnterRoomEffect",value:function(t,e){if(ti.isVisualizationOn()&&e)switch(e.spriteType){case Ye.AVATAR_OWN:return;case Ye.ROOM_PLANE:return void(t.alpha=ti.getDelta(.9));case Ye.AVATAR:return void(t.alpha=ti.getDelta(.5));default:t.alpha=ti.getDelta(.1)}}},{key:"cleanSprite",value:function(t,e){t&&(e?(t.parent&&t.parent.removeChild(t),t.destroy({children:!0})):t.setTexture(null))}},{key:"update",value:function(){this._mouseCheckCount,this._mouseCheckCount=0,this._eventId++}},{key:"setMouseListener",value:function(t){this._mouseListener=t}},{key:"getCacheItem",value:function(t){return this._objectCache.getObjectCache(t)}},{key:"isSpriteVisible",value:function(t,e,i,n){return!!this._noSpriteVisibilityChecking||(t=(t-this._screenOffsetX)*this._scale+this._screenOffsetX,e=(e-this._screenOffsetY)*this._scale+this._screenOffsetY,i*=this._scale,n*=this._scale,t<this._width&&t+i>=0&&e<this._height&&e+n>=0&&!this._usesExclusionRectangles)}},{key:"handleMouseEvent",value:function(t,e,i,n,s,r,a){return t-=this._screenOffsetX,e-=this._screenOffsetY,this._mouseLocation.x=t/this._scale,this._mouseLocation.y=e/this._scale,this._mouseCheckCount>0&&i==_i.MOUSE_MOVE||(this._mouseSpriteWasHit=this.checkMouseHits(Math.trunc(t/this._scale),Math.trunc(e/this._scale),i,n,s,r,a),this._mouseCheckCount++),this._mouseSpriteWasHit}},{key:"checkMouseHits",value:function(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=[],c=!1,h=null,_=this._activeSpriteCount-1;_>=0;){var l=this.getExtendedSprite(_);if(l&&l.containsPoint(new Z.g(t-l.x,e-l.y)))if(!l.clickHandling||i!==_i.MOUSE_CLICK&&i!==_i.DOUBLE_CLICK){var d=this.getExtendedSpriteIdentifier(l);if(-1===u.indexOf(d)){var f=l.tag,v=this._mouseActiveObjects.get(d);v&&v.spriteTag!==f&&(h=this.createMouseEvent(0,0,0,0,_i.ROLL_OUT,v.spriteTag,n,r,a,o),this.bufferMouseEvent(h,d)),i!==_i.MOUSE_MOVE||v&&v.spriteTag===f?((h=this.createMouseEvent(t,e,t-l.x,e-l.y,i,f,n,r,a,o)).spriteOffsetX=l.offsetX,h.spriteOffsetY=l.offsetY):h=this.createMouseEvent(t,e,t-l.x,e-l.y,_i.ROLL_OVER,f,n,r,a,o),v||((v=new di).objectId=d,this._mouseActiveObjects.set(d,v)),v.spriteTag=f,i===_i.MOUSE_MOVE&&t===this._mouseOldX&&e===this._mouseOldY||this.bufferMouseEvent(h,d),u.push(d)}c=!0}else;_--}var g,O=[],y=Object(s.a)(this._mouseActiveObjects.keys());try{for(y.s();!(g=y.n()).done;){var E=g.value;E&&O.push(E)}}catch(R){y.e(R)}finally{y.f()}for(var p=0;p<O.length;){var m=O[p];u.indexOf(m)>=0&&(O[p]=null),p++}for(p=0;p<O.length;){var I=O[p];if(null!==I){var b=this._mouseActiveObjects.get(I);b&&this._mouseActiveObjects.delete(I);var T=this.createMouseEvent(0,0,0,0,_i.ROLL_OUT,b.spriteTag,n,r,a,o);this.bufferMouseEvent(T,I)}p++}return this.processMouseEvents(),this._mouseOldX=t,this._mouseOldY=e,c}},{key:"createMouseEvent",value:function(t,e,i,n,s,r,a,o,u,c){var h=t-this._width/2,_=e-this._height/2,l="canvas_".concat(this._id);return new Ge(s,l+"_"+this._eventId,l,r,h,_,i,n,o,a,u,c)}},{key:"bufferMouseEvent",value:function(t,e){t&&this._eventCache&&(this._eventCache.delete(e),this._eventCache.set(e,t))}},{key:"processMouseEvents",value:function(){if(this._container&&this._eventCache){var t,e=Object(s.a)(this._eventCache.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(n.a)(t.value,2),r=i[0],a=i[1];if(!this._eventCache)return;if(a){var o=this._container.getRoomObject(parseInt(r));if(o)if(this._mouseListener)this._mouseListener.processRoomCanvasMouseEvent(a,o,this._geometry);else{var u=o.mouseHandler;u&&u.mouseEvent(a,this._geometry)}}}}catch(c){e.e(c)}finally{e.f()}this._eventCache&&this._eventCache.clear()}}},{key:"getDisplayAsTexture",value:function(){this._noSpriteVisibilityChecking=!0;var t=this._scale,e=this._screenOffsetX,i=this._screenOffsetY;this.setScale(1,null,null,!0),this._screenOffsetX=0,this._screenOffsetY=0,this.render(-1,!0),this._display.mask=null;var n=this._display.getBounds(),s=c.o.create({width:this._display.width,height:this._display.height});return gD.instance.renderer.render(this._display,{renderTexture:s,clear:!0,transform:new Z.d(1,0,0,1,-n.x,-n.y)}),this._display.mask=this._mask,this._noSpriteVisibilityChecking=!1,this.setScale(t,null,null,!0),this._screenOffsetX=e,this._screenOffsetY=i,s}},{key:"doMagic",value:function(){var t=this.geometry;if(0!==this._rotation){var e=this._effectDirection;t.direction=new Et(e.x+this._rotation,e.y,e.z),e=t.direction,t.setDepthVector(new Et(e.x,e.y,5));var i=new Et;i.assign(this._rotationOrigin),i.x=i.x+this._rotationRodLength*Math.cos((e.x+180)/180*3.14159265358979)*Math.cos(e.y/180*3.14159265358979),i.y=i.y+this._rotationRodLength*Math.sin((e.x+180)/180*3.14159265358979)*Math.cos(e.y/180*3.14159265358979),i.z=i.z+this._rotationRodLength*Math.sin(e.y/180*3.14159265358979),t.location=i,this._effectLocation=new Et,this._effectLocation.assign(i),this._effectDirection=new Et,this._effectDirection.assign(t.direction)}if((si.isVisualizationOn()&&!this._SafeStr_4507||!si.isVisualizationOn()&&this._SafeStr_4507)&&this.changeShaking(),ni.isVisualizationOn()&&this.changeRotation(),this._SafeStr_4507){this._SafeStr_795++;var n=this._effectDirection,s=Et.sum(n,new Et(2*Math.sin(5*this._SafeStr_795/180*3.14159265358979),5*Math.sin(this._SafeStr_795/180*3.14159265358979),2*Math.sin(10*this._SafeStr_795/180*3.14159265358979)));t.direction=s}else this._SafeStr_795=0,t.direction=this._effectDirection}},{key:"changeShaking",value:function(){if(this._SafeStr_4507=!this._SafeStr_4507,this._SafeStr_4507){var t=this.geometry.direction;this._effectDirection=new Et(t.x,t.y,t.z)}}},{key:"changeRotation",value:function(){if(!this._SafeStr_4507){var t=this.geometry;if(t)if(0!==this._rotation)this._rotation=0,t.location=this._effectLocation,t.direction=this._effectDirection,t.setDepthVector(new Et(this._effectDirection.x,this._effectDirection.y,5));else{var e=t.location,i=t.directionAxis;this._effectLocation=new Et,this._effectLocation.assign(e),this._effectDirection=new Et,this._effectDirection.assign(t.direction);var n=ei.getIntersectionVector(e,i,new Et(0,0,0),new Et(0,0,1));null!==n&&(this._rotationOrigin=new Et(n.x,n.y,n.z),this._rotationRodLength=Et.dif(n,e).length,this._rotation=1)}}}},{key:"moveLeft",value:function(){if(0===this._rotation){var t=this.geometry,e=(t.direction.x-90)/180*3.14159265358979;t.location=Et.sum(t.location,new Et(Math.cos(e)*Math.sqrt(2),Math.sin(e)*Math.sqrt(2)))}else 1===this._rotation?this._rotation=-1:this._rotation=this._rotation-1}},{key:"moveRight",value:function(){if(0===this._rotation){var t=this.geometry,e=(t.direction.x+90)/180*3.14159265358979;t.location=Et.sum(t.location,new Et(Math.cos(e)*Math.sqrt(2),Math.sin(e)*Math.sqrt(2)))}else-1===this._rotation?this._rotation=1:this._rotation=this._rotation+1}},{key:"moveUp",value:function(){if(0===this._rotation){var t=this.geometry,e=t.direction.x/180*3.14159265358979;t.location=Et.sum(t.location,new Et(Math.cos(e)*Math.sqrt(2),Math.sin(e)*Math.sqrt(2)))}}},{key:"moveDown",value:function(){if(0===this._rotation){var t=this.geometry,e=(t.direction.x+180)/180*3.14159265358979;t.location=Et.sum(t.location,new Et(Math.cos(e)*Math.sqrt(2),Math.sin(e)*Math.sqrt(2)))}}},{key:"id",get:function(){return this._id}},{key:"geometry",get:function(){return this._geometry}},{key:"master",get:function(){return this._master}},{key:"display",get:function(){return this._display}},{key:"screenOffsetX",get:function(){return this._screenOffsetX},set:function(t){t=Math.trunc(t),this._mouseLocation.x=this._mouseLocation.x-(t-this._screenOffsetX),this._screenOffsetX=t}},{key:"screenOffsetY",get:function(){return this._screenOffsetY},set:function(t){t=Math.trunc(t),this._mouseLocation.y=this._mouseLocation.y-(t-this._screenOffsetY),this._screenOffsetY=t}},{key:"scale",get:function(){return this._scale}},{key:"width",get:function(){return this._width*this._scale}},{key:"height",get:function(){return this._height*this._scale}},{key:"restrictsScaling",get:function(){return this._restrictsScaling},set:function(t){this._restrictsScaling=t}},{key:"canvasUpdated",get:function(){return this._canvasUpdated},set:function(t){this._canvasUpdated=t}}]),t}(),gi=function(){function t(){Object(r.a)(this,t),this._objects=void 0,this._canvases=void 0,this._disposed=void 0,this._roomObjectVariableAccurateZ=void 0,this._objects=new Map,this._canvases=new Map,this._disposed=!1,this._roomObjectVariableAccurateZ=null}return Object(a.a)(t,[{key:"dispose",value:function(){if(!this._disposed){if(this._canvases){var t,e=Object(s.a)(this._canvases.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(n.a)(t.value,2),r=i[0],a=i[1];this._canvases.delete(r),a&&a.dispose()}}catch(o){e.e(o)}finally{e.f()}this._canvases=null}this._objects&&(this._objects=null),this._disposed=!0}}},{key:"reset",value:function(){this._objects.clear()}},{key:"getInstanceId",value:function(t){return t?t.instanceId:-1}},{key:"getRoomObject",value:function(t){return this._objects.get(t)}},{key:"addObject",value:function(t){t&&this._objects.set(this.getInstanceId(t),t)}},{key:"removeObject",value:function(t){var e=this.getInstanceId(t);this._objects.delete(e);var i,n=Object(s.a)(this._canvases.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r)r.removeFromCache(e.toString())}}catch(a){n.e(a)}finally{n.f()}}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._canvases&&this._canvases.size){var i,n=Object(s.a)(this._canvases.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&r.render(t,e)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._canvases&&this._canvases.size){this.render(t,e);var i,n=Object(s.a)(this._canvases.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&r.update()}}catch(a){n.e(a)}finally{n.f()}}}},{key:"getCanvas",value:function(t){var e=this._canvases.get(t);if(e)return e}},{key:"createCanvas",value:function(t,e,i,n){var s=this._canvases.get(t);if(s)return s.initialize(e,i),s.geometry&&(s.geometry.scale=n),s;var r=this.createSpriteCanvas(t,e,i,n);return r?(this._canvases.set(t,r),r):void 0}},{key:"createSpriteCanvas",value:function(t,e,i,n){return new vi(this,t,e,i,n)}},{key:"removeCanvas",value:function(t){var e=this._canvases.get(t);e&&(this._canvases.delete(t),e.dispose())}},{key:"objects",get:function(){return this._objects}},{key:"disposed",get:function(){return this._disposed}},{key:"roomObjectVariableAccurateZ",get:function(){return this._roomObjectVariableAccurateZ},set:function(t){this._roomObjectVariableAccurateZ=t}}]),t}(),Oi=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"createRenderer",value:function(){return new gi}}]),t}(),yi=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(E.a);yi.INITIALIZED="RCWM_INITIALIZED";var Ei=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(r.a)(this,t),this._name=void 0,this._minLevel=-1,this._texture=null,this._colorMatrix=null,this._blendMode=null,this._name=e,this._minLevel=i,this._texture=n,this._colorMatrix=s,this._blendMode=a}return Object(a.a)(t,[{key:"name",get:function(){return this._name}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t}},{key:"colorMatrix",get:function(){return this._colorMatrix},set:function(t){this._colorMatrix=t}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}},{key:"minLevel",get:function(){return this._minLevel}}]),t}(),pi=function(){function t(){Object(r.a)(this,t),this._effects=void 0,this._events=void 0,this._isLoaded=void 0,this._effects=new Map,this._events=new b,this._isLoaded=!1}return Object(a.a)(t,[{key:"init",value:function(){if(!this._isLoaded){this._isLoaded=!0;var t,e=gD.instance.getConfiguration("image.library.url")+"Habbo-Stories/",i=gD.instance.getConfiguration("camera.available.effects"),n=Object(s.a)(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.enabled){var a=new Ei(r.name,r.minLevel);r.colorMatrix.length?a.colorMatrix=r.colorMatrix:(a.texture=c.t.from(e+r.name+".png"),a.blendMode=r.blendMode),this._effects.set(a.name,a)}}}catch(o){n.e(o)}finally{n.f()}this.events.dispatchEvent(new yi(yi.INITIALIZED))}}},{key:"applyEffects",value:function(t,e,i){var n=new q,r=new et(t);n.addChild(r);var a,o=Object(s.a)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value,c=u.effect;if(c)if(c.colorMatrix){var h=new Dt.a;h.matrix=c.colorMatrix,h.alpha=u.alpha,r.filters||(r.filters=[]),r.filters.push(h)}else{var _=new et(c.texture);_.alpha=u.alpha,_.blendMode=c.blendMode,n.addChild(_)}}}catch(l){o.e(l)}finally{o.f()}return Ut.generateImage(n)}},{key:"effects",get:function(){return this._effects}},{key:"events",get:function(){return this._events}},{key:"isLoaded",get:function(){return this._isLoaded}}]),t}(),mi=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ii=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,mi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bi=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ti=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ri=Object(a.a)((function t(){Object(r.a)(this,t)}));Ri.UNKNOWN=0,Ri.BROWSER=1;var ki=Object(a.a)((function t(){Object(r.a)(this,t)}));ki.UNKNOWN=0,ki.FLASH=1,ki.HTML5=2;var Ai=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[ED.RENDERER_VERSION,"HTML5",ki.HTML5,Ri.BROWSER]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Si=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ji=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ni=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Di=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._connection=void 0,s._connection=n,s}return Object(a.a)(i,[{key:"connection",get:function(){return this._connection}}]),i}(E.a);Di.CONNECTION_ESTABLISHED="NCE_ESTABLISHED",Di.CONNECTION_CLOSED="NCE_CLOSED",Di.CONNECTION_ERROR="NCE_ERROR",Di.CONNECTION_HANDSHAKING="NCE_HANDSHAKING",Di.CONNECTION_HANDSHAKED="NCE_HANDSHAKED",Di.CONNECTION_HANDSHAKE_FAILED="NCE_HANDSHAKE_FAILED",Di.CONNECTION_AUTHENTICATED="NCE_AUTHENTICATED";var Mi=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._communication=void 0,n._handShaking=void 0,n._didConnect=void 0,n._pongInterval=void 0,n._communication=t,n._handShaking=!1,n._didConnect=!1,n._pongInterval=null,n.onConnectionOpenedEvent=n.onConnectionOpenedEvent.bind(Object(l.a)(n)),n.onConnectionClosedEvent=n.onConnectionClosedEvent.bind(Object(l.a)(n)),n.onConnectionErrorEvent=n.onConnectionErrorEvent.bind(Object(l.a)(n)),n.sendPong=n.sendPong.bind(Object(l.a)(n)),n}return Object(a.a)(i,[{key:"onInit",value:function(){var t=this._communication.connection;t&&(t.addEventListener(D.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.addEventListener(D.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.addEventListener(D.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._communication.registerMessageEvent(new Ii(this.onClientPingEvent.bind(this))),this._communication.registerMessageEvent(new Ti(this.onAuthenticatedEvent.bind(this)))}},{key:"onDispose",value:function(){var t=this._communication.connection;t&&(t.removeEventListener(D.CONNECTION_OPENED,this.onConnectionOpenedEvent),t.removeEventListener(D.CONNECTION_CLOSED,this.onConnectionClosedEvent),t.removeEventListener(D.CONNECTION_ERROR,this.onConnectionErrorEvent)),this._handShaking=!1,this.stopPonging(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"onConnectionOpenedEvent",value:function(t){var e=this._communication.connection;e&&(this._didConnect=!0,this.dispatchCommunicationDemoEvent(Di.CONNECTION_ESTABLISHED,e),gD.instance.getConfiguration("system.pong.manually",!1)&&this.startPonging(),this.startHandshake(e),e.send(new Ai(null,null,null,null)),this.tryAuthentication(e))}},{key:"onConnectionClosedEvent",value:function(t){var e=this._communication.connection;e&&(this.stopPonging(),this._didConnect&&this.dispatchCommunicationDemoEvent(Di.CONNECTION_CLOSED,e))}},{key:"onConnectionErrorEvent",value:function(t){var e=this._communication.connection;e&&(this.stopPonging(),this.dispatchCommunicationDemoEvent(Di.CONNECTION_ERROR,e))}},{key:"tryAuthentication",value:function(t){if(!t||!this.getSSO())return this.getSSO()||I.log("Login without an SSO ticket is not supported"),void this.dispatchCommunicationDemoEvent(Di.CONNECTION_HANDSHAKE_FAILED,t);t.send(new Ni(this.getSSO(),gD.instance.time))}},{key:"onClientPingEvent",value:function(t){t&&t.connection&&this.sendPong(t.connection)}},{key:"onAuthenticatedEvent",value:function(t){t&&t.connection&&(this.completeHandshake(t.connection),this.dispatchCommunicationDemoEvent(Di.CONNECTION_AUTHENTICATED,t.connection),t.connection.send(new Si))}},{key:"startHandshake",value:function(t){this.dispatchCommunicationDemoEvent(Di.CONNECTION_HANDSHAKING,t),this._handShaking=!0}},{key:"completeHandshake",value:function(t){this.dispatchCommunicationDemoEvent(Di.CONNECTION_HANDSHAKED,t),this._handShaking=!1}},{key:"startPonging",value:function(){this.stopPonging(),this._pongInterval=setInterval(this.sendPong,gD.instance.getConfiguration("system.pong.interval.ms",2e4))}},{key:"stopPonging",value:function(){this._pongInterval&&(clearInterval(this._pongInterval),this._pongInterval=null)}},{key:"sendPong",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(t=t||this._communication.connection||null)&&t.send(new ji)}},{key:"dispatchCommunicationDemoEvent",value:function(t,e){gD.instance.events.dispatchEvent(new Di(t,e))}},{key:"getSSO",value:function(){return gD.instance.getConfiguration("sso.ticket",null)}}]),i}(w),Ci=function(){function t(){Object(r.a)(this,t),this._canShowInterstitial=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._canShowInterstitial=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._canShowInterstitial=t.readBoolean(),!0)}},{key:"canShowInterstitial",get:function(){return this._canShowInterstitial}}]),t}(),Li=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0,this._filteredText=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,this._filteredText=null,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),this._filteredText=t.readString(),!0)}},{key:"errorCode",get:function(){return this._errorCode}},{key:"filteredText",get:function(){return this._filteredText}}]),t}(),Ui=function(){function t(){Object(r.a)(this,t),this._isOpen=void 0,this._onShutdown=void 0,this._isAuthenticUser=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isOpen=!1,this._onShutdown=!1,this._isAuthenticUser=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._isOpen=t.readBoolean(),this._onShutdown=t.readBoolean(),t.bytesAvailable&&(this._isAuthenticUser=t.readBoolean()),!0)}},{key:"isOpen",get:function(){return this._isOpen}},{key:"onShutdown",get:function(){return this._onShutdown}},{key:"isAuthenticUser",get:function(){return this._isAuthenticUser}}]),t}(),Pi=function(){function t(){Object(r.a)(this,t),this._isOpen=void 0,this._minutesUntilChange=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isOpen=!1,this._minutesUntilChange=0,!0}},{key:"parse",value:function(t){return!!t&&(this._isOpen=t.readInt()>0,this._minutesUntilChange=t.readInt(),!0)}},{key:"isOpen",get:function(){return this._isOpen}},{key:"minutesUntilChange",get:function(){return this._minutesUntilChange}}]),t}(),wi=function(){function t(){Object(r.a)(this,t),this._openHour=void 0,this._openMinute=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._openHour=0,this._openMinute=0,!0}},{key:"parse",value:function(t){return!!t&&(this._openHour=t.readInt(),this._openMinute=t.readInt(),!0)}},{key:"openHour",get:function(){return this._openHour}},{key:"openMinute",get:function(){return this._openMinute}}]),t}(),Fi=function(){function t(){Object(r.a)(this,t),this._openHour=void 0,this._openMinute=void 0,this._userThrownOutAtClose=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._openHour=0,this._openMinute=0,this._userThrownOutAtClose=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._openHour=t.readInt(),this._openMinute=t.readInt(),this._userThrownOutAtClose=t.readBoolean(),!0)}},{key:"openHour",get:function(){return this._openHour}},{key:"openMinute",get:function(){return this._openMinute}},{key:"userThrowOutAtClose",get:function(){return this._userThrownOutAtClose}}]),t}(),xi=function(){function t(){Object(r.a)(this,t),this._minutes=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._minutes=0,!0}},{key:"parse",value:function(t){return!!t&&(this._minutes=t.readInt(),!0)}},{key:"openMinute",get:function(){return this._minutes}}]),t}(),Bi=function(){function t(){Object(r.a)(this,t),this._isInMaintenance=void 0,this._minutesUntilMaintenance=void 0,this._duration=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isInMaintenance=!1,this._minutesUntilMaintenance=0,this._duration=15,!0}},{key:"parse",value:function(t){return!!t&&(this._isInMaintenance=t.readBoolean(),this._minutesUntilMaintenance=t.readInt(),t.bytesAvailable&&(this._duration=t.readInt()),!0)}},{key:"isInMaintenance",get:function(){return this._isInMaintenance}},{key:"minutesUntilMaintenance",get:function(){return this._minutesUntilMaintenance}},{key:"duration",get:function(){return this._duration}}]),t}(),Gi=function(){function t(){Object(r.a)(this,t),this._resultCode=void 0,this._name=void 0,this._nameSuggestions=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._resultCode=-1,this._name="",this._nameSuggestions=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._resultCode=t.readInt(),this._name=t.readString();for(var e=t.readInt();e>0;)this._nameSuggestions.push(t.readString()),e--;return!0}},{key:"resultCode",get:function(){return this._resultCode}},{key:"name",get:function(){return this._name}},{key:"nameSuggestions",get:function(){return this._nameSuggestions}}]),t}(),Hi=function(){function t(){Object(r.a)(this,t),this._resultCode=void 0,this._name=void 0,this._nameSuggestions=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._resultCode=-1,this._name="",this._nameSuggestions=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._resultCode=t.readInt(),this._name=t.readString();for(var e=t.readInt();e>0;)this._nameSuggestions.push(t.readString()),e--;return!0}},{key:"resultCode",get:function(){return this._resultCode}},{key:"name",get:function(){return this._name}},{key:"nameSuggestions",get:function(){return this._nameSuggestions}}]),t}(),Vi=function(){function t(){Object(r.a)(this,t),this._figure=void 0,this._gender=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._figure="",this._gender="",!0}},{key:"parse",value:function(t){return!!t&&(this._figure=t.readString(),this._gender=t.readString(),this._gender&&(this._gender=this._gender.toUpperCase()),!0)}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}}]),t}(),zi=function(){function t(){Object(r.a)(this,t),this._state=void 0,this._outfits=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._state=0,this._outfits=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._state=t.readInt();for(var e=t.readInt();e>0;)this._outfits.push(new R_(t)),e--;return!0}},{key:"state",get:function(){return this._state}},{key:"outfits",get:function(){return this._outfits}}]),t}(),Yi=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._motto=void 0,this._gender=void 0,this._figure=void 0,!e)throw new Error("invalid_parser");this._id=e.readInt(),this._name=e.readString(),this._motto=e.readString(),this._gender=e.readString(),this._figure=e.readString()}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"motto",get:function(){return this._motto}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}}]),t}(),Wi=function(){function t(){Object(r.a)(this,t),this._item=void 0,this._openInventory=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._item=null,this._openInventory=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._item=new Yi(t),this._openInventory=t.readBoolean(),!0)}},{key:"item",get:function(){return this._item}},{key:"openInventory",value:function(){return this._openInventory}}]),t}(),Ki=function(){function t(){Object(r.a)(this,t),this._items=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._items=null,!0}},{key:"parse",value:function(t){this._items=new Map;for(var e=t.readInt();e>0;){var i=new Yi(t);this._items.set(i.id,i),e--}return!0}},{key:"items",get:function(){return this._items}}]),t}(),Xi=function(){function t(){Object(r.a)(this,t),this._boughtAsGift=void 0,this._item=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._boughtAsGift=!1,this._item=null,!0}},{key:"parse",value:function(t){return!!t&&(this._boughtAsGift=t.readBoolean(),this._item=new Yi(t),!0)}},{key:"boughtAsGift",get:function(){return this._boughtAsGift}},{key:"item",get:function(){return this._item}}]),t}(),qi=function(){function t(){Object(r.a)(this,t),this._itemId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}}]),t}(),Qi=function(){function t(e){Object(r.a)(this,t),this._name=void 0,this._id=void 0,this._consequence=void 0,this._name=e.readString(),this._id=e.readInt(),this._consequence=e.readString()}return Object(a.a)(t,[{key:"name",get:function(){return this._name}},{key:"id",get:function(){return this._id}},{key:"consequence",get:function(){return this._consequence}}]),t}(),Zi=function(){function t(e){Object(r.a)(this,t),this._name=void 0,this._topics=void 0,this._disposed=void 0,this._topics=[],this._name=e.readString();for(var i=e.readInt();i>0;)this._topics.push(new Qi(e)),i--}return Object(a.a)(t,[{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._topics=null)}},{key:"disposed",get:function(){return this._disposed}},{key:"name",get:function(){return this._name}},{key:"topics",get:function(){return this._topics}}]),t}(),Ji=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,sn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$i=function(){function t(e){Object(r.a)(this,t),this._name=void 0,this._sanctionLengthInHours=void 0,this._probationDays=void 0,this._avatarOnly=void 0,this._tradeLockInfo="",this._machineBanInfo="",this._name=e.readString(),this._sanctionLengthInHours=e.readInt(),this._probationDays=e.readInt(),this._avatarOnly=e.readBoolean(),e.bytesAvailable&&(this._tradeLockInfo=e.readString()),e.bytesAvailable&&(this._machineBanInfo=e.readString())}return Object(a.a)(t,[{key:"name",get:function(){return this._name}},{key:"sanctionLengthInHours",get:function(){return this._sanctionLengthInHours}},{key:"avatarOnly",get:function(){return this._avatarOnly}},{key:"tradeLockInfo",get:function(){return this._tradeLockInfo}},{key:"machineBanInfo",get:function(){return this._machineBanInfo}}]),t}(),tn=function(){function t(){Object(r.a)(this,t),this._callForHelpCategories=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._callForHelpCategories=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._callForHelpCategories=[];for(var e=t.readInt();e>0;)this._callForHelpCategories.push(new Zi(t)),e--;return!0}},{key:"callForHelpCategories",get:function(){return this._callForHelpCategories}}]),t}(),en=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,tn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),nn=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,rn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sn=function(){function t(){Object(r.a)(this,t),this._issueId=void 0,this._accountId=void 0,this._sanctionType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._issueId=-1,this._accountId=1,this._sanctionType=null,!0}},{key:"parse",value:function(t){return!!t&&(this._issueId=t.readInt(),this._accountId=t.readInt(),this._sanctionType=new $i(t),!0)}},{key:"issueId",get:function(){return this._issueId}},{key:"accountId",get:function(){return this._accountId}},{key:"sanctionType",get:function(){return this._sanctionType}}]),t}(),rn=function(){function t(){Object(r.a)(this,t),this._isSanctionNew=void 0,this._isSanctionActive=void 0,this._sanctionName=void 0,this._sanctionLengthHours=void 0,this._sanctionReason=void 0,this._sanctionCreationTime=void 0,this._probationHoursLeft=void 0,this._nextSanctionName=void 0,this._nextSanctionLengthHours=void 0,this._hasCustomMute=void 0,this._tradeLockExpiryTime=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isSanctionNew=!1,this._isSanctionActive=!1,this._sanctionName=null,this._sanctionLengthHours=0,this._sanctionReason=null,this._sanctionCreationTime=null,this._probationHoursLeft=0,this._nextSanctionName=null,this._nextSanctionLengthHours=0,this._hasCustomMute=!1,this._tradeLockExpiryTime=null,!0}},{key:"parse",value:function(t){return!!t&&(this._isSanctionNew=t.readBoolean(),this._isSanctionActive=t.readBoolean(),this._sanctionName=t.readString(),this._sanctionLengthHours=t.readInt(),t.readInt(),this._sanctionReason=t.readString(),this._sanctionCreationTime=t.readString(),this._probationHoursLeft=t.readInt(),this._nextSanctionName=t.readString(),this._nextSanctionLengthHours=t.readInt(),t.readInt(),this._hasCustomMute=t.readBoolean(),t.bytesAvailable&&(this._tradeLockExpiryTime=t.readString()),!0)}},{key:"isSanctionNew",get:function(){return this._isSanctionNew}},{key:"isSanctionActive",get:function(){return this._isSanctionActive}},{key:"sanctionName",get:function(){return this._sanctionName}},{key:"sanctionLengthHours",get:function(){return this._sanctionLengthHours}},{key:"sanctionReason",get:function(){return this._sanctionReason}},{key:"sanctionCreationTime",get:function(){return this._sanctionCreationTime}},{key:"probationHoursLeft",get:function(){return this._probationHoursLeft}},{key:"nextSanctionName",get:function(){return this._nextSanctionName}},{key:"nextSanctionLengthHours",get:function(){return this._nextSanctionLengthHours}},{key:"hasCustomMute",get:function(){return this._hasCustomMute}},{key:"tradeLockExpiryTime",get:function(){return this._tradeLockExpiryTime}}]),t}(),an=function(){function t(){Object(r.a)(this,t),this._ok=!1,this._secondsToWait=0,this._extraDataId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._ok=!1,this._secondsToWait=0,this._extraDataId=null,!0}},{key:"parse",value:function(t){return!!t&&(this._ok=t.readBoolean(),this._secondsToWait=t.readInt(),this._ok&&t.bytesAvailable&&(this._extraDataId=t.readString()),!0)}},{key:"ok",get:function(){return this._ok}},{key:"secondsToWait",get:function(){return this._secondsToWait}},{key:"extraDataId",get:function(){return this._extraDataId}}]),t}(),on=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),un=function(){function t(){Object(r.a)(this,t),this._url=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._url="",!0}},{key:"parse",value:function(t){return!!t&&(this._url=t.readString(),!0)}},{key:"url",get:function(){return this._url}}]),t}(),cn=function(){function t(){Object(r.a)(this,t),this._ok=!1,this._errorReason=null}return Object(a.a)(t,[{key:"flush",value:function(){return this._ok=!1,this._errorReason=null,!0}},{key:"parse",value:function(t){return!!t&&(this._ok=t.readBoolean(),this._errorReason=t.readString(),!0)}},{key:"ok",get:function(){return this._ok}},{key:"errorReason",get:function(){return this._errorReason}}]),t}(),hn=function(){function t(){Object(r.a)(this,t),this._creditPrice=0,this._ducketPrice=0,this._publishDucketPrice=0}return Object(a.a)(t,[{key:"flush",value:function(){return this._creditPrice=0,this._ducketPrice=0,this._publishDucketPrice=0,!0}},{key:"parse",value:function(t){return!!t&&(this._creditPrice=t.readInt(),this._ducketPrice=t.readInt(),t.bytesAvailable&&(this._publishDucketPrice=t.readInt()),!0)}},{key:"creditPrice",get:function(){return this._creditPrice}},{key:"ducketPrice",get:function(){return this._ducketPrice}},{key:"publishDucketPrice",get:function(){return this._publishDucketPrice}}]),t}(),_n=function(){function t(){Object(r.a)(this,t),this._ok=!0,this._renderLimitHit=!1}return Object(a.a)(t,[{key:"flush",value:function(){return this._ok=!0,this._renderLimitHit=!1,!0}},{key:"parse",value:function(t){return!!t&&(t.bytesAvailable&&(this._ok=t.readBoolean(),this._renderLimitHit=t.readBoolean()),!0)}},{key:"ok",get:function(){return this._ok}},{key:"isRenderLimitHit",get:function(){return this._renderLimitHit}}]),t}(),ln=function(){function t(){Object(r.a)(this,t),this._campaignName=void 0,this._campaignImage=void 0,this._currentDay=void 0,this._campaignDays=void 0,this._openedDays=void 0,this._missedDays=void 0}return Object(a.a)(t,[{key:"parse",value:function(t){if(!t)return!1;this._campaignName=t.readString(),this._campaignImage=t.readString(),this._currentDay=t.readInt(),this._campaignDays=t.readInt(),this._openedDays=[];for(var e=t.readInt(),i=0;i<e;i++)this._openedDays.push(t.readInt());this._missedDays=[],e=t.readInt();for(var n=0;n<e;n++)this._missedDays.push(t.readInt());return!0}},{key:"clone",value:function(){var e=new t;return e.campaignDays=this._campaignDays,e.campaignImage=this._campaignImage,e.campaignName=this._campaignName,e.currentDay=this._currentDay,e.missedDays=this._missedDays,e.openedDays=this._openedDays,e}},{key:"campaignName",get:function(){return this._campaignName},set:function(t){this._campaignName=t}},{key:"campaignImage",get:function(){return this._campaignImage},set:function(t){this._campaignImage=t}},{key:"currentDay",get:function(){return this._currentDay},set:function(t){this._currentDay=t}},{key:"campaignDays",get:function(){return this._campaignDays},set:function(t){this._campaignDays=t}},{key:"openedDays",get:function(){return this._openedDays},set:function(t){this._openedDays=t}},{key:"missedDays",get:function(){return this._missedDays},set:function(t){this._missedDays=t}}]),t}(),dn=function(){function t(){Object(r.a)(this,t),this._calendarData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._calendarData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._calendarData=new ln,this._calendarData.parse(t),!0)}},{key:"calendarData",get:function(){return this._calendarData}}]),t}(),fn=function(){function t(){Object(r.a)(this,t),this._doorOpened=void 0,this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._doorOpened=!1,this._productName=null,this._customImage=null,this._furnitureClassName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._doorOpened=t.readBoolean(),this._productName=t.readString(),this._customImage=t.readString(),this._furnitureClassName=t.readString(),!0)}},{key:"doorOpened",get:function(){return this._doorOpened}},{key:"productName",get:function(){return this._productName}},{key:"customImage",get:function(){return this._customImage}},{key:"furnitureClassName",get:function(){return this._furnitureClassName}}]),t}(),vn=function(){function t(){Object(r.a)(this,t),this._productType=void 0,this._productClassId=void 0,this._totalCoinsForBonus=void 0,this._coinsStillRequiredToBuy=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._totalCoinsForBonus=-1,this._coinsStillRequiredToBuy=-1,this._productType="",this._productClassId=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._productType=t.readString(),this._productClassId=t.readInt(),this._totalCoinsForBonus=t.readInt(),this._coinsStillRequiredToBuy=t.readInt(),!0)}},{key:"totalCoinsForBonus",get:function(){return this._totalCoinsForBonus}},{key:"coinsStillRequiredToBuy",get:function(){return this._coinsStillRequiredToBuy}},{key:"productType",get:function(){return this._productType}},{key:"productClassId",get:function(){return this._productClassId}}]),t}(),gn=function(){function t(){Object(r.a)(this,t),this._furniCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._furniCount=0,!0}},{key:"parse",value:function(t){return!!t&&(this._furniCount=t.readInt(),!0)}},{key:"furniCount",get:function(){return this._furniCount}}]),t}(),On=function(){function t(){Object(r.a)(this,t),this._Str_16456=void 0,this._Str_12494=void 0,this._Str_19123=void 0,this._Str_17298=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._Str_16456=0,this._Str_12494=0,this._Str_19123=0,this._Str_17298=0,!0}},{key:"parse",value:function(t){return!!t&&(this._Str_16456=t.readInt(),this._Str_12494=t.readInt(),this._Str_19123=t.readInt(),t.bytesAvailable?this._Str_17298=t.readInt():this._Str_17298=this._Str_16456,!0)}},{key:"_Str_3709",get:function(){return this._Str_16456}},{key:"_Str_15864",get:function(){return this._Str_12494}},{key:"_Str_24094",get:function(){return this._Str_19123}},{key:"_Str_24379",get:function(){return this._Str_17298}}]),t}(),yn=function(){function t(){Object(r.a)(this,t),this._bundleDiscountRuleset=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._bundleDiscountRuleset=null,!0}},{key:"parse",value:function(t){return!!t&&(this._bundleDiscountRuleset=new H_(t),!0)}},{key:"bundleDiscountRuleset",get:function(){return this._bundleDiscountRuleset}}]),t}(),En=function(){function t(e){if(Object(r.a)(this,t),this._visible=void 0,this._icon=void 0,this._pageId=void 0,this._pageName=void 0,this._localization=void 0,this._children=void 0,this._offerIds=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._visible=!1,this._icon=0,this._pageId=-1,this._pageName=null,this._localization=null,this._children=[],this._offerIds=[],!0}},{key:"parse",value:function(e){if(!e)return!1;this._visible=e.readBoolean(),this._icon=e.readInt(),this._pageId=e.readInt(),this._pageName=e.readString(),this._localization=e.readString();for(var i=e.readInt();i>0;)this._offerIds.push(e.readInt()),i--;for(var n=e.readInt();n>0;)this._children.push(new t(e)),n--;return!0}},{key:"visible",get:function(){return this._visible}},{key:"icon",get:function(){return this._icon}},{key:"pageId",get:function(){return this._pageId}},{key:"pageName",get:function(){return this._pageName}},{key:"localization",get:function(){return this._localization}},{key:"children",get:function(){return this._children}},{key:"offerIds",get:function(){return this._offerIds}}]),t}(),pn=function(){function t(){Object(r.a)(this,t),this._root=void 0,this._newAdditionsAvailable=void 0,this._catalogType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._root=null,!0}},{key:"parse",value:function(t){return!!t&&(this._root=new En(t),this._newAdditionsAvailable=t.readBoolean(),this._catalogType=t.readString(),!0)}},{key:"root",get:function(){return this._root}},{key:"newAdditionsAvailable",get:function(){return this._newAdditionsAvailable}},{key:"catalogType",get:function(){return this._catalogType}}]),t}(),mn=function(){function t(){Object(r.a)(this,t),this._pageName=void 0,this._pageId=void 0,this._Str_5158=void 0,this._image=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._pageName=null,this._pageId=0,this._Str_5158=0,this._image=null,!0}},{key:"parse",value:function(t){return!!t&&(this._pageId=t.readInt(),this._pageName=t.readString(),this._Str_5158=t.readInt(),this._image=t.readString(),!0)}},{key:"pageName",get:function(){return this._pageName}},{key:"pageId",get:function(){return this._pageId}},{key:"_Str_17123",get:function(){return this._Str_5158}},{key:"image",get:function(){return this._image}}]),t}(),In=function(){function t(e){Object(r.a)(this,t),this._images=void 0,this._texts=void 0,this._images=[],this._texts=[];for(var i=e.readInt();i>0;)this._images.push(e.readString()),i--;for(var n=e.readInt();n>0;)this._texts.push(e.readString()),n--}return Object(a.a)(t,[{key:"images",get:function(){return this._images}},{key:"texts",get:function(){return this._texts}}]),t}(),bn=function(){function t(e){if(Object(r.a)(this,t),this._productType=void 0,this._furniClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._uniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._productType=null,this._furniClassId=-1,this._extraParam=null,this._productCount=0,this._uniqueLimitedItem=!1,this._uniqueLimitedItemSeriesSize=0,this._uniqueLimitedItemsLeft=0,!0}},{key:"parse",value:function(e){return this._productType=e.readString(),this._productType===t.B?(this._extraParam=e.readString(),this._productCount=1,!0):(this._furniClassId=e.readInt(),this._extraParam=e.readString(),this._productCount=e.readInt(),this._uniqueLimitedItem=e.readBoolean(),this._uniqueLimitedItem&&(this._uniqueLimitedItemSeriesSize=e.readInt(),this._uniqueLimitedItemsLeft=e.readInt()),!0)}},{key:"productType",get:function(){return this._productType}},{key:"furniClassId",get:function(){return this._furniClassId}},{key:"extraParam",get:function(){return this._extraParam}},{key:"productCount",get:function(){return this._productCount}},{key:"uniqueLimitedItem",get:function(){return this._uniqueLimitedItem}},{key:"uniqueLimitedSeriesSize",get:function(){return this._uniqueLimitedItemSeriesSize}},{key:"uniqueLimitedItemsLeft",get:function(){return this._uniqueLimitedItemsLeft}}]),t}();bn.I="i",bn.S="s",bn.E="e",bn.B="b";var Tn=function(){function t(e){Object(r.a)(this,t),this._offerId=void 0,this._localizationId=void 0,this._rent=void 0,this._priceCredits=void 0,this._priceActivityPoints=void 0,this._priceActivityPointsType=void 0,this._clubLevel=void 0,this._giftable=void 0,this._bundlePurchaseAllowed=void 0,this._isPet=void 0,this._previewImage=void 0,this._products=void 0,this._offerId=e.readInt(),this._localizationId=e.readString(),this._rent=e.readBoolean(),this._priceCredits=e.readInt(),this._priceActivityPoints=e.readInt(),this._priceActivityPointsType=e.readInt(),this._giftable=e.readBoolean(),this._products=[];for(var i=e.readInt();i>0;)this._products.push(new bn(e)),i--;this._clubLevel=e.readInt(),this._bundlePurchaseAllowed=e.readBoolean(),this._isPet=e.readBoolean(),this._previewImage=e.readString()}return Object(a.a)(t,[{key:"offerId",get:function(){return this._offerId}},{key:"localizationId",get:function(){return this._localizationId}},{key:"rent",get:function(){return this._rent}},{key:"priceCredits",get:function(){return this._priceCredits}},{key:"priceActivityPoints",get:function(){return this._priceActivityPoints}},{key:"priceActivityPointsType",get:function(){return this._priceActivityPointsType}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"giftable",get:function(){return this._giftable}},{key:"bundlePurchaseAllowed",get:function(){return this._bundlePurchaseAllowed}},{key:"isPet",get:function(){return this._isPet}},{key:"previewImage",get:function(){return this._previewImage}},{key:"products",get:function(){return this._products}}]),t}(),Rn=function(){function t(e){if(Object(r.a)(this,t),this._type=void 0,this._position=void 0,this._itemName=void 0,this._itemPromoImage=void 0,this._catalogPageLocation=void 0,this._productCode=void 0,this._productOfferId=void 0,this._expirationTime=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=-1,this._position=null,this._itemName=null,this._itemPromoImage=null,this._catalogPageLocation=null,this._productCode=null,this._productOfferId=0,this._expirationTime=0,!0}},{key:"parse",value:function(e){if(!e)return!1;switch(this._position=e.readInt(),this._itemName=e.readString(),this._itemPromoImage=e.readString(),this._type=e.readInt(),this._type){case t.ITEM_CATALOGUE_PAGE:this._catalogPageLocation=e.readString();break;case t.ITEM_PRODUCT_OFFER:this._productOfferId=e.readInt();break;case t.ITEM_IAP:this._productCode=e.readString()}var i=e.readInt();return this._expirationTime=i>0?1e3*i+gD.instance.time:0,!0}},{key:"type",get:function(){return this._type}},{key:"position",get:function(){return this._position}},{key:"itemName",get:function(){return this._itemName}},{key:"itemPromoImage",get:function(){return this._itemPromoImage}},{key:"catalogPageLocation",get:function(){return this._catalogPageLocation}},{key:"productCode",get:function(){return this._productCode}},{key:"productOfferId",get:function(){return this._productOfferId}},{key:"expirationTime",get:function(){return this._expirationTime}}]),t}();Rn.ITEM_CATALOGUE_PAGE=0,Rn.ITEM_PRODUCT_OFFER=1,Rn.ITEM_IAP=2;var kn=function(){function t(){Object(r.a)(this,t),this._pageId=void 0,this._catalogType=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._offerId=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._frontPageItems=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._pageId=-1,this._catalogType=null,this._layoutCode=null,this._localization=null,this._offers=[],this._offerId=-1,this._acceptSeasonCurrencyAsCredits=!1,this._frontPageItems=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._pageId=t.readInt(),this._catalogType=t.readString(),this._layoutCode=t.readString(),this._localization=new In(t);for(var e=t.readInt();e>0;)this._offers.push(new Tn(t)),e--;if(this._offerId=t.readInt(),this._acceptSeasonCurrencyAsCredits=t.readBoolean(),t.bytesAvailable)for(var i=t.readInt();i>0;)this._frontPageItems.push(new Rn(t)),i--;return!0}},{key:"pageId",get:function(){return this._pageId}},{key:"catalogType",get:function(){return this._catalogType}},{key:"layoutCode",get:function(){return this._layoutCode}},{key:"localization",get:function(){return this._localization}},{key:"offers",get:function(){return this._offers}},{key:"offerId",get:function(){return this._offerId}},{key:"acceptSeasonCurrencyAsCredits",get:function(){return this._acceptSeasonCurrencyAsCredits}},{key:"frontPageItems",get:function(){return this._frontPageItems}}]),t}(),An=function(){function t(){Object(r.a)(this,t),this._pageName=void 0,this._Str_5158=void 0,this._image=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._pageName=null,this._Str_5158=0,this._image=null,!0}},{key:"parse",value:function(t){return!!t&&(this._pageName=t.readString(),this._Str_5158=t.readInt(),this._image=t.readString(),!0)}},{key:"pageName",get:function(){return this._pageName}},{key:"_Str_17123",get:function(){return this._Str_5158}},{key:"image",get:function(){return this._image}}]),t}(),Sn=function(){function t(){Object(r.a)(this,t),this._instantlyRefreshCatalogue=void 0,this._newFurniDataHash=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._instantlyRefreshCatalogue=!1,this._newFurniDataHash=null,!0}},{key:"parse",value:function(t){return!!t&&(this._instantlyRefreshCatalogue=t.readBoolean(),t.bytesAvailable&&(this._newFurniDataHash=t.readString()),!0)}},{key:"instantlyRefreshCatalogue",get:function(){return this._instantlyRefreshCatalogue}},{key:"newFurniDataHash",get:function(){return this._newFurniDataHash}}]),t}(),jn=function(){function t(e){Object(r.a)(this,t),this._offerId=void 0,this._isVip=void 0,this._isSelectable=void 0,this._daysRequired=void 0,this._offerId=e.readInt(),this._isVip=e.readBoolean(),this._daysRequired=e.readInt(),this._isSelectable=e.readBoolean()}return Object(a.a)(t,[{key:"offerId",get:function(){return this._offerId}},{key:"isVip",get:function(){return this._isVip}},{key:"isSelectable",get:function(){return this._isSelectable}},{key:"daysRequired",get:function(){return this._daysRequired}}]),t}(),Nn=function(){function t(){Object(r.a)(this,t),this._daysUntilNextGift=void 0,this._giftsAvailable=void 0,this._offers=void 0,this._giftData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){if(!t)return!1;this._offers=[],this._giftData=new Map,this._daysUntilNextGift=t.readInt(),this._giftsAvailable=t.readInt();for(var e=t.readInt(),i=0;i<e;i++)this._offers.push(new Tn(t));for(var n=t.readInt(),s=0;s<n;s++){var r=new jn(t);this._giftData.set(r.offerId,r)}return!0}},{key:"offers",get:function(){return this._offers}},{key:"daysUntilNextGift",get:function(){return this._daysUntilNextGift}},{key:"giftsAvailable",get:function(){return this._giftsAvailable},set:function(t){this._giftsAvailable=t}},{key:"getOfferExtraData",value:function(t){return t?this._giftData.get(t):null}},{key:"giftData",get:function(){return this._giftData}}]),t}(),Dn=function(){function t(){Object(r.a)(this,t),this._productCode=void 0,this._products=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._productCode=null,this._products=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._productCode=t.readString();for(var e=t.readInt();e>0;)this._products.push(new bn(t)),e--;return!0}},{key:"productCode",get:function(){return this._productCode}},{key:"products",get:function(){return this._products}}]),t}(),Mn=function(){function t(){Object(r.a)(this,t),this._available=void 0,this._Str_16515=void 0,this._Str_22121=void 0,this._Str_21897=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._available=!1,this._Str_16515=null,this._Str_22121=null,this._Str_21897=0,!0}},{key:"parse",value:function(t){return!!t&&(this._Str_16515=t.readString(),""!==this._Str_16515&&(this._available=!0),this._Str_22121=t.readString(),this._Str_21897=t.readInt(),!0)}},{key:"available",get:function(){return this._available}},{key:"_Str_26301",get:function(){return this._Str_16515}},{key:"_Str_26118",get:function(){return this._Str_22121}},{key:"_Str_26380",get:function(){return this._Str_21897}}]),t}(),Cn=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ln=function(){function t(){Object(r.a)(this,t),this._isEnabled=!1,this._price=null,this._giftWrappers=null,this._boxTypes=null,this._ribbonTypes=null,this._giftFurnis=null}return Object(a.a)(t,[{key:"flush",value:function(){return this._boxTypes=null,this._giftFurnis=null,this._giftWrappers=null,this._ribbonTypes=null,this._isEnabled=null,this._price=null,!0}},{key:"parse",value:function(t){if(!t)return!1;var e=[],i=[],n=[],s=[];this._isEnabled=t.readBoolean(),this._price=t.readInt();for(var r=t.readInt(),a=0;a<r;)e.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)i.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)n.push(t.readInt()),a++;for(r=t.readInt(),a=0;a<r;)s.push(t.readInt()),a++;return this._giftWrappers=e,this._ribbonTypes=n,this._giftFurnis=s,this._boxTypes=i,!0}},{key:"giftWrappers",get:function(){return this._giftWrappers}},{key:"ribbonTypes",get:function(){return this._ribbonTypes}},{key:"giftFurnis",get:function(){return this._giftFurnis}},{key:"boxTypes",get:function(){return this._boxTypes}},{key:"isEnabled",get:function(){return this._isEnabled}},{key:"price",get:function(){return this._price}}]),t}(),Un=function(){function t(e){if(Object(r.a)(this,t),this._offerId=void 0,this._productCode=void 0,this._priceCredits=void 0,this._priceActivityPoints=void 0,this._priceActivityPointsType=void 0,this._vip=void 0,this._months=void 0,this._extraDays=void 0,this._daysLeftAfterPurchase=void 0,this._year=void 0,this._month=void 0,this._day=void 0,this._giftable=void 0,!e)throw new Error("invalid_wrapper");this._offerId=e.readInt(),this._productCode=e.readString(),e.readBoolean(),this._priceCredits=e.readInt(),this._priceActivityPoints=e.readInt(),this._priceActivityPointsType=e.readInt(),this._vip=e.readBoolean(),this._months=e.readInt(),this._extraDays=e.readInt(),this._giftable=e.readBoolean(),this._daysLeftAfterPurchase=e.readInt(),this._year=e.readInt(),this._month=e.readInt(),this._day=e.readInt()}return Object(a.a)(t,[{key:"offerId",get:function(){return this._offerId}},{key:"productCode",get:function(){return this._productCode}},{key:"priceCredits",get:function(){return this._priceCredits}},{key:"priceActivityPoints",get:function(){return this._priceActivityPoints}},{key:"priceActivityPointsType",get:function(){return this._priceActivityPointsType}},{key:"vip",get:function(){return this._vip}},{key:"months",get:function(){return this._months}},{key:"extraDays",get:function(){return this._extraDays}},{key:"daysLeftAfterPurchase",get:function(){return this._daysLeftAfterPurchase}},{key:"year",get:function(){return this._year}},{key:"month",get:function(){return this._month}},{key:"day",get:function(){return this._day}},{key:"giftable",get:function(){return this._giftable}}]),t}(),Pn=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t))._Str_16193=void 0,n._Str_22071=void 0,n._Str_21178=void 0,n._Str_21024=void 0,n._Str_16193=t.readInt(),n._Str_22071=t.readInt(),n._Str_21178=t.readInt(),n._Str_21024=t.readInt(),n}return Object(a.a)(i,[{key:"_Str_23477",get:function(){return this._Str_16193*this.months}},{key:"_Str_21585",get:function(){return this._Str_22071*this.months}},{key:"_Str_22469",get:function(){return this._Str_21178}},{key:"_Str_24050",get:function(){return this._Str_16193*this.months-this.priceCredits}},{key:"_Str_22280",get:function(){return this._Str_21585*this.months-this.priceActivityPoints}},{key:"_Str_21229",get:function(){return this._Str_21024}}]),i}(Un),wn=function(){function t(){Object(r.a)(this,t),this._offer=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offer=null,!0}},{key:"parse",value:function(t){return!!t&&(this._offer=new Pn(t),!0)}},{key:"offer",get:function(){return this._offer}}]),t}(),Fn=function(){function t(){Object(r.a)(this,t),this._offers=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offers=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._offers.push(new Un(t)),e--;return!0}},{key:"offers",get:function(){return this._offers}}]),t}(),xn=function(){function t(){Object(r.a)(this,t),this._offerId=void 0,this._Str_21271=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offerId=0,this._Str_21271=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._offerId=t.readInt(),this._Str_21271=t.readBoolean(),!0)}},{key:"offerId",get:function(){return this._offerId}},{key:"_Str_18028",get:function(){return this._Str_21271}}]),t}(),Bn=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Gn=function(){function t(){Object(r.a)(this,t),this._Str_6800=void 0,this._pageId=void 0,this._offerId=void 0,this._productType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._Str_6800=-1,this._pageId=-1,this._offerId=-1,this._productType="",!0}},{key:"parse",value:function(t){return!!t&&(this._Str_6800=t.readInt(),this._pageId=t.readInt(),this._offerId=t.readInt(),this._productType=t.readString(),!0)}},{key:"_Str_23051",get:function(){return this._Str_6800}},{key:"pageId",get:function(){return this._pageId}},{key:"offerId",get:function(){return this._offerId}},{key:"productType",get:function(){return this._productType}}]),t}(),Hn=function(){function t(){Object(r.a)(this,t),this._Str_17433=!1,this._Str_19031=!1,this._activityPointType=0}return Object(a.a)(t,[{key:"flush",value:function(){return this._Str_17433=!1,this._Str_19031=!1,this._activityPointType=0,!0}},{key:"parse",value:function(t){return!!t&&(this._Str_17433=t.readBoolean(),this._Str_19031=t.readBoolean(),t.bytesAvailable&&(this._activityPointType=t.readInt()),!0)}},{key:"notEnoughCredits",get:function(){return this._Str_17433}},{key:"_Str_24352",get:function(){return this._Str_19031}},{key:"activityPointType",get:function(){return this._activityPointType}}]),t}(),Vn=function(){function t(){Object(r.a)(this,t),this._offer=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offer=null,!0}},{key:"parse",value:function(t){return!!t&&(this._offer=new Tn(t),!0)}},{key:"offer",get:function(){return this._offer}}]),t}(),zn=function(){function t(){Object(r.a)(this,t),this._code=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._code=0,!0}},{key:"parse",value:function(t){return!!t&&(this._code=t.readInt(),!0)}},{key:"code",get:function(){return this._code}}]),t}(),Yn=function(){function t(){Object(r.a)(this,t),this._code=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._code=0,!0}},{key:"parse",value:function(t){return!!t&&(this._code=t.readInt(),!0)}},{key:"code",get:function(){return this._code}}]),t}(),Wn=function(){function t(e){if(Object(r.a)(this,t),this._offerId=void 0,this._localizationId=void 0,this._rent=void 0,this._priceCredits=void 0,this._priceActivityPoints=void 0,this._priceActivityPointsType=void 0,this._clubLevel=void 0,this._giftable=void 0,this._bundlePurchaseAllowed=void 0,this._products=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._offerId=-1,this._localizationId=null,this._rent=!1,this._priceCredits=0,this._priceActivityPoints=0,this._priceActivityPointsType=0,this._clubLevel=0,this._giftable=!1,this._bundlePurchaseAllowed=!1,this._products=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._offerId=t.readInt(),this._localizationId=t.readString(),this._rent=t.readBoolean(),this._priceCredits=t.readInt(),this._priceActivityPoints=t.readInt(),this._priceActivityPointsType=t.readInt(),this._giftable=t.readBoolean();for(var e=t.readInt();e>0;)this._products.push(new bn(t)),e--;return this._clubLevel=t.readInt(),this._bundlePurchaseAllowed=t.readBoolean(),!0}},{key:"offerId",get:function(){return this._offerId}},{key:"localizationId",get:function(){return this._localizationId}},{key:"rent",get:function(){return this._rent}},{key:"priceCredits",get:function(){return this._priceCredits}},{key:"priceActivityPoints",get:function(){return this._priceActivityPoints}},{key:"priceActivityPointsType",get:function(){return this._priceActivityPointsType}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"giftable",get:function(){return this._giftable}},{key:"bundlePurchaseAllowed",get:function(){return this._bundlePurchaseAllowed}},{key:"products",get:function(){return this._products}}]),t}(),Kn=function(){function t(){Object(r.a)(this,t),this._offer=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offer=null,!0}},{key:"parse",value:function(t){return!!t&&(this._offer=new Wn(t),!0)}},{key:"offer",get:function(){return this._offer}}]),t}(),Xn=function(){function t(){Object(r.a)(this,t),this._clubLevel=void 0,this._securityLevel=void 0,this._isAmbassador=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._clubLevel=0,this._securityLevel=0,this._isAmbassador=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._clubLevel=t.readInt(),this._securityLevel=t.readInt(),this._isAmbassador=t.readBoolean(),!0)}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"securityLevel",get:function(){return this._securityLevel}},{key:"isAmbassador",get:function(){return this._isAmbassador}}]),t}(),qn=function(){function t(){Object(r.a)(this,t),this._result=void 0,this._validationInfo=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._result=-1,this._validationInfo="",!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),this._validationInfo=t.readString(),!0)}},{key:"result",get:function(){return this._result}},{key:"validationInfo",get:function(){return this._validationInfo}}]),t}(),Qn=Object(a.a)((function t(){Object(r.a)(this,t)}));Qn.NONE=0,Qn.HEART=1,Qn.SMILE=2,Qn.BOBBA=3,Qn.RELATIONSHIP_TYPES=[0,1,2,3],Qn.RELATIONSHIP_NAMES=["None","Heart","Smile","Bobba"];var Zn=function(){function t(e){if(Object(r.a)(this,t),this._relationshipStatusType=void 0,this._friendCount=void 0,this._randomFriendId=void 0,this._randomFriendName=void 0,this._randomFriendFigure=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._relationshipStatusType=Qn.NONE,this._friendCount=0,this._randomFriendId=0,this._randomFriendFigure=null,this._randomFriendName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._relationshipStatusType=t.readInt(),this._friendCount=t.readInt(),this._randomFriendId=t.readInt(),this._randomFriendName=t.readString(),this._randomFriendFigure=t.readString(),!0)}},{key:"relationshipStatusType",get:function(){return this._relationshipStatusType}},{key:"friendCount",get:function(){return this._friendCount}},{key:"randomFriendId",get:function(){return this._randomFriendId}},{key:"randomFriendName",get:function(){return this._randomFriendName}},{key:"randomFriendFigure",get:function(){return this._randomFriendFigure}}]),t}(),Jn=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._relationshipStatusMap=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=0,this._relationshipStatusMap=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._userId=t.readInt(),this._relationshipStatusMap=new H;for(var e=t.readInt(),i=0;i<e;i++){var n=new Zn(t);this._relationshipStatusMap.add(n.relationshipStatusType,n)}return!0}},{key:"userId",get:function(){return this._userId}},{key:"relationshipStatusMap",get:function(){return this._relationshipStatusMap}}]),t}(),$n=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._badges=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=null,this._badges=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._userId=t.readInt();for(var e=t.readInt();e>0;){t.readInt();var i=t.readString();this._badges.push(i),e--}return!0}},{key:"userId",get:function(){return this._userId}},{key:"badges",get:function(){return this._badges}}]),t}(),ts=function(){function t(e){if(Object(r.a)(this,t),this._userId=void 0,this._username=void 0,this._figure=void 0,this._gender=void 0,this._motto=void 0,this._realName=void 0,this._directMail=void 0,this._respectsReceived=void 0,this._respectsRemaining=void 0,this._respectsPetRemaining=void 0,this._streamPublishingAllowed=void 0,this._lastAccessDate=void 0,this._canChangeName=void 0,this._safetyLocked=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=0,this._username=null,this._figure=null,this._gender=null,this._motto=null,this._realName=null,this._directMail=!1,this._respectsReceived=0,this._respectsRemaining=0,this._respectsPetRemaining=0,this._streamPublishingAllowed=!1,this._lastAccessDate=null,this._canChangeName=!1,this._safetyLocked=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._userId=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._gender=t.readString(),this._motto=t.readString(),this._realName=t.readString(),this._directMail=t.readBoolean(),this._respectsReceived=t.readInt(),this._respectsRemaining=t.readInt(),this._respectsPetRemaining=t.readInt(),this._streamPublishingAllowed=t.readBoolean(),this._lastAccessDate=t.readString(),this._canChangeName=t.readBoolean(),this._safetyLocked=t.readBoolean(),!0)}},{key:"userId",get:function(){return this._userId}},{key:"username",get:function(){return this._username}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"motto",get:function(){return this._motto}},{key:"realName",get:function(){return this._realName}},{key:"directMail",get:function(){return this._directMail}},{key:"respectsReceived",get:function(){return this._respectsReceived}},{key:"respectsRemaining",get:function(){return this._respectsRemaining}},{key:"respectsPetRemaining",get:function(){return this._respectsPetRemaining}},{key:"streamPublishingAllowed",get:function(){return this._streamPublishingAllowed}},{key:"lastAccessedDate",get:function(){return this._lastAccessDate}},{key:"canChangeName",get:function(){return this._canChangeName}},{key:"safetyLocked",get:function(){return this._safetyLocked}}]),t}(),es=function(){function t(){Object(r.a)(this,t),this._userInfo=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userInfo=null,!0}},{key:"parse",value:function(t){return!!t&&(this._userInfo=new ts(t),!!this._userInfo)}},{key:"userInfo",get:function(){return this._userInfo}}]),t}(),is=function(){function t(){Object(r.a)(this,t),this._webId=void 0,this._id=void 0,this._newName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._webId=-1,this._id=-1,this._newName="",!0}},{key:"parse",value:function(t){return!!t&&(this._webId=t.readInt(),this._id=t.readInt(),this._newName=t.readString(),!0)}},{key:"webId",get:function(){return this._webId}},{key:"id",get:function(){return this._id}},{key:"newName",get:function(){return this._newName}}]),t}(),ns=function(){function t(e){Object(r.a)(this,t),this._groupId=void 0,this._groupName=void 0,this._badgeCode=void 0,this._colorA=void 0,this._colorB=void 0,this._favourite=void 0,this._ownerId=void 0,this._hasForum=void 0,this._groupId=e.readInt(),this._groupName=e.readString(),this._badgeCode=e.readString(),this._colorA=e.readString(),this._colorB=e.readString(),this._favourite=e.readBoolean(),this._ownerId=e.readInt(),this._hasForum=e.readBoolean()}return Object(a.a)(t,[{key:"groupId",get:function(){return this._groupId}},{key:"groupName",get:function(){return this._groupName}},{key:"badgeCode",get:function(){return this._badgeCode}},{key:"colorA",get:function(){return this._colorA}},{key:"colorB",get:function(){return this._colorB}},{key:"favourite",get:function(){return this._favourite}},{key:"ownerId",get:function(){return this._ownerId}},{key:"hasForum",get:function(){return this._hasForum}}]),t}(),ss=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._username=void 0,this._figure=void 0,this._motto=void 0,this._registration=void 0,this._achievementPoints=void 0,this._friendsCount=void 0,this._isMyFriend=void 0,this._requestSent=void 0,this._isOnline=void 0,this._groups=void 0,this._secondsSinceLastVisit=void 0,this._openProfileWindow=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=0,this._username=null,this._figure=null,this._motto=null,this._registration=null,this._achievementPoints=0,this._friendsCount=0,this._isMyFriend=!1,this._requestSent=!1,this._isOnline=!1,this._groups=[],this._secondsSinceLastVisit=0,this._openProfileWindow=!1,!0}},{key:"parse",value:function(t){if(!t)return!1;this._id=t.readInt(),this._username=t.readString(),this._figure=t.readString(),this._motto=t.readString(),this._registration=t.readString(),this._achievementPoints=t.readInt(),this._friendsCount=t.readInt(),this._isMyFriend=t.readBoolean(),this._requestSent=t.readBoolean(),this._isOnline=t.readBoolean();for(var e=t.readInt(),i=0;i<e;i++)this._groups.push(new ns(t));return this._secondsSinceLastVisit=t.readInt(),this._openProfileWindow=t.readBoolean(),!0}},{key:"id",get:function(){return this._id}},{key:"username",get:function(){return this._username}},{key:"figure",get:function(){return this._figure}},{key:"motto",get:function(){return this._motto}},{key:"registration",get:function(){return this._registration}},{key:"achievementPoints",get:function(){return this._achievementPoints}},{key:"friendsCount",get:function(){return this._friendsCount}},{key:"isMyFriend",get:function(){return this._isMyFriend}},{key:"requestSent",get:function(){return this._requestSent}},{key:"isOnline",get:function(){return this._isOnline}},{key:"groups",get:function(){return this._groups}},{key:"secondsSinceLastVisit",get:function(){return this._secondsSinceLastVisit}},{key:"openProfileWindow",get:function(){return this._openProfileWindow}}]),t}(),rs=function(){function t(){Object(r.a)(this,t),this._volumeSystem=void 0,this._volumeFurni=void 0,this._volumeTrax=void 0,this._oldChat=void 0,this._roomInvites=void 0,this._cameraFollow=void 0,this._flags=void 0,this._chatType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!1,this._flags=0,this._chatType=0,!0}},{key:"parse",value:function(t){return!!t&&(this._volumeSystem=t.readInt(),this._volumeFurni=t.readInt(),this._volumeTrax=t.readInt(),this._oldChat=t.readBoolean(),this._roomInvites=t.readBoolean(),this._cameraFollow=t.readBoolean(),this._flags=t.readInt(),this._chatType=t.readInt(),!0)}},{key:"volumeSystem",get:function(){return this._volumeSystem}},{key:"volumeFurni",get:function(){return this._volumeFurni}},{key:"volumeTrax",get:function(){return this._volumeTrax}},{key:"oldChat",get:function(){return this._oldChat}},{key:"roomInvites",get:function(){return this._roomInvites}},{key:"cameraFollow",get:function(){return this._cameraFollow}},{key:"flags",get:function(){return this._flags}},{key:"chatType",get:function(){return this._chatType}}]),t}(),as=function(){function t(){Object(r.a)(this,t),this._badges=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._badges=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString();this._badges.set(i,n),e--}return!0}},{key:"badges",get:function(){return this._badges}}]),t}(),os=function(){function t(){Object(r.a)(this,t),this._ignoredUsers=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._ignoredUsers=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._ignoredUsers=[];for(var e=t.readInt();e>0;)this._ignoredUsers.push(t.readString()),e--;return!0}},{key:"ignoredUsers",get:function(){return this._ignoredUsers}}]),t}(),us=function(){function t(){Object(r.a)(this,t),this._result=void 0,this._name=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._result=-1,this._name=null,!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),this._name=t.readString(),!0)}},{key:"result",get:function(){return this._result}},{key:"name",get:function(){return this._name}}]),t}(),cs=function(){function t(){Object(r.a)(this,t),this._link=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._link=null,!0}},{key:"parse",value:function(t){return!!t&&(this._link=t.readString(),!0)}},{key:"link",get:function(){return this._link}}]),t}(),hs=function(){function t(){Object(r.a)(this,t),this._credits=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._credits=null,!0}},{key:"parse",value:function(t){return!!t&&(this._credits=t.readString(),!0)}},{key:"credits",get:function(){return this._credits}}]),t}(),_s=function(){function t(){Object(r.a)(this,t),this._currencies=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._currencies=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._currencies.set(t.readInt(),t.readInt()),e--;return!0}},{key:"currencies",get:function(){return this._currencies}}]),t}(),ls=function(){function t(){Object(r.a)(this,t),this._productName=void 0,this._daysToPeriodEnd=void 0,this._memberPeriods=void 0,this._periodsSubscribedAhead=void 0,this._responseType=void 0,this._hasEverBeenMember=void 0,this._isVip=void 0,this._pastClubDays=void 0,this._pastVipDays=void 0,this._minutesUntilExpiration=void 0,this._minutesSinceLastModified=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._productName=null,this._daysToPeriodEnd=0,this._memberPeriods=0,this._periodsSubscribedAhead=0,this._responseType=0,this._hasEverBeenMember=!1,this._isVip=!1,this._pastClubDays=0,this._pastVipDays=0,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,!0}},{key:"parse",value:function(t){return!!t&&(this._productName=t.readString(),this._daysToPeriodEnd=t.readInt(),this._memberPeriods=t.readInt(),this._periodsSubscribedAhead=t.readInt(),this._responseType=t.readInt(),this._hasEverBeenMember=t.readBoolean(),this._isVip=t.readBoolean(),this._pastClubDays=t.readInt(),this._pastVipDays=t.readInt(),this._minutesUntilExpiration=t.readInt(),t.bytesAvailable&&(this._minutesSinceLastModified=t.readInt()),!0)}},{key:"productName",get:function(){return this._productName}},{key:"daysToPeriodEnd",get:function(){return this._daysToPeriodEnd}},{key:"memberPeriods",get:function(){return this._memberPeriods}},{key:"periodsSubscribedAhead",get:function(){return this._periodsSubscribedAhead}},{key:"responseType",get:function(){return this._responseType}},{key:"hasEverBeenMember",get:function(){return this._hasEverBeenMember}},{key:"isVip",get:function(){return this._isVip}},{key:"pastClubDays",get:function(){return this._pastClubDays}},{key:"pastVipDays",get:function(){return this._pastVipDays}},{key:"minutesUntilExpiration",get:function(){return this._minutesUntilExpiration}},{key:"minutesSinceLastModified",get:function(){return this._minutesSinceLastModified}}]),t}();ls.RESPONSE_TYPE_LOGIN=1,ls.RESPONSE_TYPE_PURCHASE=2,ls.RESPONSE_TYPE_DISCOUNT_AVAILABLE=3,ls.RESPONSE_TYPE_CITIZENSHIP_DISCOUNT=4;var ds=Object(a.a)((function t(){Object(r.a)(this,t)}));ds.DOG=0,ds.CAT=1,ds.CROCODILE=2,ds.TERRIER=3,ds.BEAR=4,ds.PIG=5,ds.LION=6,ds.RHINO=7,ds.SPIDER=8,ds.TURTLE=9,ds.CHICKEN=10,ds.FROG=11,ds.DRAGON=12,ds.MONSTER=13,ds.MONKEY=14,ds.HORSE=15,ds.MONSTERPLANT=16,ds.BUNNY=17,ds.BUNNYEVIL=18,ds.BUNNYDEPRESSED=19,ds.BUNNYLOVE=20,ds.PIGEONGOOD=21,ds.PIGEONEVIL=22,ds.DEMONMONKEY=23,ds.BABYBEAR=24,ds.BABYTERRIER=25,ds.GNOME=26,ds.LEPRECHAUN=27,ds.KITTENBABY=28,ds.PUPPYBABY=29,ds.PIGLETNBABY=30,ds.HALOOMPA=31,ds.FOOLS=32,ds.PTEROSAUR=33,ds.VELOCIRAPTOR=34;var fs=function(){function t(e){Object(r.a)(this,t),this._typeId=void 0,this._paletteId=void 0,this._color=void 0,this._breedId=void 0,this._customPartCount=void 0,this._customParts=void 0,this._typeId=e.readInt(),this._paletteId=e.readInt(),this._color=e.readString(),this._breedId=e.readInt(),this._customParts=[],this._customPartCount=e.readInt();for(var i=0;i<this._customPartCount;)this._customParts.push(e.readInt()),this._customParts.push(e.readInt()),this._customParts.push(e.readInt()),i++}return Object(a.a)(t,[{key:"typeId",get:function(){return this._typeId}},{key:"paletteId",get:function(){return this._paletteId}},{key:"color",get:function(){return this._color}},{key:"breedId",get:function(){return this._breedId}},{key:"figuredata",get:function(){var t=this.typeId+" "+this.paletteId+" "+this.color;t=t+" "+this.custompartCount;var e,i=Object(s.a)(this.customParts);try{for(i.s();!(e=i.n()).done;){t=t+" "+e.value}}catch(n){i.e(n)}finally{i.f()}return t}},{key:"customParts",get:function(){return this._customParts}},{key:"custompartCount",get:function(){return this._customPartCount}}]),t}(),vs=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._figureData=void 0,this._level=void 0,!e)throw new Error("invalid_wrapper");this._id=e.readInt(),this._name=e.readString(),this._figureData=new fs(e),this._level=e.readInt()}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"typeId",get:function(){return this._figureData.typeId}},{key:"paletteId",get:function(){return this._figureData.paletteId}},{key:"color",get:function(){return this._figureData.color}},{key:"breedId",get:function(){return this._figureData.breedId}},{key:"customPartCount",get:function(){return this._figureData.custompartCount}},{key:"figureString",get:function(){return this._figureData.figuredata}},{key:"figureData",get:function(){return this._figureData}},{key:"level",get:function(){return this._level}}]),t}(),gs=function(){function t(){Object(r.a)(this,t),this._respect=void 0,this._petOwnerId=void 0,this._petData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._respect=0,this._petOwnerId=0,this._petData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._respect=t.readInt(),this._petOwnerId=t.readInt(),this._petData=new vs(t),!0)}},{key:"respect",get:function(){return this._respect}},{key:"petOwnerId",get:function(){return this._petOwnerId}},{key:"petData",get:function(){return this._petData}},{key:"isTreat",get:function(){return this._petData.typeId===ds.MONSTERPLANT}}]),t}(),Os=function(){function t(){Object(r.a)(this,t),this._petId=void 0,this._userId=void 0,this._supplementType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._petId=0,this._userId=0,this._supplementType=0,!0}},{key:"parse",value:function(t){return!!t&&(this._petId=t.readInt(),this._userId=t.readInt(),this._supplementType=t.readInt(),!0)}},{key:"petId",get:function(){return this._petId}},{key:"userId",get:function(){return this._userId}},{key:"supplementType",get:function(){return this._supplementType}}]),t}(),ys=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._respectsReceived=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=0,this._respectsReceived=0,!0}},{key:"parse",value:function(t){return!!t&&(this._userId=t.readInt(),this._respectsReceived=t.readInt(),!0)}},{key:"userId",get:function(){return this._userId}},{key:"respectsReceived",get:function(){return this._respectsReceived}}]),t}(),Es=function(){function t(e,i,n){Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0,this._hasControllers=!1,this._roomId=e,this._roomName=i,this._hasControllers=n}return Object(a.a)(t,[{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}},{key:"_Str_22776",get:function(){return this._hasControllers}}]),t}(),ps=function(){function t(e){Object(r.a)(this,t),this._currentHcStreak=void 0,this._firstSubscriptionDate=void 0,this._kickbackPercentage=void 0,this._totalCreditsMissed=void 0,this._totalCreditsRewarded=void 0,this._totalCreditsSpent=void 0,this._creditRewardForStreakBonus=void 0,this._creditRewardForMonthlySpent=void 0,this._timeUntilPayday=void 0,this._currentHcStreak=e.readInt(),this._firstSubscriptionDate=e.readString(),this._kickbackPercentage=e.readDouble(),this._totalCreditsMissed=e.readInt(),this._totalCreditsRewarded=e.readInt(),this._totalCreditsSpent=e.readInt(),this._creditRewardForStreakBonus=e.readInt(),this._creditRewardForMonthlySpent=e.readInt(),this._timeUntilPayday=e.readInt()}return Object(a.a)(t,[{key:"currentHcStreak",get:function(){return this._currentHcStreak}},{key:"firstSubscriptionDate",get:function(){return this._firstSubscriptionDate}},{key:"kickbackPercentage",get:function(){return this._kickbackPercentage}},{key:"totalCreditsMissed",get:function(){return this._totalCreditsMissed}},{key:"totalCreditsRewarded",get:function(){return this._totalCreditsRewarded}},{key:"totalCreditsSpent",get:function(){return this._totalCreditsSpent}},{key:"creditRewardForStreakBonus",get:function(){return this._creditRewardForStreakBonus}},{key:"creditRewardForMonthlySpent",get:function(){return this._creditRewardForMonthlySpent}},{key:"timeUntilPayday",get:function(){return this._timeUntilPayday}}]),t}(),ms=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return this._data=new ps(t),!0}},{key:"data",get:function(){return this._data}}]),t}(),Is=function(){function t(){Object(r.a)(this,t),this._looks=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._looks=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;t.readInt();for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString(),s=t.readString();this._looks.set(i,[n,s]),e--}return!0}},{key:"looks",get:function(){return this._looks}}]),t}(),bs=function(){function t(){Object(r.a)(this,t),this._isVip=void 0,this._rooms=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isVip=!1,this._rooms=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._isVip=t.readBoolean();for(var e=t.readInt();e>0;)this._rooms.push(new Es(t.readInt(),t.readString(),t.readBoolean())),e--;return!0}},{key:"isVip",get:function(){return this._isVip}},{key:"rooms",get:function(){return this._rooms}}]),t}(),Ts=function(){function t(){Object(r.a)(this,t),this._pageId=void 0,this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._pageId=-1,this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._pageId=t.readInt(),this._data=new Tn(t),!0)}},{key:"pageId",get:function(){return this._pageId}},{key:"data",get:function(){return this._data}}]),t}(),Rs=function(){function t(e){if(Object(r.a)(this,t),this._type=void 0,this._breedId=void 0,this._paletteId=void 0,this._sellable=void 0,this._rare=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=-1,this._breedId=-1,this._paletteId=-1,this._sellable=!1,this._rare=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._type=t.readInt(),this._breedId=t.readInt(),this._paletteId=t.readInt(),this._sellable=t.readBoolean(),this._rare=t.readBoolean(),!0)}},{key:"type",get:function(){return this._type}},{key:"breedId",get:function(){return this._breedId}},{key:"paletteId",get:function(){return this._paletteId}},{key:"sellable",get:function(){return this._sellable}},{key:"rare",get:function(){return this._rare}}]),t}(),ks=function(){function t(){Object(r.a)(this,t),this._productCode=void 0,this._palettes=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._productCode="",this._palettes=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._productCode=t.readString();for(var e=t.readInt();e>0;)this._palettes.push(new Rs(t)),e--;return!0}},{key:"productCode",get:function(){return this._productCode}},{key:"palettes",get:function(){return this._palettes}}]),t}(),As=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ss=function(){function t(e){Object(r.a)(this,t),this._id=void 0,this._identifier=void 0,this._type=void 0,this._title=void 0,this._Str_1858=void 0,this._Str_2991=void 0,this._Str_18782=void 0,this._productCode=void 0,this._Str_9772=void 0,this._expirationTime=void 0,this._Str_3594=void 0,this._Str_3539=void 0,this._Str_2956=void 0,this._Str_11962=void 0,this._Str_9163=void 0,this._Str_9163=e.readInt(),this._id=e.readInt(),this._identifier=e.readString(),this._productCode=e.readString(),this._Str_3594=e.readInt(),this._Str_3539=e.readInt(),this._Str_2956=e.readInt(),this._Str_9772=e.readInt();var i=e.readInt();this._expirationTime=i>0?1e3*i+gD.instance.time:0,this._title=e.readString(),this._Str_1858=e.readString(),this._Str_2991=e.readString(),this._Str_18782=e.readString(),this._type=e.readInt(),this._Str_11962=[];for(var n=e.readInt();n>0;)this._Str_11962.push(e.readString()),n--;return this}return Object(a.a)(t,[{key:"populate",value:function(t){t&&(this._id=t.id,this._identifier=t.identifier,this._type=t.type,this._title=t.title,this._Str_1858=t.description,this._Str_2991=t.imageUrl,this._Str_18782=t._Str_13452,this._productCode=t.productCode,this._Str_9772=t.purchaseLimit,this._expirationTime=t.expirationTime,this._Str_3594=t.priceInCredits,this._Str_3539=t.priceInActivityPoints,this._Str_2956=t.activityPointType,this._Str_11962=t._Str_24978,this._Str_9163=t._Str_11180)}},{key:"_Str_24338",value:function(t){this._Str_9772=this._Str_9772-t}},{key:"id",get:function(){return this._id}},{key:"identifier",get:function(){return this._identifier}},{key:"type",get:function(){return this._type}},{key:"title",get:function(){return this._title}},{key:"description",get:function(){return this._Str_1858}},{key:"imageUrl",get:function(){return this._Str_2991}},{key:"_Str_13452",get:function(){return this._Str_18782}},{key:"productCode",get:function(){return this._productCode}},{key:"purchaseLimit",get:function(){return this._Str_9772}},{key:"expirationTime",get:function(){return this._expirationTime}},{key:"priceInCredits",get:function(){return this._Str_3594}},{key:"priceInActivityPoints",get:function(){return this._Str_3539}},{key:"activityPointType",get:function(){return this._Str_2956}},{key:"_Str_24978",get:function(){return this._Str_11962}},{key:"_Str_11180",get:function(){return this._Str_9163}}]),t}(),js=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new Ss(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Ns=function(){function t(){Object(r.a)(this,t),this._errorCode=""}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode="",!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readString(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),Ds=function(){function t(){Object(r.a)(this,t),this._productName="",this._productDescription=""}return Object(a.a)(t,[{key:"flush",value:function(){return this._productDescription="",this._productName="",!0}},{key:"parse",value:function(t){return!!t&&(this._productDescription=t.readString(),this._productName=t.readString(),!0)}},{key:"productName",get:function(){return this._productName}},{key:"productDescription",get:function(){return this._productDescription}}]),t}(),Ms=function(){function t(){Object(r.a)(this,t),this._goalId=void 0,this._goalCode=void 0,this._result=void 0,this._requiredFurnis=void 0,this._missingFurnis=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._goalId=0,this._goalCode=null,this._result=0,this._requiredFurnis=null,this._missingFurnis=null,!0}},{key:"parse",value:function(t){this._goalId=t.readInt(),this._goalCode=t.readString(),this._result=t.readInt(),this._requiredFurnis=[];for(var e=t.readInt();e>0;)this._requiredFurnis.push(t.readString()),e--;for(e=t.readInt();e>0;)this._missingFurnis[t.readString()]="",e--;return!0}},{key:"goalId",get:function(){return this._goalId}},{key:"goalCode",get:function(){return this._goalCode}},{key:"result",get:function(){return this._result}},{key:"requiredFurnis",get:function(){return this._requiredFurnis}},{key:"isMissing",value:function(t){return!!this._missingFurnis[t]}}]),t}();Ms.SUBMITTED=0,Ms.ASK_FOR_SUBMIT=1,Ms.ASK_FOR_CONFIRM=2,Ms.PREREQUISITES_NOT_MET=3,Ms.ROOM_DOOR_NOT_OPEN=4,Ms.ROOM_TOO_OLD=5,Ms.ASK_FOR_ACCEPT_RULES=6;var Cs=Object(a.a)((function t(){Object(r.a)(this,t)}));Cs.ALLOWED=0,Cs.REQUIRED_PERK_MISSING=1,Cs.REQUIRED_BADGE_MISSING=2;var Ls=function(){function t(){Object(r.a)(this,t),this._goalId=void 0,this._goalCode=void 0,this._resultCode=void 0,this._votesRemaining=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._goalId=0,this._goalCode=null,this._resultCode=0,this._votesRemaining=0,!0}},{key:"parse",value:function(t){return this._goalId=t.readInt(),this._goalCode=t.readString(),this._resultCode=t.readInt(),this._votesRemaining=t.readInt(),!0}},{key:"goalId",get:function(){return this._goalId}},{key:"goalCode",get:function(){return this._goalCode}},{key:"isVotingAllowedForUser",get:function(){return this._resultCode===Cs.ALLOWED}},{key:"votesRemaining",get:function(){return this._votesRemaining}},{key:"resultCode",get:function(){return this._resultCode}}]),t}(),Us=function(){function t(){Object(r.a)(this,t),this._schedulingStr=void 0,this._code=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._schedulingStr=null,this._code=null,!0}},{key:"parse",value:function(t){return this._schedulingStr=t.readString(),this._code=t.readString(),!0}},{key:"schedulingStr",get:function(){return this._schedulingStr}},{key:"code",get:function(){return this._code}}]),t}(),Ps=function(){function t(){Object(r.a)(this,t),this._Str_8579=void 0,this._Str_6987=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._Str_8579=!1,this._Str_6987=0,!0}},{key:"parse",value:function(t){return this._Str_8579=t.readBoolean(),this._Str_6987=t.readInt(),!0}},{key:"_Str_25348",get:function(){return this._Str_8579}},{key:"_Str_10760",get:function(){return this._Str_6987}}]),t}(),ws=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!0}}]),t}(),Fs=function(){function t(){Object(r.a)(this,t),this._Str_8997=void 0,this._Str_21095=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._Str_8997=null,this._Str_21095=0,!0}},{key:"parse",value:function(t){return this._Str_8997=t.readString(),this._Str_21095=t.readInt(),!0}},{key:"_Str_23288",get:function(){return this._Str_8997}},{key:"_Str_25497",get:function(){return this._Str_21095}}]),t}(),xs=function(){function t(e){Object(r.a)(this,t),this._recipeName=void 0,this._itemName=void 0,this._recipeName=e.readString(),this._itemName=e.readString()}return Object(a.a)(t,[{key:"recipeName",get:function(){return this._recipeName}},{key:"itemName",get:function(){return this._itemName}}]),t}(),Bs=function(){function t(){Object(r.a)(this,t),this._recipes=void 0,this._ingredients=void 0,this._recipes=[],this._ingredients=[]}return Object(a.a)(t,[{key:"flush",value:function(){return this._recipes=[],this._ingredients=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._recipes.push(new xs(t));for(var n=t.readInt(),s=0;s<n;s++)this._ingredients.push(t.readString());return!0}},{key:"recipes",get:function(){return this._recipes}},{key:"ingredients",get:function(){return this._ingredients}},{key:"isActive",value:function(){return this._recipes.length>0||this._ingredients.length>0}}]),t}(),Gs=function(){function t(e){Object(r.a)(this,t),this._count=void 0,this._itemName=void 0,this._count=e.readInt(),this._itemName=e.readString()}return Object(a.a)(t,[{key:"count",get:function(){return this._count}},{key:"itemName",get:function(){return this._itemName}}]),t}(),Hs=function(){function t(){Object(r.a)(this,t),this._ingredients=void 0,this._ingredients=[]}return Object(a.a)(t,[{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._ingredients.push(new Gs(t));return!0}},{key:"flush",value:function(){return this._ingredients=[],!0}},{key:"ingredients",get:function(){return this._ingredients}}]),t}(),Vs=function(){function t(){Object(r.a)(this,t),this._hasRecipes=void 0,this._count=void 0}return Object(a.a)(t,[{key:"parse",value:function(t){return!!t&&(this._count=t.readInt(),this._hasRecipes=t.readBoolean(),!0)}},{key:"flush",value:function(){return this._count=0,this._hasRecipes=!1,!0}},{key:"count",get:function(){return this._count}},{key:"hasRecipes",get:function(){return this._hasRecipes}}]),t}(),zs=function(){function t(){Object(r.a)(this,t),this._success=void 0,this._result=void 0}return Object(a.a)(t,[{key:"parse",value:function(t){return!!t&&(this._success=t.readBoolean(),this._success&&(this._result=new xs(t)),!0)}},{key:"flush",value:function(){return this._success=!1,!0}},{key:"success",get:function(){return this._success}},{key:"result",get:function(){return this._result}}]),t}(),Ys=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ws=function(){function t(e){if(Object(r.a)(this,t),this._senderId=void 0,this._errorCode=void 0,!e)throw new Error("invalid_wrapper");this._senderId=e.readInt(),this._errorCode=e.readInt()}return Object(a.a)(t,[{key:"senderId",get:function(){return this._senderId}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),Ks=function(){function t(){Object(r.a)(this,t),this._failuers=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._failuers=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._failuers.push(new Ws(t)),e--;return!0}},{key:"failures",get:function(){return this._failuers}}]),t}(),Xs=function(){function t(){Object(r.a)(this,t),this._success=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._success=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._success=t.readBoolean(),!0)}},{key:"success",get:function(){return this._success}}]),t}(),qs=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),Qs=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._gender=void 0,this._online=void 0,this._followingAllowed=void 0,this._figure=void 0,this._categoryId=void 0,this._motto=void 0,this._realName=void 0,this._lastAccess=void 0,this._persistedMessageUser=void 0,this._vipMember=void 0,this._pocketHabboUser=void 0,this._relationshipStatus=void 0,!e)throw new Error("invalid_wrapper");this._id=e.readInt(),this._name=e.readString(),this._gender=e.readInt(),this._online=e.readBoolean(),this._followingAllowed=e.readBoolean(),this._figure=e.readString(),this._categoryId=e.readInt(),this._motto=e.readString(),this._realName=e.readString(),this._lastAccess=e.readString(),this._persistedMessageUser=e.readBoolean(),this._vipMember=e.readBoolean(),this._pocketHabboUser=e.readBoolean(),this._relationshipStatus=e.readShort()}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"gender",get:function(){return this._gender}},{key:"online",get:function(){return this._online}},{key:"followingAllowed",get:function(){return this._followingAllowed}},{key:"figure",get:function(){return this._figure}},{key:"categoryId",get:function(){return this._categoryId}},{key:"motto",get:function(){return this._motto}},{key:"lastAccess",get:function(){return this._lastAccess}},{key:"realName",get:function(){return this._realName}},{key:"persistedMessageUser",get:function(){return this._persistedMessageUser}},{key:"vipMember",get:function(){return this._vipMember}},{key:"pocketHabboUser",get:function(){return this._pocketHabboUser}},{key:"relationshipStatus",get:function(){return this._relationshipStatus}}]),t}(),Zs=function(){function t(){Object(r.a)(this,t),this._totalFragments=void 0,this._fragmentNumber=void 0,this._fragment=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();for(var e=t.readInt();e>0;)this._fragment.push(new Qs(t)),e--;return!0}},{key:"totalFragments",get:function(){return this._totalFragments}},{key:"fragmentNumber",get:function(){return this._fragmentNumber}},{key:"fragment",get:function(){return this._fragment}}]),t}(),Js=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,!e)throw new Error("invalid_wrapper");this._id=e.readInt(),this._name=e.readString()}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}}]),t}(),$s=function(){function t(){Object(r.a)(this,t),this._categories=void 0,this._removedFriendIds=void 0,this._addedFriends=void 0,this._updatedFriends=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._categories=[],this._removedFriendIds=[],this._addedFriends=[],this._updatedFriends=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._categories.push(new Js(t)),e--;for(var i=t.readInt();i>0;){var n=t.readInt();-1===n?this._removedFriendIds.push(t.readInt()):0===n?this._updatedFriends.push(new Qs(t)):1===n&&this._addedFriends.push(new Qs(t)),i--}return!0}},{key:"categories",get:function(){return this._categories}},{key:"removedFriendIds",get:function(){return this._removedFriendIds}},{key:"addedFriends",get:function(){return this._addedFriends}},{key:"updatedFriends",get:function(){return this._updatedFriends}}]),t}(),tr=function(){function t(){Object(r.a)(this,t),this._typeCode=void 0,this._avatarId=void 0,this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._typeCode=-1,this._avatarId=0,this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._typeCode=t.readInt(),this._avatarId=t.readInt(),this._message=t.readString(),!0)}},{key:"typeCode",get:function(){return this._typeCode}},{key:"avatarId",get:function(){return this._avatarId}},{key:"message",get:function(){return this._message}}]),t}(),er=function(){function t(e){if(Object(r.a)(this,t),this._requestId=void 0,this._requesterName=void 0,this._requesterUserId=void 0,this._figureString=void 0,!e)throw new Error("invalid_wrapper");this._requestId=e.readInt(),this._requesterName=e.readString(),this._figureString=e.readString(),this._requesterUserId=this._requestId}return Object(a.a)(t,[{key:"requestId",get:function(){return this._requestId}},{key:"requesterName",get:function(){return this._requesterName}},{key:"requesterUserId",get:function(){return this._requesterUserId}},{key:"figureString",get:function(){return this._figureString}}]),t}(),ir=function(){function t(){Object(r.a)(this,t),this._totalRequests=void 0,this._requests=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._totalRequests=0,this._requests=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._totalRequests=t.readInt();for(var e=t.readInt();e>0;)this._requests.push(new er(t)),e--;return!0}},{key:"totalRequests",get:function(){return this._totalRequests}},{key:"requests",get:function(){return this._requests}}]),t}(),nr=function(){function t(e){if(Object(r.a)(this,t),this._avatarId=void 0,this._avatarName=void 0,this._avatarMotto=void 0,this._isAvatarOnline=void 0,this._canFollow=void 0,this._avatarGender=void 0,this._avatarFigure=void 0,this._lastOnlineData=void 0,this._realName=void 0,!e)throw new Error("invalid_wrapper");this._avatarId=e.readInt(),this._avatarName=e.readString(),this._avatarMotto=e.readString(),this._isAvatarOnline=e.readBoolean(),this._canFollow=e.readBoolean(),this._lastOnlineData=e.readString(),this._avatarGender=e.readInt(),this._avatarFigure=e.readString(),this._realName=e.readString()}return Object(a.a)(t,[{key:"avatarId",get:function(){return this._avatarId}},{key:"avatarName",get:function(){return this._avatarName}},{key:"avatarMotto",get:function(){return this._avatarMotto}},{key:"isAvatarOnline",get:function(){return this._isAvatarOnline}},{key:"canFollow",get:function(){return this._canFollow}},{key:"avatarGender",get:function(){return this._avatarGender}},{key:"avatarFigure",get:function(){return this._avatarFigure}},{key:"lastOnlineData",get:function(){return this._lastOnlineData}},{key:"realName",get:function(){return this._realName}}]),t}(),sr=function(){function t(){Object(r.a)(this,t),this._friends=void 0,this._others=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._friends=[],this._others=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._friends.push(new nr(t)),e--;for(var i=t.readInt();i>0;)this._others.push(new nr(t)),i--;return!0}},{key:"friends",get:function(){return this._friends}},{key:"others",get:function(){return this._others}}]),t}(),rr=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0,this._userId=void 0,this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,this._userId=0,this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),this._userId=t.readInt(),this._message=t.readString(),!0)}},{key:"errorCode",get:function(){return this._errorCode}},{key:"userId",get:function(){return this._userId}},{key:"message",get:function(){return this._message}}]),t}(),ar=function(){function t(){Object(r.a)(this,t),this._clientMessageId=void 0,this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._clientMessageId=0,this._errorCode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._clientMessageId=t.readInt(),this._errorCode=t.readInt(),!0)}},{key:"clientMessageId",get:function(){return this._clientMessageId}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),or=function(){function t(){Object(r.a)(this,t),this._userFriendLimit=void 0,this._normalFriendLimit=void 0,this._extendedFriendLimit=void 0,this._categories=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._categories=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._userFriendLimit=t.readInt(),this._normalFriendLimit=t.readInt(),this._extendedFriendLimit=t.readInt();for(var e=t.readInt();e>0;)this._categories.push(new Js(t)),e--;return!0}},{key:"userFriendLimit",get:function(){return this._userFriendLimit}},{key:"normalFriendLimit",get:function(){return this._normalFriendLimit}},{key:"extendedFriendLimit",get:function(){return this._extendedFriendLimit}},{key:"categories",get:function(){return this._categories}}]),t}(),ur=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),cr=function(){function t(){Object(r.a)(this,t),this._count=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._count=0,!0}},{key:"parse",value:function(t){return!!t&&(this._count=t.readInt(),!0)}},{key:"count",get:function(){return this._count}}]),t}(),hr=function(){function t(){Object(r.a)(this,t),this._senderId=void 0,this._messageText=void 0,this._secondsSinceSent=void 0,this._extraData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._senderId=0,this._messageText=null,this._secondsSinceSent=0,this._extraData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),this._secondsSinceSent=t.readInt(),t.bytesAvailable&&(this._extraData=t.readString()),!0)}},{key:"senderId",get:function(){return this._senderId}},{key:"messageText",get:function(){return this._messageText}},{key:"secondsSinceSent",get:function(){return this._secondsSinceSent}},{key:"extraData",get:function(){return this._extraData}}]),t}(),_r=function(){function t(){Object(r.a)(this,t),this._request=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._request=null,!0}},{key:"parse",value:function(t){return!!t&&(this._request=new er(t),!0)}},{key:"request",get:function(){return this._request}}]),t}(),lr=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0,this._failedRecipients=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,this._failedRecipients=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._errorCode=t.readInt();for(var e=t.readInt();e>0;)this._failedRecipients.push(t.readInt()),e--;return!0}},{key:"errorCode",get:function(){return this._errorCode}},{key:"failedRecipients",get:function(){return this._failedRecipients}}]),t}(),dr=function(){function t(){Object(r.a)(this,t),this._senderId=void 0,this._messageText=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._senderId=0,this._messageText=null,!0}},{key:"parse",value:function(t){return!!t&&(this._senderId=t.readInt(),this._messageText=t.readString(),!0)}},{key:"senderId",get:function(){return this._senderId}},{key:"messageText",get:function(){return this._messageText}}]),t}(),fr=function(){function t(){Object(r.a)(this,t),this._gameTypeId=void 0,this._url=void 0,this._gameClientId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._gameTypeId=0,this._url=null,this._gameClientId=null,!0}},{key:"parse",value:function(t){return!!t&&(this._gameTypeId=t.readInt(),this._gameClientId=t.readString(),this._url=t.readString(),!0)}},{key:"gameTypeId",get:function(){return this._gameTypeId}},{key:"url",get:function(){return this._url}},{key:"gameClientId",get:function(){return this._gameClientId}}]),t}(),vr=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),gr=function(){function t(){Object(r.a)(this,t),this._bases=void 0,this._symbols=void 0,this._partColors=void 0,this._colorsA=void 0,this._colorsB=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._bases=new Map,this._symbols=new Map,this._partColors=new Map,this._colorsA=new Map,this._colorsB=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString(),s=t.readString();this._bases.set(i,[n,s]),e--}for(var r=t.readInt();r>0;){var a=t.readInt(),o=t.readString(),u=t.readString();this._symbols.set(a,[o,u]),r--}for(var c=t.readInt();c>0;){var h=t.readInt(),_=t.readString();this._partColors.set(h,_),c--}for(var l=t.readInt();l>0;){var d=t.readInt(),f=t.readString();this._colorsA.set(d,f),l--}for(var v=t.readInt();v>0;){var g=t.readInt(),O=t.readString();this._colorsB.set(g,O),v--}return!0}},{key:"bases",get:function(){return this._bases}},{key:"symbols",get:function(){return this._symbols}},{key:"partColors",get:function(){return this._partColors}},{key:"colorsA",get:function(){return this._colorsA}},{key:"colorsB",get:function(){return this._colorsB}}]),t}(),Or=function(){function t(){Object(r.a)(this,t),this._groupCost=void 0,this._availableRooms=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupCost=0,this._availableRooms=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;this._groupCost=t.readInt();for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString();t.readBoolean(),this._availableRooms.set(i,n),e--}return!0}},{key:"groupCost",get:function(){return this._groupCost}},{key:"availableRooms",get:function(){return this._availableRooms}}]),t}(),yr=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._furnitureCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=0,this._furnitureCount=0,!0}},{key:"parse",value:function(t){return!!t&&(this._userId=t.readInt(),this._furnitureCount=t.readInt(),!0)}},{key:"userId",get:function(){return this._userId}},{key:"furnitureCount",get:function(){return this._furnitureCount}}]),t}(),Er=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._type=void 0,this._title=void 0,this._description=void 0,this._badge=void 0,this._roomId=void 0,this._roomName=void 0,this._membershipType=void 0,this._membersCount=void 0,this._isFavorite=void 0,this._createdAt=void 0,this._isOwner=void 0,this._isAdmin=void 0,this._ownerName=void 0,this._flag=void 0,this._canMembersDecorate=void 0,this._pendingRequestsCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=0,this._type=0,this._title=null,this._description=null,this._badge=null,this._roomId=0,this._roomName=null,this._membershipType=0,this._membersCount=0,this._isFavorite=!1,this._createdAt=null,this._isOwner=!1,this._isAdmin=!1,this._ownerName=null,this._flag=!1,this._canMembersDecorate=!1,this._pendingRequestsCount=0,!0}},{key:"parse",value:function(t){return!!t&&(this._id=t.readInt(),t.readBoolean(),this._type=t.readInt(),this._title=t.readString(),this._description=t.readString(),this._badge=t.readString(),this._roomId=t.readInt(),this._roomName=t.readString(),this._membershipType=t.readInt(),this._membersCount=t.readInt(),this._isFavorite=t.readBoolean(),this._createdAt=t.readString(),this._isOwner=t.readBoolean(),this._isAdmin=t.readBoolean(),this._ownerName=t.readString(),this._flag=t.readBoolean(),this._canMembersDecorate=t.readBoolean(),this._pendingRequestsCount=t.readInt(),!0)}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"title",get:function(){return this._title}},{key:"description",get:function(){return this._description}},{key:"badge",get:function(){return this._badge}},{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}},{key:"membershipType",get:function(){return this._membershipType}},{key:"membersCount",get:function(){return this._membersCount}},{key:"isFavorite",get:function(){return this._isFavorite}},{key:"createdAt",get:function(){return this._createdAt}},{key:"isOwner",get:function(){return this._isOwner}},{key:"isAdmin",get:function(){return this._isAdmin}},{key:"ownerName",get:function(){return this._ownerName}},{key:"flag",get:function(){return this._flag}},{key:"canMembersDecorate",get:function(){return this._canMembersDecorate}},{key:"pendingRequestsCount",get:function(){return this._pendingRequestsCount}}]),t}(),pr=function(){function t(e){Object(r.a)(this,t),this.isBase=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.isBase=e,this.key=0,this.color=0,this.position=4}return Object(a.a)(t,[{key:"code",get:function(){return 0===this.key?null:(this.isBase?"b":"s")+(this.key<100?"0":"")+(this.key<10?"0":"")+this.key+(this.color<10?"0":"")+this.color+this.position}}]),t}(),mr=Object(a.a)((function t(){Object(r.a)(this,t)}));mr.OWNER=0,mr.ADMIN=1,mr.MEMBER=2,mr.REQUESTED=3,mr.DELETED=4;var Ir=function(){function t(e){if(Object(r.a)(this,t),this._rank=void 0,this._id=void 0,this._name=void 0,this._figure=void 0,this._joinedAt=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._rank=-1,this._id=0,this._name=null,this._figure=null,this._joinedAt=null,!0}},{key:"parse",value:function(t){return!!t&&(this._rank=t.readInt(),this._id=t.readInt(),this._name=t.readString(),this._figure=t.readString(),this._joinedAt=t.readString(),!0)}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"figure",get:function(){return this._figure}},{key:"rank",get:function(){return this._rank}},{key:"joinedAt",get:function(){return this._joinedAt}}]),t}(),br=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._groupTitle=void 0,this._roomId=void 0,this._badge=void 0,this._totalMembersCount=void 0,this._result=void 0,this._admin=void 0,this._pageSize=void 0,this._pageIndex=void 0,this._level=void 0,this._query=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=0,this._groupTitle=null,this._roomId=0,this._badge=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=0,this._pageIndex=0,this._level=0,this._query=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._groupId=t.readInt(),this._groupTitle=t.readString(),this._roomId=t.readInt(),this._badge=t.readString(),this._totalMembersCount=t.readInt();for(var e=t.readInt();e>0;)this._result.push(new Ir(t)),e--;return this._admin=t.readBoolean(),this._pageSize=t.readInt(),this._pageIndex=t.readInt(),this._level=t.readInt(),this._query=t.readString(),!0}},{key:"groupId",get:function(){return this._groupId}},{key:"groupTitle",get:function(){return this._groupTitle}},{key:"roomId",get:function(){return this._roomId}},{key:"badge",get:function(){return this._badge}},{key:"totalMembersCount",get:function(){return this._totalMembersCount}},{key:"result",get:function(){return this._result}},{key:"admin",get:function(){return this._admin}},{key:"pageSize",get:function(){return this._pageSize}},{key:"pageIndex",get:function(){return this._pageIndex}},{key:"level",get:function(){return this._level}},{key:"query",get:function(){return this._query}}]),t}(),Tr=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._groupId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._groupId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._groupId=t.readInt(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"guildId",get:function(){return this._groupId}}]),t}(),Rr=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0,this._id=void 0,this._title=void 0,this._description=void 0,this._colorA=void 0,this._colorB=void 0,this._state=void 0,this._canMembersDecorate=void 0,this._badgeParts=void 0,this._badgeCode=void 0,this._membersCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._roomName=null,this._id=0,this._title=null,this._description=null,this._colorA=0,this._colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts=new Map,this._badgeCode=null,this._membersCount=0,!0}},{key:"parse",value:function(t){if(!t)return!1;1===t.readInt()&&(this._roomId=t.readInt(),this._roomName=t.readString(),t.readBoolean()),t.readBoolean(),this._id=t.readInt(),this._title=t.readString(),this._description=t.readString(),t.readInt(),this._colorA=t.readInt(),this._colorB=t.readInt(),this._state=t.readInt(),this._canMembersDecorate=0===t.readInt(),t.readBoolean(),t.readString();for(var e=t.readInt(),i=0;i<e;i++){var n=new pr(0===i);n.key=t.readInt(),n.color=t.readInt(),n.position=t.readInt(),0===n.key&&(n.position=4),this._badgeParts.set(i,n)}return this._badgeCode=t.readString(),this._membersCount=t.readInt(),!0}},{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}},{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"description",get:function(){return this._description}},{key:"colorA",get:function(){return this._colorA}},{key:"colorB",get:function(){return this._colorB}},{key:"state",get:function(){return this._state}},{key:"canMembersDecorate",get:function(){return this._canMembersDecorate}},{key:"badgeParts",get:function(){return this._badgeParts}},{key:"badgeCode",get:function(){return this._badgeCode}},{key:"membersCount",get:function(){return this._membersCount}}]),t}(),kr=function(){function t(){Object(r.a)(this,t),this._groupId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._groupId=t.readInt(),!0}},{key:"groupId",get:function(){return this._groupId}}]),t}(),Ar=function(){function t(){Object(r.a)(this,t),this._noobnessLevel=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._noobnessLevel=0,!0}},{key:"parse",value:function(t){return!!t&&(this._noobnessLevel=t.readInt(),!0)}},{key:"noobnessLevel",get:function(){return this._noobnessLevel}}]),t}(),Sr=function(){function t(){Object(r.a)(this,t),this._infoUrl=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._infoUrl=t.readString(),!0)}},{key:"infoUrl",get:function(){return this._infoUrl}}]),t}(),jr=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!0}}]),t}(),Nr=function(){function t(){Object(r.a)(this,t),this._calls=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._calls=[],!0}},{key:"parse",value:function(t){this._calls=[];for(var e=t.readInt(),i=0;i<e;i++){var n=t.readString(),s=t.readString(),r=t.readString();this._calls.push({callId:n,timeStamp:s,message:r})}return!0}},{key:"pendingCalls",get:function(){return this._calls}},{key:"count",get:function(){return this._calls.length}}]),t}(),Dr=function(){function t(){Object(r.a)(this,t),this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._message=null,!0}},{key:"parse",value:function(t){return this._message=t.readString(),!0}},{key:"message",get:function(){return this._message}}]),t}(),Mr=function(){function t(){Object(r.a)(this,t),this._resultType=void 0,this._messageText=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._resultType=0,this._messageText=null,!0}},{key:"parse",value:function(t){return!!t&&(this._resultType=t.readInt(),this._messageText=t.readString(),!0)}},{key:"resultType",get:function(){return this._resultType}},{key:"messageText",get:function(){return this._messageText}}]),t}(),Cr=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!0}}]),t}(),Lr=function(){function t(){Object(r.a)(this,t),this._acceptanceTimeout=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._acceptanceTimeout=-1,!0}},{key:"parse",value:function(t){return this._acceptanceTimeout=t.readInt(),!0}},{key:"acceptanceTimeout",get:function(){return this._acceptanceTimeout}}]),t}(),Ur=function(){function t(){Object(r.a)(this,t),this._winningVoteCode=void 0,this._ownVoteCode=void 0,this._finalStatus=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._winningVoteCode=-1,this._ownVoteCode=-1,this._finalStatus=null,!0}},{key:"parse",value:function(t){this._finalStatus=[],this._winningVoteCode=t.readInt(),this._ownVoteCode=t.readInt();for(var e=t.readInt(),i=0;i<e;i++)this._finalStatus.push(t.readInt());return!0}},{key:"winningVoteCode",get:function(){return this._winningVoteCode}},{key:"ownVoteCode",get:function(){return this._ownVoteCode}},{key:"finalStatus",get:function(){return this._finalStatus}}]),t}(),Pr=function(){function t(){Object(r.a)(this,t),this._votingTimeout=void 0,this._chatRecord=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._votingTimeout=t.readInt(),this._chatRecord=t.readString(),!0}},{key:"votingTimeout",get:function(){return this._votingTimeout}},{key:"chatRecord",get:function(){return this._chatRecord}}]),t}(),wr=function(){function t(){Object(r.a)(this,t),this._status=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._status=null,!0}},{key:"parse",value:function(t){this._status=[];for(var e=t.readInt(),i=0;i<e;i++)this._status.push(t.readInt());return!0}},{key:"status",get:function(){return this._status}}]),t}();wr.AWAITING_VOTE=0,wr.VOTED_OK=1,wr.VOTED_BAD=2,wr.VOTED_VERY_BAD=3,wr.NO_VOTE=4,wr.FINDING_NEW_VOTER=5;var Fr=function(){function t(){Object(r.a)(this,t),this._onDuty=void 0,this._guidesOnDuty=void 0,this._helpersOnDuty=void 0,this._guardiansOnDuty=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._onDuty=!1,this._guidesOnDuty=0,this._helpersOnDuty=0,this._guardiansOnDuty=0,!0}},{key:"parse",value:function(t){return!!t&&(this._onDuty=t.readBoolean(),this._guidesOnDuty=t.readInt(),this._helpersOnDuty=t.readInt(),this._guardiansOnDuty=t.readInt(),!0)}},{key:"onDuty",get:function(){return this._onDuty}},{key:"guidesOnDuty",get:function(){return this._guidesOnDuty}},{key:"helpersOnDuty",get:function(){return this._helpersOnDuty}},{key:"guardiansOnDuty",get:function(){return this._guardiansOnDuty}}]),t}(),xr=function(){function t(e,i,n,s,a,o,u){Object(r.a)(this,t),this._type=void 0,this._secondsAgo=void 0,this._isGuide=void 0,this._otherPartyName=void 0,this._otherPartyFigure=void 0,this._description=void 0,this._roomName=void 0,this._type=e,this._secondsAgo=i,this._isGuide=n,this._otherPartyName=s,this._otherPartyFigure=a,this._description=o,this._roomName=u}return Object(a.a)(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"secondsAgo",get:function(){return this._secondsAgo},set:function(t){this._secondsAgo=t}},{key:"isGuide",get:function(){return this._isGuide},set:function(t){this._isGuide=t}},{key:"otherPartyName",get:function(){return this._otherPartyName},set:function(t){this._otherPartyName=t}},{key:"otherPartyFigure",get:function(){return this._otherPartyFigure},set:function(t){this._otherPartyFigure=t}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"roomName",get:function(){return this._roomName},set:function(t){this._roomName=t}}]),t}(),Br=function(){function t(){Object(r.a)(this,t),this._statusCode=void 0,this._pendingTicket=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._statusCode=0,this._pendingTicket=null,!0}},{key:"parse",value:function(t){return!!t&&(this._statusCode=t.readInt(),this._pendingTicket=new xr(t.readInt(),t.readInt(),t.readBoolean(),t.readString(),t.readString(),t.readString(),t.readString()),!0)}},{key:"statusCode",get:function(){return this._statusCode}},{key:"pendingTicket",get:function(){return this._pendingTicket}}]),t}();Br.GUIDE_REPORTING_STATUS_OK=0,Br.GUIDE_REPORTING_STATUS_PENDING_TICKET=1,Br.GUIDE_REPORTING_STATUS_ABUSIVE=2,Br.GUIDE_REPORTING_STATUS_REPORTING_TOO_QUICKLY=3;var Gr=function(){function t(){Object(r.a)(this,t),this._asGuide=void 0,this._helpRequestType=void 0,this._helpRequestDescription=void 0,this._roleSpecificWaitTime=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._asGuide=!1,this._helpRequestType=0,this._helpRequestDescription=null,this._roleSpecificWaitTime=0,!0}},{key:"parse",value:function(t){return!!t&&(this._asGuide=t.readBoolean(),this._helpRequestType=t.readInt(),this._helpRequestDescription=t.readString(),this._roleSpecificWaitTime=t.readInt(),!0)}},{key:"asGuide",get:function(){return this._asGuide}},{key:"helpRequestType",get:function(){return this._helpRequestType}},{key:"helpRequestDescription",get:function(){return this._helpRequestDescription}},{key:"roleSpecificWaitTime",get:function(){return this._roleSpecificWaitTime}}]),t}(),Hr=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Vr=function(){function t(){Object(r.a)(this,t),this._endReason=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._endReason=0,!0}},{key:"parse",value:function(t){return!!t&&(this._endReason=t.readInt(),!0)}},{key:"endReason",get:function(){return this._endReason}}]),t}(),zr=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}();zr.ERROR_GENERIC=0,zr.ERROR_GUIDES_REJECT=1,zr.ERROR_NOT_ENOUGH_GUIDES=2,zr.ERROR_NOT_ENOUGH_VOTES=3,zr.ERROR_NO_CHATLOG_FOUND=4;var Yr=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._roomName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}}]),t}(),Wr=function(){function t(){Object(r.a)(this,t),this._chatMessage=void 0,this._senderId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._chatMessage=null,this._senderId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._chatMessage=t.readString(),this._senderId=t.readInt(),!0)}},{key:"chatMessage",get:function(){return this._chatMessage}},{key:"senderId",get:function(){return this._senderId}}]),t}(),Kr=function(){function t(){Object(r.a)(this,t),this._isTyping=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isTyping=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._isTyping=t.readBoolean(),!0)}},{key:"isTyping",get:function(){return this._isTyping}}]),t}(),Xr=function(){function t(){Object(r.a)(this,t),this._requesterRoomId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._requesterRoomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._requesterRoomId=t.readInt(),!0)}},{key:"requesterRoomId",get:function(){return this._requesterRoomId}}]),t}(),qr=function(){function t(){Object(r.a)(this,t),this._requesterUserId=void 0,this._requesterName=void 0,this._requesterFigure=void 0,this._guideUserId=void 0,this._guideName=void 0,this._guideFigure=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._requesterUserId=0,this._requesterName=null,this._requesterFigure=null,this._guideUserId=0,this._guideName=null,this._guideFigure=null,!0}},{key:"parse",value:function(t){return!!t&&(this._requesterUserId=t.readInt(),this._requesterName=t.readString(),this._requesterFigure=t.readString(),this._guideUserId=t.readInt(),this._guideName=t.readString(),this._guideFigure=t.readString(),!0)}},{key:"requesterUserId",get:function(){return this._requesterUserId}},{key:"requesterName",get:function(){return this._requesterName}},{key:"requesterFigure",get:function(){return this._requesterFigure}},{key:"guideUserId",get:function(){return this._guideUserId}},{key:"guideName",get:function(){return this._guideName}},{key:"guideFigure",get:function(){return this._guideFigure}}]),t}(),Qr=function(){function t(){Object(r.a)(this,t),this._result=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._result=0,!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),!0)}},{key:"result",get:function(){return this._result}}]),t}();Qr.CREATION_RESULT_OK=0,Qr.CREATION_RESULT_UNABLE_TO_REPORT=1,Qr.CREATION_RESULT_NO_CHATLOG_FOUND=2,Qr.CREATION_RESULT_BULLY_ALREADY_REPORTED=3;var Zr=function(){function t(){Object(r.a)(this,t),this._resolution=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._resolution=0,!0}},{key:"parse",value:function(t){return!!t&&(this._resolution=t.readInt(),!0)}},{key:"resolution",get:function(){return this._resolution}}]),t}();Zr.RESOLUTION_GUARDIANS_TOOK_ACTION=0,Zr.RESOLUTION_FORWARDED_TO_MODERATORS=1,Zr.RESOLUTION_REPORTER_IS_ABUSIVE=2;var Jr=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),$r=function(){function t(){Object(r.a)(this,t),this._closeReason=void 0,this._messageText=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._closeReason=0,this._messageText="",!0}},{key:"parse",value:function(t){return!!t&&(this._closeReason=t.readInt(),this._messageText=t.readString(),!0)}},{key:"closeReason",get:function(){return this._closeReason}},{key:"messageText",get:function(){return this._messageText}}]),t}(),ta=function(){function t(){Object(r.a)(this,t),this._quizCode=void 0,this._questionIds=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quizCode=null,this._questionIds=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._quizCode=t.readString();var e=t.readInt();this._questionIds=[];for(var i=0;i<e;i++)this._questionIds.push(t.readInt());return!0}},{key:"quizCode",get:function(){return this._quizCode}},{key:"questionIds",get:function(){return this._questionIds}}]),t}(),ea=function(){function t(){Object(r.a)(this,t),this._quizCode=void 0,this._questionIdsForWrongAnswers=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quizCode=null,this._questionIdsForWrongAnswers=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._quizCode=t.readString();var e=t.readInt();this._questionIdsForWrongAnswers=[];for(var i=0;i<e;i++)this._questionIdsForWrongAnswers.push(t.readInt());return!0}},{key:"quizCode",get:function(){return this._quizCode}},{key:"questionIdsForWrongAnswers",get:function(){return this._questionIdsForWrongAnswers}}]),t}(),ia=function(){function t(e){if(Object(r.a)(this,t),this._achievementId=void 0,this._level=void 0,this._badgeId=void 0,this._scoreAtStartOfLevel=void 0,this._scoreLimit=void 0,this._levelRewardPoints=void 0,this._levelRewardPointType=void 0,this._currentPoints=void 0,this._finalLevel=void 0,this._category=void 0,this._subCategory=void 0,this._levelCount=void 0,this._displayMethod=void 0,this._unseen=0,!e)throw new Error("invalid_parser");this._achievementId=e.readInt(),this._level=e.readInt(),this._badgeId=e.readString(),this._scoreAtStartOfLevel=e.readInt(),this._scoreLimit=Math.max(1,e.readInt()),this._levelRewardPoints=e.readInt(),this._levelRewardPointType=e.readInt(),this._currentPoints=e.readInt(),this._finalLevel=e.readBoolean(),this._category=e.readString(),this._subCategory=e.readString(),this._levelCount=e.readInt(),this._displayMethod=e.readInt()}return Object(a.a)(t,[{key:"achievementId",get:function(){return this._achievementId}},{key:"badgeId",get:function(){return this._badgeId}},{key:"level",get:function(){return this._level}},{key:"scoreAtStartOfLevel",get:function(){return this._scoreAtStartOfLevel}},{key:"scoreLimit",get:function(){return this._scoreLimit-this._scoreAtStartOfLevel}},{key:"levelRewardPoints",get:function(){return this._levelRewardPoints}},{key:"levelRewardPointType",get:function(){return this._levelRewardPointType}},{key:"currentPoints",get:function(){return this._currentPoints-this._scoreAtStartOfLevel}},{key:"finalLevel",get:function(){return this._finalLevel}},{key:"category",get:function(){return this._category}},{key:"subCategory",get:function(){return this._subCategory}},{key:"levelCount",get:function(){return this._levelCount}},{key:"firstLevelAchieved",get:function(){return this._level>1||this._finalLevel}},{key:"setMaxProgress",value:function(){this._currentPoints=this._scoreLimit}},{key:"displayMethod",get:function(){return this._displayMethod}},{key:"progress",get:function(){return this._currentPoints}},{key:"toNextProgress",get:function(){return this._scoreLimit}},{key:"unseen",get:function(){return this._unseen},set:function(t){this._unseen=t}},{key:"reset",value:function(t){this._achievementId=t._achievementId,this._level=t._level,this._badgeId=t._badgeId,this._scoreAtStartOfLevel=t._scoreAtStartOfLevel,this._scoreLimit=t._scoreLimit,this._levelRewardPoints=t._levelRewardPoints,this._levelRewardPointType=t._levelRewardPointType,this._currentPoints=t._currentPoints,this._finalLevel=t._finalLevel,this._category=t.category,this._subCategory=t._subCategory,this._levelCount=t._levelCount,this._displayMethod=t._displayMethod}}]),t}();ia.DISPLAY_METHOD_OBSOLETE=-1,ia.DISPLAY_METHOD_SHOW_LEVEL_PROGRESS=0,ia.DISPLAY_METHOD_NEVER_SHOW_PROGRESS=1,ia.DISPLAY_METHOD_SHOW_TOTAL_PROGRESS=2;var na=function(){function t(){Object(r.a)(this,t),this._achievement=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._achievement=null,!0}},{key:"parse",value:function(t){return!!t&&(this._achievement=new ia(t),!0)}},{key:"achievement",get:function(){return this._achievement}}]),t}(),sa=function(){function t(){Object(r.a)(this,t),this._achievements=void 0,this._defaultCategory=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._achievements=[],this._defaultCategory=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._achievements=[];for(var e=t.readInt();e>0;)this._achievements.push(new ia(t)),e--;return this._defaultCategory=t.readString(),!0}},{key:"achievements",get:function(){return this._achievements}},{key:"defaultCategory",get:function(){return this._defaultCategory}}]),t}(),ra=function(){function t(){Object(r.a)(this,t),this._score=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._score=0,!0}},{key:"parse",value:function(t){return!!t&&(this._score=t.readInt(),!0)}},{key:"score",get:function(){return this._score}}]),t}(),aa=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._duration=void 0,this._isPermanent=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=0,this._duration=0,this._isPermanent=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._type=t.readInt(),this._duration=t.readInt(),this._isPermanent=t.readBoolean(),!0)}},{key:"type",get:function(){return this._type}},{key:"duration",get:function(){return this._duration}},{key:"isPermanent",get:function(){return this._isPermanent}}]),t}(),oa=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._subType=void 0,this._duration=void 0,this._permanent=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=0,this._subType=0,this._duration=0,this._permanent=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._type=t.readInt(),this._subType=t.readInt(),this._duration=t.readInt(),this._permanent=t.readBoolean(),!0)}},{key:"type",get:function(){return this._type}},{key:"subType",get:function(){return this._subType}},{key:"duration",get:function(){return this._duration}},{key:"isPermanent",get:function(){return this._permanent}}]),t}(),ua=function(){function t(){Object(r.a)(this,t),this._type=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=0,!0}},{key:"parse",value:function(t){return!!t&&(this._type=t.readInt(),!0)}},{key:"type",get:function(){return this._type}}]),t}(),ca=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._subType=void 0,this._duration=void 0,this._inactiveEffectsInInventory=void 0,this._secondsLeftIfActive=void 0,this._permanent=void 0}return Object(a.a)(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"subType",get:function(){return this._subType},set:function(t){this._subType=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"inactiveEffectsInInventory",get:function(){return this._inactiveEffectsInInventory},set:function(t){this._inactiveEffectsInInventory=t}},{key:"secondsLeftIfActive",get:function(){return this._secondsLeftIfActive},set:function(t){this._secondsLeftIfActive=t}},{key:"isPermanent",get:function(){return this._permanent},set:function(t){this._permanent=t}}]),t}(),ha=function(){function t(){Object(r.a)(this,t),this._effects=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._effects=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=new ca;i.type=t.readInt(),i.subType=t.readInt(),i.duration=t.readInt(),i.inactiveEffectsInInventory=t.readInt(),i.secondsLeftIfActive=t.readInt(),i.isPermanent=t.readBoolean(),this._effects.push(i),e--}return!0}},{key:"effects",get:function(){return this._effects}}]),t}(),_a=function(){function t(e,i){if(Object(r.a)(this,t),this._badgeId=void 0,this._limit=void 0,!i)throw new Error("invalid_parser");this._badgeId="ACH_"+e+i.readInt(),this._limit=i.readInt()}return Object(a.a)(t,[{key:"badgeId",get:function(){return this._badgeId}},{key:"limit",get:function(){return this._limit}}]),t}(),la=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){for(var i=t.readString(),n=t.readInt(),s=0;s<n;)this._data.push(new _a(i,t)),s++;e--}return!0}},{key:"data",get:function(){return this._data}}]),t}(),da=function(){function t(){Object(r.a)(this,t),this._badgeId=void 0,this._badgeCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._badgeId=0,this._badgeCode=null,!0}},{key:"parse",value:function(t){return!!t&&(this._badgeId=t.readInt(),this._badgeCode=t.readString(),!0)}},{key:"badgeId",get:function(){return this._badgeId}},{key:"badgeCode",get:function(){return this._badgeCode}}]),t}(),fa=function(){function t(){Object(r.a)(this,t),this._allBadgeCodes=void 0,this._activeBadgeCodes=void 0,this._badgeIds=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._allBadgeCodes=[],this._activeBadgeCodes=null,this._badgeIds=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._allBadgeCodes=[],this._activeBadgeCodes=new H,this._badgeIds=new H;for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString();this._badgeIds.add(n,i),this._allBadgeCodes.push(n),e--}for(e=t.readInt();e>0;){var s=t.readInt(),r=t.readString();this._activeBadgeCodes.add(r,s),e--}return!0}},{key:"getBadgeId",value:function(t){return this._badgeIds.getValue(t)}},{key:"getActiveBadgeSlot",value:function(t){return this._activeBadgeCodes.getValue(t)}},{key:"getAllBadgeCodes",value:function(){return this._allBadgeCodes}},{key:"getActiveBadgeCodes",value:function(){return this._activeBadgeCodes.getKeys()}}]),t}(),va=function(){function t(){Object(r.a)(this,t),this._requestCode=void 0,this._fulfilled=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._requestCode=t.readString(),this._fulfilled=t.readBoolean(),!0)}},{key:"requestCode",get:function(){return this._requestCode}},{key:"fulfilled",get:function(){return this._fulfilled}}]),t}(),ga=function(){function t(){Object(r.a)(this,t),this._figureSetIds=void 0,this._boundFurnitureNames=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._figureSetIds=[],this._boundFurnitureNames=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._figureSetIds.push(t.readInt()),e--;for(var i=t.readInt();i>0;)this._boundFurnitureNames.push(t.readString()),i--;return!0}},{key:"figureSetIds",get:function(){return this._figureSetIds}},{key:"boundsFurnitureNames",get:function(){return this._boundFurnitureNames}}]),t}(),Oa=Object(a.a)((function t(){Object(r.a)(this,t)}));Oa.UNIQUE_SET=256;var ya=function(){function t(){Object(r.a)(this,t),this._flags=void 0,this._uniqueNumber=void 0,this._uniqueSeries=void 0,this._flags=0,this._uniqueNumber=0,this._uniqueSeries=0}return Object(a.a)(t,[{key:"parseWrapper",value:function(t){(this._flags&Oa.UNIQUE_SET)>0&&(this._uniqueNumber=t.readInt(),this._uniqueSeries=t.readInt())}},{key:"initializeFromRoomObjectModel",value:function(t){this._uniqueNumber=t.getValue(dt.FURNITURE_UNIQUE_SERIAL_NUMBER),this._uniqueSeries=t.getValue(dt.FURNITURE_UNIQUE_EDITION_SIZE)}},{key:"writeRoomObjectModel",value:function(t){t&&(t.setValue(dt.FURNITURE_UNIQUE_SERIAL_NUMBER,this._uniqueNumber),t.setValue(dt.FURNITURE_UNIQUE_EDITION_SIZE,this._uniqueSeries))}},{key:"getLegacyString",value:function(){return""}},{key:"compare",value:function(t){return!1}},{key:"state",get:function(){var t=parseInt(this.getLegacyString());return isNaN(t)?0:t}},{key:"isUnique",get:function(){return this._uniqueSeries>0}},{key:"uniqueNumber",get:function(){return this._uniqueNumber},set:function(t){this._uniqueNumber=t}},{key:"uniqueSeries",get:function(){return this._uniqueSeries},set:function(t){this._uniqueSeries=t}},{key:"rarityLevel",get:function(){return-1}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}}]),t}(),Ea=Object(a.a)((function t(){Object(r.a)(this,t)}));Ea.LEGACY_KEY=0,Ea.MAP_KEY=1,Ea.STRING_KEY=2,Ea.VOTE_KEY=3,Ea.EMPTY_KEY=4,Ea.NUMBER_KEY=5,Ea.HIGHSCORE_KEY=6,Ea.CRACKABLE_KEY=7;var pa=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._state=void 0,t._hits=void 0,t._target=void 0,t._state="",t._hits=0,t._target=0,t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){t&&(this._state=t.readString(),this._hits=t.readInt(),this._target=t.readInt(),Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t))}},{key:"initializeFromRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t),this._state=t.getValue(dt.FURNITURE_CRACKABLE_STATE),this._hits=t.getValue(dt.FURNITURE_CRACKABLE_HITS),this._target=t.getValue(dt.FURNITURE_CRACKABLE_TARGET)}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_CRACKABLE_STATE,this._state),t.setValue(dt.FURNITURE_CRACKABLE_HITS,this._hits),t.setValue(dt.FURNITURE_CRACKABLE_TARGET,this._target)}},{key:"getLegacyString",value:function(){return this._state}},{key:"compare",value:function(t){return!0}},{key:"hits",get:function(){return this._hits}},{key:"target",get:function(){return this._target}}]),i}(ya);pa.FORMAT_KEY=Ea.CRACKABLE_KEY;var ma=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._state=void 0,t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){t&&(this._state="",Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t))}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY)}},{key:"getLegacyString",value:function(){return this._state}},{key:"compare",value:function(t){return Object(d.a)(Object(f.a)(i.prototype),"compare",this).call(this,t)}}]),i}(ya);ma.FORMAT_KEY=Ea.EMPTY_KEY;var Ia=function(){function t(){Object(r.a)(this,t),this._score=void 0,this._users=void 0,this._score=-1,this._users=[]}return Object(a.a)(t,[{key:"score",get:function(){return this._score},set:function(t){this._score=t}},{key:"users",get:function(){return this._users},set:function(t){this._users=t}},{key:"addUsername",value:function(t){this._users.push(t)}}]),t}(),ba=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._state=void 0,t._scoreType=void 0,t._clearType=void 0,t._entries=void 0,t._state="",t._scoreType=-1,t._clearType=-1,t._entries=[],t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){if(t){this._state=t.readString(),this._scoreType=t.readInt(),this._clearType=t.readInt();for(var e=t.readInt();e>0;){var n=new Ia;n.score=t.readInt();for(var s=t.readInt();s>0;)n.addUsername(t.readString()),s--;this._entries.push(n),e--}Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t)}}},{key:"initializeFromRoomObjectModel",value:function(t){this._scoreType=t.getValue(dt.FURNITURE_HIGHSCORE_SCORE_TYPE),this._clearType=t.getValue(dt.FURNITURE_HIGHSCORE_CLEAR_TYPE),this._entries=[];for(var e=t.getValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT),n=0;n<e;){var s=new Ia;s.score=t.getValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+n),s.users=t.getValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+n),this._entries.push(s),n++}Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t)}},{key:"writeRoomObjectModel",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_HIGHSCORE_SCORE_TYPE,this._scoreType),t.setValue(dt.FURNITURE_HIGHSCORE_CLEAR_TYPE,this._clearType),this._entries){t.setValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_COUNT,this._entries.length);for(var e=0;e<this._entries.length;){var n=this._entries[e];t.setValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_SCORE_+e,n.score),t.setValue(dt.FURNITURE_HIGHSCORE_DATA_ENTRY_BASE_USERS_+e,n.users),e++}}}},{key:"getLegacyString",value:function(){return this._state}},{key:"entries",get:function(){return this._entries}},{key:"clearType",get:function(){return this._clearType}},{key:"scoreType",get:function(){return this._scoreType}}]),i}(ya);ba.FORMAT_KEY=Ea.HIGHSCORE_KEY;var Ta=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._data="",t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){t&&(this._data=t.readString(),Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t))}},{key:"initializeFromRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t),this._data=t.getValue(dt.FURNITURE_DATA)}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_DATA,this._data)}},{key:"getLegacyString",value:function(){return this._data}},{key:"compare",value:function(t){return this._data===t.getLegacyString()}},{key:"setString",value:function(t){this._data=t}}]),i}(ya);Ta.FORMAT_KEY=Ea.LEGACY_KEY;var Ra=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._data={},t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){if(t){this._data={};var e=t.readInt();if(e)for(var n=0;n<e;n++)this._data[t.readString()]=t.readString();Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t)}}},{key:"initializeFromRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t),this._data=t.getValue(dt.FURNITURE_DATA)||{}}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_DATA,this._data)}},{key:"getLegacyString",value:function(){if(!this._data)return"";var t=this._data[i.STATE];return void 0===t||null===t?"":t}},{key:"compare",value:function(t){return!1}},{key:"getValue",value:function(t){return this._data[t]}},{key:"rarityLevel",get:function(){if(!this._data)return-1;var t=this._data[i.RARITY];return void 0===t||null===t?-1:parseInt(t)}},{key:"data",get:function(){return this._data}}]),i}(ya);Ra.FORMAT_KEY=Ea.MAP_KEY,Ra.STATE="state",Ra.RARITY="rarity";var ka=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._data=[],t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){if(t){this._data=[];var e=t.readInt();if(e)for(var n=0;n<e;n++)this._data.push(t.readInt());Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t)}}},{key:"initializeFromRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t),this._data=t.getValue(dt.FURNITURE_DATA)}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_DATA,this._data)}},{key:"getLegacyString",value:function(){return this._data&&this._data.length?this._data[i.STATE].toString():""}},{key:"compare",value:function(t){if(!(t instanceof i))return!1;for(var e=0;e<this._data.length;){if(0===e);else if(this._data[e]!==t.getValue(e))return!1;e++}return!0}},{key:"getValue",value:function(t){if(!this._data||!this._data.length)return-1;var e=this._data[t];return void 0===e||null===e?-1:e}}]),i}(ya);ka.FORMAT_KEY=Ea.NUMBER_KEY,ka.STATE=0;var Aa=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._data=[],t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){if(t){this._data=[];var e=t.readInt();if(e)for(var n=0;n<e;n++)this._data.push(t.readString());Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t)}}},{key:"initializeFromRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initializeFromRoomObjectModel",this).call(this,t),this._data=t.getValue(dt.FURNITURE_DATA)}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY),t.setValue(dt.FURNITURE_DATA,this._data)}},{key:"getLegacyString",value:function(){return this._data&&this._data.length?this._data[i.STATE]:""}},{key:"compare",value:function(t){if(!(t instanceof i))return!1;for(var e=0;e<this._data.length;){if(0===e);else if(this._data[e]!==t.getValue(e))return!1;e++}return!0}},{key:"getValue",value:function(t){return this._data[t]||""}},{key:"setValue",value:function(t){this._data=t}}]),i}(ya);Aa.FORMAT_KEY=Ea.STRING_KEY,Aa.STATE=0;var Sa=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._state=void 0,t._result=void 0,t._state="",t._result=0,t}return Object(a.a)(i,[{key:"parseWrapper",value:function(t){t&&(this._state=t.readString(),this._result=t.readInt(),Object(d.a)(Object(f.a)(i.prototype),"parseWrapper",this).call(this,t))}},{key:"writeRoomObjectModel",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"writeRoomObjectModel",this).call(this,t),t.setValue(dt.FURNITURE_DATA_FORMAT,i.FORMAT_KEY);var e={};e.S=this._state,e.R=this._result.toString(),t.setValue(dt.FURNITURE_DATA,e)}},{key:"getLegacyString",value:function(){return this._state}},{key:"compare",value:function(t){return!0}},{key:"setString",value:function(t){this._state=t}},{key:"result",get:function(){return this._result}}]),i}(ya);Sa.FORMAT_KEY=Ea.VOTE_KEY;var ja=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getData",value:function(t){var e=null;switch(255&t){case pa.FORMAT_KEY:e=new pa;break;case ma.FORMAT_KEY:e=new ma;break;case ba.FORMAT_KEY:e=new ba;break;case Ta.FORMAT_KEY:e=new Ta;break;case Ra.FORMAT_KEY:e=new Ra;break;case ka.FORMAT_KEY:e=new ka;break;case Aa.FORMAT_KEY:e=new Aa;break;case Sa.FORMAT_KEY:e=new Sa}return e?(e.flags=65280&t,e):null}}]),t}(),Na=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._data=null,!0}},{key:"parse",value:function(e){return!!e&&(this._itemId=parseInt(e.readString()),this._data=t.parseObjectData(e),!0)}},{key:"furnitureId",get:function(){return this._itemId}},{key:"objectData",get:function(){return this._data}}],[{key:"parseObjectData",value:function(t){if(!t)return null;var e=ja.getData(t.readInt());return e?(e.parseWrapper(t),e):null}}]),t}(),Da=function(){function t(e){if(Object(r.a)(this,t),this._rentable=void 0,this._itemId=void 0,this._furniType=void 0,this._ref=void 0,this._spriteId=void 0,this._category=void 0,this._stuffData=void 0,this._isGroupable=void 0,this._isRecyclable=void 0,this._tradable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._extra=void 0,this._flatId=void 0,this._isWallItem=void 0,this._hasRentPeriodStarted=void 0,this._expirationTimeStamp=void 0,this._slotId=void 0,this._songId=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._rentable=!1,this._itemId=0,this._furniType=null,this._ref=0,this._spriteId=0,this._category=0,this._stuffData=null,this._isGroupable=!1,this._isRecyclable=!1,this._tradable=!1,this._sellable=!1,this._secondsToExpiration=0,this._extra=0,this._flatId=0,this._isWallItem=!1,this._hasRentPeriodStarted=!1,this._expirationTimeStamp=0,this._slotId="",this._songId=-1,!0}},{key:"parse",value:function(e){return!!e&&(this._itemId=e.readInt(),this._furniType=e.readString(),this._ref=e.readInt(),this._spriteId=e.readInt(),this._category=e.readInt(),this._stuffData=Na.parseObjectData(e),this._isRecyclable=e.readBoolean(),this._tradable=e.readBoolean(),this._isGroupable=e.readBoolean(),this._sellable=e.readBoolean(),this._secondsToExpiration=e.readInt(),this._expirationTimeStamp=gD.instance.time,this.secondsToExpiration>-1?this._rentable=!0:(this._rentable=!1,this._secondsToExpiration=-1),this._hasRentPeriodStarted=e.readBoolean(),this._flatId=e.readInt(),this._isWallItem=this._furniType===t.WALL_ITEM,this._furniType===t.FLOOR_ITEM&&(this._slotId=e.readString(),this._extra=e.readInt()),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"furniType",get:function(){return this._furniType}},{key:"ref",get:function(){return this._ref}},{key:"spriteId",get:function(){return this._spriteId}},{key:"category",get:function(){return this._category}},{key:"stuffData",get:function(){return this._stuffData}},{key:"isGroupable",get:function(){return this._isGroupable}},{key:"isRecycleable",get:function(){return this._isRecyclable}},{key:"tradable",get:function(){return this._tradable}},{key:"sellable",get:function(){return this._sellable}},{key:"secondsToExpiration",get:function(){return this._secondsToExpiration}},{key:"flatId",get:function(){return this._flatId}},{key:"slotId",get:function(){return this._slotId}},{key:"songId",get:function(){return this._songId}},{key:"extra",get:function(){return this._extra}},{key:"rentable",get:function(){return this._rentable}},{key:"isWallItem",get:function(){return this._isWallItem}},{key:"hasRentPeriodStarted",get:function(){return this._hasRentPeriodStarted}},{key:"expirationTimeStamp",get:function(){return this._expirationTimeStamp}},{key:"creationDay",get:function(){return 0}},{key:"creationMonth",get:function(){return 0}},{key:"creationYear",get:function(){return 0}},{key:"isExternalImageFurni",get:function(){return!(-1===this._furniType.indexOf("external_image"))}}]),t}();Da.WALL_ITEM="I",Da.FLOOR_ITEM="S";var Ma=function(){function t(){Object(r.a)(this,t),this._items=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._items=[],!0}},{key:"parse",value:function(t){return!!t&&(this._items.push(new Da(t)),!0)}},{key:"items",get:function(){return this._items}}]),t}(),Ca=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),La=function(){function t(){Object(r.a)(this,t),this._totalFragments=void 0,this._fragmentNumber=void 0,this._fragment=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._totalFragments=0,this._fragmentNumber=0,this._fragment=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();for(var e=t.readInt();e>0;){var i=new Da(t);i&&this._fragment.set(i.itemId,i),e--}return!0}},{key:"totalFragments",get:function(){return this._totalFragments}},{key:"fragmentNumber",get:function(){return this._fragmentNumber}},{key:"fragment",get:function(){return this._fragment}}]),t}(),Ua=function(){function t(){Object(r.a)(this,t),this._itemId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}}]),t}(),Pa=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._itemsLeft=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._itemsLeft=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),this._itemsLeft=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"itemsLeft",get:function(){return this._itemsLeft}}]),t}(),wa=function(){function t(){Object(r.a)(this,t),this._itemType=void 0,this._classId=void 0,this._productCode=void 0,this._placedItemId=void 0,this._placedItemType=void 0,this._placedInRoom=void 0,this._petFigureString=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemType="",this._classId=0,this._productCode="",!0}},{key:"parse",value:function(t){return!!t&&(this._itemType=t.readString(),this._classId=t.readInt(),this._productCode=t.readString(),this._placedItemId=t.readInt(),this._placedItemType=t.readString(),this._placedInRoom=t.readBoolean(),this._petFigureString=t.readString(),!0)}},{key:"itemType",get:function(){return this._itemType}},{key:"classId",get:function(){return this._classId}},{key:"productCode",get:function(){return this._productCode}},{key:"placedItemId",get:function(){return this._placedItemId}},{key:"placedItemType",get:function(){return this._placedItemType}},{key:"placedInRoom",get:function(){return this._placedInRoom}},{key:"petFigureString",get:function(){return this._petFigureString}}]),t}();(function(){function t(){Object(r.a)(this,t),this._reason=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._reason=t.readInt(),!0}},{key:"reason",get:function(){return this._reason}}]),t}()).PET_TOO_TIRED_TO_BREED=6;var Fa=function(){function t(){Object(r.a)(this,t),this._pet=void 0,this._boughtAsGift=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._pet=null,this._boughtAsGift=!1,!0}},{key:"parse",value:function(t){return this._pet=new vs(t),this._boughtAsGift=t.readBoolean(),!0}},{key:"pet",get:function(){return this._pet}},{key:"boughtAsGift",get:function(){return this._boughtAsGift}}]),t}(),xa=function(){function t(){Object(r.a)(this,t),this._state=void 0,this._ownPetId=void 0,this._otherPetId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._state=0,this._ownPetId=0,this._otherPetId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._state=t.readInt(),this._ownPetId=t.readInt(),this._otherPetId=t.readInt(),!0)}},{key:"state",get:function(){return this._state}},{key:"ownPetId",get:function(){return this._ownPetId}},{key:"otherPetId",get:function(){return this._otherPetId}}]),t}();xa.STATE_CANCEL=1,xa.STATE_ACCEPT=2,xa.STATE_REQUEST=3;var Ba=function(){function t(){Object(r.a)(this,t),this._totalFragments=void 0,this._fragmentNumber=void 0,this._fragment=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._fragment=null,!0}},{key:"parse",value:function(t){this._totalFragments=t.readInt(),this._fragmentNumber=t.readInt();var e=t.readInt();for(this._fragment=new Map;e>0;){var i=new vs(t);this._fragment.set(i.id,i),e--}return!0}},{key:"totalFragments",get:function(){return this._totalFragments}},{key:"fragmentNumber",get:function(){return this._fragmentNumber}},{key:"fragment",get:function(){return this._fragment}}]),t}(),Ga=function(){function t(){Object(r.a)(this,t),this._boughtAsGift=void 0,this._pet=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._boughtAsGift=!1,this._pet=null,!0}},{key:"parse",value:function(t){return this._boughtAsGift=t.readBoolean(),this._pet=new vs(t),!0}},{key:"boughtAsGift",get:function(){return this._boughtAsGift}},{key:"pet",get:function(){return this._pet}}]),t}(),Ha=function(){function t(){Object(r.a)(this,t),this._petId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._petId=t.readInt(),!0)}},{key:"petId",get:function(){return this._petId}}]),t}(),Va=function(){function t(){Object(r.a)(this,t),this._userID=void 0,this._userAccepts=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userID=-1,this._userAccepts=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._userID=t.readInt(),this._userAccepts=t.readInt()>0,!0)}},{key:"userID",get:function(){return this._userID}},{key:"userAccepts",get:function(){return this._userAccepts}}]),t}(),za=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._reason=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._userId=t.readInt(),this._reason=t.readInt(),!0)}},{key:"userID",get:function(){return this._userId}},{key:"reason",get:function(){return this._reason}}]),t}();za.ERROR_WHILE_COMMIT=1;var Ya=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Wa=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Ka=function(){function t(e){Object(r.a)(this,t),this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._itemId=void 0,this._furniType=void 0,this._ref=void 0,this._spriteId=void 0,this._category=void 0,this._stuffData=void 0,this._extra=void 0,this._secondsToExpiration=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._isGroupable=void 0,this._songId=void 0,this._flatId=void 0,this._rentable=void 0,this._hasRentPeriodStarted=void 0,this._itemId=e.readInt(),this._furniType=e.readString().toUpperCase(),this._ref=e.readInt(),this._spriteId=e.readInt(),this._category=e.readInt(),this._isGroupable=e.readBoolean(),this._stuffData=Na.parseObjectData(e),this._secondsToExpiration=-1,this._expirationTimeStamp=gD.instance.time,this._hasRentPeriodStarted=!1,this._creationDay=e.readInt(),this._creationMonth=e.readInt(),this._creationYear=e.readInt(),this._extra="S"===this.furniType?e.readInt():-1,this._flatId=-1,this._rentable=!1,this._isWallItem="I"===this._furniType}return Object(a.a)(t,[{key:"itemId",get:function(){return this._itemId}},{key:"furniType",get:function(){return this._furniType}},{key:"ref",get:function(){return this._ref}},{key:"spriteId",get:function(){return this._spriteId}},{key:"category",get:function(){return this._category}},{key:"stuffData",get:function(){return this._stuffData}},{key:"extra",get:function(){return this._extra}},{key:"secondsToExpiration",get:function(){return this._secondsToExpiration}},{key:"creationDay",get:function(){return this._creationDay}},{key:"creationMonth",get:function(){return this._creationMonth}},{key:"creationYear",get:function(){return this._creationYear}},{key:"isGroupable",get:function(){return this._isGroupable}},{key:"songId",get:function(){return this._extra}},{key:"flatId",get:function(){return this._flatId}},{key:"rentable",get:function(){return this._rentable}},{key:"isWallItem",get:function(){return this._isWallItem}},{key:"hasRentPeriodStarted",get:function(){return this._hasRentPeriodStarted}},{key:"expirationTimeStamp",get:function(){return this._expirationTimeStamp}},{key:"isRecycleable",get:function(){return!0}},{key:"tradable",get:function(){return!0}},{key:"sellable",get:function(){return!0}},{key:"slotId",get:function(){return null}},{key:"isExternalImageFurni",get:function(){return-1!==this._furniType.indexOf("external_image")}}]),t}(),Xa=function(){function t(){Object(r.a)(this,t),this._firstUserID=void 0,this._firstUserItemArray=void 0,this._firstUserNumItems=void 0,this._firstUserNumCredits=void 0,this._secondUserID=void 0,this._secondUserItemArray=void 0,this._secondUserNumItems=void 0,this._secondUserNumCredits=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._firstUserID=-1,this._firstUserItemArray=null,this._firstUserNumItems=0,this._firstUserNumCredits=0,this._secondUserID=-1,this._secondUserItemArray=null,this._secondUserNumItems=0,this._secondUserNumCredits=0,!0}},{key:"parse",value:function(t){return!!t&&(this._firstUserID=t.readInt(),this._firstUserItemArray=[],!!this.parseItems(t,this._firstUserItemArray)&&(this._firstUserNumItems=t.readInt(),this._firstUserNumCredits=t.readInt(),this._secondUserID=t.readInt(),this._secondUserItemArray=[],!!this.parseItems(t,this._secondUserItemArray)&&(this._secondUserNumItems=t.readInt(),this._secondUserNumCredits=t.readInt(),!0)))}},{key:"parseItems",value:function(t,e){for(var i=t.readInt();i>0;)e.push(new Ka(t)),i--;return!0}},{key:"firstUserID",get:function(){return this._firstUserID}},{key:"firstUserItemArray",get:function(){return this._firstUserItemArray}},{key:"firstUserNumItems",get:function(){return this._firstUserNumItems}},{key:"firstUserNumCredits",get:function(){return this._firstUserNumCredits}},{key:"secondUserID",get:function(){return this._secondUserID}},{key:"secondUserItemArray",get:function(){return this._secondUserItemArray}},{key:"secondUserNumItems",get:function(){return this._secondUserNumItems}},{key:"secondUserNumCredits",get:function(){return this._secondUserNumCredits}}]),t}(),qa=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Qa=function(){function t(){Object(r.a)(this,t),this._reason=void 0,this._otherUserName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._reason=t.readInt(),this._otherUserName=t.readString(),!0)}},{key:"reason",get:function(){return this._reason}},{key:"otherUserName",get:function(){return this._otherUserName}}]),t}();Qa.REASON_YOU_ARE_ALREADY_TRADING=7,Qa.REASON_OTHER_USER_ALREADY_TRADING=8;var Za=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._userCanTrade=void 0,this._otherUserId=void 0,this._otherUserCanTrade=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=-1,this._userCanTrade=!1,this._otherUserId=-1,this._otherUserCanTrade=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._userId=t.readInt(),this._userCanTrade=1===t.readInt(),this._otherUserId=t.readInt(),this._otherUserCanTrade=1===t.readInt(),!0)}},{key:"userID",get:function(){return this._userId}},{key:"userCanTrade",get:function(){return this._userCanTrade}},{key:"otherUserID",get:function(){return this._otherUserId}},{key:"otherUserCanTrade",get:function(){return this._otherUserCanTrade}}]),t}(),Ja=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),$a=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),to=function(){function t(e){Object(r.a)(this,t),this._id=void 0,this._title=void 0,this._bodyText=void 0,this._buttonText=void 0,this._linkType=void 0,this._linkContent=void 0,this._imageUrl=void 0,this._id=e.readInt(),this._title=e.readString(),this._bodyText=e.readString(),this._buttonText=e.readString(),this._linkType=e.readInt(),this._linkContent=e.readString(),this._imageUrl=e.readString()}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"bodyText",get:function(){return this._bodyText}},{key:"buttonText",get:function(){return this._buttonText}},{key:"linkType",get:function(){return this._linkType}},{key:"linkContent",get:function(){return this._linkContent}},{key:"imageUrl",get:function(){return this._imageUrl}}]),t}();to.LINK_TYPE_URL=0,to.LINK_TYPE_INTERNAL=1,to.LINK_TYPE_NO_LINK=2;var eo=function(){function t(){Object(r.a)(this,t),this._articles=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._articles=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._articles.push(new to(t));return!0}},{key:"articles",get:function(){return this._articles}}]),t}(),io=function(){function t(){Object(r.a)(this,t),this._acknowledged=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._acknowledged=t.readBoolean(),!0)}},{key:"acknowledged",get:function(){return this._acknowledged}}]),t}(),no=function(){function t(){Object(r.a)(this,t),this._result=void 0,this._newOfferId=void 0,this._newPrice=void 0,this._requestedOfferId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._newOfferId=-1,this._newPrice=0,this._requestedOfferId=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),this._newOfferId=t.readInt(),this._newPrice=t.readInt(),this._requestedOfferId=t.readInt(),!0)}},{key:"result",get:function(){return this._result}},{key:"offerId",get:function(){return this._newOfferId}},{key:"newPrice",get:function(){return this._newPrice}},{key:"requestedOfferId",get:function(){return this._requestedOfferId}}]),t}(),so=function(){function t(){Object(r.a)(this,t),this._offerId=void 0,this._success=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offerId=0,this._success=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._offerId=t.readInt(),this._success=t.readBoolean(),!0)}},{key:"offerId",get:function(){return this._offerId}},{key:"success",get:function(){return this._success}}]),t}(),ro=function(){function t(){Object(r.a)(this,t),this._tokenCount=void 0,this._result=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._tokenCount=0,this._result=0,!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),this._tokenCount=t.readInt(),!0)}},{key:"tokenCount",get:function(){return this._tokenCount}},{key:"resultCode",get:function(){return this._result}}]),t}(),ao=function(){function t(){Object(r.a)(this,t),this._enabled=void 0,this._commission=void 0,this._credits=void 0,this._advertisements=void 0,this._maximumPrice=void 0,this._minimumPrice=void 0,this._offerTime=void 0,this._displayTime=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._enabled=!1,this._commission=0,this._credits=0,this._advertisements=0,this._maximumPrice=0,this._minimumPrice=0,this._offerTime=0,this._displayTime=0,!0}},{key:"parse",value:function(t){return!!t&&(this._enabled=t.readBoolean(),this._commission=t.readInt(),this._credits=t.readInt(),this._advertisements=t.readInt(),this._minimumPrice=t.readInt(),this._maximumPrice=t.readInt(),this._offerTime=t.readInt(),this._displayTime=t.readInt(),!0)}},{key:"enabled",get:function(){return this._enabled}},{key:"commission",get:function(){return this._commission}},{key:"credits",get:function(){return this._credits}},{key:"advertisements",get:function(){return this._advertisements}},{key:"minimumPrice",get:function(){return this._minimumPrice}},{key:"maximumPrice",get:function(){return this._maximumPrice}},{key:"offerTime",get:function(){return this._offerTime}},{key:"displayTime",get:function(){return this._displayTime}}]),t}(),oo=function(){function t(){Object(r.a)(this,t),this._result=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._result=0,!0}},{key:"parse",value:function(t){return!!t&&(this._result=t.readInt(),!0)}},{key:"result",get:function(){return this._result}}]),t}(),uo=function(){function t(){Object(r.a)(this,t),this._averagePrice=void 0,this._currentOfferCount=void 0,this._historyLength=void 0,this._dayOffsets=void 0,this._averagePrices=void 0,this._soldAmounts=void 0,this._furniTypeId=void 0,this._furniCategoryId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._averagePrice=0,this._currentOfferCount=0,this._historyLength=0,this._dayOffsets=[],this._averagePrices=[],this._soldAmounts=[],this._furniTypeId=0,this._furniCategoryId=0,!0}},{key:"parse",value:function(t){if(!t)return!1;this._averagePrice=t.readInt(),this._currentOfferCount=t.readInt(),this._historyLength=t.readInt();for(var e=t.readInt();e>0;)this._dayOffsets.push(t.readInt()),this._averagePrices.push(t.readInt()),this._soldAmounts.push(t.readInt()),e--;return this._furniCategoryId=t.readInt(),this._furniTypeId=t.readInt(),!0}},{key:"averagePrice",get:function(){return this._averagePrice}},{key:"offerCount",get:function(){return this._currentOfferCount}},{key:"historyLength",get:function(){return this._historyLength}},{key:"dayOffsets",get:function(){return this._dayOffsets}},{key:"averagePrices",get:function(){return this._averagePrices}},{key:"soldAmounts",get:function(){return this._soldAmounts}},{key:"furniTypeId",get:function(){return this._furniTypeId}},{key:"furniCategoryId",get:function(){return this._furniCategoryId}}]),t}(),co=function(){function t(e,i,n,s,a,o,u,c){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;Object(r.a)(this,t),this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=e,this._furniId=i,this._furniType=n,this._extraData=s,this._stuffData=a,this._price=o,this._status=u,this._averagePrice=c,this._offerCount=h}return Object(a.a)(t,[{key:"offerId",get:function(){return this._offerId},set:function(t){this._offerId=t}},{key:"furniId",get:function(){return this._furniId}},{key:"furniType",get:function(){return this._furniType}},{key:"extraData",get:function(){return this._extraData}},{key:"stuffData",get:function(){return this._stuffData}},{key:"price",get:function(){return this._price},set:function(t){this._price=t}},{key:"averagePrice",get:function(){return this._averagePrice}},{key:"image",get:function(){return this._image},set:function(t){this._image=t}},{key:"imageCallback",get:function(){return this._imageCallback},set:function(t){this._imageCallback=t}},{key:"status",get:function(){return this._status}},{key:"timeLeftMinutes",get:function(){return this._timeLeftMinutes},set:function(t){this._timeLeftMinutes=t}},{key:"offerCount",get:function(){return this._offerCount},set:function(t){this._offerCount=t}},{key:"isUniqueLimitedItem",get:function(){return this.stuffData&&this.stuffData.uniqueSeries>0}}]),t}();co.TYPE_LANDSCAPE=1,co.TYPE_FLOOR=2;var ho=function(){function t(e,i,n,s,a,o,u,c,h){var _=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1;Object(r.a)(this,t),this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._averagePrice=void 0,this._offerCount=void 0,this._offerId=e,this._furniId=i,this._furniType=n,this._extraData=s,this._stuffData=a,this._price=o,this._status=u,this._timeLeftMinutes=c,this._averagePrice=h,this._offerCount=_}return Object(a.a)(t,[{key:"offerId",get:function(){return this._offerId}},{key:"furniId",get:function(){return this._furniId}},{key:"furniType",get:function(){return this._furniType}},{key:"extraData",get:function(){return this._extraData}},{key:"stuffData",get:function(){return this._stuffData}},{key:"price",get:function(){return this._price}},{key:"status",get:function(){return this._status}},{key:"timeLeftMinutes",get:function(){return this._timeLeftMinutes}},{key:"averagePrice",get:function(){return this._averagePrice}},{key:"offerCount",get:function(){return this._offerCount}},{key:"isUniqueLimitedItem",get:function(){return!(null==this.stuffData)&&this.stuffData.uniqueSeries>0}}]),t}(),_o=function(){function t(){Object(r.a)(this,t),this.MAX_LIST_LENGTH=500,this._offers=void 0,this._totalItemsFound=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offers=[],this._totalItemsFound=0,!0}},{key:"parse",value:function(e){if(!e)return!1;for(var i=e.readInt(),n=0;n<i;){var s=e.readInt(),r=e.readInt(),a=e.readInt(),o=-1,u="",c=null;a===t.FURNITYPE_STUFF?(o=e.readInt(),c=Na.parseObjectData(e)):a===t.FURNITYPE_WALL?(o=e.readInt(),u=e.readString()):a==t.FAKE_FURNITYPE_UNIQUE&&(o=e.readInt(),(c=ja.getData(Ta.FORMAT_KEY)).uniqueNumber=e.readInt(),c.uniqueSeries=e.readInt(),a=t.FURNITYPE_STUFF);var h=e.readInt(),_=e.readInt(),l=e.readInt(),d=e.readInt(),f=new ho(s,o,a,u,c,h,r,_,l,d);n<this.MAX_LIST_LENGTH&&this._offers.push(f),n++}return this._totalItemsFound=e.readInt(),!0}},{key:"offers",get:function(){return this._offers}},{key:"totalItemsFound",get:function(){return this._totalItemsFound}}]),t}();_o.FURNITYPE_STUFF=1,_o.FURNITYPE_WALL=2,_o.FAKE_FURNITYPE_UNIQUE=3;var lo=function(){function t(){Object(r.a)(this,t),this._offers=void 0,this._creditsWaiting=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._offers=[],!0}},{key:"parse",value:function(e){if(!e)return!1;this._offers=[],this._creditsWaiting=e.readInt();for(var i=e.readInt(),n=0;n<i;n++){var s=e.readInt(),r=e.readInt(),a=e.readInt(),o=void 0,u=void 0,c=void 0;1==a?(o=e.readInt(),c=this.getStuffData(e)):2==a?(o=e.readInt(),u=e.readString()):3==a&&(o=e.readInt(),(c=ja.getData(Ta.FORMAT_KEY)).uniqueNumber=e.readInt(),c.uniqueSeries=e.readInt(),a=1);var h=e.readInt(),_=e.readInt(),l=e.readInt(),d=new ho(s,o,a,u,c,h,r,_,l);n<t.MAX_LIST_LENGTH&&this._offers.push(d)}return!0}},{key:"offers",get:function(){return this._offers}},{key:"creditsWaiting",get:function(){return this._creditsWaiting}},{key:"getStuffData",value:function(t){var e=t.readInt(),i=ja.getData(e);return i.parseWrapper(t),i}}]),t}();lo.MAX_LIST_LENGTH=500;var fo=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._timestamp=void 0,this._habboId=void 0,this._username=void 0,this._message=void 0,this._hasHighlighting=void 0,this._timestamp=e,this._habboId=i,this._username=n,this._message=s,this._hasHighlighting=a}return Object(a.a)(t,[{key:"timestamp",get:function(){return this._timestamp}},{key:"userId",get:function(){return this._habboId}},{key:"userName",get:function(){return this._username}},{key:"message",get:function(){return this._message}},{key:"hasHighlighting",get:function(){return this._hasHighlighting}}]),t}(),vo=function(){function t(e){Object(r.a)(this,t),this._recordType=void 0,this._context=void 0,this._chatlog=void 0,this._context=new Map,this._chatlog=[],this._recordType=e.readByte();for(var i=e.readShort(),n=0;n<i;n++){var s=e.readString(),a=e.readByte();switch(a){case 0:this._context.set(s,e.readBoolean());break;case 1:this._context.set(s,e.readInt());break;case 2:this._context.set(s,e.readString());break;default:throw new Error("Unknown data type "+a)}}for(var o=e.readShort(),u=0;u<o;u++){var c=e.readString(),h=e.readInt(),_=e.readString(),l=e.readString(),d=e.readBoolean();this._chatlog.push(new fo(c,h,_,l,d))}}return Object(a.a)(t,[{key:"recordType",get:function(){return this._recordType}},{key:"context",get:function(){return this._context}},{key:"chatlog",get:function(){return this._chatlog}},{key:"roomId",get:function(){return this.getInt("roomId")}},{key:"roomName",get:function(){return this._context.get("roomName")}},{key:"groupId",get:function(){return this.getInt("groupId")}},{key:"threadId",get:function(){return this.getInt("threadId")}},{key:"messageId",get:function(){return this.getInt("messageId")}},{key:"getInt",value:function(t){var e=this._context.get(t);return e||0}}]),t}();vo.TYPE_SIMPLE=0,vo.TYPE_ROOM_CHAT=1,vo.TYPE_IM_SESSION=2,vo.TYPE_DISCUSSION_THREAD=3,vo.TYPE_DISCUSSION_MESSAGE=4,vo.TYPE_SELFIE=5,vo.TYPE_PHOTO=6;var go=function(){function t(e){Object(r.a)(this,t),this._issueId=void 0,this._callerUserId=void 0,this._reportedUserId=void 0,this._chatRecordId=void 0,this._chatRecord=void 0,this._issueId=e.readInt(),this._callerUserId=e.readInt(),this._reportedUserId=e.readInt(),this._chatRecordId=e.readInt(),this._chatRecord=new vo(e)}return Object(a.a)(t,[{key:"issueId",get:function(){return this._issueId}},{key:"callerUserId",get:function(){return this._callerUserId}},{key:"reportedUserId",get:function(){return this._reportedUserId}},{key:"chatRecordId",get:function(){return this._chatRecordId}},{key:"chatRecord",get:function(){return this._chatRecord}}]),t}(),Oo=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new go(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),yo=function(){function t(){Object(r.a)(this,t),this._issueId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._issueId=parseInt(t.readString()),!0}},{key:"issueId",get:function(){return this._issueId}}]),t}(),Eo=function(){function t(e,i,n,s,a,o,u,c,h,_,l,d,f,v,g,O){Object(r.a)(this,t),this._issueId=void 0,this._state=void 0,this._categoryId=void 0,this._reportedCategoryId=void 0,this._issueAgeInMilliseconds=void 0,this._priority=void 0,this._groupingId=void 0,this._reporterUserId=void 0,this._reporterUserName=void 0,this._reportedUserId=void 0,this._reportedUserName=void 0,this._pickerUserId=void 0,this._pickerUserName=void 0,this._message=void 0,this._chatRecordId=void 0,this._patterns=void 0,this._disposed=!1,this._creationTimeInMilliseconds=void 0,this._issueId=e,this._state=i,this._categoryId=n,this._reportedCategoryId=s,this._issueAgeInMilliseconds=a,this._priority=o,this._groupingId=u,this._reporterUserId=c,this._reporterUserName=h,this._reportedUserId=_,this._reportedUserName=l,this._pickerUserId=d,this._pickerUserName=f,this._message=v,this._chatRecordId=g,this._patterns=O,this._creationTimeInMilliseconds=gD.instance.time}return Object(a.a)(t,[{key:"issueId",get:function(){return this._issueId}},{key:"state",get:function(){return this._state}},{key:"categoryId",get:function(){return this._categoryId}},{key:"reportedCategoryId",get:function(){return this._reportedCategoryId}},{key:"issueAgeInMilliseconds",get:function(){return this._issueAgeInMilliseconds}},{key:"priority",get:function(){return this._priority}},{key:"groupingId",get:function(){return this._groupingId}},{key:"reporterUserId",get:function(){return this._reporterUserId}},{key:"reporterUserName",get:function(){return this._reporterUserName}},{key:"reportedUserId",get:function(){return this._reportedUserId}},{key:"reportedUserName",get:function(){return this._reportedUserName}},{key:"pickerUserId",get:function(){return this._pickerUserId}},{key:"pickerUserName",get:function(){return this._pickerUserName}},{key:"message",get:function(){return this._message}},{key:"chatRecordId",get:function(){return this._chatRecordId}},{key:"patterns",get:function(){return this._patterns}},{key:"dispose",value:function(){if(!this.disposed){var t,e=Object(s.a)(this._patterns);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(i){e.e(i)}finally{e.f()}this._patterns=[],this._disposed=!0}}},{key:"disposed",get:function(){return this._disposed}},{key:"getOpenTime",value:function(t){var e=(this._issueAgeInMilliseconds+t-this._creationTimeInMilliseconds)/1e3/60,i=e%60,n=e/60;return(n<10?"0":"")+n+":"+((i<10?"0":"")+i)}}]),t}();Eo.STATE_OPEN=1,Eo.STATE_PICKED=2,Eo.STATE_CLOSED=3;var po=function(){function t(e){Object(r.a)(this,t),this._pattern=void 0,this._startIndex=void 0,this._endIndex=void 0,this._disposed=!1,this._pattern=e.readString(),this._startIndex=e.readInt(),this._endIndex=e.readInt()}return Object(a.a)(t,[{key:"dispose",value:function(){this._disposed=!0,this._pattern="",this._startIndex=-1,this._endIndex=-1}},{key:"disposed",get:function(){return this._disposed}},{key:"pattern",get:function(){return this._pattern}},{key:"startIndex",get:function(){return this._startIndex}},{key:"endIndex",get:function(){return this._endIndex}}]),t}(),mo=function(){function t(){Object(r.a)(this,t),this._issueData=void 0}return Object(a.a)(t,[{key:"issueData",get:function(){return this._issueData}},{key:"flush",value:function(){return this._issueData=null,!0}},{key:"parse",value:function(t){for(var e=t.readInt(),i=t.readInt(),n=t.readInt(),s=t.readInt(),r=t.readInt(),a=t.readInt(),o=t.readInt(),u=t.readInt(),c=t.readString(),h=t.readInt(),_=t.readString(),l=t.readInt(),d=t.readString(),f=t.readString(),v=t.readInt(),g=t.readInt(),O=[],y=0;y<g;y++)O.push(new po(t));return this._issueData=new Eo(e,i,n,s,r,a,o,u,c,h,_,l,d,f,v,O),!0}}]),t}(),Io=function(){function t(){Object(r.a)(this,t),this._issues=void 0,this._retryEnabled=void 0,this._retryCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._issues=null,!0}},{key:"parse",value:function(t){this._issues=[];for(var e=t.readInt(),i=0;i<e;i++){var n=t.readInt(),s=t.readInt(),r=t.readString(),a=new Eo(n,0,0,0,0,0,0,0,null,0,null,s,r,null,0,[]);this._issues.push(a)}return this._retryEnabled=t.readBoolean(),this._retryCount=t.readInt(),!0}},{key:"issues",get:function(){return this._issues}},{key:"retryEnabled",get:function(){return this._retryEnabled}},{key:"retryCount",get:function(){return this._retryCount}}]),t}(),bo=function(){function t(){Object(r.a)(this,t),this._message=void 0,this._url=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._message="",this._url=null,!0}},{key:"parse",value:function(t){return!!t&&(this._message=t.readString(),this._url=t.readString(),!0)}},{key:"message",get:function(){return this._message}},{key:"url",get:function(){return this._url}}]),t}(),To=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._success=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=-1,this._success=!1,!0}},{key:"parse",value:function(t){return this._userId=t.readInt(),this._success=t.readBoolean(),!0}},{key:"userId",get:function(){return this._userId}},{key:"success",get:function(){return this._success}}]),t}(),Ro=function(){function t(e){Object(r.a)(this,t),this._messageTemplates=void 0,this._roomMessageTemplates=void 0,this._issues=void 0,this._cfhPermission=void 0,this._chatlogsPermission=void 0,this._alertPermission=void 0,this._kickPermission=void 0,this._banPermission=void 0,this._roomAlertPermission=void 0,this._roomKickPermission=void 0,this._disposed=!1;var i=new mo;this._issues=[],this._messageTemplates=[],this._roomMessageTemplates=[];for(var n=e.readInt(),s=0;s<n;)i.parse(e)&&this._issues.push(i.issueData),s++;for(n=e.readInt(),s=0;s<n;)this._messageTemplates.push(e.readString()),s++;for(n=e.readInt(),s=0;s<n;)e.readString(),s++;for(this._cfhPermission=e.readBoolean(),this._chatlogsPermission=e.readBoolean(),this._alertPermission=e.readBoolean(),this._kickPermission=e.readBoolean(),this._banPermission=e.readBoolean(),this._roomAlertPermission=e.readBoolean(),this._roomKickPermission=e.readBoolean(),n=e.readInt(),s=0;s<n;)this._roomMessageTemplates.push(e.readString()),s++}return Object(a.a)(t,[{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._messageTemplates=null,this._roomMessageTemplates=null,this._issues=null)}},{key:"disposed",get:function(){return this._disposed}},{key:"messageTemplates",get:function(){return this._messageTemplates}},{key:"roomMessageTemplates",get:function(){return this._roomMessageTemplates}},{key:"issues",get:function(){return this._issues}},{key:"cfhPermission",get:function(){return this._cfhPermission}},{key:"chatlogsPermission",get:function(){return this._chatlogsPermission}},{key:"alertPermission",get:function(){return this._alertPermission}},{key:"kickPermission",get:function(){return this._kickPermission}},{key:"banPermission",get:function(){return this._banPermission}},{key:"roomAlertPermission",get:function(){return this._roomAlertPermission}},{key:"roomKickPermission",get:function(){return this._roomKickPermission}}]),t}(),ko=function(){function t(){Object(r.a)(this,t),this._data=null}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return this._data=new Ro(t),!0}},{key:"data",get:function(){return this._data}}]),t}(),Ao=function(){function t(){Object(r.a)(this,t),this._message=void 0,this._url=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._message="",this._url="",!0}},{key:"parse",value:function(t){return!!t&&(this._message=t.readString(),this._url=t.readString(),!0)}},{key:"message",get:function(){return this._message}},{key:"url",get:function(){return this._url}}]),t}(),So=function(){function t(e){if(Object(r.a)(this,t),this._exists=void 0,this._name=void 0,this._desc=void 0,this._tags=void 0,this._disposed=void 0,this._tags=[],this._exists=e.readBoolean(),this.exists){this._name=e.readString(),this._desc=e.readString();for(var i=e.readInt(),n=0;n<i;n++)this._tags.push(e.readString())}}return Object(a.a)(t,[{key:"name",get:function(){return this._name}},{key:"desc",get:function(){return this._desc}},{key:"tags",get:function(){return this._tags}},{key:"exists",get:function(){return this._exists}},{key:"disposed",get:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._tags=null)}}]),t}(),jo=function(){function t(e){Object(r.a)(this,t),this._flatId=void 0,this._userCount=void 0,this._ownerInRoom=void 0,this._ownerId=void 0,this._ownerName=void 0,this._room=void 0,this._disposed=void 0,this._flatId=e.readInt(),this._userCount=e.readInt(),this._ownerInRoom=e.readBoolean(),this._ownerId=e.readInt(),this._ownerName=e.readString(),this._room=new So(e)}return Object(a.a)(t,[{key:"flatId",get:function(){return this._flatId}},{key:"userCount",get:function(){return this._userCount}},{key:"ownerInRoom",get:function(){return this._ownerInRoom}},{key:"ownerId",get:function(){return this._ownerId}},{key:"ownerName",get:function(){return this._ownerName}},{key:"room",get:function(){return this._room}},{key:"disposed",get:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,null!=this._room&&(this._room.dispose(),this._room=null))}}]),t}(),No=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new jo(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Do=function(){function t(){Object(r.a)(this,t),this._windowX=void 0,this._windowY=void 0,this._windowWidth=void 0,this._windowHeight=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._windowX=0,this._windowY=0,this._windowWidth=0,this._windowHeight=0,!0}},{key:"parse",value:function(t){return this._windowX=t.readInt(),this._windowY=t.readInt(),this._windowWidth=t.readInt(),this._windowHeight=t.readInt(),!0}},{key:"windowX",get:function(){return this._windowX}},{key:"windowY",get:function(){return this._windowY}},{key:"windowWidth",get:function(){return this._windowWidth}},{key:"windowHeight",get:function(){return this._windowHeight}}]),t}(),Mo=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._userName=void 0,this._registrationAgeInMinutes=void 0,this._minutesSinceLastLogin=void 0,this._online=void 0,this._cfhCount=void 0,this._abusiveCfhCount=void 0,this._cautionCount=void 0,this._banCount=void 0,this._tradingLockCount=void 0,this._tradingExpiryDate=void 0,this._lastPurchaseDate=void 0,this._identityId=void 0,this._identityRelatedBanCount=void 0,this._primaryEmailAddress=void 0,this._figure=void 0,this._userClassification=void 0,this._lastSanctionTime="",this._sanctionAgeHours=0,this._userId=e.readInt(),this._userName=e.readString(),this._figure=e.readString(),this._registrationAgeInMinutes=e.readInt(),this._minutesSinceLastLogin=e.readInt(),this._online=e.readBoolean(),this._cfhCount=e.readInt(),this._abusiveCfhCount=e.readInt(),this._cautionCount=e.readInt(),this._banCount=e.readInt(),this._tradingLockCount=e.readInt(),this._tradingExpiryDate=e.readString(),this._lastPurchaseDate=e.readString(),this._identityId=e.readInt(),this._identityRelatedBanCount=e.readInt(),this._primaryEmailAddress=e.readString(),this._userClassification=e.readString(),e.bytesAvailable&&(this._lastSanctionTime=e.readString(),this._sanctionAgeHours=e.readInt())}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"figure",get:function(){return this._figure}},{key:"registrationAgeInMinutes",get:function(){return this._registrationAgeInMinutes}},{key:"minutesSinceLastLogin",get:function(){return this._minutesSinceLastLogin}},{key:"online",get:function(){return this._online}},{key:"cfhCount",get:function(){return this._cfhCount}},{key:"abusiveCfhCount",get:function(){return this._abusiveCfhCount}},{key:"cautionCount",get:function(){return this._cautionCount}},{key:"banCount",get:function(){return this._banCount}},{key:"tradingLockCount",get:function(){return this._tradingLockCount}},{key:"tradingExpiryDate",get:function(){return this._tradingExpiryDate}},{key:"lastPurchaseDate",get:function(){return this._lastPurchaseDate}},{key:"identityId",get:function(){return this._identityId}},{key:"identityRelatedBanCount",get:function(){return this._identityRelatedBanCount}},{key:"primaryEmailAddress",get:function(){return this._primaryEmailAddress}},{key:"userClassification",get:function(){return this._userClassification}},{key:"lastSanctionTime",get:function(){return this._lastSanctionTime}},{key:"sanctionAgeHours",get:function(){return this._sanctionAgeHours}}]),t}(),Co=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new Mo(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Lo=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new vo(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Uo=function(){function t(e){Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0,this._enterHour=void 0,this._enterMinute=void 0,this._roomId=e.readInt(),this._roomName=e.readString(),this._enterHour=e.readInt(),this._enterMinute=e.readInt()}return Object(a.a)(t,[{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}},{key:"enterHour",get:function(){return this._enterHour}},{key:"enterMinute",get:function(){return this._enterMinute}}]),t}(),Po=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._userName=void 0,this._rooms=void 0,this._rooms=[],this._userId=e.readInt(),this._userName=e.readString();for(var i=e.readInt(),n=0;n<i;)this._rooms.push(new Uo(e)),n++}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"rooms",get:function(){return this._rooms}}]),t}(),wo=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._data=new Po(t),!0}},{key:"data",get:function(){return this._data}}]),t}(),Fo=function(){function t(){Object(r.a)(this,t),this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._message="",!0}},{key:"parse",value:function(t){return!!t&&(this._message=t.readString(),!0)}},{key:"message",get:function(){return this._message}}]),t}(),xo=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._username=void 0,this._roomChatlogs=[],this._userId=e.readInt(),this._username=e.readString();for(var i=e.readInt(),n=0;n<i;n++)this._roomChatlogs.push(new vo(e))}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"username",get:function(){return this._username}},{key:"roomChatlogs",get:function(){return this._roomChatlogs}}]),t}(),Bo=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new xo(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Go=function(){function t(){Object(r.a)(this,t),this._boxColor=void 0,this._keyColor=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._boxColor=null,this._keyColor=null,!0}},{key:"parse",value:function(t){return!!t&&(this._boxColor=t.readString(),this._keyColor=t.readString(),!0)}},{key:"boxColor",get:function(){return this._boxColor}},{key:"keyColor",get:function(){return this._keyColor}}]),t}(),Ho=function(){function t(){Object(r.a)(this,t),this._canCreate=void 0,this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._canCreate=!1,this._errorCode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._canCreate=t.readBoolean(),this._errorCode=t.readInt(),!0)}},{key:"canCreate",get:function(){return this._canCreate}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),Vo=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._visible=void 0,this._automatic=void 0,this._automaticCategoryKey=void 0,this._globalCategoryKey=void 0,this._staffOnly=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._name=null,this._visible=!1,this._automatic=!1,this._automaticCategoryKey=null,this._globalCategoryKey=null,this._staffOnly=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),this._automatic=t.readBoolean(),this._automaticCategoryKey=t.readString(),this._globalCategoryKey=t.readString(),this._staffOnly=t.readBoolean(),!0)}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"visible",get:function(){return this._visible}},{key:"automatic",get:function(){return this._automatic}},{key:"automaticCategoryKey",get:function(){return this._automaticCategoryKey}},{key:"globalCategoryKey",get:function(){return this._globalCategoryKey}},{key:"staffOnly",get:function(){return this._staffOnly}}]),t}(),zo=function(){function t(){Object(r.a)(this,t),this._categories=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._categories=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._categories.push(new Vo(t)),e--;return!0}},{key:"categories",get:function(){return this._categories}}]),t}(),Yo=function(){function t(){Object(r.a)(this,t),this._categories=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._categories=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._categories.push(t.readString()),e--;return!0}},{key:"categories",get:function(){return this._categories}}]),t}(),Wo=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._visible=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._name=null,this._visible=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._id=t.readInt(),this._name=t.readString(),this._visible=t.readBoolean(),!0)}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"visible",get:function(){return this._visible}}]),t}(),Ko=function(){function t(){Object(r.a)(this,t),this._categories=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._categories=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._categories.push(new Wo(t)),e--;return!0}},{key:"categories",get:function(){return this._categories}}]),t}(),Xo=function(){function t(){Object(r.a)(this,t),this._homeRoomId=void 0,this._roomIdToEnter=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._homeRoomId=-1,this._roomIdToEnter=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._homeRoomId=t.readInt(),this._roomIdToEnter=t.readInt(),!0)}},{key:"homeRoomId",get:function(){return this._homeRoomId}},{key:"roomIdToEnter",get:function(){return this._roomIdToEnter}}]),t}(),qo=function(){function t(e){if(Object(r.a)(this,t),this._roomId=void 0,this._areaId=void 0,this._image=void 0,this._caption=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=-1,this._areaId=-1,this._image=null,this._caption=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._areaId=t.readInt(),this._image=t.readString(),this._caption=t.readString(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"areaId",get:function(){return this._areaId}},{key:"image",get:function(){return this._image}},{key:"caption",get:function(){return this._caption}}]),t}(),Qo=function(){function t(){Object(r.a)(this,t),this._rooms=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._rooms=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._rooms.push(new qo(t)),e--;return!0}},{key:"rooms",get:function(){return this._rooms}}]),t}(),Zo=function(){function t(e){if(Object(r.a)(this,t),this._id=void 0,this._code=void 0,this._filter=void 0,this._localization=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._code=null,this._filter=null,this._localization=null,!0}},{key:"parse",value:function(t){return!!t&&(this._id=t.readInt(),this._code=t.readString(),this._filter=t.readString(),this._localization=t.readString(),!0)}},{key:"id",get:function(){return this._id}},{key:"code",get:function(){return this._code}},{key:"filter",get:function(){return this._filter}},{key:"localization",get:function(){return this._localization}}]),t}(),Jo=function(){function t(e){if(Object(r.a)(this,t),this._code=void 0,this._savedSearches=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._code=null,this._savedSearches=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._code=t.readString();for(var e=t.readInt();e>0;)this._savedSearches.push(new Zo(t)),e--;return!0}},{key:"code",get:function(){return this._code}},{key:"savedSearches",get:function(){return this._savedSearches}}]),t}(),$o=function(){function t(){Object(r.a)(this,t),this._topLevelContexts=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._topLevelContexts=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._topLevelContexts.push(new Jo(t)),e--;return!0}},{key:"topLevelContexts",get:function(){return this._topLevelContexts}}]),t}(),tu=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),eu=function(){function t(){Object(r.a)(this,t),this._searches=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._searches=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._searches.push(new Zo(t)),e--;return!0}},{key:"searches",get:function(){return this._searches}}]),t}(),iu=function(){function t(e){if(Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0,this._showOwner=void 0,this._ownerId=void 0,this._ownerName=void 0,this._doorMode=void 0,this._userCount=void 0,this._maxUserCount=void 0,this._description=void 0,this._tradeMode=void 0,this._score=void 0,this._ranking=void 0,this._categoryId=void 0,this._totalStars=void 0,this._groupId=void 0,this._groupName=void 0,this._groupBadge=void 0,this._tags=void 0,this._bitMask=void 0,this._thumbnail=void 0,this._allowPets=void 0,this._displayAd=void 0,this._adName=void 0,this._adDescription=void 0,this._adExpiresIn=void 0,this._allInRoomMuted=void 0,this._canMute=void 0,this._officialRoomPicRef=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._roomName=null,this._ownerId=0,this._ownerName=null,this._doorMode=0,this._userCount=0,this._maxUserCount=0,this._description=null,this._tradeMode=2,this._score=0,this._ranking=0,this._categoryId=0,this._totalStars=0,this._groupId=0,this._groupName=null,this._groupBadge=null,this._tags=[],this._bitMask=0,this._thumbnail=null,this._allowPets=!1,this._showOwner=!0,this._displayAd=!1,this._adName=null,this._adDescription=null,this._adExpiresIn=0,this._allInRoomMuted=!1,this._canMute=!1,this._officialRoomPicRef=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),this._ownerId=t.readInt(),this._ownerName=t.readString(),this._doorMode=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this._description=t.readString(),this._tradeMode=t.readInt(),this._score=t.readInt(),this._ranking=t.readInt(),this._categoryId=t.readInt(),this.parseTags(t),this.parseBitMask(t),!0)}},{key:"parseTags",value:function(t){if(!t)return!1;this._tags=[];for(var e=t.readInt();e>0;)this._tags.push(t.readString()),e--;return!0}},{key:"parseBitMask",value:function(e){return!!e&&(this._bitMask=e.readInt(),this._bitMask&t.THUMBNAIL_BITMASK&&(this._officialRoomPicRef=e.readString()),this._bitMask&t.GROUPDATA_BITMASK&&(this._groupId=e.readInt(),this._groupName=e.readString(),this._groupBadge=e.readString()),this._bitMask&t.ROOMAD_BITMASK&&(this._adName=e.readString(),this._adDescription=e.readString(),this._adExpiresIn=e.readInt()),this._showOwner=(this._bitMask&t.SHOWOWNER_BITMASK)>0,this._allowPets=(this._bitMask&t.ALLOW_PETS_BITMASK)>0,this._displayAd=(this._bitMask&t.DISPLAY_ROOMAD_BITMASK)>0,this._thumbnail=null,!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName},set:function(t){this._roomName=t}},{key:"ownerId",get:function(){return this._ownerId}},{key:"ownerName",get:function(){return this._ownerName}},{key:"doorMode",get:function(){return this._doorMode}},{key:"userCount",get:function(){return this._userCount}},{key:"maxUserCount",get:function(){return this._maxUserCount}},{key:"description",get:function(){return this._description}},{key:"tradeMode",get:function(){return this._tradeMode}},{key:"score",get:function(){return this._score}},{key:"ranking",get:function(){return this._ranking}},{key:"categoryId",get:function(){return this._categoryId}},{key:"tags",get:function(){return this._tags}},{key:"officialRoomPicRef",get:function(){return this._officialRoomPicRef}},{key:"habboGroupId",get:function(){return this._groupId}},{key:"groupName",get:function(){return this._groupName}},{key:"groupBadgeCode",get:function(){return this._groupBadge}},{key:"roomAdName",get:function(){return this._adName}},{key:"roomAdDescription",get:function(){return this._adDescription}},{key:"roomAdExpiresInMin",get:function(){return this._adExpiresIn}},{key:"showOwner",get:function(){return this._showOwner}},{key:"allowPets",get:function(){return this._allowPets}},{key:"displayRoomEntryAd",get:function(){return this._displayAd}},{key:"canMute",get:function(){return this._canMute},set:function(t){this._canMute=t}},{key:"allInRoomMuted",get:function(){return this._allInRoomMuted},set:function(t){this._allInRoomMuted=t}}]),t}();iu.THUMBNAIL_BITMASK=1,iu.GROUPDATA_BITMASK=2,iu.ROOMAD_BITMASK=4,iu.SHOWOWNER_BITMASK=8,iu.ALLOW_PETS_BITMASK=16,iu.DISPLAY_ROOMAD_BITMASK=32,iu.OPEN_STATE=0,iu.DOORBELL_STATE=1,iu.PASSWORD_STATE=2,iu.INVISIBLE_STATE=3,iu.NOOB_STATE=4;var nu=function(){function t(e){if(Object(r.a)(this,t),this._code=void 0,this._data=void 0,this._action=void 0,this._closed=void 0,this._mode=void 0,this._rooms=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._code=null,this._data=null,this._action=-1,this._closed=!1,this._mode=-1,this._rooms=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString(),this._action=t.readInt(),this._closed=t.readBoolean(),this._mode=t.readInt();for(var e=t.readInt();e>0;)this._rooms.push(new iu(t)),e--;return!0}},{key:"code",get:function(){return this._code}},{key:"data",get:function(){return this._data}},{key:"action",get:function(){return this._action}},{key:"closed",get:function(){return this._closed}},{key:"mode",get:function(){return this._mode}},{key:"rooms",get:function(){return this._rooms}}]),t}(),su=function(){function t(e){if(Object(r.a)(this,t),this._code=void 0,this._data=void 0,this._results=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._code=null,this._data=null,this._results=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._code=t.readString(),this._data=t.readString();for(var e=t.readInt();e>0;)this._results.push(new nu(t)),e--;return!0}},{key:"code",get:function(){return this._code}},{key:"data",get:function(){return this._data}},{key:"results",get:function(){return this._results}}]),t}(),ru=function(){function t(){Object(r.a)(this,t),this._result=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._result=null,!0}},{key:"parse",value:function(t){return!!t&&(this._result=new su(t),!0)}},{key:"result",get:function(){return this._result}}]),t}(),au=function(){function t(){Object(r.a)(this,t),this._windowX=void 0,this._windowY=void 0,this._windowWidth=void 0,this._windowHeight=void 0,this._leftPanelHidden=void 0,this._resultsMode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._windowX=0,this._windowY=0,this._windowWidth=0,this._windowHeight=0,this._leftPanelHidden=!1,this._resultsMode=0,!0}},{key:"parse",value:function(t){return!!t&&(this._windowX=t.readInt(),this._windowY=t.readInt(),this._windowWidth=t.readInt(),this._windowHeight=t.readInt(),this._leftPanelHidden=t.readBoolean(),this._resultsMode=t.readInt(),!0)}},{key:"windowX",get:function(){return this._windowX}},{key:"windowY",get:function(){return this._windowY}},{key:"windowWidth",get:function(){return this._windowWidth}},{key:"windowHeight",get:function(){return this._windowHeight}},{key:"leftPanelHidden",get:function(){return this._leftPanelHidden}},{key:"resultsMode",get:function(){return this._resultsMode}}]),t}(),ou=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new ov(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),uu=function(){function t(){Object(r.a)(this,t),this._amount=void 0,this._amountChanged=void 0,this._type=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._amount=0,this._amountChanged=0,this._type=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._amount=t.readInt(),this._amountChanged=t.readInt(),this._type=t.readInt(),!0)}},{key:"amount",get:function(){return this._amount}},{key:"amountChanged",get:function(){return this._amountChanged}},{key:"type",get:function(){return this._type}}]),t}(),cu=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),hu=function(){function t(){Object(r.a)(this,t),this._numGifts=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._numGifts=0,!0}},{key:"parse",value:function(t){return!!t&&(this._numGifts=t.readInt(),!0)}},{key:"numGifts",get:function(){return this._numGifts}}]),t}(),_u=function(){function t(){Object(r.a)(this,t),this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._message=t.readString(),!0)}},{key:"message",get:function(){return this._message}}]),t}(),lu=function(){function t(){Object(r.a)(this,t),this._enabled=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._enabled=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._enabled=t.readBoolean(),!0)}},{key:"enabled",get:function(){return this._enabled}}]),t}(),du=function(){function t(){Object(r.a)(this,t),this._messages=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._messages=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._messages.push(t.readString()),e--;return!0}},{key:"messages",get:function(){return this._messages}}]),t}(),fu=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._parameters=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=null,this._parameters=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;this._type=t.readString();for(var e=t.readInt();e>0;)this._parameters.set(t.readString(),t.readString()),e--;return!0}},{key:"type",get:function(){return this._type}},{key:"parameters",get:function(){return this._parameters}}]),t}(),vu=function(){function t(){Object(r.a)(this,t),this._petId=void 0,this._petName=void 0,this._level=void 0,this._figureData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._petId=-1,this._petName=null,this._level=0,this._figureData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._petId=t.readInt(),this._petName=t.readString(),this._level=t.readInt(),this._figureData=new fs(t),!0)}},{key:"petId",get:function(){return this._petId}},{key:"petName",get:function(){return this._petName}},{key:"level",get:function(){return this._level}},{key:"figureData",get:function(){return this._figureData}}]),t}(),gu=function(){function t(){Object(r.a)(this,t),this._errorCode=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._errorCode=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._errorCode=t.readInt(),!0)}},{key:"errorCode",get:function(){return this._errorCode}}]),t}(),Ou=function(){function t(){Object(r.a)(this,t),this._items=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._items=new H,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){for(var i=t.readInt(),n=t.readInt(),s=[];n>0;)s.push(t.readInt()),n--;this._items.add(i,s),e--}return!0}},{key:"getItemsByCategory",value:function(t){return this._items.getValue(t)}},{key:"categories",get:function(){return this._items.getKeys()}}]),t}(),yu=function(){function t(e,i,n){Object(r.a)(this,t),this._code=void 0,this._errorMessage=void 0,this._isAllowed=void 0,this._code=e,this._errorMessage=i,this._isAllowed=n}return Object(a.a)(t,[{key:"code",get:function(){return this._code}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"isAllowed",get:function(){return this._isAllowed}}]),t}(),Eu=Object(a.a)((function t(){Object(r.a)(this,t)}));Eu.USE_GUIDE_TOOL="USE_GUIDE_TOOL",Eu.GIVE_GUIDE_TOUR="GIVE_GUIDE_TOUR",Eu.JUDGE_CHAT_REVIEWS="JUDGE_CHAT_REVIEWS",Eu.VOTE_IN_COMPETITIONS="VOTE_IN_COMPETITIONS",Eu.CALL_ON_HELPERS="CALL_ON_HELPERS",Eu.CITIZEN="CITIZEN",Eu.TRADE="TRADE",Eu.HEIGHTMAP_EDITOR_BETA="HEIGHTMAP_EDITOR_BETA",Eu.BUILDER_AT_WORK="BUILDER_AT_WORK",Eu.NAVIGATOR_ROOM_THUMBNAIL_CAMERA="NAVIGATOR_ROOM_THUMBNAIL_CAMERA",Eu.CAMERA="CAMERA",Eu.MOUSE_ZOOM="MOUSE_ZOOM";var pu=function(){function t(){Object(r.a)(this,t),this._perks=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._perks=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._perks=[];for(var e=t.readInt(),i=0;i<e;i++)this._perks.push(new yu(t.readString(),t.readString(),t.readBoolean()));return!0}},{key:"isAllowed",value:function(t){var e,i=!1,n=Object(s.a)(this._perks);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.code===t){i=r.isAllowed;break}}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"perks",get:function(){return this._perks}}]),t}(),mu=function(){function t(e,i,n){Object(r.a)(this,t),this._value=void 0,this._choiceText=void 0,this._choiceType=void 0,this._value=e,this._choiceText=i,this._choiceType=n}return Object(a.a)(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"choiceText",get:function(){return this._choiceText},set:function(t){this._choiceText=t}},{key:"choiceType",get:function(){return this._choiceType},set:function(t){this._choiceType=t}}]),t}(),Iu=function(){function t(){Object(r.a)(this,t),this._questionId=void 0,this._questionType=void 0,this._sortOrder=void 0,this._questionCategory=void 0,this._questionText=void 0,this._questionAnswerType=void 0,this._questionAnswerCount=void 0,this._children=void 0,this._questionChoices=void 0,this._children=[],this._questionChoices=[]}return Object(a.a)(t,[{key:"questionId",get:function(){return this._questionId},set:function(t){this._questionId=t}},{key:"questionType",get:function(){return this._questionType},set:function(t){this._questionType=t}},{key:"sortOrder",get:function(){return this._sortOrder},set:function(t){this._sortOrder=t}},{key:"questionText",get:function(){return this._questionText},set:function(t){this._questionText=t}},{key:"questionCategory",get:function(){return this._questionCategory},set:function(t){this._questionCategory=t}},{key:"questionAnswerType",get:function(){return this._questionAnswerType},set:function(t){this._questionAnswerType=t}},{key:"questionAnswerCount",get:function(){return this._questionAnswerCount},set:function(t){this._questionAnswerCount=t}},{key:"children",get:function(){return this._children},set:function(t){this._children=t}},{key:"questionChoices",get:function(){return this._questionChoices},set:function(t){this._questionChoices=t}}]),t}(),bu=function(){function t(){Object(r.a)(this,t),this._id=-1,this._startMessage="",this._endMessage="",this._numQuestions=0,this._questionArray=[],this._npsPoll=!1}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._startMessage="",this._endMessage="",this._numQuestions=0,this._questionArray=[],!0}},{key:"parse",value:function(t){this._id=t.readInt(),this._startMessage=t.readString(),this._endMessage=t.readString(),this._numQuestions=t.readInt();for(var e=0;e<this._numQuestions;e++){for(var i=this.parsePollQuestion(t),n=t.readInt(),s=0;s<n;s++)i.children.push(this.parsePollQuestion(t));this._questionArray.push(i)}return this._npsPoll=t.readBoolean(),!0}},{key:"parsePollQuestion",value:function(t){var e=new Iu;if(e.questionId=t.readInt(),e.sortOrder=t.readInt(),e.questionType=t.readInt(),e.questionText=t.readString(),e.questionCategory=t.readInt(),e.questionAnswerType=t.readInt(),e.questionAnswerCount=t.readInt(),1==e.questionType||2==e.questionType)for(var i=0;i<e.questionAnswerCount;i++)e.questionChoices.push(new mu(t.readString(),t.readString(),t.readInt()));return e}},{key:"id",get:function(){return this._id}},{key:"startMessage",get:function(){return this._startMessage}},{key:"endMessage",get:function(){return this._endMessage}},{key:"numQuestions",get:function(){return this._numQuestions}},{key:"questionArray",get:function(){return this._questionArray}},{key:"npsPoll",get:function(){return this._npsPoll}}]),t}(),Tu=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){throw!0}},{key:"parse",value:function(t){return!0}}]),t}(),Ru=function(){function t(){Object(r.a)(this,t),this._id=-1,this._type="",this._headline="",this._summary=""}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._type="",this._summary="",!0}},{key:"parse",value:function(t){return this._id=t.readInt(),this._type=t.readString(),this._headline=t.readString(),this._summary=t.readString(),!0}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"headline",get:function(){return this._headline}},{key:"summary",get:function(){return this._summary}}]),t}(),ku=function(){function t(){Object(r.a)(this,t),this._userId=void 0,this._value=void 0,this._answerCounts=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userId=-1,this._value="",this._answerCounts=null,!0}},{key:"parse",value:function(t){this._userId=t.readInt(),this._value=t.readString(),this._answerCounts=new Map;for(var e=t.readInt(),i=0;i<e;i++){var n=t.readString(),s=t.readInt();this._answerCounts.set(n,s)}return!0}},{key:"userId",get:function(){return this._userId}},{key:"value",get:function(){return this._value}},{key:"answerCounts",get:function(){return this._answerCounts}}]),t}(),Au=function(){function t(){Object(r.a)(this,t),this._questionId=void 0,this._answerCounts=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._questionId=-1,this._answerCounts=null,!0}},{key:"parse",value:function(t){this._questionId=t.readInt(),this._answerCounts=new Map;for(var e=t.readInt(),i=0;i<e;i++){var n=t.readString(),s=t.readInt();this._answerCounts.set(n,s)}return!0}},{key:"questionId",get:function(){return this._questionId}},{key:"answerCounts",get:function(){return this._answerCounts}}]),t}(),Su=function(){function t(){Object(r.a)(this,t),this._pollType=null,this._pollId=-1,this._questionId=-1,this._duration=-1,this._question=null}return Object(a.a)(t,[{key:"flush",value:function(){return this._pollType=null,this._pollId=-1,this._questionId=-1,this._duration=-1,this._question=null,!0}},{key:"parse",value:function(t){this._pollType=t.readString(),this._pollId=t.readInt(),this._questionId=t.readInt(),this._duration=t.readInt();var e=t.readInt(),i=t.readInt(),n=t.readInt(),s=t.readString();if(this._question={id:e,number:i,type:n,content:s},1==this._question.type||2==this._question.type){this._question.selection_min=t.readInt();var r=t.readInt();this._question.selections=[],this._question.selection_values=[],this._question.selection_count=r,this._question.selection_max=r;for(var a=0;a<r;a++)this._question.selection_values.push(t.readString()),this._question.selections.push(t.readString())}return!0}},{key:"pollType",get:function(){return this._pollType}},{key:"pollId",get:function(){return this._pollId}},{key:"questionId",get:function(){return this._questionId}},{key:"duration",get:function(){return this._duration}},{key:"question",get:function(){return this._question}}]),t}(),ju=function(){function t(e){Object(r.a)(this,t),this._communityGoalId=void 0,this._communityGoalCode=void 0,this._userRank=void 0,this._rewardCode=void 0,this._badge=void 0,this._localizedName=void 0,this._communityGoalId=e.readInt(),this._communityGoalCode=e.readString(),this._userRank=e.readInt(),this._rewardCode=e.readString(),this._badge=e.readBoolean(),this._localizedName=e.readString()}return Object(a.a)(t,[{key:"communityGoalId",get:function(){return this._communityGoalId}},{key:"communityGoalCode",get:function(){return this._communityGoalCode}},{key:"userRank",get:function(){return this._userRank}},{key:"rewardCode",get:function(){return this._rewardCode}},{key:"badge",get:function(){return this._badge}},{key:"localizedName",get:function(){return this._localizedName}}]),t}(),Nu=function(){function t(){Object(r.a)(this,t),this._prizes=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._prizes=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._prizes.push(new ju(t));return!0}},{key:"prizes",get:function(){return this._prizes}}]),t}(),Du=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._userName=void 0,this._figure=void 0,this._rank=void 0,this._currentScore=void 0,this._userId=e.readInt(),this._userName=e.readString(),this._figure=e.readString(),this._rank=e.readInt(),this._currentScore=e.readInt()}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"figure",get:function(){return this._figure}},{key:"rank",get:function(){return this._rank}},{key:"currentScore",get:function(){return this._currentScore}}]),t}(),Mu=function(){function t(e){Object(r.a)(this,t),this._goalCode=void 0,this._hof=void 0,this._hof=[],this._goalCode=e.readString();for(var i=e.readInt(),n=0;n<i;n++)this._hof.push(new Du(e))}return Object(a.a)(t,[{key:"dispose",value:function(){this._hof=null}},{key:"disposed",get:function(){return null==this._hof}},{key:"hof",get:function(){return this._hof}},{key:"goalCode",get:function(){return this._goalCode}}]),t}(),Cu=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new Mu(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Lu=function(){function t(e){Object(r.a)(this,t),this._hasGoalExpired=void 0,this._personalContributionScore=void 0,this._personalContributionRank=void 0,this._communityTotalScore=void 0,this._communityHighestAchievedLevel=void 0,this._scoreRemainingUntilNextLevel=void 0,this._percentCompletionTowardsNextLevel=void 0,this._goalCode=void 0,this._timeRemainingInSeconds=void 0,this._rewardUserLimits=void 0,this._rewardUserLimits=[],this._hasGoalExpired=e.readBoolean(),this._personalContributionScore=e.readInt(),this._personalContributionRank=e.readInt(),this._communityTotalScore=e.readInt(),this._communityHighestAchievedLevel=e.readInt(),this._scoreRemainingUntilNextLevel=e.readInt(),this._percentCompletionTowardsNextLevel=e.readInt(),this._goalCode=e.readString(),this._timeRemainingInSeconds=e.readInt();for(var i=e.readInt(),n=0;n<i;n++)this._rewardUserLimits.push(e.readInt())}return Object(a.a)(t,[{key:"dispose",value:function(){this._rewardUserLimits=null}},{key:"disposed",get:function(){return null==this._rewardUserLimits}},{key:"hasGoalExpired",get:function(){return this._hasGoalExpired}},{key:"personalContributionScore",get:function(){return this._personalContributionScore}},{key:"personalContributionRank",get:function(){return this._personalContributionRank}},{key:"communityTotalScore",get:function(){return this._communityTotalScore}},{key:"communityHighestAchievedLevel",get:function(){return this._communityHighestAchievedLevel}},{key:"scoreRemainingUntilNextLevel",get:function(){return this._scoreRemainingUntilNextLevel}},{key:"percentCompletionTowardsNextLevel",get:function(){return this._percentCompletionTowardsNextLevel}},{key:"timeRemainingInSeconds",get:function(){return this._timeRemainingInSeconds}},{key:"rewardUserLimits",get:function(){return this._rewardUserLimits}},{key:"goalCode",get:function(){return this._goalCode}}]),t}(),Uu=function(){function t(){Object(r.a)(this,t),this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._data=new Lu(t),!0)}},{key:"data",get:function(){return this._data}}]),t}(),Pu=function(){function t(){Object(r.a)(this,t),this._state=void 0,this._userCount=void 0,this._userCountGoal=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._state=-1,this._userCount=-1,this._userCountGoal=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._state=t.readInt(),this._userCount=t.readInt(),this._userCountGoal=t.readInt(),!0)}},{key:"state",get:function(){return this._state}},{key:"userCount",get:function(){return this._userCount}},{key:"userCountGoal",get:function(){return this._userCountGoal}}]),t}(),wu=function(){function t(){Object(r.a)(this,t),this._imageUri=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._imageUri="",!0}},{key:"parse",value:function(t){return!!t&&(this._imageUri=t.readString(),!0)}},{key:"imageUri",get:function(){return this._imageUri}}]),t}(),Fu=function(){function t(){Object(r.a)(this,t),this._expired=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._expired=t.readBoolean(),!0)}},{key:"expired",get:function(){return this._expired}}]),t}(),xu=function(){function t(e){Object(r.a)(this,t),this._campaignCode=void 0,this._completedQuestsInCampaign=void 0,this._questCountInCampaign=void 0,this._activityPointType=void 0,this._id=void 0,this._accepted=void 0,this._type=void 0,this._imageVersion=void 0,this._rewardCurrencyAmount=void 0,this._localizationCode=void 0,this._completedSteps=void 0,this._totalSteps=void 0,this._waitPeriodSeconds=void 0,this._sortOrder=void 0,this._catalogPageName=void 0,this._chainCode=void 0,this._easy=void 0,this._receiveTime=void 0,this._receiveTime=new Date,this._campaignCode=e.readString(),this._completedQuestsInCampaign=e.readInt(),this._questCountInCampaign=e.readInt(),this._activityPointType=e.readInt(),this._id=e.readInt(),this._accepted=e.readBoolean(),this._type=e.readString(),this._imageVersion=e.readString(),this._rewardCurrencyAmount=e.readInt(),this._localizationCode=e.readString(),this._completedSteps=e.readInt(),this._totalSteps=e.readInt(),this._sortOrder=e.readInt(),this._catalogPageName=e.readString(),this._chainCode=e.readString(),this._easy=e.readBoolean()}return Object(a.a)(t,[{key:"campaignCode",get:function(){return this._campaignCode}},{key:"localizationCode",get:function(){return this._localizationCode}},{key:"completedQuestsInCampaign",get:function(){return this._completedQuestsInCampaign}},{key:"questCountInCampaign",get:function(){return this._questCountInCampaign}},{key:"activityPointType",get:function(){return this._activityPointType}},{key:"accepted",get:function(){return this._accepted},set:function(t){this._accepted=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"type",get:function(){return this._type}},{key:"imageVersion",get:function(){return this._imageVersion}},{key:"rewardCurrencyAmount",get:function(){return this._rewardCurrencyAmount}},{key:"completedSteps",get:function(){return this._completedSteps}},{key:"totalSteps",get:function(){return this._totalSteps}},{key:"isCompleted",get:function(){return this._completedSteps==this._totalSteps}},{key:"waitPeriodSeconds",get:function(){if(this._waitPeriodSeconds<1)return 0;var t=(new Date).getTime()-this._receiveTime.getTime();return Math.max(0,this._waitPeriodSeconds-Math.floor(t/1e3))},set:function(t){this._waitPeriodSeconds=t}},{key:"getCampaignLocalizationKey",value:function(){return t.getCampaignLocalizationKeyForCode(this.campaignCode)}},{key:"getQuestLocalizationKey",value:function(){return this.getCampaignLocalizationKey()+"."+this._localizationCode}},{key:"completedCampaign",get:function(){return this._id<1}},{key:"lastQuestInCampaign",get:function(){return this._completedQuestsInCampaign>=this._questCountInCampaign}},{key:"receiveTime",get:function(){return this._receiveTime}},{key:"sortOrder",get:function(){return this._sortOrder}},{key:"catalogPageName",get:function(){return this._catalogPageName}},{key:"chainCode",get:function(){return this._chainCode}},{key:"easy",get:function(){return this._easy}}],[{key:"getCampaignLocalizationKeyForCode",value:function(t){return"quests."+t}}]),t}(),Bu=function(){function t(){Object(r.a)(this,t),this._questData=void 0,this._showDialog=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._questData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._questData=new xu(t),this._showDialog=t.readBoolean(),!0)}},{key:"questData",get:function(){return this._questData}},{key:"showDialog",get:function(){return this._showDialog}}]),t}(),Gu=function(){function t(){Object(r.a)(this,t),this._quest=void 0,this._easyQuestCount=void 0,this._hardQuestCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quest=null,!0}},{key:"parse",value:function(t){return!!t&&(t.readBoolean()&&(this._quest=new xu(t),this._easyQuestCount=t.readInt(),this._hardQuestCount=t.readInt()),!0)}},{key:"quest",get:function(){return this._quest}},{key:"easyQuestCount",get:function(){return this._easyQuestCount}},{key:"hardQuestCount",get:function(){return this._hardQuestCount}}]),t}(),Hu=function(){function t(){Object(r.a)(this,t),this._quest=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quest=null,!0}},{key:"parse",value:function(t){return!!t&&(this._quest=new xu(t),!0)}},{key:"quest",get:function(){return this._quest}}]),t}(),Vu=function(){function t(){Object(r.a)(this,t),this._quests=void 0,this._openWindow=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quests=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._quests.push(new xu(t));return this._openWindow=t.readBoolean(),!0}},{key:"quests",get:function(){return this._quests}},{key:"openWindow",get:function(){return this._openWindow}}]),t}(),zu=function(){function t(){Object(r.a)(this,t),this._quests=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._quests=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=0;i<e;i++)this._quests.push(new xu(t));return!0}},{key:"quests",get:function(){return this._quests}}]),t}(),Yu=function(){function t(){Object(r.a)(this,t),this._reason=void 0,this._parameter=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._reason=0,this._parameter="",!0}},{key:"parse",value:function(t){return!!t&&(this._reason=t.readInt(),this._parameter=t.readString(),!0)}},{key:"reason",get:function(){return this._reason}},{key:"parameter",get:function(){return this._parameter}}]),t}();Yu.REASON_FULL=1,Yu.REASON_CLOSED=2,Yu.REASON_QUEUE_ERROR=3,Yu.REASON_BANNED=4;var Wu=function(){function t(){Object(r.a)(this,t),this._userName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._userName=t.readString(),!0)}},{key:"userName",get:function(){return this._userName}}]),t}(),Ku=function(){function t(){Object(r.a)(this,t),this._userName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._userName=t.readString(),!0)}},{key:"userName",get:function(){return this._userName}}]),t}(),Xu=function(){function t(){Object(r.a)(this,t),this._userName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._userName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._userName=t.readString(),!0)}},{key:"userName",get:function(){return this._userName}}]),t}(),qu=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Qu=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),Zu=Object(a.a)((function t(){Object(r.a)(this,t)}));Zu.NONE=0,Zu.GUEST=1,Zu.GUILD_MEMBER=2,Zu.GUILD_ADMIN=3,Zu.ROOM_OWNER=4,Zu.MODERATOR=5;var Ju=function(){function t(){Object(r.a)(this,t),this._controllerLevel=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._controllerLevel=Zu.NONE,!0}},{key:"parse",value:function(t){return!!t&&(this._controllerLevel=t.readInt(),!0)}},{key:"controllerLevel",get:function(){return this._controllerLevel}}]),t}(),$u=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),tc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),!0)}},{key:"roomId",get:function(){return this._roomId}}]),t}(),ec=function(){function t(){Object(r.a)(this,t),this._botId=void 0,this._commandId=void 0,this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._botId=-1,this._commandId=-1,this._data="",!0}},{key:"parse",value:function(t){return!!t&&(this._botId=t.readInt(),this._commandId=t.readInt(),this._data=t.readString(),!0)}},{key:"botId",get:function(){return this._botId}},{key:"commandId",get:function(){return this._commandId}},{key:"data",get:function(){return this._data}}]),t}(),ic=function(){function t(e){if(Object(r.a)(this,t),this._mode=void 0,this._weight=void 0,this._speed=void 0,this._distance=void 0,this._protection=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._mode=0,this._weight=0,this._speed=0,this._distance=0,this._protection=0,!0}},{key:"parse",value:function(t){return!!t&&(this._mode=t.readInt(),this._weight=t.readInt(),this._speed=t.readInt(),this._distance=t.readInt(),this._protection=t.readInt(),!0)}},{key:"mode",get:function(){return this._mode}},{key:"weight",get:function(){return this._weight}},{key:"speed",get:function(){return this._speed}},{key:"distance",get:function(){return this._distance}},{key:"protection",get:function(){return this._protection}}]),t}();ic.CHAT_MODE_FREE_FLOW=0,ic.CHAT_MODE_LINE_BY_LINE=1,ic.CHAT_BUBBLE_WIDTH_WIDE=0,ic.CHAT_BUBBLE_WIDTH_NORMAL=1,ic.CHAT_BUBBLE_WIDTH_THIN=2,ic.CHAT_SCROLL_SPEED_FAST=0,ic.CHAT_SCROLL_SPEED_NORMAL=1,ic.CHAT_SCROLL_SPEED_SLOW=2,ic.FLOOD_FILTER_STRICT=0,ic.FLOOD_FILTER_NORMAL=1,ic.FLOOD_FILTER_LOOSE=2;var nc=function(){function t(){Object(r.a)(this,t),this._chat=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._chat=null,!0}},{key:"parse",value:function(t){return!!t&&(this._chat=new ic(t),!0)}},{key:"chat",get:function(){return this._chat}}]),t}(),sc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._isOwner=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._isOwner=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._isOwner=t.readBoolean(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"isOwner",get:function(){return this._isOwner}}]),t}(),rc=function(){function t(e){Object(r.a)(this,t),this._allowMute=void 0,this._allowKick=void 0,this._allowBan=void 0,this.reset(),this.parse(e)}return Object(a.a)(t,[{key:"reset",value:function(){this._allowMute=0,this._allowKick=0,this._allowBan=0}},{key:"parse",value:function(t){this._allowMute=t.readInt(),this._allowKick=t.readInt(),this._allowBan=t.readInt()}},{key:"allowMute",get:function(){return this._allowMute}},{key:"allowKick",get:function(){return this._allowKick}},{key:"allowBan",get:function(){return this._allowBan}}]),t}();rc.MODERATION_LEVEL_NONE=0,rc.MODERATION_LEVEL_USER_WITH_RIGHTS=1,rc.MODERATION_LEVEL_ALL=2;var ac=function(){function t(){Object(r.a)(this,t),this._roomEnter=void 0,this._roomForward=void 0,this._data=void 0,this._staffPick=void 0,this._isGroupMember=void 0,this._moderation=void 0,this._chat=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomEnter=!1,this._roomForward=!1,this._data=null,this._staffPick=!1,this._isGroupMember=!1,this._moderation=null,this._chat=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomEnter=t.readBoolean(),this._data=new iu(t),this._roomForward=t.readBoolean(),this._staffPick=t.readBoolean(),this._isGroupMember=t.readBoolean(),this.data.allInRoomMuted=t.readBoolean(),this._moderation=new rc(t),this.data.canMute=t.readBoolean(),this._chat=new ic(t),!0)}},{key:"roomEnter",get:function(){return this._roomEnter}},{key:"roomForward",get:function(){return this._roomForward}},{key:"data",get:function(){return this._data}},{key:"staffPick",get:function(){return this._staffPick}},{key:"isGroupMember",get:function(){return this._isGroupMember}},{key:"moderation",get:function(){return this._moderation}},{key:"chat",get:function(){return this._chat}}]),t}(),oc=function(){function t(){Object(r.a)(this,t),this._totalLikes=void 0,this._canLike=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._totalLikes=0,this._canLike=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._totalLikes=t.readInt(),this._canLike=t.readBoolean(),!0)}},{key:"totalLikes",get:function(){return this._totalLikes}},{key:"canLike",get:function(){return this._canLike}}]),t}(),uc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._code=void 0,this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._code=0,this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._code=t.readInt(),this._message=t.readString(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"code",get:function(){return this._code}},{key:"message",get:function(){return this._message}}]),t}(),cc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._name=void 0,this._description=void 0,this._state=void 0,this._categoryId=void 0,this._userCount=void 0,this._maxUserCount=void 0,this._tags=void 0,this._tradeMode=void 0,this._allowPets=void 0,this._allowPetsEat=void 0,this._allowWalkthrough=void 0,this._hideWalls=void 0,this._thicknessWall=void 0,this._thicknessFloor=void 0,this._chat=void 0,this._moderation=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._name=t.readString(),this._description=t.readString(),this._state=t.readInt(),this._categoryId=t.readInt(),this._userCount=t.readInt(),this._maxUserCount=t.readInt(),this.parseTags(t),this._tradeMode=t.readInt(),this._allowPets=t.readInt(),this._allowPetsEat=t.readInt(),this._allowWalkthrough=t.readInt(),this._hideWalls=t.readInt(),this._thicknessWall=t.readInt(),this._thicknessFloor=t.readInt(),this._chat=new ic(t),t.readBoolean(),this._moderation=new rc(t),!0)}},{key:"parseTags",value:function(t){if(!t)return!1;this._tags=[];for(var e=t.readInt();e>0;)this._tags.push(t.readString()),e--;return!0}},{key:"roomId",get:function(){return this._roomId}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"state",get:function(){return this._state}},{key:"categoryId",get:function(){return this._categoryId}},{key:"userCount",get:function(){return this._userCount}},{key:"maxUserCount",get:function(){return this._maxUserCount}},{key:"tags",get:function(){return this._tags}},{key:"tradeMode",get:function(){return this._tradeMode}},{key:"allowPets",get:function(){return 1===this._allowPets}},{key:"allowPetsEat",get:function(){return 1===this._allowPetsEat}},{key:"allowWalkthrough",get:function(){return 1===this._allowWalkthrough}},{key:"hideWalls",get:function(){return 1===this._hideWalls}},{key:"thicknessWall",get:function(){return this._thicknessWall}},{key:"thicknessFloor",get:function(){return this._thicknessFloor}},{key:"chatSettings",get:function(){return this._chat}},{key:"moderationSettings",get:function(){return this._moderation}}]),t}(),hc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),!0)}},{key:"roomId",get:function(){return this._roomId}}]),t}(),_c=function(){function t(){Object(r.a)(this,t),this._roomId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),!0)}},{key:"roomId",get:function(){return this._roomId}}]),t}(),lc=function(){function t(){Object(r.a)(this,t),this._roomIndex=void 0,this._groupId=void 0,this._status=void 0,this._groupName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomIndex=-1,this._groupId=-1,this._status=0,this._groupName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomIndex=t.readInt(),this._groupId=t.readInt(),this._status=t.readInt(),this._groupName=t.readString(),!0)}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"groupId",get:function(){return this._groupId}},{key:"status",get:function(){return this._status}},{key:"groupName",get:function(){return this._groupName}}]),t}(),dc=function(){function t(e,i,n){Object(r.a)(this,t),this._id=0,this._state=0,this._data=void 0,this._id=e,this._state=i,this._data=n}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"state",get:function(){return this._state}},{key:"data",get:function(){return this._data}}]),t}(),fc=function(){function t(){Object(r.a)(this,t),this._objects=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._objects=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=t.readInt(),n=Na.parseObjectData(t),s=parseFloat(n.getLegacyString());this._objects.push(new dc(i,s,n)),e--}return!0}},{key:"objects",get:function(){return this._objects}}]),t}(),vc=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(r.a)(this,t),this._id=void 0,this._location=void 0,this._targetLocation=void 0,this._movementType=void 0,this._id=e,this._location=i,this._targetLocation=n,this._movementType=s}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"location",get:function(){return this._location}},{key:"targetLocation",get:function(){return this._targetLocation}},{key:"movementType",get:function(){return this._movementType}}]),t}();vc.MOVE="mv",vc.SLIDE="sld";var gc=function(){function t(){Object(r.a)(this,t),this._rollerId=void 0,this._itemsRolling=void 0,this._unitRolling=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._rollerId=0,this._itemsRolling=[],this._unitRolling=null,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt(),i=t.readInt(),n=t.readInt(),s=t.readInt(),r=t.readInt();r>0;){var a=t.readInt(),o=parseFloat(t.readString()),u=parseFloat(t.readString()),c=new vc(a,new Et(e,i,o),new Et(n,s,u));this._itemsRolling.push(c),r--}if(this._rollerId=t.readInt(),!t.bytesAvailable)return!0;var h=t.readInt(),_=t.readInt(),l=parseFloat(t.readString()),d=parseFloat(t.readString());switch(h){case 0:break;case 1:this._unitRolling=new vc(_,new Et(e,i,l),new Et(n,s,d),vc.MOVE);break;case 2:this._unitRolling=new vc(_,new Et(e,i,l),new Et(n,s,d),vc.SLIDE)}return!0}},{key:"rollerId",get:function(){return this._rollerId}},{key:"itemsRolling",get:function(){return this._itemsRolling}},{key:"unitRolling",get:function(){return this._unitRolling}}]),t}(),Oc=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._roomName=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=-1,this._roomName=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._roomName=t.readString(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"roomName",get:function(){return this._roomName}}]),t}(),yc=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._value=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._value=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),this._value=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"value",get:function(){return this._value}}]),t}(),Ec=function(){function t(e){if(Object(r.a)(this,t),this._itemId=void 0,this._spriteId=void 0,this._spriteName=void 0,this._x=void 0,this._y=void 0,this._direction=void 0,this._z=void 0,this._stackHeight=void 0,this._extra=void 0,this._data=void 0,this._state=void 0,this._expires=void 0,this._usagePolicy=void 0,this._userId=void 0,this._username=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._spriteId=0,this._spriteName=null,this._x=0,this._y=0,this._direction=0,this._z=0,this._stackHeight=0,this._extra=0,this._data=null,this._state=0,this._expires=0,this._usagePolicy=0,this._userId=0,this._username=null,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),this._spriteId=t.readInt(),this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt()%8*45,this._z=parseFloat(t.readString()),this._stackHeight=parseFloat(t.readString()),this._extra=t.readInt(),this._data=Na.parseObjectData(t),this._state=parseFloat(this._data&&this._data.getLegacyString())||0,this._expires=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null,this._spriteId<0&&(this._spriteName=t.readString()),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"spriteId",get:function(){return this._spriteId}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"direction",get:function(){return this._direction}},{key:"z",get:function(){return isNaN(this._z)?0:this._z}},{key:"stackHeight",get:function(){return isNaN(this._stackHeight)?0:this._stackHeight}},{key:"extra",get:function(){return this._extra}},{key:"data",get:function(){return this._data}},{key:"state",get:function(){return this._state}},{key:"expires",get:function(){return this._expires}},{key:"usagePolicy",get:function(){return this._usagePolicy}},{key:"userId",get:function(){return this._userId}},{key:"username",get:function(){return this._username},set:function(t){this._username=t}},{key:"spriteName",get:function(){return this._spriteName},set:function(t){this._spriteName=t}}]),t}(),pc=function(){function t(){Object(r.a)(this,t),this._item=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._item=null,!0}},{key:"parse",value:function(t){return!!t&&(this._item=new Ec(t),this._item.username=t.readString(),!0)}},{key:"item",get:function(){return this._item}}]),t}(),mc=function(){function t(){Object(r.a)(this,t),this._owners=void 0,this._items=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._owners=new Map,this._items=[],!0}},{key:"parse",value:function(t){if(!t)return!1;if(!this.parseOwners(t))return!1;for(var e=t.readInt();e>0;){var i=new Ec(t);if(i){var n=this._owners.get(i.userId);n&&(i.username=n),this._items.push(i),e--}}return!0}},{key:"parseOwners",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}},{key:"owners",get:function(){return this._owners}},{key:"items",get:function(){return this._items}}]),t}(),Ic=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._isExpired=void 0,this._userId=void 0,this._delay=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._isExpired=!0,this._userId=0,this._delay=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=parseInt(t.readString()),this._isExpired=t.readBoolean(),this._userId=t.readInt(),this._delay=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"isExpired",get:function(){return this._isExpired}},{key:"userId",get:function(){return this._userId}},{key:"delay",get:function(){return this._delay}}]),t}(),bc=function(){function t(){Object(r.a)(this,t),this._item=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._item=null,!0}},{key:"parse",value:function(t){return!!t&&(this._item=new Ec(t),!0)}},{key:"item",get:function(){return this._item}}]),t}(),Tc=function(){function t(){Object(r.a)(this,t),this._aliases=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._aliases=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._aliases.set(t.readString(),t.readString()),e--;return!0}},{key:"aliases",get:function(){return this._aliases}}]),t}(),Rc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0,this._height=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._furniId=-1,this._height=0,!0}},{key:"parse",value:function(t){return!!t&&(this._furniId=t.readInt(),this._height=t.readInt()/100,!0)}},{key:"furniId",get:function(){return this._furniId}},{key:"height",get:function(){return this._height}}]),t}(),kc=function(){function t(){Object(r.a)(this,t),this._objectId=void 0,this._guildId=void 0,this._guildName=void 0,this._guildHomeRoomId=void 0,this._userIsMember=void 0,this._guildHasReadableForum=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._objectId=0,this._guildId=0,this._guildName=null,this._guildHomeRoomId=0,this._userIsMember=!1,this._guildHasReadableForum=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._objectId=t.readInt(),this._guildId=t.readInt(),this._guildName=t.readString(),this._guildHomeRoomId=t.readInt(),this._userIsMember=t.readBoolean(),this._guildHasReadableForum=t.readBoolean(),!0)}},{key:"objectId",get:function(){return this._objectId}},{key:"guildId",get:function(){return this._guildId}},{key:"guildName",get:function(){return this._guildName}},{key:"guildHomeRoomId",get:function(){return this._guildHomeRoomId}},{key:"userIsMember",get:function(){return this._userIsMember}},{key:"guildHasReadableForum",get:function(){return this._guildHasReadableForum}}]),t}(),Ac=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._data="",!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=parseInt(t.readString()),this._data=t.readString(),!0)}},{key:"furnitureId",get:function(){return this._itemId}},{key:"data",get:function(){return this._data}}]),t}(),Sc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0}return Object(a.a)(t,[{key:"furniId",get:function(){return this._furniId}},{key:"flush",value:function(){return this._furniId=-1,!0}},{key:"parse",value:function(t){return this._furniId=t.readInt(),!0}}]),t}(),jc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0}return Object(a.a)(t,[{key:"furniId",get:function(){return this._furniId}},{key:"flush",value:function(){return this._furniId=-1,!0}},{key:"parse",value:function(t){return this._furniId=t.readInt(),!0}}]),t}(),Nc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0,this._start=void 0}return Object(a.a)(t,[{key:"furniId",get:function(){return this._furniId}},{key:"start",get:function(){return this._start}},{key:"flush",value:function(){return this._furniId=-1,this._start=!1,!0}},{key:"parse",value:function(t){return this._furniId=t.readInt(),this._start=t.readBoolean(),!0}}]),t}(),Dc=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._state=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._state=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=t.readInt(),this._state=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"state",get:function(){return this._state}}]),t}(),Mc=Object(a.a)((function t(e,i,n,s){Object(r.a)(this,t),this.id=e,this.type=i,this.color=n,this.brightness=s})),Cc=function(){function t(){Object(r.a)(this,t),this._selectedPresetId=void 0,this._presets=void 0,this._selectedPresetId=0,this._presets=[]}return Object(a.a)(t,[{key:"flush",value:function(){return this._presets=[],!0}},{key:"parse",value:function(t){var e=t.readInt();this._selectedPresetId=t.readInt();for(var i=0;i<e;i++){var n=t.readInt(),s=t.readInt(),r=parseInt(t.readString().substr(1),16),a=t.readInt();this._presets.push(new Mc(n,s,r,a))}return!0}},{key:"getPreset",value:function(t){return t<0||t>=this.presetCount?null:this._presets[t]}},{key:"presetCount",get:function(){return this._presets.length}},{key:"selectedPresetId",get:function(){return this._selectedPresetId}}]),t}(),Lc=function(){function t(e){if(Object(r.a)(this,t),this._itemId=void 0,this._spriteId=void 0,this._location=void 0,this._stuffData=void 0,this._state=void 0,this._secondsToExpiration=void 0,this._usagePolicy=void 0,this._userId=void 0,this._username=void 0,this._width=void 0,this._height=void 0,this._localX=void 0,this._localY=void 0,this._y=void 0,this._z=void 0,this._direction=void 0,this._isOldFormat=void 0,!e)throw new Error("invalid_wrapper");this.flush(),this.parse(e)}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._spriteId=0,this._location=null,this._stuffData=null,this._state=0,this._secondsToExpiration=0,this._usagePolicy=-1,this._userId=0,this._username=null,this._width=0,this._height=0,this._localX=0,this._localY=0,this._y=0,this._z=0,this._direction=null,this._isOldFormat=!1,!0}},{key:"parse",value:function(t){if(!t)return!1;this._itemId=parseInt(t.readString()),this._spriteId=t.readInt(),this._location=t.readString(),this._stuffData=t.readString(),this._secondsToExpiration=t.readInt(),this._usagePolicy=t.readInt(),this._userId=t.readInt(),this._username=null;var e=parseFloat(this._stuffData);if(isNaN(e)||(this._state=e),0===this._location.indexOf(":")){this._isOldFormat=!1;var i=this._location.split(" ");if(i.length>=3){var n=i[0],s=i[1],r=i[2];if(n.length>3&&s.length>2&&(n=n.substr(3),s=s.substr(2),(i=n.split(",")).length>=2)){var a=parseInt(i[0]),o=parseInt(i[1]);if((i=s.split(",")).length>=2){var u=parseInt(i[0]),c=parseInt(i[1]);this._width=a,this._height=o,this._localX=u,this._localY=c,this._direction=r}}}}else this._isOldFormat=!0;return!0}},{key:"itemId",get:function(){return this._itemId}},{key:"spriteId",get:function(){return this._spriteId}},{key:"wallPosition",get:function(){return this._location}},{key:"stuffData",get:function(){return this._stuffData}},{key:"state",get:function(){return this._state}},{key:"secondsToExpiration",get:function(){return this._secondsToExpiration}},{key:"usagePolicy",get:function(){return this._usagePolicy}},{key:"userId",get:function(){return this._userId}},{key:"username",get:function(){return this._username},set:function(t){this._username=t}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"localX",get:function(){return this._localX}},{key:"localY",get:function(){return this._localY}},{key:"direction",get:function(){return this._direction}},{key:"isOldFormat",get:function(){return this._isOldFormat}}]),t}(),Uc=function(){function t(){Object(r.a)(this,t),this._item=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._item=null,!0}},{key:"parse",value:function(t){return!!t&&(this._item=new Lc(t),this._item.username=t.readString(),!0)}},{key:"item",get:function(){return this._item}}]),t}(),Pc=function(){function t(){Object(r.a)(this,t),this._owners=void 0,this._items=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._owners=new Map,this._items=[],!0}},{key:"parse",value:function(t){if(!t)return!1;if(!this.parseOwners(t))return!1;for(var e=t.readInt();e>0;){var i=new Lc(t);if(i){var n=this._owners.get(i.userId);n&&(i.username=n),this._items.push(i),e--}}return!0}},{key:"parseOwners",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._owners.set(t.readInt(),t.readString()),e--;return!0}},{key:"owners",get:function(){return this._owners}},{key:"items",get:function(){return this._items}}]),t}(),wc=function(){function t(){Object(r.a)(this,t),this._itemId=void 0,this._userId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,this._userId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=parseInt(t.readString()),this._userId=t.readInt(),!0)}},{key:"itemId",get:function(){return this._itemId}},{key:"userId",get:function(){return this._userId}}]),t}(),Fc=function(){function t(){Object(r.a)(this,t),this._item=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._item=null,!0}},{key:"parse",value:function(t){return!!t&&(this._item=new Lc(t),this._item.username=t.readString(),!0)}},{key:"item",get:function(){return this._item}}]),t}(),xc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0,this._commandId=void 0}return Object(a.a)(t,[{key:"parse",value:function(t){return this._furniId=t.readInt(),this._commandId=t.readInt(),!0}},{key:"flush",value:function(){return this._furniId=-1,this._commandId=-1,!0}},{key:"furniId",get:function(){return this._furniId}},{key:"commandId",get:function(){return this._commandId}}]),t}(),Bc=function(){function t(e,i,n){Object(r.a)(this,t),this._video=void 0,this._title=void 0,this._description=void 0,this._video=e,this._title=i,this._description=n}return Object(a.a)(t,[{key:"video",get:function(){return this._video}},{key:"title",get:function(){return this._title}},{key:"description",get:function(){return this._description}}]),t}(),Gc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0,this._playlists=void 0,this._selectedPlaylistId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._furniId=-1,this._playlists=null,this._selectedPlaylistId=null,!0}},{key:"parse",value:function(t){this._furniId=t.readInt();var e=t.readInt();this._playlists=[];for(var i=0;i<e;i++)this._playlists.push(new Bc(t.readString(),t.readString(),t.readString()));return this._selectedPlaylistId=t.readString(),!0}},{key:"furniId",get:function(){return this._furniId}},{key:"playlists",get:function(){return this._playlists}},{key:"selectedPlaylistId",get:function(){return this._selectedPlaylistId}}]),t}(),Hc=function(){function t(){Object(r.a)(this,t),this._furniId=void 0,this._videoId=void 0,this._startAtSeconds=void 0,this._endAtSeconds=void 0,this._state=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return this._furniId=t.readInt(),this._videoId=t.readString(),this._startAtSeconds=t.readInt(),this._endAtSeconds=t.readInt(),this._state=t.readInt(),!0}},{key:"furniId",get:function(){return this._furniId}},{key:"videoId",get:function(){return this._videoId}},{key:"state",get:function(){return this._state}},{key:"startAtSeconds",get:function(){return this._startAtSeconds}},{key:"endAtSeconds",get:function(){return this._endAtSeconds}}]),t}(),Vc=function(){function t(e,i,n,s){Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._width=void 0,this._height=void 0,this._x=e,this._y=i,this._width=n,this._height=s}return Object(a.a)(t,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(),zc=function(){function t(){Object(r.a)(this,t),this._width=void 0,this._height=void 0,this._wallHeight=void 0,this._fixedWallsHeight=void 0,this._tileMap=void 0,this._holeMap=void 0,this._doors=void 0,this._dimensions=void 0,this._restrictsDragging=void 0,this._restrictsScaling=void 0,this._restrictedScale=void 0,this._width=0,this._height=0,this._wallHeight=0,this._fixedWallsHeight=0,this._tileMap=[],this._holeMap=[],this._doors=[],this._dimensions={minX:0,maxX:0,minY:0,maxY:0},this._restrictsDragging=!1,this._restrictedScale=1,this._restrictsScaling=!1}return Object(a.a)(t,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"wallHeight",get:function(){return this._wallHeight},set:function(t){this._wallHeight=t}},{key:"fixedWallsHeight",get:function(){return this._fixedWallsHeight},set:function(t){this._fixedWallsHeight=t}},{key:"tileMap",get:function(){return this._tileMap}},{key:"holeMap",get:function(){return this._holeMap}},{key:"doors",get:function(){return this._doors}},{key:"dimensions",get:function(){return this._dimensions}},{key:"restrictsDragging",get:function(){return this._restrictsDragging},set:function(t){this._restrictsDragging=t}},{key:"restrictsScaling",get:function(){return this._restrictsScaling},set:function(t){this._restrictsScaling=t}},{key:"restrictedScale",get:function(){return this._restrictedScale},set:function(t){this._restrictedScale=t}}]),t}(),Yc=function(){function t(e,i,n,s){Object(r.a)(this,t),this._leftSideLoc=0,this._rightSideLoc=0,this._leftSideLength=0,this._rightSideLength=0,this._leftSideLoc=e,this._rightSideLoc=i,this._leftSideLength=n,this._rightSideLength=s}return Object(a.a)(t,[{key:"leftSideLoc",get:function(){return this._leftSideLoc}},{key:"rightSideLoc",get:function(){return this._rightSideLoc}},{key:"leftSideLength",get:function(){return this._leftSideLength}},{key:"rightSideLength",get:function(){return this._rightSideLength}}]),t}(),Wc=function(){function t(e,i,n,s,a){var o,u,c,h,_,l,d;if(Object(r.a)(this,t),this._type=0,this._loc=null,this._leftSide=null,this._rightSide=null,this._normal=null,this._normalDirection=null,this._secondaryNormals=void 0,this._masks=void 0,this._secondaryNormals=[],this._masks=[],this._loc=new Et,this._loc.assign(i),this._leftSide=new Et,this._leftSide.assign(n),this._rightSide=new Et,this._rightSide.assign(s),this._type=e,null!=n&&null!=s&&(this._normal=Et.crossProduct(n,s),o=0,u=0,0,c=0,h=0,0!=this.normal.x||0!=this.normal.y?(c=this.normal.x,h=this.normal.y,(o=360+Math.atan2(h,c)/Math.PI*180)>=360&&(o-=360),c=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y),h=this.normal.z,(u=360+Math.atan2(h,c)/Math.PI*180)>=360&&(u-=360)):u=this.normal.z<0?90:270,this._normalDirection=new Et(o,u,0)),null!=a&&a.length>0)for(_=0;_<a.length;)null!=(l=a[_])&&l.length>0&&((d=new Et).assign(l),d.multiply(1/d.length),this._secondaryNormals.push(d)),_++}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"loc",get:function(){return this._loc}},{key:"leftSide",get:function(){return this._leftSide}},{key:"rightSide",get:function(){return this._rightSide}},{key:"normal",get:function(){return this._normal}},{key:"normalDirection",get:function(){return this._normalDirection}},{key:"secondaryNormalCount",get:function(){return this._secondaryNormals.length}},{key:"maskCount",get:function(){return this._masks.length}},{key:"getSecondaryNormal",value:function(t){if(t<0||t>=this.secondaryNormalCount)return null;var e=new Et;return e.assign(this._secondaryNormals[t]),e}},{key:"addMask",value:function(t,e,i,n){var s=new Yc(t,e,i,n);this._masks.push(s)}},{key:"getMask",value:function(t){return t<0||t>=this.maskCount?null:this._masks[t]}},{key:"getMaskLeftSideLoc",value:function(t){var e=this.getMask(t);return null!=e?e.leftSideLoc:-1}},{key:"getMaskRightSideLoc",value:function(t){var e=this.getMask(t);return null!=e?e.rightSideLoc:-1}},{key:"getMaskLeftSideLength",value:function(t){var e=this.getMask(t);return null!=e?e.leftSideLength:-1}},{key:"getMaskRightSideLength",value:function(t){var e=this.getMask(t);return null!=e?e.rightSideLength:-1}}]),t}();Wc.PLANE_UNDEFINED=0,Wc.PLANE_FLOOR=1,Wc.PLANE_WALL=2,Wc.PLANE_LANDSCAPE=3,Wc.PLANE_BILLBOARD=4;var Kc=function(){function t(){Object(r.a)(this,t),this._corners=void 0,this._endPoints=void 0,this._directions=void 0,this._lengths=void 0,this._leftTurns=void 0,this._borders=void 0,this._hideWalls=void 0,this._manuallyLeftCut=void 0,this._manuallyRightCut=void 0,this._addDuplicates=void 0,this._count=void 0,this._corners=[],this._endPoints=[],this._directions=[],this._lengths=[],this._leftTurns=[],this._borders=[],this._hideWalls=[],this._manuallyLeftCut=[],this._manuallyRightCut=[],this._addDuplicates=!1,this._count=0}return Object(a.a)(t,[{key:"addWall",value:function(t,e,i,n,s){(this._addDuplicates||this.checkIsNotDuplicate(t,e,i,n,s))&&(this._corners.push(t),this._directions.push(e),this._lengths.push(i),this._borders.push(n),this._leftTurns.push(s),this._hideWalls.push(!1),this._manuallyLeftCut.push(!1),this._manuallyRightCut.push(!1),this._count++)}},{key:"checkIsNotDuplicate",value:function(t,e,i,n,s){for(var r=0;r<this._count;){if(this._corners[r].x==t.x&&this._corners[r].y==t.y&&this._directions[r]==e&&this._lengths[r]==i&&this._borders[r]==n&&this._leftTurns[r]==s)return!1;r++}return!0}},{key:"count",get:function(){return this._count}},{key:"getCorner",value:function(t){return this._corners[t]}},{key:"getEndPoint",value:function(t){return this.calculateWallEndPoints(),this._endPoints[t]}},{key:"getLength",value:function(t){return this._lengths[t]}},{key:"getDirection",value:function(t){return this._directions[t]}},{key:"getBorder",value:function(t){return this._borders[t]}},{key:"getHideWall",value:function(t){return this._hideWalls[t]}},{key:"getLeftTurn",value:function(t){return this._leftTurns[t]}},{key:"getManuallyLeftCut",value:function(t){return this._manuallyLeftCut[t]}},{key:"getManuallyRightCut",value:function(t){return this._manuallyRightCut[t]}},{key:"setHideWall",value:function(t,e){this._hideWalls[t]=e}},{key:"setLength",value:function(t,e){e<this._lengths[t]&&(this._lengths[t]=e,this._manuallyRightCut[t]=!0)}},{key:"moveCorner",value:function(e,i){var n;if(i>0&&i<this._lengths[e]){var s=this._corners[e];n=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],this._corners[e]=new Z.g(s.x+i*n.x,s.y+i*n.y),this._lengths[e]=this._lengths[e]-i,this._manuallyLeftCut[e]=!0}}},{key:"calculateWallEndPoints",value:function(){var e,i,n,s,r;if(this._endPoints.length!=this.count)for(this._endPoints=[],e=0;e<this.count;)i=this.getCorner(e),n=new Z.g(i.x,i.y),s=t.WALL_DIRECTION_VECTORS[this.getDirection(e)],r=this.getLength(e),n.x=n.x+s.x*r,n.y=n.y+s.y*r,this._endPoints.push(n),e++}}]),t}();Kc.WALL_DIRECTION_VECTORS=[new Et(1,0,0),new Et(0,1,0),new Et(-1,0,0),new Et(0,-1,0)],Kc.WALL_NORMAL_VECTORS=[new Et(0,1,0),new Et(-1,0,0),new Et(0,-1,0),new Et(1,0,0)];var Xc=function(){function t(){Object(r.a)(this,t),this._tileMatrix=void 0,this._tileMatrixOriginal=void 0,this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._planes=void 0,this._wallHeight=void 0,this._wallThicknessMultiplier=void 0,this._floorThicknessMultiplier=void 0,this._fixedWallHeight=-1,this._floorHeight=0,this._floorHoles=void 0,this._floorHoleMatrix=void 0,this._restrictsDragging=void 0,this._restrictsScaling=!1,this._restrictedScale=1,this._tileMatrix=[],this._tileMatrixOriginal=[],this._planes=[],this._floorHoleMatrix=[],this._wallHeight=3.6,this._wallThicknessMultiplier=1,this._floorThicknessMultiplier=1,this._floorHoles=new Map}return Object(a.a)(t,[{key:"minX",get:function(){return this._minX}},{key:"maxX",get:function(){return this._maxX}},{key:"minY",get:function(){return this._minY}},{key:"maxY",get:function(){return this._maxY}},{key:"tileMapWidth",get:function(){return this._width}},{key:"tileMapHeight",get:function(){return this._height}},{key:"planeCount",get:function(){return this._planes.length}},{key:"floorHeight",get:function(){return-1!=this._fixedWallHeight?this._fixedWallHeight:this._floorHeight}},{key:"wallHeight",get:function(){return-1!=this._fixedWallHeight?this._fixedWallHeight+3.6:this._wallHeight},set:function(t){t<0&&(t=0),this._wallHeight=t}},{key:"wallThicknessMultiplier",get:function(){return this._wallThicknessMultiplier},set:function(t){t<0&&(t=0),this._wallThicknessMultiplier=t}},{key:"floorThicknessMultiplier",get:function(){return this._floorThicknessMultiplier},set:function(t){t<0&&(t=0),this._floorThicknessMultiplier=t}},{key:"dispose",value:function(){this._planes=null,this._tileMatrix=null,this._tileMatrixOriginal=null,this._floorHoleMatrix=null,null!=this._floorHoles&&(this._floorHoles.clear(),this._floorHoles=null)}},{key:"reset",value:function(){this._planes=[],this._tileMatrix=[],this._tileMatrixOriginal=[],this._width=0,this._height=0,this._minX=0,this._maxX=0,this._minY=0,this._maxY=0,this._floorHeight=0,this._floorHoleMatrix=[]}},{key:"initializeTileMap",value:function(e,i){e<0&&(e=0),i<0&&(i=0),this._tileMatrix=[],this._tileMatrixOriginal=[],this._floorHoleMatrix=[];for(var n=0;n<i;){for(var s=[],r=[],a=[],o=0;o<e;)s[o]=t.TILE_BLOCKED,r[o]=t.TILE_BLOCKED,a[o]=!1,o++;this._tileMatrix.push(s),this._tileMatrixOriginal.push(r),this._floorHoleMatrix.push(a),n++}return this._width=e,this._height=i,this._minX=this._width,this._maxX=-1,this._minY=this._height,this._maxY=-1,!0}},{key:"setTileHeight",value:function(t,e,i){var n,s,r,a;if(t>=0&&t<this._width&&e>=0&&e<this._height){if(this._tileMatrix[e][t]=i,i>=0)t<this._minX&&(this._minX=t),t>this._maxX&&(this._maxX=t),e<this._minY&&(this._minY=e),e>this._maxY&&(this._maxY=e);else{if(t==this._minX||t==this._maxX){for(n=!1,s=this._minY;s<this._maxY;){if(this.getTileHeightInternal(t,s)>=0){n=!0;break}s++}n||(t==this._minX&&this._minX++,t==this._maxX&&this._maxX--)}if(e==this._minY||e==this._maxY){for(r=!1,a=this._minX;a<this._maxX;){if(this.getTileHeight(a,e)>=0){r=!0;break}a++}r||(e==this._minY&&this._minY++,e==this._maxY&&this._maxY--)}}return!0}return!1}},{key:"getTileHeight",value:function(e,i){if(e<0||e>=this._width||i<0||i>=this._height)return t.TILE_BLOCKED;var n=this._tileMatrix[i];return void 0===n[e]?0:Math.abs(n[e])}},{key:"getTileHeightOriginal",value:function(e,i){return e<0||e>=this._width||i<0||i>=this._height?t.TILE_BLOCKED:this._floorHoleMatrix[i][e]?t.TILE_HOLE:this._tileMatrixOriginal[i][e]}},{key:"getTileHeightInternal",value:function(e,i){return e<0||e>=this._width||i<0||i>=this._height?t.TILE_BLOCKED:this._tileMatrix[i][e]}},{key:"initializeFromTileData",value:function(){var e,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;for(this._fixedWallHeight=n,i=0;i<this._height;){for(e=0;e<this._width;)void 0===this._tileMatrixOriginal[i]&&(this._tileMatrixOriginal[i]=[]),this._tileMatrixOriginal[i][e]=this._tileMatrix[i][e],e++;i++}var s=t.findEntranceTile(this._tileMatrix);for(i=0;i<this._height;){for(e=0;e<this._width;)void 0===this._floorHoleMatrix[i]&&(this._floorHoleMatrix[i]=[]),this._floorHoleMatrix[i][e]&&this.setTileHeight(e,i,t.TILE_HOLE),e++;i++}return this.initialize(s)}},{key:"initialize",value:function(e){var i=0;null!=e&&(i=this.getTileHeight(e.x,e.y),this.setTileHeight(e.x,e.y,t.TILE_BLOCKED)),this._floorHeight=t.getFloorHeight(this._tileMatrix),this.createWallPlanes();var n,r=[],a=Object(s.a)(this._tileMatrix);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push(o.concat())}}catch(c){a.e(c)}finally{a.f()}t.padHeightMap(r),t.addTileTypes(r),t.unpadHeightMap(r);var u=t.expandFloorTiles(r);return this.extractPlanes(u),null!=e&&(this.setTileHeight(e.x,e.y,i),this.addFloor(new Et(e.x+.5,e.y+.5,i),new Et(-1,0,0),new Et(0,-1,0),!1,!1,!1,!1)),!0}},{key:"generateWallData",value:function(t,e){for(var i,n,s,r,a,o=new Kc,u=[this.extractTopWall.bind(this),this.extractRightWall.bind(this),this.extractBottomWall.bind(this),this.extractLeftWall.bind(this)],c=0,h=new Z.g(t.x,t.y),_=0;_++<1e3;){if(i=!1,n=!1,s=c,(h.x<this.minX||h.x>this.maxX||h.y<this.minY||h.y>this.maxY)&&(i=!0),null==(r=u[c](h,e)))return null;if(a=Math.abs(r.x-h.x)+Math.abs(r.y-h.y),h.x==r.x||h.y==r.y?(c=(c-1+u.length)%u.length,a+=1,n=!0):(c=(c+1)%u.length,a--),o.addWall(h,s,a,i,n),r.x==t.x&&r.y==t.y&&(r.x!=h.x||r.y!=h.y))break;h=r}return 0==o.count?null:o}},{key:"hidePeninsulaWallChains",value:function(t){for(var e,i,n,s,r=0,a=t.count;r<a;){var o=r;for(e=r,i=0,n=!1;!t.getBorder(r)&&r<a;)t.getLeftTurn(r)?i++:i>0&&i--,i>1&&(n=!0),e=r,r++;if(n)for(s=o;s<=e;)t.setHideWall(s,!0),s++;r++}}},{key:"updateWallsNextToHoles",value:function(e){for(var i,n,s,r,a,o,u,c=e.count,h=0;h<c;){if(!e.getHideWall(h)){for(i=e.getCorner(h),n=e.getDirection(h),s=e.getLength(h),r=Kc.WALL_DIRECTION_VECTORS[n],a=Kc.WALL_NORMAL_VECTORS[n],o=0,u=0;u<s;){if(this.getTileHeightInternal(i.x+u*r.x-a.x,i.y+u*r.y-a.y)==t.TILE_HOLE){if(u>0&&0==o){e.setLength(h,u);break}o++}else if(o>0){e.moveCorner(h,o);break}u++}o==s&&e.setHideWall(h,!0)}h++}}},{key:"resolveOriginalWallIndex",value:function(t,e,i){for(var n,s,r,a,o,u,c=Math.min(t.y,e.y),h=Math.max(t.y,e.y),_=Math.min(t.x,e.x),l=Math.max(t.x,e.x),d=i.count,f=0;f<d;){if(n=i.getCorner(f),s=i.getEndPoint(f),t.x==e.x){if(n.x==t.x&&s.x==t.x&&(r=Math.min(n.y,s.y),a=Math.max(n.y,s.y),r<=c&&h<=a))return f}else if(t.y==e.y&&n.y==t.y&&s.y==t.y&&(o=Math.min(n.x,s.x),u=Math.max(n.x,s.x),o<=_&&l<=u))return f;f++}return-1}},{key:"hideOriginallyHiddenWalls",value:function(t,e){for(var i,n,s,r,a,o=t.count,u=0;u<o;)t.getHideWall(u)||(i=t.getCorner(u),n=new Z.g(i.x,i.y),s=Kc.WALL_DIRECTION_VECTORS[t.getDirection(u)],r=t.getLength(u),n.x=n.x+s.x*r,n.y=n.y+s.y*r,(a=this.resolveOriginalWallIndex(i,n,e))>=0?e.getHideWall(a)&&t.setHideWall(u,!0):t.setHideWall(u,!0)),u++}},{key:"checkWallHiding",value:function(t,e){this.hidePeninsulaWallChains(e),this.updateWallsNextToHoles(t),this.hideOriginallyHiddenWalls(t,e)}},{key:"addWalls",value:function(e,i){for(var n=e.count,s=i.count,r=0;r<n;){if(!e.getHideWall(r)){for(var a=e.getCorner(r),o=e.getDirection(r),u=e.getLength(r),c=Kc.WALL_DIRECTION_VECTORS[o],h=Kc.WALL_NORMAL_VECTORS[o],_=-1,l=0;l<u;){var d=this.getTileHeightInternal(a.x+l*c.x+h.x,a.y+l*c.y+h.y);d>=0&&(d<_||_<0)&&(_=d),l++}var f=_,v=new Et(a.x,a.y,f);v=Et.sum(v,Et.product(h,.5)),v=Et.sum(v,Et.product(c,-.5));var g=this.wallHeight+Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,this.floorHeight)-_,O=Et.product(c,-u),y=new Et(0,0,g);v=Et.dif(v,O);var E=this.resolveOriginalWallIndex(a,e.getEndPoint(r),i),p=0,m=0;E>=0?(p=i.getDirection((E+1)%s),m=i.getDirection((E-1+s)%s)):(p=e.getDirection((r+1)%n),m=e.getDirection((r-1+n)%n));var I=null;(p-o+4)%4==3?I=Kc.WALL_NORMAL_VECTORS[p]:(o-m+4)%4==3&&(I=Kc.WALL_NORMAL_VECTORS[m]);var b=e.getLeftTurn(r),T=e.getLeftTurn((r-1+n)%n),R=e.getHideWall((r+1)%n),k=e.getManuallyLeftCut(r),A=e.getManuallyRightCut(r);this.addWall(v,O,y,I,!T||k,!b||A,!R)}r++}}},{key:"createWallPlanes",value:function(){var e,i,n,s=this._tileMatrix;if(null==s)return!1;var r=s.length,a=0;if(0==r)return!1;for(e=0;e<r;){if(null==(n=s[e])||0==n.length)return!1;a=a>0?Math.min(a,n.length):n.length,e++}var o=Math.min(t.MAX_WALL_ADDITIONAL_HEIGHT,-1!=this._fixedWallHeight?this._fixedWallHeight:t.getFloorHeight(s)),u=this.minX,c=this.minY;for(c=this.minY;c<=this.maxY;){if(this.getTileHeightInternal(u,c)>t.TILE_HOLE){c--;break}c++}if(c>this.maxY)return!1;var h=new Z.g(u,c),_=this.generateWallData(h,!0),l=this.generateWallData(h,!1);for(null!=_&&(_.count,l.count,this.checkWallHiding(_,l),this.addWalls(_,l)),i=0;i<this.tileMapHeight;){for(e=0;e<this.tileMapWidth;)this.getTileHeightInternal(e,i)<0&&this.setTileHeight(e,i,-(o+this.wallHeight)),e++;i++}return!0}},{key:"extractTopWall",value:function(e,i){if(null==e)return null;var n=1,s=t.TILE_HOLE;for(i||(s=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x+n,e.y)>s)return new Z.g(e.x+n-1,e.y);if(this.getTileHeightInternal(e.x+n,e.y+1)<=s)return new Z.g(e.x+n,e.y+1);n++}return null}},{key:"extractRightWall",value:function(e,i){if(null==e)return null;var n=1,s=t.TILE_HOLE;for(i||(s=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y+n)>s)return new Z.g(e.x,e.y+(n-1));if(this.getTileHeightInternal(e.x-1,e.y+n)<=s)return new Z.g(e.x-1,e.y+n);n++}return null}},{key:"extractBottomWall",value:function(e,i){if(null==e)return null;var n=1,s=t.TILE_HOLE;for(i||(s=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x-n,e.y)>s)return new Z.g(e.x-(n-1),e.y);if(this.getTileHeightInternal(e.x-n,e.y-1)<=s)return new Z.g(e.x-n,e.y-1);n++}return null}},{key:"extractLeftWall",value:function(e,i){if(null==e)return null;var n=1,s=t.TILE_HOLE;for(i||(s=t.TILE_BLOCKED);n<1e3;){if(this.getTileHeightInternal(e.x,e.y-n)>s)return new Z.g(e.x,e.y-(n-1));if(this.getTileHeightInternal(e.x+1,e.y-n)<=s)return new Z.g(e.x+1,e.y-n);n++}return null}},{key:"addWall",value:function(e,i,n,s,r,a,o){this.addPlane(Wc.PLANE_WALL,e,i,n,[s]);var u=t.WALL_THICKNESS*this._wallThicknessMultiplier,c=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,h=Et.crossProduct(i,n),_=Et.product(h,1/h.length*-u);if(this.addPlane(Wc.PLANE_WALL,Et.sum(e,n),i,_,[h,s]),r&&this.addPlane(Wc.PLANE_WALL,Et.sum(Et.sum(e,i),n),Et.product(n,-(n.length+c)/n.length),_,[h,s]),a&&(this.addPlane(Wc.PLANE_WALL,Et.sum(e,Et.product(n,-c/n.length)),Et.product(n,(n.length+c)/n.length),_,[h,s]),o)){var l=Et.product(i,u/i.length);this.addPlane(Wc.PLANE_WALL,Et.sum(Et.sum(e,n),Et.product(l,-1)),l,_,[h,i,s])}}},{key:"addFloor",value:function(e,i,n,s,r,a,o){var u,c,h;null!=this.addPlane(Wc.PLANE_FLOOR,e,i,n)&&(u=t.FLOOR_THICKNESS*this._floorThicknessMultiplier,c=new Et(0,0,u),h=Et.dif(e,c),a&&this.addPlane(Wc.PLANE_FLOOR,h,i,c),o&&this.addPlane(Wc.PLANE_FLOOR,Et.sum(h,Et.sum(i,n)),Et.product(i,-1),c),s&&this.addPlane(Wc.PLANE_FLOOR,Et.sum(h,n),Et.product(n,-1),c),r&&this.addPlane(Wc.PLANE_FLOOR,Et.sum(h,i),n,c))}},{key:"initializeFromMapData",value:function(t){if(!t)return!1;this.reset(),this.resetFloorHoles();var e=t.width,i=t.height,n=t.wallHeight,s=t.fixedWallsHeight;if(this.initializeTileMap(e,i),t.tileMap)for(var r=0;r<t.tileMap.length;){var a=t.tileMap[r];if(a)for(var o=0;o<a.length;){var u=a[o];u&&this.setTileHeight(o,r,u.height),o++}r++}if(t.holeMap&&t.holeMap.length){for(var c=0;c<t.holeMap.length;){var h=t.holeMap[c];h&&(this.addFloorHole(h.id,h.x,h.y,h.width,h.height),c++)}this.initializeHoleMap()}return this.wallHeight=n,this.restrictsDragging=t.restrictsDragging,this.restrictsScaling=t.restrictsScaling,this.restrictedScale=t.restrictedScale,this.initializeFromTileData(s),!0}},{key:"addPlane",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(0==i.length||0==n.length)return null;var r=new Wc(t,e,i,n,s);return this._planes.push(r),r}},{key:"getMapData",value:function(){var t=new zc;t.width=this._width,t.height=this._height,t.wallHeight=this._wallHeight,t.fixedWallsHeight=this._fixedWallHeight,t.dimensions.minX=this.minX,t.dimensions.maxX=this.maxX,t.dimensions.minY=this.minY,t.dimensions.maxY=this.maxY,t.restrictsDragging=this.restrictsDragging,t.restrictsScaling=this.restrictsScaling,t.restrictedScale=this.restrictedScale;for(var e=0;e<this._height;){for(var i=[],r=this._tileMatrixOriginal[e],a=0;a<this._width;){var o=r[a];i.push({height:o}),a++}t.tileMap.push(i),e++}var u,c=Object(s.a)(this._floorHoles.entries());try{for(c.s();!(u=c.n()).done;){var h=Object(n.a)(u.value,2),_=h[0],l=h[1];l&&t.holeMap.push({id:_,x:l.x,y:l.y,width:l.width,height:l.height})}}catch(d){c.e(d)}finally{c.f()}return t}},{key:"getPlaneLocation",value:function(t){if(t<0||t>=this.planeCount)return null;var e=this._planes[t];return e?e.loc:null}},{key:"getPlaneNormal",value:function(t){if(t<0||t>=this.planeCount)return null;var e=this._planes[t];return e?e.normal:null}},{key:"getPlaneLeftSide",value:function(t){if(t<0||t>=this.planeCount)return null;var e=this._planes[t];return e?e.leftSide:null}},{key:"getPlaneRightSide",value:function(t){if(t<0||t>=this.planeCount)return null;var e=this._planes[t];return e?e.rightSide:null}},{key:"getPlaneNormalDirection",value:function(t){if(t<0||t>=this.planeCount)return null;var e=this._planes[t];return e?e.normalDirection:null}},{key:"getPlaneSecondaryNormals",value:function(t){var e,i;if(t<0||t>=this.planeCount)return null;var n=this._planes[t];if(null!=n){for(e=[],i=0;i<n.secondaryNormalCount;)e.push(n.getSecondaryNormal(i)),i++;return e}return null}},{key:"getPlaneType",value:function(t){if(t<0||t>=this.planeCount)return Wc.PLANE_UNDEFINED;var e=this._planes[t];return e?e.type:Wc.PLANE_UNDEFINED}},{key:"getPlaneMaskCount",value:function(t){if(t<0||t>=this.planeCount)return 0;var e=this._planes[t];return e?e.maskCount:0}},{key:"getPlaneMaskLeftSideLoc",value:function(t,e){if(t<0||t>=this.planeCount)return-1;var i=this._planes[t];return i?i.getMaskLeftSideLoc(e):-1}},{key:"getPlaneMaskRightSideLoc",value:function(t,e){if(t<0||t>=this.planeCount)return-1;var i=this._planes[t];return i?i.getMaskRightSideLoc(e):-1}},{key:"getPlaneMaskLeftSideLength",value:function(t,e){if(t<0||t>=this.planeCount)return-1;var i=this._planes[t];return i?i.getMaskLeftSideLength(e):-1}},{key:"getPlaneMaskRightSideLength",value:function(t,e){if(t<0||t>=this.planeCount)return-1;var i=this._planes[t];return i?i.getMaskRightSideLength(e):-1}},{key:"addFloorHole",value:function(t,e,i,n,s){this.removeFloorHole(t),this._floorHoles.set(t,new Vc(e,i,n,s))}},{key:"removeFloorHole",value:function(t){this._floorHoles.delete(t)}},{key:"resetFloorHoles",value:function(){this._floorHoles.clear()}},{key:"initializeHoleMap",value:function(){var t,e,i,n,r,a,o,u;for(e=0;e<this._height;){for(i=this._floorHoleMatrix[e],t=0;t<this._width;)i[t]=!1,t++;e++}var c,h=Object(s.a)(this._floorHoles.values());try{for(h.s();!(c=h.n()).done;){if(null!=(n=c.value))for(r=n.x,a=n.x+n.width-1,o=n.y,u=n.y+n.height-1,r=r<0?0:r,a=a>=this._width?this._width-1:a,o=o<0?0:o,u=u>=this._height?this._height-1:u,e=o;e<=u;){for(i=this._floorHoleMatrix[e],t=r;t<=a;)i[t]=!0,t++;e++}}}catch(_){h.e(_)}finally{h.f()}}},{key:"extractPlanes",value:function(t){for(var e,i,n,s,r,a,o,u,c,h,_,l,d,f,v,g=t.length,O=t[0].length,y=[],E=0;E<g;)y[E]=[],E++;for(var p=0;p<g;){for(e=0;e<O;){if((i=t[p][e])<0||y[p][e]);else{for(r=0==e||!(t[p][e-1]==i),a=0==p||!(t[p-1][e]==i),n=e+1;n<O&&!(t[p][n]!=i||y[p][n]||p>0&&t[p-1][n]==i==a);)n++;for(o=n==O||!(t[p][n]==i),_=!1,s=p+1;s<g&&!_;){for(_=(u=!(t[s][e]==i))||e>0&&t[s][e-1]==i==r||n<O&&t[s][n]==i==o,c=e;c<n;){if(t[s][c]==i==u){_=!0,n=c;break}c++}if(_)break;s++}for(u=u||s==g,o=n==O||!(t[p][n]==i),h=p;h<s;){for(c=e;c<n;)y[h][c]=!0,c++;h++}l=e/4-.5,d=p/4-.5,f=(n-e)/4,v=(s-p)/4,this.addFloor(new Et(l+f,d+v,i/4),new Et(-f,0,0),new Et(0,-v,0),o,r,u,a)}e++}p++}}},{key:"restrictsDragging",get:function(){return this._restrictsDragging},set:function(t){this._restrictsDragging=t}},{key:"restrictsScaling",get:function(){return this._restrictsScaling},set:function(t){this._restrictsScaling=t}},{key:"restrictedScale",get:function(){return this._restrictedScale},set:function(t){this._restrictedScale=t}}],[{key:"getFloorHeight",value:function(t){var e=t.length;if(!e)return 0;for(var i=0,n=0;n<e;){for(var s=t[n],r=0;r<s.length;){var a=s[r];a>i&&(i=a),r++}n++}return i}},{key:"findEntranceTile",value:function(t){if(!t)return null;var e=t.length;if(!e)return null;for(var i=[],n=0;n<e;){var s=t[n];if(!s||!s.length)return null;for(var r=0;r<s.length;){if(s[r]>=0){i.push(r);break}r++}i.length<n+1&&i.push(s.length+1),n++}for(n=1;n<i.length-1;){if(Math.trunc(i[n])<=Math.trunc(i[n-1])-1&&Math.trunc(i[n])<=Math.trunc(i[n+1])-1)return new Z.g(Math.trunc(0|i[n]),n);n++}return null}},{key:"expandFloorTiles",value:function(t){var e,i,n,s,r,a,o,u,c,h,_,l,d=t.length,f=t[0].length,v=[];for(i=0;i<4*d;)v[i]=[],i++;var g=0;for(i=0;i<d;){for(r=0,e=0;e<f;){if((a=t[i][e])<0||a<=255)for(s=0;s<4;){for(n=0;n<4;)void 0===v[g+s]&&(v[g+s]=[]),v[g+s][r+n]=a<0?a:4*a,n++;s++}else{for(u=(o=4*(255&a))+3*(a>>11&1),c=o+3*(a>>10&1),h=o+3*(a>>9&1),_=o+3*(a>>8&1),n=0;n<3;)l=n+1,v[g][r+n]=(u*(3-n)+c*n)/3,v[g+3][r+l]=(h*(3-l)+_*l)/3,v[g+l][r]=(u*(3-l)+h*l)/3,v[g+n][r+3]=(c*(3-n)+_*n)/3,n++;v[g+1][r+1]=u>o?o+2:o+1,v[g+1][r+2]=c>o?o+2:o+1,v[g+2][r+1]=h>o?o+2:o+1,v[g+2][r+2]=_>o?o+2:o+1}r+=4,e++}g+=4,i++}return v}},{key:"addTileTypes",value:function(t){var e,i,n,s,r,a,o,u,c,h,_,l,d=t.length-1,f=t[0].length-1;for(i=1;i<d;){for(e=1;e<f;)(n=t[i][e])<0||(s=255&t[i-1][e-1],r=255&t[i-1][e],a=255&t[i-1][e+1],o=255&t[i][e-1],u=255&t[i][e+1],c=255&t[i+1][e-1],h=255&t[i+1][e],n-1,15==(l=(s==(_=n+1)||r==_||o==_?8:0)|(a==_||r==_||u==_?4:0)|(c==_||h==_||o==_?2:0)|((255&t[i+1][e+1])==_||h==_||u==_?1:0))&&(l=0),t[i][e]=n|l<<8),e++;i++}}},{key:"unpadHeightMap",value:function(t){t.shift(),t.pop();var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.shift(),n.pop()}}catch(r){i.e(r)}finally{i.f()}}},{key:"padHeightMap",value:function(e){var i,n=[],r=[],a=Object(s.a)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.push(t.TILE_BLOCKED),o.unshift(t.TILE_BLOCKED)}}catch(h){a.e(h)}finally{a.f()}var u,c=Object(s.a)(e[0]);try{for(c.s();!(u=c.n()).done;){u.value;n.push(t.TILE_BLOCKED),r.push(t.TILE_BLOCKED)}}catch(h){c.e(h)}finally{c.f()}e.push(r),e.unshift(n)}}]),t}();Xc.FLOOR_THICKNESS=.25,Xc.WALL_THICKNESS=.25,Xc.MAX_WALL_ADDITIONAL_HEIGHT=20,Xc.TILE_BLOCKED=-110,Xc.TILE_HOLE=-100;var qc=function(){function t(){Object(r.a)(this,t),this._model=void 0,this._width=void 0,this._height=void 0,this._heightMap=void 0,this._wallHeight=void 0,this._scale=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._model=null,this._width=0,this._height=0,this._wallHeight=-1,this._heightMap=[],this._scale=64,this._model=null,!0}},{key:"parse",value:function(t){if(!t)return!1;var e=t.readBoolean(),i=t.readInt(),n=t.readString();return this.parseExplicitly(n,i,e)}},{key:"parseModel",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.parseExplicitly(t,e,i)}},{key:"parseExplicitly",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._scale=i?32:64,this._wallHeight=e,this._model=t;for(var n=this._model.split("\r"),s=n.length,r=0,a=0;a<s;){var o=n[a];o.length>r&&(r=o.length),a++}for(this._heightMap=[],a=0;a<s;){for(var u=[],c=0;c<r;)u.push(Xc.TILE_BLOCKED),c++;this._heightMap.push(u),a++}for(this._width=r,this._height=s,a=0;a<s;){var h=this._heightMap[a],_=n[a];if(_.length>0)for(var l=0;l<_.length;){var d=_.charAt(l),f=Xc.TILE_BLOCKED;"x"!==d&&"X"!==d&&(f=parseInt(d,36)),h[l]=f,l++}a++}return!0}},{key:"getHeight",value:function(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return-110;var i=this._heightMap[e];if(void 0===i)return-110;var n=i[t];return void 0===n?-110:n}},{key:"model",get:function(){return this._model}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"heightMap",get:function(){return this._heightMap}},{key:"wallHeight",get:function(){return this._wallHeight}},{key:"scale",get:function(){return this._scale}}]),t}(),Qc=function(){function t(){Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._direction=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._x=0,this._y=0,this._direction=0,!0}},{key:"parse",value:function(t){return!!t&&(this._x=t.readInt(),this._y=t.readInt(),this._direction=t.readInt(),!0)}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"direction",get:function(){return this._direction}}]),t}(),Zc=function(){function t(){Object(r.a)(this,t),this._width=void 0,this._height=void 0,this._heights=void 0}return Object(a.a)(t,[{key:"getTileHeight",value:function(e,i){return e<0||e>=this._width||i<0||i>=this._height?-1:t.decodeTileHeight(this._heights[i*this._width+e])}},{key:"getStackingBlocked",value:function(e,i){return e<0||e>=this._width||i<0||i>=this._height||t.decodeIsStackingBlocked(this._heights[i*this._width+e])}},{key:"isRoomTile",value:function(e,i){return!(e<0||e>=this._width||i<0||i>=this._height)&&t.decodeIsRoomTile(this._heights[i*this._width+e])}},{key:"flush",value:function(){return this._width=0,this._height=0,this._heights=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._width=t.readInt();var e=t.readInt();this._height=e/this._width;for(var i=0;i<e;)this._heights[i]=t.readShort(),i++;return!0}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"heights",get:function(){return this._heights}}],[{key:"decodeTileHeight",value:function(t){return t<0?-1:(16383&t)/256}},{key:"decodeIsStackingBlocked",value:function(t){return!!(16384&t)}},{key:"decodeIsRoomTile",value:function(t){return t>=0}}]),t}(),Jc=function(){function t(){Object(r.a)(this,t),this._wrapper=void 0,this._count=void 0,this._x=void 0,this._y=void 0,this._value=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._wrapper=null,this._count=0,this._x=0,this._y=0,this._value=0,!0}},{key:"tileHeight",value:function(){return Zc.decodeTileHeight(this._value)}},{key:"isStackingBlocked",value:function(){return Zc.decodeIsStackingBlocked(this._value)}},{key:"isRoomTile",value:function(){return Zc.decodeIsRoomTile(this._value)}},{key:"next",value:function(){return!!this._count&&(this._count--,this._x=this._wrapper.readByte(),this._y=this._wrapper.readByte(),this._value=this._wrapper.readShort(),!0)}},{key:"parse",value:function(t){return!!t&&(this._wrapper=t,this._count=t.readByte(),!0)}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"height",get:function(){return this._value}}]),t}(),$c=function(){function t(){Object(r.a)(this,t),this._blockedTilesMap=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._blockedTilesMap=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readInt();this._blockedTilesMap[n]||(this._blockedTilesMap[n]=[]),this._blockedTilesMap[n][i]=!0,e--}return!0}},{key:"blockedTilesMap",get:function(){return this._blockedTilesMap}}]),t}(),th=function(){function t(){Object(r.a)(this,t),this._floorType=void 0,this._wallType=void 0,this._landscapeType=void 0,this._landscapeAnimation=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._floorType=null,this._wallType=null,this._landscapeType=null,this._landscapeAnimation=null,!0}},{key:"parse",value:function(t){if(!t)return!1;var e=t.readString(),i=t.readString();switch(e){case"floor":this._floorType=i;break;case"wallpaper":this._wallType=i;break;case"landscape":this._landscapeType=i;break;case"landscapeanim":this._landscapeAnimation=i}return!0}},{key:"floorType",get:function(){return this._floorType}},{key:"wallType",get:function(){return this._wallType}},{key:"landscapeType",get:function(){return this._landscapeType}},{key:"landscapeAnimation",get:function(){return this._landscapeAnimation}}]),t}(),eh=function(){function t(){Object(r.a)(this,t),this._name=void 0,this._roomId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._name=null,this._roomId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._name=t.readString(),this._roomId=t.readInt(),!0)}},{key:"name",get:function(){return this._name}},{key:"roomId",get:function(){return this._roomId}}]),t}(),ih=function(){function t(){Object(r.a)(this,t),this._hideWalls=void 0,this._thicknessWall=void 0,this._thicknessFloor=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._hideWalls=!1,this._thicknessWall=0,this._thicknessFloor=0,!0}},{key:"parse",value:function(t){if(!t)return!1;this._hideWalls=t.readBoolean();var e=t.readInt(),i=t.readInt();return e=e<-2?-2:e>1?1:e,i=i<-2?-2:i>1?1:i,this._thicknessWall=Math.pow(2,e),this._thicknessFloor=Math.pow(2,i),!0}},{key:"hideWalls",get:function(){return this._hideWalls}},{key:"thicknessWall",get:function(){return this._thicknessWall}},{key:"thicknessFloor",get:function(){return this._thicknessFloor}}]),t}(),nh=function(){function t(){Object(r.a)(this,t),this._petId=void 0,this._roomIndex=void 0,this._gainedExperience=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._petId=-1,this._roomIndex=-1,this._gainedExperience=0,!0}},{key:"parse",value:function(t){return!!t&&(this._petId=t.readInt(),this._roomIndex=t.readInt(),this._gainedExperience=t.readInt(),!0)}},{key:"petId",get:function(){return this._petId}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"gainedExperience",get:function(){return this._gainedExperience}}]),t}(),sh=function(){function t(){Object(r.a)(this,t),this._roomIndex=void 0,this._petId=void 0,this._figureData=void 0,this._hasSaddle=void 0,this._isRiding=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._roomIndex=t.readInt(),this._petId=t.readInt(),this._figureData=new fs(t),this._hasSaddle=t.readBoolean(),this._isRiding=t.readBoolean(),!0)}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"petId",get:function(){return this._petId}},{key:"figureData",get:function(){return this._figureData}},{key:"hasSaddle",get:function(){return this._hasSaddle}},{key:"isRiding",get:function(){return this._isRiding}}]),t}(),rh=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._name=void 0,this._level=void 0,this._maximumLevel=void 0,this._experience=void 0,this._energy=void 0,this._happyness=void 0,this._levelExperienceGoal=void 0,this._maximumEnergy=void 0,this._maximumHappyness=void 0,this._respect=void 0,this._ownerId=void 0,this._ownerName=void 0,this._age=void 0,this._rarityLevel=void 0,this._saddle=void 0,this._rider=void 0,this._breedable=void 0,this._fullyGrown=void 0,this._dead=void 0,this._maximumTimeToLive=void 0,this._remainingTimeToLive=void 0,this._remainingGrowTime=void 0,this._skillThresholds=void 0,this._publiclyRideable=void 0,this._unknownRarity=void 0,this._publiclyBreedable=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._id=-1,this._skillThresholds=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._id=t.readInt(),this._name=t.readString(),this._level=t.readInt(),this._maximumLevel=t.readInt(),this._experience=t.readInt(),this._levelExperienceGoal=t.readInt(),this._energy=t.readInt(),this._maximumEnergy=t.readInt(),this._happyness=t.readInt(),this._maximumHappyness=t.readInt(),this._respect=t.readInt(),this._ownerId=t.readInt(),this._age=t.readInt(),this._ownerName=t.readString(),this._rarityLevel=t.readInt(),this._saddle=t.readBoolean(),this._rider=t.readBoolean();for(var e=t.readInt();e>0;)this._skillThresholds.push(t.readInt()),e--;return this._skillThresholds.sort(),this._publiclyRideable=t.readInt(),this._breedable=t.readBoolean(),this._fullyGrown=t.readBoolean(),this._dead=t.readBoolean(),this._unknownRarity=t.readInt(),this._maximumTimeToLive=t.readInt(),this._remainingTimeToLive=t.readInt(),this._remainingGrowTime=t.readInt(),this._publiclyBreedable=t.readBoolean(),!0}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"level",get:function(){return this._level}},{key:"maximumLevel",get:function(){return this._maximumLevel}},{key:"experience",get:function(){return this._experience}},{key:"energy",get:function(){return this._energy}},{key:"happyness",get:function(){return this._happyness}},{key:"levelExperienceGoal",get:function(){return this._levelExperienceGoal}},{key:"maximumEnergy",get:function(){return this._maximumEnergy}},{key:"maximumHappyness",get:function(){return this._maximumHappyness}},{key:"respect",get:function(){return this._respect}},{key:"ownerId",get:function(){return this._ownerId}},{key:"ownerName",get:function(){return this._ownerName}},{key:"age",get:function(){return this._age}},{key:"rarityLevel",get:function(){return this._rarityLevel}},{key:"saddle",get:function(){return this._saddle}},{key:"rider",get:function(){return this._rider}},{key:"breedable",get:function(){return this._breedable}},{key:"fullyGrown",get:function(){return this._fullyGrown}},{key:"dead",get:function(){return this._dead}},{key:"maximumTimeToLive",get:function(){return this._maximumTimeToLive}},{key:"remainingTimeToLive",get:function(){return this._remainingTimeToLive}},{key:"remainingGrowTime",get:function(){return this._remainingGrowTime}},{key:"skillTresholds",get:function(){return this._skillThresholds}},{key:"publiclyRideable",get:function(){return this._publiclyRideable}},{key:"unknownRarity",get:function(){return this._unknownRarity}},{key:"publiclyBreedable",get:function(){return this._publiclyBreedable}}]),t}(),ah=function(){function t(){Object(r.a)(this,t),this._roomIndex=void 0,this._petId=void 0,this._canBreed=void 0,this._canHarvest=void 0,this._canRevive=void 0,this._hasBreedingPermission=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomIndex=-1,this._petId=-1,this._canBreed=!1,this._canHarvest=!1,this._canRevive=!1,this._hasBreedingPermission=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._roomIndex=t.readInt(),this._petId=t.readInt(),this._canBreed=t.readBoolean(),this._canHarvest=t.readBoolean(),this._canRevive=t.readBoolean(),this._hasBreedingPermission=t.readBoolean(),!0)}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"petId",get:function(){return this._petId}},{key:"canBreed",get:function(){return this._canBreed}},{key:"canHarvest",get:function(){return this._canHarvest}},{key:"canRevive",get:function(){return this._canRevive}},{key:"hasBreedingPermission",get:function(){return this._hasBreedingPermission}}]),t}(),oh=function(){function t(){Object(r.a)(this,t),this._isPlaying=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._isPlaying=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._isPlaying=t.readBoolean(),!0)}},{key:"isPlaying",get:function(){return this._isPlaying}}]),t}(),uh=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!0}}]),t}(),ch=function(){function t(){Object(r.a)(this,t),this._seconds=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._seconds=0,!0}},{key:"parse",value:function(t){return!!t&&(this._seconds=t.readInt(),!0)}},{key:"seconds",get:function(){return this._seconds}}]),t}(),hh=function(){function t(){Object(r.a)(this,t),this._seconds=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._seconds=0,!0}},{key:"parse",value:function(t){return!!t&&(this._seconds=t.readInt(),!0)}},{key:"seconds",get:function(){return this._seconds}}]),t}(),_h=function(){function t(){Object(r.a)(this,t),this._roomIndex=void 0,this._message=void 0,this._gesture=void 0,this._bubble=void 0,this._urls=void 0,this._messageLength=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomIndex=null,this._message=null,this._gesture=0,this._bubble=0,this._urls=[],this._messageLength=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomIndex=t.readInt(),this._message=t.readString(),this._gesture=t.readInt(),this._bubble=t.readInt(),this.parseUrls(t),this._messageLength=t.readInt(),!0)}},{key:"parseUrls",value:function(t){if(!t)return!1;this._urls=[];for(var e=t.readInt();e>0;)this._urls.push(t.readString()),e--;return!0}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"message",get:function(){return this._message}},{key:"gesture",get:function(){return this._gesture}},{key:"bubble",get:function(){return this._bubble}},{key:"urls",get:function(){return this._urls}},{key:"messageLength",get:function(){return this._messageLength}}]),t}(),lh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._isTyping=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._isTyping=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._isTyping=1===t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"isTyping",get:function(){return this._isTyping}}]),t}(),dh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._danceId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._danceId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._danceId=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"danceId",get:function(){return this._danceId}}]),t}(),fh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._effectId=void 0,this._delay=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._effectId=0,this._delay=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._effectId=t.readInt(),this._delay=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"effectId",get:function(){return this._effectId}},{key:"delay",get:function(){return this._delay}}]),t}(),vh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._expression=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._expression=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._expression=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"expression",get:function(){return this._expression}}]),t}(),gh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._handId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._handId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._handId=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"handId",get:function(){return this._handId}}]),t}(),Oh=function(){function t(){Object(r.a)(this,t),this._giverUserId=void 0,this._handItemType=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._giverUserId=-1,this._handItemType=-1,!0}},{key:"parse",value:function(t){return!!t&&(this._giverUserId=t.readInt(),this._handItemType=t.readInt(),!0)}},{key:"giverUserId",get:function(){return this._giverUserId}},{key:"handItemType",get:function(){return this._handItemType}}]),t}(),yh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._isIdle=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._isIdle=!1,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._isIdle=t.readBoolean(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"isIdle",get:function(){return this._isIdle}}]),t}(),Eh=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._figure=void 0,this._gender=void 0,this._motto=void 0,this._achievementScore=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._figure=null,this._gender="M",this._motto=null,this._achievementScore=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._figure=t.readString(),this._gender=t.readString().toLocaleUpperCase(),this._motto=t.readString(),this._achievementScore=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"motto",get:function(){return this._motto}},{key:"achievementScore",get:function(){return this._achievementScore}}]),t}(),ph=function(){function t(){Object(r.a)(this,t),this._unitId=void 0,this._value=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,this._value=0,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=t.readInt(),this._value=t.readInt(),!0)}},{key:"unitId",get:function(){return this._unitId}},{key:"value",get:function(){return this._value}}]),t}(),mh=Object(a.a)((function t(){Object(r.a)(this,t)}));mh.USER=1,mh.PET=2,mh.BOT=3,mh.RENTABLE_BOT=4;var Ih=function(){function t(e){Object(r.a)(this,t),this._roomIndex=0,this._x=0,this._y=0,this._z=0,this._dir=0,this._name="",this._userType=0,this._sex="",this._figure="",this._custom="",this._activityPoints=0,this._webID=0,this._groupID=0,this._groupStatus=0,this._groupName="",this._subType="",this._ownerId=0,this._ownerName="",this._rarityLevel=0,this._hasSaddle=!1,this._isRiding=!1,this._canBreed=!1,this._canHarvest=!1,this._canRevive=!1,this._hasBreedingPermission=!1,this._petLevel=0,this._petPosture="",this._botSkills=[],this._isModerator=!1,this._isReadOnly=!1,this._roomIndex=e}return Object(a.a)(t,[{key:"setReadOnly",value:function(){this._isReadOnly=!0}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"x",get:function(){return this._x},set:function(t){this._isReadOnly||(this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){this._isReadOnly||(this._y=t)}},{key:"z",get:function(){return this._z},set:function(t){this._isReadOnly||(this._z=t)}},{key:"dir",get:function(){return this._dir},set:function(t){this._isReadOnly||(this._dir=t)}},{key:"name",get:function(){return this._name},set:function(t){this._isReadOnly||(this._name=t)}},{key:"userType",get:function(){return this._userType},set:function(t){this._isReadOnly||(this._userType=t)}},{key:"sex",get:function(){return this._sex},set:function(t){this._isReadOnly||(this._sex=t)}},{key:"figure",get:function(){return this._figure},set:function(t){this._isReadOnly||(this._figure=t)}},{key:"custom",get:function(){return this._custom},set:function(t){this._isReadOnly||(this._custom=t)}},{key:"activityPoints",get:function(){return this._activityPoints},set:function(t){this._isReadOnly||(this._activityPoints=t)}},{key:"webID",get:function(){return this._webID},set:function(t){this._isReadOnly||(this._webID=t)}},{key:"groupID",get:function(){return this._groupID},set:function(t){this._isReadOnly||(this._groupID=t)}},{key:"groupName",get:function(){return this._groupName},set:function(t){this._isReadOnly||(this._groupName=t)}},{key:"groupStatus",get:function(){return this._groupStatus},set:function(t){this._isReadOnly||(this._groupStatus=t)}},{key:"subType",get:function(){return this._subType},set:function(t){this._isReadOnly||(this._subType=t)}},{key:"ownerId",get:function(){return this._ownerId},set:function(t){this._isReadOnly||(this._ownerId=t)}},{key:"ownerName",get:function(){return this._ownerName},set:function(t){this._isReadOnly||(this._ownerName=t)}},{key:"rarityLevel",get:function(){return this._rarityLevel},set:function(t){this._isReadOnly||(this._rarityLevel=t)}},{key:"hasSaddle",get:function(){return this._hasSaddle},set:function(t){this._isReadOnly||(this._hasSaddle=t)}},{key:"isRiding",get:function(){return this._isRiding},set:function(t){this._isReadOnly||(this._isRiding=t)}},{key:"canBreed",get:function(){return this._canBreed},set:function(t){this._isReadOnly||(this._canBreed=t)}},{key:"canHarvest",get:function(){return this._canHarvest},set:function(t){this._isReadOnly||(this._canHarvest=t)}},{key:"canRevive",get:function(){return this._canRevive},set:function(t){this._isReadOnly||(this._canRevive=t)}},{key:"hasBreedingPermission",get:function(){return this._hasBreedingPermission},set:function(t){this._isReadOnly||(this._hasBreedingPermission=t)}},{key:"petLevel",get:function(){return this._petLevel},set:function(t){this._isReadOnly||(this._petLevel=t)}},{key:"petPosture",get:function(){return this._petPosture},set:function(t){this._isReadOnly||(this._petPosture=t)}},{key:"botSkills",get:function(){return this._botSkills},set:function(t){this._botSkills=t}},{key:"isModerator",get:function(){return this._isModerator},set:function(t){this._isReadOnly||(this._isModerator=t)}}]),t}();Ih.M="M",Ih.F="F";var bh=function(){function t(){Object(r.a)(this,t),this._users=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._users=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._users=[];for(var e=t.readInt(),i=0;i<e;){var n=t.readInt(),s=t.readString(),r=t.readString(),a=t.readString(),o=t.readInt(),u=t.readInt(),c=t.readInt(),h=parseFloat(t.readString()),_=t.readInt(),l=t.readInt(),d=new Ih(o);if(d.dir=_,d.name=s,d.custom=r,d.x=u,d.y=c,d.z=h,this._users.push(d),1===l){d.webID=n,d.userType=mh.USER,d.sex=this.resolveSex(t.readString()),d.groupID=t.readInt(),d.groupStatus=t.readInt(),d.groupName=t.readString();var f=t.readString();""!==f&&(a=this.convertSwimFigure(f,a,d.sex)),d.figure=a,d.activityPoints=t.readInt(),d.isModerator=t.readBoolean()}else if(2===l)d.userType=mh.PET,d.figure=a,d.webID=n,d.subType=t.readInt().toString(),d.ownerId=t.readInt(),d.ownerName=t.readString(),d.rarityLevel=t.readInt(),d.hasSaddle=t.readBoolean(),d.isRiding=t.readBoolean(),d.canBreed=t.readBoolean(),d.canHarvest=t.readBoolean(),d.canRevive=t.readBoolean(),d.hasBreedingPermission=t.readBoolean(),d.petLevel=t.readInt(),d.petPosture=t.readString();else if(3===l)d.userType=mh.BOT,d.webID=-1*o,-1===a.indexOf("/")?d.figure=a:d.figure="hr-100-.hd-180-1.ch-876-66.lg-270-94.sh-300-64",d.sex=Ih.M;else if(4===l){d.userType=mh.RENTABLE_BOT,d.webID=n,d.sex=this.resolveSex(t.readString()),d.figure=a,d.ownerId=t.readInt(),d.ownerName=t.readString();var v=t.readInt();if(v){for(var g=[],O=0;O<v;)g.push(t.readShort()),O++;d.botSkills=g}}i++}return!0}},{key:"resolveSex",value:function(t){return"f"===t.substr(0,1).toLowerCase()?Ih.F:Ih.M}},{key:"convertSwimFigure",value:function(t,e,i){for(var n=e.split("."),s=1,r=1,a=1,o=0;o<n.length;){var u=n[o].split("-");if(u.length>2)"hd"===u[0]&&(s=parseInt(u[2]));o++}var c=t.split("=");if(c.length>1){var h=c[1].split("/"),_=(h[0],h[1]);a="F"===i?10010:10011,r=1e4+["238,238,238","250,56,49","253,146,160","42,199,210","53,51,44","239,255,146","198,255,152","255,146,90","157,89,126","182,243,255","109,255,51","51,120,201","255,182,49","223,161,233","249,251,50","202,175,143","197,198,197","71,98,61","138,131,97","255,140,51","84,198,39","30,108,153","152,79,136","119,200,255","255,192,142","60,75,135","124,44,71","215,255,227","143,63,28","255,99,147","31,155,121","253,255,51"].indexOf(_)+1}return e+".bds-10001-"+s+".ss-"+a+"-"+r}},{key:"users",get:function(){return this._users}}]),t}(),Th=function(){function t(){Object(r.a)(this,t),this._unitId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._unitId=null,!0}},{key:"parse",value:function(t){return!!t&&(this._unitId=parseInt(t.readString()),!0)}},{key:"unitId",get:function(){return this._unitId}}]),t}(),Rh=function(){function t(e,i){Object(r.a)(this,t),this._action=void 0,this._value=void 0,this._action=e,this._value=i}return Object(a.a)(t,[{key:"action",get:function(){return this._action}},{key:"value",get:function(){return this._value}}]),t}(),kh=function(){function t(e,i,n,s,a,o,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,_=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,f=arguments.length>12?arguments[12]:void 0;Object(r.a)(this,t),this._id=void 0,this._x=void 0,this._y=void 0,this._z=void 0,this._height=void 0,this._headDirection=void 0,this._direction=void 0,this._targetX=void 0,this._targetY=void 0,this._targetZ=void 0,this._didMove=void 0,this._canStandUp=void 0,this._actions=void 0,this._id=e,this._x=i,this._y=n,this._z=s,this._height=a,this._headDirection=o,this._direction=u,this._targetX=c,this._targetY=h,this._targetZ=_,this._didMove=l,this._canStandUp=d,this._actions=f||[]}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"z",get:function(){return this._z}},{key:"height",get:function(){return this._height}},{key:"headDirection",get:function(){return this._headDirection}},{key:"direction",get:function(){return this._direction}},{key:"targetX",get:function(){return this._targetX}},{key:"targetY",get:function(){return this._targetY}},{key:"targetZ",get:function(){return this._targetZ}},{key:"didMove",get:function(){return this._didMove}},{key:"canStandUp",get:function(){return this._canStandUp}},{key:"actions",get:function(){return this._actions}}]),t}(),Ah=function(){function t(){Object(r.a)(this,t),this._statuses=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._statuses=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;){var i=this.parseStatus(t);i?(this._statuses.push(i),e--):e--}return!0}},{key:"parseStatus",value:function(t){if(!t)return null;var e=t.readInt(),i=t.readInt(),n=t.readInt(),r=parseFloat(t.readString()),a=t.readInt()%8*45,o=t.readInt()%8*45,u=t.readString(),c=0,h=0,_=0,l=0,d=!1,f=!1;if(u){var v,g=u.split("/"),O=[],y=Object(s.a)(g);try{for(y.s();!(v=y.n()).done;){var E=v.value.split(" ");if(""!==E[0]&&E.length>=2){switch(E[0]){case"mv":var p=E[1].split(",");p.length>=3&&(c=parseInt(p[0]),h=parseInt(p[1]),_=parseFloat(p[2]),f=!0);break;case"sit":var m=parseFloat(E[1]);E.length>=3&&(d="1"===E[2]),l=m;break;case"lay":var I=parseFloat(E[1]);l=Math.abs(I)}O.push(new Rh(E[0],E[1]))}}}catch(b){y.e(b)}finally{y.f()}this._statuses.push(new kh(e,i,n,r,l,a,o,c,h,_,f,d,O))}}},{key:"statuses",get:function(){return this._statuses}}]),t}(),Sh=function(){function t(){Object(r.a)(this,t),this._isMuted=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t&&(this._isMuted=t.readBoolean(),!0)}},{key:"isMuted",get:function(){return this._isMuted}}]),t}(),jh=function(){function t(e){Object(r.a)(this,t),this._stuffTypeSelectionEnabled=void 0,this._furniLimit=void 0,this._stuffIds=void 0,this._id=void 0,this._stringParam=void 0,this._intParams=void 0,this._stuffTypeId=void 0,this._stuffTypeSelectionCode=void 0,this._stuffIds=[],this._intParams=[],this._stuffTypeSelectionEnabled=e.readBoolean(),this._furniLimit=e.readInt();for(var i=e.readInt();i>0;)this._stuffIds.push(e.readInt()),i--;for(this._stuffTypeId=e.readInt(),this._id=e.readInt(),this._stringParam=e.readString(),i=e.readInt();i>0;)this._intParams.push(e.readInt()),i--;this._stuffTypeSelectionCode=e.readInt()}return Object(a.a)(t,[{key:"getBoolean",value:function(t){return 1===this._intParams[t]}},{key:"stuffTypeSelectionEnabled",get:function(){return this._stuffTypeSelectionEnabled}},{key:"stuffTypeSelectionCode",get:function(){return this._stuffTypeSelectionCode},set:function(t){this._stuffTypeSelectionCode=t}},{key:"maximumItemSelectionCount",get:function(){return this._furniLimit}},{key:"selectedItems",get:function(){return this._stuffIds}},{key:"id",get:function(){return this._id}},{key:"stringData",get:function(){return this._stringParam}},{key:"intData",get:function(){return this._intParams}},{key:"code",get:function(){return 0}},{key:"spriteId",get:function(){return this._stuffTypeId}}]),t}(),Nh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;Object(r.a)(this,i),(n=e.call(this,t))._type=void 0,n._delayInPulses=void 0,n._conflictingTriggers=void 0,n._conflictingTriggers=[],n._type=t.readInt(),n._delayInPulses=t.readInt();for(var s=t.readInt();s>0;)n._conflictingTriggers.push(t.readInt()),s--;return n}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"code",get:function(){return this._type}},{key:"delayInPulses",get:function(){return this._delayInPulses}},{key:"conflictingTriggers",get:function(){return this._conflictingTriggers}}]),i}(jh),Dh=function(){function t(){Object(r.a)(this,t),this._definition=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._definition=null,!0}},{key:"parse",value:function(t){return!!t&&(this._definition=new Nh(t),!0)}},{key:"definition",get:function(){return this._definition}}]),t}(),Mh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t))._type=void 0,n._type=t.readInt(),n}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"code",get:function(){return this._type}}]),i}(jh),Ch=function(){function t(){Object(r.a)(this,t),this._definition=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._definition=null,!0}},{key:"parse",value:function(t){return!!t&&(this._definition=new Mh(t),!0)}},{key:"definition",get:function(){return this._definition}}]),t}(),Lh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;Object(r.a)(this,i),(n=e.call(this,t))._triggerConf=void 0,n._conflictingActions=void 0,n._conflictingActions=[],n._triggerConf=t.readInt();for(var s=t.readInt();s>0;)n._conflictingActions.push(t.readInt()),s--;return n}return Object(a.a)(i,[{key:"code",get:function(){return this._triggerConf}},{key:"conflictingActions",get:function(){return this._conflictingActions}}]),i}(jh),Uh=function(){function t(){Object(r.a)(this,t),this._definition=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._definition=null,!0}},{key:"parse",value:function(t){return!!t&&(this._definition=new Lh(t),!0)}},{key:"definition",get:function(){return this._definition}}]),t}(),Ph=function(){function t(){Object(r.a)(this,t),this._stuffId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._stuffId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._stuffId=t.readInt(),!0)}},{key:"stuffId",get:function(){return this._stuffId}}]),t}(),wh=function(){function t(){Object(r.a)(this,t),this._reason=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._reason=0,!0}},{key:"parse",value:function(t){return!!t&&(this._reason=t.readInt(),!0)}},{key:"reason",get:function(){return this._reason}}]),t}(),Fh=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!!t}}]),t}(),xh=function(){function t(){Object(r.a)(this,t),this._info=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._info=null,!0}},{key:"parse",value:function(t){return!!t&&(this._info=t.readString(),!0)}},{key:"info",get:function(){return this._info}}]),t}(),Bh=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._userName=void 0,this._userId=e.readInt(),this._userName=e.readString()}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}}]),t}(),Gh=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._bannedUsers=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._bannedUsers=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._roomId=t.readInt();for(var e=t.readInt();e>0;)this._bannedUsers.push(new Bh(t)),e--;return!0}},{key:"roomId",get:function(){return this._roomId}},{key:"bannedUsers",get:function(){return this._bannedUsers}}]),t}(),Hh=function(){function t(e){Object(r.a)(this,t),this._userId=void 0,this._userName=void 0,this._selected=void 0,this._userId=e.readInt(),this._userName=e.readString()}return Object(a.a)(t,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"selected",get:function(){return this._selected},set:function(t){this._selected=t}}]),t}(),Vh=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._data=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._data=null,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._data=new Hh(t),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"data",get:function(){return this._data}}]),t}(),zh=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._userId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._userId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._roomId=t.readInt(),this._userId=t.readInt(),!0)}},{key:"roomId",get:function(){return this._roomId}},{key:"userId",get:function(){return this._userId}}]),t}(),Yh=function(){function t(){Object(r.a)(this,t),this._roomId=void 0,this._users=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._roomId=0,this._users=new Map,!0}},{key:"parse",value:function(t){if(!t)return!1;this._roomId=t.readInt();for(var e=t.readInt();e>0;){var i=t.readInt(),n=t.readString();this._users.set(i,n),e--}return!0}},{key:"roomId",get:function(){return this._roomId}},{key:"users",get:function(){return this._users}}]),t}(),Wh=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"flush",value:function(){return!0}},{key:"parse",value:function(t){return!0}}]),t}(),Kh=function(){function t(){Object(r.a)(this,t),this._songDisks=new Map,this._maxLength=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._songDisks.clear(),this._maxLength=0,!0}},{key:"parse",value:function(t){this._maxLength=t.readInt();for(var e=t.readInt(),i=0;i<e;i++)this._songDisks.set(t.readInt(),t.readInt());return!0}},{key:"songDisks",get:function(){return this._songDisks}},{key:"maxLength",get:function(){return this._maxLength}}]),t}(),Xh=function(){function t(){Object(r.a)(this,t),this._currentSongId=void 0,this._currentPosition=void 0,this._nextSongId=void 0,this._nextPosition=void 0,this._syncCount=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._currentSongId=-1,this._currentPosition=-1,this._nextSongId=-1,this._nextPosition=-1,this._syncCount=-1,!0}},{key:"parse",value:function(t){return this._currentSongId=t.readInt(),this._currentPosition=t.readInt(),this._nextSongId=t.readInt(),this._nextPosition=t.readInt(),this._syncCount=t.readInt(),!0}},{key:"currentSongId",get:function(){return this._currentSongId}},{key:"currentPosition",get:function(){return this._currentPosition}},{key:"nextSongId",get:function(){return this._nextSongId}},{key:"nextPosition",get:function(){return this._nextPosition}},{key:"syncCount",get:function(){return this._syncCount}}]),t}(),qh=function(){function t(){Object(r.a)(this,t),this._songId=void 0,this._officialSongId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._songId=0,this._officialSongId="",!0}},{key:"parse",value:function(t){return this._officialSongId=t.readString(),this._songId=t.readInt(),!0}},{key:"songId",get:function(){return this._songId}},{key:"officialSongId",get:function(){return this._officialSongId}}]),t}(),Qh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Wh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Zh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Kh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Jh=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$h=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),t_=function(){function t(e,i,n,s){Object(r.a)(this,t),this._id=void 0,this._length=void 0,this._name=void 0,this._creator=void 0,this._startPlayHead=0,this._id=e,this._length=i,this._name=n,this._creator=s}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"length",get:function(){return this._length}},{key:"name",get:function(){return this._name}},{key:"creator",get:function(){return this._creator}},{key:"startPlayHeadPos",get:function(){return this._startPlayHead},set:function(t){this._startPlayHead=t}}]),t}(),e_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,a_)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),i_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,o_)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),n_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){var u;return Object(r.a)(this,i),(u=e.call(this,t,n,s,a))._data="",u._data=o,u}return Object(a.a)(i,[{key:"data",get:function(){return this._data}}]),i}(t_),s_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,u_)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),r_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,c_)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),a_=function(){function t(){Object(r.a)(this,t),this._synchronizationCount=void 0,this._playlist=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._synchronizationCount=-1,this._playlist=[],!0}},{key:"parse",value:function(t){this._synchronizationCount=t.readInt();for(var e=t.readInt(),i=0;i<e;i++)this._playlist.push(new t_(t.readInt(),t.readInt(),t.readString(),t.readString()));return!0}},{key:"synchronizationCount",get:function(){return this._synchronizationCount}},{key:"playList",get:function(){return this._playlist}}]),t}(),o_=function(){function t(){Object(r.a)(this,t),this._entry=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._entry=null,!0}},{key:"parse",value:function(t){return this._entry=new t_(t.readInt(),t.readInt(),t.readString(),t.readString()),!0}},{key:"entry",get:function(){return this._entry}}]),t}(),u_=function(){function t(){Object(r.a)(this,t),this._songs=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._songs=[],!0}},{key:"parse",value:function(t){for(var e=t.readInt(),i=0;i<e;i++){var n=t.readInt(),s=(t.readString(),t.readString()),r=t.readString(),a=t.readInt(),o=t.readString(),u=new n_(n,a,s,o,r);this._songs.push(u)}return!0}},{key:"songs",get:function(){return this._songs}}]),t}(),c_=function(){function t(){Object(r.a)(this,t),this._songDiskInventory=new H}return Object(a.a)(t,[{key:"flush",value:function(){return this._songDiskInventory.reset(),!0}},{key:"parse",value:function(t){for(var e=t.readInt(),i=0;i<e;i++)this._songDiskInventory.add(t.readInt(),t.readInt());return!0}},{key:"getDiskId",value:function(t){return t>=0&&t<this._songDiskInventory.length?this._songDiskInventory.getKey(t):-1}},{key:"getSongId",value:function(t){return t>=0&&t<this._songDiskInventory.length?this._songDiskInventory.getWithIndex(t):-1}},{key:"songDiskCount",get:function(){return this._songDiskInventory.length}}]),t}(),h_=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._level=void 0,this._state=void 0,this._tasks=void 0,this._rewardPerks=void 0,this._rewardProducts=void 0,this._level=e,this._state=i,this._tasks=n,this._rewardPerks=s,this._rewardProducts=a}return Object(a.a)(t,[{key:"level",get:function(){return this._level}},{key:"state",get:function(){return this._state}},{key:"tasks",get:function(){return this._tasks}},{key:"perks",get:function(){return this._rewardPerks}},{key:"items",get:function(){return this._rewardProducts}}]),t}(),__=function(){function t(e,i){Object(r.a)(this,t),this._productCode=void 0,this._vipDays=void 0,this._productCode=e,this._vipDays=i}return Object(a.a)(t,[{key:"productCode",get:function(){return this._productCode}},{key:"vipDays",get:function(){return this._vipDays}}]),t}(),l_=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._id=void 0,this._requiredLevel=void 0,this._badgeCode=void 0,this._state=void 0,this._currentScore=void 0,this._totalScore=void 0,this._id=e,this._requiredLevel=i,this._badgeCode=n,this._state=s,this._currentScore=a,this._totalScore=o}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"requiredLevel",get:function(){return this._requiredLevel}},{key:"badgeCode",get:function(){return this._badgeCode}},{key:"state",get:function(){return this._state}},{key:"currentScore",get:function(){return this._currentScore}},{key:"totalScore",get:function(){return this._totalScore}}]),t}(),d_=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._levels=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._type=null,this._levels=null,!0}},{key:"parse",value:function(t){if(!t)return!1;this._type=t.readString(),this._levels=[];for(var e=t.readInt(),i=0;i<e;i++){for(var n=t.readInt(),s=t.readInt(),r=[],a=t.readInt(),o=0;o<a;o++){var u=t.readInt(),c=t.readInt(),h=t.readString(),_=t.readInt(),l=t.readInt(),d=t.readInt();r.push(new l_(u,c,h,_,l,d))}for(var f=[],v=t.readInt(),g=0;g<v;g++)f.push(t.readString());for(var O=[],y=t.readInt(),E=0;E<y;E++){var p=t.readString(),m=t.readInt();O.push(new __(p,m))}this._levels.push(new h_(n,s,r,f,O))}return!0}},{key:"type",get:function(){return this._type}},{key:"levels",get:function(){return this._levels}}]),t}(),f_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ci)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),v_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Li)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),g_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ui)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),O_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Pi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),y_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),E_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),p_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,xi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),m_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Bi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),I_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M);I_.NAME_OK=0,I_.ERROR_NAME_REQUIRED=1,I_.ERROR_NAME_TOO_SHORT=2,I_.ERROR_NAME_TOO_LONG=3,I_.ERROR_NAME_NOT_VALID=4,I_.ERROR_NAME_IN_USE=5,I_.ERROR_NAME_CHANGE_NOT_ALLOWED=6,I_.ERROR_MERGE_HOTEL_DOWN=7;var b_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),T_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),R_=function(){function t(e){Object(r.a)(this,t),this._slotId=void 0,this._figureString=void 0,this._gender=void 0,this._slotId=e.readInt(),this._figureString=e.readString(),this._gender=e.readString()}return Object(a.a)(t,[{key:"slotId",get:function(){return this._slotId}},{key:"figureString",get:function(){return this._figureString}},{key:"gender",get:function(){return this._gender}}]),t}(),k_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),A_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Wi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),S_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ki)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),j_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),N_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qi)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),D_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,an)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),M_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,on)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),C_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,un)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),L_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),U_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),P_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_n)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),w_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,dn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),F_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),x_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,vn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),B_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),G_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,On)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),H_=function(){function t(e){Object(r.a)(this,t),this._Str_20535=void 0,this._Str_19937=void 0,this._Str_20951=void 0,this._Str_20460=void 0,this._Str_16144=void 0,this._Str_20535=e.readInt(),this._Str_19937=e.readInt(),this._Str_20951=e.readInt(),this._Str_20460=e.readInt(),this._Str_16144=[];for(var i=e.readInt();i>0;)this._Str_16144.push(e.readInt()),i--}return Object(a.a)(t,[{key:"_Str_22802",get:function(){return this._Str_20535}},{key:"_Str_9227",get:function(){return this._Str_19937}},{key:"_Str_23802",get:function(){return this._Str_20951}},{key:"_Str_21500",get:function(){return this._Str_20460}},{key:"_Str_25155",get:function(){return this._Str_16144}}]),t}(),V_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,yn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),z_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,mn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Y_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,kn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),W_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,pn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),K_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,An)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),X_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Sn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),q_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Nn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Q_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Dn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Z_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Mn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),J_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Cn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$_=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ln)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),tl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),el=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),il=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,xn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),nl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Bn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),rl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),al=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ol=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ul=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Yn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),cl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Kn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),hl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_l=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ts)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ll=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ks)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),dl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,js)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),fl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,As)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),vl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ns)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),gl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ds)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ol=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Bs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),El=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ml=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ys)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Il=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ks)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Tl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Rl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Zs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$s)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Al=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,tr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Sl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ir)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,sr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Nl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,rr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Dl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ar)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ml=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,or)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Cl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ur)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ll=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ul=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Pl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_r)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,lr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Fl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,dr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),xl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Bl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,vr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Gl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Hl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Or)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Vl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,yr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),zl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Er)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Yl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,br)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Wl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Tr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Kl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Rr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Xl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,kr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ql=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._name=void 0,this._description=void 0,this._icon=void 0,this._totalThreads=void 0,this._leaderboardScore=void 0,this._totalMessages=void 0,this._unreadMessages=void 0,this._lastMessageId=void 0,this._lastMessageAuthorId=void 0,this._lastMessageAuthorName=void 0,this._lastMessageTimeAsSecondsAgo=void 0}return Object(a.a)(t,[{key:"groupId",get:function(){return this._groupId}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"icon",get:function(){return this._icon}},{key:"totalThreads",get:function(){return this._totalThreads}},{key:"leaderboardScore",get:function(){return this._leaderboardScore}},{key:"totalMessages",get:function(){return this._totalMessages}},{key:"unreadMessages",get:function(){return this._unreadMessages}},{key:"lastMessageId",get:function(){return this._lastMessageId}},{key:"lastMessageAuthorId",get:function(){return this._lastMessageAuthorId}},{key:"lastMessageAuthorName",get:function(){return this._lastMessageAuthorName}},{key:"lastMessageTimeAsSecondsAgo",get:function(){return this._lastMessageTimeAsSecondsAgo}},{key:"_Str_25309",value:function(t){this._totalThreads=t._totalThreads,this._totalMessages=t._totalMessages,this._unreadMessages=t._unreadMessages,this._lastMessageAuthorId=t._lastMessageAuthorId,this._lastMessageAuthorName=t._lastMessageAuthorName,this._lastMessageId=t._lastMessageId,this._lastMessageTimeAsSecondsAgo=t._lastMessageTimeAsSecondsAgo}},{key:"_Str_12786",get:function(){return this._totalMessages-this._unreadMessages},set:function(t){this._unreadMessages=this._totalMessages-t,this._unreadMessages<0&&(this._unreadMessages=0)}},{key:"_Str_23783",value:function(t){this._lastMessageAuthorId=t.lastUserId,this._lastMessageAuthorName=t.lastUserName,this._lastMessageId=t.lastMessageId,this._lastMessageTimeAsSecondsAgo=t.lastCommentTime,this._totalThreads++,this._totalMessages++,this._unreadMessages=0}}],[{key:"parse",value:function(e){return this.fillFromMessage(new t,e)}},{key:"fillFromMessage",value:function(t,e){return t._groupId=e.readInt(),t._name=e.readString(),t._description=e.readString(),t._icon=e.readString(),t._totalThreads=e.readInt(),t._leaderboardScore=e.readInt(),t._totalMessages=e.readInt(),t._unreadMessages=e.readInt(),t._lastMessageId=e.readInt(),t._lastMessageAuthorId=e.readInt(),t._lastMessageAuthorName=e.readString(),t._lastMessageTimeAsSecondsAgo=e.readInt(),t}}]),t}(),Ql=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._readPermissions=void 0,t._postMessagePermissions=void 0,t._postThreadPermissions=void 0,t._moderatePermissions=void 0,t._readPermissionError=void 0,t._postMessagePermissionError=void 0,t._postThreadPermissionError=void 0,t._moderatePermissionError=void 0,t._reportPermissionError=void 0,t._canChangeSettings=void 0,t._isStaff=void 0,t}return Object(a.a)(i,[{key:"readPermissions",get:function(){return this._readPermissions}},{key:"postMessagePermissions",get:function(){return this._postMessagePermissions}},{key:"postThreadPermissions",get:function(){return this._postThreadPermissions}},{key:"moderatePermissions",get:function(){return this._moderatePermissions}},{key:"hasReadPermissionError",get:function(){return 0===this._readPermissionError.length}},{key:"_Str_21331",get:function(){return!0}},{key:"hasPostMessagePermissionError",get:function(){return 0===this._postMessagePermissionError.length}},{key:"hasPostThreadPermissionError",get:function(){return 0===this._postThreadPermissionError.length}},{key:"hasModeratePermissionError",get:function(){return 0===this._moderatePermissionError.length}},{key:"canChangeSettings",get:function(){return this._canChangeSettings}},{key:"isStaf",get:function(){return this._isStaff}},{key:"readPermissionError",get:function(){return this._readPermissionError}},{key:"postMessagePermissionError",get:function(){return this._postMessagePermissionError}},{key:"postThreadPermissionError",get:function(){return this._postThreadPermissionError}},{key:"moderatePermissionError",get:function(){return this._moderatePermissionError}},{key:"reportPermissionError",get:function(){return this._reportPermissionError}}],[{key:"parse",value:function(t){var e=new i;return ql.fillFromMessage(e,t),e._readPermissions=t.readInt(),e._postMessagePermissions=t.readInt(),e._postThreadPermissions=t.readInt(),e._moderatePermissions=t.readInt(),e._readPermissionError=t.readString(),e._postMessagePermissionError=t.readString(),e._postThreadPermissionError=t.readString(),e._moderatePermissionError=t.readString(),e._reportPermissionError=t.readString(),e._canChangeSettings=t.readBoolean(),e._isStaff=t.readBoolean(),e}}]),i}(ql),Zl=function(){function t(){Object(r.a)(this,t),this._extendedForumData=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._extendedForumData=null,!0}},{key:"parse",value:function(t){return!!t&&(this._extendedForumData=Ql.parse(t),!0)}},{key:"extendedForumData",get:function(){return this._extendedForumData}}]),t}(),Jl=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Zl)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$l=function(){function t(){Object(r.a)(this,t),this._listCode=void 0,this._totalAmount=void 0,this._startIndex=void 0,this._amount=void 0,this._forums=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._listCode=-1,this._totalAmount=0,this._startIndex=-1,this._amount=0,this._forums=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._listCode=t.readInt(),this._totalAmount=t.readInt(),this._startIndex=t.readInt(),this._amount=t.readInt(),this._forums=[];for(var e=0;e<this._amount;)this._forums.push(ql.parse(t)),e++;return!0}},{key:"listCode",get:function(){return this._listCode}},{key:"totalAmount",get:function(){return this._totalAmount}},{key:"startIndex",get:function(){return this._startIndex}},{key:"amount",get:function(){return this._amount}},{key:"forums",get:function(){return this._forums}}]),t}(),td=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$l)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ed=function(){function t(){Object(r.a)(this,t),this._threadId=void 0,this._authorId=void 0,this._authorName=void 0,this._creationTimeAsSecondsAgo=void 0,this._header=void 0,this._totalMessages=void 0,this._unreadMessagesCount=void 0,this._lastMessageId=void 0,this._lastUserId=void 0,this._lastUserName=void 0,this._lastCommentTime=void 0,this._state=void 0,this._adminId=void 0,this._adminName=void 0,this._adminOperationTimeAsSecondsAgo=void 0,this._isPinned=void 0,this._isLocked=void 0}return Object(a.a)(t,[{key:"adminOperationTimeAsSecondsAgo",get:function(){return this._adminOperationTimeAsSecondsAgo},set:function(t){this._adminOperationTimeAsSecondsAgo=t}},{key:"lastCommentTime",get:function(){return this._lastCommentTime},set:function(t){this._lastCommentTime=t}},{key:"threadId",get:function(){return this._threadId},set:function(t){this._threadId=t}},{key:"authorId",get:function(){return this._authorId},set:function(t){this._authorId=t}},{key:"authorName",get:function(){return this._authorName},set:function(t){this._authorName=t}},{key:"creationTimeAsSecondsAgo",get:function(){return this._creationTimeAsSecondsAgo},set:function(t){this._creationTimeAsSecondsAgo=t}},{key:"header",get:function(){return this._header},set:function(t){this._header=t}},{key:"lastMessageId",get:function(){return this._lastMessageId},set:function(t){this._lastMessageId=t}},{key:"lastUserId",get:function(){return this._lastUserId},set:function(t){this._lastUserId=t}},{key:"lastUserName",get:function(){return this._lastUserName},set:function(t){this._lastUserName=t}},{key:"totalMessages",get:function(){return this._totalMessages},set:function(t){this._totalMessages=t}},{key:"unreadMessagesCount",get:function(){return this._unreadMessagesCount},set:function(t){this._unreadMessagesCount=t}},{key:"state",get:function(){return this._state},set:function(t){this._state=t}},{key:"adminId",get:function(){return this._adminId},set:function(t){this._adminId=t}},{key:"adminName",get:function(){return this._adminName},set:function(t){this._adminName=t}},{key:"isPinned",get:function(){return this._isPinned},set:function(t){this._isPinned=t}},{key:"isLocked",get:function(){return this._isLocked},set:function(t){this._isLocked=t}}],[{key:"parse",value:function(e){var i=new t;return i._threadId=e.readInt(),i._authorId=e.readInt(),i._authorName=e.readString(),i._header=e.readString(),i._isPinned=e.readBoolean(),i._isLocked=e.readBoolean(),i._creationTimeAsSecondsAgo=e.readInt(),i._totalMessages=e.readInt(),i._unreadMessagesCount=e.readInt(),i._lastMessageId=e.readInt(),i._lastUserId=e.readInt(),i._lastUserName=e.readString(),i._lastCommentTime=e.readInt(),i._state=e.readByte(),i._adminId=e.readInt(),i._adminName=e.readString(),i._adminOperationTimeAsSecondsAgo=e.readInt(),i}}]),t}(),id=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._startIndex=void 0,this._amount=void 0,this._threads=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._startIndex=-1,this._amount=0,this._threads=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._groupId=t.readInt(),this._startIndex=t.readInt(),this._amount=t.readInt(),this._threads=[];for(var e=0;e<this._amount;)this._threads.push(ed.parse(t)),e++;return!0}},{key:"groupId",get:function(){return this._groupId}},{key:"startIndex",get:function(){return this._startIndex}},{key:"amount",get:function(){return this._amount}},{key:"threads",get:function(){return this._threads}}]),t}(),nd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,id)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sd=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._messageId=void 0,this._messageIndex=void 0,this._authorId=void 0,this._threadId=void 0,this._creationTime=void 0,this._messageText=void 0,this._authorName=void 0,this._authorFigure=void 0,this._state=void 0,this._adminId=void 0,this._adminName=void 0,this._adminOperationTimeAsSeccondsAgo=void 0,this._authorPostCount=void 0}return Object(a.a)(t,[{key:"state",get:function(){return this._state},set:function(t){this._state=t}},{key:"adminId",get:function(){return this._adminId},set:function(t){this._adminId=t}},{key:"adminName",get:function(){return this._adminName},set:function(t){this._adminName=t}},{key:"adminOperationTimeAsSeccondsAgo",get:function(){return this._adminOperationTimeAsSeccondsAgo},set:function(t){this._adminOperationTimeAsSeccondsAgo=t}},{key:"messageId",get:function(){return this._messageId},set:function(t){this._messageId=t}},{key:"creationTime",get:function(){return this._creationTime},set:function(t){this._creationTime=t}},{key:"authorName",get:function(){return this._authorName},set:function(t){this._authorName=t}},{key:"authorFigure",get:function(){return this._authorFigure},set:function(t){this._authorFigure=t}},{key:"threadId",get:function(){return this._threadId},set:function(t){this._threadId=t}},{key:"messageIndex",get:function(){return this._messageIndex},set:function(t){this._messageIndex=t}},{key:"groupID",set:function(t){this._groupId=t}},{key:"groupId",get:function(){return this._groupId}},{key:"authorId",get:function(){return this._authorId},set:function(t){this._authorId=t}},{key:"messageText",get:function(){return this._messageText},set:function(t){this._messageText=t}},{key:"authorPostCount",get:function(){return this._authorPostCount},set:function(t){this._authorPostCount=t}}],[{key:"parse",value:function(e){var i=new t;return i._messageId=e.readInt(),i._messageIndex=e.readInt(),i._authorId=e.readInt(),i._authorName=e.readString(),i._authorFigure=e.readString(),i._creationTime=e.readInt(),i._messageText=e.readString(),i._state=e.readByte(),i._adminId=e.readInt(),i._adminName=e.readString(),i._adminOperationTimeAsSeccondsAgo=e.readInt(),i._authorPostCount=e.readInt(),i}}]),t}(),rd=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._threadId=void 0,this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._threadId=-1,this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._groupId=t.readInt(),this._threadId=t.readInt(),this._message=sd.parse(t),!0)}},{key:"groupId",get:function(){return this._groupId}},{key:"threadId",get:function(){return this._threadId}},{key:"message",get:function(){return this._message}}]),t}(),ad=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,rd)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),od=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._thread=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._thread=null,!0}},{key:"parse",value:function(t){return!!t&&(this._groupId=t.readInt(),this._thread=ed.parse(t),!0)}},{key:"groupId",get:function(){return this._groupId}},{key:"thread",get:function(){return this._thread}}]),t}(),ud=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,od)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),cd=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._threadId=void 0,this._startIndex=void 0,this._amount=void 0,this._messages=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._threadId=-1,this._startIndex=-1,this._amount=0,this._messages=[],!0}},{key:"parse",value:function(t){if(!t)return!1;this._groupId=t.readInt(),this._threadId=t.readInt(),this._startIndex=t.readInt(),this._amount=t.readInt(),this._messages=[];for(var e=0;e<this._amount;){var i=sd.parse(t);i.groupID=this._groupId,i.threadId=this._threadId,this._messages.push(i),e++}return!0}},{key:"groupId",get:function(){return this._groupId}},{key:"threadId",get:function(){return this._threadId}},{key:"startIndex",get:function(){return this._startIndex}},{key:"amount",get:function(){return this._amount}},{key:"messages",get:function(){return this._messages}}]),t}(),hd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cd)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_d=function(){function t(){Object(r.a)(this,t),this._count=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._count=0,!0}},{key:"parse",value:function(t){return!!t&&(this._count=t.readInt(),!0)}},{key:"count",get:function(){return this._count}}]),t}(),ld=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_d)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),dd=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._threadId=void 0,this._message=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._threadId=-1,this._message=null,!0}},{key:"parse",value:function(t){return!!t&&(this._groupId=t.readInt(),this._threadId=t.readInt(),this._message=sd.parse(t),!0)}},{key:"groupId",get:function(){return this._groupId}},{key:"threadId",get:function(){return this._threadId}},{key:"message",get:function(){return this._message}}]),t}(),fd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,dd)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),vd=function(){function t(){Object(r.a)(this,t),this._groupId=void 0,this._thread=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groupId=-1,this._thread=null,!0}},{key:"parse",value:function(t){return!!t&&(this._groupId=t.readInt(),this._thread=ed.parse(t),!0)}},{key:"groupId",get:function(){return this._groupId}},{key:"thread",get:function(){return this._thread}}]),t}(),gd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,vd)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Od=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ar)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Sr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ed=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,jr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Nr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),md=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Dr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Id=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Mr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Cr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Td=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Lr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Rd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ur)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Pr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ad=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Sd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Nd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Dd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Md=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Cd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Yr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ld=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Wr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ud=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Kr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Pd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Fd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Qr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),xd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Zr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Bd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Jr)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Gd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$r)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Hd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ta)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Vd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ea)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),zd=Object(a.a)((function t(){Object(r.a)(this,t)}));zd.ACHIEVEMENT_LIST=305,zd.AUTHENTICATED=2491,zd.AUTHENTICATION=-1,zd.AVAILABILITY_STATUS=2033,zd.BUILDERS_CLUB_EXPIRED=1452,zd.CLUB_OFFERS=2405,zd.CATALOG_PAGE=804,zd.CATALOG_PAGE_LIST=1032,zd.CATALOG_PURCHASE_OK=869,zd.CATALOG_PURCHASE_ERROR=1404,zd.CATALOG_PURCHASE_NOT_ALLOWED=3770,zd.PRODUCT_OFFER=3388,zd.LIMITED_SOLD_OUT=377,zd.CATALOG_PUBLISHED=1866,zd.CFH_RESULT_MESSAGE=3635,zd.CLIENT_LATENCY=10,zd.CLIENT_PING=3928,zd.DESKTOP_CAMPAIGN=1745,zd.DESKTOP_NEWS=286,zd.DESKTOP_VIEW=122,zd.BUNDLE_DISCOUNT_RULESET=2347,zd.FIRST_LOGIN_OF_DAY=793,zd.FURNITURE_ALIASES=1723,zd.FURNITURE_DATA=2547,zd.FURNITURE_FLOOR=1778,zd.FURNITURE_FLOOR_ADD=1534,zd.FURNITURE_FLOOR_REMOVE=2703,zd.FURNITURE_FLOOR_UPDATE=3776,zd.FURNITURE_ITEMDATA=2202,zd.FURNITURE_STATE=2376,zd.FURNITURE_GROUP_CONTEXT_MENU_INFO=3293,zd.FURNITURE_POSTIT_STICKY_POLE_OPEN=2366,zd.GAME_CENTER_ACHIEVEMENTS=2265,zd.GAME_CENTER_GAME_LIST=222,zd.GAME_CENTER_STATUS=2893,zd.GENERIC_ALERT=3801,zd.MODERATOR_MESSAGE=2030,zd.GENERIC_ERROR=1600,zd.GIFT_WRAPPER_CONFIG=2234,zd.GROUP_BADGES=2402,zd.GROUP_CREATE_OPTIONS=2159,zd.GROUP_FORUM_DATA=3011,zd.GROUP_FORUM_LIST=3001,zd.GROUP_FORUM_THREADS=1073,zd.GROUP_FORUM_POST=2049,zd.GROUP_FORUM_POST_THREAD=1862,zd.GROUP_FORUM_THREAD_MESSAGES=509,zd.GROUP_FORUM_UNREAD_COUNT=2379,zd.GROUP_FORUM_UPDATE_MESSAGE=324,zd.GROUP_FORUM_UPDATE_THREAD=2528,zd.GROUP_INFO=1702,zd.GROUP_LIST=420,zd.GROUP_MEMBER=265,zd.GROUP_MEMBERS=1200,zd.GROUP_MEMBERS_REFRESH=2445,zd.GROUP_MEMBER_REMOVE_CONFIRM=1876,zd.GROUP_PURCHASED=2808,zd.GROUP_SETTINGS=3965,zd.GROUP_BADGE_PARTS=2238,zd.ITEM_DIMMER_SETTINGS=2710,zd.ITEM_STACK_HELPER=2816,zd.ITEM_WALL=1369,zd.ITEM_WALL_ADD=2187,zd.ITEM_WALL_REMOVE=3208,zd.ITEM_WALL_UPDATE=2009,zd.LOAD_GAME_URL=2624,zd.MARKETPLACE_CONFIG=1823,zd.MESSENGER_ACCEPT_FRIENDS=896,zd.MESSENGER_CHAT=1587,zd.MESSENGER_FIND_FRIENDS=1210,zd.MESSENGER_FOLLOW_FAILED=3048,zd.MESSENGER_FRIEND_NOTIFICATION=3082,zd.MESSENGER_FRIENDS=3130,zd.MESSENGER_INIT=1605,zd.MESSENGER_INSTANCE_MESSAGE_ERROR=3359,zd.MESSENGER_INVITE=3870,zd.MESSENGER_INVITE_ERROR=462,zd.MESSENGER_MESSAGE_ERROR=892,zd.MESSENGER_MINIMAIL_COUNT=2803,zd.MESSENGER_MINIMAIL_NEW=1911,zd.MESSENGER_RELATIONSHIPS=2016,zd.MESSENGER_REQUEST=2219,zd.MESSENGER_REQUEST_ERROR=892,zd.MESSENGER_REQUESTS=280,zd.MESSENGER_SEARCH=973,zd.MESSENGER_UPDATE=2800,zd.MODERATION_REPORT_DISABLED=1651,zd.MODERATION_TOOL=2696,zd.MODERATION_USER_INFO=2866,zd.MOTD_MESSAGES=2035,zd.NAVIGATOR_CATEGORIES=1562,zd.NAVIGATOR_COLLAPSED=1543,zd.NAVIGATOR_EVENT_CATEGORIES=3244,zd.NAVIGATOR_LIFTED=3104,zd.NAVIGATOR_METADATA=3052,zd.NAVIGATOR_OPEN_ROOM_CREATOR=2064,zd.NAVIGATOR_SEARCH=2690,zd.NAVIGATOR_SEARCHES=3984,zd.NAVIGATOR_SETTINGS=518,zd.NOTIFICATION_LIST=1992,zd.PET_FIGURE_UPDATE=1924,zd.PET_INFO=2901,zd.RECYCLER_PRIZES=3164,zd.ROOM_BAN_LIST=1869,zd.ROOM_BAN_REMOVE=3429,zd.ROOM_CREATED=1304,zd.ROOM_DOORBELL=2309,zd.ROOM_DOORBELL_ACCEPTED=3783,zd.ROOM_DOORBELL_REJECTED=878,zd.ROOM_ENTER=758,zd.ROOM_ENTER_ERROR=899,zd.ROOM_FORWARD=160,zd.ROOM_HEIGHT_MAP=2753,zd.ROOM_HEIGHT_MAP_UPDATE=558,zd.ROOM_INFO=687,zd.ROOM_INFO_OWNER=749,zd.ROOM_MODEL=1301,zd.ROOM_MODEL_BLOCKED_TILES=3990,zd.ROOM_MODEL_DOOR=1664,zd.ROOM_MODEL_NAME=2031,zd.ROOM_MUTED=2533,zd.ROOM_MUTE_USER=826,zd.ROOM_PAINT=2454,zd.ROOM_PROMOTION=2274,zd.ROOM_QUEUE_STATUS=2208,zd.ROOM_RIGHTS=780,zd.ROOM_RIGHTS_CLEAR=2392,zd.ROOM_RIGHTS_LIST=1284,zd.ROOM_RIGHTS_LIST_ADD=2088,zd.ROOM_RIGHTS_LIST_REMOVE=1327,zd.ROOM_RIGHTS_OWNER=339,zd.ROOM_ROLLING=3207,zd.ROOM_SCORE=482,zd.ROOM_SETTINGS=1498,zd.ROOM_SETTINGS_CHAT=1191,zd.ROOM_SETTINGS_SAVE=948,zd.ROOM_SETTINGS_SAVE_ERROR=1555,zd.ROOM_SETTINGS_UPDATED=3297,zd.ROOM_SPECTATOR=1033,zd.ROOM_THICKNESS=3547,zd.INFO_FEED_ENABLE=3284,zd.SECURITY_MACHINE=1488,zd.MYSTERY_BOX_KEYS=2833,zd.TRADE_ACCEPTED=2568,zd.TRADE_CLOSED=1373,zd.TRADE_COMPLETED=1001,zd.TRADE_CONFIRMATION=2720,zd.TRADE_LIST_ITEM=2024,zd.TRADE_NOT_OPEN=3128,zd.TRADE_OPEN=2505,zd.TRADE_OPEN_FAILED=217,zd.TRADE_OTHER_NOT_ALLOWED=2154,zd.TRADE_YOU_NOT_ALLOWED=3058,zd.UNIT=374,zd.UNIT_CHANGE_NAME=2182,zd.UNIT_CHAT=1446,zd.UNIT_CHAT_SHOUT=1036,zd.UNIT_CHAT_WHISPER=2704,zd.UNIT_DANCE=2233,zd.UNIT_EFFECT=1167,zd.UNIT_EXPRESSION=1631,zd.UNIT_HAND_ITEM=1474,zd.UNIT_IDLE=1797,zd.UNIT_INFO=3920,zd.UNIT_NUMBER=2324,zd.UNIT_REMOVE=2661,zd.UNIT_STATUS=1640,zd.UNIT_TYPING=1717,zd.UNSEEN_ITEMS=2103,zd.USER_ACHIEVEMENT_SCORE=1968,zd.USER_BADGES=717,zd.USER_BADGES_ADD=2493,zd.USER_BADGES_CURRENT=1087,zd.USER_BOT_REMOVE=233,zd.USER_BOTS=3086,zd.USER_CHANGE_NAME=118,zd.USER_CLOTHING=1450,zd.USER_CREDITS=3475,zd.USER_CURRENCY=2018,zd.ACTIVITY_POINT_NOTIFICATION=2275,zd.USER_EFFECTS=340,zd.USER_FAVORITE_ROOM=2524,zd.USER_FAVORITE_ROOM_COUNT=151,zd.USER_FIGURE=2429,zd.USER_FURNITURE=994,zd.USER_FURNITURE_ADD=104,zd.USER_FURNITURE_POSTIT_PLACED=1501,zd.USER_FURNITURE_REFRESH=3151,zd.USER_FURNITURE_REMOVE=159,zd.USER_HOME_ROOM=2875,zd.USER_IGNORED=126,zd.USER_IGNORED_RESULT=207,zd.USER_INFO=2725,zd.USER_OUTFITS=3315,zd.USER_PERKS=2586,zd.USER_PERMISSIONS=411,zd.USER_PET_ADD=2101,zd.USER_PET_REMOVE=3253,zd.USER_PETS=3522,zd.USER_PROFILE=3898,zd.USER_RESPECT=2815,zd.USER_SANCTION_STATUS=3679,zd.USER_SETTINGS=513,zd.USER_SUBSCRIPTION=954,zd.USER_WARDROBE_PAGE=3315,zd.WIRED_ACTION=1434,zd.WIRED_CONDITION=1108,zd.WIRED_ERROR=156,zd.WIRED_OPEN=1830,zd.WIRED_REWARD=178,zd.WIRED_SAVE=1155,zd.WIRED_TRIGGER=383,zd.PLAYING_GAME=448,zd.FURNITURE_STATE_2=3431,zd.REMOVE_BOT_FROM_INVENTORY=233,zd.ADD_BOT_TO_INVENTORY=1352,zd.ACHIEVEMENT_PROGRESSED=2107,zd.MODTOOL_ROOM_INFO=1333,zd.MODTOOL_USER_CHATLOG=3377,zd.MODTOOL_ROOM_CHATLOG=3434,zd.MODTOOL_VISITED_ROOMS_USER=1752,zd.MODERATOR_ACTION_RESULT=2335,zd.ISSUE_DELETED=3192,zd.ISSUE_INFO=3609,zd.ISSUE_PICK_FAILED=3150,zd.CFH_CHATLOG=607,zd.MODERATOR_TOOL_PREFERENCES=1576,zd.LOVELOCK_FURNI_START=3753,zd.LOVELOCK_FURNI_FRIEND_COMFIRMED=382,zd.LOVELOCK_FURNI_FINISHED=770,zd.GIFT_RECEIVER_NOT_FOUND=1517,zd.GIFT_OPENED=56,zd.FLOOD_CONTROL=566,zd.REMAINING_MUTE=826,zd.USER_EFFECT_LIST=340,zd.USER_EFFECT_LIST_ADD=2867,zd.USER_EFFECT_LIST_REMOVE=2228,zd.USER_EFFECT_ACTIVATE=1959,zd.CLUB_GIFT_INFO=619,zd.REDEEM_VOUCHER_ERROR=714,zd.REDEEM_VOUCHER_OK=3336,zd.IN_CLIENT_LINK=2023,zd.BOT_COMMAND_CONFIGURATION=1618,zd.HAND_ITEM_RECEIVED=354,zd.PET_PLACING_ERROR=2913,zd.BOT_ERROR=639,zd.MARKETPLACE_SELL_ITEM=54,zd.MARKETPLACE_ITEM_STATS=725,zd.MARKETPLACE_OWN_ITEMS=3884,zd.MARKETPLACE_CANCEL_SALE=3264,zd.MARKETPLACE_ITEM_POSTED=1359,zd.MARKETPLACE_ITEMS_SEARCHED=680,zd.MARKETPLACE_AFTER_ORDER_STATUS=2032,zd.CATALOG_RECEIVE_PET_BREEDS=3331,zd.CATALOG_APPROVE_NAME_RESULT=1503,zd.OBJECTS_DATA_UPDATE=1453,zd.PET_EXPERIENCE=2156,zd.COMMUNITY_GOAL_VOTE_EVENT=1435,zd.PROMO_ARTICLES=286,zd.COMMUNITY_GOAL_EARNED_PRIZES=3319,zd.COMMUNITY_GOAL_PROGRESS=2525,zd.CONCURRENT_USERS_GOAL_PROGRESS=2737,zd.QUEST_DAILY=1878,zd.QUEST_CANCELLED=3027,zd.QUEST_COMPLETED=949,zd.COMMUNITY_GOAL_HALL_OF_FAME=3005,zd.EPIC_POPUP=3945,zd.SEASONAL_QUESTS=1122,zd.QUESTS=3625,zd.QUEST=230,zd.BONUS_RARE_INFO=1533,zd.CRAFTABLE_PRODUCTS=1e3,zd.CRAFTING_RECIPE=2774,zd.CRAFTING_RECIPES_AVAILABLE=2124,zd.CRAFTING_RESULT=618,zd.CAMERA_PUBLISH_STATUS=2057,zd.CAMERA_PURCHASE_OK=2783,zd.CAMERA_STORAGE_URL=3696,zd.COMPETITION_STATUS=133,zd.INIT_CAMERA=3878,zd.THUMBNAIL_STATUS=3595,zd.ACHIEVEMENT_NOTIFICATION=806,zd.CLUB_GIFT_NOTIFICATION=2188,zd.INTERSTITIAL_MESSAGE=1808,zd.ROOM_AD_ERROR=1759,zd.AVAILABILITY_TIME=600,zd.HOTEL_CLOSED_AND_OPENS=3728,zd.HOTEL_CLOSES_AND_OPENS_AT=2771,zd.HOTEL_WILL_CLOSE_MINUTES=1050,zd.HOTEL_MAINTENANCE=1350,zd.JUKEBOX_PLAYLIST_FULL=105,zd.JUKEBOX_SONG_DISKS=34,zd.NOW_PLAYING=469,zd.OFFICIAL_SONG_ID=1381,zd.PLAYLIST=1748,zd.PLAYLIST_SONG_ADDED=1140,zd.TRAX_SONG_INFO=3365,zd.USER_SONG_DISKS_INVENTORY=2602,zd.CHECK_USER_NAME=563,zd.CFH_SANCTION=2782,zd.CFH_TOPICS=325,zd.CFH_SANCTION_STATUS=2221,zd.CAMPAIGN_CALENDAR_DATA=2531,zd.CAMPAIGN_CALENDAR_DOOR_OPENED=2551,zd.BUILDERS_CLUB_FURNI_COUNT=3828,zd.BUILDERS_CLUB_SUBSCRIPTION=1452,zd.CATALOG_PAGE_EXPIRATION=2668,zd.CATALOG_EARLIEST_EXPIRY=2515,zd.CLUB_GIFT_SELECTED=659,zd.TARGET_OFFER_NOT_FOUND=1237,zd.TARGET_OFFER=119,zd.DIRECT_SMS_CLUB_BUY=195,zd.ROOM_AD_PURCHASE=2468,zd.NOT_ENOUGH_BALANCE=3914,zd.LIMITED_OFFER_APPEARING_NEXT=44,zd.IS_OFFER_GIFTABLE=761,zd.CLUB_EXTENDED_OFFER=3964,zd.SEASONAL_CALENDAR_OFFER=1889,zd.COMPETITION_ENTRY_SUBMIT=1177,zd.COMPETITION_VOTING_INFO=3506,zd.COMPETITION_TIMING_CODE=1745,zd.COMPETITION_USER_PART_OF=3841,zd.COMPETITION_NO_OWNED_ROOMS=2064,zd.COMPETITION_SECONDS_UNTIL=3926,zd.BADGE_POINT_LIMITS=2501,zd.BADGE_REQUEST_FULFILLED=2998,zd.HELPER_TALENT_TRACK=3406,zd.USER_BANNED=1683,zd.BOT_RECEIVED=3684,zd.PET_LEVEL_NOTIFICATION=859,zd.PET_RECEIVED=1111,zd.MODERATION_CAUTION=1890,zd.YOUTUBE_CONTROL_VIDEO=1554,zd.YOUTUBE_DISPLAY_PLAYLISTS=1112,zd.YOUTUBE_DISPLAY_VIDEO=1411,zd.CFH_DISABLED_NOTIFY=1651,zd.QUESTION=2665,zd.POLL_CONTENTS=2997,zd.POLL_ERROR=662,zd.POLL_OFFER=3785,zd.QUESTION_ANSWERED=2589,zd.QUESTION_FINISHED=1066,zd.CFH_PENDING_CALLS=1121,zd.GUIDE_ON_DUTY_STATUS=1548,zd.GUIDE_SESSION_ATTACHED=1591,zd.GUIDE_SESSION_DETACHED=138,zd.GUIDE_SESSION_ENDED=1456,zd.GUIDE_SESSION_ERROR=673,zd.GUIDE_SESSION_INVITED_TO_GUIDE_ROOM=219,zd.GUIDE_SESSION_MESSAGE=841,zd.GUIDE_SESSION_PARTNER_IS_TYPING=1016,zd.GUIDE_SESSION_REQUESTER_ROOM=1847,zd.GUIDE_SESSION_STARTED=3209,zd.GUIDE_TICKET_CREATION_RESULT=3285,zd.GUIDE_TICKET_RESOLUTION=2674,zd.GUIDE_REPORTING_STATUS=3463,zd.HOTEL_MERGE_NAME_CHANGE=1663,zd.ISSUE_CLOSE_NOTIFICATION=934,zd.QUIZ_DATA=2927,zd.QUIZ_RESULTS=2772,zd.CFH_PENDING_CALLS_DELETED=77,zd.CFH_REPLY=3796,zd.CHAT_REVIEW_SESSION_DETACHED=30,zd.CHAT_REVIEW_SESSION_OFFERED_TO_GUIDE=735,zd.CHAT_REVIEW_SESSION_RESULTS=3276,zd.CHAT_REVIEW_SESSION_STARTED=143,zd.CHAT_REVIEW_SESSION_VOTING_STATUS=1829,zd.SCR_SEND_KICKBACK_INFO=3277,zd.PET_STATUS=1907,zd.GROUP_DEACTIVATE=3129,zd.PET_RESPECTED=2788,zd.PET_SUPPLEMENT=3441,zd.NOOBNESS_LEVEL=3738,zd.CAN_CREATE_ROOM_EVENT=2599,zd.FAVORITE_GROUP_UDPATE=3403;var Yd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,na)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M);(function(){function t(e){Object(r.a)(this,t),this._achievementId=void 0,this._level=void 0,this._badgeId=void 0,this._requiredLevel=void 0,this._state=void 0,this._achievementId=e.readInt(),this._level=e.readInt(),this._badgeId=e.readString(),this._requiredLevel=e.readInt(),this._state=e.readInt()}return Object(a.a)(t,[{key:"dispose",value:function(){this._achievementId=0,this._level=0,this._badgeId="",this._requiredLevel=0}},{key:"achievementId",get:function(){return this._achievementId}},{key:"level",get:function(){return this._level}},{key:"badgeId",get:function(){return this._badgeId}},{key:"requiredLevel",get:function(){return this._requiredLevel}},{key:"enabled",get:function(){return this._state===t.STATE_SELECTABLE}},{key:"state",get:function(){return this._state}}]),t}()).STATE_SELECTABLE=0;var Wd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,sa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Kd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ra)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Xd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,aa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),qd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,oa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Qd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ua)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Zd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ha)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Jd=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,la)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$d=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,da)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),tf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ef=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,va)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),nf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ga)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ma)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),rf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,La)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),af=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ca)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),of=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ua)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),uf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Pa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),cf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),hf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_f=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ba)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),lf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ga)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),df=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ha)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ff=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Va)}return Object(a.a)(i,[{key:"userID",get:function(){return this.getParser().userID}},{key:"userAccepts",get:function(){return this.getParser().userAccepts}},{key:"getParser",value:function(){return this.parser}}]),i}(M),vf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,za)}return Object(a.a)(i,[{key:"userID",get:function(){return this.getParser().userID}},{key:"getParser",value:function(){return this.parser}}]),i}(M),gf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ya)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Of=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Wa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xa)}return Object(a.a)(i,[{key:"firstUserID",get:function(){return this.getParser().firstUserID}},{key:"secondUserID",get:function(){return this.getParser().secondUserID}},{key:"firstUserNumItems",get:function(){return this.getParser().firstUserNumItems}},{key:"secondUserNumItems",get:function(){return this.getParser().secondUserNumItems}},{key:"firstUserNumCredits",get:function(){return this.getParser().firstUserNumCredits}},{key:"secondUserNumCredits",get:function(){return this.getParser().secondUserNumCredits}},{key:"firstUserItemArray",get:function(){return this.getParser().firstUserItemArray}},{key:"secondUserItemArray",get:function(){return this.getParser().secondUserItemArray}},{key:"getParser",value:function(){return this.parser}}]),i}(M),Ef=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Za)}return Object(a.a)(i,[{key:"userID",get:function(){return this.getParser().userID}},{key:"userCanTrade",get:function(){return this.getParser().userCanTrade}},{key:"otherUserID",get:function(){return this.getParser().otherUserID}},{key:"otherUserCanTrade",get:function(){return this.getParser().otherUserCanTrade}},{key:"getParser",value:function(){return this.parser}}]),i}(M),mf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Qa)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),If=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ja)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$a)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Tf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,eo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Rf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,io)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,no)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Af=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,so)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Sf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ro)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ao)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Nf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,uo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Df=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,oo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Mf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_o)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Cf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,lo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Lf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Oo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Uf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,yo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Pf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,mo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Io)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ff=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,To)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),xf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Bf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ko)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Gf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ao)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Hf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,No)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Vf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Do)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),zf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Co)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Yf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Lo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Wf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Kf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Xf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Bo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),qf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Go)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Qf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ho)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Zf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Jf=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Yo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$f=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ko)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),tv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ev=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Qo)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),iv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$o)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),nv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,tu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,eu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),rv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ru)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),av=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,au)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ov=function(){function t(e){Object(r.a)(this,t),this._type=void 0,this._level=void 0,this._points=void 0,this._levelRewardPoints=void 0,this._levelRewardPointType=void 0,this._bonusPoints=void 0,this._badgeId=void 0,this._badgeCode="",this._removedBadgeCode="",this._achievementID=void 0,this._category=void 0,this._showDialogToUser=void 0,this._type=e.readInt(),this._level=e.readInt(),this._badgeId=e.readInt(),this._badgeCode=e.readString(),this._points=e.readInt(),this._levelRewardPoints=e.readInt(),this._levelRewardPointType=e.readInt(),this._bonusPoints=e.readInt(),this._achievementID=e.readInt(),this._removedBadgeCode=e.readString(),this._category=e.readString(),this._showDialogToUser=e.readBoolean()}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"level",get:function(){return this._level}},{key:"points",get:function(){return this._points}},{key:"levelRewardPoints",get:function(){return this._levelRewardPoints}},{key:"levelRewardPointType",get:function(){return this._levelRewardPointType}},{key:"bonusPoints",get:function(){return this._bonusPoints}},{key:"badgeId",get:function(){return this._badgeId}},{key:"badgeCode",get:function(){return this._badgeCode}},{key:"removedBadgeCode",get:function(){return this._removedBadgeCode}},{key:"achievementID",get:function(){return this._achievementID}},{key:"category",get:function(){return this._category}},{key:"showDialogToUser",get:function(){return this._showDialogToUser}}]),t}(),uv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ou)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),cv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,uu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),hv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_v=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),lv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_u)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),dv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,lu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),fv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,du)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),vv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),gv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,vu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ov=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ou)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ev=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,pu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),mv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Tu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Iv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ru)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ku)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Tv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Su)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Rv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Au)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Nu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Av=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Cu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Sv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Uu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Pu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Nv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Dv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Mv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Bu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Cv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Lv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Uv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Pv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Wu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Fv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ku)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}},{key:"userName",get:function(){return this.getParser().userName}}]),i}(M),xv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Bv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Gv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ju)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Hv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Qu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Vv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Yu)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),zv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$u)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Yv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,tc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Wv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ec)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Kv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ac)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Xv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,nc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),qv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,sc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Qv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,oc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Zv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,uc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Jv=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$v=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),tg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_c)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),eg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ig=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ng=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Oc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,yc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),rg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,pc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ag=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,mc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),og=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ic)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ug=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),cg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Tc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),hg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Na)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_g=function(){function t(){Object(r.a)(this,t),this._itemId=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._itemId=0,!0}},{key:"parse",value:function(t){return!!t&&(this._itemId=parseInt(t.readString()),!0)}},{key:"furnitureId",get:function(){return this._itemId}}]),t}(),lg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_g)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),dg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Rc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),fg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,kc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),vg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ac)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),gg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Sc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Og=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,jc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Nc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Eg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Dc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Cc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),mg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Uc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ig=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Pc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Tg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Rg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,xc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ag=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Hc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Sg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Qc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ng=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Zc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Dg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Jc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Mg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$c)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Cg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,th)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Lg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,eh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Ug=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ih)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Pg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,nh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,sh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Fg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,rh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),xg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,oh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Bg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ch)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Gg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Hg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_h)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Vg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_h)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),zg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_h)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Yg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,lh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Wg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,dh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Kg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,fh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Xg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,bh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),qg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,vh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Qg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Zg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Oh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),Jg=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,yh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),$g=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Eh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),tO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ph)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),eO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Th)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),iO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ah)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),nO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Sh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),sO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Dh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),rO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ch)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),aO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Uh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),oO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ph)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),uO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,wh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M);uO.PRODUCT_DONATED_CODE=6,uO.BADGE_DONATED_CODE=7;var cO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),hO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,xh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),_O=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Gh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),lO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Vh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),dO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,zh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),fO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Yh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),vO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,d_)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),gO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Xn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),OO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,qn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),yO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Jn)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),EO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,$n)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),pO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,es)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),mO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,is)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),IO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ss)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,rs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),TO=function(){function t(){Object(r.a)(this,t),this._groups=void 0}return Object(a.a)(t,[{key:"flush",value:function(){return this._groups=[],!0}},{key:"parse",value:function(t){if(!t)return!1;for(var e=t.readInt();e>0;)this._groups.push(new ns(t)),e--;return!0}},{key:"groups",get:function(){return this._groups}}]),t}(),RO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,TO)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,as)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),AO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,os)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),SO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,us)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,cs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),NO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,hs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),DO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,_s)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),MO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ls)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),CO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Os)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),LO=Object(a.a)((function t(){Object(r.a)(this,t)}));LO.WATER=0,LO.LIGHT=1,LO.REVIVE=2,LO.REBREED_FERTILIZER=3,LO.SPEED_FERTILIZER=4;var UO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ys)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),PO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ms)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),wO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Is)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),FO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),xO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),BO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),GO=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),HO=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),VO=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zO=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),YO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),WO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),KO=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),XO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=[]}},{key:"assignBitmap",value:function(t){var e=Ut.generateImageUrl(t);if(e){var i=e.split(",")[1],n=Uint8Array.from(atob(i),(function(t){return t.charCodeAt(0)}));this._data.push(n.byteLength,n.buffer)}}},{key:"assignBase64",value:function(t){var e=t.split(",")[1],i=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)}));this._data.push(i.byteLength,i.buffer)}}]),t}(),qO=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;return Object(r.a)(this,i),e.call(this,t,n,s,a,o)}return Object(a.a)(i)}(XO),QO=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ZO=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),JO=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),$O=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),ty=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),ey=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),iy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ny=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"dispose",value:function(){this._data=null}},{key:"getMessageArray",value:function(){return this._data}}]),t}(),sy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ry=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ay=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),oy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),uy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),cy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),hy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),_y=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ly=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),dy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),fy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),vy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),gy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Oy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Ey=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),py=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),my=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Iy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),by=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Ty=function(){function t(e,i,n,s,a,o,u,c,h){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o,u,c,h]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ry=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ky=function(){function t(e,i,n,s,a,o,u){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o,u]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ay=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Sy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ny=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Dy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),My=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Cy=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ly=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Uy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Py=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Fy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),By=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Gy=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();Gy.CONFIRM_LEVEL_NOT_ACCEPTED=0,Gy.CONFIRM_LEVEL_NOT_SUBMITTED=1,Gy.CONFIRM_LEVEL_NOT_CONFIRMED=2,Gy.CONFIRM_LEVEL_COMMIT=3;var Hy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Vy=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zy=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Yy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Wy=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ky=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Xy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),qy=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Qy=function(){function t(){Object(r.a)(this,t),this._data=void 0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];this._data=[i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Zy=function(){function t(e){Object(r.a)(this,t),this._data=void 0;for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];this._data=[e,n.length].concat(n)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Jy=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),$y=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),tE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),eE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),iE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),nE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sE=function(){function t(){Object(r.a)(this,t),this._data=void 0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];this._data=[i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),rE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),aE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),oE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[i.length].concat(Object(T.a)(i),[e])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),uE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_E=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();_E.NO_ISSUE_ID=-1;var lE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),dE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();dE.NO_ISSUE_ID=-1;var fE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),gE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),OE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),EE=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o.length].concat(Object(T.a)(o))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),IE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),bE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),TE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),RE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),kE=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),AE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),SE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),NE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),DE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ME=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),CE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),LE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),UE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),PE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wE=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),FE=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xE=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),BE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),GE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),HE=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),VE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zE=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),YE=function(){function t(){var e=this;Object(r.a)(this,t),this._data=void 0;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];this._data=[n.length],n.forEach((function(t){e._data.push(t.k),e._data.push(t._arg_2),e._data.push(t._arg_3)}))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),WE=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),KE=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,s,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),XE=function(){function t(e,i,n){if(Object(r.a)(this,t),this._type=void 0,this._data=void 0,this._type=e,i.length===n.length){this._data=[];for(var s=0;s<i.length;s++)this._data.push(i[s]),this._data.push(n[s])}}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),qE=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),QE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ZE=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),JE=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),$E=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),tp=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s.length/2].concat(Object(T.a)(s))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ep=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ip=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),np=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a.length/2].concat(Object(T.a)(a))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),rp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ap=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),op=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),up=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_p=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),lp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),dp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),fp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vp=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),gp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Op=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ep=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ip=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),bp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Tp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Rp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),kp=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ap=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Sp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jp=function(){function t(){Object(r.a)(this,t),this._badges=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){for(var t=[],e=0;e<this._badges.length;e++)e<=this._badges.length?(t.push(e+1),t.push(this._badges[e])):(t.push(e+1),t.push(""));return t}},{key:"dispose",value:function(){}},{key:"addActivatedBadge",value:function(t){this._badges.push(t)}}]),t}(),Np=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Dp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Mp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Cp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Lp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Up=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Pp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Fp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xp=function(){function t(){Object(r.a)(this,t),this._data=void 0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];this._data=[i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Bp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Gp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Hp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Vp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zp=function(){function t(e){Object(r.a)(this,t),this._data=void 0;for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];this._data=[e,n.length].concat(n)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Yp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Wp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Kp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Xp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),qp=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Qp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Zp=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),Jp=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),$p=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),tm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),em=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),im=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){this._data=null}}]),t}(),nm=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i),[n])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[i,e.length].concat(Object(T.a)(e))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();sm.RESOLUTION_USELESS=1,sm.RESOLUTION_ABUSIVE=2,sm.RESOLUTION_RESOLVED=3;var rm=function(){function t(e,i,n,s,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a],o!=t.NO_ISSUE_ID&&this._data.push(o)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();rm.NO_ISSUE_ID=-1;var am=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n],s!=rm.NO_ISSUE_ID&&this._data.push(s)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),om=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),um=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hm=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this._data=void 0,this._data=[i,e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_m=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),lm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),dm=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n],s!=rm.NO_ISSUE_ID&&this._data.push(s)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),fm=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vm=function(){function t(e,i,n){Object(r.a)(this,t),this._data=[],this._data.push(e),this._data.push(i),this._data.push(n)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}();vm.ACTION_ALERT=0,vm.ACTION_KICK=1,vm.ACTION_MESSAGE=3,vm.ACTION_MESSAGE_AND_SOFT_KICK=4;var gm=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n],s!=rm.NO_ISSUE_ID&&this._data.push(s)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Om=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(r.a)(this,t),this._data=[],this._data.push(e),this._data.push(i),this._data.push(""),this._data.push(""),this._data.push(n),s!=rm.NO_ISSUE_ID&&this._data.push(s)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ym=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n],s!=rm.NO_ISSUE_ID&&this._data.push(s)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Em=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pm=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mm=function(){function t(e,i,n,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s],a!=rm.NO_ISSUE_ID&&this._data.push(a)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Im=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e.length].concat(Object(T.a)(e),[i,n,s])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),bm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e.length].concat(Object(T.a)(e))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Tm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Rm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),km=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Am=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Sm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Nm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Dm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Mm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Cm=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Lm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Um=Object(a.a)((function t(){Object(r.a)(this,t)}));Um.ACHIEVEMENT_LIST=219,Um.AUTHENTICATION=-1,Um.BOT_CONFIGURATION=1986,Um.BOT_PICKUP=3323,Um.BOT_PLACE=1592,Um.BOT_SKILL_SAVE=2624,Um.GET_CLUB_OFFERS=3285,Um.GET_CLUB_GIFT_INFO=487,Um.GET_CATALOG_INDEX=1195,Um.GET_CATALOG_PAGE=412,Um.CATALOG_PURCHASE=3492,Um.CATALOG_PURCHASE_GIFT=1411,Um.GET_PRODUCT_OFFER=2594,Um.CLIENT_LATENCY=295,Um.CLIENT_LATENCY_MEASURE=96,Um.CLIENT_POLICY=26979,Um.CLIENT_PONG=2596,Um.CLIENT_TOOLBAR_TOGGLE=2313,Um.CLIENT_VARIABLES=1053,Um.GET_CURRENT_TIMING_CODE=2912,Um.DESKTOP_NEWS=1827,Um.DESKTOP_VIEW=105,Um.GET_BUNDLE_DISCOUNT_RULESET=223,Um.EVENT_TRACKER=3457,Um.FIND_NEW_FRIENDS=516,Um.FURNITURE_ALIASES=3898,Um.FURNITURE_FLOOR_UPDATE=248,Um.FURNITURE_MULTISTATE=99,Um.FURNITURE_PICKUP=3456,Um.FURNITURE_PLACE=1258,Um.FURNITURE_POSTIT_PLACE=2248,Um.FURNITURE_POSTIT_SAVE_STICKY_POLE=3283,Um.FURNITURE_RANDOMSTATE=3617,Um.FURNITURE_WALL_MULTISTATE=210,Um.FURNITURE_WALL_UPDATE=168,Um.GAMES_INIT=2914,Um.GAMES_LIST=741,Um.GET_GIFT_WRAPPING_CONFIG=418,Um.GROUP_ADMIN_ADD=2894,Um.GROUP_ADMIN_REMOVE=722,Um.GROUP_CREATE_OPTIONS=798,Um.GROUP_FAVORITE=3549,Um.GET_FORUM_STATS=3149,Um.GET_FORUM_THREADS=873,Um.GET_FORUMS_LIST=436,Um.GET_FORUM_MESSAGES=232,Um.GET_FORUM_THREAD=3900,Um.GET_UNREAD_FORUMS_COUNT=2908,Um.FORUM_MODERATE_MESSAGE=286,Um.FORUM_MODERATE_THREAD=1397,Um.FORUM_POST_MESSAGE=3529,Um.UPDATE_FORUM_READ_MARKER=1855,Um.UPDATE_FORUM_SETTINGS=2214,Um.FORUM_UPDATE_THREAD=3045,Um.GROUP_INFO=2991,Um.GROUP_DELETE=1134,Um.GROUP_MEMBER_REMOVE_CONFIRM=3593,Um.GROUP_MEMBER_REMOVE=593,Um.GROUP_MEMBERS=312,Um.GROUP_MEMBERSHIPS=367,Um.GROUP_REQUEST=998,Um.GROUP_REQUEST_ACCEPT=3386,Um.GROUP_REQUEST_DECLINE=1894,Um.GROUP_SETTINGS=1004,Um.GROUP_PARTS=813,Um.GROUP_BUY=230,Um.GROUP_SAVE_INFORMATION=3137,Um.GROUP_SAVE_BADGE=1991,Um.GROUP_SAVE_COLORS=1764,Um.GROUP_SAVE_PREFERENCES=3435,Um.GROUP_BADGES=21,Um.INVENTORY_UNKNOWN=1371,Um.ITEM_CLOTHING_REDEEM=3374,Um.ITEM_COLOR_WHEEL_CLICK=2144,Um.ITEM_DICE_CLICK=1990,Um.ITEM_DICE_CLOSE=1533,Um.ITEM_DIMMER_SAVE=1648,Um.ITEM_DIMMER_SETTINGS=2813,Um.ITEM_DIMMER_TOGGLE=2296,Um.ITEM_EXCHANGE_REDEEM=3115,Um.ITEM_PAINT=711,Um.SET_OBJECT_DATA=3608,Um.ITEM_STACK_HELPER=3839,Um.ITEM_WALL_CLICK=210,Um.ITEM_WALL_UPDATE=168,Um.MARKETPLACE_CONFIG=2597,Um.ACCEPT_FRIEND=137,Um.MESSENGER_CHAT=3567,Um.DECLINE_FRIEND=2890,Um.FOLLOW_FRIEND=3997,Um.MESSENGER_FRIENDS=1523,Um.MESSENGER_INIT=2781,Um.MESSENGER_RELATIONSHIPS=2138,Um.SET_RELATIONSHIP_STATUS=3768,Um.REMOVE_FRIEND=1689,Um.REQUEST_FRIEND=3157,Um.GET_FRIEND_REQUESTS=2448,Um.SEND_ROOM_INVITE=1276,Um.HABBO_SEARCH=1210,Um.FRIEND_LIST_UPDATE=1419,Um.MOD_TOOL_USER_INFO=3295,Um.NAVIGATOR_CATEGORIES=3027,Um.NAVIGATOR_INIT=2110,Um.NAVIGATOR_SEARCH=249,Um.NAVIGATOR_SEARCH_CLOSE=1834,Um.NAVIGATOR_SEARCH_OPEN=637,Um.NAVIGATOR_SEARCH_SAVE=2226,Um.NAVIGATOR_SETTINGS=1782,Um.NAVIGATOR_SETTINGS_SAVE=3159,Um.NAVIGATOR_CATEGORY_LIST_MODE=1202,Um.PET_INFO=2934,Um.PET_PICKUP=1581,Um.PET_PLACE=2647,Um.PET_RESPECT=3202,Um.PET_RIDE=1036,Um.PET_MOVE=3449,Um.RECYCLER_PRIZES=398,Um.RELEASE_VERSION=4e3,Um.CALL_FOR_HELP=1691,Um.ROOM_AMBASSADOR_ALERT=2996,Um.ROOM_BAN_GIVE=1477,Um.ROOM_BAN_LIST=2267,Um.ROOM_BAN_REMOVE=992,Um.ROOM_CREATE=2752,Um.ROOM_DELETE=532,Um.ROOM_DOORBELL=1644,Um.ROOM_ENTER=2312,Um.ROOM_FAVORITE=3817,Um.ROOM_FAVORITE_REMOVE=309,Um.ROOM_INFO=2230,Um.ROOM_KICK=1320,Um.ROOM_LIKE=3582,Um.ROOM_MODEL=2300,Um.GET_OCCUPIED_TILES=1687,Um.GET_ROOM_ENTRY_TILE=3559,Um.ROOM_MODEL_SAVE=875,Um.ROOM_MUTE=3637,Um.ROOM_MUTE_USER=3485,Um.ROOM_RIGHTS_GIVE=808,Um.ROOM_RIGHTS_LIST=3385,Um.ROOM_RIGHTS_REMOVE=2064,Um.ROOM_RIGHTS_REMOVE_ALL=2683,Um.ROOM_RIGHTS_REMOVE_OWN=3182,Um.ROOM_SETTINGS=3129,Um.ROOM_SETTINGS_SAVE=1969,Um.ROOM_STAFF_PICK=1918,Um.SECURITY_MACHINE=2490,Um.SECURITY_TICKET=2419,Um.TRADE=1481,Um.TRADE_ACCEPT=3863,Um.TRADE_CANCEL=2341,Um.TRADE_CLOSE=2551,Um.TRADE_CONFIRM=2760,Um.TRADE_ITEM=3107,Um.TRADE_ITEM_REMOVE=3845,Um.TRADE_ITEMS=1263,Um.TRADE_UNACCEPT=1444,Um.UNIT_ACTION=2456,Um.UNIT_CHAT=1314,Um.UNIT_CHAT_SHOUT=2085,Um.UNIT_CHAT_WHISPER=1543,Um.UNIT_DANCE=2080,Um.UNIT_DROP_HAND_ITEM=2814,Um.UNIT_GIVE_HANDITEM=2941,Um.UNIT_LOOK=3301,Um.UNIT_POSTURE=2235,Um.UNIT_SIGN=1975,Um.UNIT_TYPING=1597,Um.UNIT_TYPING_STOP=1474,Um.UNIT_WALK=3320,Um.USER_BADGES=2769,Um.USER_BADGES_CURRENT=2091,Um.USER_BADGES_CURRENT_UPDATE=644,Um.USER_BOTS=3848,Um.USER_CURRENCY=273,Um.USER_EFFECT_ACTIVATE=2959,Um.USER_EFFECT_ENABLE=1752,Um.USER_FIGURE=2730,Um.USER_FURNITURE=3150,Um.USER_FURNITURE2=3500,Um.USER_HOME_ROOM=1740,Um.USER_INFO=357,Um.USER_MOTTO=2228,Um.USER_IGNORED=3878,Um.USER_PETS=3095,Um.USER_PROFILE=3265,Um.USER_PROFILE_BY_NAME=2249,Um.USER_RESPECT=2694,Um.GET_SOUND_SETTINGS=2388,Um.USER_SETTINGS_CAMERA=1461,Um.USER_SETTINGS_CHAT_STYLE=1030,Um.USER_SETTINGS_INVITES=1086,Um.USER_SETTINGS_OLD_CHAT=1262,Um.USER_SETTINGS_VOLUME=1367,Um.USER_SUBSCRIPTION=3166,Um.GET_WARDROBE=2742,Um.SAVE_WARDROBE_OUTFIT=800,Um.USER_TAGS=17,Um.VISIT_USER=2970,Um.WIRED_ACTION_SAVE=2281,Um.WIRED_APPLY_SNAPSHOT=3373,Um.WIRED_CONDITION_SAVE=3203,Um.WIRED_OPEN=768,Um.WIRED_TRIGGER_SAVE=1520,Um.GET_ITEM_DATA=3964,Um.ONE_WAY_DOOR_CLICK=2765,Um.REMOVE_WALL_ITEM=3336,Um.SET_ITEM_DATA=3666,Um.CATALOG_REDEEM_VOUCHER=339,Um.ROOM_TONER_APPLY=2880,Um.FRIEND_FURNI_CONFIRM_LOCK=3775,Um.MANNEQUIN_SAVE_NAME=2850,Um.MANNEQUIN_SAVE_LOOK=2209,Um.PRESENT_OPEN_PRESENT=3558,Um.CATALOG_SELECT_VIP_GIFT=2276,Um.USER_IGNORE_ID=3314,Um.USER_IGNORE=1117,Um.USER_UNIGNORE=2061,Um.MODTOOL_REQUEST_ROOM_INFO=707,Um.MODTOOL_CHANGE_ROOM_SETTINGS=3260,Um.MODTOOL_REQUEST_USER_CHATLOG=1391,Um.MODTOOL_REQUEST_ROOM_CHATLOG=2587,Um.MODTOOL_SANCTION_ALERT=229,Um.MODTOOL_SANCTION_BAN=2766,Um.MODTOOL_SANCTION_KICK=2582,Um.MODTOOL_SANCTION_TRADELOCK=3742,Um.MODTOOL_ALERTEVENT=1840,Um.MODTOOL_SANCTION_MUTE=1945,Um.MODTOOL_REQUEST_USER_ROOMS=3526,Um.MODTOOL_ROOM_ALERT=3842,Um.MODTOOL_PREFERENCES=31,Um.CLOSE_ISSUE_DEFAULT_ACTION=2717,Um.CLOSE_ISSUES=2067,Um.DEFAULT_SANCTION=1681,Um.GET_CFH_CHATLOG=211,Um.MODTOOL_SANCTION=1392,Um.PICK_ISSUES=15,Um.RELEASE_ISSUES=1572,Um.CONVERT_GLOBAL_ROOM_ID=314,Um.REQUEST_SELL_ITEM=848,Um.REQUEST_MARKETPLACE_ITEM_STATS=3288,Um.MARKETPLACE_SELL_ITEM=3447,Um.MARKETPLACE_REQUEST_OWN_ITEMS=2105,Um.MARKETPLACE_TAKE_BACK_ITEM=434,Um.MARKETPLACE_REDEEM_CREDITS=2650,Um.MARKETPLACE_REQUEST_OFFERS=2407,Um.MARKETPLACE_BUY_OFFER=1603,Um.MARKETPLACE_BUY_TOKENS=1866,Um.CATALOG_REQUESET_PET_BREEDS=1756,Um.APPROVE_NAME=2109,Um.UNIT_GIVE_HANDITEM_PET=2768,Um.PET_MOUNT=1036,Um.PET_SUPPLEMENT=749,Um.FURNITURE_GROUP_INFO=2651,Um.ACHIEVEMENT_RESOLUTION_OPEN=359,Um.USE_PET_PRODUCT=1328,Um.REMOVE_PET_SADDLE=186,Um.TOGGLE_PET_RIDING=1472,Um.TOGGLE_PET_BREEDING=3379,Um.UNSEEN_RESET_CATEGORY=3493,Um.UNSEEN_RESET_ITEMS=2343,Um.COMMUNITY_GOAL_VOTE_COMPOSER=3536,Um.GET_PROMO_ARTICLES=1827,Um.ACCEPT_QUEST=3604,Um.ACTIVATE_QUEST=793,Um.CANCEL_QUEST=3133,Um.FRIEND_REQUEST_QUEST_COMPLETE=1148,Um.GET_COMMUNITY_GOAL_EARNED_PRIZES=2688,Um.GET_COMMUNITY_GOAL_HALL_OF_FAME=2167,Um.GET_COMMUNITY_GOAL_PROGRESS=1145,Um.GET_CONCURRENT_USERS_GOAL_PROGRESS=1343,Um.GET_CONCURRENT_USERS_REWARD=3872,Um.GET_DAILY_QUEST=2486,Um.GET_QUESTS=3333,Um.GET_SEASONAL_QUESTS_ONLY=1190,Um.OPEN_QUEST_TRACKER=2750,Um.REDEEM_COMMUNITY_GOAL_PRIZE=90,Um.REJECT_QUEST=2397,Um.START_CAMPAIGN=1697,Um.GET_BONUS_RARE_INFO=957,Um.CRAFT=3591,Um.CRAFT_SECRET=1251,Um.GET_CRAFTABLE_PRODUCTS=633,Um.GET_CRAFTING_RECIPE=1173,Um.GET_CRAFTING_RECIPES_AVAILABLE=3086,Um.PHOTO_COMPETITION=3959,Um.PUBLISH_PHOTO=2068,Um.PURCHASE_PHOTO=2408,Um.RENDER_ROOM=3226,Um.RENDER_ROOM_THUMBNAIL=1982,Um.REQUEST_CAMERA_CONFIGURATION=796,Um.ADD_JUKEBOX_DISK=753,Um.GET_JUKEBOX_PLAYLIST=1435,Um.GET_NOW_PLAYING=1325,Um.GET_OFFICIAL_SONG_ID=3189,Um.GET_SONG_INFO=3082,Um.GET_SOUND_MACHINE_PLAYLIST=3498,Um.GET_USER_SONG_DISKS=2304,Um.REMOVE_JUKEBOX_DISK=3050,Um.INTERSTITIAL_SHOWN=1109,Um.GET_INTERSTITIAL=2519,Um.CHANGE_USERNAME=2977,Um.CHECK_USERNAME=3950,Um.OPEN_CAMPAIGN_CALENDAR_DOOR_STAFF=3889,Um.OPEN_CAMPAIGN_CALENDAR_DOOR=2257,Um.BUILDERS_CLUB_PLACE_ROOM_ITEM=1051,Um.BUILDERS_CLUB_PLACE_WALL_ITEM=462,Um.BUILDERS_CLUB_QUERY_FURNI_COUNT=2529,Um.GET_CATALOG_PAGE_EXPIRATION=742,Um.GET_CATALOG_PAGE_WITH_EARLIEST_EXP=3135,Um.GET_DIRECT_CLUB_BUY_AVAILABLE=801,Um.GET_HABBO_BASIC_MEMBERSHIP_EXTEND_OFFER=603,Um.GET_HABBO_CLUB_EXTEND_OFFER=2462,Um.GET_IS_OFFER_GIFTABLE=1347,Um.GET_LIMITED_OFFER_APPEARING_NEXT=410,Um.GET_NEXT_TARGETED_OFFER=596,Um.GET_ROOM_AD_PURCHASE_INFO=1075,Um.GET_SEASONAL_CALENDAR_DAILY_OFFER=3257,Um.GET_TARGETED_OFFER=2487,Um.MARK_CATALOG_NEW_ADDITIONS_PAGE_OPENED=2150,Um.PURCHASE_BASIC_MEMBERSHIP_EXTENSION=2735,Um.PURCHASE_ROOM_AD=777,Um.PURCHASE_TARGETED_OFFER=1826,Um.PURCHASE_VIP_MEMBERSHIP_EXTENSION=3407,Um.ROOM_AD_PURCHASE_INITIATED=2283,Um.SET_TARGETTED_OFFER_STATE=2041,Um.SHOP_TARGETED_OFFER_VIEWED=3483,Um.HELPER_TALENT_TRACK=196,Um.FORWARD_TO_A_COMPETITION_ROOM=172,Um.FORWARD_TO_A_SUBMITTABLE_ROOM=1450,Um.FORWARD_TO_RANDOM_COMPETITION_ROOM=865,Um.GET_IS_USER_PART_OF_COMPETITION=2077,Um.GET_SECONDS_UNTIL=271,Um.ROOM_COMPETITION_INIT=1334,Um.SUBMIT_ROOM_TO_COMPETITION=2595,Um.VOTE_FOR_ROOM=143,Um.GET_GIFT=2436,Um.RESET_PHONE_NUMBER_STATE=2741,Um.SET_PHONE_NUMBER_VERIFICATION_STATUS=1379,Um.TRY_PHONE_NUMBER=790,Um.VERIFY_CODE=2721,Um.CONTROL_YOUTUBE_DISPLAY_PLAYBACK=3005,Um.GET_YOUTUBE_DISPLAY_STATUS=336,Um.SET_YOUTUBE_DISPLAY_PLAYLIST=2069,Um.GO_TO_FLAT=685,Um.CALL_FOR_HELP_FROM_FORUM_MESSAGE=1412,Um.CALL_FOR_HELP_FROM_FORUM_THREAD=534,Um.CALL_FOR_HELP_FROM_IM=2950,Um.CALL_FOR_HELP_FROM_PHOTO=2492,Um.CALL_FOR_HELP_FROM_SELFIE=2755,Um.CHAT_REVIEW_GUIDE_DECIDES=3365,Um.CHAT_REVIEW_GUIDE_DETACHED=2501,Um.CHAT_REVIEW_GUIDE_VOTE=3961,Um.CHAT_REVIEW_SESSION_CREATE=3060,Um.DELETE_PENDING_CALLS_FOR_HELP=3605,Um.GET_CFH_STATUS=2746,Um.GET_FAQ_CATEGORY=3445,Um.GET_FAQ_TEXT=1849,Um.GET_GUIDE_REPORTING_STATUS=3786,Um.GET_PENDING_CALLS_FOR_HELP=3267,Um.GET_QUIZ_QUESTIONS=1296,Um.GUIDE_SESSION_CREATE=3338,Um.GUIDE_SESSION_FEEDBACK=477,Um.GUIDE_SESSION_GET_REQUESTER_ROOM=1052,Um.GUIDE_SESSION_GUIDE_DECIDES=1424,Um.GUIDE_SESSION_INVITE_REQUESTER=234,Um.GUIDE_SESSION_IS_TYPING=519,Um.GUIDE_SESSION_MESSAGE=3899,Um.GUIDE_SESSION_ON_DUTY_UPDATE=1922,Um.GUIDE_SESSION_REPORT=3969,Um.GUIDE_SESSION_REQUESTER_CANCELS=291,Um.GUIDE_SESSION_RESOLVED=887,Um.POST_QUIZ_ANSWERS=3720,Um.SEARCH_FAQS=2031,Um.POLL_ANSWER=3505,Um.POLL_REJECT=1773,Um.POLL_START=109,Um.DISCONNECT=2445,Um.SCR_GET_KICKBACK_INFO=869,Um.COMPOST_PLANT=3835,Um.HARVEST_PET=1521,Um.GROUP_UNFAVORITE=1820;var Pm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Fm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Bm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Gm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Hm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Vm=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zm=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n.length].concat(Object(T.a)(n))}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ym=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Wm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Km=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Xm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),qm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Qm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Zm=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Jm=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),$m=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),tI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),eI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),iI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),nI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),rI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),aI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),oI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),uI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hI=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_I=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),lI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),dI=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),fI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),gI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),OI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yI=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),EI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pI=function(){function t(){Object(r.a)(this,t),this._data=void 0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];this._data=[i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),II=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),bI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),TI=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i?1:0,n?1:0]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),RI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),kI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),AI=function(){function t(e,i,n,s,a,o,u,c,h,_,l,d,f,v,g,O,y,E,p,m,I,b,T,R){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o,u,c,h,_,l,d,f,v,g,O,y,E,p,m,I,b,T,R]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),SI=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),NI=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),DI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),MI=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(DI),CI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),LI=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(DI),UI=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),PI=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),FI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xI=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),BI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,2*i.size];var a,o=Object(s.a)(i.entries());try{for(o.s();!(a=o.n()).done;){var u=Object(n.a)(a.value,2),c=u[0],h=u[1];this._data.push(c,h)}}catch(_){o.e(_)}finally{o.f()}}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),GI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),HI=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),VI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zI=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),YI=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),WI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),KI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),XI=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._itemId=void 0,this._category=void 0,this._wallLocation=void 0,this._x=void 0,this._y=void 0,this._direction=void 0,this._itemId=e,this._category=i,this._wallLocation=n,this._x=s,this._y=a,this._direction=o}return Object(a.a)(t,[{key:"getMessageArray",value:function(){switch(this._category){case _t.FLOOR:return["".concat(this._itemId," ").concat(this._x," ").concat(this._y," ").concat(this._direction)];case _t.WALL:return["".concat(this._itemId," ").concat(this._wallLocation," ")];default:return[]}}},{key:"dispose",value:function(){}}]),t}(),qI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),QI=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ZI=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),JI=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),$I=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),tb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),eb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ib=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),nb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),rb=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100;Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ab=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ob=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ub=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hb=function(){function t(e,i,n,s){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_b=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),lb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),db=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),fb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),gb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ob=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yb=function(){function t(e,i,n,s,a,o,u){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o,u]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Eb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pb=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n,s,a,o]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ib=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),bb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Tb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Rb=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e+" "+i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),kb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ab=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Sb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),jb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Nb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Db=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Mb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Cb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Lb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Ub=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Pb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),wb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Fb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),xb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Bb=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i),[n,s.length],Object(T.a)(s),[a,o])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Gb=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i),[n,s.length],Object(T.a)(s),[a])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Hb=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._data=void 0,this._data=[e,i.length].concat(Object(T.a)(i),[n,s.length],Object(T.a)(s),[a])}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Vb=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),zb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Yb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Wb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Kb=function(){function t(){Object(r.a)(this,t),this._data=void 0;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];this._data=[i.length].concat(i)}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Xb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),qb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Qb=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Zb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),Jb=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),$b=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),tT=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),eT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),iT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),nT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),sT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),rT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),aT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),oT=function(){function t(e,i){Object(r.a)(this,t),this._data=void 0,this._data=[e,i]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),uT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),cT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),hT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),_T=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),lT=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),dT=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),fT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),vT=function(){function t(){Object(r.a)(this,t),this._data=void 0,this._data=[]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),gT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),OT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),yT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),ET=function(){function t(e,i,n){Object(r.a)(this,t),this._data=void 0,this._data=[e,i,n]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),pT=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._data=[e]}return Object(a.a)(t,[{key:"getMessageArray",value:function(){return this._data}},{key:"dispose",value:function(){}}]),t}(),mT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ms)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),IT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ls)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),bT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Us)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),TT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Ps)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),RT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ws)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),kT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Fs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),AT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,Br)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),ST=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,lc)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),jT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,ah)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),NT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,uh)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),DT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t,gs)}return Object(a.a)(i,[{key:"getParser",value:function(){return this.parser}}]),i}(M),MT=function(){function t(){Object(r.a)(this,t),this._events=void 0,this._composers=void 0,this._events=new Map,this._composers=new Map,this.registerEvents(),this.registerComposers()}return Object(a.a)(t,[{key:"registerEvents",value:function(){this._events.set(zd.INTERSTITIAL_MESSAGE,f_),this._events.set(zd.ROOM_AD_ERROR,v_),this._events.set(zd.AVAILABILITY_STATUS,g_),this._events.set(zd.AVAILABILITY_TIME,O_),this._events.set(zd.HOTEL_CLOSED_AND_OPENS,y_),this._events.set(zd.HOTEL_CLOSES_AND_OPENS_AT,E_),this._events.set(zd.HOTEL_WILL_CLOSE_MINUTES,p_),this._events.set(zd.HOTEL_MAINTENANCE,m_),this._events.set(zd.USER_CHANGE_NAME,I_),this._events.set(zd.CHECK_USER_NAME,b_),this._events.set(zd.USER_FIGURE,T_),this._events.set(zd.USER_OUTFITS,k_),this._events.set(zd.ADD_BOT_TO_INVENTORY,A_),this._events.set(zd.USER_BOTS,S_),this._events.set(zd.BOT_RECEIVED,j_),this._events.set(zd.REMOVE_BOT_FROM_INVENTORY,N_),this._events.set(zd.CFH_SANCTION,Ji),this._events.set(zd.CFH_TOPICS,en),this._events.set(zd.CFH_SANCTION_STATUS,nn),this._events.set(zd.CAMERA_PUBLISH_STATUS,D_),this._events.set(zd.CAMERA_PURCHASE_OK,M_),this._events.set(zd.CAMERA_STORAGE_URL,C_),this._events.set(zd.COMPETITION_STATUS,L_),this._events.set(zd.INIT_CAMERA,U_),this._events.set(zd.THUMBNAIL_STATUS,P_),this._events.set(zd.CAMPAIGN_CALENDAR_DATA,w_),this._events.set(zd.CAMPAIGN_CALENDAR_DOOR_OPENED,F_),this._events.set(zd.BONUS_RARE_INFO,x_),this._events.set(zd.BUILDERS_CLUB_FURNI_COUNT,B_),this._events.set(zd.BUILDERS_CLUB_SUBSCRIPTION,G_),this._events.set(zd.BUNDLE_DISCOUNT_RULESET,V_),this._events.set(zd.CATALOG_PAGE_EXPIRATION,z_),this._events.set(zd.CATALOG_PAGE,Y_),this._events.set(zd.CATALOG_PAGE_LIST,W_),this._events.set(zd.CATALOG_EARLIEST_EXPIRY,K_),this._events.set(zd.CATALOG_PUBLISHED,X_),this._events.set(zd.CLUB_GIFT_INFO,q_),this._events.set(zd.CLUB_GIFT_SELECTED,Q_),this._events.set(zd.DIRECT_SMS_CLUB_BUY,Z_),this._events.set(zd.GIFT_RECEIVER_NOT_FOUND,J_),this._events.set(zd.GIFT_WRAPPER_CONFIG,$_),this._events.set(zd.CLUB_EXTENDED_OFFER,tl),this._events.set(zd.CLUB_OFFERS,el),this._events.set(zd.IS_OFFER_GIFTABLE,il),this._events.set(zd.LIMITED_SOLD_OUT,nl),this._events.set(zd.LIMITED_OFFER_APPEARING_NEXT,sl),this._events.set(zd.NOT_ENOUGH_BALANCE,rl),this._events.set(zd.PRODUCT_OFFER,al),this._events.set(zd.CATALOG_PURCHASE_ERROR,ol),this._events.set(zd.CATALOG_PURCHASE_NOT_ALLOWED,ul),this._events.set(zd.CATALOG_PURCHASE_OK,cl),this._events.set(zd.ROOM_AD_PURCHASE,hl),this._events.set(zd.SEASONAL_CALENDAR_OFFER,_l),this._events.set(zd.CATALOG_RECEIVE_PET_BREEDS,ll),this._events.set(zd.TARGET_OFFER,dl),this._events.set(zd.TARGET_OFFER_NOT_FOUND,fl),this._events.set(zd.REDEEM_VOUCHER_ERROR,vl),this._events.set(zd.REDEEM_VOUCHER_OK,gl),this._events.set(zd.CLIENT_PING,Ii),this._events.set(zd.COMPETITION_ENTRY_SUBMIT,mT),this._events.set(zd.COMPETITION_VOTING_INFO,IT),this._events.set(zd.COMPETITION_TIMING_CODE,bT),this._events.set(zd.COMPETITION_USER_PART_OF,TT),this._events.set(zd.COMPETITION_NO_OWNED_ROOMS,RT),this._events.set(zd.COMPETITION_SECONDS_UNTIL,kT),this._events.set(zd.CRAFTABLE_PRODUCTS,Ol),this._events.set(zd.CRAFTING_RECIPE,yl),this._events.set(zd.CRAFTING_RECIPES_AVAILABLE,El),this._events.set(zd.CRAFTING_RESULT,pl),this._events.set(zd.DESKTOP_VIEW,ml),this._events.set(zd.MESSENGER_ACCEPT_FRIENDS,Il),this._events.set(zd.MESSENGER_FIND_FRIENDS,bl),this._events.set(zd.MESSENGER_FOLLOW_FAILED,Tl),this._events.set(zd.MESSENGER_FRIENDS,Rl),this._events.set(zd.MESSENGER_UPDATE,kl),this._events.set(zd.MESSENGER_FRIEND_NOTIFICATION,Al),this._events.set(zd.MESSENGER_REQUESTS,Sl),this._events.set(zd.MESSENGER_SEARCH,jl),this._events.set(zd.MESSENGER_INSTANCE_MESSAGE_ERROR,Nl),this._events.set(zd.MESSENGER_MESSAGE_ERROR,Dl),this._events.set(zd.MESSENGER_INIT,Ml),this._events.set(zd.MESSENGER_MINIMAIL_NEW,Cl),this._events.set(zd.MESSENGER_MINIMAIL_COUNT,Ll),this._events.set(zd.MESSENGER_CHAT,Ul),this._events.set(zd.MESSENGER_REQUEST,Pl),this._events.set(zd.MESSENGER_INVITE_ERROR,wl),this._events.set(zd.MESSENGER_INVITE,Fl),this._events.set(zd.LOAD_GAME_URL,xl),this._events.set(zd.GROUP_INFO,zl),this._events.set(zd.GROUP_MEMBER_REMOVE_CONFIRM,Vl),this._events.set(zd.GROUP_MEMBERS,Yl),this._events.set(zd.GROUP_CREATE_OPTIONS,Hl),this._events.set(zd.GROUP_BADGE_PARTS,Gl),this._events.set(zd.GROUP_SETTINGS,Kl),this._events.set(zd.GROUP_PURCHASED,Wl),this._events.set(zd.GROUP_BADGES,kO),this._events.set(zd.GROUP_DEACTIVATE,Xl),this._events.set(zd.GROUP_FORUM_DATA,Jl),this._events.set(zd.GROUP_FORUM_LIST,td),this._events.set(zd.GROUP_FORUM_THREADS,nd),this._events.set(zd.GROUP_FORUM_POST,ad),this._events.set(zd.GROUP_FORUM_POST_THREAD,ud),this._events.set(zd.GROUP_FORUM_THREAD_MESSAGES,hd),this._events.set(zd.GROUP_FORUM_UNREAD_COUNT,ld),this._events.set(zd.GROUP_FORUM_UPDATE_MESSAGE,fd),this._events.set(zd.GROUP_FORUM_UPDATE_THREAD,gd),this._events.set(zd.CFH_DISABLED_NOTIFY,yd),this._events.set(zd.CFH_PENDING_CALLS_DELETED,Ed),this._events.set(zd.CFH_PENDING_CALLS,pd),this._events.set(zd.CFH_REPLY,md),this._events.set(zd.CFH_RESULT_MESSAGE,Id),this._events.set(zd.GUIDE_ON_DUTY_STATUS,Sd),this._events.set(zd.GUIDE_SESSION_ATTACHED,jd),this._events.set(zd.GUIDE_SESSION_DETACHED,Nd),this._events.set(zd.GUIDE_SESSION_ENDED,Dd),this._events.set(zd.GUIDE_SESSION_ERROR,Md),this._events.set(zd.GUIDE_SESSION_INVITED_TO_GUIDE_ROOM,Cd),this._events.set(zd.GUIDE_SESSION_MESSAGE,Ld),this._events.set(zd.GUIDE_SESSION_PARTNER_IS_TYPING,Ud),this._events.set(zd.GUIDE_SESSION_REQUESTER_ROOM,Pd),this._events.set(zd.GUIDE_SESSION_STARTED,wd),this._events.set(zd.GUIDE_TICKET_CREATION_RESULT,Fd),this._events.set(zd.GUIDE_TICKET_RESOLUTION,xd),this._events.set(zd.GUIDE_REPORTING_STATUS,AT),this._events.set(zd.HOTEL_MERGE_NAME_CHANGE,Bd),this._events.set(zd.ISSUE_CLOSE_NOTIFICATION,Gd),this._events.set(zd.QUIZ_DATA,Hd),this._events.set(zd.QUIZ_RESULTS,Vd),this._events.set(zd.CHAT_REVIEW_SESSION_DETACHED,bd),this._events.set(zd.CHAT_REVIEW_SESSION_OFFERED_TO_GUIDE,Td),this._events.set(zd.CHAT_REVIEW_SESSION_RESULTS,Rd),this._events.set(zd.CHAT_REVIEW_SESSION_STARTED,kd),this._events.set(zd.CHAT_REVIEW_SESSION_VOTING_STATUS,Ad),this._events.set(zd.ACHIEVEMENT_PROGRESSED,Yd),this._events.set(zd.ACHIEVEMENT_LIST,Wd),this._events.set(zd.USER_ACHIEVEMENT_SCORE,Kd),this._events.set(zd.USER_EFFECT_ACTIVATE,Xd),this._events.set(zd.USER_EFFECT_LIST_ADD,qd),this._events.set(zd.USER_EFFECT_LIST_REMOVE,Qd),this._events.set(zd.USER_EFFECT_LIST,Zd),this._events.set(zd.USER_BADGES,tf),this._events.set(zd.USER_BADGES_ADD,$d),this._events.set(zd.BADGE_POINT_LIMITS,Jd),this._events.set(zd.BADGE_REQUEST_FULFILLED,ef),this._events.set(zd.USER_CLOTHING,nf),this._events.set(zd.USER_FURNITURE_ADD,sf),this._events.set(zd.USER_FURNITURE,rf),this._events.set(zd.USER_FURNITURE_REFRESH,af),this._events.set(zd.USER_FURNITURE_REMOVE,of),this._events.set(zd.USER_FURNITURE_POSTIT_PLACED,uf),this._events.set(zd.USER_PETS,_f),this._events.set(zd.USER_PET_REMOVE,df),this._events.set(zd.USER_PET_ADD,hf),this._events.set(zd.PET_RECEIVED,lf),this._events.set(zd.PET_PLACING_ERROR,Ov),this._events.set(zd.YOUTUBE_CONTROL_VIDEO,Rg),this._events.set(zd.YOUTUBE_DISPLAY_PLAYLISTS,kg),this._events.set(zd.YOUTUBE_DISPLAY_VIDEO,Ag),this._events.set(zd.TRADE_ACCEPTED,ff),this._events.set(zd.TRADE_CLOSED,vf),this._events.set(zd.TRADE_COMPLETED,gf),this._events.set(zd.TRADE_CONFIRMATION,Of),this._events.set(zd.TRADE_LIST_ITEM,yf),this._events.set(zd.TRADE_NOT_OPEN,Ef),this._events.set(zd.TRADE_OPEN_FAILED,mf),this._events.set(zd.TRADE_OPEN,pf),this._events.set(zd.TRADE_OTHER_NOT_ALLOWED,If),this._events.set(zd.TRADE_YOU_NOT_ALLOWED,bf),this._events.set(zd.COMMUNITY_GOAL_VOTE_EVENT,Rf),this._events.set(zd.PROMO_ARTICLES,Tf),this._events.set(zd.MARKETPLACE_AFTER_ORDER_STATUS,kf),this._events.set(zd.MARKETPLACE_CANCEL_SALE,Af),this._events.set(zd.MARKETPLACE_SELL_ITEM,Sf),this._events.set(zd.MARKETPLACE_CONFIG,jf),this._events.set(zd.MARKETPLACE_ITEM_STATS,Nf),this._events.set(zd.MARKETPLACE_ITEM_POSTED,Df),this._events.set(zd.MARKETPLACE_ITEMS_SEARCHED,Mf),this._events.set(zd.MARKETPLACE_OWN_ITEMS,Cf),this._events.set(zd.USER_BANNED,Kf),this._events.set(zd.MODERATION_CAUTION,xf),this._events.set(zd.MODTOOL_ROOM_INFO,Hf),this._events.set(zd.MODTOOL_USER_CHATLOG,Xf),this._events.set(zd.MODTOOL_ROOM_CHATLOG,Yf),this._events.set(zd.MODERATION_USER_INFO,zf),this._events.set(zd.MODERATION_TOOL,Bf),this._events.set(zd.MODTOOL_VISITED_ROOMS_USER,Wf),this._events.set(zd.CFH_CHATLOG,Lf),this._events.set(zd.ISSUE_DELETED,Uf),this._events.set(zd.ISSUE_INFO,Pf),this._events.set(zd.ISSUE_PICK_FAILED,wf),this._events.set(zd.MODERATOR_ACTION_RESULT,Ff),this._events.set(zd.MODERATOR_MESSAGE,Gf),this._events.set(zd.MODERATOR_TOOL_PREFERENCES,Vf),this._events.set(zd.MYSTERY_BOX_KEYS,qf),this._events.set(zd.NAVIGATOR_CATEGORIES,Zf),this._events.set(zd.NAVIGATOR_COLLAPSED,Jf),this._events.set(zd.NAVIGATOR_EVENT_CATEGORIES,$f),this._events.set(zd.USER_HOME_ROOM,tv),this._events.set(zd.NAVIGATOR_LIFTED,ev),this._events.set(zd.NAVIGATOR_METADATA,iv),this._events.set(zd.NAVIGATOR_OPEN_ROOM_CREATOR,nv),this._events.set(zd.NAVIGATOR_SEARCHES,sv),this._events.set(zd.NAVIGATOR_SEARCH,rv),this._events.set(zd.NAVIGATOR_SETTINGS,av),this._events.set(zd.CAN_CREATE_ROOM_EVENT,Qf),this._events.set(zd.GENERIC_ALERT,lv),this._events.set(zd.MOTD_MESSAGES,fv),this._events.set(zd.NOTIFICATION_LIST,vv),this._events.set(zd.UNSEEN_ITEMS,yv),this._events.set(zd.ACHIEVEMENT_NOTIFICATION,uv),this._events.set(zd.INFO_FEED_ENABLE,dv),this._events.set(zd.CLUB_GIFT_NOTIFICATION,_v),this._events.set(zd.ACTIVITY_POINT_NOTIFICATION,cv),this._events.set(zd.BOT_ERROR,hv),this._events.set(zd.PET_LEVEL_NOTIFICATION,gv),this._events.set(zd.USER_PERKS,Ev),this._events.set(zd.QUESTION,Tv),this._events.set(zd.POLL_CONTENTS,pv),this._events.set(zd.POLL_ERROR,mv),this._events.set(zd.POLL_OFFER,Iv),this._events.set(zd.QUESTION_ANSWERED,bv),this._events.set(zd.QUESTION_FINISHED,Rv),this._events.set(zd.COMMUNITY_GOAL_EARNED_PRIZES,kv),this._events.set(zd.COMMUNITY_GOAL_PROGRESS,Sv),this._events.set(zd.CONCURRENT_USERS_GOAL_PROGRESS,jv),this._events.set(zd.QUEST_DAILY,Cv),this._events.set(zd.QUEST_CANCELLED,Dv),this._events.set(zd.QUEST_COMPLETED,Mv),this._events.set(zd.COMMUNITY_GOAL_HALL_OF_FAME,Av),this._events.set(zd.EPIC_POPUP,Nv),this._events.set(zd.SEASONAL_QUESTS,Pv),this._events.set(zd.QUESTS,Uv),this._events.set(zd.QUEST,Lv),this._events.set(zd.ROOM_ENTER_ERROR,Vv),this._events.set(zd.ROOM_ENTER,zv),this._events.set(zd.ROOM_FORWARD,Yv),this._events.set(zd.ROOM_DOORBELL,Fv),this._events.set(zd.ROOM_DOORBELL_ACCEPTED,wv),this._events.set(zd.ROOM_DOORBELL_REJECTED,xv),this._events.set(zd.ROOM_RIGHTS_CLEAR,Bv),this._events.set(zd.ROOM_RIGHTS_OWNER,Hv),this._events.set(zd.ROOM_RIGHTS,Gv),this._events.set(zd.BOT_COMMAND_CONFIGURATION,Wv),this._events.set(zd.ROOM_SETTINGS_CHAT,Xv),this._events.set(zd.ROOM_INFO,Kv),this._events.set(zd.ROOM_INFO_OWNER,qv),this._events.set(zd.ROOM_SCORE,Qv),this._events.set(zd.ROOM_SETTINGS_SAVE_ERROR,Zv),this._events.set(zd.ROOM_SETTINGS,Jv),this._events.set(zd.ROOM_SETTINGS_SAVE,$v),this._events.set(zd.ROOM_SETTINGS_UPDATED,tg),this._events.set(zd.ROOM_ROLLING,ig),this._events.set(zd.ROOM_CREATED,ng),this._events.set(zd.FURNITURE_FLOOR_ADD,rg),this._events.set(zd.FURNITURE_FLOOR,ag),this._events.set(zd.FURNITURE_FLOOR_REMOVE,og),this._events.set(zd.FURNITURE_FLOOR_UPDATE,ug),this._events.set(zd.ITEM_WALL_ADD,mg),this._events.set(zd.ITEM_WALL,Ig),this._events.set(zd.ITEM_WALL_REMOVE,bg),this._events.set(zd.ITEM_WALL_UPDATE,Tg),this._events.set(zd.FURNITURE_ALIASES,cg),this._events.set(zd.FURNITURE_DATA,hg),this._events.set(zd.FURNITURE_ITEMDATA,vg),this._events.set(zd.ITEM_STACK_HELPER,dg),this._events.set(zd.FURNITURE_STATE,Eg),this._events.set(zd.ITEM_DIMMER_SETTINGS,pg),this._events.set(zd.FURNITURE_STATE_2,sg),this._events.set(zd.LOVELOCK_FURNI_FINISHED,gg),this._events.set(zd.LOVELOCK_FURNI_FRIEND_COMFIRMED,Og),this._events.set(zd.LOVELOCK_FURNI_START,yg),this._events.set(zd.OBJECTS_DATA_UPDATE,eg),this._events.set(zd.FURNITURE_GROUP_CONTEXT_MENU_INFO,fg),this._events.set(zd.FURNITURE_POSTIT_STICKY_POLE_OPEN,lg),this._events.set(zd.ROOM_SPECTATOR,NT),this._events.set(zd.ROOM_RIGHTS_LIST,fO),this._events.set(zd.ROOM_RIGHTS_LIST_ADD,lO),this._events.set(zd.ROOM_RIGHTS_LIST_REMOVE,dO),this._events.set(zd.ROOM_BAN_LIST,_O),this._events.set(zd.FAVORITE_GROUP_UDPATE,ST),this._events.set(zd.ROOM_MODEL_DOOR,jg),this._events.set(zd.ROOM_HEIGHT_MAP,Ng),this._events.set(zd.ROOM_HEIGHT_MAP_UPDATE,Dg),this._events.set(zd.ROOM_MODEL,Sg),this._events.set(zd.ROOM_MODEL_NAME,Lg),this._events.set(zd.ROOM_PAINT,Cg),this._events.set(zd.ROOM_THICKNESS,Ug),this._events.set(zd.ROOM_MODEL_BLOCKED_TILES,Mg),this._events.set(zd.PET_FIGURE_UPDATE,wg),this._events.set(zd.PET_INFO,Fg),this._events.set(zd.PET_STATUS,jT),this._events.set(zd.PET_EXPERIENCE,Pg),this._events.set(zd.PLAYING_GAME,xg),this._events.set(zd.UNIT_DANCE,Wg),this._events.set(zd.UNIT_EFFECT,Kg),this._events.set(zd.UNIT,Xg),this._events.set(zd.UNIT_EXPRESSION,qg),this._events.set(zd.UNIT_HAND_ITEM,Qg),this._events.set(zd.UNIT_IDLE,Jg),this._events.set(zd.UNIT_INFO,$g),this._events.set(zd.UNIT_NUMBER,tO),this._events.set(zd.UNIT_REMOVE,eO),this._events.set(zd.UNIT_STATUS,iO),this._events.set(zd.HAND_ITEM_RECEIVED,Zg),this._events.set(zd.FLOOD_CONTROL,Bg),this._events.set(zd.REMAINING_MUTE,Gg),this._events.set(zd.UNIT_CHAT,Hg),this._events.set(zd.UNIT_CHAT_SHOUT,Vg),this._events.set(zd.UNIT_CHAT_WHISPER,zg),this._events.set(zd.UNIT_TYPING,Yg),this._events.set(zd.WIRED_ACTION,sO),this._events.set(zd.WIRED_CONDITION,rO),this._events.set(zd.WIRED_TRIGGER,aO),this._events.set(zd.WIRED_OPEN,oO),this._events.set(zd.WIRED_REWARD,uO),this._events.set(zd.WIRED_SAVE,cO),this._events.set(zd.WIRED_ERROR,hO),this._events.set(zd.ROOM_MUTED,nO),this._events.set(zd.AUTHENTICATED,Ti),this._events.set(zd.JUKEBOX_PLAYLIST_FULL,Qh),this._events.set(zd.JUKEBOX_SONG_DISKS,Zh),this._events.set(zd.NOW_PLAYING,Jh),this._events.set(zd.OFFICIAL_SONG_ID,$h),this._events.set(zd.PLAYLIST,e_),this._events.set(zd.PLAYLIST_SONG_ADDED,i_),this._events.set(zd.TRAX_SONG_INFO,s_),this._events.set(zd.USER_SONG_DISKS_INVENTORY,r_),this._events.set(zd.HELPER_TALENT_TRACK,vO),this._events.set(zd.IN_CLIENT_LINK,jO),this._events.set(zd.USER_IGNORED,AO),this._events.set(zd.USER_IGNORED_RESULT,SO),this._events.set(zd.USER_RESPECT,UO),this._events.set(zd.USER_PERMISSIONS,gO),this._events.set(zd.USER_BADGES_CURRENT,EO),this._events.set(zd.USER_INFO,pO),this._events.set(zd.UNIT_CHANGE_NAME,mO),this._events.set(zd.USER_SETTINGS,bO),this._events.set(zd.USER_PROFILE,IO),this._events.set(zd.MESSENGER_RELATIONSHIPS,yO),this._events.set(zd.GIFT_OPENED,cf),this._events.set(zd.USER_CREDITS,NO),this._events.set(zd.USER_CURRENCY,DO),this._events.set(zd.USER_SUBSCRIPTION,MO),this._events.set(zd.USER_WARDROBE_PAGE,wO),this._events.set(zd.SCR_SEND_KICKBACK_INFO,PO),this._events.set(zd.PET_RESPECTED,DT),this._events.set(zd.PET_SUPPLEMENT,Fm),this._events.set(zd.GENERIC_ERROR,Bl),this._events.set(zd.GROUP_LIST,RO),this._events.set(zd.CATALOG_APPROVE_NAME_RESULT,OO),this._events.set(zd.NOOBNESS_LEVEL,Od)}},{key:"registerComposers",value:function(){this._composers.set(Um.AUTHENTICATION,XE),this._composers.set(Um.INTERSTITIAL_SHOWN,xO),this._composers.set(Um.GET_INTERSTITIAL,FO),this._composers.set(Um.GET_WARDROBE,VO),this._composers.set(Um.SAVE_WARDROBE_OUTFIT,zO),this._composers.set(Um.CHANGE_USERNAME,GO),this._composers.set(Um.CHECK_USERNAME,HO),this._composers.set(Um.REQUEST_CAMERA_CONFIGURATION,QO),this._composers.set(Um.RENDER_ROOM,XO),this._composers.set(Um.RENDER_ROOM_THUMBNAIL,qO),this._composers.set(Um.PURCHASE_PHOTO,KO),this._composers.set(Um.PUBLISH_PHOTO,WO),this._composers.set(Um.PHOTO_COMPETITION,YO),this._composers.set(Um.OPEN_CAMPAIGN_CALENDAR_DOOR,JO),this._composers.set(Um.OPEN_CAMPAIGN_CALENDAR_DOOR_STAFF,ZO),this._composers.set(Um.BUILDERS_CLUB_PLACE_ROOM_ITEM,$O),this._composers.set(Um.BUILDERS_CLUB_PLACE_WALL_ITEM,ty),this._composers.set(Um.BUILDERS_CLUB_QUERY_FURNI_COUNT,ey),this._composers.set(Um.GET_CATALOG_INDEX,sy),this._composers.set(Um.GET_CATALOG_PAGE,ry),this._composers.set(Um.CATALOG_PURCHASE,Ry),this._composers.set(Um.CATALOG_PURCHASE_GIFT,Ty),this._composers.set(Um.GET_PRODUCT_OFFER,Oy),this._composers.set(Um.GET_CLUB_OFFERS,cy),this._composers.set(Um.GET_CLUB_GIFT_INFO,uy),this._composers.set(Um.CATALOG_REDEEM_VOUCHER,jy),this._composers.set(Um.GROUP_MEMBERSHIPS,tT),this._composers.set(Um.GET_GIFT_WRAPPING_CONFIG,_y),this._composers.set(Um.CATALOG_SELECT_VIP_GIFT,Dy),this._composers.set(Um.CATALOG_REQUESET_PET_BREEDS,py),this._composers.set(Um.GET_BONUS_RARE_INFO,iy),this._composers.set(Um.GET_BUNDLE_DISCOUNT_RULESET,ny),this._composers.set(Um.GET_CATALOG_PAGE_EXPIRATION,ay),this._composers.set(Um.GET_CATALOG_PAGE_WITH_EARLIEST_EXP,oy),this._composers.set(Um.GET_DIRECT_CLUB_BUY_AVAILABLE,hy),this._composers.set(Um.GET_HABBO_BASIC_MEMBERSHIP_EXTEND_OFFER,ly),this._composers.set(Um.GET_HABBO_CLUB_EXTEND_OFFER,dy),this._composers.set(Um.GET_IS_OFFER_GIFTABLE,fy),this._composers.set(Um.GET_LIMITED_OFFER_APPEARING_NEXT,vy),this._composers.set(Um.GET_NEXT_TARGETED_OFFER,gy),this._composers.set(Um.GET_ROOM_AD_PURCHASE_INFO,yy),this._composers.set(Um.GET_SEASONAL_CALENDAR_DAILY_OFFER,Ey),this._composers.set(Um.GET_TARGETED_OFFER,my),this._composers.set(Um.MARK_CATALOG_NEW_ADDITIONS_PAGE_OPENED,Iy),this._composers.set(Um.PURCHASE_BASIC_MEMBERSHIP_EXTENSION,by),this._composers.set(Um.PURCHASE_ROOM_AD,ky),this._composers.set(Um.PURCHASE_TARGETED_OFFER,Ay),this._composers.set(Um.PURCHASE_VIP_MEMBERSHIP_EXTENSION,Sy),this._composers.set(Um.ROOM_AD_PURCHASE_INITIATED,Ny),this._composers.set(Um.SET_TARGETTED_OFFER_STATE,My),this._composers.set(Um.SHOP_TARGETED_OFFER_VIEWED,Cy),this._composers.set(Um.FORWARD_TO_A_COMPETITION_ROOM,Ly),this._composers.set(Um.FORWARD_TO_A_SUBMITTABLE_ROOM,Uy),this._composers.set(Um.FORWARD_TO_RANDOM_COMPETITION_ROOM,Py),this._composers.set(Um.GET_CURRENT_TIMING_CODE,wy),this._composers.set(Um.GET_IS_USER_PART_OF_COMPETITION,Fy),this._composers.set(Um.GET_SECONDS_UNTIL,xy),this._composers.set(Um.ROOM_COMPETITION_INIT,By),this._composers.set(Um.SUBMIT_ROOM_TO_COMPETITION,Gy),this._composers.set(Um.VOTE_FOR_ROOM,Hy),this._composers.set(Um.CRAFT,Vy),this._composers.set(Um.CRAFT_SECRET,zy),this._composers.set(Um.GET_CRAFTABLE_PRODUCTS,Wy),this._composers.set(Um.GET_CRAFTING_RECIPE,Yy),this._composers.set(Um.GET_CRAFTING_RECIPES_AVAILABLE,Ky),this._composers.set(Um.FRIEND_FURNI_CONFIRM_LOCK,qy),this._composers.set(Um.ACCEPT_FRIEND,Qy),this._composers.set(Um.DECLINE_FRIEND,Zy),this._composers.set(Um.FIND_NEW_FRIENDS,Jy),this._composers.set(Um.FOLLOW_FRIEND,$y),this._composers.set(Um.FRIEND_LIST_UPDATE,tE),this._composers.set(Um.GET_FRIEND_REQUESTS,eE),this._composers.set(Um.HABBO_SEARCH,iE),this._composers.set(Um.MESSENGER_INIT,nE),this._composers.set(Um.REMOVE_FRIEND,sE),this._composers.set(Um.REQUEST_FRIEND,rE),this._composers.set(Um.MESSENGER_CHAT,aE),this._composers.set(Um.SEND_ROOM_INVITE,oE),this._composers.set(Um.SET_RELATIONSHIP_STATUS,uE),this._composers.set(Um.VISIT_USER,cE),this._composers.set(Um.GET_GIFT,_E),this._composers.set(Um.RESET_PHONE_NUMBER_STATE,lE),this._composers.set(Um.SET_PHONE_NUMBER_VERIFICATION_STATUS,dE),this._composers.set(Um.TRY_PHONE_NUMBER,fE),this._composers.set(Um.VERIFY_CODE,vE),this._composers.set(Um.GET_FORUM_STATS,wE),this._composers.set(Um.GET_FORUMS_LIST,PE),this._composers.set(Um.GET_FORUM_MESSAGES,FE),this._composers.set(Um.GET_FORUM_THREAD,xE),this._composers.set(Um.GET_FORUM_THREADS,BE),this._composers.set(Um.GET_UNREAD_FORUMS_COUNT,GE),this._composers.set(Um.FORUM_MODERATE_MESSAGE,HE),this._composers.set(Um.FORUM_MODERATE_THREAD,VE),this._composers.set(Um.FORUM_POST_MESSAGE,zE),this._composers.set(Um.UPDATE_FORUM_READ_MARKER,YE),this._composers.set(Um.UPDATE_FORUM_SETTINGS,WE),this._composers.set(Um.FORUM_UPDATE_THREAD,KE),this._composers.set(Um.CLIENT_PONG,ji),this._composers.set(Um.RELEASE_VERSION,Ai),this._composers.set(Um.SECURITY_TICKET,Ni),this._composers.set(Um.USER_INFO,Si),this._composers.set(Um.DISCONNECT,qE),this._composers.set(Um.SECURITY_MACHINE,QE),this._composers.set(Um.CLIENT_VARIABLES,ZE),this._composers.set(Um.CALL_FOR_HELP_FROM_FORUM_MESSAGE,JE),this._composers.set(Um.CALL_FOR_HELP_FROM_FORUM_THREAD,$E),this._composers.set(Um.CALL_FOR_HELP_FROM_IM,tp),this._composers.set(Um.CALL_FOR_HELP_FROM_PHOTO,ep),this._composers.set(Um.CALL_FOR_HELP_FROM_SELFIE,ip),this._composers.set(Um.CALL_FOR_HELP,np),this._composers.set(Um.CHAT_REVIEW_GUIDE_DECIDES,sp),this._composers.set(Um.CHAT_REVIEW_GUIDE_DETACHED,rp),this._composers.set(Um.CHAT_REVIEW_GUIDE_VOTE,ap),this._composers.set(Um.CHAT_REVIEW_SESSION_CREATE,op),this._composers.set(Um.DELETE_PENDING_CALLS_FOR_HELP,up),this._composers.set(Um.GET_CFH_STATUS,cp),this._composers.set(Um.GET_FAQ_CATEGORY,hp),this._composers.set(Um.GET_FAQ_TEXT,_p),this._composers.set(Um.GET_GUIDE_REPORTING_STATUS,lp),this._composers.set(Um.GET_PENDING_CALLS_FOR_HELP,dp),this._composers.set(Um.GET_QUIZ_QUESTIONS,fp),this._composers.set(Um.GUIDE_SESSION_CREATE,vp),this._composers.set(Um.GUIDE_SESSION_FEEDBACK,gp),this._composers.set(Um.GUIDE_SESSION_GET_REQUESTER_ROOM,Op),this._composers.set(Um.GUIDE_SESSION_GUIDE_DECIDES,yp),this._composers.set(Um.GUIDE_SESSION_INVITE_REQUESTER,Ep),this._composers.set(Um.GUIDE_SESSION_IS_TYPING,pp),this._composers.set(Um.GUIDE_SESSION_MESSAGE,mp),this._composers.set(Um.GUIDE_SESSION_ON_DUTY_UPDATE,Ip),this._composers.set(Um.GUIDE_SESSION_REPORT,bp),this._composers.set(Um.GUIDE_SESSION_REQUESTER_CANCELS,Tp),this._composers.set(Um.GUIDE_SESSION_RESOLVED,Rp),this._composers.set(Um.POST_QUIZ_ANSWERS,kp),this._composers.set(Um.SEARCH_FAQS,Ap),this._composers.set(Um.DESKTOP_VIEW,Xy),this._composers.set(Um.GROUP_INFO,TE),this._composers.set(Um.GROUP_REQUEST,RE),this._composers.set(Um.GROUP_MEMBER_REMOVE_CONFIRM,mE),this._composers.set(Um.GROUP_MEMBER_REMOVE,jE),this._composers.set(Um.GROUP_MEMBERS,kE),this._composers.set(Um.GROUP_ADMIN_ADD,gE),this._composers.set(Um.GROUP_ADMIN_REMOVE,OE),this._composers.set(Um.GROUP_REQUEST_ACCEPT,AE),this._composers.set(Um.GROUP_REQUEST_DECLINE,SE),this._composers.set(Um.GROUP_DELETE,IE),this._composers.set(Um.GROUP_CREATE_OPTIONS,pE),this._composers.set(Um.GROUP_PARTS,yE),this._composers.set(Um.GROUP_BUY,EE),this._composers.set(Um.GROUP_SETTINGS,LE),this._composers.set(Um.GROUP_SAVE_BADGE,NE),this._composers.set(Um.GROUP_SAVE_COLORS,DE),this._composers.set(Um.GROUP_SAVE_INFORMATION,ME),this._composers.set(Um.GROUP_SAVE_PREFERENCES,CE),this._composers.set(Um.GROUP_FAVORITE,bE),this._composers.set(Um.GROUP_UNFAVORITE,UE),this._composers.set(Um.GROUP_BADGES,lT),this._composers.set(Um.NAVIGATOR_CATEGORIES,Rm),this._composers.set(Um.NAVIGATOR_INIT,Am),this._composers.set(Um.NAVIGATOR_SEARCH_CLOSE,Sm),this._composers.set(Um.NAVIGATOR_SEARCH,jm),this._composers.set(Um.NAVIGATOR_SEARCH_OPEN,Nm),this._composers.set(Um.NAVIGATOR_SEARCH_SAVE,Dm),this._composers.set(Um.NAVIGATOR_SETTINGS,Mm),this._composers.set(Um.NAVIGATOR_SETTINGS_SAVE,Cm),this._composers.set(Um.NAVIGATOR_CATEGORY_LIST_MODE,km),this._composers.set(Um.CONVERT_GLOBAL_ROOM_ID,Tm),this._composers.set(Um.ROOM_RIGHTS_REMOVE_OWN,Lm),this._composers.set(Um.POLL_ANSWER,zm),this._composers.set(Um.POLL_REJECT,Ym),this._composers.set(Um.POLL_START,Wm),this._composers.set(Um.USER_BADGES,Sp),this._composers.set(Um.USER_BADGES_CURRENT_UPDATE,jp),this._composers.set(Um.USER_BOTS,Np),this._composers.set(Um.USER_FURNITURE,Mp),this._composers.set(Um.USER_FURNITURE2,Dp),this._composers.set(Um.USER_PETS,Cp),this._composers.set(Um.TRADE_ACCEPT,Lp),this._composers.set(Um.TRADE_CANCEL,Up),this._composers.set(Um.TRADE_CLOSE,Pp),this._composers.set(Um.TRADE_CONFIRM,wp),this._composers.set(Um.TRADE_ITEM,Fp),this._composers.set(Um.TRADE_ITEMS,xp),this._composers.set(Um.TRADE_ITEM_REMOVE,Bp),this._composers.set(Um.TRADE,Gp),this._composers.set(Um.TRADE_UNACCEPT,Hp),this._composers.set(Um.UNSEEN_RESET_CATEGORY,Vp),this._composers.set(Um.UNSEEN_RESET_ITEMS,zp),this._composers.set(Um.ACHIEVEMENT_LIST,BO),this._composers.set(Um.PET_MOUNT,Pm),this._composers.set(Um.PET_RESPECT,wm),this._composers.set(Um.PET_SUPPLEMENT,Fm),this._composers.set(Um.REMOVE_PET_SADDLE,xm),this._composers.set(Um.PET_INFO,Bm),this._composers.set(Um.TOGGLE_PET_BREEDING,Gm),this._composers.set(Um.TOGGLE_PET_RIDING,Hm),this._composers.set(Um.USE_PET_PRODUCT,Vm),this._composers.set(Um.ROOM_CREATE,pb),this._composers.set(Um.ROOM_ENTER,hI),this._composers.set(Um.ROOM_DOORBELL,cI),this._composers.set(Um.GO_TO_FLAT,mb),this._composers.set(Um.ROOM_AMBASSADOR_ALERT,lI),this._composers.set(Um.ROOM_BAN_GIVE,dI),this._composers.set(Um.ROOM_BAN_REMOVE,mI),this._composers.set(Um.ROOM_RIGHTS_GIVE,vI),this._composers.set(Um.ROOM_KICK,gI),this._composers.set(Um.ROOM_MUTE_USER,yI),this._composers.set(Um.ROOM_RIGHTS_REMOVE,pI),this._composers.set(Um.ROOM_RIGHTS_REMOVE_ALL,_I),this._composers.set(Um.ROOM_LIKE,OI),this._composers.set(Um.ROOM_DELETE,fI),this._composers.set(Um.ROOM_STAFF_PICK,EI),this._composers.set(Um.ROOM_INFO,TI),this._composers.set(Um.ROOM_SETTINGS,RI),this._composers.set(Um.ROOM_SETTINGS_SAVE,AI),this._composers.set(Um.ROOM_RIGHTS_LIST,kI),this._composers.set(Um.ROOM_BAN_LIST,bI),this._composers.set(Um.BOT_CONFIGURATION,II),this._composers.set(Um.GET_ITEM_DATA,CI),this._composers.set(Um.REMOVE_WALL_ITEM,FI),this._composers.set(Um.BOT_PLACE,SI),this._composers.set(Um.BOT_PICKUP,jI),this._composers.set(Um.BOT_SKILL_SAVE,NI),this._composers.set(Um.PET_PLACE,PI),this._composers.set(Um.PET_MOVE,UI),this._composers.set(Um.PET_PICKUP,wI),this._composers.set(Um.SET_ITEM_DATA,xI),this._composers.set(Um.SET_OBJECT_DATA,BI),this._composers.set(Um.COMPOST_PLANT,MI),this._composers.set(Um.HARVEST_PET,LI),this._composers.set(Um.FURNITURE_ALIASES,YI),this._composers.set(Um.FURNITURE_GROUP_INFO,WI),this._composers.set(Um.FURNITURE_PICKUP,KI),this._composers.set(Um.FURNITURE_PLACE,XI),this._composers.set(Um.ITEM_PAINT,qI),this._composers.set(Um.FURNITURE_POSTIT_PLACE,QI),this._composers.set(Um.FURNITURE_POSTIT_SAVE_STICKY_POLE,ZI),this._composers.set(Um.CONTROL_YOUTUBE_DISPLAY_PLAYBACK,lb),this._composers.set(Um.GET_YOUTUBE_DISPLAY_STATUS,db),this._composers.set(Um.SET_YOUTUBE_DISPLAY_PLAYLIST,fb),this._composers.set(Um.FURNITURE_FLOOR_UPDATE,zI),this._composers.set(Um.FURNITURE_WALL_UPDATE,_b),this._composers.set(Um.ITEM_DIMMER_SETTINGS,GI),this._composers.set(Um.ITEM_DIMMER_SAVE,HI),this._composers.set(Um.ITEM_DIMMER_TOGGLE,VI),this._composers.set(Um.ROOM_TONER_APPLY,hb),this._composers.set(Um.ITEM_COLOR_WHEEL_CLICK,JI),this._composers.set(Um.ITEM_DICE_CLICK,$I),this._composers.set(Um.ITEM_DICE_CLOSE,tb),this._composers.set(Um.FURNITURE_MULTISTATE,ib),this._composers.set(Um.FURNITURE_RANDOMSTATE,sb),this._composers.set(Um.ITEM_STACK_HELPER,rb),this._composers.set(Um.FURNITURE_WALL_MULTISTATE,ab),this._composers.set(Um.ONE_WAY_DOOR_CLICK,nb),this._composers.set(Um.ITEM_EXCHANGE_REDEEM,eb),this._composers.set(Um.ITEM_CLOTHING_REDEEM,Eb),this._composers.set(Um.ROOM_MODEL,gb),this._composers.set(Um.GET_OCCUPIED_TILES,vb),this._composers.set(Um.GET_ROOM_ENTRY_TILE,Ob),this._composers.set(Um.ROOM_MODEL_SAVE,yb),this._composers.set(Um.UNIT_ACTION,Sb),this._composers.set(Um.UNIT_DANCE,jb),this._composers.set(Um.UNIT_DROP_HAND_ITEM,Nb),this._composers.set(Um.UNIT_GIVE_HANDITEM,Db),this._composers.set(Um.UNIT_GIVE_HANDITEM_PET,Mb),this._composers.set(Um.UNIT_LOOK,Cb),this._composers.set(Um.UNIT_SIGN,Ub),this._composers.set(Um.UNIT_POSTURE,Lb),this._composers.set(Um.UNIT_WALK,Pb),this._composers.set(Um.UNIT_CHAT,Ib),this._composers.set(Um.UNIT_CHAT_SHOUT,bb),this._composers.set(Um.USER_SETTINGS_CHAT_STYLE,Tb),this._composers.set(Um.UNIT_CHAT_WHISPER,Rb),this._composers.set(Um.UNIT_TYPING,kb),this._composers.set(Um.UNIT_TYPING_STOP,Ab),this._composers.set(Um.WIRED_APPLY_SNAPSHOT,wb),this._composers.set(Um.WIRED_OPEN,Fb),this._composers.set(Um.WIRED_ACTION_SAVE,Bb),this._composers.set(Um.WIRED_CONDITION_SAVE,Gb),this._composers.set(Um.WIRED_TRIGGER_SAVE,Hb),this._composers.set(Um.ROOM_MUTE,xb),this._composers.set(Um.APPROVE_NAME,$b),this._composers.set(Um.USER_RESPECT,pT),this._composers.set(Um.SCR_GET_KICKBACK_INFO,vT),this._composers.set(Um.USER_IGNORED,iT),this._composers.set(Um.USER_IGNORE,nT),this._composers.set(Um.USER_IGNORE_ID,sT),this._composers.set(Um.USER_UNIGNORE,rT),this._composers.set(Um.USER_BADGES_CURRENT,aT),this._composers.set(Um.USER_FIGURE,oT),this._composers.set(Um.USER_HOME_ROOM,uT),this._composers.set(Um.USER_MOTTO,cT),this._composers.set(Um.USER_PROFILE,hT),this._composers.set(Um.USER_PROFILE_BY_NAME,eT),this._composers.set(Um.MESSENGER_RELATIONSHIPS,_T),this._composers.set(Um.MANNEQUIN_SAVE_NAME,ub),this._composers.set(Um.MANNEQUIN_SAVE_LOOK,ob),this._composers.set(Um.PRESENT_OPEN_PRESENT,cb),this._composers.set(Um.MARKETPLACE_CONFIG,Zp),this._composers.set(Um.MARKETPLACE_SELL_ITEM,em),this._composers.set(Um.MARKETPLACE_REQUEST_OWN_ITEMS,tm),this._composers.set(Um.MARKETPLACE_TAKE_BACK_ITEM,qp),this._composers.set(Um.MARKETPLACE_REQUEST_OFFERS,$p),this._composers.set(Um.MARKETPLACE_BUY_OFFER,Kp),this._composers.set(Um.MARKETPLACE_REDEEM_CREDITS,im),this._composers.set(Um.MARKETPLACE_BUY_TOKENS,Xp),this._composers.set(Um.REQUEST_SELL_ITEM,Qp),this._composers.set(Um.REQUEST_MARKETPLACE_ITEM_STATS,Jp),this._composers.set(Um.USER_BOTS,Np),this._composers.set(Um.USER_PETS,Cp),this._composers.set(Um.USER_CURRENCY,dT),this._composers.set(Um.USER_SUBSCRIPTION,fT),this._composers.set(Um.MODTOOL_REQUEST_ROOM_INFO,um),this._composers.set(Um.MODTOOL_CHANGE_ROOM_SETTINGS,fm),this._composers.set(Um.MODTOOL_REQUEST_USER_CHATLOG,lm),this._composers.set(Um.MODTOOL_REQUEST_ROOM_CHATLOG,hm),this._composers.set(Um.MOD_TOOL_USER_INFO,cm),this._composers.set(Um.MODTOOL_SANCTION_ALERT,dm),this._composers.set(Um.MODTOOL_SANCTION_BAN,rm),this._composers.set(Um.MODTOOL_SANCTION_KICK,gm),this._composers.set(Um.MODTOOL_SANCTION_TRADELOCK,mm),this._composers.set(Um.MODTOOL_ALERTEVENT,Om),this._composers.set(Um.MODTOOL_SANCTION_MUTE,ym),this._composers.set(Um.MODTOOL_REQUEST_USER_ROOMS,_m),this._composers.set(Um.MODTOOL_ROOM_ALERT,vm),this._composers.set(Um.CLOSE_ISSUE_DEFAULT_ACTION,nm),this._composers.set(Um.CLOSE_ISSUES,sm),this._composers.set(Um.DEFAULT_SANCTION,am),this._composers.set(Um.GET_CFH_CHATLOG,om),this._composers.set(Um.MODTOOL_PREFERENCES,Em),this._composers.set(Um.MODTOOL_SANCTION,pm),this._composers.set(Um.PICK_ISSUES,Im),this._composers.set(Um.RELEASE_ISSUES,bm),this._composers.set(Um.USER_SETTINGS_CAMERA,gT),this._composers.set(Um.USER_SETTINGS_OLD_CHAT,OT),this._composers.set(Um.USER_SETTINGS_INVITES,yT),this._composers.set(Um.USER_SETTINGS_VOLUME,ET),this._composers.set(Um.COMMUNITY_GOAL_VOTE_COMPOSER,Wp),this._composers.set(Um.GET_PROMO_ARTICLES,Yp),this._composers.set(Um.ACCEPT_QUEST,Km),this._composers.set(Um.ACTIVATE_QUEST,Xm),this._composers.set(Um.CANCEL_QUEST,qm),this._composers.set(Um.FRIEND_REQUEST_QUEST_COMPLETE,Qm),this._composers.set(Um.GET_COMMUNITY_GOAL_EARNED_PRIZES,Zm),this._composers.set(Um.GET_COMMUNITY_GOAL_HALL_OF_FAME,Jm),this._composers.set(Um.GET_COMMUNITY_GOAL_PROGRESS,$m),this._composers.set(Um.GET_CONCURRENT_USERS_GOAL_PROGRESS,tI),this._composers.set(Um.GET_CONCURRENT_USERS_REWARD,eI),this._composers.set(Um.GET_DAILY_QUEST,iI),this._composers.set(Um.GET_QUESTS,nI),this._composers.set(Um.GET_SEASONAL_QUESTS_ONLY,sI),this._composers.set(Um.OPEN_QUEST_TRACKER,rI),this._composers.set(Um.REDEEM_COMMUNITY_GOAL_PRIZE,aI),this._composers.set(Um.REJECT_QUEST,oI),this._composers.set(Um.START_CAMPAIGN,uI),this._composers.set(Um.GET_SOUND_SETTINGS,qb),this._composers.set(Um.ADD_JUKEBOX_DISK,Vb),this._composers.set(Um.GET_JUKEBOX_PLAYLIST,zb),this._composers.set(Um.GET_NOW_PLAYING,Yb),this._composers.set(Um.GET_OFFICIAL_SONG_ID,Wb),this._composers.set(Um.GET_SONG_INFO,Kb),this._composers.set(Um.GET_SOUND_MACHINE_PLAYLIST,Xb),this._composers.set(Um.GET_USER_SONG_DISKS,Qb),this._composers.set(Um.REMOVE_JUKEBOX_DISK,Zb),this._composers.set(Um.HELPER_TALENT_TRACK,Jb),this._composers.set(Um.ACHIEVEMENT_RESOLUTION_OPEN,hE)}},{key:"events",get:function(){return this._events}},{key:"composers",get:function(){return this._composers}}]),t}(),CT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._communication=void 0,n._connection=void 0,n._messages=void 0,n._demo=void 0,n._communication=t,n._connection=null,n._messages=new MT,n._demo=new Mi(Object(l.a)(n)),n.onConnectionOpenedEvent=n.onConnectionOpenedEvent.bind(Object(l.a)(n)),n.onConnectionClosedEvent=n.onConnectionClosedEvent.bind(Object(l.a)(n)),n.onConnectionErrorEvent=n.onConnectionErrorEvent.bind(Object(l.a)(n)),n.onConnectionAuthenticatedEvent=n.onConnectionAuthenticatedEvent.bind(Object(l.a)(n)),n}return Object(a.a)(i,[{key:"onInit",value:function(){this._connection||(gD.instance.events.addEventListener(Di.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),this._connection=this._communication.createConnection(this),this._connection.registerMessages(this._messages),this._connection.addEventListener(D.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.addEventListener(D.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.addEventListener(D.CONNECTION_ERROR,this.onConnectionErrorEvent),this._demo&&this._demo.init(),this._connection.init(gD.instance.getConfiguration("socket.url")))}},{key:"onDispose",value:function(){this._demo&&this._demo.dispose(),this._connection&&(this._connection.removeEventListener(D.CONNECTION_OPENED,this.onConnectionOpenedEvent),this._connection.removeEventListener(D.CONNECTION_CLOSED,this.onConnectionClosedEvent),this._connection.removeEventListener(D.CONNECTION_ERROR,this.onConnectionErrorEvent)),gD.instance.events.removeEventListener(Di.CONNECTION_AUTHENTICATED,this.onConnectionAuthenticatedEvent),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"onConnectionOpenedEvent",value:function(t){this.logger.log("Connection Initialized")}},{key:"onConnectionClosedEvent",value:function(t){this.logger.log("Connection Closed")}},{key:"onConnectionErrorEvent",value:function(t){this.logger.log("Connection Error")}},{key:"onConnectionAuthenticatedEvent",value:function(t){this.logger.log("Connection Authenticated"),this._connection&&this._connection.authenticated()}},{key:"connectionInit",value:function(t){this.logger.log("Initializing Connection: ".concat(t))}},{key:"registerMessageEvent",value:function(t){return this._connection&&this._connection.addMessageEvent(t),t}},{key:"removeMessageEvent",value:function(t){this._connection&&this._connection.removeMessageEvent(t)}},{key:"demo",get:function(){return this._demo}},{key:"connection",get:function(){return this._connection}}]),i}(w),LT=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"available",get:function(){return this._isListeningForPostMessages||(this._isListeningForPostMessages=!0,window.addEventListener("message",(function(e){if("string"===typeof e.data)if(e.data.startsWith(t.MESSAGE_KEY)){var i=JSON.parse(e.data.substr(t.MESSAGE_KEY.length)),n=i.method,s=i.params,r=window[n];if(!r)return;r.apply(void 0,Object(T.a)(s))}else;}))),!0}},{key:"call",value:function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];if(window.top!==window&&window.top.postMessage(t.MESSAGE_KEY+JSON.stringify({method:e,params:n}),"*"),"FlashExternalInterface"in window){var r=window.FlashExternalInterface[e];return"undefined"!==typeof r?r.apply(void 0,n):void 0}}},{key:"callGame",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(window.top!==window&&window.top.postMessage("Nitro_LegacyExternalGameInterface"+JSON.stringify({method:t,params:i}),"*"),"FlashExternalGameInterface"in window){var s=window.FlashExternalGameInterface[t];return"undefined"!==typeof s?s.apply(void 0,i):void 0}}},{key:"addCallback",value:function(t,e){window[t]=e}}]),t}();LT.MESSAGE_KEY="Nitro_LegacyExternalInterface",LT._isListeningForPostMessages=!1;var UT=function(){function t(e){Object(r.a)(this,t),e.addMessageEvent(new xl(this.onLoadGameUrl.bind(this)))}return Object(a.a)(t,[{key:"onLoadGameUrl",value:function(t){if(t){var e=t.getParser();e&&LT.callGame("showGame",e.url)}}}]),t}(),PT=function(){function t(e){Object(r.a)(this,t),this._badgeId="",this._level=1,this._base="",this._badgeId=e,this.parseText()}return Object(a.a)(t,[{key:"parseText",value:function(){for(var t=this._badgeId.length-1;t>0&&this.isNumber(this._badgeId.charAt(t));)t--;this._base=this._badgeId.substr(0,t+1);var e=this._badgeId.substr(t+1,this._badgeId.length);e&&""!==e&&(this._level=Number.parseInt(e))}},{key:"isNumber",value:function(t){var e=t.charCodeAt(0);return e>=48&&e<=57}},{key:"level",get:function(){return this._level},set:function(t){this._level=Math.max(1,t)}},{key:"getBadgeId",get:function(){return this._base+this._level}},{key:"base",get:function(){return this._base}}]),t}(),wT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(E.a);wT.LOADED="NLE_LOADED",wT.FAILED="NLE_FAILED";var FT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._communication=void 0,n._definitions=void 0,n._parameters=void 0,n._badgePointLimits=void 0,n._romanNumerals=void 0,n._pendingUrls=void 0,n._communication=t,n._definitions=new Map,n._parameters=new Map,n._badgePointLimits=new Map,n._romanNumerals=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII","XXIV","XXV","XXVI","XXVII","XXVIII","XXIX","XXX"],n._pendingUrls=[],n}return Object(a.a)(i,[{key:"onInit",value:function(){this._communication.registerMessageEvent(new Jd(this.onBadgePointLimitsEvent.bind(this)));var t=gD.instance.getConfiguration("external.texts.url");Array.isArray(t)||(t=[gD.instance.getConfiguration("external.texts.url")]);for(var e=0;e<t.length;e++)t[e]=gD.instance.core.configuration.interpolate(t[e]);this._pendingUrls=t,this.loadNextLocalization()}},{key:"loadNextLocalization",value:function(){this._pendingUrls.length?this.loadLocalizationFromURL(this._pendingUrls[0]):this.events&&this.events.dispatchEvent(new wT(wT.LOADED))}},{key:"loadLocalizationFromURL",value:function(t){var e=this;fetch(t).then((function(t){return t.json()})).then((function(i){return e.onLocalizationLoaded(i,t)})).catch((function(t){return e.onLocalizationFailed(t)}))}},{key:"onLocalizationLoaded",value:function(t,e){if(t){if(!this.parseLocalization(t))throw new Error("Invalid json data for file ".concat(e));var i=this._pendingUrls.indexOf(e);i>=0&&this._pendingUrls.splice(i,1),this.loadNextLocalization()}}},{key:"onLocalizationFailed",value:function(t){this.events&&this.events.dispatchEvent(new wT(wT.FAILED))}},{key:"parseLocalization",value:function(t){if(!t)return!1;for(var e in t)this._definitions.set(e,t[e]);return!0}},{key:"onBadgePointLimitsEvent",value:function(t){var e,i=t.getParser(),n=Object(s.a)(i.data);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.setBadgePointLimit(r.badgeId,r.limit)}}catch(a){n.e(a)}finally{n.f()}}},{key:"getBadgePointLimit",value:function(t){return this._badgePointLimits.get(t)||-1}},{key:"setBadgePointLimit",value:function(t,e){this._badgePointLimits.set(t,e)}},{key:"getRomanNumeral",value:function(t){return this._romanNumerals[Math.max(0,t-1)]}},{key:"getPreviousLevelBadgeId",value:function(t){var e=new PT(t);return e.level--,e.getBadgeId}},{key:"hasValue",value:function(t){return this._definitions.has(t)}},{key:"getValue",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||!t.length)return null;var i=t.match(/\$\{.[^}]*\}/g);if(i&&i.length){var r,a=Object(s.a)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;t=t.replace(o,this.getValue(o.slice(2,-1),e))}}catch(v){a.e(v)}finally{a.f()}}var u=this._definitions.get(t)||null;if(!u&&(u=gD.instance.core.configuration.definitions.get(t)))return u;if(u&&e){var c=this._parameters.get(t);if(c){var h,_=Object(s.a)(c);try{for(_.s();!(h=_.n()).done;){var l=Object(n.a)(h.value,2),d=l[0],f=l[1];u=u.replace("%"+d+"%",f)}}catch(v){_.e(v)}finally{_.f()}}}return u||t}},{key:"getValueWithParameter",value:function(t,e,i){var n=this.getValue(t,!1),s=n.replace("%"+e+"%",i);if(n.startsWith("%{")){var r=new RegExp("%{"+e.toUpperCase()+"\\|([^|]*)\\|([^|]*)\\|([^|]*)}"),a=n.match(r);if(!a)return s;var o=-1;switch(Number.parseInt(i)){case 0:o=1;break;case 1:o=2;break;default:o=3,!0}if(-1==o||"undefined"==typeof a[o])return s;var u=a[o];if(u)return u.replace("%%",i)}return s}},{key:"getValueWithParameters",value:function(t,e,i){var n=this.getValue(t,!1);if(e)for(var s=0;s<e.length;s++){var r=e[s],a=i[s];if(void 0!==a&&(n=n.replace("%"+r+"%",a)).startsWith("%{")){var o=new RegExp("%{"+r.toUpperCase()+"\\|([^|]*)\\|([^|]*)\\|([^|]*)}"),u=n.match(o);if(!u)continue;var c=-1;switch(parseInt(a)){case 0:c=1;break;case 1:c=2;break;default:c=3,!0}if(-1===c||"undefined"===typeof u[c])continue;var h=u[c];h&&(n=h.replace("%%",a))}}return n}},{key:"setValue",value:function(t,e){this._definitions.set(t,e)}},{key:"registerParameter",value:function(t,e,i){if(t&&0!==t.length&&e&&0!==e.length){var n=this._parameters.get(t);n||(n=new Map,this._parameters.set(t,n)),n.set(e,i)}}},{key:"getBadgeName",value:function(t){var e=new PT(t),i=["badge_name_"+t,"badge_name_"+e.base],n=this._Str_2103(this.getExistingKey(i));return n=n.replace("%roman%",this.getRomanNumeral(e.level))}},{key:"getBadgeDesc",value:function(t){var e=new PT(t),i=["badge_desc_"+t,"badge_desc_"+e.base],n=this._Str_2103(this.getExistingKey(i)),s=this.getBadgePointLimit(t);return s>-1&&(n=n.replace("%limit%",s.toString())),n=n.replace("%roman%",this.getRomanNumeral(e.level))}},{key:"getExistingKey",value:function(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=this.getValue(n);if(r!=n)return r}}catch(a){i.e(a)}finally{i.f()}return""}},{key:"_Str_2103",value:function(t){return t.replace("${","$").replace("{","$").replace("}","$")}}]),i}(w),xT=(i(146),i(80)),BT=(i(147),i(148),i(149),i(150),i(151),i(152),i(118)),GT=i(24),HT=(i(107),i(108),i(47),i(81));c.p.registerPlugin("batch",c.f),c.p.registerPlugin("extract",xT.a),c.p.registerPlugin("tilingSprite",BT.a),c.p.registerPlugin("tilemap",rt.b),c.p.registerPlugin("interaction",st.b),h.b.registerPlugin(_.b),v.a.registerPlugin(h.a),v.a.registerPlugin(y.b);var VT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._roomId=void 0,s._roomId=n,s}return Object(a.a)(i,[{key:"roomId",get:function(){return this._roomId}}]),i}(E.a);VT.INITIALIZED="REE_INITIALIZED",VT.ENGINE_INITIALIZED="REE_ENGINE_INITIALIZED",VT.OBJECTS_INITIALIZED="REE_OBJECTS_INITIALIZED",VT.NORMAL_MODE="REE_NORMAL_MODE",VT.GAME_MODE="REE_GAME_MODE",VT.ROOM_ZOOMED="REE_ROOM_ZOOMED",VT.DISPOSED="REE_DISPOSED";var zT=function(){function t(e,i,n){Object(r.a)(this,t),this._layerId=void 0,this._partId=void 0,this._paletteId=void 0,this._layerId=e,this._partId=i,this._paletteId=n}return Object(a.a)(t,[{key:"layerId",get:function(){return this._layerId},set:function(t){this._layerId=t}},{key:"partId",get:function(){return this._partId},set:function(t){this._partId=t}},{key:"paletteId",get:function(){return this._paletteId},set:function(t){this._paletteId=t}}]),t}(),YT=function(){function t(e){Object(r.a)(this,t),this._typeId=void 0,this._paletteId=void 0,this._color=void 0,this._headOnly=void 0,this._customParts=void 0,this._customLayerIds=void 0,this._customPartIds=void 0,this._customPaletteIds=void 0,this._typeId=this.getTypeId(e),this._paletteId=this.getPaletteId(e),this._color=this.getColor(e),this._headOnly=this.getHeadOnly(e);var i=this.getCustomData(e);this._customLayerIds=this.getCustomLayerIds(i),this._customPartIds=this.getCustomPartIds(i),this._customPaletteIds=this.getCustomPaletteIds(i),this._customParts=[];for(var n=0;n<this._customLayerIds.length;)this._customParts.push(new zT(this._customLayerIds[n],this._customPartIds[n],this._customPaletteIds[n])),n++}return Object(a.a)(t,[{key:"typeId",get:function(){return this._typeId}},{key:"paletteId",get:function(){return this._paletteId}},{key:"color",get:function(){return this._color}},{key:"customLayerIds",get:function(){return this._customLayerIds}},{key:"customPartIds",get:function(){return this._customPartIds}},{key:"customPaletteIds",get:function(){return this._customPaletteIds}},{key:"customParts",get:function(){return this._customParts}},{key:"getCustomPart",value:function(t){if(this._customParts){var e,i=Object(s.a)(this._customParts);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.layerId===t)return n}}catch(r){i.e(r)}finally{i.f()}}return null}},{key:"hasCustomParts",get:function(){return!(null==this._customLayerIds)&&this._customLayerIds.length>0}},{key:"headOnly",get:function(){return this._headOnly}},{key:"figureString",get:function(){var t=this.typeId+" "+this.paletteId+" "+this.color.toString(16);t=t+" "+this.customParts.length;var e,i=Object(s.a)(this.customParts);try{for(i.s();!(e=i.n()).done;){var n=e.value;t=t+" "+n.layerId+" "+n.partId+" "+n.paletteId}}catch(r){i.e(r)}finally{i.f()}return t}},{key:"getCustomData",value:function(t){var e=[];if(t){var i=t.split(" "),n=this._headOnly?1:0,s=4+n;if(i.length>s){var r=parseInt(i[3+n]);e=i.slice(s,s+3*r)}}return e}},{key:"getCustomLayerIds",value:function(t){for(var e=[],i=0;i<t.length;)e.push(parseInt(t[i+0])),i+=3;return e}},{key:"getCustomPartIds",value:function(t){for(var e=[],i=0;i<t.length;)e.push(parseInt(t[i+1])),i+=3;return e}},{key:"getCustomPaletteIds",value:function(t){for(var e=[],i=0;i<t.length;)e.push(parseInt(t[i+2])),i+=3;return e}},{key:"getTypeId",value:function(t){if(t){var e=t.split(" ");if(e.length>=1)return parseInt(e[0])}return 0}},{key:"getPaletteId",value:function(t){if(t){var e=t.split(" ");if(e.length>=2)return parseInt(e[1])}return 0}},{key:"getColor",value:function(t){if(t){var e=t.split(" ");if(e.length>=3)return parseInt(e[2],16)}return 16777215}},{key:"getHeadOnly",value:function(t){if(t){var e=t.split(" ");if(e.length>=4)return"head"===e[3]}return!1}}]),t}(),WT=Object(a.a)((function t(){Object(r.a)(this,t)}));WT.HOTEL_VIEW="hotel_view",WT.HOME_ROOM="home_room",WT.NAVIGATOR="navigator",WT.CATALOG="catalog",WT.INVENTORY="inventory",WT.ME_MENU="me_menu",WT.FRIEND_LIST="friendlist";var KT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t))._iconId=void 0,n._iconName=void 0,n}return Object(a.a)(i,[{key:"iconId",get:function(){return this._iconId},set:function(t){this._iconId=t}},{key:"iconName",get:function(){return this._iconName},set:function(t){this._iconName=t}}]),i}(E.a);KT.TOOLBAR_CLICK="NTE_TOOLBAR_CLICK",KT.SELECT_OWN_AVATAR="NTE_SELECT_OWN_AVATAR";var XT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.ANIMATE_ICON))._image=void 0,a._x=void 0,a._y=void 0,a._image=t,a._x=n,a._y=s,a}return Object(a.a)(i,[{key:"image",get:function(){return this._image}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}]),i}(KT);XT.ANIMATE_ICON="NTAIE_ANIMATE_ICON";var qT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,i.IMAGE_READY))._badgeId=void 0,s._image=void 0,s._badgeId=t,s._image=n,s}return Object(a.a)(i,[{key:"badgeId",get:function(){return this._badgeId}},{key:"image",get:function(){return this._image}}]),i}(E.a);qT.IMAGE_READY="BIME_BADGE_IMAGE_READY";var QT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(r.a)(this,i),(s=e.call(this,t))._session=void 0,s._openLandingView=void 0,s._session=n,s._openLandingView=a,s}return Object(a.a)(i,[{key:"session",get:function(){return this._session}},{key:"openLandingView",get:function(){return this._openLandingView}}]),i}(E.a);QT.CREATED="RSE_CREATED",QT.STARTED="RSE_STARTED",QT.ENDED="RSE_ENDED",QT.ROOM_DATA="RSE_ROOM_DATA";var ZT=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"isBuilderClubId",value:function(e){return e>=t.BUILDER_CLUB_FURNI_ID_BASE}}]),t}();ZT.BUILDER_CLUB_FURNI_ID_BASE=2147418112;var JT=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,i.ROOM_COLOR,t))._color=void 0,o._brightness=void 0,o._bgOnly=void 0,o._color=n,o._brightness=s,o._bgOnly=a,o}return Object(a.a)(i,[{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}},{key:"bgOnly",get:function(){return this._bgOnly}}]),i}(VT);JT.ROOM_COLOR="REE_ROOM_COLOR";var $T=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.ROOM_DRAG,t))._offsetX=void 0,a._offsetY=void 0,a._offsetX=n,a._offsetY=s,a}return Object(a.a)(i,[{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}}]),i}(VT);$T.ROOM_DRAG="RDE_ROOM_DRAG";var tR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,i.ROOM_COLOR,t))._state=void 0,c._presetId=void 0,c._effectId=void 0,c._color=void 0,c._brightness=void 0,c._state=n,c._presetId=s,c._effectId=a,c._color=o,c._brightness=u,c}return Object(a.a)(i,[{key:"state",get:function(){return this._state}},{key:"presetId",get:function(){return this._presetId}},{key:"effectId",get:function(){return this._effectId}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}}]),i}(VT);tR.ROOM_COLOR="REDSE_ROOM_COLOR";var eR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,t,n))._objectId=void 0,o._category=void 0,o._objectId=s,o._category=a,o}return Object(a.a)(i,[{key:"objectId",get:function(){return this._objectId}},{key:"category",get:function(){return this._category}}]),i}(VT);eR.SELECTED="REOE_SELECTED",eR.DESELECTED="REOE_DESELECTED",eR.ADDED="REOE_ADDED",eR.REMOVED="REOE_REMOVED",eR.PLACED="REOE_PLACED",eR.PLACED_ON_USER="REOE_PLACED_ON_USER",eR.CONTENT_UPDATED="REOE_CONTENT_UPDATED",eR.REQUEST_MOVE="REOE_REQUEST_MOVE",eR.REQUEST_ROTATE="REOE_REQUEST_ROTATE",eR.REQUEST_MANIPULATION="REOE_REQUEST_MANIPULATION",eR.MOUSE_ENTER="REOE_MOUSE_ENTER",eR.MOUSE_LEAVE="REOE_MOUSE_LEAVE";var iR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u,c,h,_,l,d,f,v){var g;return Object(r.a)(this,i),(g=e.call(this,t,n,s,a))._wallLocation="",g._x=0,g._y=0,g._z=0,g._direction=0,g._placedInRoom=!1,g._placedOnFloor=!1,g._placedOnWall=!1,g._instanceData=null,g._wallLocation=o,g._x=u,g._y=c,g._z=h,g._direction=_,g._placedInRoom=l,g._placedOnFloor=d,g._placedOnWall=f,g._instanceData=v,g}return Object(a.a)(i,[{key:"wallLocation",get:function(){return this._wallLocation}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"z",get:function(){return this._z}},{key:"direction",get:function(){return this._direction}},{key:"placedInRoom",get:function(){return this._placedInRoom}},{key:"placedOnFloor",get:function(){return this._placedOnFloor}},{key:"placedOnWall",get:function(){return this._placedOnWall}},{key:"instanceData",get:function(){return this._instanceData}}]),i}(eR),nR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n,s,a))._droppedObjectId=void 0,c._droppedObjectCategory=void 0,c._droppedObjectId=o,c._droppedObjectCategory=u,c}return Object(a.a)(i,[{key:"droppedObjectId",get:function(){return this._droppedObjectId}},{key:"droppedObjectCategory",get:function(){return this._droppedObjectCategory}}]),i}(eR),sR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){var u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(r.a)(this,i),(u=e.call(this,t,n,s,a))._soundId=void 0,u._pitch=void 0,u._soundId=o,u._pitch=c,u}return Object(a.a)(i,[{key:"soundId",get:function(){return this._soundId}},{key:"pitch",get:function(){return this._pitch}}]),i}(eR);sR.PLAY_SOUND="REOPSE_PLAY_SOUND",sR.PLAY_SOUND_AT_PITCH="REOPSE_PLAY_SOUND_AT_PITCH";var rR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(eR);rR.FURNI_CLICK="RERAE_FURNI_CLICK",rR.FURNI_DOUBLE_CLICK="RERAE_FURNI_DOUBLE_CLICK",rR.TOOLTIP_SHOW="RERAE_TOOLTIP_SHOW",rR.TOOLTIP_HIDE="RERAE_TOOLTIP_HIDE";var aR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){var u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(r.a)(this,i),(u=e.call(this,t,n,s,a))._sampleId=void 0,u._pitch=void 0,u._sampleId=o,u._pitch=c,u}return Object(a.a)(i,[{key:"sampleId",get:function(){return this._sampleId}},{key:"pitch",get:function(){return this._pitch}}]),i}(eR);aR.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",aR.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",aR.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",aR.CHANGE_PITCH="ROPSPE_CHANGE_PITCH";var oR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(r.a)(this,i),(o=e.call(this,t,n,s,a))._widget=void 0,o._widget=u,o}return Object(a.a)(i,[{key:"widget",get:function(){return this._widget}},{key:"contextMenu",get:function(){return this._widget}}]),i}(eR);oR.OPEN_WIDGET="RETWE_OPEN_WIDGET",oR.CLOSE_WIDGET="RETWE_CLOSE_WIDGET",oR.OPEN_FURNI_CONTEXT_MENU="RETWE_OPEN_FURNI_CONTEXT_MENU",oR.CLOSE_FURNI_CONTEXT_MENU="RETWE_CLOSE_FURNI_CONTEXT_MENU",oR.REQUEST_PLACEHOLDER="RETWE_REQUEST_PLACEHOLDER",oR.REQUEST_CREDITFURNI="RETWE_REQUEST_CREDITFURNI",oR.REQUEST_STICKIE="RETWE_REQUEST_STICKIE",oR.REQUEST_PRESENT="RETWE_REQUEST_PRESENT",oR.REQUEST_TROPHY="RETWE_REQUEST_TROPHY",oR.REQUEST_TEASER="RETWE_REQUEST_TEASER",oR.REQUEST_ECOTRONBOX="RETWE_REQUEST_ECOTRONBOX",oR.REQUEST_DIMMER="RETWE_REQUEST_DIMMER",oR.REMOVE_DIMMER="RETWE_REMOVE_DIMMER",oR.REQUEST_CLOTHING_CHANGE="RETWE_REQUEST_CLOTHING_CHANGE",oR.REQUEST_PLAYLIST_EDITOR="RETWE_REQUEST_PLAYLIST_EDITOR",oR.REQUEST_MANNEQUIN="RETWE_REQUEST_MANNEQUIN",oR.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",oR.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",oR.REQUEST_BACKGROUND_COLOR="RETWE_REQUEST_BACKGROUND_COLOR",oR.REQUEST_MYSTERYBOX_OPEN_DIALOG="RETWE_REQUEST_MYSTERYBOX_OPEN_DIALOG",oR.REQUEST_EFFECTBOX_OPEN_DIALOG="RETWE_REQUEST_EFFECTBOX_OPEN_DIALOG",oR.REQUEST_MYSTERYTROPHY_OPEN_DIALOG="RETWE_REQUEST_MYSTERYTROPHY_OPEN_DIALOG",oR.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",oR.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RETWE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",oR.REQUEST_FRIEND_FURNITURE_CONFIRM="RETWE_REQUEST_FRIEND_FURNITURE_CONFIRM",oR.REQUEST_FRIEND_FURNITURE_ENGRAVING="RETWE_REQUEST_FRIEND_FURNITURE_ENGRAVING",oR.REQUEST_BADGE_DISPLAY_ENGRAVING="RETWE_REQUEST_BADGE_DISPLAY_ENGRAVING",oR.REQUEST_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIGH_SCORE_DISPLAY",oR.REQUEST_HIDE_HIGH_SCORE_DISPLAY="RETWE_REQUEST_HIDE_HIGH_SCORE_DISPLAY",oR.REQUEST_INTERNAL_LINK="RETWE_REQUEST_INTERNAL_LINK",oR.REQUEST_ROOM_LINK="RETWE_REQUEST_ROOM_LINK";var uR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;return Object(r.a)(this,i),(o=e.call(this,t,n,s,a))._inventoryStripId=void 0,o._furnitureTypeId=void 0,o._inventoryStripId=u,o._furnitureTypeId=c,o}return Object(a.a)(i,[{key:"inventoryStripId",get:function(){return this._inventoryStripId}},{key:"furnitureTypeId",get:function(){return this._furnitureTypeId}}]),i}(eR);uR.USE_PRODUCT_FROM_ROOM="REUPE_USE_PRODUCT_FROM_ROOM",uR.USE_PRODUCT_FROM_INVENTORY="REUPE_USE_PRODUCT_FROM_INVENTORY";var cR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Object(r.a)(this,i),(a=e.call(this,t,n))._badgeId=void 0,a._groupBadge=void 0,a._badgeId=s,a._groupBadge=o,a}return Object(a.a)(i,[{key:"badgeId",get:function(){return this._badgeId}},{key:"groupBadge",get:function(){return this._groupBadge}}]),i}(xe);cR.LOAD_BADGE="ROBAE_LOAD_BADGE";var hR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(xe);hR.RODRE_CURRENT_USER_ID="RODRE_CURRENT_USER_ID",hR.RODRE_URL_PREFIX="RODRE_URL_PREFIX";var _R=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,i.DIMMER_STATE,t))._state=void 0,c._presetId=void 0,c._effectId=void 0,c._color=void 0,c._brightness=void 0,c._state=n,c._presetId=s,c._effectId=a,c._color=o,c._brightness=u,c}return Object(a.a)(i,[{key:"state",get:function(){return this._state}},{key:"presetId",get:function(){return this._presetId}},{key:"effectId",get:function(){return this._effectId}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}}]),i}(xe);_R.DIMMER_STATE="RODSUE_DIMMER_STATE";var lR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(xe);lR.ADD_HOLE="ROFHO_ADD_HOLE",lR.REMOVE_HOLE="ROFHO_REMOVE_HOLE";var dR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(xe);dR.DICE_OFF="ROFCAE_DICE_OFF",dR.DICE_ACTIVATE="ROFCAE_DICE_ACTIVATE",dR.USE_HABBOWHEEL="ROFCAE_USE_HABBOWHEEL",dR.STICKIE="ROFCAE_STICKIE",dR.ENTER_ONEWAYDOOR="ROFCAE_ENTER_ONEWAYDOOR",dR.SOUND_MACHINE_INIT="ROFCAE_SOUND_MACHINE_INIT",dR.SOUND_MACHINE_START="ROFCAE_SOUND_MACHINE_START",dR.SOUND_MACHINE_STOP="ROFCAE_SOUND_MACHINE_STOP",dR.SOUND_MACHINE_DISPOSE="ROFCAE_SOUND_MACHINE_DISPOSE",dR.JUKEBOX_INIT="ROFCAE_JUKEBOX_INIT",dR.JUKEBOX_START="ROFCAE_JUKEBOX_START",dR.JUKEBOX_MACHINE_STOP="ROFCAE_JUKEBOX_MACHINE_STOP",dR.JUKEBOX_DISPOSE="ROFCAE_JUKEBOX_DISPOSE",dR.MOUSE_BUTTON="ROFCAE_MOUSE_BUTTON",dR.MOUSE_ARROW="ROFCAE_MOUSE_ARROW";var fR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n))._enable=void 0,c._hue=void 0,c._saturation=void 0,c._lightness=void 0,c._enable=s,c._hue=a,c._saturation=o,c._lightness=u,c}return Object(a.a)(i,[{key:"enable",get:function(){return this._enable}},{key:"hue",get:function(){return this._hue}},{key:"saturation",get:function(){return this._saturation}},{key:"lightness",get:function(){return this._lightness}}]),i}(VT);fR.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR";var vR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n))._enable=void 0,c._hue=void 0,c._saturation=void 0,c._lightness=void 0,c._enable=s,c._hue=a,c._saturation=o,c._lightness=u,c}return Object(a.a)(i,[{key:"enable",get:function(){return this._enable}},{key:"hue",get:function(){return this._hue}},{key:"saturation",get:function(){return this._saturation}},{key:"lightness",get:function(){return this._lightness}}]),i}(xe);vR.ROOM_BACKGROUND_COLOR="ROHSLCEE_ROOM_BACKGROUND_COLOR";var gR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(xe);gR.POSITION_CHANGED="ROME_POSITION_CHANGED",gR.OBJECT_REMOVED="ROME_OBJECT_REMOVED";var OR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(r.a)(this,i),(a=e.call(this,t,n))._soundId=void 0,a._pitch=void 0,a._soundId=s,a._pitch=o,a}return Object(a.a)(i,[{key:"soundId",get:function(){return this._soundId}},{key:"pitch",get:function(){return this._pitch}}]),i}(dR);OR.PLAY_SOUND="ROPSIE_PLAY_SOUND",OR.PLAY_SOUND_AT_PITCH="ROPSIE_PLAY_SOUND_AT_PITCH";var yR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object(r.a)(this,i),(s=e.call(this,t,n))._imageUrl="",s._clickUrl="",s._imageUrl=a,s._clickUrl=o,s}return Object(a.a)(i,[{key:"imageUrl",get:function(){return this._imageUrl}},{key:"clickUrl",get:function(){return this._clickUrl}}]),i}(xe);yR.ROOM_AD_LOAD_IMAGE="RORAE_ROOM_AD_LOAD_IMAGE",yR.ROOM_AD_FURNI_CLICK="RORAE_ROOM_AD_FURNI_CLICK",yR.ROOM_AD_FURNI_DOUBLE_CLICK="RORAE_ROOM_AD_FURNI_DOUBLE_CLICK",yR.ROOM_AD_TOOLTIP_SHOW="RORAE_ROOM_AD_TOOLTIP_SHOW",yR.ROOM_AD_TOOLTIP_HIDE="RORAE_ROOM_AD_TOOLTIP_HIDE";var ER=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(r.a)(this,i),(a=e.call(this,t,n))._sampleId=void 0,a._pitch=void 0,a._sampleId=s,a._pitch=o,a}return Object(a.a)(i,[{key:"sampleId",get:function(){return this._sampleId}},{key:"pitch",get:function(){return this._pitch}}]),i}(xe);ER.ROOM_OBJECT_INITIALIZED="ROPSPE_ROOM_OBJECT_INITIALIZED",ER.ROOM_OBJECT_DISPOSED="ROPSPE_ROOM_OBJECT_DISPOSED",ER.PLAY_SAMPLE="ROPSPE_PLAY_SAMPLE",ER.CHANGE_PITCH="ROPSPE_CHANGE_PITCH";var pR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(eR);pR.SOUND_MACHINE_INIT="ROSM_SOUND_MACHINE_INIT",pR.SOUND_MACHINE_SWITCHED_ON="ROSM_SOUND_MACHINE_SWITCHED_ON",pR.SOUND_MACHINE_SWITCHED_OFF="ROSM_SOUND_MACHINE_SWITCHED_OFF",pR.SOUND_MACHINE_DISPOSE="ROSM_SOUND_MACHINE_DISPOSE",pR.JUKEBOX_INIT="ROSM_JUKEBOX_INIT",pR.JUKEBOX_SWITCHED_ON="ROSM_JUKEBOX_SWITCHED_ON",pR.JUKEBOX_SWITCHED_OFF="ROSM_JUKEBOX_SWITCHED_OFF",pR.JUKEBOX_DISPOSE="ROSM_JUKEBOX_DISPOSE";var mR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,i),(s=e.call(this,t,n))._state=void 0,s._state=a,s}return Object(a.a)(i,[{key:"state",get:function(){return this._state}}]),i}(xe);mR.STATE_CHANGE="ROSCE_STATE_CHANGE",mR.STATE_RANDOM="ROSCE_STATE_RANDOM";var IR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],_=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9&&void 0!==arguments[9]&&arguments[9];return Object(r.a)(this,i),(c=e.call(this,t,n,s,h,_,l,d))._tileX=void 0,c._tileY=void 0,c._tileZ=void 0,c._tileX=a,c._tileY=o,c._tileZ=u,c}return Object(a.a)(i,[{key:"tileX",get:function(){return this._tileX}},{key:"tileY",get:function(){return this._tileY}},{key:"tileZ",get:function(){return this._tileZ}},{key:"tileXAsInt",get:function(){return Math.trunc(this._tileX+.499)}},{key:"tileYAsInt",get:function(){return Math.trunc(this._tileY+.499)}},{key:"tileZAsInt",get:function(){return Math.trunc(this._tileZ+.499)}}]),i}(Be),bR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u,c,h,_){var l,d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],v=arguments.length>11&&void 0!==arguments[11]&&arguments[11],g=arguments.length>12&&void 0!==arguments[12]&&arguments[12];return Object(r.a)(this,i),(l=e.call(this,t,n,s,d,f,v,g))._wallLocation=void 0,l._wallWd=void 0,l._wallHt=void 0,l._x=void 0,l._y=void 0,l._direction=void 0,l._wallLocation=new Et,l._wallWd=new Et,l._wallHt=new Et,l._wallLocation.assign(a),l._wallWd.assign(o),l._wallHt.assign(u),l._x=c,l._y=h,l._direction=_,l}return Object(a.a)(i,[{key:"wallLocation",get:function(){return this._wallLocation}},{key:"wallWidth",get:function(){return this._wallWd}},{key:"wallHeight",get:function(){return this._wallHt}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"direction",get:function(){return this._direction}}]),i}(Be),TR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(xe);TR.OPEN_WIDGET="ROWRE_OPEN_WIDGET",TR.CLOSE_WIDGET="ROWRE_CLOSE_WIDGET",TR.OPEN_FURNI_CONTEXT_MENU="ROWRE_OPEN_FURNI_CONTEXT_MENU",TR.CLOSE_FURNI_CONTEXT_MENU="ROWRE_CLOSE_FURNI_CONTEXT_MENU",TR.PLACEHOLDER="ROWRE_PLACEHOLDER",TR.CREDITFURNI="ROWRE_CREDITFURNI",TR.STICKIE="ROWRE_STICKIE",TR.PRESENT="ROWRE_PRESENT",TR.TROPHY="ROWRE_TROPHY",TR.TEASER="ROWRE_TEASER",TR.ECOTRONBOX="ROWRE_ECOTRONBOX",TR.DIMMER="ROWRE_DIMMER",TR.WIDGET_REMOVE_DIMMER="ROWRE_WIDGET_REMOVE_DIMMER",TR.CLOTHING_CHANGE="ROWRE_CLOTHING_CHANGE",TR.JUKEBOX_PLAYLIST_EDITOR="ROWRE_JUKEBOX_PLAYLIST_EDITOR",TR.MANNEQUIN="ROWRE_MANNEQUIN",TR.PET_PRODUCT_MENU="ROWRE_PET_PRODUCT_MENU",TR.GUILD_FURNI_CONTEXT_MENU="ROWRE_GUILD_FURNI_CONTEXT_MENU",TR.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG="ROWRE_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG",TR.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG="ROWRE_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG",TR.BACKGROUND_COLOR="ROWRE_BACKGROUND_COLOR",TR.MYSTERYBOX_OPEN_DIALOG="ROWRE_MYSTERYBOX_OPEN_DIALOG",TR.EFFECTBOX_OPEN_DIALOG="ROWRE_EFFECTBOX_OPEN_DIALOG",TR.MYSTERYTROPHY_OPEN_DIALOG="ROWRE_MYSTERYTROPHY_OPEN_DIALOG",TR.ACHIEVEMENT_RESOLUTION_OPEN="ROWRE_ACHIEVEMENT_RESOLUTION_OPEN",TR.ACHIEVEMENT_RESOLUTION_ENGRAVING="ROWRE_ACHIEVEMENT_RESOLUTION_ENGRAVING",TR.ACHIEVEMENT_RESOLUTION_FAILED="ROWRE_ACHIEVEMENT_RESOLUTION_FAILED",TR.FRIEND_FURNITURE_CONFIRM="ROWRE_FRIEND_FURNITURE_CONFIRM",TR.FRIEND_FURNITURE_ENGRAVING="ROWRE_FRIEND_FURNITURE_ENGRAVING",TR.BADGE_DISPLAY_ENGRAVING="ROWRE_BADGE_DISPLAY_ENGRAVING",TR.HIGH_SCORE_DISPLAY="ROWRE_HIGH_SCORE_DISPLAY",TR.HIDE_HIGH_SCORE_DISPLAY="ROWRE_HIDE_HIGH_SCORE_DISPLAY",TR.INERNAL_LINK="ROWRE_INTERNAL_LINK",TR.ROOM_LINK="ROWRE_ROOM_LINK";var RR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._targetLocation=void 0,s._targetLocation=n,s}return Object(a.a)(i,[{key:"targetLocation",get:function(){return this._targetLocation}}]),i}(He);RR.ROAME_MOVE_TO="ROAME_MOVE_TO";var kR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(r.a)(this,i),(s=e.call(this,i.ROOM_ZOOM,t))._level=void 0,s._forceFlip=void 0,s._asDelta=void 0,s._level=n,s._forceFlip=a,s._asDelta=o,s}return Object(a.a)(i,[{key:"level",get:function(){return this._level}},{key:"forceFlip",get:function(){return this._forceFlip}},{key:"asDelta",get:function(){return this._asDelta}}]),i}(VT);kR.ROOM_ZOOM="REE_ROOM_ZOOM";var AR=function(){function t(){Object(r.a)(this,t),this.id=0,this.data=null,this.image=null}return Object(a.a)(t,[{key:"getImage",value:function(){return this.image?this.image:this.data?Ut.generateImage(this.data):null}}]),t}(),SR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.call(this,null,null)}return Object(a.a)(i)}(Ve),jR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._itemType=void 0,s._itemName=void 0,s._itemType=t,s._itemName=n,s}return Object(a.a)(i,[{key:"itemType",get:function(){return this._itemType}},{key:"itemName",get:function(){return this._itemName}}]),i}(SR),NR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._numberOfWords=void 0,t._numberOfWords=n,t}return Object(a.a)(i,[{key:"numberOfWords",get:function(){return this._numberOfWords}}]),i}(SR),DR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._danceStyle=void 0,t._danceStyle=n,t}return Object(a.a)(i,[{key:"danceStyle",get:function(){return this._danceStyle}}]),i}(SR),MR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(r.a)(this,i),(n=e.call(this))._effect=void 0,n._delayMilliseconds=void 0,n._effect=t,n._delayMilliseconds=s,n}return Object(a.a)(i,[{key:"effect",get:function(){return this._effect}},{key:"delayMilliseconds",get:function(){return this._delayMilliseconds}}]),i}(SR),CR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._gainedExperience=void 0,n._gainedExperience=t,n}return Object(a.a)(i,[{key:"gainedExperience",get:function(){return this._gainedExperience}}]),i}(SR),LR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._expressionType=void 0,t._expressionType=n,t}return Object(a.a)(i,[{key:"expressionType",get:function(){return this._expressionType}}]),i}(SR),UR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(r.a)(this,i),(n=e.call(this))._figure=void 0,n._gender=void 0,n._subType=void 0,n._isRiding=void 0,n._figure=t,n._gender=s,n._subType=a,n._isRiding=o,n}return Object(a.a)(i,[{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"subType",get:function(){return this._subType}},{key:"isRiding",get:function(){return this._isRiding}}]),i}(SR),PR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._level=void 0,t._level=n,t}return Object(a.a)(i,[{key:"level",get:function(){return this._level}}]),i}(SR),wR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._gesture=void 0,t._gesture=n,t}return Object(a.a)(i,[{key:"gesture",get:function(){return this._gesture}}]),i}(SR),FR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._guideStatus=void 0,n._guideStatus=t,n}return Object(a.a)(i,[{key:"guideStatus",get:function(){return this._guideStatus}}]),i}(SR),xR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(r.a)(this,i),(t=e.call(this))._isMuted=void 0,t._isMuted=n,t}return Object(a.a)(i,[{key:"isMuted",get:function(){return this._isMuted}}]),i}(SR),BR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(SR),GR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._gesture=void 0,n._gesture=t,n}return Object(a.a)(i,[{key:"gesture",get:function(){return this._gesture}}]),i}(SR),HR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._value=void 0,n._value=t,n}return Object(a.a)(i,[{key:"value",get:function(){return this._value}}]),i}(SR),VR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._isPlayingGame=void 0,n._isPlayingGame=t,n}return Object(a.a)(i,[{key:"isPlayingGame",get:function(){return this._isPlayingGame}}]),i}(SR),zR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(r.a)(this,i),(n=e.call(this))._postureType=void 0,n._parameter=void 0,n._postureType=t,n._parameter=s,n}return Object(a.a)(i,[{key:"postureType",get:function(){return this._postureType}},{key:"parameter",get:function(){return this._parameter}}]),i}(SR),YR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(r.a)(this,i),(t=e.call(this))._signType=void 0,t._signType=n,t}return Object(a.a)(i,[{key:"signType",get:function(){return this._signType}}]),i}(SR),WR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(r.a)(this,i),(t=e.call(this))._isSleeping=void 0,t._isSleeping=n,t}return Object(a.a)(i,[{key:"isSleeping",get:function(){return this._isSleeping}}]),i}(SR),KR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(r.a)(this,i),(t=e.call(this))._isTyping=void 0,t._isTyping=n,t}return Object(a.a)(i,[{key:"isTyping",get:function(){return this._isTyping}}]),i}(SR),XR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(r.a)(this,i),(a=e.call(this,t,s))._targetLocation=void 0,a._isSlide=void 0,a._targetLocation=n,a._isSlide=o,a}return Object(a.a)(i,[{key:"targetLocation",get:function(){return this._targetLocation?this._targetLocation:this.location}},{key:"isSlide",get:function(){return this._isSlide}}]),i}(Ve),qR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n,s))._headDirection=void 0,c._canStandUp=void 0,c._baseY=void 0,c._headDirection=a,c._canStandUp=o,c._baseY=u,c}return Object(a.a)(i,[{key:"headDirection",get:function(){return this._headDirection}},{key:"canStandUp",get:function(){return this._canStandUp}},{key:"baseY",get:function(){return this._baseY}}]),i}(XR),QR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._itemType=void 0,n._itemType=t,n}return Object(a.a)(i,[{key:"itemType",get:function(){return this._itemType}}]),i}(SR),ZR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(r.a)(this,i),(s=e.call(this,null,null))._state=void 0,s._data=void 0,s._extra=void 0,s._state=t,s._data=n,s._extra=a,s}return Object(a.a)(i,[{key:"state",get:function(){return this._state}},{key:"data",get:function(){return this._data}},{key:"extra",get:function(){return this._extra}}]),i}(Ve),JR=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,null,null))._badgeId=void 0,s._assetName=void 0,s._badgeId=t,s._assetName=n,s}return Object(a.a)(i,[{key:"badgeId",get:function(){return this._badgeId}},{key:"assetName",get:function(){return this._assetName}}]),i}(Ve);JR.BADGE_LOADED="ROGBUM_BADGE_LOADED";var $R=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t,n))._height=void 0,a._height=s,a}return Object(a.a)(i,[{key:"height",get:function(){return this._height}}]),i}(Ve),tk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,null,null))._data=void 0,n._data=t,n}return Object(a.a)(i,[{key:"data",get:function(){return this._data}}]),i}(Ve),ek=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,null,null))._numberKey=void 0,s._numberValue=void 0,s._numberKey=t,s._numberValue=n,s}return Object(a.a)(i,[{key:"numberKey",get:function(){return this._numberKey}},{key:"numberValue",get:function(){return this._numberValue}}]),i}(Ve),ik=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,null,null))._type=void 0,o._color=void 0,o._light=void 0,o._backgroundOnly=void 0,o._type=t,o._color=n,o._light=s,o._backgroundOnly=a,o}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"color",get:function(){return this._color}},{key:"light",get:function(){return this._light}},{key:"backgroundOnly",get:function(){return this._backgroundOnly}}]),i}(Ve);ik.BACKGROUND_COLOR="RORCUM_BACKGROUND_COLOR";var nk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(r.a)(this,i),(s=e.call(this,null,null))._type=void 0,s._id=void 0,s._x=void 0,s._y=void 0,s._width=void 0,s._height=void 0,s._type=t,s._id=n,s._x=a,s._y=o,s._width=u,s._height=c,s}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),i}(Ve);nk.ADD="ORPFHUM_ADD",nk.REMOVE="ORPFHUM_REMOVE";var sk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"window";return Object(r.a)(this,i),(s=e.call(this,null,null))._type=void 0,s._maskId=void 0,s._maskType=void 0,s._maskLocation=void 0,s._maskCategory=void 0,s._type=t,s._maskId=n,s._maskType=a,s._maskLocation=o?new Et(o.x,o.y,o.z):null,s._maskCategory=u,s}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"maskId",get:function(){return this._maskId}},{key:"maskType",get:function(){return this._maskType}},{key:"maskLocation",get:function(){return this._maskLocation}},{key:"maskCategory",get:function(){return this._maskCategory}}]),i}(Ve);sk.ADD_MASK="RORMUM_ADD_MASK",sk.REMOVE_MASK="RORMUM_ADD_MASK",sk.DOOR="door",sk.WINDOW="window",sk.HOLE="hole";var rk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,null,null))._type=void 0,s._value=void 0,s._type=t,s._value=n,s}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"value",get:function(){return this._value}}]),i}(Ve);rk.WALL_THICKNESS="RORPPUM_WALL_THICKNESS",rk.FLOOR_THICKNESS="RORPVUM_FLOOR_THICKNESS";var ak=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,null,null))._type=void 0,s._visible=void 0,s._type=t,s._visible=n,s}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"visible",get:function(){return this._visible}}]),i}(Ve);ak.WALL_VISIBILITY="RORPVUM_WALL_VISIBILITY",ak.FLOOR_VISIBILITY="RORPVUM_FLOOR_VISIBILITY";var ok=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,null,null))._type=void 0,s._value=void 0,s._type=t,s._value=n,s}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"value",get:function(){return this._value}}]),i}(Ve);ok.ROOM_WALL_UPDATE="RORUM_ROOM_WALL_UPDATE",ok.ROOM_FLOOR_UPDATE="RORUM_ROOM_FLOOR_UPDATE",ok.ROOM_LANDSCAPE_UPDATE="RORUM_ROOM_LANDSCAPE_UPDATE";var uk=Object(a.a)((function t(){Object(r.a)(this,t)}));uk.NONE=0,uk.GUIDE=1,uk.REQUESTER=2;var ck=function(){function t(e,i,n){Object(r.a)(this,t),this._id=void 0,this._type=void 0,this._visualization=void 0,this._id=e,this._type=i,this._visualization=n}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null}},{key:"update",value:function(t,e){}},{key:"animate",value:function(t){return!1}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"visualization",get:function(){return this._visualization}}]),t}(),hk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t,n,s))._asset=void 0,a._startTime=void 0,a._delta=void 0,a._offsetY=void 0,a._scale=void 0,a._state=void 0,a._asset=null,a._startTime=gD.instance.time,a._delta=0,a._offsetY=0,a._scale=0,a._state=0,a}return Object(a.a)(i,[{key:"update",value:function(t,e){if(t){this._scale=e;var i=64,n=0;if(e<48?(this._asset=this.visualization.getAvatarRenderAsset("avatar_addition_user_blowkiss_small"),n=90===this.visualization.angle||270===this.visualization.angle?0:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?6:-6,this._offsetY=-38,i=32):(this._asset=this.visualization.getAvatarRenderAsset("avatar_addition_user_blowkiss"),n=90===this.visualization.angle||270===this.visualization.angle?-3:135===this.visualization.angle||180===this.visualization.angle||225===this.visualization.angle?22:-30,this._offsetY=-70),this.visualization.posture===qt.POSTURE_SIT?this._offsetY+=i/2:this.visualization.posture===qt.POSTURE_LAY&&(this._offsetY+=i),this._asset){t.texture=this._asset,t.offsetX=n,t.offsetY=this._offsetY,t.relativeDepth=-.02,t.alpha=0;var s=this._delta;this.animate(t),this._delta=s}}}},{key:"animate",value:function(t){if(!t)return!1;if(this._asset&&(t.texture=this._asset),this._state===i.STATE_DELAY)return!(gD.instance.time-this._startTime<i.DELAY_BEFORE_ANIMATION)&&(this._state=i.STATE_FADE_IN,t.alpha=0,t.visible=!0,this._delta=0,!0);if(this._state===i.STATE_FADE_IN)return this._delta+=.1,t.offsetY=this._offsetY,t.alpha=255*Math.pow(this._delta,.9),this._delta>=1&&(t.alpha=255,this._delta=0,this._state=i.STATE_FLOAT),!0;if(this._state===i.STATE_FLOAT){var e=Math.pow(this._delta,.9);this._delta+=.05;var n=this._scale<48?-30:-40;return t.offsetY=this._offsetY+(this._delta<1?e:1)*n,t.alpha=255*(1-e),t.alpha<=0&&(t.visible=!1,this._state=i.STATE_COMPLETE),!0}return!1}}]),i}(ck);hk.DELAY_BEFORE_ANIMATION=300,hk.STATE_DELAY=0,hk.STATE_FADE_IN=1,hk.STATE_FLOAT=2,hk.STATE_COMPLETE=3;var _k=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getExpressionAddition",value:function(t,e,i){return e===this.BLOW?new hk(t,this.BLOW,i):new ck(t,e,i)}}]),t}();_k.WAVE=1,_k.BLOW=2,_k.LAUGH=3,_k.CRY=4,_k.IDLE=5;var lk=function(){function t(e,i){Object(r.a)(this,t),this._id=void 0,this._visualization=void 0,this._asset=void 0,this._startTime=void 0,this._offsetY=void 0,this._scale=void 0,this._state=void 0,this._id=e,this._visualization=i,this._asset=null,this._startTime=gD.instance.time,this._offsetY=0,this._scale=0,this._state=0}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null,this._asset=null}},{key:"getSpriteAssetName",value:function(t){var e="left";return 135!==this._visualization.angle&&180!==this._visualization.angle&&225!==this._visualization.angle&&270!==this._visualization.angle||(e="right"),"avatar_addition_user_idle_"+e+"_"+t+(this._scale<48?"_small":"")}},{key:"update",value:function(e,i){if(e){this._scale=i,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(this._state===t.STATE_FRAME_A?1:2));var n=64,s=0;i<48?(s=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?10:-16,this._offsetY=-38,n=32):(s=135===this._visualization.angle||180===this._visualization.angle||225===this._visualization.angle||270===this._visualization.angle?22:-30,this._offsetY=-70),this._visualization.posture===qt.POSTURE_SIT?this._offsetY+=n/2:this._visualization.posture===qt.POSTURE_LAY&&(this._offsetY+=n-.3*n),this._asset&&(e.texture=this._asset,e.offsetX=s,e.offsetY=this._offsetY,e.relativeDepth=-.02,e.alpha=0)}}},{key:"animate",value:function(e){if(!e)return!1;var i=gD.instance.time;return this._state===t.STATE_DELAY&&i-this._startTime>=t.DELAY_BEFORE_ANIMATION&&(this._state=t.STATE_FRAME_A,this._startTime=i,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._state===t.STATE_FRAME_A&&i-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_B,this._startTime=i,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(2))),this._state===t.STATE_FRAME_B&&i-this._startTime>=t.DELAY_PER_FRAME&&(this._state=t.STATE_FRAME_A,this._startTime=i,this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1))),this._asset?(e.texture=this._asset,e.alpha=255,e.visible=!0):e.visible=!1,!1}},{key:"id",get:function(){return this._id}}]),t}();lk.DELAY_BEFORE_ANIMATION=2e3,lk.DELAY_PER_FRAME=2e3,lk.STATE_DELAY=0,lk.STATE_FRAME_A=1,lk.STATE_FRAME_B=2;var dk=function(){function t(e){Object(r.a)(this,t),this._id=void 0,this._asset=void 0,this._disposed=void 0,this._id=e,this._asset=null,this._disposed=!1}return Object(a.a)(t,[{key:"dispose",value:function(){this._asset=null}},{key:"update",value:function(e,i){if(e){if(!this._asset){var n=new tt.a(c.t.WHITE);n.alpha=0,n.width=t.WIDTH,n.height=t.HEIGHT,this._asset=Ut.generateTexture(n)}e.visible=!0,e.texture=this._asset,e.offsetX=t.OFFSET_X,e.offsetY=t.OFFSET_Y,e.alphaTolerance=ze.MATCH_ALL_PIXELS}}},{key:"animate",value:function(t){return!1}},{key:"id",get:function(){return this._id}}]),t}();dk.WIDTH=46,dk.HEIGHT=60,dk.OFFSET_X=-23,dk.OFFSET_Y=-48;var fk=function(){function t(e,i,n){Object(r.a)(this,t),this._id=void 0,this._visualization=void 0,this._asset=void 0,this._relativeDepth=void 0,this._status=void 0,this._id=e,this._visualization=i,this._asset=null,this._relativeDepth=0,this._status=n}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null,this._asset=null}},{key:"update",value:function(t,e){if(t){t.visible=!0,t.relativeDepth=this._relativeDepth,t.alpha=255;var i=64,n=0,s=0;this._asset=this._visualization.getAvatarRenderAsset(this._status===uk.GUIDE?"avatar_addition_user_guide_bubble":"avatar_addition_user_guide_requester_bubble"),e<48?(n=-19,s=-80,i=32):(n=-19,s=-120),this._visualization.posture===qt.POSTURE_SIT?s+=i/2:this._visualization.posture===qt.POSTURE_LAY&&(s+=e),this._asset&&(t.texture=this._asset,t.offsetX=n,t.offsetY=s,t.relativeDepth=-.02)}}},{key:"animate",value:function(t){return this._asset&&t&&(t.texture=this._asset),!1}},{key:"id",get:function(){return this._id}},{key:"relativeDepth",get:function(){return this._relativeDepth},set:function(t){this._relativeDepth=t}}]),t}(),vk=function(){function t(e,i){Object(r.a)(this,t),this._id=void 0,this._visualization=void 0,this._asset=void 0,this._id=e,this._visualization=i,this._asset=null}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null,this._asset=null}},{key:"update",value:function(t,e){if(t){var i=64,n=0,s=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_user_muted_small"),i=32,n=-12,s=-66):(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_user_muted"),n=-15,s=-110),this._visualization.posture===qt.POSTURE_SIT?s+=i/2:this._visualization.posture===qt.POSTURE_LAY&&(s+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=n,t.offsetY=s,t.relativeDepth=-.02):t.visible=!1}}},{key:"animate",value:function(t){return this._asset&&t&&(t.texture=this._asset),!1}},{key:"id",get:function(){return this._id}}]),t}(),gk=function(){function t(e,i,n){Object(r.a)(this,t),this._id=void 0,this._visualization=void 0,this._asset=void 0,this._scale=void 0,this._number=void 0,this._numberValueFadeDirection=void 0,this._numberValueMoving=void 0,this._numberValueMoveCounter=void 0,this._id=e,this._visualization=n,this._asset=null,this._scale=0,this._number=i,this._numberValueFadeDirection=0,this._numberValueMoving=!1,this._numberValueMoveCounter=0}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null,this._asset=null}},{key:"update",value:function(t,e){if(t){this._scale=e;var i=64,n=0,s=0;this._number>0?(e<48?(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_number_"+this._number+"_small"),i=32,n=-6,s=-52):(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_number_"+this._number),n=-8,s=-105),this._visualization.posture===qt.POSTURE_SIT?s+=i/2:this._visualization.posture===qt.POSTURE_LAY&&(s+=e),this._asset?(t.visible=!0,t.texture=this._asset,t.offsetX=n,t.offsetY=s,t.relativeDepth=-.01,t.alpha=0,this._numberValueFadeDirection=1,this._numberValueMoving=!0,this._numberValueMoveCounter=0):t.visible=!1):t.visible&&(this._numberValueFadeDirection=-1)}}},{key:"animate",value:function(t){if(!t)return!1;this._asset&&(t.texture=this._asset);var e=t.alpha,i=!1;if(this._numberValueMoving){if(this._numberValueMoveCounter++,this._numberValueMoveCounter<10)return!1;if(this._numberValueFadeDirection<0)this._scale<48?t.offsetY-=2:t.offsetY-=4;else{var n=4;this._scale<48&&(n=8),this._numberValueMoveCounter%n||(t.offsetY--,i=!0)}}return this._numberValueFadeDirection>0?(e<255&&(e+=32),e>=255&&(e=255,this._numberValueFadeDirection=0),t.alpha=e,!0):this._numberValueFadeDirection<0?(e>=0&&(e-=32),e<=0&&(this._numberValueFadeDirection=0,this._numberValueMoving=!1,e=0,t.visible=!1),t.alpha=e,!0):i}},{key:"id",get:function(){return this._id}}]),t}(),Ok=function(){function t(e,i){Object(r.a)(this,t),this._id=void 0,this._visualization=void 0,this._asset=void 0,this._relativeDepth=void 0,this._id=e,this._visualization=i,this._asset=null,this._relativeDepth=0}return Object(a.a)(t,[{key:"dispose",value:function(){this._visualization=null,this._asset=null}},{key:"update",value:function(t,e){if(t){t.visible=!0,t.relativeDepth=this._relativeDepth,t.alpha=255;var i=64,n=0,s=0;e<48?(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_user_typing_small"),n=3,s=-42,i=32):(this._asset=this._visualization.getAvatarRenderAsset("avatar_addition_user_typing"),n=14,s=-83),this._visualization.posture===qt.POSTURE_SIT?s+=i/2:this._visualization.posture===qt.POSTURE_LAY&&(s+=e),this._asset&&(t.texture=this._asset,t.offsetX=n,t.offsetY=s,t.relativeDepth=-.02)}}},{key:"animate",value:function(t){return this._asset&&t&&(t.texture=this._asset),!1}},{key:"id",get:function(){return this._id}},{key:"relativeDepth",get:function(){return this._relativeDepth},set:function(t){this._relativeDepth=t}}]),t}(),yk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._avatarRenderer=void 0,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return!0}},{key:"onDispose",value:function(){this._avatarRenderer=null}},{key:"createAvatarImage",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return e>48?this._avatarRenderer.createAvatarImage(t,Ht.LARGE,i,n,s):this._avatarRenderer.createAvatarImage(t,Ht.SMALL,i,n,s)}},{key:"getAvatarRendererAsset",value:function(t){return this._avatarRenderer?this._avatarRenderer.assets.getTexture(t):null}},{key:"avatarManager",get:function(){return this._avatarRenderer},set:function(t){this._avatarRenderer=t}},{key:"layerCount",get:function(){return 0}}]),i}(m),Ek=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._avatarImage=void 0,t._cachedAvatars=void 0,t._cachedAvatarEffects=void 0,t._shadow=void 0,t._lastUpdate=void 0,t._disposed=void 0,t._figure=void 0,t._gender=void 0,t._direction=void 0,t._headDirection=void 0,t._posture=void 0,t._postureParameter=void 0,t._canStandUp=void 0,t._postureOffset=void 0,t._verticalOffset=void 0,t._angle=void 0,t._headAngle=void 0,t._talk=void 0,t._expression=void 0,t._sleep=void 0,t._blink=void 0,t._gesture=void 0,t._sign=void 0,t._highlightEnabled=void 0,t._highlight=void 0,t._dance=void 0,t._effect=void 0,t._carryObject=void 0,t._useObject=void 0,t._ownUser=void 0,t._isLaying=void 0,t._layInside=void 0,t._isAnimating=void 0,t._extraSpritesStartIndex=void 0,t._forcedAnimFrames=void 0,t._updatesUntilFrameUpdate=void 0,t._isAvatarReady=void 0,t._needsUpdate=void 0,t._geometryUpdateCounter=void 0,t._additions=void 0,t._data=null,t._avatarImage=null,t._cachedAvatars=new H,t._cachedAvatarEffects=new H,t._shadow=null,t._lastUpdate=-1e3,t._disposed=!1,t._figure=null,t._gender=null,t._direction=-1,t._headDirection=-1,t._posture="",t._postureParameter="",t._canStandUp=!1,t._postureOffset=0,t._verticalOffset=0,t._angle=-1,t._headAngle=-1,t._talk=!1,t._expression=0,t._sleep=!1,t._blink=!1,t._gesture=0,t._sign=-1,t._highlightEnabled=!1,t._highlight=!1,t._dance=0,t._effect=0,t._carryObject=0,t._useObject=0,t._ownUser=!1,t._isLaying=!1,t._layInside=!1,t._isAnimating=!1,t._extraSpritesStartIndex=2,t._forcedAnimFrames=0,t._updatesUntilFrameUpdate=0,t._isAvatarReady=!1,t._needsUpdate=!1,t._geometryUpdateCounter=-1,t._additions=new Map,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return t instanceof yk&&(this._data=t,this.createSprites(i.INITIAL_RESERVED_SPRITES),Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),!0)}},{key:"dispose",value:function(){this._disposed||(Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._avatarImage&&this._avatarImage.dispose(),this._shadow=null,this._disposed=!0)}},{key:"update",value:function(t,e,n,r){if(this.object&&t&&this._data&&!(e<this._lastUpdate+i.UPDATE_TIME_INCREASER)){this._lastUpdate+=i.UPDATE_TIME_INCREASER,this._lastUpdate+i.UPDATE_TIME_INCREASER<e&&(this._lastUpdate=e-i.UPDATE_TIME_INCREASER);var a=this.object.model,o=t.scale,u=this._effect,c=!1,h=!1,_=!1,l=!1,d=this.updateModel(a,o);if(d||o!==this._scale||!this._avatarImage){if(o!==this._scale&&(c=!0,this.updateScale(o)),u!==this._effect&&(h=!0),c||!this._avatarImage||h){if(this._avatarImage=this.createAvatarImage(o,this._effect),!this._avatarImage)return;_=!0;var f=this.getSprite(i.AVATAR_LAYER_ID);f&&this._avatarImage&&this._avatarImage.isPlaceholder()?f.alpha=150:f&&(f.alpha=255)}if(!this._avatarImage)return;if(h&&this._avatarImage.animationHasResetOnToggle&&this._avatarImage.resetAnimationFrameCounter(),this.updateShadow(o),l=this.updateObject(this.object,t,n,!0),this.processActionsForAvatar(this._avatarImage),this._additions){var v,O=this._extraSpritesStartIndex,y=Object(s.a)(this._additions.values());try{for(y.s();!(v=y.n()).done;){v.value.update(this.getSprite(O++),o)}}catch(K){y.e(K)}finally{y.f()}}this._scale=o}else l=this.updateObject(this.object,t,n);if(this._additions){var E,p=this._extraSpritesStartIndex,m=Object(s.a)(this._additions.values());try{for(m.s();!(E=m.n()).done;){E.value.animate(this.getSprite(p++))&&this.updateSpriteCounter++}}catch(K){m.e(K)}finally{m.f()}}var I=l||d||c,b=(this._isAnimating||this._forcedAnimFrames>0)&&n;if(I&&(this._forcedAnimFrames=i.ANIMATION_FRAME_UPDATE_INTERVAL),I||b){if(this.updateSpriteCounter++,this._forcedAnimFrames--,this._updatesUntilFrameUpdate--,!(this._updatesUntilFrameUpdate<=0||c||d||_))return;this._avatarImage.updateAnimationByFrames(1),this._updatesUntilFrameUpdate=i.ANIMATION_FRAME_UPDATE_INTERVAL;var T=this._avatarImage.getCanvasOffsets();(!T||T.length<3)&&(T=i.DEFAULT_CANVAS_OFFSETS);var R=this.getSprite(i.SPRITE_INDEX_AVATAR);if(R){var k=1===this.object.model.getValue(dt.FIGURE_HIGHLIGHT_ENABLE)&&1===this.object.model.getValue(dt.FIGURE_HIGHLIGHT),A=this._avatarImage.getImage(Qt.FULL,k);A&&(R.texture=A,k||(R.filters=[])),R.texture&&(R.offsetX=-1*o/2+T[0]-(R.texture.width-o)/2,R.offsetY=-R.texture.height+o/4+T[1]+this._postureOffset),this._isLaying?this._layInside?R.relativeDepth=-.5:R.relativeDepth=i.AVATAR_SPRITE_LAYING_DEPTH+T[2]:R.relativeDepth=i.AVATAR_SPRITE_DEFAULT_DEPTH+T[2],this._ownUser?(R.relativeDepth-=i.AVATAR_OWN_DEPTH_ADJUST,R.spriteType=Ye.AVATAR_OWN):R.spriteType=Ye.AVATAR}var S=this.getAddition(i.TYPING_BUBBLE_ID);S&&(this._isLaying?S.relativeDepth=i.AVATAR_SPRITE_LAYING_DEPTH-.01+T[2]:S.relativeDepth=i.AVATAR_SPRITE_DEFAULT_DEPTH-.01+T[2]),this._isAnimating=this._avatarImage.isAnimating();var j,N=i.INITIAL_RESERVED_SPRITES,D=this._avatarImage.getDirection(),M=Object(s.a)(this._avatarImage.getSprites());try{for(M.s();!(j=M.n()).done;){var C=j.value;if(C.id===i.AVATAR){var L=this.getSprite(i.SPRITE_INDEX_AVATAR);if(L){var U=this._avatarImage.getLayerData(C),P=C.getDirectionOffsetX(D),w=C.getDirectionOffsetY(D);U&&(P+=U.dx,w+=U.dy),o<48&&(P/=2,w/=2),this._canStandUp||(L.offsetX+=P,L.offsetY+=w)}}else{var F=this.getSprite(N);if(F){F.alphaTolerance=ze.MATCH_NOTHING,F.visible=!0;var x=this._avatarImage.getLayerData(C),B=0,G=C.getDirectionOffsetX(D),H=C.getDirectionOffsetY(D),V=C.getDirectionOffsetZ(D),z=0;C.hasDirections&&(z=D),x&&(B=x.animationFrame,G+=x.dx,H+=x.dy,z+=x.dd),o<48&&(G/=2,H/=2),z<0?z+=8:z>7&&(z-=8);var Y=this._avatarImage.getScale()+"_"+C.member+"_"+z+"_"+B,W=this._avatarImage.getAsset(Y);if(!W)continue;F.texture=W.texture,F.offsetX=W.offsetX-o/2+G,F.offsetY=W.offsetY+H,F.flipH=W.flipH,C.hasStaticY?F.offsetY+=this._verticalOffset*o/(2*i.BASE_Y_SCALE):F.offsetY+=this._postureOffset,this._isLaying?F.relativeDepth=i.AVATAR_SPRITE_LAYING_DEPTH-.001*this.totalSprites*V:F.relativeDepth=i.AVATAR_SPRITE_DEFAULT_DEPTH-.001*this.totalSprites*V,33===C.ink?F.blendMode=g.b.ADD:F.blendMode=g.b.NORMAL}N++}}}catch(K){M.e(K)}finally{M.f()}}}}},{key:"createAvatarImage",value:function(t,e){var n=null,s="avatarImage"+t.toString();if(e?(s+="-"+e,n=this._cachedAvatarEffects.getValue(s)):n=this._cachedAvatars.getValue(s),!n&&(n=this._data.createAvatarImage(this._figure,t,this._gender,this,this)))if(e){if(this._cachedAvatarEffects.length>=i.MAX_EFFECT_CACHE){var r=this._cachedAvatarEffects.remove(this._cachedAvatarEffects.getKey(0));r&&r.dispose()}this._cachedAvatarEffects.add(s,n)}else this._cachedAvatars.add(s,n);return n}},{key:"updateObject",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!n&&this.updateObjectCounter===t.updateCounter&&this._geometryUpdateCounter===e.updateId)return!1;var s=t.getDirection().x-e.direction.x,r=this._headDirection-e.direction.x;return"float"===this._posture&&(r=s),s=(s%360+360)%360,r=(r%360+360)%360,"sit"===this._posture&&this._canStandUp&&(s-=s%90-45,r-=r%90-45),(s!==this._angle||n)&&(i=!0,this._angle=s,s=((s-=112.5)+360)%360,this._avatarImage.setDirectionAngle(Qt.FULL,s)),(r!==this._headAngle||n)&&(i=!0,this._headAngle=r,this._headAngle!==this._angle&&(r=((r-=112.5)+360)%360,this._avatarImage.setDirectionAngle(Qt.HEAD,r))),this._geometryUpdateCounter=e.updateId,this.updateObjectCounter=this.object.updateCounter,i}},{key:"updateModel",value:function(t,e){if(!t)return!1;if(this.updateModelCounter===t.updateCounter)return!1;var n=!1,s=t.getValue(dt.FIGURE_TALK)>0;s!==this._talk&&(this._talk=s,n=!0);var r=t.getValue(dt.FIGURE_EXPRESSION);r!==this._expression&&(this._expression=r,n=!0);var a=t.getValue(dt.FIGURE_SLEEP)>0;a!==this._sleep&&(this._sleep=a,n=!0);var o=t.getValue(dt.FIGURE_BLINK)>0;o!==this._blink&&(this._blink=o,n=!0);var u=t.getValue(dt.FIGURE_GESTURE)||0;u!==this._gesture&&(this._gesture=u,n=!0);var c=t.getValue(dt.FIGURE_POSTURE);c!==this._posture&&(this._posture=c,n=!0);var h=t.getValue(dt.FIGURE_POSTURE_PARAMETER);h!==this._postureParameter&&(this._postureParameter=h,n=!0);var _=t.getValue(dt.FIGURE_CAN_STAND_UP);_!==this._canStandUp&&(this._canStandUp=_,n=!0);var l=t.getValue(dt.FIGURE_VERTICAL_OFFSET)*i.BASE_Y_SCALE;l!==this._verticalOffset&&(this._verticalOffset=l,n=!0);var d=t.getValue(dt.FIGURE_DANCE)||0;d!==this._dance&&(this._dance=d,n=!0);var f=t.getValue(dt.FIGURE_EFFECT)||0;f!==this._effect&&(this._effect=f,n=!0);var v=t.getValue(dt.FIGURE_CARRY_OBJECT)||0;v!==this._carryObject&&(this._carryObject=v,n=!0);var g=t.getValue(dt.FIGURE_USE_OBJECT)||0;g!==this._useObject&&(this._useObject=g,n=!0);var O=t.getValue(dt.HEAD_DIRECTION);O!==this._headDirection&&(this._headDirection=O,n=!0),this._carryObject>0&&g>0?this._useObject!==this._carryObject&&(this._useObject=this._carryObject,n=!0):0!==this._useObject&&(this._useObject=0,n=!0);var y=this.getAddition(i.FLOATING_IDLE_Z_ID);this._sleep?(y||(y=this.addAddition(new lk(i.FLOATING_IDLE_Z_ID,this))),n=!0):y&&this.removeAddition(i.FLOATING_IDLE_Z_ID);var E=t.getValue(dt.FIGURE_IS_MUTED)>0,p=this.getAddition(i.MUTED_BUBBLE_ID);if(E)p||(p=this.addAddition(new vk(i.MUTED_BUBBLE_ID,this))),n=!0;else{p&&(this.removeAddition(i.MUTED_BUBBLE_ID),n=!0);var m=t.getValue(dt.FIGURE_IS_TYPING)>0,I=this.getAddition(i.TYPING_BUBBLE_ID);m?(I||(I=this.addAddition(new Ok(i.TYPING_BUBBLE_ID,this))),n=!0):I&&(this.removeAddition(i.TYPING_BUBBLE_ID),n=!0)}var b=t.getValue(dt.FIGURE_GUIDE_STATUS)||0;b!==uk.NONE?(this.removeAddition(i.GUIDE_BUBBLE_ID),this.addAddition(new fk(i.GUIDE_BUBBLE_ID,this,b)),n=!0):this.getAddition(i.GUIDE_BUBBLE_ID)&&(this.removeAddition(i.GUIDE_BUBBLE_ID),n=!0);var T=t.getValue(dt.FIGURE_IS_PLAYING_GAME)>0,R=this.getAddition(i.GAME_CLICK_TARGET_ID);T?(R||(R=this.addAddition(new dk(i.GAME_CLICK_TARGET_ID))),n=!0):R&&this.removeAddition(i.GAME_CLICK_TARGET_ID);var k=t.getValue(dt.FIGURE_NUMBER_VALUE),A=this.getAddition(i.NUMBER_BUBBLE_ID);k>0?(A||(A=this.addAddition(new gk(i.NUMBER_BUBBLE_ID,k,this))),n=!0):A&&this.removeAddition(i.NUMBER_BUBBLE_ID);var S=this.getAddition(i.EXPRESSION_ID);this._expression>0?S||(S=_k.getExpressionAddition(i.EXPRESSION_ID,this._expression,this))&&this.addAddition(S):S&&this.removeAddition(i.EXPRESSION_ID),this.updateScale(e);var j=t.getValue(dt.GENDER);j!==this._gender&&(this._gender=j,n=!0),this.updateFigure(t.getValue(dt.FIGURE))&&(n=!0);var N=t.getValue(dt.FIGURE_SIGN);null===N&&(N=-1),this._sign!==N&&(this._sign=N,n=!0);var D=t.getValue(dt.FIGURE_HIGHLIGHT_ENABLE)>0;if(D!==this._highlightEnabled&&(this._highlightEnabled=D,n=!0),this._highlightEnabled){var M=t.getValue(dt.FIGURE_HIGHLIGHT)>0;M!==this._highlight&&(this._highlight=M,n=!0)}var C=t.getValue(dt.OWN_USER)>0;return C!==this._ownUser&&(this._ownUser=C,n=!0),this.updateModelCounter=t.updateCounter,n}},{key:"setDirection",value:function(t){this._direction!==t&&(this._direction=t,this._needsUpdate=!0)}},{key:"updateScale",value:function(t){(t<48&&(this._blink=!1),"sit"===this._posture||"lay"===this._posture?this._postureOffset=t/2:this._postureOffset=0,this._layInside=!1,this._isLaying=!1,"lay"===this._posture)&&(this._isLaying=!0,parseInt(this._postureParameter)<0&&(this._layInside=!0))}},{key:"processActionsForAvatar",value:function(t){if(t){if(t.initActionAppends(),t.appendAction(qt.POSTURE,this._posture,this._postureParameter),this._gesture>0&&this._avatarImage.appendAction(qt.GESTURE,qt.getGesture(this._gesture)),this._dance>0&&this._avatarImage.appendAction(qt.DANCE,this._dance),this._sign>-1&&this._avatarImage.appendAction(qt.SIGN,this._sign),this._carryObject>0&&this._avatarImage.appendAction(qt.CARRY_OBJECT,this._carryObject),this._useObject>0&&this._avatarImage.appendAction(qt.USE_OBJECT,this._useObject),this._talk&&this._avatarImage.appendAction(qt.TALK),(this._sleep||this._blink)&&this._avatarImage.appendAction(qt.SLEEP),this._expression>0){var e=qt.getExpression(this._expression);if(""!==e)if(e===qt.DANCE)this._avatarImage.appendAction(qt.DANCE,2);else this._avatarImage.appendAction(e)}this._effect>0&&this._avatarImage.appendAction(qt.EFFECT,this._effect),t.endActionAppends(),this._isAnimating=t.isAnimating();var n,r=i.INITIAL_RESERVED_SPRITES,a=Object(s.a)(this._avatarImage.getSprites());try{for(a.s();!(n=a.n()).done;){n.value.id!==i.AVATAR&&r++}}catch(c){a.e(c)}finally{a.f()}if(r!==this.totalSprites&&this.createSprites(r),this._extraSpritesStartIndex=r,this._additions){var o,u=Object(s.a)(this._additions.values());try{for(u.s();!(o=u.n()).done;){o.value;this.createSprite()}}catch(c){u.e(c)}finally{u.f()}}}}},{key:"updateFigure",value:function(t){return this._figure!==t&&(this._figure=t,this.clearAvatar(),!0)}},{key:"resetFigure",value:function(t){this.clearAvatar()}},{key:"resetEffect",value:function(t){this.clearAvatar()}},{key:"clearAvatar",value:function(){var t,e=Object(s.a)(this._cachedAvatars.getValues());try{for(e.s();!(t=e.n()).done;){var n=t.value;n&&n.dispose()}}catch(h){e.e(h)}finally{e.f()}var r,a=Object(s.a)(this._cachedAvatarEffects.getValues());try{for(a.s();!(r=a.n()).done;){var o=r.value;o&&o.dispose()}}catch(h){a.e(h)}finally{a.f()}this._cachedAvatars.reset(),this._cachedAvatarEffects.reset(),this._avatarImage=null;var u=this.getSprite(i.AVATAR_LAYER_ID);u&&(u.texture=c.t.EMPTY,u.alpha=255)}},{key:"getAddition",value:function(t){if(!this._additions)return null;var e=this._additions.get(t);return e||null}},{key:"addAddition",value:function(t){if(!this.getAddition(t.id))return this._additions.set(t.id,t),t}},{key:"removeAddition",value:function(t){var e=this.getAddition(t);e&&(this._additions.delete(e.id),e.dispose())}},{key:"updateShadow",value:function(t){this._shadow=null;var e=this.getSprite(i.SHADOW_LAYER_ID);if(e){var n="mv"===this._posture||"std"===this._posture||"sit"===this._posture&&this._canStandUp;if(this._effect===i.SNOWBOARDING_EFFECT&&(n=!1),n){if(e.visible=!0,!this._shadow||t!==this._scale){var s=0,r=0;t<48?(e.libraryAssetName="sh_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(e.libraryAssetName),s=-8,r=this._canStandUp?6:-3):(e.libraryAssetName="h_std_sd_1_0_0",this._shadow=this._avatarImage.getAsset(e.libraryAssetName),s=-17,r=this._canStandUp?10:-7),this._shadow?(e.texture=this._shadow.texture,e.offsetX=s,e.offsetY=r,e.alpha=50,e.relativeDepth=1):e.visible=!1}}else this._shadow=null,e.visible=!1}}},{key:"getAvatarRenderAsset",value:function(t){return this._data?this._data.getAvatarRendererAsset(t):null}},{key:"direction",get:function(){return this._direction}},{key:"posture",get:function(){return this._posture}},{key:"angle",get:function(){return this._angle}},{key:"disposed",get:function(){return this._disposed}}]),i}(Xe);Ek.AVATAR="avatar",Ek.FLOATING_IDLE_Z_ID=1,Ek.TYPING_BUBBLE_ID=2,Ek.EXPRESSION_ID=3,Ek.NUMBER_BUBBLE_ID=4,Ek.GAME_CLICK_TARGET_ID=5,Ek.MUTED_BUBBLE_ID=6,Ek.GUIDE_BUBBLE_ID=7,Ek.OWN_USER_ID=4,Ek.UPDATE_TIME_INCREASER=41,Ek.AVATAR_LAYER_ID=0,Ek.SHADOW_LAYER_ID=1,Ek.SNOWBOARDING_EFFECT=97,Ek.INITIAL_RESERVED_SPRITES=2,Ek.ANIMATION_FRAME_UPDATE_INTERVAL=2,Ek.DEFAULT_CANVAS_OFFSETS=[0,0,0],Ek.MAX_EFFECT_CACHE=2,Ek.SPRITE_INDEX_AVATAR=0,Ek.BASE_Y_SCALE=1e3,Ek.AVATAR_SPRITE_DEFAULT_DEPTH=-.01,Ek.AVATAR_OWN_DEPTH_ADJUST=.001,Ek.AVATAR_SPRITE_LAYING_DEPTH=-.409;var pk=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._x=void 0,this._y=void 0,this._repeats=void 0,this._frameRepeats=void 0,this._remainingFrameRepeats=void 0,this._activeSequence=void 0,this._activeSequenceOffset=void 0,this._isLastFrame=void 0,this._isRecycled=void 0}return Object(a.a)(t,[{key:"id",get:function(){return this._id>=0?this._id:-this._id*Math.random()}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"repeats",get:function(){return this._repeats}},{key:"frameRepeats",get:function(){return this._frameRepeats}},{key:"isLastFrame",get:function(){return this._isLastFrame}},{key:"remainingFrameRepeats",get:function(){return this._frameRepeats<0?t.FRAME_REPEAT_FOREVER:this._remainingFrameRepeats},set:function(t){t<0&&(t=0),this._frameRepeats>0&&t>this._frameRepeats&&(t=this._frameRepeats),this._remainingFrameRepeats=t}},{key:"activeSequence",get:function(){return this._activeSequence}},{key:"activeSequenceOffset",get:function(){return this._activeSequenceOffset}},{key:"recycle",value:function(){this._isRecycled||(this._isRecycled=!0,t.POOL.length<t.POOL_SIZE_LIMIT&&t.POOL.push(this))}}],[{key:"allocate",value:function(e,i,n,s,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=t.POOL.length?t.POOL.pop():new t;return s<1&&(s=1),r<0&&(r=t.FRAME_REPEAT_FOREVER),c._id=e,c._x=i||0,c._y=n||0,c._repeats=s,c._frameRepeats=r,c._remainingFrameRepeats=r,c._isLastFrame=a,c._isRecycled=!1,o>=0?(c._activeSequence=o,c._activeSequenceOffset=u):(c._activeSequence=-1,c._activeSequenceOffset=0),c}}]),t}();pk.FRAME_REPEAT_FOREVER=-1,pk.SEQUENCE_NOT_DEFINED=-1,pk.POOL_SIZE_LIMIT=3e3,pk.POOL=[];var mk=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._id=0,this._x=0,this._y=0,this._randomX=0,this._randomY=0,this._repeats=1,this._id=e,this._x=i,this._y=n,this._randomX=s,this._randomY=a,this._repeats=o}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"hasDirectionalOffsets",value:function(){return!1}},{key:"getX",value:function(t){return this._x}},{key:"getY",value:function(t){return this._y}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._x}},{key:"randomX",get:function(){return this._randomX}},{key:"randomY",get:function(){return this._randomY}},{key:"repeats",get:function(){return this._repeats}}]),t}(),Ik=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u,c){var h;return Object(r.a)(this,i),(h=e.call(this,t,n,s,a,o,c))._directionalOffsets=void 0,h._directionalOffsets=u,h}return Object(a.a)(i,[{key:"hasDirectionalOffsets",value:function(){return null!==this._directionalOffsets}},{key:"getX",value:function(t){return this._directionalOffsets?this._directionalOffsets.getXOffset(t,Object(d.a)(Object(f.a)(i.prototype),"getX",this).call(this,t)):Object(d.a)(Object(f.a)(i.prototype),"getX",this).call(this,t)}},{key:"getY",value:function(t){return this._directionalOffsets?this._directionalOffsets.getYOffset(t,Object(d.a)(Object(f.a)(i.prototype),"getY",this).call(this,t)):Object(d.a)(Object(f.a)(i.prototype),"getY",this).call(this,t)}}]),i}(mk),bk=function(){function t(e,i){Object(r.a)(this,t),this._frames=void 0,this._frameIndexes=void 0,this._frameRepeats=void 0,this._isRandom=void 0,this._loopCount=void 0,this._frames=[],this._frameIndexes=[],this._frameRepeats=[],this._isRandom=i,this._loopCount=e<1?1:e}return Object(a.a)(t,[{key:"isRandom",get:function(){return this._isRandom}},{key:"frameCount",get:function(){return this._frameIndexes.length*this._loopCount}},{key:"dispose",value:function(){this._frames=[]}},{key:"initialize",value:function(){for(var t=this._frameIndexes.length-1,e=-1,i=1;t>=0;)this._frameIndexes[t]===e?i++:(e=this._frameIndexes[t],i=1),this._frameRepeats[t]=i,t--}},{key:"addFrame",value:function(t,e,i,n,s,r){var a=1;if(this._frames.length>0){var o=this._frames[this._frames.length-1];o.id!==t||o.hasDirectionalOffsets()||o.x!==e||o.y!==i||o.randomX!==n||0!==n||o.randomY!==s||0!==s||(a+=o.repeats,this._frames.pop())}var u=r?new Ik(t,e,i,n,s,r,a):new mk(t,e,i,n,s,a);this._frames.push(u),this._frameIndexes.push(this._frames.length-1),this._frameRepeats.push(1)}},{key:"getFrame",value:function(t){return!this._frames.length||t<0||t>=this.frameCount?null:this._frames[this._frameIndexes[t%this._frameIndexes.length]]}},{key:"getFrameIndex",value:function(t){return t<0||t>=this.frameCount?-1:(this._isRandom&&(t=Math.round(Math.random()*this._frameIndexes.length))===this._frameIndexes.length&&t--,t)}},{key:"getRepeats",value:function(t){return t<0||t>=this.frameCount?0:this._frameRepeats[t%this._frameRepeats.length]}}]),t}(),Tk=function(){function t(e,i,n){Object(r.a)(this,t),this._frameSequences=void 0,this._frameCount=void 0,this._loopCount=void 0,this._frameRepeat=void 0,this._isRandom=void 0,this._frameSequences=[],this._frameCount=-1,this._loopCount=e<0?0:e,this._frameRepeat=i<1?1:i,this._isRandom=n}return Object(a.a)(t,[{key:"frameCount",get:function(){return this._frameCount<0&&this.calculateLength(),this._frameCount}},{key:"dispose",value:function(){if(this._frameSequences&&this._frameSequences.length){var t,e=Object(s.a)(this._frameSequences);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._frameSequences=[]}}},{key:"addFrameSequence",value:function(t,e){var i=new bk(t,e);return this._frameSequences.push(i),i}},{key:"calculateLength",value:function(){this._frameCount=0;var t,e=Object(s.a)(this._frameSequences);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&(this._frameCount+=i.frameCount)}}catch(n){e.e(n)}finally{e.f()}}},{key:"getFrame",value:function(t,e){if(this._frameCount<1)return null;if(e/=this._frameRepeat,!this._isRandom){var i=Math.floor(e/this._frameCount);e=Math.floor(e%this._frameCount);var n=!1,s=null;(this._loopCount>0&&i>=this._loopCount||this._loopCount<=0&&1===this._frameCount)&&(e=this._frameCount-1,n=!0);for(var r=0,a=0;a<this._frameSequences.length;){if(s=this._frameSequences[a]){if(e<r+s.frameCount)break;r+=s.frameCount}a++}return this.getFrameFromSpecificSequence(t,s,a,e-r,n)}var o=Math.trunc(this._frameSequences.length*Math.random()),u=this._frameSequences[o];return u.frameCount<1?null:this.getFrameFromSpecificSequence(t,u,o,0,!1)}},{key:"getFrameFromSequence",value:function(t,e,i,n){if(e<0||e>=this._frameSequences.length)return null;var s=this._frameSequences[e];return s?i>=s.frameCount?this.getFrame(t,n):this.getFrameFromSpecificSequence(t,s,e,i,!1):null}},{key:"getFrameFromSpecificSequence",value:function(t,e,i,n,s){if(!e)return null;var r=e.getFrameIndex(n),a=e.getFrame(r);if(!a)return null;var o=a.getX(t),u=a.getY(t),c=a.randomX,h=a.randomY,_=a.repeats,l=!1;c&&(o=Math.trunc(o+c*Math.random())),h&&(u=Math.trunc(u+h*Math.random())),_>1&&(_=e.getRepeats(r));var d=this._frameRepeat*_;return s&&(d=pk.FRAME_REPEAT_FOREVER),this._isRandom||e.isRandom||i===this._frameSequences.length-1&&n===e.frameCount-1&&(l=!0),pk.allocate(a.id,o,u,_,d,l,i,n)}}]),t}(),Rk=function(){function t(){Object(r.a)(this,t),this._offsetX=void 0,this._offsetY=void 0,this._offsetX=new Map,this._offsetY=new Map}return Object(a.a)(t,[{key:"getXOffset",value:function(t,e){var i=this._offsetX.get(t);return void 0===i||null===i?e:i}},{key:"getYOffset",value:function(t,e){var i=this._offsetY.get(t);return void 0===i||null===i?e:i}},{key:"setDirection",value:function(t,e,i){this._offsetX.set(t,e),this._offsetY.set(t,i)}}]),t}(),kk=function(){function t(){Object(r.a)(this,t),this._layers=void 0,this._frameCount=void 0,this._randomStart=void 0,this._immediateChanges=void 0,this._layers=new Map,this._frameCount=-1,this._randomStart=!1,this._immediateChanges=null}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._layers.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._layers.clear(),this._immediateChanges=null}},{key:"setImmediateChanges",value:function(t){this._immediateChanges=t}},{key:"isImmediateChange",value:function(t){return!(!this._immediateChanges||-1===this._immediateChanges.indexOf(t))}},{key:"getStartFrame",value:function(t){return this._randomStart?Math.random()*this._frameCount:0}},{key:"initialize",value:function(t){if(t.randomStart&&(this._randomStart=!0),t.layers)for(var e in t.layers){var i=t.layers[e];if(!i)return!1;var n=parseInt(e),s=void 0!==i.loopCount?i.loopCount:1,r=void 0!==i.frameRepeat?i.frameRepeat:1,a=void 0!==i.random&&0!==i.random;if(!this.addLayer(n,s,r,a,i))return!1}return!0}},{key:"addLayer",value:function(t,e,i,n,s){var r=new Tk(e,i,n);if(s.frameSequences)for(var a in s.frameSequences){var o=s.frameSequences[a];if(o){var u=void 0!==o.loopCount?o.loopCount:1,c=void 0!==o.random&&0!==o.random,h=r.addFrameSequence(u,c);if(o.frames)for(var _ in o.frames){var l=o.frames[_];if(!l)return r.dispose(),!1;h.addFrame(l.id,l.x||0,l.y||0,l.randomX||0,l.randomY||0,this.readDirectionalOffsets(l))}h.initialize()}}r.calculateLength(),this._layers.set(t,r);var d=r.frameCount;return d>this._frameCount&&(this._frameCount=d),!0}},{key:"readDirectionalOffsets",value:function(t){var e=null;if(t&&t.offsets)for(var i in t.offsets){var n=t.offsets[i];n&&(e||(e=new Rk),e.setDirection(n.direction,n.x,n.y))}return e}},{key:"getFrame",value:function(t,e,i){var n=this._layers.get(e);return n?n.getFrame(t,i):null}},{key:"getFrameFromSequence",value:function(t,e,i,n,s){var r=this._layers.get(e);return r?r.getFrameFromSequence(t,i,n,s):null}}],[{key:"getTransitionToAnimationId",value:function(e){return t.TRANSITION_TO_ANIMATION_OFFSET+e}},{key:"getTransitionFromAnimationId",value:function(e){return t.TRANSITION_FROM_ANIMATION_OFFSET+e}},{key:"isTransitionToAnimation",value:function(e){return e>=t.TRANSITION_TO_ANIMATION_OFFSET&&e<t.TRANSITION_FROM_ANIMATION_OFFSET}},{key:"isTransitionFromAnimation",value:function(e){return e>=t.TRANSITION_FROM_ANIMATION_OFFSET}}]),t}();kk.TRANSITION_TO_ANIMATION_OFFSET=1e6,kk.TRANSITION_FROM_ANIMATION_OFFSET=2e6,kk.DEFAULT_FRAME_NUMBER=0;var Ak=function(){function t(){Object(r.a)(this,t),this._animationId=void 0,this._animationAfterTransitionId=void 0,this._animationOver=void 0,this._frameCounter=void 0,this._frames=void 0,this._lastFramePlayed=void 0,this._animationPlayed=void 0,this._layerCount=void 0,this._animationId=-1,this._animationAfterTransitionId=0,this._animationOver=!1,this._frameCounter=0,this._frames=[],this._lastFramePlayed=[],this._animationPlayed=[],this._layerCount=0}return Object(a.a)(t,[{key:"animationOver",get:function(){return this._animationOver},set:function(t){this._animationOver=t}},{key:"frameCounter",get:function(){return this._frameCounter},set:function(t){this._frameCounter=t}},{key:"animationId",get:function(){return this._animationId},set:function(t){t!==this._animationId&&(this._animationId=t,this.resetAnimationFrames(!1))}},{key:"animationAfterTransitionId",get:function(){return this._animationAfterTransitionId},set:function(t){this._animationAfterTransitionId=t}},{key:"dispose",value:function(){this.recycleFrames(),this._frames=null,this._lastFramePlayed=null,this._animationPlayed=null}},{key:"setLayerCount",value:function(t){this._layerCount=t,this.resetAnimationFrames()}},{key:"resetAnimationFrames",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t&&this._frames||(this.recycleFrames(),this._frames=[]),this._lastFramePlayed=[],this._animationPlayed=[],this._animationOver=!1,this._frameCounter=0;for(var e=0;e<this._layerCount;){if(t||this._frames.length<=e)this._frames[e]=null;else{var i=this._frames[e];i&&(i.recycle(),this._frames[e]=pk.allocate(i.id,i.x,i.y,i.repeats,0,i.isLastFrame))}this._lastFramePlayed[e]=!1,this._animationPlayed[e]=!1,e++}}},{key:"recycleFrames",value:function(){if(this._frames&&this._frames.length){var t,e=Object(s.a)(this._frames);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.recycle()}}catch(n){e.e(n)}finally{e.f()}}}},{key:"getFrame",value:function(t){return t<0||t>=this._layerCount?null:this._frames[t]}},{key:"setFrame",value:function(t,e){if(!(t<0||t>=this._layerCount)){var i=this._frames[t];i&&i.recycle(),this._frames[t]=e}}},{key:"getAnimationPlayed",value:function(t){return t<0||t>=this._layerCount||this._animationPlayed[t]}},{key:"setAnimationPlayed",value:function(t,e){t<0||t>=this._layerCount||(this._animationPlayed[t]=e)}},{key:"getLastFramePlayed",value:function(t){return t<0||t>=this._layerCount||this._lastFramePlayed[t]}},{key:"setLastFramePlayed",value:function(t,e){t<0||t>=this._layerCount||(this._lastFramePlayed[t]=e)}}]),t}(),Sk=function(){function t(e){Object(r.a)(this,t),this._colors=void 0,this._colors=[],this.createColors(e)}return Object(a.a)(t,[{key:"createColors",value:function(e){if(e)for(var i=0;i<e;i++)this._colors.push(t.DEFAULT_COLOR)}},{key:"dispose",value:function(){this._colors=[]}},{key:"getLayerColor",value:function(e){var i=this._colors[e];return i||t.DEFAULT_COLOR}},{key:"setColorLayer",value:function(t,e){this._colors[t]&&(this._colors[t]=e)}}]),t}();Sk.DEFAULT_COLOR=16777215;var jk=function(){function t(){Object(r.a)(this,t),this._tag=void 0,this._ink=void 0,this._alpha=void 0,this._ignoreMouse=void 0,this._xOffset=void 0,this._yOffset=void 0,this._zOffset=void 0,this._tag=t.DEFAULT_TAG,this._ink=t.DEFAULT_INK,this._alpha=t.DEFAULT_ALPHA,this._ignoreMouse=t.DEFAULT_IGNORE_MOUSE,this._xOffset=t.DEFAULT_XOFFSET,this._yOffset=t.DEFAULT_YOFFSET,this._zOffset=t.DEFAULT_ZOFFSET}return Object(a.a)(t,[{key:"setFromLayer",value:function(t){t&&(this._tag=t.tag,this._ink=t.ink,this._alpha=t.alpha,this._ignoreMouse=t.ignoreMouse,this._xOffset=t.xOffset,this._yOffset=t.yOffset,this._zOffset=t.zOffset)}},{key:"tag",get:function(){return this._tag},set:function(t){this._tag=t}},{key:"ink",get:function(){return this._ink},set:function(t){this._ink=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}},{key:"ignoreMouse",get:function(){return this._ignoreMouse},set:function(t){this._ignoreMouse=t}},{key:"xOffset",get:function(){return this._xOffset},set:function(t){this._xOffset=t}},{key:"yOffset",get:function(){return this._yOffset},set:function(t){this._yOffset=t}},{key:"zOffset",get:function(){return this._zOffset},set:function(t){this._zOffset=t}}]),t}();jk.DEFAULT_COUNT=0,jk.DEFAULT_DIRECTION=0,jk.DEFAULT_TAG="",jk.DEFAULT_INK=g.b.NORMAL,jk.DEFAULT_ALPHA=255,jk.DEFAULT_IGNORE_MOUSE=!1,jk.DEFAULT_XOFFSET=0,jk.DEFAULT_YOFFSET=0,jk.DEFAULT_ZOFFSET=0;var Nk=function(){function t(e){Object(r.a)(this,t),this._layers=void 0,this._layers=[],this.createLayers(e)}return Object(a.a)(t,[{key:"createLayers",value:function(t){if(t)for(var e=0;e<t;e++)this._layers.push(new jk)}},{key:"dispose",value:function(){this._layers=[]}},{key:"setFromDirection",value:function(t){if(t){var e=this.layerCount;if(e===t.layerCount)for(var i=0;i<e;i++){var n=this.getLayer(i),s=t.getLayer(i);n&&n.setFromLayer(s)}}}},{key:"getLayer",value:function(t){var e=this._layers[t];return e||null}},{key:"getLayerTag",value:function(t){var e=this.getLayer(t);return e?e.tag:jk.DEFAULT_TAG}},{key:"setLayerTag",value:function(t,e){var i=this.getLayer(t);i&&(i.tag=e)}},{key:"getLayerInk",value:function(t){var e=this.getLayer(t);return e?e.ink:jk.DEFAULT_INK}},{key:"setLayerInk",value:function(t,e){var i=this.getLayer(t);i&&(isNaN(e)||(i.ink=e))}},{key:"getLayerAlpha",value:function(t){var e=this.getLayer(t);return e?e.alpha:jk.DEFAULT_ALPHA}},{key:"setLayerAlpha",value:function(t,e){var i=this.getLayer(t);i&&(isNaN(e)||(i.alpha=e))}},{key:"getLayerIgnoreMouse",value:function(t){var e=this.getLayer(t);return e?e.ignoreMouse:jk.DEFAULT_IGNORE_MOUSE}},{key:"setLayerIgnoreMouse",value:function(t,e){var i=this.getLayer(t);i&&(i.ignoreMouse=e||!1)}},{key:"getLayerXOffset",value:function(t){var e=this.getLayer(t);return e?e.xOffset:jk.DEFAULT_XOFFSET}},{key:"setLayerXOffset",value:function(t,e){var i=this.getLayer(t);i&&(isNaN(e)||(i.xOffset=e))}},{key:"getLayerYOffset",value:function(t){var e=this.getLayer(t);return e?e.yOffset:jk.DEFAULT_YOFFSET}},{key:"setLayerYOffset",value:function(t,e){var i=this.getLayer(t);i&&(isNaN(e)||(i.yOffset=e))}},{key:"getLayerZOffset",value:function(t){var e=this.getLayer(t);return e?e.zOffset:jk.DEFAULT_ZOFFSET}},{key:"setLayerZOffset",value:function(t,e){var i=this.getLayer(t);i&&(isNaN(e)||(i.zOffset=e))}},{key:"layerCount",get:function(){return this._layers.length}}]),t}();Nk.USE_DEFAULT_DIRECTION=-1;var Dk=function(){function t(e,i){Object(r.a)(this,t),this._layerCount=void 0,this._angle=void 0,this._defaultDirection=void 0,this._directions=void 0,this._colors=void 0,this._lastDirectionData=void 0,this._lastDirection=void 0,this._layerCount=e<0?0:e>t.MAX_LAYERS?t.MAX_LAYERS:e,this._angle=i<1?1:i>360?360:i,this._defaultDirection=new Nk(this._layerCount),this._directions=new Map,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1}return Object(a.a)(t,[{key:"dispose",value:function(){this._defaultDirection&&this._defaultDirection.dispose();var t,e=Object(s.a)(this._directions.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(o){e.e(o)}finally{e.f()}var n,r=Object(s.a)(this._colors);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&a.dispose()}}catch(o){r.e(o)}finally{r.f()}this.reset()}},{key:"reset",value:function(){this._defaultDirection=null,this._colors=[],this._lastDirectionData=null,this._lastDirection=-1,this._directions.clear()}},{key:"processLayers",value:function(t){return!!t&&this.setDirectionLayers(this._defaultDirection,t)}},{key:"processDirections",value:function(t){if(!t)return!1;for(var e in t){var i=t[e];if(i){var n=parseInt(e);if(this._directions.get(n))return!1;var s=new Nk(this._layerCount);s.setFromDirection(this._defaultDirection),this.setDirectionLayers(s,i.layers),this._directions.set(n,s),this._lastDirectionData=null,this._lastDirection=-1}}return!0}},{key:"processColors",value:function(t){if(!t)return!1;for(var e in t){var i=t[e];if(i){var n=parseInt(e);if(this._colors[n])return!1;var s=new Sk(this._layerCount);for(var r in i.layers){var a=i.layers[r];if(a){var o=parseInt(r),u=a.color;s.setColorLayer(o,u)}}this._colors[n]=s}}return!0}},{key:"setDirectionLayers",value:function(t,e){if(!t||!e)return!1;for(var i in e){var n=e[i];if(n){var s=parseInt(i);if(s<0||s>=this._layerCount)return!1;void 0!==n.ink&&t.setLayerInk(s,ri.inkToBlendMode(n.ink)),void 0!==n.tag&&t.setLayerTag(s,n.tag),void 0!==n.alpha&&t.setLayerAlpha(s,n.alpha),void 0!==n.ignoreMouse&&t.setLayerIgnoreMouse(s,n.ignoreMouse),void 0!==n.x&&t.setLayerXOffset(s,n.x),void 0!==n.y&&t.setLayerYOffset(s,n.y),void 0!==n.z&&t.setLayerZOffset(s,n.z/-1e3)}}return!0}},{key:"getValidDirection",value:function(t){if(this._directions.get(t))return t;t=(t%360+360)%360;var e,i=-1,n=-1,r=Object(s.a)(this._directions.keys());try{for(r.s();!(e=r.n()).done;){var a=e.value,o=(a*this._angle-t+360)%360;o>180&&(o=360-o),(o<i||i<0)&&(i=o,n=a)}}catch(u){r.e(u)}finally{r.f()}return n>=0?Math.trunc(n):0}},{key:"getDirectionData",value:function(t){if(t===this._lastDirection&&this._lastDirectionData)return this._lastDirectionData;var e=this._directions.get(t);return e||(e=this._defaultDirection),this._lastDirection=t,this._lastDirectionData=e,this._lastDirectionData}},{key:"getLayerTag",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerTag(e):jk.DEFAULT_TAG}},{key:"getLayerInk",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerInk(e):jk.DEFAULT_INK}},{key:"getLayerAlpha",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerAlpha(e):jk.DEFAULT_ALPHA}},{key:"getLayerColor",value:function(t,e){var i=this._colors[e];return i?i.getLayerColor(t):Sk.DEFAULT_COLOR}},{key:"getLayerIgnoreMouse",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerIgnoreMouse(e):jk.DEFAULT_IGNORE_MOUSE}},{key:"getLayerXOffset",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerXOffset(e):jk.DEFAULT_XOFFSET}},{key:"getLayerYOffset",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerYOffset(e):jk.DEFAULT_YOFFSET}},{key:"getLayerZOffset",value:function(t,e){var i=this.getDirectionData(t);return i?i.getLayerZOffset(e):jk.DEFAULT_ZOFFSET}},{key:"layerCount",get:function(){return this._layerCount}}]),t}();Dk.MAX_LAYERS=26;var Mk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t,n))._animations=void 0,s._animationIds=void 0,s._animations=new Map,s._animationIds=[],s}return Object(a.a)(i,[{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this);var t,e=Object(s.a)(this._animations.values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n&&n.dispose()}}catch(r){e.e(r)}finally{e.f()}this._animations.clear(),this._animationIds=[]}},{key:"defineAnimations",value:function(t){if(!t)return!0;for(var e in t){var i=t[e];if(!i)return!1;var n=parseInt(e.split("_")[0]),r=!1,a=i.transitionTo,o=i.transitionFrom;void 0!==a&&(n=kk.getTransitionToAnimationId(a),r=!0),void 0!==o&&(n=kk.getTransitionFromAnimationId(o),r=!0);var u=this.createAnimationData();if(!u.initialize(i))return u.dispose(),!1;var c=i.immediateChangeFrom;if(void 0!==c){var h,_=c.split(","),l=[],d=Object(s.a)(_);try{for(d.s();!(h=d.n()).done;){var f=h.value,v=parseInt(f);-1===l.indexOf(v)&&l.push(v)}}catch(g){d.e(g)}finally{d.f()}u.setImmediateChanges(l)}this._animations.set(n,u),r||this._animationIds.push(n)}return!0}},{key:"createAnimationData",value:function(){return new kk}},{key:"hasAnimation",value:function(t){return!!this._animations.get(t)}},{key:"getAnimationCount",value:function(){return this._animationIds.length||0}},{key:"getAnimationId",value:function(t){var e=this.getAnimationCount();return t<0||e<=0?0:this._animationIds[t%e]}},{key:"isImmediateChange",value:function(t,e){var i=this._animations.get(t);return!!i&&i.isImmediateChange(e)}},{key:"getStartFrame",value:function(t,e){var i=this._animations.get(t);return i?i.getStartFrame(e):0}},{key:"getFrame",value:function(t,e,i,n){var s=this._animations.get(t);return s?s.getFrame(e,i,n):null}},{key:"getFrameFromSequence",value:function(t,e,i,n,s,r){var a=this._animations.get(t);return a?a.getFrameFromSequence(e,i,n,s,r):null}}]),i}(Dk),Ck=function(){function t(){Object(r.a)(this,t),this._type=void 0,this._sizes=void 0,this._sizeDatas=void 0,this._lastSize=void 0,this._lastSizeScale=void 0,this._lastSizeData=void 0,this._lastSizeDataScale=void 0,this._type="",this._sizes=[],this._sizeDatas=new Map,this._lastSize=-1,this._lastSizeScale=-1,this._lastSizeData=null,this._lastSizeDataScale=-1}return Object(a.a)(t,[{key:"initialize",value:function(t){return this.reset(),!!t&&(this._type=t.name,!!this.defineVisualizations(t.visualizations)||(this.reset(),!1))}},{key:"dispose",value:function(){if(this._sizeDatas&&this._sizeDatas.size){var t,e=Object(s.a)(this._sizeDatas.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._sizeDatas=null}this._lastSizeData=null,this._sizes=null}},{key:"reset",value:function(){if(this._type="",this._sizeDatas&&this._sizeDatas.size){var t,e=Object(s.a)(this._sizeDatas.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}}this._sizeDatas.clear(),this._sizes=[],this._lastSizeData=null,this._lastSizeDataScale=-1}},{key:"createSizeData",value:function(t,e,i){return new Dk(e,i)}},{key:"defineVisualizations",value:function(t){if(!t)return!1;for(var e in t){var i=t[e],n=i.layerCount,s=i.angle,r=i.size;if(r<1&&(r=1),this._sizeDatas.get(r))return!1;var a=this.createSizeData(r,n,s);if(!a)return!1;for(var o in i){var u=i[o];if(!this.processVisualElement(a,o,u))return a.dispose(),!1}this._sizeDatas.set(r,a),this._sizes.push(r)}return this._sizes.sort(),!0}},{key:"processVisualElement",value:function(t,e,i){if(!t||!e||!i)return!1;switch(e){case"layers":if(!t.processLayers(i))return!1;break;case"directions":if(!t.processDirections(i))return!1;break;case"colors":if(!t.processColors(i))return!1}return!0}},{key:"getValidSize",value:function(t){if(t===this._lastSizeScale)return this._lastSize;var e=this.getSizeIndex(t),i=-1;return e<this._sizes.length&&(i=this._sizes[e]),this._lastSizeScale=t,this._lastSize=i,i}},{key:"getSizeIndex",value:function(t){if(t<=0)return 0;for(var e=0,i=1;i<this._sizes.length;){if(this._sizes[i]>t){this._sizes[i]/t<t/this._sizes[i-1]&&(e=i);break}e=i,i++}return e}},{key:"getSizeData",value:function(t){if(t===this._lastSizeDataScale)return this._lastSizeData;var e=this.getSizeIndex(t);return e<this._sizes.length?this._lastSizeData=this._sizeDatas.get(this._sizes[e]):this._lastSizeData=null,this._lastSizeDataScale=t,this._lastSizeData}},{key:"getLayerCount",value:function(t){var e=this.getSizeData(t);return e?e.layerCount:jk.DEFAULT_COUNT}},{key:"getValidDirection",value:function(t,e){var i=this.getSizeData(t);return i?i.getValidDirection(e):jk.DEFAULT_DIRECTION}},{key:"getLayerTag",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerTag(e,i):jk.DEFAULT_TAG}},{key:"getLayerInk",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerInk(e,i):jk.DEFAULT_INK}},{key:"getLayerAlpha",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerAlpha(e,i):jk.DEFAULT_ALPHA}},{key:"getLayerColor",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerColor(e,i):Sk.DEFAULT_COLOR}},{key:"getLayerIgnoreMouse",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerIgnoreMouse(e,i):jk.DEFAULT_IGNORE_MOUSE}},{key:"getLayerXOffset",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerXOffset(e,i):jk.DEFAULT_XOFFSET}},{key:"getLayerYOffset",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerYOffset(e,i):jk.DEFAULT_YOFFSET}},{key:"getLayerZOffset",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getLayerZOffset(e,i):jk.DEFAULT_ZOFFSET}},{key:"type",get:function(){return this._type}}]),t}();Ck.LAYER_LETTERS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var Lk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"createSizeData",value:function(t,e,i){return new Mk(e,i)}},{key:"processVisualElement",value:function(t,e,n){if(!t||!e||!n)return!1;if("animations"===e){if(!(t instanceof Mk)||!t.defineAnimations(n))return!1}else if(!Object(d.a)(Object(f.a)(i.prototype),"processVisualElement",this).call(this,t,e,n))return!1;return!0}},{key:"hasAnimation",value:function(t,e){var i=this.getSizeData(t);return i?i.hasAnimation(e):null}},{key:"getAnimationCount",value:function(t){var e=this.getSizeData(t);return e?e.getAnimationCount():null}},{key:"getAnimationId",value:function(t,e){var i=this.getSizeData(t);return i?i.getAnimationId(e):null}},{key:"isImmediateChange",value:function(t,e,i){var n=this.getSizeData(t);return n?n.isImmediateChange(e,i):null}},{key:"getStartFrame",value:function(t,e,i){var n=this.getSizeData(t);return n?n.getStartFrame(e,i):null}},{key:"getFrame",value:function(t,e,i,n,s){var r=this.getSizeData(t);return r?r.getFrame(e,i,n,s):null}},{key:"getFrameFromSequence",value:function(t,e,i,n,s,r,a){var o=this.getSizeData(t);return o?o.getFrameFromSequence(e,i,n,s,r,a):null}}]),i}(Ck),Uk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._type=void 0,t._direction=void 0,t._lastCameraAngle=void 0,t._selectedColor=void 0,t._furnitureLift=void 0,t._alphaMultiplier=void 0,t._alphaChanged=void 0,t._clickUrl=void 0,t._clickHandling=void 0,t._cacheDirection=void 0,t._cacheScale=void 0,t._cacheSize=void 0,t._layerCount=void 0,t._shadowLayerIndex=void 0,t._updatedLayers=void 0,t._assetNames=void 0,t._spriteTags=void 0,t._spriteInks=void 0,t._spriteAlphas=void 0,t._spriteColors=void 0,t._spriteMouseCaptures=void 0,t._spriteXOffsets=void 0,t._spriteYOffsets=void 0,t._spriteZOffsets=void 0,t._animationNumber=void 0,t._data=null,t._type=null,t._direction=0,t._lastCameraAngle=NaN,t._selectedColor=0,t._furnitureLift=0,t._alphaMultiplier=1,t._alphaChanged=!1,t._clickUrl=null,t._clickHandling=!1,t._cacheDirection=-1,t._cacheScale=0,t._cacheSize=-1,t._layerCount=0,t._shadowLayerIndex=-1,t._updatedLayers=[],t._assetNames=[],t._spriteTags=[],t._spriteInks=[],t._spriteAlphas=[],t._spriteColors=[],t._spriteMouseCaptures=[],t._spriteXOffsets=[],t._spriteYOffsets=[],t._spriteZOffsets=[],t._animationNumber=0,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return this.reset(),t instanceof Ck&&(this._type=t.type,this._data=t,!0)}},{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._data=null,this._updatedLayers=null,this._assetNames=null,this._spriteTags=null,this._spriteInks=null,this._spriteAlphas=null,this._spriteColors=null,this._spriteMouseCaptures=null,this._spriteXOffsets=null,this._spriteYOffsets=null,this._spriteZOffsets=null}},{key:"reset",value:function(){Object(d.a)(Object(f.a)(i.prototype),"reset",this).call(this),this.setDirection(-1),this._data=null,this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this.createSprites(0)}},{key:"resetLayers",value:function(t,e){this._cacheDirection===e&&this._cacheScale===t||(this._updatedLayers=[],this._assetNames=[],this._spriteTags=[],this._spriteInks=[],this._spriteAlphas=[],this._spriteColors=[],this._spriteMouseCaptures=[],this._spriteXOffsets=[],this._spriteYOffsets=[],this._spriteZOffsets=[],this._cacheDirection=e,this._cacheScale=t,this._cacheSize=this.getValidSize(t),this.setLayerCount((this._data&&this._data.getLayerCount(t)||0)+this.getAdditionalLayerCount()))}},{key:"update",value:function(t,e,i,n){if(t){var s=t.scale,r=!1;this.updateObject(s,t.direction.x)&&(r=!0),this.updateModel(s)&&(r=!0);var a=0;n?this._animationNumber=this._animationNumber|this.updateAnimation(s):(a=this.updateAnimation(s)|this._animationNumber,this._animationNumber=0),(r||0!==a)&&(this.updateSprites(s,r,a),this._scale=s,this.updateSpriteCounter++)}}},{key:"updateObject",value:function(t,e){if(!this.object)return!1;if(this.updateObjectCounter===this.object.updateCounter&&t===this._scale&&this._lastCameraAngle===e)return!1;var i=this.object.getDirection().x-(e+135);if(i=(i%360+360)%360,this._data){var n=this._data.getValidDirection(t,i);this.setDirection(n)}return this._lastCameraAngle=e,this._scale=t,this.updateObjectCounter=this.object.updateCounter,this.resetLayers(t,this._direction),!0}},{key:"updateModel",value:function(t){var e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;this._selectedColor=e.getValue(dt.FURNITURE_COLOR),this._clickUrl=e.getValue(dt.FURNITURE_AD_URL),this._clickHandling=this._clickUrl&&""!==this._clickUrl&&0===this._clickUrl.indexOf("http")||!1,this._furnitureLift=e.getValue(dt.FURNITURE_LIFT_AMOUNT)||0;var i=e.getValue(dt.FURNITURE_ALPHA_MULTIPLIER);return isNaN(i)&&(i=1),this._alphaMultiplier!==i&&(this._alphaMultiplier=i,this._alphaChanged=!0),this.updateModelCounter=e.updateCounter,!0}},{key:"updateSprites",value:function(t,e,i){if(this._layerCount!==this.totalSprites&&this.createSprites(this._layerCount),e)for(var n=this.totalSprites-1;n>=0;)this.updateSprite(t,n),n--;else for(var s=0;i>0;)i&&this.updateSprite(t,s),s++,i>>=1;this._alphaChanged=!1}},{key:"updateSprite",value:function(t,e){var n=this.getSpriteAssetName(t,e),s=this.getSprite(e);if(n&&s){var r=this.getAsset(n,e);if(r&&r.texture){s.visible=!0,s.type=this._type,s.texture=r.texture,s.flipH=r.flipH,s.flipV=r.flipV,s.direction=this._direction;var a=0;e!==this._shadowLayerIndex?(s.tag=this.getLayerTag(t,this._direction,e),s.alpha=this.getLayerAlpha(t,this._direction,e),s.color=this.getLayerColor(t,e,this._selectedColor),s.offsetX=r.offsetX+this.getLayerXOffset(t,this._direction,e),s.offsetY=r.offsetY+this.getLayerYOffset(t,this._direction,e),s.blendMode=this.getLayerInk(t,this._direction,e),s.alphaTolerance=this.getLayerIgnoreMouse(t,this._direction,e)?ze.MATCH_NOTHING:ze.MATCH_OPAQUE_PIXELS,a=this.getLayerZOffset(t,this._direction,e),a-=.001*e):(s.offsetX=r.offsetX,s.offsetY=r.offsetY+this.getLayerYOffset(t,this._direction,e),s.alpha=48*this._alphaMultiplier,s.alphaTolerance=ze.MATCH_NOTHING,a=1),s.relativeDepth=a*i.DEPTH_MULTIPLIER,s.name=n,s.libraryAssetName=this.getLibraryAssetNameForSprite(r,s),s.posture=this.getPostureForAsset(t,r.source),s.clickHandling=this._clickHandling}else this.resetSprite(s)}else s&&this.resetSprite(s)}},{key:"getLibraryAssetNameForSprite",value:function(t,e){return t.source}},{key:"getPostureForAssetFile",value:function(t,e){return null}},{key:"resetSprite",value:function(t){t&&(t.texture=null,t.libraryAssetName="",t.posture="",t.tag="",t.offsetX=0,t.offsetY=0,t.flipH=!1,t.flipV=!1,t.relativeDepth=0,t.clickHandling=!1)}},{key:"getSpriteAssetName",value:function(t,e){if(!this._data||e>=Ck.LAYER_LETTERS.length)return"";var i=this._assetNames[e],n=this._updatedLayers[e];return i&&i.length||(i=this.cacheSpriteAssetName(t,e,!0),n=1!==this._cacheSize),n&&(i+=this.getFrameNumber(t,e)),i}},{key:"cacheSpriteAssetName",value:function(t,e,i){this._type;var n=i?this._cacheSize:this.getValidSize(t),s="",r=1!==n;if(""===(s=e!==this._shadowLayerIndex?Ck.LAYER_LETTERS[e]||"":"sd"))return null;var a=this._type+(r?"_"+n+"_"+s+"_"+this._direction+"_":"_icon_"+s);return i&&(this._assetNames[e]=a,this._updatedLayers[e]=r),a}},{key:"getLayerTag",value:function(t,e,i){var n=this._spriteTags[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_TAG;var s=this._data.getLayerTag(t,e,i);return this._spriteTags[i]=s,s}},{key:"getLayerInk",value:function(t,e,i){var n=this._spriteInks[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_INK;var s=this._data.getLayerInk(t,e,i);return this._spriteInks[i]=s,s}},{key:"getLayerAlpha",value:function(t,e,i){if(!this._alphaChanged){var n=this._spriteAlphas[i];if(void 0!==n)return n}if(!this._data)return jk.DEFAULT_ALPHA;var s=this._data.getLayerAlpha(t,e,i);return null!==this._alphaMultiplier&&(s*=this._alphaMultiplier),this._spriteAlphas[i]=s,s}},{key:"getLayerColor",value:function(t,e,i){var n=this._spriteColors[e];if(void 0!==n)return n;if(!this._data)return Sk.DEFAULT_COLOR;var s=this._data.getLayerColor(t,e,i);return this._spriteColors[e]=s,s}},{key:"getLayerIgnoreMouse",value:function(t,e,i){var n=this._spriteMouseCaptures[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_IGNORE_MOUSE;var s=this._data.getLayerIgnoreMouse(t,e,i);return this._spriteMouseCaptures[i]=s,s}},{key:"getLayerXOffset",value:function(t,e,i){var n=this._spriteXOffsets[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_XOFFSET;var s=this._data.getLayerXOffset(t,e,i);return this._spriteXOffsets[i]=s,s}},{key:"getLayerYOffset",value:function(t,e,i){if(i===this._shadowLayerIndex)return Math.ceil(this._furnitureLift*(t/2));var n=this._spriteYOffsets[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_YOFFSET;var s=this._data.getLayerYOffset(t,e,i);return this._spriteYOffsets[i]=s,s}},{key:"getLayerZOffset",value:function(t,e,i){var n=this._spriteZOffsets[i];if(void 0!==n)return n;if(!this._data)return jk.DEFAULT_ZOFFSET;var s=this._data.getLayerZOffset(t,e,i);return this._spriteZOffsets[i]=s,s}},{key:"getValidSize",value:function(t){return this._data?this._data.getValidSize(t):t}},{key:"setLayerCount",value:function(t){this._layerCount=t,this._shadowLayerIndex=t-this.getAdditionalLayerCount()}},{key:"setDirection",value:function(t){this._direction!==t&&(this._direction=t)}},{key:"getAdditionalLayerCount",value:function(){return 1}},{key:"updateAnimation",value:function(t){return 0}},{key:"getFrameNumber",value:function(t,e){return 0}},{key:"getPostureForAsset",value:function(t,e){return null}},{key:"getAsset",value:function(t){return this.asset?this.asset.getAsset(t):null}},{key:"direction",get:function(){return this._direction}}]),i}(Xe);Uk.DEPTH_MULTIPLIER=Math.sqrt(.5),Uk.TYPE=ft.FURNITURE_STATIC;var Pk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._state=void 0,t._frameIncrease=void 0,t._animationData=void 0,t._animationScale=void 0,t._animationChangeTime=void 0,t._animatedLayerCount=void 0,t._directionChanged=void 0,t._state=-1,t._frameIncrease=1,t._animationData=new Ak,t._animationScale=0,t._animationChangeTime=0,t._animatedLayerCount=0,t._directionChanged=!1,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return t instanceof Lk&&Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t)}},{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._animationData&&(this._animationData.dispose(),this._animationData=null)}},{key:"animatedLayerCount",get:function(){return this._animatedLayerCount}},{key:"animationId",get:function(){return this._animationData.animationId}},{key:"getAnimationId",value:function(t){return this.animationId!==i.DEFAULT_ANIMATION_ID&&this._data.hasAnimation(this._animationScale,this.animationId)?this.animationId:i.DEFAULT_ANIMATION_ID}},{key:"updateObject",value:function(t,e){if(Object(d.a)(Object(f.a)(i.prototype),"updateObject",this).call(this,t,e)){var n=this.object.getState(0);return n!==this._state&&(this.setAnimation(n),this._state=n,this._animationChangeTime=this.object.model.getValue(dt.FURNITURE_STATE_UPDATE_TIME)||0),!0}return!1}},{key:"updateModel",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t)){if(this.usesAnimationResetting()){var e=this.object.model.getValue(dt.FURNITURE_STATE_UPDATE_TIME);e>this._animationChangeTime&&(this._animationChangeTime=e,this.setAnimation(this._state))}var n=this.object.model.getValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX);if(!isNaN(n)){var s=this._data.getAnimationId(this._animationScale,n);this.setAnimation(s)}return!0}return!1}},{key:"isPlayingTransition",value:function(t,e){return!(!kk.isTransitionFromAnimation(t.animationId)&&!kk.isTransitionToAnimation(t.animationId))&&(e===t.animationAfterTransitionId&&!t.animationOver)}},{key:"getCurrentState",value:function(t){var e=t.animationId;return kk.isTransitionFromAnimation(e)||kk.isTransitionToAnimation(e)?t.animationAfterTransitionId:e}},{key:"setAnimation",value:function(t){this._data&&this.setSubAnimation(this._animationData,t,this._state>=0)}},{key:"setSubAnimation",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.animationId;if(i){if(this.isPlayingTransition(t,e))return!1;var s=this.getCurrentState(t);if(e!==s){if(!this._data.isImmediateChange(this._animationScale,e,s)){var r=kk.getTransitionFromAnimationId(s);this._data.hasAnimation(this._animationScale,r)?(t.animationAfterTransitionId=e,e=r):(r=kk.getTransitionToAnimationId(e),this._data.hasAnimation(this._animationScale,r)&&(t.animationAfterTransitionId=e,e=r))}}else if(kk.isTransitionFromAnimation(t.animationId)){var a=kk.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,a)&&(t.animationAfterTransitionId=e,e=a)}else if(!kk.isTransitionToAnimation(t.animationId)&&this.usesAnimationResetting()){var o=kk.getTransitionFromAnimationId(s);if(this._data.hasAnimation(this._animationScale,o))t.animationAfterTransitionId=e,e=o;else{var u=kk.getTransitionToAnimationId(e);this._data.hasAnimation(this._animationScale,u)&&(t.animationAfterTransitionId=e,e=u)}}}return n!==e&&(t.animationId=e,!0)}},{key:"getLastFramePlayed",value:function(t){return this._animationData.getLastFramePlayed(t)}},{key:"resetAllAnimationFrames",value:function(){this._animationData&&this._animationData.setLayerCount(this._animatedLayerCount)}},{key:"updateAnimation",value:function(t){if(!this._data)return 0;t!==this._animationScale&&(this._animationScale=t,this._animatedLayerCount=this._data.getLayerCount(t),this.resetAllAnimationFrames());var e=this.updateAnimations(t);return this._directionChanged=!1,e}},{key:"updateAnimations",value:function(t){if(this._animationData.animationOver&&!this._directionChanged)return 0;var e=this.updateFramesForAnimation(this._animationData,t);return this._animationData.animationOver&&(kk.isTransitionFromAnimation(this._animationData.animationId)||kk.isTransitionToAnimation(this._animationData.animationId))&&(this.setAnimation(this._animationData.animationAfterTransitionId),this._animationData.animationOver=!1),e}},{key:"updateFramesForAnimation",value:function(t,e){if(t.animationOver&&!this._directionChanged)return 0;var i=this.getAnimationId(t),n=t.frameCounter;n||(n=this._data.getStartFrame(e,i,this._direction)),n+=this.frameIncrease,t.frameCounter=n,t.animationOver=!0;for(var s=!1,r=this._animatedLayerCount-1,a=0,o=1<<this._animatedLayerCount-1;r>=0;){var u=0;if(!(s=t.getAnimationPlayed(r))||this._directionChanged){var c=t.getLastFramePlayed(r),h=t.getFrame(r);h&&h.isLastFrame&&h.remainingFrameRepeats<=this.frameIncrease&&(c=!0),(this._directionChanged||!h||h.remainingFrameRepeats>=0&&(h.remainingFrameRepeats=h.remainingFrameRepeats-this.frameIncrease)<=0)&&(u=pk.SEQUENCE_NOT_DEFINED,h&&(u=h.activeSequence),h=u===pk.SEQUENCE_NOT_DEFINED?this._data.getFrame(e,i,this._direction,r,n):this._data.getFrameFromSequence(e,i,this._direction,r,u,h.activeSequenceOffset+h.repeats,n),t.setFrame(r,h),a|=o),h&&h.remainingFrameRepeats!=pk.FRAME_REPEAT_FOREVER?t.animationOver=!1:(c=!0,s=!0),t.setLastFramePlayed(r,c),t.setAnimationPlayed(r,s)}o>>=1,r--}return a}},{key:"getFrameNumber",value:function(t,e){var n=this._animationData.getFrame(e);return n?n.id:Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}},{key:"getLayerXOffset",value:function(t,e,n){var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n),r=this._animationData.getFrame(n);return r?s+r.x:s}},{key:"getLayerYOffset",value:function(t,e,n){var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n),r=this._animationData.getFrame(n);return r?s+r.y:s}},{key:"usesAnimationResetting",value:function(){return!1}},{key:"setDirection",value:function(t){this._direction!==t&&(Object(d.a)(Object(f.a)(i.prototype),"setDirection",this).call(this,t),this._directionChanged=!0)}},{key:"frameIncrease",get:function(){return this._frameIncrease}}]),i}(Uk);Pk.TYPE=ft.FURNITURE_ANIMATED,Pk.DEFAULT_ANIMATION_ID=0;var wk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._badgeId=void 0,t._badgeAssetNameNormalScale=void 0,t._badgeAssetNameSmallScale=void 0,t._badgeVisibleInState=void 0,t._badgeId="",t._badgeAssetNameNormalScale="",t._badgeAssetNameSmallScale="",t._badgeVisibleInState=-1,t}return Object(a.a)(i,[{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t),n=this.object.model.getValue(dt.FURNITURE_BADGE_IMAGE_STATUS),s=this.object.model.getValue(dt.FURNITURE_BADGE_ASSET_NAME);if(-1===n)this._badgeAssetNameNormalScale="",this._badgeAssetNameSmallScale="";else if(1===n&&s!==this._badgeId){this._badgeId=s,this._badgeAssetNameNormalScale=this._badgeId,""===this._badgeAssetNameSmallScale&&(this._badgeAssetNameSmallScale=this._badgeAssetNameNormalScale+"_32");var r=this.object.model.getValue(dt.FURNITURE_BADGE_VISIBLE_IN_STATE);isNaN(r)||(this._badgeVisibleInState=r),e=!0}return e}},{key:"getSpriteAssetName",value:function(t,e){return this.getLayerTag(t,this.direction,e)!==i.BADGE||-1!==this._badgeVisibleInState&&this.object.getState(0)!==this._badgeVisibleInState?Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e):32===t?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale}},{key:"getLayerXOffset",value:function(t,e,n){var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n);if(this.getLayerTag(t,e,n)===i.BADGE){var r=this.getAsset(32===t?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,n);r&&(s+=64===t?(40-r.width)/2:(20-r.width)/2)}return s}},{key:"getLayerYOffset",value:function(t,e,n){var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n);if(this.getLayerTag(t,e,n)===i.BADGE){var r=this.getAsset(32===t?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale,n);r&&(s+=64===t?(40-r.height)/2:(20-r.height)/2)}return s}}]),i}(Pk);wk.BADGE="BADGE";var Fk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._imageUrl=void 0,t._shortUrl=void 0,t._imageReady=void 0,t._isAnimated=void 0,t._gifCollection=void 0,t._offsetX=void 0,t._offsetY=void 0,t._offsetZ=void 0,t._currentFrame=void 0,t._totalFrames=void 0,t._imageUrl=null,t._shortUrl=null,t._imageReady=!1,t._isAnimated=!1,t._gifCollection=null,t._offsetX=0,t._offsetY=0,t._offsetZ=0,t._currentFrame=-1,t._totalFrames=-1,t}return Object(a.a)(i,[{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._imageUrl&&this.asset&&this.asset.disposeAsset(this._imageUrl)}},{key:"updateObject",value:function(t,e){return!!Object(d.a)(Object(f.a)(i.prototype),"updateObject",this).call(this,t,e)&&(this._imageReady&&this.checkAndCreateImageForCurrentState(),!0)}},{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t);if(e&&(this._offsetX=this.object.model.getValue(dt.FURNITURE_BRANDING_OFFSET_X)||0,this._offsetY=this.object.model.getValue(dt.FURNITURE_BRANDING_OFFSET_Y)||0,this._offsetZ=this.object.model.getValue(dt.FURNITURE_BRANDING_OFFSET_Z)||0,this._isAnimated=this.object.model.getValue(dt.FURNITURE_BRANDING_IS_ANIMATED)||!1),this._imageReady){if(this.checkIfImageChanged())return this._imageReady=!1,this._imageUrl=null,!0}else if(this._imageReady=this.checkIfImageReady(),this._imageReady)return this.checkAndCreateImageForCurrentState(),!0;return e}},{key:"checkIfImageChanged",value:function(){var t=this.object.model.getValue(dt.FURNITURE_BRANDING_IMAGE_URL);return(!t||t!==this._imageUrl)&&(this._gifCollection,this.asset&&this.asset.disposeAsset(this._imageUrl),!0)}},{key:"checkIfImageReady",value:function(){if(!(this.object&&this.object.model))return!1;var t=this.object.model.getValue(dt.FURNITURE_BRANDING_IMAGE_URL);if(!t)return!1;if(this._imageUrl&&this._imageUrl===t)return!1;if(1===this.object.model.getValue(dt.FURNITURE_BRANDING_IMAGE_STATUS)){var e=null;if(this._isAnimated){var i=gD.instance.roomEngine.roomContentLoader.getGifCollection(t);i&&(this._gifCollection=i,e=i.textures[0])}else e=gD.instance.core.asset.getTexture(t);return!!e&&(this.imageReady(e,t),!0)}return!1}},{key:"imageReady",value:function(t,e){this._imageUrl=t?e:null}},{key:"checkAndCreateImageForCurrentState",value:function(){if(this._isAnimated)this.buildAssetsForGif();else if(this._imageUrl){var t=gD.instance.core.asset.getTexture(this._imageUrl);if(t){var e=this.object.getState(0);this.addBackgroundAsset(t,e,0)}}}},{key:"buildAssetsForGif",value:function(){if(this._gifCollection){var t=this._gifCollection.textures,e=this._gifCollection.durations;if(t.length&&e.length&&t.length===e.length){for(var i=this.object.getState(0),n=0;n<t.length;n++){var s=t[n];e[n];s&&this.addBackgroundAsset(s,i,n)}this._currentFrame=-1,this._totalFrames=t.length}}}},{key:"addBackgroundAsset",value:function(t,e,n){var s=0,r=0,a=!1,o=!1;switch(e){case i.STATE_0:s=0,r=0,a=!1,o=!1;break;case i.STATE_1:s=-t.width,r=0,a=!0,o=!1;break;case i.STATE_2:s=-t.width,r=-t.height,a=!0,o=!0;break;case i.STATE_3:s=0,r=-t.height,a=!1,o=!0}this.asset.addAsset("".concat(this._imageUrl,"_").concat(n),t,!0,s,r,a,o)}},{key:"getSpriteAssetName",value:function(t,e){return this.getLayerTag(t,this._direction,e)===i.BRANDED_IMAGE&&this._imageUrl?"".concat(this._imageUrl,"_").concat(this.getFrameNumber(t,e)):Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)}},{key:"updateAnimation",value:function(t){return!this._imageReady||!this._isAnimated||this._totalFrames<=0?0:1}},{key:"getFrameNumber",value:function(t,e){if(!this._imageReady||!this._isAnimated||this._totalFrames<=0)return 0;if(this.getLayerTag(t,this._direction,e)===i.BRANDED_IMAGE&&this._imageUrl){var n=this._currentFrame;return n<0?n=0:n+=1,n===this._totalFrames&&(n=0),this._currentFrame=n,this._currentFrame}return 0}}]),i}(Uk);Fk.BRANDED_IMAGE="branded_image",Fk.STATE_0=0,Fk.STATE_1=1,Fk.STATE_2=2,Fk.STATE_3=3;var xk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getLayerXOffset",value:function(t,e,n){return Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n)+this._offsetX}},{key:"getLayerYOffset",value:function(t,e,n){return Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)+this._offsetY}},{key:"getLayerZOffset",value:function(t,e,n){return Object(d.a)(Object(f.a)(i.prototype),"getLayerZOffset",this).call(this,t,e,n)+this._offsetZ}}]),i}(Fk),Bk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._stateQueue=void 0,t._running=void 0,t._stateQueue=[],t._running=!1,t}return Object(a.a)(i,[{key:"setAnimation",value:function(t){if(-1===t&&!this._running)return this._running=!0,this._stateQueue=[],void this._stateQueue.push(i.ANIMATION_ID_ROLL);if(t>=0&&t<=7){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW2+t),void this._stateQueue.push(t);Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,t)}}},{key:"updateAnimation",value:function(t){return this.getLastFramePlayed(0)&&this._stateQueue.length&&Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,this._stateQueue.shift()),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}}]),i}(Pk);Bk.ANIMATION_ID_OFFSET_SLOW1=20,Bk.ANIMATION_ID_OFFSET_SLOW2=9,Bk.ANIMATION_ID_ROLL=-1;var Gk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Uk),Hk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getFrameNumber",value:function(t,e){var n=this.getLayerTag(t,this.direction,e),s=this.object.getState(0);switch(n){case i.SECONDS_SPRITE:return Math.floor(s%60%10);case i.TEN_SECONDS_SPRITE:return Math.floor(s%60/10);case i.MINUTES_SPRITE:return Math.floor(s/60%10);case i.TEN_MINUTES_SPRITE:return Math.floor(s/60/10%10);default:return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}}},{key:"animationId",get:function(){return 0}}]),i}(Pk);Hk.SECONDS_SPRITE="seconds_sprite",Hk.TEN_SECONDS_SPRITE="ten_seconds_sprite",Hk.MINUTES_SPRITE="minutes_sprite",Hk.TEN_MINUTES_SPRITE="ten_minutes_sprite";var Vk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Xe),zk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._thumbnailAssetNameNormal=void 0,t._thumbnailImageNormal=void 0,t._thumbnailDirection=void 0,t._thumbnailChanged=void 0,t._hasOutline=void 0,t._thumbnailAssetNameNormal=null,t._thumbnailImageNormal=null,t._thumbnailDirection=-1,t._thumbnailChanged=!1,t._hasOutline=!1,t}return Object(a.a)(i,[{key:"hasThumbnailImage",get:function(){return!(null==this._thumbnailImageNormal)}},{key:"setThumbnailImages",value:function(t){this._thumbnailImageNormal=t,this._thumbnailChanged=!0}},{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t);return this._thumbnailChanged||this._thumbnailDirection!==this.direction?(this.refreshThumbnail(),!0):e}},{key:"refreshThumbnail",value:function(){null!=this.asset&&(this._thumbnailImageNormal?this.addThumbnailAsset(this._thumbnailImageNormal,64):this.asset.disposeAsset(this.getThumbnailAssetName(64)),this._thumbnailChanged=!1,this._thumbnailDirection=this.direction)}},{key:"addThumbnailAsset",value:function(t,e){for(var n=0;n<this.totalSprites;){if(this.getLayerTag(e,this.direction,n)===i.THUMBNAIL){var s=this.cacheSpriteAssetName(e,n,!1)+this.getFrameNumber(e,n),r=this.getAsset(s,n);if(r){var a=this.generateTransformedThumbnail(t,r),o=this.getThumbnailAssetName(e);this.asset.disposeAsset(o),this.asset.addAsset(o,a,!0,r.offsetX,r.offsetY,!1,!1)}return}n++}}},{key:"generateTransformedThumbnail",value:function(t,e){if(this._hasOutline){var i=new et,n=new et(it.WHITE);n.tint=0,n.width=t.width+40,n.height=t.height+40;var s=new et(t),r=(n.width-s.width)/2,a=(n.height-s.height)/2;s.position.set(r,a),i.addChild(n,s),t=Ut.generateTexture(i)}var o=new Z.d,u=e.width/t.width;switch(this.direction){case 2:o.a=u,o.b=-.5*u,o.c=0,o.d=1.1*u,o.tx=0,o.ty=.5*u*t.width;break;case 0:case 4:o.a=u,o.b=.5*u,o.c=0,o.d=1.1*u,o.tx=0,o.ty=0;break;default:o.a=u,o.b=0,o.c=0,o.d=u,o.tx=0,o.ty=0}var c=new et(t);return c.transform.setFromMatrix(o),Ut.generateTexture(c)}},{key:"getSpriteAssetName",value:function(t,e){return this._thumbnailImageNormal&&this.getLayerTag(t,this.direction,e)===i.THUMBNAIL?this.getThumbnailAssetName(t):Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)}},{key:"getThumbnailAssetName",value:function(t){return this._thumbnailAssetNameNormal=this.getFullThumbnailAssetName(this.object.id,64),this._thumbnailAssetNameNormal}},{key:"getFullThumbnailAssetName",value:function(t,e){return[this._type,t,"thumb",e].join("_")}}]),i}(Pk);zk.THUMBNAIL="THUMBNAIL";var Yk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._cachedUrl=void 0,t._cachedUrl=null,t._hasOutline=!0,t}return Object(a.a)(i,[{key:"updateModel",value:function(t){var e=this;if(this.object){var n=this.getThumbnailURL();if(this._cachedUrl!==n)if(this._cachedUrl=n,this._cachedUrl&&""!==this._cachedUrl){var s=new Image;s.src=n,s.crossOrigin="*",s.onload=function(){var t=c.t.from(s);t.baseTexture.scaleMode=g.p.LINEAR,e.setThumbnailImages(t)}}else this.setThumbnailImages(null)}return Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t)}},{key:"getThumbnailURL",value:function(){throw new Error("This method must be overridden!")}}]),i}(zk),Wk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._url=void 0,t._typePrefix=void 0,t._url=null,t._typePrefix=null,t}return Object(a.a)(i,[{key:"getThumbnailURL",value:function(){if(!this.object)return null;if(this._url)return this._url;var t=this.object.model.getValue(dt.FURNITURE_DATA);if(!t||""===t)return null;this.object.type.indexOf("")>=0&&(this._typePrefix=this.object.type.indexOf("")>=0?"":"postcards/selfie/");var e=JSON.parse(t).w||"";return e=this.buildThumbnailUrl(e),this._url=e,this._url}},{key:"buildThumbnailUrl",value:function(t){return-1===(t=t.replace(".png","_small.png")).indexOf(".png")&&(t+="_small.png"),t}}]),i}(Yk),Kk=Object(a.a)((function t(){Object(r.a)(this,t)}));Kk.GENERIC="hd",Kk.HEAD="head",Kk.TORSO="torso",Kk.LEGS="legs",Kk.HOTLOOKS="hotlooks",Kk.WARDROBE="wardrobe",Kk.EFFECTS="effects";var Xk=Object(a.a)((function t(){Object(r.a)(this,t)}));Xk.OWN_AVATAR_EDITOR=0,Xk.FURNITURE_AVATAR_EDITOR=1,Xk.BOT_EDITOR=2,Xk.DEV_TOOL_EDITOR=3;var qk=Object(a.a)((function t(){Object(r.a)(this,t)}));qk.NOTHING="nothing",qk.WARDROBE="wardrobe";var Qk=Object(a.a)((function t(){Object(r.a)(this,t)}));Qk.TOOL="tool",Qk.COMPONENT="component",Qk.ONLINE_TOOL="online_tool",Qk.LOCAL_ONLY="local_only";var Zk=function(){function t(){Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._z=void 0,this._lastX=void 0,this._lastY=void 0,this._lastZ=void 0,this._hasMoved=!1,this._particleDirection=void 0,this._age=0,this._lifeTime=void 0,this._isEmitter=!1,this._fade=!1,this._fadeTime=void 0,this._alphaMultiplier=1,this._frames=void 0}return Object(a.a)(t,[{key:"init",value:function(t,e,i,n,s,r,a){var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];this._x=t,this._y=e,this._z=i,this._particleDirection=new _e(n.x,n.y,n.z),this._particleDirection.scaleBy(s),this._lastX=this._x-this._particleDirection.x*r,this._lastY=this._y-this._particleDirection.y*r,this._lastZ=this._z-this._particleDirection.z*r,this._age=0,this._hasMoved=!1,this._lifeTime=a,this._isEmitter=o,this._frames=u,this._fade=c,this._alphaMultiplier=1,this._fadeTime=.5+.5*Math.random()}},{key:"dispose",value:function(){this._particleDirection=null}},{key:"update",value:function(){this._age++,this._age===this._lifeTime&&this.ignite(),this._fade&&this._age/this._lifeTime>this._fadeTime&&(this._alphaMultiplier=(this._lifeTime-this._age)/(this._lifeTime*(1-this._fadeTime)))}},{key:"getAsset",value:function(){return this._frames&&this._frames.length>0?this._frames[this._age%this._frames.length]:null}},{key:"ignite",value:function(){}},{key:"fade",get:function(){return this._fade}},{key:"alphaMultiplier",get:function(){return this._alphaMultiplier}},{key:"direction",get:function(){return this._particleDirection}},{key:"age",get:function(){return this._age}},{key:"isEmitter",get:function(){return this._isEmitter}},{key:"isAlive",get:function(){return this._age<=this._lifeTime}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._z=t}},{key:"lastX",get:function(){return this._lastX},set:function(t){this._hasMoved=!0,this._lastX=t}},{key:"lastY",get:function(){return this._lastY},set:function(t){this._hasMoved=!0,this._lastY=t}},{key:"lastZ",get:function(){return this._lastZ},set:function(t){this._hasMoved=!0,this._lastZ=t}},{key:"hasMoved",get:function(){return this._hasMoved}},{key:"toString",value:function(){return[this._x,this._y,this._z].toString()}},{key:"copy",value:function(t,e){this._x=t._x*e,this._y=t._y*e,this._z=t._z*e,this._lastX=t._lastX*e,this._lastY=t._lastY*e,this._lastZ=t._lastZ*e,this._hasMoved=t.hasMoved,this._particleDirection=t._particleDirection,this._age=t._age,this._lifeTime=t._lifeTime,this._isEmitter=t._isEmitter,this._fade=t._fade,this._fadeTime=t._fadeTime,this._alphaMultiplier=t._alphaMultiplier}}]),t}(),Jk=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Object(r.a)(this,i),(t=e.call(this))._name=void 0,t._roomObjectSpriteId=-1,t._force=void 0,t._timeStep=.1,t._gravity=void 0,t._airFriction=void 0,t._explosionShape=void 0,t._particleConfigurations=void 0,t._particles=void 0,t._maxNumberOfParticles=void 0,t._particlesPerFrame=void 0,t._emittedParticles=void 0,t._fuseTime=10,t._energy=1,t._hasIgnited=!1,t._burstPulse=1,t._emitterDirection=void 0,t._particles=[],t._name=n,t._roomObjectSpriteId=s,t._particleConfigurations=[],t}return Object(a.a)(i,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._particles);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(n){e.e(n)}finally{e.f()}this._particles=null,this._particleConfigurations=null,Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this)}},{key:"setup",value:function(t,e,i,n,s,r,a,o,u,c){this._maxNumberOfParticles=t,this._particlesPerFrame=e,this._force=i,this._emitterDirection=n,this._emitterDirection.normalize(),this._gravity=s,this._airFriction=r,this._explosionShape=a,this._fuseTime=u,this._energy=o,this._burstPulse=c,this.reset()}},{key:"reset",value:function(){var t,e=Object(s.a)(this._particles);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(i){e.e(i)}finally{e.f()}this._particles=[],this._emittedParticles=0,this._hasIgnited=!1,this.init(0,0,0,this._emitterDirection,this._force,this._timeStep,this._fuseTime,!0)}},{key:"copyStateFrom",value:function(t,e){Object(d.a)(Object(f.a)(i.prototype),"copy",this).call(this,t,e),this._force=t._force,this._emitterDirection=t._emitterDirection,this._gravity=t._gravity,this._airFriction=t._airFriction,this._explosionShape=t._explosionShape,this._fuseTime=t._fuseTime,this._energy=t._energy,this._burstPulse=t._burstPulse,this._timeStep=t._timeStep,this._hasIgnited=t._hasIgnited}},{key:"configureParticle",value:function(t,e,i,n){var s={};s.lifeTime=t,s.isEmitter=e,s.frames=i,s.fade=n,this._particleConfigurations.push(s)}},{key:"ignite",value:function(){this._hasIgnited=!0,this._emittedParticles<this._maxNumberOfParticles&&this.age>1&&this.releaseParticles(this,this.direction)}},{key:"releaseParticles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||(e=new _e);for(var n=new _e,s=this.getRandomParticleConfiguration(),r=0;r<this._particlesPerFrame;){switch(this._explosionShape){case i.CONE:n.x=this.randomBoolean(.5)?Math.random():-Math.random(),n.y=-(Math.random()+1),n.z=this.randomBoolean(.5)?Math.random():-Math.random();break;case i.PLANE:n.x=this.randomBoolean(.5)?Math.random():-Math.random(),n.y=0,n.z=this.randomBoolean(.5)?Math.random():-Math.random();break;case i.SPHERE:n.x=this.randomBoolean(.5)?Math.random():-Math.random(),n.y=this.randomBoolean(.5)?Math.random():-Math.random(),n.z=this.randomBoolean(.5)?Math.random():-Math.random()}n.normalize();var a=new Zk,o=0,u=!1,c=!1,h=[];s?(o=Math.floor(Math.random()*s.lifeTime+10),u=s.isEmitter,h=s.frames,c=s.fade):(o=Math.trunc(Math.floor(20*Math.random()+10)),u=!1,h=[]),a.init(t.x,t.y,t.z,n,this._energy,this._timeStep,o,u,h,c),this._particles.push(a),this._emittedParticles++,r++}}},{key:"getRandomParticleConfiguration",value:function(){var t=Math.trunc(Math.floor(Math.random()*this._particleConfigurations.length));return this._particleConfigurations[t]}},{key:"update",value:function(){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this),this.accumulateForces(),this.verlet(),this.satisfyConstraints(),!this.isAlive&&this._emittedParticles<this._maxNumberOfParticles&&this.age%this._burstPulse===0&&this.releaseParticles(this,this.direction)}},{key:"verlet",value:function(){if(this.isAlive||this._emittedParticles<this._maxNumberOfParticles){var t=this.x,e=this.y,i=this.z;this.x=(2-this._airFriction)*this.x-(1-this._airFriction)*this.lastX,this.y=(2-this._airFriction)*this.y-(1-this._airFriction)*this.lastY+this._gravity*this._timeStep*this._timeStep,this.z=(2-this._airFriction)*this.z-(1-this._airFriction)*this.lastZ,this.lastX=t,this.lastY=e,this.lastZ=i}var n,r=[],a=Object(s.a)(this._particles);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.update();var u=o.x,c=o.y,h=o.z;o.x=(2-this._airFriction)*o.x-(1-this._airFriction)*o.lastX,o.y=(2-this._airFriction)*o.y-(1-this._airFriction)*o.lastY+this._gravity*this._timeStep*this._timeStep,o.z=(2-this._airFriction)*o.z-(1-this._airFriction)*o.lastZ,o.lastX=u,o.lastY=c,o.lastZ=h,(o.y>10||!o.isAlive)&&r.push(o)}}catch(f){a.e(f)}finally{a.f()}for(var _=0,l=r;_<l.length;_++){var d=l[_];d.isEmitter,this._particles.splice(this._particles.indexOf(d),1),d.dispose()}}},{key:"satisfyConstraints",value:function(){}},{key:"accumulateForces",value:function(){var t,e=Object(s.a)(this._particles);try{for(e.s();!(t=e.n()).done;)t.value}catch(i){e.e(i)}finally{e.f()}}},{key:"particles",get:function(){return this._particles}},{key:"hasIgnited",get:function(){return this._hasIgnited}},{key:"randomBoolean",value:function(t){return Math.random()<t}},{key:"roomObjectSpriteId",get:function(){return this._roomObjectSpriteId}}]),i}(Zk);Jk.CONE="cone",Jk.PLANE="plane",Jk.SPHERE="sphere";var $k=function(){function t(e){Object(r.a)(this,t),this._emitters=void 0,this._visualization=void 0,this._size=void 0,this._canvasId=-1,this._offsetY=void 0,this._currentEmitter=void 0,this._canvasTexture=void 0,this._roomSprite=void 0,this._hasIgnited=!1,this._centerX=0,this._centerY=0,this._scaleMultiplier=1,this._blackOverlay=void 0,this._blackOverlayAlphaTransform=void 0,this._particleColorTransform=void 0,this._identityMatrix=void 0,this._translationMatrix=void 0,this._blend=1,this._bgColor=4278190080,this._emptySprite=void 0,this._isDone=!1,this._emitters=new H,this._visualization=e,this._blackOverlayAlphaTransform=new W.a,this._blackOverlayAlphaTransform.alpha=1,this._particleColorTransform=new W.a,this._identityMatrix=new Z.d,this._translationMatrix=new Z.d}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._emitters.getValues());try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(i){e.e(i)}finally{e.f()}this._emitters=null,this._canvasTexture&&(this._canvasTexture.destroy(),this._canvasTexture=null),this._blackOverlay&&(this._blackOverlay.destroy(),this._blackOverlay=null),this._emptySprite&&(this._emptySprite.destroy(),this._emptySprite=null),this._blackOverlayAlphaTransform=null,this._particleColorTransform=null,this._identityMatrix=null,this._translationMatrix=null}},{key:"reset",value:function(){this._currentEmitter&&this._currentEmitter.reset(),this._currentEmitter=null,this._hasIgnited=!1,this._isDone=!1,this.updateCanvas()}},{key:"setAnimation",value:function(t){this._currentEmitter&&this._currentEmitter.reset(),this._currentEmitter=this._emitters.getValue(t),this._hasIgnited=!1,this._isDone=!1,this.updateCanvas()}},{key:"updateCanvas",value:function(){if(this._currentEmitter&&-1!==this._canvasId&&(this._roomSprite=this._visualization.getSprite(this._canvasId),this._roomSprite&&this._roomSprite.texture)){if(this._roomSprite.width<=1||this._roomSprite.height<=1)return;!this._canvasTexture||this._canvasTexture.width===this._roomSprite.width&&this._canvasTexture.height===this._roomSprite.height||(this._canvasTexture=null),this.clearCanvas(),this._centerX=-this._roomSprite.offsetX,this._centerY=-this._roomSprite.offsetY,this._roomSprite.texture=this._canvasTexture}}},{key:"getLayerYOffset",value:function(t,e,i){return this._currentEmitter&&this._currentEmitter.roomObjectSpriteId===i?this._currentEmitter.y*this._scaleMultiplier:0}},{key:"controlsSprite",value:function(t){return!!this._currentEmitter&&this._currentEmitter.roomObjectSpriteId==t}},{key:"updateSprites",value:function(){this._currentEmitter&&this._roomSprite&&(this._canvasTexture&&this._roomSprite.texture!==this._canvasTexture&&(this._roomSprite.texture=this._canvasTexture),this._hasIgnited&&this._currentEmitter.roomObjectSpriteId>=0&&(this._visualization.getSprite(this._currentEmitter.roomObjectSpriteId).visible=!1))}},{key:"updateAnimation",value:function(){if(this._currentEmitter&&this._roomSprite&&!this._isDone){!this._hasIgnited&&this._currentEmitter.hasIgnited&&(this._hasIgnited=!0);var t=this._offsetY*this._scaleMultiplier;if(this._currentEmitter.update(),this._hasIgnited){this._currentEmitter.roomObjectSpriteId>=0&&(this._visualization.getSprite(this._currentEmitter.roomObjectSpriteId).visible=!1),this._canvasTexture||this.updateCanvas(),this.clearCanvas();var e,i=Object(s.a)(this._currentEmitter.particles);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=this._centerX+10*(n.x-n.z)/10*this._scaleMultiplier,a=this._centerY-t+10*(n.y+(n.x+n.z)/2)/10*this._scaleMultiplier,o=n.getAsset();if(o&&o.texture)if(n.fade&&n.alphaMultiplier<1){this._translationMatrix.identity(),this._translationMatrix.translate(r+o.offsetX,a+o.offsetY);var u=new et(o.texture);this._particleColorTransform.alpha=n.alphaMultiplier,u.filters=[this._particleColorTransform],gD.instance.renderer.render(u,{renderTexture:this._canvasTexture,transform:this._translationMatrix,clear:!1})}else{var h=new J(r+o.offsetX,a+o.offsetY),_=new et(o.texture);_.x=h.x,_.y=h.y,gD.instance.renderer.render(_,{renderTexture:this._canvasTexture,clear:!1})}else{var l=new et(c.t.WHITE);l.tint=16777215,l.x=r-1,l.y=a-1,l.width=2,l.height=2,gD.instance.renderer.render(l,{renderTexture:this._canvasTexture,clear:!1})}}}catch(d){i.e(d)}finally{i.f()}if(!this._currentEmitter.particles.length)return void(this._isDone=!0)}}}},{key:"parseData",value:function(t){this._size=t.size,this._canvasId=void 0!==t.canvasId?t.canvasId:-1,this._offsetY=void 0!==t.offsetY?t.offsetY:10,this._scaleMultiplier=this._size/64,this._blend=void 0!==t.blend?t.blend:1,this._blend=Math.min(this._blend,1),this._blackOverlayAlphaTransform.alpha=this._blend;var e=void 0!==t.bgColor?t.bgColor:"0";if(this._bgColor=parseInt(e,16)||0,t.emitters&&t.emitters.length){var i,n=Object(s.a)(t.emitters);try{for(n.s();!(i=n.n()).done;){var r=i.value,a=r.id,o=r.name,u=r.spriteId,c=new Jk(o,u);this._emitters.add(a,c);var h,_=r.maxNumParticles,l=r.particlesPerFrame,d=void 0!==r.burstPulse?r.burstPulse:1,f=r.fuseTime,v=r.simulation.force,g=r.simulation.direction,O=r.simulation.gravity,y=r.simulation.airFriction,E=r.simulation.shape,p=r.simulation.energy,m=Object(s.a)(r.particles);try{for(m.s();!(h=m.n()).done;){var I,b=h.value,T=b.lifeTime,R=b.isEmitter||!1,k=b.fade||!1,A=[],S=Object(s.a)(b.frames);try{for(S.s();!(I=S.n()).done;){var j=I.value;A.push(this._visualization.asset.getAsset(j))}}catch(N){S.e(N)}finally{S.f()}c.configureParticle(T,R,A,k)}}catch(N){m.e(N)}finally{m.f()}c.setup(_,l,v,new _e(0,g,0),O,y,E,p,f,d)}}catch(N){n.e(N)}finally{n.f()}}}},{key:"_Str_17988",value:function(t){var e=0;t._emitters&&t._currentEmitter&&(e=t._emitters.getKey(t._emitters.getValues().indexOf(t._currentEmitter))),this.setAnimation(e),this._currentEmitter&&this._currentEmitter.copyStateFrom(t._currentEmitter,t._size/this._size),this._canvasTexture=null}},{key:"clearCanvas",value:function(){this._emptySprite||(this._emptySprite=new et(c.t.EMPTY),this._emptySprite.alpha=0),this._canvasTexture?gD.instance.renderer.render(this._emptySprite,{renderTexture:this._canvasTexture,clear:!0}):this._canvasTexture=c.o.create({width:this._roomSprite.width,height:this._roomSprite.height})}}]),t}(),tA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._particleSystems=void 0,t._currentParticleSystem=void 0,t}return Object(a.a)(i,[{key:"dispose",value:function(){if(Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._currentParticleSystem=null,this._particleSystems){var t,e=Object(s.a)(this._particleSystems.getValues());try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(n){e.e(n)}finally{e.f()}this._particleSystems=null}}},{key:"updateObject",value:function(t,e){if(Object(d.a)(Object(f.a)(i.prototype),"updateObject",this).call(this,t,e)){if(this._particleSystems){if(t!==this._scale||this._particleSystems.getValue(t)!==this._currentParticleSystem){var n=this._particleSystems.getValue(t);n._Str_17988(this._currentParticleSystem),this._currentParticleSystem&&this._currentParticleSystem.reset(),this._currentParticleSystem=n}}else this._Str_18684(),this._particleSystems?this._currentParticleSystem=this._particleSystems.getValue(t):I.log("ERROR Particle systems could not be read! "+this.object.type);return!0}return!1}},{key:"updateSprites",value:function(t,e,n){Object(d.a)(Object(f.a)(i.prototype),"updateSprites",this).call(this,t,e,n),this._currentParticleSystem&&this._currentParticleSystem.updateSprites()}},{key:"updateAnimation",value:function(t){return this._currentParticleSystem&&this._currentParticleSystem.updateAnimation(),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}},{key:"setAnimation",value:function(t){this._currentParticleSystem&&this._currentParticleSystem.setAnimation(t),Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,t)}},{key:"getLayerYOffset",value:function(t,e,n){return this._currentParticleSystem&&this._currentParticleSystem.controlsSprite(n)?this._currentParticleSystem.getLayerYOffset(t,e,n):Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)}},{key:"_Str_18684",value:function(){if(!this.object||!this.object.model)return!1;var t=this.object.model.getValue(dt.FURNITURE_FIREWORKS_DATA);if(!t||!t.length)return!1;this._particleSystems=new H;var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value,r=n.size,a=new $k(this);a.parseData(n),this._particleSystems.add(r,a)}}catch(o){i.e(o)}finally{i.f()}return!0}}]),i}(Pk),eA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._packetType=0,t._ribbonType=0,t._lastAnimationId=0,t}return Object(a.a)(i,[{key:"update",value:function(t,e,n,s){this.updatePresentWrap(),Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t,e,n,s)}},{key:"updatePresentWrap",value:function(){if(this.object){var t=this.object.model.getValue(dt.FURNITURE_EXTRAS),e=parseInt(t),n=Math.floor(e/1e3),s=e%1e3;this._packetType=n>i.MAX_PACKET_TYPE_VALUE?0:n,this._ribbonType=s>i.MAX_RIBBON_TYPE_VALUE?0:s}}},{key:"getFrameNumber",value:function(t,e){if(this._lastAnimationId===i.PRESENT_DEFAULT_STATE){if(e<=1)return this._packetType;if(2===e)return this._ribbonType}return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}},{key:"getSpriteAssetName",value:function(t,e){var i=this.getValidSize(t),n=this._type,s="";s=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";var r=this.getFrameNumber(t,e);return n=(n=n+"_"+i+"_"+s+"_"+this.direction)+"_"+r}},{key:"setAnimation",value:function(t){this._lastAnimationId=t,Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,t)}}]),i}(tA);eA.PRESENT_DEFAULT_STATE=0,eA.MAX_PACKET_TYPE_VALUE=9,eA.MAX_RIBBON_TYPE_VALUE=11;var iA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._packetType=0,t._ribbonType=0,t}return Object(a.a)(i,[{key:"update",value:function(t,e,n,s){this.updatePresentWrap(),Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t,e,n,s)}},{key:"updatePresentWrap",value:function(){if(this.object){var t=this.object.model.getValue(dt.FURNITURE_EXTRAS),e=parseInt(t);this._packetType=Math.floor(e/1e3),this._ribbonType=e%1e3}}},{key:"getFrameNumber",value:function(t,e){return e<=1?this._packetType:this._ribbonType}},{key:"getSpriteAssetName",value:function(t,e){var i=this.getValidSize(t),n=this._type,s="";s=e<this.spriteCount-1?String.fromCharCode("a".charCodeAt(0)+e):"sd";var r=this.getFrameNumber(t,e);return n=(n=n+"_"+i+"_"+s+"_"+this.direction)+"_"+r}}]),i}(Uk),nA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._color1=void 0,t._color2=void 0,t._badgeAssetNameNormalScale=void 0,t._badgeAssetNameSmallScale=void 0,t._color1=i.DEFAULT_COLOR_1,t._color2=i.DEFAULT_COLOR_2,t._badgeAssetNameNormalScale="",t._badgeAssetNameSmallScale="",t}return Object(a.a)(i,[{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t);if(""===this._badgeAssetNameNormalScale){var n=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME);n&&(this._badgeAssetNameNormalScale=n,this._badgeAssetNameSmallScale=this._badgeAssetNameNormalScale+"_32")}var s=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_1);this._color1=s||i.DEFAULT_COLOR_1;var r=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_2);return this._color2=r||i.DEFAULT_COLOR_2,e}},{key:"getLayerColor",value:function(t,e,n){switch(this.getLayerTag(t,this._direction,e)){case i.PRIMARY_COLOUR_SPRITE_TAG:return this._color1;case i.SECONDARY_COLOUR_SPRITE_TAG:return this._color2}return Object(d.a)(Object(f.a)(i.prototype),"getLayerColor",this).call(this,t,e,n)}},{key:"getSpriteAssetName",value:function(t,e){return this.getLayerTag(t,this._direction,e)===i.BADGE?32===t?this._badgeAssetNameSmallScale:this._badgeAssetNameNormalScale:Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)}},{key:"getLibraryAssetNameForSprite",value:function(t,e){return e.tag===i.BADGE?"%group.badge.url%"+e.libraryAssetName.replace("badge_",""):Object(d.a)(Object(f.a)(i.prototype),"getLibraryAssetNameForSprite",this).call(this,t,e)}}]),i}(Pk);nA.PRIMARY_COLOUR_SPRITE_TAG="COLOR1",nA.SECONDARY_COLOUR_SPRITE_TAG="COLOR2",nA.BADGE="BADGE",nA.DEFAULT_COLOR_1=15658734,nA.DEFAULT_COLOR_2=4934475;var sA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._color1=void 0,t._color2=void 0,t}return Object(a.a)(i,[{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t);if(!this.hasThumbnailImage){var n=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME);n&&n.length&&this.setThumbnailImages(this.getBitmapAsset(n))}var s=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_1);this._color1=s||i.DEFAULT_COLOR_1;var r=this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_2);return this._color2=r||i.DEFAULT_COLOR_2,e}},{key:"getLayerColor",value:function(t,e,n){switch(this.getLayerTag(t,this._direction,e)){case i.PRIMARY_COLOUR_SPRITE_TAG:return this._color1;case i.SECONDARY_COLOUR_SPRITE_TAG:return this._color2}return Object(d.a)(Object(f.a)(i.prototype),"getLayerColor",this).call(this,t,e,n)}},{key:"getLibraryAssetNameForSprite",value:function(t,e){return e.tag===i.THUMBNAIL&&this.object&&this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME)?"%group.badge.url%"+this.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME):Object(d.a)(Object(f.a)(i.prototype),"getLibraryAssetNameForSprite",this).call(this,t,e)}},{key:"getBitmapAsset",value:function(t){var e=this.asset.getAsset(t);return e&&e.texture?e.texture:null}}]),i}(zk);sA.PRIMARY_COLOUR_SPRITE_TAG="COLOR1",sA.SECONDARY_COLOUR_SPRITE_TAG="COLOR2",sA.DEFAULT_COLOR_1=15658734,sA.DEFAULT_COLOR_2=4934475;var rA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._stateQueue=void 0,t._running=void 0,t._stateQueue=[],t._running=!1,t}return Object(a.a)(i,[{key:"setAnimation",value:function(t){if(-1===t&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(i.ANIMATION_ID_START_ROLL),void this._stateQueue.push(i.ANIMATION_ID_ROLL);if(t>0&&t<=i.ANIMATION_ID_OFFSET_SLOW1){if(this._running)return this._running=!1,this._stateQueue=[],this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW1+t),this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW2+t),void this._stateQueue.push(t);Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,t)}}},{key:"updateAnimation",value:function(t){return this.getLastFramePlayed(1)&&this.getLastFramePlayed(2)&&this.getLastFramePlayed(3)&&this._stateQueue.length&&Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,this._stateQueue.shift()),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}}]),i}(Pk);rA.ANIMATION_ID_OFFSET_SLOW1=10,rA.ANIMATION_ID_OFFSET_SLOW2=20,rA.ANIMATION_ID_START_ROLL=31,rA.ANIMATION_ID_ROLL=32;var aA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._needsTransform=!0,t}return Object(a.a)(i,[{key:"transformGifTextures",value:function(t){if(this._gifCollection){var e=this._gifCollection.textures;if(e.length){for(var i=0;i<e.length;i++){var n=e[i];if(n)if(this.getAsset("".concat(this._imageUrl,"_").concat(i))){var s=new Z.d,r=t.width/n.width;switch(this.direction){case 2:s.a=r,s.b=-.5*r,s.c=0,s.d=1.1*r,s.tx=0,s.ty=.5*r*n.width;break;case 0:case 4:s.a=r,s.b=.5*r,s.c=0,s.d=1.1*r,s.tx=0,s.ty=0;break;default:s.a=r,s.b=0,s.c=0,s.d=r,s.tx=0,s.ty=0}var a=new et(n),o=c.o.create({width:t.width+s.tx,height:t.height+s.ty});gD.instance.renderer.render(a,{renderTexture:o,clear:!0,transform:s}),this.asset.disposeAsset("".concat(this._imageUrl,"_").concat(i)),this.asset.addAsset("".concat(this._imageUrl,"_").concat(i),o,!0,t.x,t.y,t.flipH,t.flipV)}}this._needsTransform=!1}}}},{key:"generateTransformedImage",value:function(t,e){var i=new Z.d,n=e.width/t.width;switch(this.direction){case 2:i.a=n,i.b=-.5*n,i.c=0,i.d=1.1*n,i.tx=0,i.ty=.5*n*t.width;break;case 0:case 4:i.a=n,i.b=.5*n,i.c=0,i.d=1.1*n,i.tx=0,i.ty=0;break;default:i.a=n,i.b=0,i.c=0,i.d=n,i.tx=0,i.ty=0}var s=new et(t),r=c.o.create({width:e.width+i.tx,height:e.height+i.ty});gD.instance.renderer.render(s,{renderTexture:r,clear:!0,transform:i}),this.asset.disposeAsset("".concat(this._imageUrl,"_0")),this.asset.addAsset("".concat(this._imageUrl,"_0"),r,!0,s.x,s.y,e.flipH,e.flipV),this._needsTransform=!1}},{key:"checkAndCreateImageForCurrentState",value:function(){Object(d.a)(Object(f.a)(i.prototype),"checkAndCreateImageForCurrentState",this).call(this),this._needsTransform=!0}},{key:"getSpriteAssetName",value:function(t,e){return this.getLayerTag(t,this._direction,e)===Fk.BRANDED_IMAGE&&this._imageUrl?(this._needsTransform&&(this._isAnimated?this.transformGifTextures(this.getAsset(Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e))):this.generateTransformedImage(gD.instance.core.asset.getTexture(this._imageUrl),this.getAsset(Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)))),"".concat(this._imageUrl,"_").concat(this.getFrameNumber(t,e))):Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)}}]),i}(xk),oA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._avatarData=void 0,t._avatarData=new yk,t}return Object(a.a)(i,[{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._avatarData&&(this._avatarData.dispose(),this._avatarData=null)}},{key:"createAvatarImage",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._avatarData.createAvatarImage(t,e,i,n,s)}},{key:"avatarManager",set:function(t){this._avatarData.avatarManager=t}}]),i}(Ck),uA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._mannequinScale=void 0,t._figure=void 0,t._gender=void 0,t._dynamicAssetName=void 0,t._needsUpdate=void 0,t._placeHolderFigure=void 0,t._disposed=void 0,t._mannequinScale=-1,t._figure=null,t._gender=null,t._dynamicAssetName=null,t._needsUpdate=!1,t._placeHolderFigure="hd-99999-99998",t._disposed=!1,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return t instanceof oA&&Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t)}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dynamicAssetName&&this.asset&&(this.asset.disposeAsset(this._dynamicAssetName),this._dynamicAssetName=null),Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this))}},{key:"updateObject",value:function(t,e){var n=Object(d.a)(Object(f.a)(i.prototype),"updateObject",this).call(this,t,e);return n&&this._mannequinScale!==t&&(this._mannequinScale=t,this.updateAvatar()),n}},{key:"updateModel",value:function(t){var e=Object(d.a)(Object(f.a)(i.prototype),"updateModel",this).call(this,t);if(e){var n=this.object.model.getValue(dt.FURNITURE_MANNEQUIN_FIGURE)||null;n&&(this._figure=n+"."+this._placeHolderFigure,this._gender=this.object.model.getValue(dt.FURNITURE_MANNEQUIN_GENDER)||null,this.updateAvatar())}return e=e||this._needsUpdate,this._needsUpdate=!1,e}},{key:"updateAvatar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.avatarExists()||t){var e=this._data.createAvatarImage(this._figure,this._mannequinScale,this._gender,this);e&&(e.setDirection(Qt.FULL,this.direction),this._dynamicAssetName&&this.asset.disposeAsset(this._dynamicAssetName),this.asset.addAsset(this.getAvatarAssetName(),e.getImage(Qt.FULL,!1,1,!1),!0),this._dynamicAssetName=this.getAvatarAssetName(),this._needsUpdate=!0,e.dispose())}}},{key:"avatarExists",value:function(){return this._figure&&null!==this.getAsset(this.getAvatarAssetName())}},{key:"getAvatarAssetName",value:function(){return"mannequin_"+this._figure+"_"+this._mannequinScale+"_"+this.direction+"_"+this.object.id}},{key:"resetFigure",value:function(t){t===this._figure&&this.updateAvatar(!0)}},{key:"getSpriteAssetName",value:function(t,e){var n=this.getLayerTag(t,this.direction,e);return this._figure&&n===i.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?this.getAvatarAssetName():Object(d.a)(Object(f.a)(i.prototype),"getSpriteAssetName",this).call(this,t,e)}},{key:"getLayerXOffset",value:function(t,e,n){return this.getLayerTag(t,e,n)===i.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(n).width/2:Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n)}},{key:"getLayerYOffset",value:function(t,e,n){return this.getLayerTag(t,e,n)===i.AVATAR_IMAGE_SPRITE_TAG&&this.avatarExists()?-this.getSprite(n).height:Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)}},{key:"disposed",get:function(){return this._disposed}}]),i}(Uk);uA.AVATAR_IMAGE_SPRITE_TAG="avatar_image";var cA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._animPhaseIndex=void 0,t._animDirectionIndex=void 0,t._animSpeedIndex=void 0,t._animFactorIndex=void 0,t._animOffsetIndex=void 0,t._animOffsetIndex=[],t}return Object(a.a)(i,[{key:"updateAnimation",value:function(t){this._animSpeedIndex||this.initItems(t);var e=this.getSprite(2);return e&&(this._animOffsetIndex[0]=this.getNewPoint(t,0)),(e=this.getSprite(3))&&(this._animOffsetIndex[1]=this.getNewPoint(t,1)),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}},{key:"getNewPoint",value:function(t,e){var n=0,s=this._animPhaseIndex[e],r=this._animDirectionIndex[e],a=this._animSpeedIndex[e],o=this._animFactorIndex[e],u=1;32==t?(n=i.AREA_DIAMETER_SMALL,u=.5):n=i.AREA_DIAMETER_LARGE;var c=s+r*a;Math.abs(c)>=n&&(r>0?s-=c-n:s+=-n-c,r=-r,this._animDirectionIndex[e]=r);var h=(n-Math.abs(s))*o,_=r*Math.sin(Math.abs(s/4))*h;return r>0?_-=h:_+=h,s+=r*a*u,this._animPhaseIndex[e]=s,0==Math.trunc(_)&&(this._animFactorIndex[e]=this.getRandomAmplitudeFactor()),new J(s,_)}},{key:"initItems",value:function(t){var e;e=32===t?i.AREA_DIAMETER_SMALL:i.AREA_DIAMETER_LARGE,this._animPhaseIndex=[],this._animPhaseIndex.push(Math.random()*e*1.5),this._animPhaseIndex.push(Math.random()*e*1.5),this._animDirectionIndex=[],this._animDirectionIndex.push(1),this._animDirectionIndex.push(-1),this._animSpeedIndex=[],this._animSpeedIndex.push(i.ANIM_SPEED_FAST),this._animSpeedIndex.push(i.ANIM_SPEED_SLOW),this._animFactorIndex=[],this._animFactorIndex.push(this.getRandomAmplitudeFactor()),this._animFactorIndex.push(this.getRandomAmplitudeFactor())}},{key:"getLayerXOffset",value:function(t,e,n){return 2!==n&&3!==n||2!=this._animOffsetIndex.length?Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n):this._animOffsetIndex[n-2].x}},{key:"getLayerYOffset",value:function(t,e,n){return 2!==n&&3!==n||2!=this._animOffsetIndex.length?Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n):this._animOffsetIndex[n-2].y}},{key:"getRandomAmplitudeFactor",value:function(){return 30*Math.random()/100+.15}}]),i}(Pk);cA.UPDATE_INTERVAL=2,cA.AREA_DIAMETER_SMALL=15,cA.AREA_DIAMETER_LARGE=31,cA.ANIM_SPEED_FAST=2,cA.ANIM_SPEED_SLOW=1;var hA=function(){function t(e,i,n,s,a,o){Object(r.a)(this,t),this._name=void 0,this._index=void 0,this._radius=void 0,this._arcSpeed=void 0,this._arcOffset=void 0,this._height=void 0,this._position=void 0,this._positionVector=void 0,this._children=void 0,this._name=e,this._index=i,this._radius=n,this._arcSpeed=s*Math.PI*2/360,this._arcOffset=a*Math.PI*2/360,this._height=o,this._position=0,this._positionVector=new Et(0,0,0),this._children=[]}return Object(a.a)(t,[{key:"dispose",value:function(){for(;this._children.length>0;){this._children.shift().dispose()}}},{key:"update",value:function(e,i,n){this._position=this._position+this._arcSpeed/t.SYSTEM_TEMPO,e[this._index]=this.getPositionVector(i,n);var r,a=Object(s.a)(this._children);try{for(a.s();!(r=a.n()).done;){r.value.update(e,this._positionVector,n)}}catch(o){a.e(o)}finally{a.f()}}},{key:"getPositionVector",value:function(t,e){var i=this._radius*Math.cos(this._position+this._arcOffset),n=this._radius*Math.sin(this._position+this._arcOffset);return this._positionVector.x=e/2*(i-n),this._positionVector.y=(n+i)*(e/2)*.5-this._height*(e/2),this._positionVector.z=-Math.trunc(4*(i+n)-.7),t&&this._positionVector.add(t),this._positionVector}},{key:"addChild",value:function(t){this._children.indexOf(t)>=0||this._children.push(t)}},{key:"hasChild",value:function(t){return!!this.getChild(t)}},{key:"getChild",value:function(t){var e,i=Object(s.a)(this._children);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.name===t)return n;if(n.hasChild(t))return n.getChild(t)}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"name",get:function(){return this._name}}]),t}();hA.SYSTEM_TEMPO=30;var _A=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._planetIndex=void 0,t._planetNameIndex=void 0,t._offsetArray=void 0,t._rootPosition=void 0,t._offsetArray=[],t._rootPosition=new Et,t}return Object(a.a)(i,[{key:"dispose",value:function(){if(this._planetIndex)for(;this._planetIndex.length>0;){this._planetIndex.shift().dispose()}this._planetIndex=null,this._planetNameIndex=null}},{key:"updateAnimation",value:function(t){if(!this._planetIndex&&this.spriteCount>0&&!this.processPlanets())return 0;if(this._planetIndex){var e,n=Object(s.a)(this._planetIndex);try{for(n.s();!(e=n.n()).done;){e.value.update(this._offsetArray,this._rootPosition,t)}}catch(r){n.e(r)}finally{n.f()}return Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}return 0}},{key:"getLayerXOffset",value:function(t,e,n){return this._offsetArray[n]?this._offsetArray[n].x:Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n)}},{key:"getLayerYOffset",value:function(t,e,n){return this._offsetArray[n]?this._offsetArray[n].y:Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)}},{key:"getLayerZOffset",value:function(t,e,n){return this._offsetArray[n]?this._offsetArray[n].z:Object(d.a)(Object(f.a)(i.prototype),"getLayerZOffset",this).call(this,t,e,n)}},{key:"processPlanets",value:function(){if(this.object&&this.object.model){var t=this.object.model.getValue(dt.FURNITURE_PLANETSYSTEM_DATA);if(!t)return!1;this._planetIndex=[],this._planetNameIndex=[];var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.getSprite(n.id)&&this.addPlanet(n.name,n.id,n.parent,n.radius||0,n.arcSpeed||0,n.arcOffset||0,n.height||0)}}catch(r){i.e(r)}finally{i.f()}return!0}}},{key:"addPlanet",value:function(t,e,i,n,s,r,a){if(this._planetIndex){var o=new hA(t,e,n,s,r,a),u=this.getPlanet(i);u?u.addChild(o):(this._planetIndex.push(o),this._planetNameIndex.push(t))}}},{key:"getPlanet",value:function(t){var e,i=Object(s.a)(this._planetIndex);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.name===t)return n;if(n.hasChild(t))return n.getChild(t)}}catch(r){i.e(r)}finally{i.f()}return null}}]),i}(Pk),lA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Pk),dA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._stateQueue=void 0,t._animationCounter=void 0,t._stateQueue=[],t._animationCounter=-1,t}return Object(a.a)(i,[{key:"setAnimation",value:function(t){return t===i.ANIMATION_ID_ROLL_ONCE&&(this._stateQueue=[],this._stateQueue.push(i.ANIMATION_ID_NORMAL),this._animationCounter=i.ANIMATION_DURATION),Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,t)}},{key:"updateAnimation",value:function(t){return this._animationCounter>0&&this._animationCounter--,this._animationCounter||this._stateQueue.length&&Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,this._stateQueue.shift()),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}},{key:"usesAnimationResetting",value:function(){return!0}}]),i}(Pk);dA.ANIMATION_ID_ROLL=3,dA.ANIMATION_ID_ROLL_ONCE=2,dA.ANIMATION_ID_NORMAL=1,dA.ANIMATION_DURATION=15;var fA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"usesAnimationResetting",value:function(){return!0}}]),i}(Pk),vA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._imageOffset=void 0,t}return Object(a.a)(i,[{key:"imageReady",value:function(t,e){Object(d.a)(Object(f.a)(i.prototype),"imageReady",this).call(this,t,e),t&&this.setImageOffset(t.width,t.height)}},{key:"setImageOffset",value:function(t,e){var i=new Rk;i.setDirection(1,0,-e),i.setDirection(3,0,0),i.setDirection(5,-t,0),i.setDirection(7,-t,-e),i.setDirection(4,-t/2,-e/2),this._imageOffset=i}},{key:"getLayerXOffset",value:function(t,e,n){if(this._imageOffset){var s=this._imageOffset.getXOffset(e,0);if(void 0!==s)return s+this._offsetX}return Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n)+this._offsetX}},{key:"getLayerYOffset",value:function(t,e,n){if(this._imageOffset){var s=this._imageOffset.getYOffset(e,0);if(void 0!==s)return s+this._offsetY}return Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)+this._offsetY}},{key:"getLayerZOffset",value:function(t,e,n){return Object(d.a)(Object(f.a)(i.prototype),"getLayerZOffset",this).call(this,t,e,n)+-this._offsetZ}},{key:"getLayerIgnoreMouse",value:function(t,e,i){return!0}}]),i}(Fk),gA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getFrameNumber",value:function(t,e){var n=this.getLayerTag(t,this.direction,e),s=this.object.getState(0);switch(n){case i.ONES_SPRITE:return Math.floor(s%10);case i.TENS_SPRITE:return Math.floor(s/10%10);case i.HUNDREDS_SPRITE:return Math.floor(s/100%10);case i.THOUSANDS_SPRITE:return Math.floor(s/1e3%10);default:return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}}}]),i}(Pk);gA.ONES_SPRITE="ones_sprite",gA.TENS_SPRITE="tens_sprite",gA.HUNDREDS_SPRITE="hundreds_sprite",gA.THOUSANDS_SPRITE="thousands_sprite";var OA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._internalFrameIncreaseCounter=0,t}return Object(a.a)(i,[{key:"updateAnimations",value:function(t){return this._internalFrameIncreaseCounter=this._internalFrameIncreaseCounter+this.object.model.getValue(dt.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED),this._frameIncrease=this._internalFrameIncreaseCounter,this._internalFrameIncreaseCounter=this._internalFrameIncreaseCounter-this._frameIncrease,Object(d.a)(Object(f.a)(i.prototype),"updateAnimations",this).call(this,t)}}]),i}(Pk),yA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getLayerColor",value:function(t,e,i){return this._data?this._data.getLayerColor(t,e,i):Sk.DEFAULT_COLOR}}]),i}(Uk),EA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t,n;return Object(r.a)(this,i),(n=e.call(this))._stateQueue=void 0,n._running=void 0,n._stateQueue=[],n._running=!1,Object(d.a)((t=Object(l.a)(n),Object(f.a)(i.prototype)),"setAnimation",t).call(t,i.ANIMATION_ID_OFF),n}return Object(a.a)(i,[{key:"setAnimation",value:function(t){if(0===t&&!this._running)return this._running=!0,this._stateQueue=[],this._stateQueue.push(i.ANIMATION_ID_START_ROLL),void this._stateQueue.push(i.ANIMATION_ID_ROLL);if(t>0&&t<=i.ANIMATION_ID_OFFSET_SLOW2){if(this._running)return this._running=!1,this._stateQueue=[],2===this.direction?(this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW1+5),this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW2+5)):(this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW1+t),this._stateQueue.push(i.ANIMATION_ID_OFFSET_SLOW2+t)),void this._stateQueue.push(i.ANIMATION_ID_OFF);Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,i.ANIMATION_ID_OFF)}}},{key:"updateAnimation",value:function(t){return this.getLastFramePlayed(11)&&this._stateQueue.length&&Object(d.a)(Object(f.a)(i.prototype),"setAnimation",this).call(this,this._stateQueue.shift()),Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}}]),i}(Pk);EA.ANIMATION_ID_OFFSET_SLOW1=20,EA.ANIMATION_ID_OFFSET_SLOW2=10,EA.ANIMATION_ID_START_ROLL=31,EA.ANIMATION_ID_ROLL=32,EA.ANIMATION_ID_OFF=30;var pA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"updateObject",value:function(t,e){return Object(d.a)(Object(f.a)(i.prototype),"updateObject",this).call(this,t,e),!0}},{key:"getFrameNumber",value:function(t,e){var n=this.object.model.getValue(dt.FURNITURE_VOTE_COUNTER_COUNT);switch(this.getLayerTag(t,this.direction,e)){case i.ONES_SPRITE:return n%10;case i.TENS_SPRITE:return n/10%10;case i.HUNDREDS_SPRITE:return n/100%10;default:return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}}},{key:"getLayerAlpha",value:function(t,e,n){if(this.object.model.getValue(dt.FURNITURE_VOTE_COUNTER_COUNT)===i.HIDE_COUNTER_SCORE)switch(this.getLayerTag(t,e,n)){case i.ONES_SPRITE:case i.TENS_SPRITE:case i.HUNDREDS_SPRITE:return 0}return Object(d.a)(Object(f.a)(i.prototype),"getLayerAlpha",this).call(this,t,e,n)}}]),i}(Pk);pA.ONES_SPRITE="ones_sprite",pA.TENS_SPRITE="tens_sprite",pA.HUNDREDS_SPRITE="hundreds_sprite",pA.HIDE_COUNTER_SCORE=-1;var mA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getFrameNumber",value:function(t,e){var n=this.object.model.getValue(dt.FURNITURE_VOTE_MAJORITY_RESULT);switch(this.getLayerTag(t,this.direction,e)){case i.ONES_SPRITE:return n%10;case i.TENS_SPRITE:return n/10%10;case i.HUNDREDS_SPRITE:return n/100%10;default:return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}}},{key:"getLayerAlpha",value:function(t,e,n){var s=this.object.model.getValue(dt.FURNITURE_VOTE_MAJORITY_RESULT);if(-1!==i.HIDE_RESULTS_STATES.indexOf(this.object.getState(0))||s===i.HIDE_RESULTS_VALUE)switch(this.getLayerTag(t,e,n)){case i.ONES_SPRITE:case i.TENS_SPRITE:case i.HUNDREDS_SPRITE:return 0}return Object(d.a)(Object(f.a)(i.prototype),"getLayerAlpha",this).call(this,t,e,n)}}]),i}(Pk);mA.ONES_SPRITE="ones_sprite",mA.TENS_SPRITE="tens_sprite",mA.HUNDREDS_SPRITE="hundreds_sprite",mA.HIDE_RESULTS_STATES=[-1,1],mA.HIDE_RESULTS_VALUE=-1;var IA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i)}(Pk),bA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getThumbnailURL",value:function(){if(!this.object)return null;var t=this.object.model.getValue(dt.FURNITURE_DATA);return t&&t[i.THUMBNAIL_URL]||null}}]),i}(Yk);bA.THUMBNAIL_URL="THUMBNAIL_URL";var TA=function(){function t(e){Object(r.a)(this,t),this._sprite=void 0,this._texture=void 0,this._amount=void 0,this._alpha=void 0,this._sprite=new et(e),this._texture=null,this._amount=-1,this._alpha=0}return Object(a.a)(t,[{key:"renderBubble",value:function(t){if(!this._sprite||this._amount===t)return null;var e=new q;e.addChild(this._sprite);var i=new HT.a("+"+t,{fontFamily:"Arial",fontSize:9,fill:16777215,align:"center"});return i.anchor.x=.5,i.x=this._sprite.width/2,i.y=19,e.addChild(i),this._texture?gD.instance.renderer.render(e,{renderTexture:this._texture,clear:!0}):this._texture=Ut.generateTexture(e),this._texture}},{key:"amount",get:function(){return this._amount},set:function(t){this._amount=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}}]),t}(),RA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t,n))._posturesToAnimations=void 0,s._gesturesToAnimations=void 0,s._defaultPosture=void 0,s._posturesToAnimations=new Map,s._gesturesToAnimations=new Map,s._defaultPosture=null,s}return Object(a.a)(i,[{key:"processPostures",value:function(t){if(!t)return!1;if(t.defaultPosture&&t.defaultPosture.length&&(this._defaultPosture=t.defaultPosture),!t.postures)return!1;var e,i=Object(s.a)(t.postures);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._posturesToAnimations.get(n.id)||(null===this._defaultPosture&&(this._defaultPosture=n.id),this._posturesToAnimations.set(n.id,n.animationId))}}catch(r){i.e(r)}finally{i.f()}return void 0!==this._posturesToAnimations.get(this._defaultPosture)}},{key:"processGestures",value:function(t){if(!t)return!1;var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._gesturesToAnimations.get(n.id)||this._gesturesToAnimations.set(n.id,n.animationId)}}catch(r){i.e(r)}finally{i.f()}return!0}},{key:"postureToAnimation",value:function(t){return this._posturesToAnimations.get(t)||(t=this._defaultPosture),this._posturesToAnimations.get(t)}},{key:"getGestureDisabled",value:function(t){return"ded"===t}},{key:"gestureToAnimation",value:function(t){return this._gesturesToAnimations.get(t)?this._gesturesToAnimations.get(t):i.DEFAULT}},{key:"animationToPosture",value:function(t,e){if(t>=0&&t<this._posturesToAnimations.size)for(var i=this._posturesToAnimations.keys();;){var n=i.next();if(n.done)return null;if(t<=0)return n.value;--t}return e?this._defaultPosture:null}},{key:"animationToGesture",value:function(t){if(t>=0&&t<this._gesturesToAnimations.size)for(var e=this._gesturesToAnimations.keys();;){var i=e.next();if(i.done)return null;if(t<=0)return i.value;--t}return null}},{key:"getGestureForAnimationId",value:function(t){var e,i=Object(s.a)(this._gesturesToAnimations.keys());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(this._gesturesToAnimations.get(n)===t)return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"totalPostures",get:function(){return this._posturesToAnimations.size}},{key:"totalGestures",get:function(){return this._gesturesToAnimations.size}}]),i}(Mk);RA.DEFAULT=-1;var kA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._isAllowedToTurnHead=void 0,t._isAllowedToTurnHead=!0,t}return Object(a.a)(i,[{key:"createSizeData",value:function(t,e,i){return t>1?new RA(e,i):new Mk(e,i)}},{key:"defineVisualizations",value:function(t){return this._isAllowedToTurnHead=!0,Object(d.a)(Object(f.a)(i.prototype),"defineVisualizations",this).call(this,t)}},{key:"processVisualElement",value:function(t,e,n){if(!t||!e||!n)return!1;switch(e){case"postures":if(!(t instanceof RA)||!t.processPostures(n))return!1;break;case"gestures":if(!(t instanceof RA)||!t.processGestures(n))return!1;break;default:if(!Object(d.a)(Object(f.a)(i.prototype),"processVisualElement",this).call(this,t,e,n))return!1}return!0}},{key:"postureToAnimation",value:function(t,e){var i=this.getSizeData(t);return i?i.postureToAnimation(e):RA.DEFAULT}},{key:"getGestureDisabled",value:function(t,e){var i=this.getSizeData(t);return!!i&&i.getGestureDisabled(e)}},{key:"gestureToAnimation",value:function(t,e){var i=this.getSizeData(t);return i?i.gestureToAnimation(e):RA.DEFAULT}},{key:"animationToPosture",value:function(t,e,i){var n=this.getSizeData(t);return n?n.animationToPosture(e,i):null}},{key:"animationToGesture",value:function(t,e){var i=this.getSizeData(t);return i?i.animationToGesture(e):null}},{key:"getGestureForAnimationId",value:function(t,e){var i=this.getSizeData(t);return i?i.getGestureForAnimationId(e):null}},{key:"totalPostures",value:function(t){var e=this.getSizeData(t);return e?e.totalPostures:0}},{key:"totalGestures",value:function(t){var e=this.getSizeData(t);return e?e.totalGestures:0}},{key:"isAllowedToTurnHead",get:function(){return this._isAllowedToTurnHead}}]),i}(Lk),AA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;for(Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._posture=void 0,t._gesture=void 0,t._isSleeping=void 0,t._headDirection=void 0,t._headOnly=void 0,t._nonHeadSprites=void 0,t._headSprites=void 0,t._saddleSprites=void 0,t._animationOver=void 0,t._paletteIndex=void 0,t._paletteName=void 0,t._customLayerIds=void 0,t._customPartIds=void 0,t._customPaletteIds=void 0,t._isRiding=void 0,t._color=void 0,t._experience=void 0,t._experienceTimestamp=void 0,t._experienceData=void 0,t._previousAnimationDirection=void 0,t._animationStates=void 0,t._data=null,t._posture="",t._gesture="",t._isSleeping=!1,t._headDirection=-1,t._headOnly=!1,t._nonHeadSprites=[],t._headSprites=[],t._saddleSprites=[],t._animationOver=!1,t._paletteIndex=-1,t._paletteName="",t._customLayerIds=[],t._customPartIds=[],t._customPaletteIds=[],t._isRiding=!1,t._color=16777215,t._experience=0,t._experienceTimestamp=0,t._experienceData=null,t._previousAnimationDirection=-1,t._animationStates=[];t._animationStates.length<i.ANIMATION_INDEX_COUNT;)t._animationStates.push(new Ak);return t}return Object(a.a)(i,[{key:"initialize",value:function(t){if(!(t instanceof kA))return!1;var e=this.getPetAdditionAsset(i.PET_EXPERIENCE_BUBBLE);return e&&(this._experienceData=new TA(e)),Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t)}},{key:"dispose",value:function(){if(Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._animationStates){for(;this._animationStates.length;){var t=this._animationStates[0];t&&t.dispose(),this._animationStates.pop()}this._animationStates=null}}},{key:"getAnimationId",value:function(t){return t.animationId}},{key:"update",value:function(t,e,n,s){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t,e,n,s),this.updateExperienceBubble(e)}},{key:"updateExperienceBubble",value:function(t){if(this._experienceData&&(this._experienceData.alpha=0,this._experienceTimestamp)){var e=t-this._experienceTimestamp;e<i.EXPERIENCE_BUBBLE_VISIBLE_IN_MS?this._experienceData.alpha=255*Math.sin(e/i.EXPERIENCE_BUBBLE_VISIBLE_IN_MS*Math.PI):this._experienceTimestamp=0;var n=this.getSprite(this.totalSprites-1);if(n){if(this._experienceData.alpha>0){var s=this._experienceData.renderBubble(this._experience);if(s)return n.texture=s,n.offsetX=-20,n.offsetY=-80,n.alpha=this._experienceData.alpha,n.visible=!0,void(n.relativeDepth=-.2)}n.texture=null,n.visible=!1}}}},{key:"updateModel",value:function(t){var e=this.object&&this.object.model;if(!e)return!1;if(this.updateModelCounter===e.updateCounter)return!1;var i=e.getValue(dt.FIGURE_POSTURE),n=e.getValue(dt.FIGURE_GESTURE);this.setPostureAndGesture(i,n);var s=e.getValue(dt.FURNITURE_ALPHA_MULTIPLIER)||null;(null===s||isNaN(s))&&(s=1),this._alphaMultiplier!==s&&(this._alphaMultiplier=s,this._alphaChanged=!0),this._isSleeping=e.getValue(dt.FIGURE_SLEEP)>0;var r=e.getValue(dt.HEAD_DIRECTION);!isNaN(r)&&this._data.isAllowedToTurnHead?this._headDirection=r:this._headDirection=this.object.getDirection().x,this._experience=e.getValue(dt.FIGURE_GAINED_EXPERIENCE),this._experienceTimestamp=e.getValue(dt.FIGURE_EXPERIENCE_TIMESTAMP);var a=e.getValue(dt.PET_PALETTE_INDEX),o=e.getValue(dt.PET_CUSTOM_LAYER_IDS),u=e.getValue(dt.PET_CUSTOM_PARTS_IDS),c=e.getValue(dt.PET_CUSTOM_PALETTE_IDS),h=e.getValue(dt.PET_IS_RIDING),_=e.getValue(dt.PET_HEAD_ONLY),l=e.getValue(dt.PET_COLOR);return a!==this._paletteIndex&&(this._paletteIndex=a,this._paletteName=this._paletteIndex.toString()),this._customLayerIds=o||[],this._customPartIds=u||[],this._customPaletteIds=c||[],this._isRiding=!isNaN(h)&&h>0,this._headOnly=!isNaN(_)&&_>0,isNaN(l)||this._color===l||(this._color=l),this.updateModelCounter=e.updateCounter,!0}},{key:"updateAnimation",value:function(t){if(this.object){var e=this.object.getDirection().x;e!==this._previousAnimationDirection&&(this._previousAnimationDirection=e,this.resetAllAnimationFrames())}return Object(d.a)(Object(f.a)(i.prototype),"updateAnimation",this).call(this,t)}},{key:"setPostureAndGesture",value:function(t,e){t!==this._posture&&(this._posture=t,this.setAnimationForIndex(i.POSTURE_ANIMATION_INDEX,this._data.postureToAnimation(this._scale,t))),this._data.getGestureDisabled(this._scale,t)&&(e=null),e!==this._gesture&&(this._gesture=e,this.setAnimationForIndex(i.GESTURE_ANIMATION_INDEX,this._data.gestureToAnimation(this._scale,e)))}},{key:"getAnimationStateData",value:function(t){return t>=0&&t<this._animationStates.length?this._animationStates[t]:null}},{key:"setAnimationForIndex",value:function(t,e){var i=this.getAnimationStateData(t);i&&this.setSubAnimation(i,e)&&(this._animationOver=!1)}},{key:"resetAllAnimationFrames",value:function(){this._animationOver=!1;for(var t=this._animationStates.length-1;t>=0;){var e=this._animationStates[t];e&&e.setLayerCount(this.animatedLayerCount),t--}}},{key:"updateAnimations",value:function(t){if(this._animationOver)return 0;for(var e=!0,i=0,n=0;n<this._animationStates.length;){var s=this._animationStates[n];if(s)if(!s.animationOver)i|=this.updateFramesForAnimation(s,t),s.animationOver?(kk.isTransitionFromAnimation(s.animationId)||kk.isTransitionToAnimation(s.animationId))&&(this.setAnimationForIndex(n,s.animationAfterTransitionId),e=!1):e=!1;n++}return this._animationOver=e,i}},{key:"getSpriteAssetName",value:function(t,e){if(this._headOnly&&this.isNonHeadSprite(e))return null;if(this._isRiding&&this._parser3(e))return null;var n=this.totalSprites;if(e<n-i.ADDITIONAL_SPRITE_COUNT){var s=this.getValidSize(t);if(e<n-(1+i.ADDITIONAL_SPRITE_COUNT)){if(e>=Ck.LAYER_LETTERS.length)return null;var r=Ck.LAYER_LETTERS[e];return 1===s?this._type+"_icon_"+r:this._type+"_"+s+"_"+r+"_"+this.getDirection(t,e)+"_"+this.getFrameNumber(s,e)}return this._type+"_"+s+"_sd_"+this.getDirection(t,e)+"_0"}return null}},{key:"getLayerColor",value:function(t,e,n){return e<this.totalSprites-i.ADDITIONAL_SPRITE_COUNT?this._color:16777215}},{key:"getLayerXOffset",value:function(t,e,n){for(var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerXOffset",this).call(this,t,e,n),r=this._animationStates.length-1;r>=0;){var a=this._animationStates[r];if(a){var o=a.getFrame(n);o&&(s+=o.x)}r--}return s}},{key:"getLayerYOffset",value:function(t,e,n){for(var s=Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n),r=this._animationStates.length-1;r>=0;){var a=this._animationStates[r];if(a){var o=a.getFrame(n);o&&(s+=o.y)}r--}return s}},{key:"getLayerZOffset",value:function(t,e,i){return this._data?this._data.getLayerZOffset(t,this.getDirection(t,i),i):jk.DEFAULT_ZOFFSET}},{key:"getDirection",value:function(t,e){return this.isHeadSprite(e)?this._data.getValidDirection(t,this._headDirection):this._direction}},{key:"getFrameNumber",value:function(t,e){for(var n=this._animationStates.length-1;n>=0;){var s=this._animationStates[n];if(s){var r=s.getFrame(e);if(r)return r.id}n--}return Object(d.a)(Object(f.a)(i.prototype),"getFrameNumber",this).call(this,t,e)}},{key:"isHeadSprite",value:function(t){if(void 0===this._headSprites[t]){var e=this._data.getLayerTag(this._scale,Nk.USE_DEFAULT_DIRECTION,t)===i.HEAD,n=this._data.getLayerTag(this._scale,Nk.USE_DEFAULT_DIRECTION,t)===i.HAIR;this._headSprites[t]=!(!e&&!n)}return this._headSprites[t]}},{key:"isNonHeadSprite",value:function(t){if(void 0===this._nonHeadSprites[t])if(t<this.totalSprites-(1+i.ADDITIONAL_SPRITE_COUNT)){var e=this._data.getLayerTag(this._scale,Nk.USE_DEFAULT_DIRECTION,t);e&&e.length>0&&e!==i.HEAD&&e!==i.HAIR?this._nonHeadSprites[t]=!0:this._nonHeadSprites[t]=!1}else this._nonHeadSprites[t]=!0;return this._nonHeadSprites[t]}},{key:"_parser3",value:function(t){return void 0===this._saddleSprites[t]&&(this._data.getLayerTag(this._scale,Nk.USE_DEFAULT_DIRECTION,t)===i.SADDLE?this._saddleSprites[t]=!0:this._saddleSprites[t]=!1),this._saddleSprites[t]}},{key:"getAsset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!this.asset)return null;var i=this._customLayerIds.indexOf(e),n=this._paletteName,s=-1,r=-1;return i>-1&&(s=this._customPartIds[i],n=(r=this._customPaletteIds[i])>-1?r.toString():this._paletteName),!isNaN(s)&&s>-1&&(t=t+"_"+s),this.asset.getAssetWithPalette(t,n)}},{key:"getAdditionalLayerCount",value:function(){return Object(d.a)(Object(f.a)(i.prototype),"getAdditionalLayerCount",this).call(this)+i.ADDITIONAL_SPRITE_COUNT}},{key:"setLayerCount",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"setLayerCount",this).call(this,t),this._headSprites=[]}},{key:"getPostureForAsset",value:function(t,e){for(var i=e.split("_"),n=i.length,s=0;s<i.length;){if("64"===i[s]||"32"===i[s]){n=s+3;break}s++}var r=null;if(n<i.length){var a=i[n];a=a.split("@")[0],(r=this._data.animationToPosture(t,parseInt(a)/100,!1))||(r=this._data.getGestureForAnimationId(t,parseInt(a)/100))}return r}},{key:"getPetAdditionAsset",value:function(t){return gD.instance.core.asset.getTexture(t)}}]),i}(Pk);AA.TYPE=ft.PET_ANIMATED,AA.HEAD="head",AA.SADDLE="saddle",AA.HAIR="hair",AA.ADDITIONAL_SPRITE_COUNT=1,AA.EXPERIENCE_BUBBLE_VISIBLE_IN_MS=1e3,AA.PET_EXPERIENCE_BUBBLE="avatar_addition_pet_experience_bubble",AA.POSTURE_ANIMATION_INDEX=0,AA.GESTURE_ANIMATION_INDEX=1,AA.ANIMATION_INDEX_COUNT=2;var SA=function(){function t(e,i,n){Object(r.a)(this,t),this._loc=void 0,this._type=void 0,this._category=void 0,this.type=e,this.loc=i,this.category=n}return Object(a.a)(t,[{key:"loc",get:function(){return this._loc},set:function(t){this._loc||(this._loc=new Et),this._loc.assign(t)}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"category",get:function(){return this._category},set:function(t){this._category=t}},{key:"dispose",value:function(){this._loc=null}}]),t}();SA.WINDOW="window",SA.HOLE="hole";var jA=function(){function t(){Object(r.a)(this,t),this._masks=void 0,this._masks=[]}return Object(a.a)(t,[{key:"masks",get:function(){return this._masks}}]),t}(),NA=function(){function t(){Object(r.a)(this,t),this._masks=void 0,this._masks=new Map}return Object(a.a)(t,[{key:"maskCount",get:function(){return this._masks.size}},{key:"dispose",value:function(){this._masks&&(this.reset(),this._masks=null)}},{key:"initialize",value:function(t){if(!t)return!1;if(this._masks.clear(),t.masks.length){var e,i=Object(s.a)(t.masks);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.locations.length?n.locations[0]:null;r&&this._masks.set(n.id,new SA(n.type,r,n.category))}}}catch(a){i.e(a)}finally{i.f()}}return!0}},{key:"reset",value:function(){var t,e=Object(s.a)(this._masks.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._masks.clear()}},{key:"addMask",value:function(t,e,i,n){var s=new SA(e,i,n);this._masks.delete(t),this._masks.set(t,s)}},{key:"removeMask",value:function(t){var e=this._masks.get(t);return!!e&&(this._masks.delete(t),e.dispose(),!0)}},{key:"getXML",value:function(){var t,e=new jA,i=Object(s.a)(this._masks.entries());try{for(i.s();!(t=i.n()).done;){var r=Object(n.a)(t.value,2),a=r[0],o=r[1];if(o){var u=this.getMaskType(o),c=this.getMaskCategory(o),h=this.getMaskLocation(o);if(u&&c&&h){var _={id:a,type:u,category:c,locations:[{x:h.x,y:h.y,z:h.z}]};e.masks.push(_)}}}}catch(l){i.e(l)}finally{i.f()}return e}},{key:"getMaskLocation",value:function(t){return t?t.loc:null}},{key:"getMaskType",value:function(t){return t?t.type:null}},{key:"getMaskCategory",value:function(t){return t?t.category:null}},{key:"masks",get:function(){return this._masks}}]),t}(),DA=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(r.a)(this,t),this._z=void 0,this._points=void 0,this._color=void 0,this._maskAssetNames=void 0,this._maskAssetLocations=void 0,this._maskAssetFlipHs=void 0,this._maskAssetFlipVs=void 0,this._alignBottom=void 0,this._assetNames=void 0,this._assetNames=[],this._maskAssetNames=[],this._maskAssetLocations=[],this._maskAssetFlipHs=[],this._maskAssetFlipVs=[],null!=e&&(this._maskAssetNames=e._maskAssetNames,this._maskAssetLocations=e._maskAssetLocations,this._maskAssetFlipHs=e._maskAssetFlipHs,this._maskAssetFlipVs=e._maskAssetFlipVs),this._color=i,this._alignBottom=n}return Object(a.a)(t,[{key:"addMask",value:function(t,e,i,n){this._maskAssetNames.push(t),this._maskAssetLocations.push(e),this._maskAssetFlipHs.push(i),this._maskAssetFlipVs.push(n)}},{key:"addAssetColumn",value:function(t){this._assetNames.push(t)}},{key:"z",get:function(){return this._z},set:function(t){this._z=t}},{key:"cornerPoints",get:function(){return this._points},set:function(t){this._points=t}},{key:"color",get:function(){return this._color}},{key:"maskAssetNames",get:function(){return this._maskAssetNames}},{key:"maskAssetLocations",get:function(){return this._maskAssetLocations}},{key:"maskAssetFlipHs",get:function(){return this._maskAssetFlipHs}},{key:"maskAssetFlipVs",get:function(){return this._maskAssetFlipVs}},{key:"isBottomAligned",value:function(){return this._alignBottom}},{key:"assetNameColumns",get:function(){return this._assetNames}}]),t}(),MA=function(){function t(e,i,n){Object(r.a)(this,t),this._type=void 0,this._leftSideLoc=void 0,this._rightSideLoc=void 0,this._type=e,this._leftSideLoc=i,this._rightSideLoc=n}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"leftSideLoc",get:function(){return this._leftSideLoc}},{key:"rightSideLoc",get:function(){return this._rightSideLoc}}]),t}(),CA=function(){function t(e,i,n,s){Object(r.a)(this,t),this._leftSideLoc=void 0,this._rightSideLoc=void 0,this._leftSideLength=void 0,this._rightSideLength=void 0,this._leftSideLoc=e,this._rightSideLoc=i,this._leftSideLength=n,this._rightSideLength=s}return Object(a.a)(t,[{key:"leftSideLoc",get:function(){return this._leftSideLoc}},{key:"rightSideLoc",get:function(){return this._rightSideLoc}},{key:"leftSideLength",get:function(){return this._leftSideLength}},{key:"rightSideLength",get:function(){return this._rightSideLength}}]),t}(),LA=function(){function t(e,i){Object(r.a)(this,t),this._bitmap=void 0,this._timeStamp=void 0,this._bitmap=e,this._timeStamp=i}return Object(a.a)(t,[{key:"dispose",value:function(){this._bitmap=null}},{key:"bitmap",get:function(){return this._bitmap}},{key:"timeStamp",get:function(){return this._timeStamp}}]),t}(),UA=function(){function t(){Object(r.a)(this,t),this._seed=1,this._modulus=16777216,this._multiplier=69069,this._increment=5}return Object(a.a)(t,[{key:"seed",set:function(t){this._seed=t}},{key:"modulus",set:function(t){t<1&&(t=1),this._modulus=t}},{key:"dispose",value:function(){}},{key:"getRandomValues",value:function(t,e,i){for(var n=[],s=0;s<t;)n.push(this.iterateScaled(e,i-e)),s++;return n}},{key:"getRandomArray",value:function(t,e){if(t>e||e>1e3)return null;for(var i=[],n=0;n<=e;)i.push(n),n++;for(var s=[],r=0;r<t;){var a=this.iterateScaled(0,i.length-1);s.push(i[a]),i.splice(a,1),r++}return s}},{key:"iterate",value:function(){var t=this._multiplier*this._seed+this._increment;return t<0&&(t=-t),t%=this._modulus,this._seed=t,t}},{key:"iterateScaled",value:function(t,e){var i=this.iterate();return e<1?t:i=t+i/this._modulus*e}}],[{key:"setSeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t._randomizer||(t._randomizer=new t),t._randomizer.seed=e}},{key:"setModulus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777216;t._randomizer||(t._randomizer=new t),t._randomizer.modulus=e}},{key:"getValues",value:function(e,i,n){return t._randomizer||(t._randomizer=new t),t._randomizer.getRandomValues(e,i,n)}},{key:"getArray",value:function(e,i){return t._randomizer||(t._randomizer=new t),t._randomizer.getRandomArray(e,i)}}]),t}();UA.DEFAULT_SEED=1,UA.DEFAULT_MODULUS=16777216,UA._randomizer=null;var PA=function(){function t(e,i,n,a,o,u,c,h){var _=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;if(Object(r.a)(this,t),this._disposed=void 0,this._randomSeed=void 0,this._origin=void 0,this._location=void 0,this._leftSide=void 0,this._rightSide=void 0,this._normal=void 0,this._secondaryNormals=void 0,this._geometryUpdateId=void 0,this._type=void 0,this._isVisible=void 0,this._bitmapTexture=void 0,this._bitmapData=void 0,this._hasTexture=void 0,this._offset=void 0,this._relativeDepth=void 0,this._color=void 0,this._rasterizer=void 0,this._maskManager=null,this._id=void 0,this._uniqueId=void 0,this._textureOffsetX=void 0,this._textureOffsetY=void 0,this._textureMaxX=void 0,this._textureMaxY=void 0,this._textures=void 0,this._activeTexture=void 0,this._useMask=void 0,this._bitmapMasks=void 0,this._rectangleMasks=void 0,this._maskChanged=void 0,this._maskBitmapData=void 0,this._bitmapMasksOld=void 0,this._rectangleMasksOld=void 0,this._cornerA=void 0,this._cornerB=void 0,this._cornerC=void 0,this._cornerD=void 0,this._width=0,this._height=0,this._canBeVisible=void 0,this._secondaryNormals=[],this._bitmapMasks=[],this._rectangleMasks=[],this._bitmapMasksOld=[],this._rectangleMasksOld=[],this._randomSeed=h,this._bitmapData=null,this._maskBitmapData=null,this._maskChanged=!1,this._activeTexture=null,this._origin=new Et,this._origin.assign(e),this._location=new Et,this._location.assign(i),this._leftSide=new Et,this._leftSide.assign(n),this._rightSide=new Et,this._rightSide.assign(a),this._normal=Et.crossProduct(this._leftSide,this._rightSide),this._normal.length>0&&this._normal.multiply(1/this._normal.length),null!=c){var v,g=Object(s.a)(c);try{for(g.s();!(v=g.n()).done;){var O=v.value;if(O){var y=new Et;y.assign(O),this._secondaryNormals.push(y)}}}catch(E){g.e(E)}finally{g.f()}}this._disposed=!1,this._isVisible=!1,this._id=null,this._hasTexture=!0,this._geometryUpdateId=-1,this._offset=new Z.g,this._relativeDepth=0,this._type=o,this._color=0,this._rasterizer=null,this._canBeVisible=!0,this._textures=new Map,this._cornerA=new Et,this._cornerB=new Et,this._cornerC=new Et,this._cornerD=new Et,this._width=0,this._height=0,this._textureOffsetX=_,this._textureOffsetY=l,this._textureMaxX=d,this._textureMaxY=f,this._useMask=u,this._uniqueId=++t._uniqueIdCounter}return Object(a.a)(t,[{key:"canBeVisible",get:function(){return this._canBeVisible},set:function(t){t!==this._canBeVisible&&(this._canBeVisible||this.resetTextureCache(),this._canBeVisible=t)}},{key:"bitmapData",get:function(){if(!this.visible||!this._bitmapData)return null;var t=aS.getTextureCache(this._bitmapData);return t||(t=Ut.generateTexture(this._bitmapData,new Z.j(0,0,this._width,this._height)),aS.addTextureCache(this._bitmapData,t)),t}},{key:"visible",get:function(){return this._isVisible&&this._canBeVisible}},{key:"offset",get:function(){return this._offset}},{key:"relativeDepth",get:function(){return this._relativeDepth}},{key:"color",get:function(){return this._color},set:function(t){this._color=t}},{key:"type",get:function(){return this._type}},{key:"leftSide",get:function(){return this._leftSide}},{key:"rightSide",get:function(){return this._rightSide}},{key:"location",get:function(){return this._location}},{key:"normal",get:function(){return this._normal}},{key:"hasTexture",get:function(){return this._hasTexture},set:function(t){this._hasTexture=t}},{key:"rasterizer",set:function(t){this._rasterizer=t}},{key:"maskManager",set:function(t){this._maskManager=t}},{key:"id",set:function(t){t!==this._id&&(this.resetTextureCache(),this._id=t)}},{key:"uniqueId",get:function(){return this._uniqueId}},{key:"dispose",value:function(){if(this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._textures){var t,e=Object(s.a)(this._textures.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&(i.bitmap&&i.bitmap.destroy(),i.dispose())}}catch(n){e.e(n)}finally{e.f()}this._textures=null}this._activeTexture=null,this._location=null,this._origin=null,this._leftSide=null,this._rightSide=null,this._normal=null,this._rasterizer=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._bitmapMasks=null,this._rectangleMasks=null,this._maskBitmapData&&(this._maskBitmapData.destroy(),this._maskBitmapData=null),this._disposed=!0}},{key:"copyBitmapData",value:function(t){return this.visible&&this._bitmapData&&t?this._bitmapData.width!==t.width||this._bitmapData.height!==t.height?null:t:null}},{key:"cacheTexture",value:function(t,e){var i=this._textures.get(t);return i&&(this._textures.delete(t),i.dispose()),this._activeTexture=e,this._textures.set(t,e),!0}},{key:"resetTextureCache",value:function(){if(this._textures&&this._textures.size){var t,e=Object(s.a)(this._textures.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._textures.clear()}this._activeTexture=null}},{key:"getTextureIdentifier",value:function(t){return this._rasterizer?this._rasterizer.getTextureIdentifier(t,this.normal):t.toString()}},{key:"needsNewTexture",value:function(t,e){if(!t)return!1;var i=this._activeTexture;return i||(i=this._textures.get(this.getTextureIdentifier(t.scale))),this.updateMaskChangeStatus(),!(!this._canBeVisible||!(!i||i.timeStamp>=0&&e>i.timeStamp||this._maskChanged))}},{key:"getTexture",value:function(t,e){if(!t)return null;var i=null;if(this.needsNewTexture(t,e)){var n=this.getTextureIdentifier(t.scale),s=this._leftSide.length*t.scale,r=this._rightSide.length*t.scale,a=t.getCoordinatePosition(this._normal),o=null;if((i=this._activeTexture?this._activeTexture:this._textures.get(n))&&(o=i.bitmap),this._rasterizer)(i=this._rasterizer.render(o,this._id,s,r,t.scale,a,this._hasTexture,this._textureOffsetX,this._textureOffsetY,this._textureMaxX,this._textureMaxY,e))&&o&&i.bitmap!==o&&o.destroy();else{var u=new Je.a;u.beginFill(16777215),u.drawRect(0,0,s,r),u.endFill(),i=new LA(u,-1)}i&&(this.updateMask(i.bitmap,t),this.cacheTexture(n,i))}else i=this._activeTexture?this._activeTexture:this._textures.get(this.getTextureIdentifier(t.scale));return i?(this._activeTexture=i,i.bitmap):null}},{key:"resolveMasks",value:function(t){if(!this._useMask)return null;for(var e=new DA;0<this._bitmapMasks.length;){var i=this._bitmapMasks[0];if(i){var n=this._maskManager.getMask(i.type);if(n){var s=n.getAssetName(t.scale);if(s){var r=t.getCoordinatePosition(this._normal),a=n.getGraphicAsset(t.scale,r);if(a){var o=this._maskBitmapData.width*(1-i.leftSideLoc/this._leftSide.length),u=this._maskBitmapData.height*(1-i.rightSideLoc/this._rightSide.length),c=new Z.g(o+a.offsetX,u+a.offsetY);e.addMask(s,c,a.flipH,a.flipV)}}}}}return e}},{key:"screenWidth",value:function(t){var e=t.getScreenPoint(new Et(0,0,0)),i=t.getScreenPoint(new Et(0,1,0));return Math.round(this._leftSide.length*Math.abs(e.x-i.x))}},{key:"getDrawingDatas",value:function(t){var e=[];if(this._isVisible){for(var i=this.resolveMasks(t),n=this._rasterizer.getLayers(this._id),r=0;r<n.length;){var a=n[r];if(a)if(this._hasTexture&&a.getMaterial()){var o=t.getCoordinatePosition(this._normal),u=a.getMaterial().getMaterialCellMatrix(o),c=new DA(i,this._color,u.isBottomAligned());UA.setSeed(this._randomSeed);var h,_=Object(s.a)(u.getColumns(this.screenWidth(t)));try{for(_.s();!(h=_.n()).done;){var l,d=h.value,f=[],v=Object(s.a)(d.getCells());try{for(v.s();!(l=v.n()).done;){var g=l.value.getAssetName(o);g&&f.push(g)}}catch(y){v.e(y)}finally{v.f()}f.length>0&&(d.isRepeated()||f.push(""),c.addAssetColumn(f))}}catch(y){_.e(y)}finally{_.f()}c.assetNameColumns.length>0&&e.push(c)}else{var O=new DA(i,this._color);e.push(O)}r++}e.length||e.push(new DA(i,this._color))}return e}},{key:"update",value:function(e,i){if(!e||this._disposed)return!1;var n=!1;if(this._geometryUpdateId!=e.updateId&&(n=!0),(!n||!this._canBeVisible)&&!this.visible)return!1;if(n){this._activeTexture=null;if(Et.cosAngle(e.directionAxis,this.normal)>-.001)return!!this._isVisible&&(this._isVisible=!1,!0);for(var s=0;s<this._secondaryNormals.length;){if(Et.cosAngle(e.directionAxis,this._secondaryNormals[s])>-.001)return!!this._isVisible&&(this._isVisible=!1,!0);s++}this.updateCorners(e);var r=e.getScreenPosition(this._origin).z,a=Math.max(this._cornerA.z,this._cornerB.z,this._cornerC.z,this._cornerD.z)-r;this._type===t.TYPE_FLOOR&&(a-=8*(this._location.z+Math.min(0,this._leftSide.z,this._rightSide.z))),this._type===t.TYPE_LANDSCAPE&&(a+=.02),this._relativeDepth=a,this._isVisible=!0,this._geometryUpdateId=e.updateId}if(n||this.needsNewTexture(e,i)){if(!this._bitmapData||this._width!==this._bitmapData.width||this._height!==this._bitmapData.height){if(this._bitmapData){if(this._bitmapData.destroy(),this._bitmapData=null,this._width<1||this._height<1)return!0}else if(this._width<1||this._height<1)return!1;var o=new Je.a;if(o.beginFill(16777215,0),o.drawRect(0,0,this._width,this._height),o.endFill(),this._bitmapData=o,!this._bitmapData)return!1}UA.setSeed(this._randomSeed);var u=this.getTexture(e,i);return u?(this.renderTexture(e,u),null!==u||n):(this.dispose(),!1)}return!1}},{key:"updateCorners",value:function(t){this._cornerA.assign(t.getScreenPosition(this._location)),this._cornerB.assign(t.getScreenPosition(Et.sum(this._location,this._rightSide))),this._cornerC.assign(t.getScreenPosition(Et.sum(Et.sum(this._location,this._leftSide),this._rightSide))),this._cornerD.assign(t.getScreenPosition(Et.sum(this._location,this._leftSide))),this._offset=t.getScreenPoint(this._origin),this._cornerA.x=Math.round(this._cornerA.x),this._cornerA.y=Math.round(this._cornerA.y),this._cornerB.x=Math.round(this._cornerB.x),this._cornerB.y=Math.round(this._cornerB.y),this._cornerC.x=Math.round(this._cornerC.x),this._cornerC.y=Math.round(this._cornerC.y),this._cornerD.x=Math.round(this._cornerD.x),this._cornerD.y=Math.round(this._cornerD.y),this._offset.x=Math.round(this._offset.x),this._offset.y=Math.round(this._offset.y);var e=Math.min(this._cornerA.x,this._cornerB.x,this._cornerC.x,this._cornerD.x),i=Math.max(this._cornerA.x,this._cornerB.x,this._cornerC.x,this._cornerD.x),n=Math.min(this._cornerA.y,this._cornerB.y,this._cornerC.y,this._cornerD.y),s=Math.max(this._cornerA.y,this._cornerB.y,this._cornerC.y,this._cornerD.y);i-=e,this._offset.x=this._offset.x-e,this._cornerA.x=this._cornerA.x-e,this._cornerB.x=this._cornerB.x-e,this._cornerC.x=this._cornerC.x-e,this._cornerD.x=this._cornerD.x-e,s-=n,this._offset.y=this._offset.y-n,this._cornerA.y=this._cornerA.y-n,this._cornerB.y=this._cornerB.y-n,this._cornerC.y=this._cornerC.y-n,this._cornerD.y=this._cornerD.y-n,this._width=i,this._height=s}},{key:"renderTexture",value:function(e,i){if(null!=this._cornerA&&null!=this._cornerB&&null!=this._cornerC&&null!=this._cornerD&&null!=i&&null!=this._bitmapData){var n=this._cornerD.x-this._cornerC.x,s=this._cornerD.y-this._cornerC.y,r=this._cornerB.x-this._cornerC.x,a=this._cornerB.y-this._cornerC.y;this._type!=t.TYPE_WALL&&this._type!=t.TYPE_LANDSCAPE||(Math.abs(r-i.width)<=1&&(r=i.width),Math.abs(a-i.width)<=1&&(a=i.width),Math.abs(n-i.height)<=1&&(n=i.height),Math.abs(s-i.height)<=1&&(s=i.height));var o=r/i.width,u=a/i.width,c=n/i.height,h=s/i.height,_=new Z.d;_.a=o,_.b=u,_.c=c,_.d=h,_.translate(this._cornerC.x,this._cornerC.y),this.draw(i,_)}}},{key:"draw",value:function(t,e){var i=t.clone();i.transform.setFromMatrix(e),this._bitmapData=i}},{key:"resetBitmapMasks",value:function(){!this._disposed&&this._useMask&&this._bitmapMasks.length&&(this._maskChanged=!0,this._bitmapMasks=[])}},{key:"addBitmapMask",value:function(t,e,i){if(!this._useMask)return!1;for(var n=0;n<this._bitmapMasks.length;){var s=this._bitmapMasks[n];if(s&&s.type===t&&s.leftSideLoc===e&&s.rightSideLoc===i)return!1;n++}var r=new MA(t,e,i);return this._bitmapMasks.push(r),this._maskChanged=!0,!0}},{key:"resetRectangleMasks",value:function(){this._useMask&&this._rectangleMasks.length&&(this._maskChanged=!0,this._rectangleMasks=[])}},{key:"addRectangleMask",value:function(t,e,i,n){if(this._useMask){var r,a=Object(s.a)(this._rectangleMasks);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o&&(o.leftSideLoc===t&&o.rightSideLoc===e&&o.leftSideLength===i&&o.rightSideLength===n))return!1}}catch(c){a.e(c)}finally{a.f()}var u=new CA(t,e,i,n);return this._rectangleMasks.push(u),this._maskChanged=!0,!0}return!1}},{key:"updateMaskChangeStatus",value:function(){if(this._maskChanged){var t,e=!0;if(this._bitmapMasks.length===this._bitmapMasksOld.length){var i,n=Object(s.a)(this._bitmapMasks);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){t=!1;var a,o=Object(s.a)(this._bitmapMasksOld);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u&&(u.type===r.type&&u.leftSideLoc===r.leftSideLoc&&u.rightSideLoc===r.rightSideLoc)){t=!0;break}}}catch(c){o.e(c)}finally{o.f()}if(!t){e=!1;break}}}}catch(c){n.e(c)}finally{n.f()}}else e=!1;this._rectangleMasks.length>this._rectangleMasksOld.length&&(e=!1),e&&(this._maskChanged=!1)}}},{key:"updateMask",value:function(t,e){if(t&&e&&this._useMask&&(this._bitmapMasks.length||this._rectangleMasks.length||this._maskChanged)&&this._maskManager){var i=t.width,n=t.height;if(this.updateMaskChangeStatus(),!this._maskBitmapData||this._maskBitmapData.width!==i||this._maskBitmapData.height!==n){this._maskBitmapData&&(this._maskBitmapData.destroy(),this._maskBitmapData=null);var s=new Je.a;s.beginFill(16777215,0).drawRect(0,0,i,n).endFill(),this._maskBitmapData=s,this._maskChanged=!0}if(this._maskChanged){this._bitmapMasksOld=[],this._rectangleMasksOld=[],this._maskBitmapData&&this._maskBitmapData.beginFill(16777215,0).drawRect(0,0,i,n).endFill(),this.resetTextureCache(t);for(var r=e.getCoordinatePosition(this._normal),a=null,o=0,u=0,c=0;c<this._bitmapMasks.length;){var h=this._bitmapMasks[c];h&&(a=h.type,o=this._maskBitmapData.width-this._maskBitmapData.width*h.leftSideLoc/this._leftSide.length,u=this._maskBitmapData.height-this._maskBitmapData.height*h.rightSideLoc/this._rightSide.length,this._maskManager.updateMask(this._maskBitmapData,a,e.scale,r,o,u),this._bitmapMasksOld.push(new MA(a,h.leftSideLoc,h.rightSideLoc))),c++}for(c=0;c<this._rectangleMasks.length;){var _=this._rectangleMasks[c];if(_){o=this._maskBitmapData.width-this._maskBitmapData.width*_.leftSideLoc/this._leftSide.length,u=this._maskBitmapData.height-this._maskBitmapData.height*_.rightSideLoc/this._rightSide.length;var l=this._maskBitmapData.width*_.leftSideLength/this._leftSide.length,d=this._maskBitmapData.height*_.rightSideLength/this._rightSide.length;this._maskBitmapData.beginFill(16711680).drawRect(o-l,u-d,l,d).endFill(),this._rectangleMasksOld.push(new CA(_.leftSideLength,_.rightSideLoc,_.leftSideLength,_.rightSideLength))}c++}this._maskChanged=!1}this.combineTextureMask(t,this._maskBitmapData)}}},{key:"combineTextureMask",value:function(t,e){if(t&&e){var i=Ut.generateCanvas(e),n=Ut.generateCanvas(t),s=n.getContext("2d");s.drawImage(i,0,0);for(var r=s.getImageData(0,0,n.width,n.height),a=r.data,o=0;o<a.length;o+=4){var u=a[o],h=a[o+1],_=a[o+2];a[o+3];u||h||_||(a[o+3]=0)}s.putImageData(r,0,0);var l=c.t.from(n);l&&t.clear().beginTextureFill({texture:l}).drawRect(0,0,l.width,l.height).endFill()}}}],[{key:"blend",value:function(t,e){return 0}}]),t}();PA.ZERO_POINT=new Z.g(0,0),PA.TYPE_UNDEFINED=0,PA.TYPE_WALL=1,PA.TYPE_FLOOR=2,PA.TYPE_LANDSCAPE=3,PA._uniqueIdCounter=1;var wA=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;Object(r.a)(this,t),this._asset=void 0,this._normalMinX=void 0,this._normalMaxX=void 0,this._normalMinY=void 0,this._normalMaxY=void 0,this._normalMinX=i,this._normalMaxX=n,this._normalMinY=s,this._normalMaxY=a,this._asset=e}return Object(a.a)(t,[{key:"asset",get:function(){return this._asset}},{key:"normalMinX",get:function(){return this._normalMinX}},{key:"normalMaxX",get:function(){return this._normalMaxX}},{key:"normalMinY",get:function(){return this._normalMinY}},{key:"normalMaxY",get:function(){return this._normalMaxY}},{key:"dispose",value:function(){this._asset=null}}]),t}();wA.MIN_NORMAL_COORDINATE_VALUE=-1,wA.MAX_NORMAL_COORDINATE_VALUE=1;var FA=function(){function t(){Object(r.a)(this,t),this._bitmaps=void 0,this._bitmaps=[]}return Object(a.a)(t,[{key:"dispose",value:function(){var t,e=Object(s.a)(this._bitmaps);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._bitmaps=null}},{key:"addBitmap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._bitmaps.push(new wA(t,e,i,n,s))}},{key:"getAsset",value:function(t){if(!t)return null;var e,i=Object(s.a)(this._bitmaps);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&(t.x>=n.normalMinX&&t.x<=n.normalMaxX&&t.y>=n.normalMinY&&t.y<=n.normalMaxY))return n.asset}}catch(r){i.e(r)}finally{i.f()}return null}}]),t}();FA.MIN_NORMAL_COORDINATE_VALUE=-1,FA.MAX_NORMAL_COORDINATE_VALUE=1;var xA=function(){function t(){Object(r.a)(this,t),this._maskVisualizations=void 0,this._sizes=void 0,this._assetNames=void 0,this._lastMaskVisualization=void 0,this._lastSize=void 0,this._sizes=[],this._maskVisualizations=new Map,this._assetNames=new Map,this._lastMaskVisualization=null,this._lastSize=-1}return Object(a.a)(t,[{key:"dispose",value:function(){if(this._maskVisualizations){var t,e=Object(s.a)(this._maskVisualizations.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._maskVisualizations=null}this._lastMaskVisualization=null,this._sizes=null}},{key:"createMaskVisualization",value:function(t){if(this._maskVisualizations.get(t))return null;var e=new FA;return this._maskVisualizations.set(t,e),this._sizes.push(t),this._sizes.sort(),e}},{key:"getSizeIndex",value:function(t){for(var e=0;1<this._sizes.length;){if(this._sizes[1]>t){this._sizes[1]-t<t-this._sizes[0]&&(e=1);break}e=1}return e}},{key:"getMaskVisualization",value:function(t){if(t===this._lastSize)return this._lastMaskVisualization;var e=this.getSizeIndex(t);return e<this._sizes.length?this._lastMaskVisualization=this._maskVisualizations.get(this._sizes[e]):this._lastMaskVisualization=null,this._lastSize=t,this._lastMaskVisualization}},{key:"getGraphicAsset",value:function(t,e){var i=this.getMaskVisualization(t);return i?i.getAsset(e):null}},{key:"getAssetName",value:function(t){return this._assetNames&&this._assetNames.get(t)||null}},{key:"setAssetName",value:function(t,e){this._assetNames&&this._assetNames.set(t,e)}}]),t}(),BA=function(){function t(){Object(r.a)(this,t),this._assetCollection=void 0,this._masks=void 0,this._data=void 0,this._assetCollection=null,this._masks=new Map,this._data=null}return Object(a.a)(t,[{key:"data",get:function(){return this._data}},{key:"dispose",value:function(){if(this._assetCollection=null,this._data=null,this._masks&&this._masks.size){var t,e=Object(s.a)(this._masks.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._masks.clear()}}},{key:"initialize",value:function(t){this._data=t}},{key:"initializeAssetCollection",value:function(t){this.data&&(this._assetCollection=t,this.parseMasks(this.data,t))}},{key:"parseMasks",value:function(t,e){if(t&&e&&t.masks&&t.masks.length)for(var i=0;i<t.masks.length;){var n=t.masks[i];if(n){var s=n.id;if(this._masks.get(s))continue;var r=new xA;if(n.visualizations&&n.visualizations.length)for(var a=0;a<n.visualizations.length;){var o=n.visualizations[a];if(o){var u=o.size,c=r.createMaskVisualization(u);if(c){var h=this.parseMaskBitmaps(o.bitmaps,c,e);r.setAssetName(u,h)}}a++}this._masks.set(s,r)}i++}}},{key:"parseMaskBitmaps",value:function(t,e,i){if(!t||!t.length)return null;var n,r=null,a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var u=o.assetName,c=i.getAsset(u);if(c){var h=FA.MIN_NORMAL_COORDINATE_VALUE,_=FA.MAX_NORMAL_COORDINATE_VALUE,l=FA.MIN_NORMAL_COORDINATE_VALUE,d=FA.MAX_NORMAL_COORDINATE_VALUE;void 0!==o.normalMinX&&(h=o.normalMinX),void 0!==o.normalMaxX&&(_=o.normalMaxX),void 0!==o.normalMinY&&(l=o.normalMinY),void 0!==o.normalMaxY&&(d=o.normalMaxY),c.flipH||(r=u),e.addBitmap(c,h,_,l,d)}}}}catch(f){a.e(f)}finally{a.f()}return r}},{key:"updateMask",value:function(t,e,i,n,s,r){var a=this._masks.get(e);if(!a)return!0;var o=a.getGraphicAsset(i,n);if(!o)return!0;var u=o.texture;if(!u)return!0;var c=new Z.g(s+o.offsetX,r+o.offsetY),h=new Z.d,_=1,l=1,d=0,f=0;return o.flipH&&(_=-1,d=-u.width),o.flipV&&(l=-1,f=-u.height),h.scale(_,l),h.translate(c.x+d,c.y+f),t.beginTextureFill({texture:u,matrix:h}).drawRect(h.tx,h.ty,u.width,u.height).endFill(),!0}},{key:"getMask",value:function(t){return this._masks&&this._masks.size&&this._masks.get(t)||null}}]),t}(),GA=function(){function t(e,i,n,s,a){Object(r.a)(this,t),this._x=void 0,this._y=void 0,this._speedX=void 0,this._speedY=void 0,this._bitmapData=void 0,this._x=e,this._y=i,this._speedX=n,this._speedY=s,this._bitmapData=a,isNaN(this._x)&&(this._x=0),isNaN(this._y)&&(this._y=0),isNaN(this._speedX)&&(this._speedX=0),isNaN(this._speedY)&&(this._speedY=0)}return Object(a.a)(t,[{key:"bitmapData",get:function(){return this._bitmapData}},{key:"dispose",value:function(){this._bitmapData=null}},{key:"getPosition",value:function(t,e,i,n,s){var r=this._x,a=this._y;i>0&&(r+=this._speedX/i*s/1e3),n>0&&(a+=this._speedY/n*s/1e3);var o=r%1*t,u=a%1*e;return new Z.g(o,u)}}]),t}(),HA=function(){function t(e,i){if(Object(r.a)(this,t),this._color=0,this._bitmapData=null,this._isDisposed=!1,this._items=void 0,this._color=0,this._bitmapData=null,this._isDisposed=!1,this._items=[],e&&i){var n,a=Object(s.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var u=o.asset;if(u){var c=i.getAsset(u);c&&this._items.push(new GA(o.x,o.y,o.speedX,o.speedY,c))}}}}catch(h){a.e(h)}finally{a.f()}}}return Object(a.a)(t,[{key:"disposed",get:function(){return this._isDisposed}},{key:"dispose",value:function(){if(this._isDisposed=!0,this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._items){var t,e=Object(s.a)(this._items);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._items=[]}}},{key:"clearCache",value:function(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}},{key:"render",value:function(t,e,i,n,s,r,a,o,u,c,h){if(null!=t&&t.width==e&&t.height==i||(null==this._bitmapData||this._bitmapData.width!=e||this._bitmapData.height!=i?(null!=this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=(new Je.a).drawRect(0,0,e,i)):this._bitmapData.beginFill(16777215).drawRect(0,0,this._bitmapData.width,this._bitmapData.height).endFill(),t=this._bitmapData),a>0&&o>0)for(var _=0;_<this._items.length;){var l=this._items[_];if(null!=l){var d=l.getPosition(a,o,u,c,h);if(d.x=d.x-s,d.y=d.y-r,l.bitmapData)if(d.x>0&&d.x+l.bitmapData.width<t.width)t.beginFill(65280).beginTextureFill({texture:l.bitmapData.texture,matrix:new Z.d(1,0,0,1,d.x,d.y)}).drawRect(d.x,d.y,l.bitmapData.width,l.bitmapData.height).endFill();else if(d.x>0){var f=t.width-d.x;t.beginFill(65280).beginTextureFill({texture:l.bitmapData.texture,matrix:new Z.d(1,0,0,1,d.x,d.y)}).drawRect(d.x,d.y,f,l.bitmapData.height).endFill()}else{var v=l.bitmapData.width+d.x;t.beginFill(65280).beginTextureFill({texture:l.bitmapData.texture,matrix:new Z.d(1,0,0,1,d.x,d.y)}).drawRect(0,d.y,v,l.bitmapData.height).endFill()}}_++}return t}}]),t}(),VA=function(){function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this._material=void 0,this._color=void 0,this._offset=void 0,this._align=void 0,this._bitmapData=void 0,this._isDisposed=void 0,this._material=e,this._offset=s,this._align=n,this._color=i,this._bitmapData=null,this._isDisposed=!1}return Object(a.a)(t,[{key:"offset",get:function(){return this._offset}},{key:"align",get:function(){return this._align}},{key:"disposed",get:function(){return this._isDisposed}},{key:"dispose",value:function(){this._isDisposed=!0,this._material=null,this.clearCache()}},{key:"clearCache",value:function(){this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null)}},{key:"render",value:function(e,i,n,s,r,a,o){e&&e.width===i&&e.height===n||(e=null);var u=null;if(this._material)(u=this._material.render(null,i,n,s,r,a,o+this.offset,this.align===t.ALIGN_TOP))&&u!==e&&(this._bitmapData&&this._bitmapData.destroy(),this._bitmapData=u.clone(),u=this._bitmapData);else if(e)e.beginFill(16777215).drawRect(0,0,i,n).endFill(),u=e;else{if(this._bitmapData&&this._bitmapData.width===i&&this._bitmapData.height===n)return this._bitmapData;this._bitmapData&&this._bitmapData.destroy();var c=(new Je.a).beginFill(16777215).drawRect(0,0,i,n).endFill();this._bitmapData=c,u=this._bitmapData}if(u&&(u.tint=this._color,e&&u!==e)){var h=aS.getTextureCache(u);h||(h=Ut.generateTexture(u,new Z.j(0,0,i,n)),aS.addTextureCache(u,h)),e.beginTextureFill({texture:h}).drawRect(0,0,i,n).endFill(),u=e}return u}},{key:"getMaterial",value:function(){return this._material}},{key:"getColor",value:function(){return this._color}}]),t}();VA.DEFAULT_OFFSET=0,VA.ALIGN_TOP=1,VA.ALIGN_BOTTOM=2,VA.ALIGN_DEFAULT=VA.ALIGN_TOP;var zA=function(){function t(e,i,n){Object(r.a)(this,t),this._layers=void 0,this._geometry=void 0,this._cachedBitmapData=void 0,this._cachedBitmapNormal=void 0,this._isCached=void 0,this._hasAnimationLayers=void 0,this._layers=[],this._geometry=n,this._cachedBitmapData=null,this._cachedBitmapNormal=new Et,this._isCached=!1,this._hasAnimationLayers=!1,i<0&&(i=0);for(var s=0;s<i;)this._layers.push(null),s++}return Object(a.a)(t,[{key:"geometry",get:function(){return this._geometry}},{key:"hasAnimationLayers",get:function(){return this._hasAnimationLayers}},{key:"dispose",value:function(){if(this._layers&&this._layers.length){var t,e=Object(s.a)(this._layers);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._layers=null}this._geometry=null,this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}},{key:"clearCache",value:function(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&this._cachedBitmapNormal.assign(new Et),this._layers&&this._layers.length){var t,e=Object(s.a)(this._layers);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(i)i.clearCache()}}catch(n){e.e(n)}finally{e.f()}}this._isCached=!1}}},{key:"setLayer",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(t<0||t>this._layers.length)return!1;var r=this._layers[t];return r&&r.dispose(),r=new VA(e,i,n,s),this._layers[t]=r,!0}},{key:"setAnimationLayer",value:function(t,e,i){if(t<0||t>this._layers.length)return!1;var n=this._layers[t];return n&&n.dispose(),n=new HA(e,i),this._layers[t]=n,this._hasAnimationLayers=!0,!0}},{key:"getLayers",value:function(){return this._layers}},{key:"render",value:function(t,e,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;if(e<1&&(e=1),i<1&&(i=1),t&&t.width===e&&t.height===i||(t=null),this._cachedBitmapData)if(this._cachedBitmapData.width===e&&this._cachedBitmapData.height===i&&Et.isEqual(this._cachedBitmapNormal,n)){if(!this.hasAnimationLayers)return t?(t.addChild(this._cachedBitmapData),t):this._cachedBitmapData}else this._cachedBitmapData.destroy(),this._cachedBitmapData=null;if(this._isCached=!0,this._cachedBitmapData?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,e,i).endFill():this._cachedBitmapData=(new Je.a).beginFill(16777215).drawRect(0,0,e,i).endFill(),t||(t=this._cachedBitmapData),this._cachedBitmapNormal.assign(n),this._layers&&this._layers.length){var d,f=Object(s.a)(this._layers);try{for(f.s();!(d=f.n()).done;){var v=d.value;v&&(v instanceof VA?v.render(t,e,i,n,r,a,o):v instanceof HA&&v.render(t,e,i,n,a,o,u,c,h,_,l))}}catch(g){f.e(g)}finally{f.f()}}return t&&t!==this._cachedBitmapData?(this._cachedBitmapData.addChild(t.clone()),t):this._cachedBitmapData}}]),t}(),YA=function(){function t(){Object(r.a)(this,t),this._planeVisualizations=void 0,this._sizes=void 0,this._lastPlaneVisualization=void 0,this._lastSize=void 0,this._planeVisualizations=new Map,this._sizes=[],this._lastPlaneVisualization=null,this._lastSize=-1}return Object(a.a)(t,[{key:"isStatic",value:function(t){return!0}},{key:"dispose",value:function(){var t,e=Object(s.a)(this._planeVisualizations.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._planeVisualizations=null,this._lastPlaneVisualization=null,this._sizes=null,this._lastSize=-1}},{key:"clearCache",value:function(){var t,e=Object(s.a)(this._planeVisualizations.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clearCache()}}catch(n){e.e(n)}finally{e.f()}}},{key:"createPlaneVisualization",value:function(t,e,i){if(this._planeVisualizations.get(t.toString()))return null;var n=new zA(t,e,i);return this._planeVisualizations.set(t.toString(),n),this._sizes.push(t),this._sizes.sort(),n}},{key:"getSizeIndex",value:function(t){for(var e=0,i=1;i<this._sizes.length;){if(this._sizes[i]>t){this._sizes[i]-t<t-this._sizes[i-1]&&(e=i);break}e=i,i++}return e}},{key:"getPlaneVisualization",value:function(t){if(t===this._lastSize)return this._lastPlaneVisualization;var e=this.getSizeIndex(t);return e<this._sizes.length?this._lastPlaneVisualization=this._planeVisualizations.get(this._sizes[e].toString()):this._lastPlaneVisualization=null,this._lastSize=t,this._lastPlaneVisualization}},{key:"getLayers",value:function(){return this.getPlaneVisualization(this._lastSize).getLayers()}}]),t}(),WA=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"render",value:function(t,e,i,n,s,r,a,o){var u=this.getPlaneVisualization(n);if(!u||!u.geometry)return null;var c=u.geometry.getScreenPoint(new Et(0,0,0)),h=u.geometry.getScreenPoint(new Et(0,i/u.geometry.scale,0)),_=u.geometry.getScreenPoint(new Et(e/u.geometry.scale,0,0)),l=0,d=0;if(c&&h&&_){e=Math.round(Math.abs(c.x-_.x)),i=Math.round(Math.abs(c.x-h.x));var f=c.x-u.geometry.getScreenPoint(new Et(1,0,0)).x;l=a*Math.trunc(Math.abs(f)),d=o*Math.trunc(Math.abs(f))}return u.render(t,e,i,s,r,l,d)}}]),i}(YA);WA.DEFAULT_COLOR=16777215,WA.HORIZONTAL_ANGLE_DEFAULT=45,WA.VERTICAL_ANGLE_DEFAULT=30;var KA=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Object(r.a)(this,t),this._cells=void 0,this._repeatMode=void 0,this._width=void 0,this._cachedTexture=void 0,this._cachedBitmapData=void 0,this._cachedBitmapNormal=void 0,this._cachedBitmapDataOffsetX=void 0,this._cachedBitmapDataOffsetY=void 0,this._isCached=void 0,this._isStatic=void 0,this._cells=[],this._repeatMode=n,this._width=e<1?1:e,this._cachedBitmapData=null,this._cachedBitmapNormal=null,this._cachedBitmapDataOffsetX=0,this._cachedBitmapDataOffsetY=0,this._isCached=!1,this._isStatic=!0,i&&i.length)for(var s=0;s<i.length;){var a=i[s];a&&(this._cells.push(a),a.isStatic||(this._isStatic=!1)),s++}}return Object(a.a)(t,[{key:"isStatic",get:function(){return this._isStatic}},{key:"isRepeated",value:function(){return!(this._repeatMode===t.REPEAT_MODE_NONE)}},{key:"width",get:function(){return this._width}},{key:"dispose",value:function(){if(this._cells&&this._cells.length){var t,e=Object(s.a)(this._cells);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._cells=null}this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}},{key:"clearCache",value:function(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._cells&&this._cells.length){var t,e=Object(s.a)(this._cells);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clearCache()}}catch(n){e.e(n)}finally{e.f()}}this._isCached=!1}}},{key:"render",value:function(e,i,n,s){if(this._repeatMode==t.REPEAT_MODE_NONE&&(e=this.getCellsHeight(this._cells,i)),this._cachedBitmapNormal||(this._cachedBitmapNormal=new Et),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.height===e&&Et.isEqual(this._cachedBitmapNormal,i)&&this._cachedBitmapDataOffsetX===n&&this._cachedBitmapDataOffsetY===s)return this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.height===e?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,this._cachedBitmapData.width,e).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapData||(this._cachedBitmapData=(new Je.a).beginFill(16777215).drawRect(0,0,this._width,e).endFill()),this._cachedBitmapNormal.assign(i),this._cachedBitmapDataOffsetX=n,this._cachedBitmapDataOffsetY=s,!this._cells.length)return this._cachedBitmapData;switch(this._repeatMode){case t.REPEAT_MODE_NONE:this.renderRepeatNone(i);break;case t.REPEAT_MODE_BORDERS:console.log("REPEAT_MODE_BORDERS");break;case t.REPEAT_MODE_CENTER:console.log("REPEAT_MODE_CENTER");break;case t.REPEAT_MODE_FIRST:console.log("REPEAT_MODE_FIRST");break;case t.REPEAT_MODE_LAST:console.log("REPEAT_MODE_LAST");break;default:this.renderRepeatAll(i,n,s)}return this._cachedBitmapData}},{key:"getCellsHeight",value:function(t,e){if(!t||!t.length)return 0;for(var i=0,n=0;n<t.length;){var s=t[n];s&&(i+=s.getHeight(e)),n++}return i}},{key:"renderCells",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(!t||!t.length||!this._cachedBitmapData)return e;for(var a=0;a<t.length;){var o=null;if(o=i?t[a]:t[t.length-1-a]){var u=o.render(n,s,r);if(u&&(i||(e-=u.height),u.y=e,this._cachedBitmapData.addChild(u),i&&(e+=u.height),i&&e>=this._cachedBitmapData.height||!i&&e<=0))return e}a++}return e}},{key:"renderRepeatNone",value:function(t){this._cells.length&&this._cachedBitmapData&&this.renderCells(this._cells,0,!0,t)}},{key:"renderRepeatAll",value:function(t,e,i){if(this._cells.length&&this._cachedBitmapData)for(var n=0;n<this._cachedBitmapData.height;)if(!(n=this.renderCells(this._cells,n,!0,t,e,i)))return}},{key:"getCells",value:function(){return this._cells}}]),t}();KA.REPEAT_MODE_NONE=0,KA.REPEAT_MODE_ALL=1,KA.REPEAT_MODE_BORDERS=2,KA.REPEAT_MODE_CENTER=3,KA.REPEAT_MODE_FIRST=4,KA.REPEAT_MODE_LAST=5;var XA=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;Object(r.a)(this,t),this._columns=void 0,this._repeatMode=1,this._align=1,this._cachedBitmapData=void 0,this._cachedBitmapNormal=null,this._cachedBitmapHeight=0,this._isCached=!1,this._isStatic=!0,this._normalMinX=-1,this._normalMaxX=1,this._normalMinY=-1,this._normalMaxY=1,this._columns=[],e<1&&(e=1);for(var c=0;c<e;)this._columns.push(null),c++;this._repeatMode=i,this._align=n,this._normalMinX=s,this._normalMaxX=a,this._normalMinY=o,this._normalMaxY=u,this._repeatMode==t.REPEAT_MODE_RANDOM&&(this._isStatic=!1)}return Object(a.a)(t,[{key:"normalMinX",get:function(){return this._normalMinX}},{key:"normalMaxX",get:function(){return this._normalMaxX}},{key:"normalMinY",get:function(){return this._normalMinY}},{key:"normalMaxY",get:function(){return this._normalMaxY}},{key:"isBottomAligned",value:function(){return this._align===t.ALIGN_BOTTOM}},{key:"isStatic",get:function(){return this._isStatic}},{key:"dispose",value:function(){this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal=null)}},{key:"clearCache",value:function(){if(this._isCached){if(this._cachedBitmapData&&(this._cachedBitmapData.destroy(),this._cachedBitmapData=null),this._cachedBitmapNormal&&(this._cachedBitmapNormal.x=0,this._cachedBitmapNormal.y=0,this._cachedBitmapNormal.z=0),this._columns&&this._columns.length){var t,e=Object(s.a)(this._columns);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clearCache()}}catch(n){e.e(n)}finally{e.f()}}this._isCached=!1}}},{key:"createColumn",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(t<0||t>=this._columns.length)return!1;var s=new KA(e,i,n),r=this._columns[t];return r&&r.dispose(),this._columns[t]=s,s&&!s.isStatic&&(this._isStatic=!1),!0}},{key:"render",value:function(e,i,n,s,r,a,o,u){if(i<1&&(i=1),n<1&&(n=1),e&&e.width===i&&e.height===n||(e=null),this._cachedBitmapNormal||(this._cachedBitmapNormal=new Et),this.isStatic){if(this._cachedBitmapData){if(this._cachedBitmapData.width===i&&this._cachedBitmapData.height==n&&Et.isEqual(this._cachedBitmapNormal,s))return e?(this.copyCachedBitmapOnCanvas(e,this._cachedBitmapHeight,o,u),e):this._cachedBitmapData;this._cachedBitmapData.destroy(),this._cachedBitmapData=null}}else this._cachedBitmapData&&(this._cachedBitmapData.width===i&&this._cachedBitmapData.height===n?this._cachedBitmapData.beginFill(16777215).drawRect(0,0,i,n).endFill():(this._cachedBitmapData.destroy(),this._cachedBitmapData=null));if(this._isCached=!0,this._cachedBitmapNormal.assign(s),!r){if(this._cachedBitmapHeight=n,this._cachedBitmapData)this._cachedBitmapData.beginFill(16777215).drawRect(0,0,i,n).endFill();else{var c=(new Je.a).beginFill(16777215).drawRect(0,0,i,n).endFill();this._cachedBitmapData=c}return e?(this.copyCachedBitmapOnCanvas(e,n,o,u),e):this._cachedBitmapData}if(!this._cachedBitmapData){this._cachedBitmapHeight=n;var h=(new Je.a).beginFill(16777215).drawRect(0,0,i,n).endFill();this._cachedBitmapData=h}for(var _=[],l=0;l<this._columns.length;){var d=this._columns[l];if(d){var f=d.render(n,s,a,o);f&&_.push(f)}l++}if(!_.length)return e||this._cachedBitmapData;var v=0;switch(this._repeatMode){case t.REPEAT_MODE_BORDERS:case t.REPEAT_MODE_CENTER:case t.REPEAT_MODE_FIRST:case t.REPEAT_MODE_LAST:case t.REPEAT_MODE_RANDOM:break;default:v=this.renderRepeatAll(this._cachedBitmapData,_)}return this._cachedBitmapHeight=v,e?(this.copyCachedBitmapOnCanvas(e,v,o,u),e):this._cachedBitmapData}},{key:"copyCachedBitmapOnCanvas",value:function(e,i,n,s){if(e&&this._cachedBitmapData&&e!==this._cachedBitmapData){var r;s||(n=e.height-i-n),r=this._align==t.ALIGN_TOP?new Z.j(0,0,this._cachedBitmapData.width,this._cachedBitmapHeight):new Z.j(0,this._cachedBitmapData.height-this._cachedBitmapHeight,this._cachedBitmapData.width,this._cachedBitmapHeight);var a=Ut.generateTexture(this._cachedBitmapData,r);a&&e.beginTextureFill({texture:a}).drawRect(0,n,r.width,r.height).endFill()}}},{key:"getColumnsWidth",value:function(t){if(!t||!t.length)return 0;var e,i=0,n=Object(s.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&(i+=r.width)}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"renderColumns",value:function(e,i,n,s){if(!e||!i||!i.length)return new Z.g(n,0);for(var r=0,a=0;a<i.length;){var o=s?i[a]:i[i.length-1-a];if(o){s||(n-=o.width);var u=0;this._align==t.ALIGN_BOTTOM&&(u=e.height-o.height);var c=aS.getTextureCache(o);if(c||(c=Ut.generateTexture(o,new Z.j(0,0,o.width,o.height)),aS.addTextureCache(o,c)),e.beginTextureFill({texture:c}),e.drawRect(n,u,c.width,c.height),e.endFill(),o.height>r&&(r=o.height),s&&(n+=o.width),s&&n>=e.width||!s&&n<=0)return new Z.g(n,r)}a++}return new Z.g(n,r)}},{key:"renderRepeatAll",value:function(t,e){if(!t||!e||!e.length)return 0;this.getColumnsWidth(e);for(var i=0,n=0;i<t.width;){var s=this.renderColumns(t,e,i,!0);if(i=s.x,s.y>n&&(n=s.y),!s.x)return n}return n}},{key:"getColumns",value:function(e){if(this._repeatMode===t.REPEAT_MODE_RANDOM){for(var i=[],n=0;n<e;){var s=this._columns[t.nextRandomColumnIndex(this._columns.length)];if(s){if(i.push(s),!(s.width>1))break;n+=s.width}}return i}return this._columns}}],[{key:"nextRandomColumnIndex",value:function(t){return UA.getValues(1,0,17631*t)[0]%t}}]),t}();XA.REPEAT_MODE_ALL=1,XA.REPEAT_MODE_BORDERS=2,XA.REPEAT_MODE_CENTER=3,XA.REPEAT_MODE_FIRST=4,XA.REPEAT_MODE_LAST=5,XA.REPEAT_MODE_RANDOM=6,XA.REPEAT_MODE_DEFAULT=XA.REPEAT_MODE_ALL,XA.MIN_NORMAL_COORDINATE_VALUE=-1,XA.MAX_NORMAL_COORDINATE_VALUE=1,XA.ALIGN_TOP=1,XA.ALIGN_BOTTOM=2,XA.ALIGN_DEFAULT=XA.ALIGN_TOP;var qA=function(){function t(){Object(r.a)(this,t),this._planeMaterialItems=void 0,this._isCached=void 0,this._planeMaterialItems=[],this._isCached=!1}return Object(a.a)(t,[{key:"dispose",value:function(){if(this._planeMaterialItems&&this._planeMaterialItems.length){var t,e=Object(s.a)(this._planeMaterialItems);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._planeMaterialItems=null}this._isCached=!1}},{key:"clearCache",value:function(){if(this._isCached){if(this._planeMaterialItems&&this._planeMaterialItems.length){var t,e=Object(s.a)(this._planeMaterialItems);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clearCache()}}catch(n){e.e(n)}finally{e.f()}}this._isCached=!1}}},{key:"addMaterialCellMatrix",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=new XA(t,e,i,n,s,r,a);return this._planeMaterialItems.push(o),o}},{key:"getMaterialCellMatrix",value:function(t){if(!t)return null;if(this._planeMaterialItems&&this._planeMaterialItems.length){var e,i=Object(s.a)(this._planeMaterialItems);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&(t.x>=n.normalMinX&&t.x<=n.normalMaxX&&t.y>=n.normalMinY&&t.y<=n.normalMaxY))return n}}catch(r){i.e(r)}finally{i.f()}}return null}},{key:"render",value:function(t,e,i,n,s,r,a,o){e<1&&(e=1),i<1&&(i=1);var u=this.getMaterialCellMatrix(n);return u?(this._isCached=!0,u.render(t,e,i,n,s,r,a,o)):null}}]),t}();qA.MIN_NORMAL_COORDINATE_VALUE=-1,qA.MAX_NORMAL_COORDINATE_VALUE=1;var QA=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Object(r.a)(this,t),this._cachedSprite=void 0,this._texture=void 0,this._extraItemOffsets=void 0,this._extraItemAssets=void 0,this._extraItemCount=0,this._cachedSprite=null,this._texture=e,this._extraItemOffsets=[],this._extraItemAssets=[],this._extraItemCount=0,i&&i.length&&s>0){for(var a=0;a<i.length;){var o=i[a];o&&this._extraItemAssets.push(o),a++}if(this._extraItemAssets.length){if(n)for(var u=0;u<n.length;){var c=n[u];c&&this._extraItemOffsets.push(new Z.g(c.x,c.y)),u++}this._extraItemCount=s}}}return Object(a.a)(t,[{key:"isStatic",get:function(){return 0==this._extraItemCount}},{key:"dispose",value:function(){this._texture&&(this._texture.dispose(),this._texture=null),this._cachedSprite&&(this._cachedSprite.destroy(),this._cachedSprite=null),this._extraItemAssets=null,this._extraItemOffsets=null,this._extraItemCount=0}},{key:"clearCache",value:function(){this._cachedSprite&&(this._cachedSprite.destroy(),this._cachedSprite=null)}},{key:"getHeight",value:function(t){if(this._texture){var e=this._texture.getBitmap(t);if(e)return e.height}return 0}},{key:"render",value:function(t,e,i){if(!this._texture)return null;var n=this._texture.getBitmap(t);if(!n)return null;var s=new et(n);if(0!==e||0!==i){for(;e<0;)e+=n.width;for(;i<0;)i+=n.height;s.x=e%n.width,s.y=i%n.height,e&&(s.anchor.x=1,s.scale.x=-1),i&&(s.anchor.y=1,s.scale.y=-1)}if(s){if(!this.isStatic){this._cachedSprite&&(this._cachedSprite.width===s.width&&this._cachedSprite.height===s.height||(this._cachedSprite.destroy(),this._cachedSprite=null)),this._cachedSprite||(this._cachedSprite=new et(n));for(var r=Math.min(this._extraItemCount,this._extraItemOffsets.length),a=Math.max(this._extraItemCount,this._extraItemOffsets.length),o=UA.getArray(this._extraItemCount,a),u=0;u<r;){var c=this._extraItemOffsets[o[u]],h=this._extraItemAssets[u%this._extraItemAssets.length];if(c&&h){var _=h.texture;if(_){var l=new Z.g(c.x+h.offsetX,c.y+h.offsetY),d=new Z.d,f=1,v=1,g=0,O=0;h.flipH&&(f=-1,g=_.width),h.flipV&&(v=-1,O=_.height);var y=l.x+g;y=y>>1<<1,d.scale(f,v),d.translate(y,l.y+O);var E=new et(_);E.transform.setFromMatrix(d),E.x=d.tx,E.y=d.ty,this._cachedSprite.addChild(E)}}u++}return this._cachedSprite}return s}return null}},{key:"getAssetName",value:function(t){return null==this._texture?null:this._texture.getAssetName(t)}}]),t}(),ZA=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(r.a)(this,t),this._bitmap=void 0,this._normalMinX=void 0,this._normalMaxX=void 0,this._normalMinY=void 0,this._normalMaxY=void 0,this._assetName=void 0,this._normalMinX=i,this._normalMaxX=n,this._normalMinY=s,this._normalMaxY=a,this._assetName=o,this._bitmap=e}return Object(a.a)(t,[{key:"bitmap",get:function(){return this._bitmap}},{key:"normalMinX",get:function(){return this._normalMinX}},{key:"normalMaxX",get:function(){return this._normalMaxX}},{key:"normalMinY",get:function(){return this._normalMinY}},{key:"normalMaxY",get:function(){return this._normalMaxY}},{key:"assetName",get:function(){return this._assetName}},{key:"dispose",value:function(){this._bitmap=null}}]),t}();ZA.MIN_NORMAL_COORDINATE_VALUE=-1,ZA.MAX_NORMAL_COORDINATE_VALUE=1;var JA=function(){function t(){Object(r.a)(this,t),this._bitmaps=void 0,this._bitmaps=[]}return Object(a.a)(t,[{key:"dispose",value:function(){if(this._bitmaps){var t,e=Object(s.a)(this._bitmaps);try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._bitmaps=null}}},{key:"addBitmap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._bitmaps.push(new ZA(t,e,i,n,s,r))}},{key:"getBitmap",value:function(t){var e=this.getPlaneTextureBitmap(t);return e?e.bitmap:null}},{key:"getPlaneTextureBitmap",value:function(t){if(!t)return null;var e,i=Object(s.a)(this._bitmaps);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&(t.x>=n.normalMinX&&t.x<=n.normalMaxX&&t.y>=n.normalMinY&&t.y<=n.normalMaxY))return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"getAssetName",value:function(t){var e=this.getPlaneTextureBitmap(t);return e?e.assetName:null}}]),t}();JA.MIN_NORMAL_COORDINATE_VALUE=-1,JA.MAX_NORMAL_COORDINATE_VALUE=1;var $A=function(){function t(){Object(r.a)(this,t),this._assetCollection=void 0,this._materials=void 0,this._textures=void 0,this._planes=void 0,this._geometries=void 0,this._data=void 0,this._assetCollection=null,this._textures=new Map,this._materials=new Map,this._planes=new Map,this._geometries=new Map,this._data=null}return Object(a.a)(t,[{key:"data",get:function(){return this._data}},{key:"assetCollection",get:function(){return this._assetCollection}},{key:"initializeDimensions",value:function(t,e){return!0}},{key:"dispose",value:function(){if(this._planes){var t,e=Object(s.a)(this._planes.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(o){e.e(o)}finally{e.f()}this._planes=null}if(this._materials&&(this.resetMaterials(),this._materials=null),this._textures&&(this.resetTextures(),this._textures=null),this._geometries){var n,r=Object(s.a)(this._geometries.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&a.dispose()}}catch(o){r.e(o)}finally{r.f()}this._geometries=null}this._data=null,this._assetCollection=null}},{key:"clearCache",value:function(){var t,e=Object(s.a)(this._planes.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clearCache()}}catch(o){e.e(o)}finally{e.f()}var n,r=Object(s.a)(this._materials.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&a.clearCache()}}catch(o){r.e(o)}finally{r.f()}}},{key:"initialize",value:function(t){this._data=t}},{key:"reinitialize",value:function(){this.resetTextures(),this.resetMaterials(),this.initializeAll()}},{key:"resetMaterials",value:function(){var t,e=Object(s.a)(this._materials.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._materials.clear()}},{key:"resetTextures",value:function(){var t,e=Object(s.a)(this._textures.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.dispose()}}catch(n){e.e(n)}finally{e.f()}this._textures.clear()}},{key:"getTexture",value:function(t){return this._textures.get(t)}},{key:"getMaterial",value:function(t){return this._materials.get(t)}},{key:"getPlane",value:function(t){return this._planes.get(t)}},{key:"addPlane",value:function(t,e){return!!e&&(!this._planes.get(t)&&(this._planes.set(t,e),!0))}},{key:"initializeAssetCollection",value:function(t){this._data&&(this._assetCollection=t,this.initializeAll())}},{key:"initializeAll",value:function(){this._data&&(this.initializeTexturesAndMaterials(),this.initializePlanes())}},{key:"initializeTexturesAndMaterials",value:function(){this._data.textures&&this._data.textures.length&&this.parseTextures(this._data.textures,this.assetCollection),this._data.materials&&this._data.materials.length&&this.parsePlaneMaterials(this._data.materials)}},{key:"initializePlanes",value:function(){}},{key:"parseTextures",value:function(t,e){if(t&&e&&t.length){var i,n=Object(s.a)(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){var a=r.id;if(!this._textures.get(a)){var o=new JA;if(r.bitmaps&&r.bitmaps.length){var u,c=Object(s.a)(r.bitmaps);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(h){var _=h.assetName,l=JA.MIN_NORMAL_COORDINATE_VALUE,d=JA.MAX_NORMAL_COORDINATE_VALUE,f=JA.MIN_NORMAL_COORDINATE_VALUE,v=JA.MAX_NORMAL_COORDINATE_VALUE;void 0!==h.normalMinX&&(l=h.normalMinX),void 0!==h.normalMaxX&&(d=h.normalMaxX),void 0!==h.normalMinY&&(f=h.normalMinY),void 0!==h.normalMaxY&&(v=h.normalMaxY);var g=e.getAsset(_);if(g){var O=g.texture;if(O){var y=O;g.flipH&&(y=$e.getFlipHBitmapData(O)),o.addBitmap(y,l,d,f,v,_)}}}}}catch(E){c.e(E)}finally{c.f()}}this._textures.set(a,o)}}}}catch(E){n.e(E)}finally{n.f()}}}},{key:"parsePlaneMaterials",value:function(t){if(t&&t.length){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.id,a=new qA;if(n.matrices&&n.matrices.length){var o,u=Object(s.a)(n.matrices);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c){var h=c.repeatMode,_=c.align,l=XA.MIN_NORMAL_COORDINATE_VALUE,d=XA.MAX_NORMAL_COORDINATE_VALUE,f=XA.MIN_NORMAL_COORDINATE_VALUE,v=XA.MAX_NORMAL_COORDINATE_VALUE;switch(h){case"borders":h=XA.REPEAT_MODE_BORDERS;break;case"center":h=XA.REPEAT_MODE_CENTER;break;case"first":h=XA.REPEAT_MODE_FIRST;break;case"last":h=XA.REPEAT_MODE_LAST;break;case"random":h=XA.REPEAT_MODE_RANDOM;break;default:h=XA.REPEAT_MODE_DEFAULT}switch(_){case"top":_=XA.ALIGN_TOP;break;case"bottom":_=XA.ALIGN_BOTTOM;break;default:_=XA.ALIGN_DEFAULT}if(c.columns&&c.columns.length)for(var g=a.addMaterialCellMatrix(c.columns.length,h,_,l,d,f,v),O=0;O<c.columns.length;){var y=c.columns[O];y&&this.parsePlaneMaterialCellColumn(y,g,O),O++}}}}catch(E){u.e(E)}finally{u.f()}}this._materials.set(r,a)}}}catch(E){i.e(E)}finally{i.f()}}}},{key:"parsePlaneMaterialCellColumn",value:function(t,e,i){if(t&&e){var n=KA.REPEAT_MODE_ALL,s=t.width,r=this.parsePlaneMaterialCells(t);switch(t.repeatMode){case"borders":n=KA.REPEAT_MODE_BORDERS;break;case"center":n=KA.REPEAT_MODE_CENTER;break;case"first":n=KA.REPEAT_MODE_FIRST;break;case"last":n=KA.REPEAT_MODE_LAST;break;case"none":n=KA.REPEAT_MODE_NONE;break;default:n=KA.REPEAT_MODE_ALL}e.createColumn(i,s,r,n)}}},{key:"parsePlaneMaterialCells",value:function(t){if(!t||!t.cells||!t.cells.length)return null;for(var e=[],i=0;i<t.cells.length;){var n=t.cells[i];if(n){var r=n.textureId,a=null,o=null,u=null,c=0;if(n.extras&&n.extras.length){var h=n.extras[0],_=h.types,l=h.offsets;if(_&&l&&_.length&&l.length){var d=_[0],f=l[0];a=this.parseExtraItemTypes(d),c=(o=this.parseExtraItemOffsets(f)).length,h.limitMax&&(c=h.limitMax)}}if(a&&a.length){u=[];var v,g=Object(s.a)(a);try{for(g.s();!(v=g.n()).done;){var O=v.value;if(O){var y=this._assetCollection.getAsset(O);y&&u.push(y)}}}catch(m){g.e(m)}finally{g.f()}}var E=this.getTexture(r),p=new QA(E,u,o,c);e.push(p)}i++}return e&&e.length?e:null}},{key:"parseExtraItemTypes",value:function(t){var e=[];if(t&&t.types&&t.types.length)for(var i=0;i<t.types.length;){var n=t.types[i].assetName;n&&e.push(n),i++}return e}},{key:"parseExtraItemOffsets",value:function(t){var e=[];if(t&&t.offsets&&t.offsets.length)for(var i=0;i<t.offsets.length;){var n=t.offsets[i],s=n.x,r=n.y;e.push(new Z.g(s,r)),i++}return e}},{key:"getGeometry",value:function(t,e,i){(e=Math.abs(e))>90&&(e=90),(i=Math.abs(i))>90&&(i=90);var n="".concat(t,"_").concat(Math.round(e),"_").concat(Math.round(i)),s=this._geometries.get(n);return s||(s=new ei(t,new Et(e,i),new Et(-10,0,0)),this._geometries.set(n,s),s)}},{key:"parseVisualizations",value:function(t,e){if(t&&e&&e&&e.length){var i,n=Object(s.a)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){var a=r.size,o=WA.HORIZONTAL_ANGLE_DEFAULT,u=WA.VERTICAL_ANGLE_DEFAULT;r.horizontalAngle&&(o=r.horizontalAngle),r.verticalAngle&&(u=r.verticalAngle);var c=r.layers,h=t.createPlaneVisualization(a,c&&c.length||0,this.getGeometry(a,o,u));if(h&&c&&c.length)for(var _=0;_<c.length;){var l=c[_];if(l){var d=null,f=VA.ALIGN_DEFAULT,v=WA.DEFAULT_COLOR,g=VA.DEFAULT_OFFSET;l.materialId&&(d=this.getMaterial(l.materialId)),l.color&&(v=l.color),l.offset&&(g=l.offset),l.align&&("bottom"===l.align?f=VA.ALIGN_BOTTOM:"top"==l.align&&(f=VA.ALIGN_TOP)),h.setLayer(_,d,v,f,g)}_++}}}}catch(O){n.e(O)}finally{n.f()}}}},{key:"render",value:function(t,e,i,n,s,r,a){return null}},{key:"getTextureIdentifier",value:function(t,e){return t.toString()}},{key:"getLayers",value:function(e){var i=this.getPlane(e);return i||(i=this.getPlane(t.DEFAULT)),i.getLayers()}}]),t}();$A.DEFAULT="default";var tS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._width=0,t._height=0,t}return Object(a.a)(i,[{key:"isStatic",value:function(t){var e=this.getPlaneVisualization(t);return e?!e.hasAnimationLayers:Object(d.a)(Object(f.a)(i.prototype),"isStatic",this).call(this,t)}},{key:"initializeDimensions",value:function(t,e){t<0&&(t=0),e<0&&(e=0),t===this._width&&e===this._height||(this._width=t,this._height=e)}},{key:"render",value:function(t,e,i,n,s,r,a,o,u,c,h){var _=this.getPlaneVisualization(n);if(!_||!_.geometry)return null;var l=_.geometry.getScreenPoint(new Et(0,0,0)),d=_.geometry.getScreenPoint(new Et(0,0,1)),f=_.geometry.getScreenPoint(new Et(0,1,0));if(l&&d&&f){e=Math.round(Math.abs((l.x-f.x)*e/_.geometry.scale)),i=Math.round(Math.abs((l.y-d.y)*i/_.geometry.scale));var v=a*Math.abs(l.x-f.x),g=o*Math.abs(l.y-d.y),O=u*Math.abs(l.x-f.x),y=c*Math.abs(l.y-d.y);return _.render(t,e,i,s,r,v,g,O,y,u,c,h)}return null}}]),i}(YA);tS.DEFAULT_COLOR=16777215,tS.HORIZONTAL_ANGLE_DEFAULT=45,tS.VERTICAL_ANGLE_DEFAULT=30;var eS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._landscapeWidth=0,t._landscapeHeight=0,t}return Object(a.a)(i,[{key:"initializeDimensions",value:function(t,e){return t<0&&(t=0),e<0&&(e=0),this._landscapeWidth=t,this._landscapeHeight=e,!0}},{key:"initializePlanes",value:function(){if(this.data){var t=this.data.landscapes;t&&t.length&&this.parseLandscapes(t)}}},{key:"parseLandscapes",value:function(t){if(t){var e=Math.trunc(654321*Math.random());for(var i in t){var n=t[i];if(n){var r,a=n.id,o=n.animatedVisualizations,u=new tS,c=Object(s.a)(o);try{for(c.s();!(r=c.n()).done;){var h=r.value;if(h){var _=h.size,l=tS.HORIZONTAL_ANGLE_DEFAULT,d=tS.VERTICAL_ANGLE_DEFAULT;h.horizontalAngle&&(l=h.horizontalAngle),h.verticalAngle&&(d=h.verticalAngle);var f=h.layers,v=h.animationLayers,g=f&&f.length||0,O=v&&v.length||0,y=g+O,E=u.createPlaneVisualization(_,y||0,this.getGeometry(_,l,d));if(E){UA.setSeed(e);var p=0;if(g)for(;p<f.length;){var m=f[p];if(m){var I=null,b=VA.ALIGN_DEFAULT,T=tS.DEFAULT_COLOR,R=VA.DEFAULT_OFFSET;m.materialId&&(I=this.getMaterial(m.materialId)),m.color&&(T=m.color),m.offset&&(R=m.offset),m.align&&("bottom"===m.align?b=VA.ALIGN_BOTTOM:"top"===m.align&&(b=VA.ALIGN_TOP)),E.setLayer(p,I,T,b,R)}p++}if(p=0,O){for(var k=[];p<v.length;){var A=v[p];if(A){var S=A.animationItems;if(S&&S.length){var j,N=Object(s.a)(S);try{for(N.s();!(j=N.n()).done;){var D=j.value;if(D){D.id;var M=D.assetId,C=this.getCoordinateValue(D.x||"",D.randomX||""),L=this.getCoordinateValue(D.y||"",D.randomY||""),U=D.speedX?D.speedX/gD.instance.getConfiguration("system.animation.fps"):0,P=D.speedY?D.speedY/gD.instance.getConfiguration("system.animation.fps"):0;k.push({asset:M,x:C,y:L,speedX:U,speedY:P})}}}catch(w){N.e(w)}finally{N.f()}}}p++}E.setAnimationLayer(p,k,this.assetCollection)}}}}}catch(w){c.e(w)}finally{c.f()}this.addPlane(a,u)||u.dispose()}}}}},{key:"getCoordinateValue",value:function(t,e){var i=0;if(t.length>0&&"%"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1),i=parseFloat(t)/100),e.length>0){var n=UA.getValues(1,0,1e4)[0]/1e4;"%"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1),i+=n*parseFloat(e)/100)}return i}},{key:"render",value:function(t,e,n,s,r,a,o){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=this.getPlane(e);if(d||(d=this.getPlane(i.DEFAULT)),!d)return null;t&&t.clear();var f=d.render(t,n,s,r,a,o,u,c,h,_,l);if(f&&f!==t&&!(f=f.clone()))return null;return!d.isStatic(r)&&i.UPDATE_INTERVAL>0?new LA(f,Math.round(l/i.UPDATE_INTERVAL)*i.UPDATE_INTERVAL+i.UPDATE_INTERVAL):new LA(f,-1)}},{key:"getTextureIdentifier",value:function(t,e){return e?e.x<0?t+"_0":t+"_1":Object(d.a)(Object(f.a)(i.prototype),"getTextureIdentifier",this).call(this,t,e)}}]),i}($A);eS.UPDATE_INTERVAL=500;var iS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initializePlanes",value:function(){if(this.data){var t=this.data.floors;t&&t.length&&this.parseFloors(t)}}},{key:"parseFloors",value:function(t){if(t)for(var e in t){var i=t[e];if(i){var n=i.id,s=i.visualizations,r=new WA;this.parseVisualizations(r,s),this.addPlane(n,r)||r.dispose()}}}},{key:"render",value:function(t,e,i,n,s,r,a){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.getPlane(e);if(c||(c=this.getPlane($A.DEFAULT)),!c)return null;t&&t.clear();var h=c.render(t,i,n,s,r,a,o,u);return h&&h!==t&&!(h=h.clone())?null:new LA(h,-1)}}]),i}($A),nS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"render",value:function(t,e,i,n,s,r){var a=this.getPlaneVisualization(n);if(!a||!a.geometry)return null;var o=a.geometry.getScreenPoint(new Et(0,0,0)),u=a.geometry.getScreenPoint(new Et(0,0,i/a.geometry.scale)),c=a.geometry.getScreenPoint(new Et(0,e/a.geometry.scale,0));return o&&u&&c&&(e=Math.round(Math.abs(o.x-c.x)),i=Math.round(Math.abs(o.y-u.y))),a.render(t,e,i,s,r)}}]),i}(YA);nS.DEFAULT_COLOR=16777215,nS.HORIZONTAL_ANGLE_DEFAULT=45,nS.VERTICAL_ANGLE_DEFAULT=30;var sS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initializePlanes",value:function(){if(this.data){var t=this.data.walls;t&&t.length&&this.parseWalls(t)}}},{key:"parseWalls",value:function(t){if(t)for(var e in t){var i=t[e];if(i){var n=i.id,s=i.visualizations,r=new nS;this.parseVisualizations(r,s),this.addPlane(n,r)||r.dispose()}}}},{key:"render",value:function(t,e,i,n,s,r,a){var o=this.getPlane(e);if(o||(o=this.getPlane($A.DEFAULT)),!o)return null;if(t){var u=t.getBounds();t.clear(),t.drawRect(u.x,u.y,u.width,u.height)}var c=o.render(t,i,n,s,r,a);return c&&c!==t&&!(c=c.clone())?null:new LA(c,-1)}},{key:"getTextureIdentifier",value:function(t,e){return e?"".concat(t,"_").concat(e.x,"_").concat(e.y,"_").concat(e.z):Object(d.a)(Object(f.a)(i.prototype),"getTextureIdentifier",this).call(this,t,e)}}]),i}($A),rS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._wallRasterizer=void 0,t._floorRasterizer=void 0,t._landscapeRasterizer=void 0,t._maskManager=void 0,t._initialized=void 0,t._wallRasterizer=new sS,t._floorRasterizer=new iS,t._landscapeRasterizer=new eS,t._maskManager=new BA,t._initialized=!1,t}return Object(a.a)(i,[{key:"initialize",value:function(t){var e=t.wallData;e&&this._wallRasterizer.initialize(e);var i=t.floorData;i&&this._floorRasterizer.initialize(i);var n=t.landscapeData;n&&this._landscapeRasterizer.initialize(n);var s=t.maskData;return s&&this._maskManager.initialize(s),!0}},{key:"onDispose",value:function(){this._wallRasterizer&&(this._wallRasterizer.dispose(),this._wallRasterizer=null),this._floorRasterizer&&(this._floorRasterizer.dispose(),this._floorRasterizer=null),this._landscapeRasterizer&&(this._landscapeRasterizer.dispose(),this._landscapeRasterizer=null),this._maskManager&&(this._maskManager.dispose(),this._maskManager=null),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"setGraphicAssetCollection",value:function(t){this._initialized||(this._wallRasterizer.initializeAssetCollection(t),this._floorRasterizer.initializeAssetCollection(t),this._landscapeRasterizer.initializeAssetCollection(t),this._maskManager.initializeAssetCollection(t),this._initialized=!0)}},{key:"clearCache",value:function(){this._wallRasterizer&&this._wallRasterizer.clearCache(),this._floorRasterizer&&this._floorRasterizer.clearCache(),this._landscapeRasterizer&&this._landscapeRasterizer.clearCache()}},{key:"wallRasterizer",get:function(){return this._wallRasterizer}},{key:"floorRasterizer",get:function(){return this._floorRasterizer}},{key:"landscapeRasterizer",get:function(){return this._landscapeRasterizer}},{key:"maskManager",get:function(){return this._maskManager}}]),i}(m),aS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._data=void 0,t._roomPlaneParser=void 0,t._roomPlaneBitmapMaskParser=void 0,t._geometryUpdateId=void 0,t._boundingRectangle=void 0,t._directionX=void 0,t._directionY=void 0,t._directionZ=void 0,t._floorThickness=void 0,t._wallThickness=void 0,t._holeUpdateTime=void 0,t._planes=void 0,t._visiblePlanes=void 0,t._visiblePlaneSpriteNumbers=void 0,t._roomScale=void 0,t._lastUpdateTime=void 0,t._updateIntervalTime=void 0,t._wallType=void 0,t._floorType=void 0,t._landscapeType=void 0,t._colorBackgroundOnly=void 0,t._color=void 0,t._redColor=void 0,t._greenColor=void 0,t._blueColor=void 0,t._typeVisibility=void 0,t._assetUpdateCounter=void 0,t._maskData=void 0,t._isPlaneSet=void 0,t._data=null,t._roomPlaneParser=new Xc,t._roomPlaneBitmapMaskParser=new NA,t._geometryUpdateId=-1,t._directionX=0,t._directionY=0,t._directionZ=0,t._floorThickness=1,t._wallThickness=1,t._holeUpdateTime=NaN,t._planes=[],t._visiblePlanes=[],t._visiblePlaneSpriteNumbers=[],t._roomScale=0,t._lastUpdateTime=-1e3,t._updateIntervalTime=250,t._wallType=null,t._floorType=null,t._landscapeType=null,t._colorBackgroundOnly=!0,t._color=16777215,t._redColor=255,t._greenColor=255,t._blueColor=255,t._typeVisibility=[],t._assetUpdateCounter=0,t._maskData=null,t._isPlaneSet=!1,t._typeVisibility[PA.TYPE_UNDEFINED]=!1,t._typeVisibility[PA.TYPE_FLOOR]=!0,t._typeVisibility[PA.TYPE_WALL]=!0,t._typeVisibility[PA.TYPE_LANDSCAPE]=!0,t}return Object(a.a)(i,[{key:"initialize",value:function(t){return t instanceof rS&&(this._data=t,Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this._data.setGraphicAssetCollection(this.asset),!0)}},{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this.clearPlanes(),this._planes=null,this._visiblePlanes=null,this._visiblePlaneSpriteNumbers=null,this._roomPlaneParser&&(this._roomPlaneParser.dispose(),this._roomPlaneParser=null),this._roomPlaneBitmapMaskParser&&(this._roomPlaneBitmapMaskParser.dispose(),this._roomPlaneBitmapMaskParser=null),this._data&&(this._data.clearCache(),this._data=null);var t=i.RENDER_TEXTURE_CACHE.get(this);if(t){var e,n=Object(s.a)(t.getValues());try{for(n.s();!(e=n.n()).done;){e.value.destroy(!0)}}catch(r){n.e(r)}finally{n.f()}t.dispose(),i.RENDER_TEXTURE_CACHE.delete(this)}}},{key:"reset",value:function(){Object(d.a)(Object(f.a)(i.prototype),"reset",this).call(this),this._floorType=null,this._wallType=null,this._landscapeType=null,this._maskData=null,this._geometryUpdateId=-1,this._roomScale=0}},{key:"update",value:function(t,e,n,s){if(this.object&&t){i.LAST_VISUALIZATION=this;var r=0,a=i.RENDER_TEXTURE_CACHE.get(i.LAST_VISUALIZATION);a&&(r=a.length);var o=this.updateGeometry(t),u=this.object.model,c=!1;if(this.updateThickness(u)&&(c=!0),this.updateHole(u)&&(c=!0),this.initializeRoomPlanes()&&a&&r&&setTimeout((function(){for(;r;){var t=a.getWithIndex(0);t&&(t.destroy(!0),a.remove(a.getKey(0))),r--}}),0),c=this.updateMasks(u),!(e<this._lastUpdateTime+this._updateIntervalTime)||o||c){if(this.updatePlaneTexturesAndVisibilities(u)&&(c=!0),this.updatePlanes(t,o,e)&&(c=!0),c){for(var h=0;h<this._visiblePlanes.length;){var _=this._visiblePlaneSpriteNumbers[h],l=this.getSprite(_),d=this._visiblePlanes[h];if(l&&d&&d.type!==PA.TYPE_LANDSCAPE)if(this._colorBackgroundOnly){var f=d.color,v=(255&f)*this._redColor/255,g=(f>>8&255)*this._greenColor/255;f=(f>>24<<24)+((f>>16&255)*this._blueColor/255<<16)+(g<<8)+v,l.color=f}else l.color=d.color;h++}this.updateSpriteCounter++}this.updateModelCounter=u.updateCounter,this._lastUpdateTime=e}}}},{key:"updateGeometry",value:function(t){if(!t)return!1;if(this._geometryUpdateId===t.updateId)return!1;this._geometryUpdateId=t.updateId,this._boundingRectangle=null;var e=t.direction;return!(!e||e.x===this._directionX&&e.y===this._directionY&&e.z===this._directionZ&&t.scale===this._roomScale)&&(this._directionX=e.x,this._directionY=e.y,this._directionZ=e.z,this._roomScale=t.scale,!0)}},{key:"updateThickness",value:function(t){if(this.updateModelCounter===t.updateCounter)return!1;var e=t.getValue(dt.ROOM_FLOOR_THICKNESS),i=t.getValue(dt.ROOM_WALL_THICKNESS);return!(isNaN(e)||isNaN(i)||e===this._floorThickness&&i===this._wallThickness)&&(this._floorThickness=e,this._wallThickness=i,this.clearPlanes(),!0)}},{key:"updateHole",value:function(t){if(this.updateModelCounter===t.updateCounter)return!1;var e=t.getValue(dt.ROOM_FLOOR_HOLE_UPDATE_TIME);return!isNaN(e)&&e!==this._holeUpdateTime&&(this._holeUpdateTime=e,this.clearPlanes(),!0)}},{key:"updateMasks",value:function(t){if(this.updateModelCounter===t.updateCounter)return!1;var e=!1,i=t.getValue(dt.ROOM_PLANE_MASK_XML);i!==this._maskData&&(this.updatePlaneMasks(i),this._maskData=i,e=!0);var n=t.getValue(dt.ROOM_BACKGROUND_COLOR);n!==this._color&&(this._color=n,this._redColor=255&this._color,this._greenColor=this._color>>8&255,this._blueColor=this._color>>16&255,e=!0);var s=t.getValue(dt.ROOM_COLORIZE_BG_ONLY)||!1;return s!==this._colorBackgroundOnly&&(this._colorBackgroundOnly=s,e=!0),e}},{key:"updatePlaneTexturesAndVisibilities",value:function(t){if(this.updateModelCounter===t.updateCounter)return!1;var e=t.getValue(dt.ROOM_FLOOR_TYPE),i=t.getValue(dt.ROOM_WALL_TYPE),n=t.getValue(dt.ROOM_LANDSCAPE_TYPE);this.updatePlaneTypes(e,i,n);var s=1===t.getValue(dt.ROOM_FLOOR_VISIBILITY),r=1===t.getValue(dt.ROOM_WALL_VISIBILITY),a=1===t.getValue(dt.ROOM_LANDSCAPE_VISIBILITY);return this.updatePlaneVisibility(s,r,a),!0}},{key:"clearPlanes",value:function(){if(this._planes){for(;this._planes.length;){var t=this._planes[0];t&&t.dispose(),this._planes.pop()}this._planes=[],this._planes=[]}this._isPlaneSet=!1,this._assetUpdateCounter=this._assetUpdateCounter+1,this.reset()}},{key:"initializeRoomPlanes",value:function(){if(!this.object||this._isPlaneSet)return!1;isNaN(this._floorThickness)||(this._roomPlaneParser.floorThicknessMultiplier=this._floorThickness),isNaN(this._wallThickness)||(this._roomPlaneParser.wallThicknessMultiplier=this._wallThickness);var t=this.object.model.getValue(dt.ROOM_MAP_DATA);if(this._roomPlaneParser.initializeFromMapData(t)){for(var e=this.getLandscapeWidth(),n=this.getLandscapeHeight(),s=0,r=this.object.model.getValue(dt.ROOM_RANDOM_SEED),a=0;a<this._roomPlaneParser.planeCount;){var o=this._roomPlaneParser.getPlaneLocation(a),u=this._roomPlaneParser.getPlaneLeftSide(a),c=this._roomPlaneParser.getPlaneRightSide(a),h=this._roomPlaneParser.getPlaneSecondaryNormals(a),_=this._roomPlaneParser.getPlaneType(a),l=null;if(!(o&&u&&c))return;var d=Et.crossProduct(u,c);if(r=7613*r+517,l=null,_===Wc.PLANE_FLOOR){var f=o.x+u.x+.5,v=o.y+c.y+.5,g=Math.trunc(f)-f,O=Math.trunc(v)-v;l=new PA(this.object.getLocation(),o,u,c,PA.TYPE_FLOOR,!0,h,r,-g,-O),0!==d.z?l.color=i.FLOOR_COLOR:l.color=0!==d.x?i.FLOOR_COLOR_RIGHT:i.FLOOR_COLOR_LEFT,this._data&&(l.rasterizer=this._data.floorRasterizer)}else _===Wc.PLANE_WALL?(l=new PA(this.object.getLocation(),o,u,c,PA.TYPE_WALL,!0,h,r),(u.length<1||c.length<1)&&(l.hasTexture=!1),0===d.x&&0===d.y?l.color=i.WALL_COLOR_BORDER:d.y>0?l.color=i.WALL_COLOR_TOP:0===d.y?l.color=i.WALL_COLOR_SIDE:l.color=i.WALL_COLOR_BOTTOM,this._data&&(l.rasterizer=this._data.wallRasterizer)):_===Wc.PLANE_LANDSCAPE?(l=new PA(this.object.getLocation(),o,u,c,PA.TYPE_LANDSCAPE,!0,h,r,s,0,e,n),d.y>0?l.color=i.LANDSCAPE_COLOR_TOP:0==d.y?l.color=i.LANDSCAPE_COLOR_SIDE:l.color=i.LANDSCAPE_COLOR_BOTTOM,this._data&&(l.rasterizer=this._data.landscapeRasterizer),s+=u.length):_==Wc.PLANE_BILLBOARD&&(l=new PA(this.object.getLocation(),o,u,c,PA.TYPE_WALL,!0,h,r),(u.length<1||c.length<1)&&(l.hasTexture=!1),0==d.x&&0==d.y?l.color=i.WALL_COLOR_BORDER:d.y>0?l.color=i.WALL_COLOR_TOP:0==d.y?l.color=i.WALL_COLOR_SIDE:l.color=i.WALL_COLOR_BOTTOM);if(l){l.maskManager=this._data.maskManager;for(var y=0;y<this._roomPlaneParser.getPlaneMaskCount(a);){var E=this._roomPlaneParser.getPlaneMaskLeftSideLoc(a,y),p=this._roomPlaneParser.getPlaneMaskRightSideLoc(a,y),m=this._roomPlaneParser.getPlaneMaskLeftSideLength(a,y),I=this._roomPlaneParser.getPlaneMaskRightSideLength(a,y);l.addRectangleMask(E,p,m,I),y++}this._planes.push(l)}a++}return this._isPlaneSet=!0,this.defineSprites(),!0}}},{key:"defineSprites",value:function(){this.createSprites(this._planes.length);for(var t=0;t<this._planes.length;){var e=this._planes[t],i=this.getSprite(t);e&&i&&e.leftSide&&e.rightSide&&(e.type===PA.TYPE_WALL&&(e.leftSide.length<1||e.rightSide.length<1)?i.alphaTolerance=ze.MATCH_NOTHING:i.alphaTolerance=ze.MATCH_OPAQUE_PIXELS,e.type===PA.TYPE_WALL?i.tag="plane.wall@"+(t+1):e.type===PA.TYPE_FLOOR?i.tag="plane.floor@"+(t+1):i.tag="plane@"+(t+1),i.spriteType=Ye.ROOM_PLANE),t++}}},{key:"getLandscapeWidth",value:function(){for(var t=0,e=0;e<this._roomPlaneParser.planeCount;){if(this._roomPlaneParser.getPlaneType(e)===Wc.PLANE_LANDSCAPE)t+=this._roomPlaneParser.getPlaneLeftSide(e).length;e++}return t}},{key:"getLandscapeHeight",value:function(){for(var t=0,e=0;e<this._roomPlaneParser.planeCount;){if(this._roomPlaneParser.getPlaneType(e)===Wc.PLANE_LANDSCAPE){var i=this._roomPlaneParser.getPlaneRightSide(e);i.length>t&&(t=i.length)}e++}return t>5&&(t=5),t}},{key:"updatePlaneTypes",value:function(t,e,i){if(t!==this._floorType?this._floorType=t:t=null,e!==this._wallType?this._wallType=e:e=null,i!==this._landscapeType?this._landscapeType=i:i=null,!t&&!e&&!i)return!1;for(var n=0;n<this._planes.length;){var s=this._planes[n];s&&(s.type===PA.TYPE_FLOOR&&t?s.id=t:s.type===PA.TYPE_WALL&&e?s.id=e:s.type===PA.TYPE_LANDSCAPE&&i&&(s.id=i)),n++}return!0}},{key:"updatePlaneVisibility",value:function(t,e,i){t===this._typeVisibility[PA.TYPE_FLOOR]&&e===this._typeVisibility[PA.TYPE_WALL]&&i===this._typeVisibility[PA.TYPE_LANDSCAPE]||(this._typeVisibility[PA.TYPE_FLOOR]=t,this._typeVisibility[PA.TYPE_WALL]=e,this._typeVisibility[PA.TYPE_LANDSCAPE]=i,this._visiblePlanes=[],this._visiblePlaneSpriteNumbers=[])}},{key:"updatePlanes",value:function(t,e,n){if(t&&this.object){this._assetUpdateCounter++,e&&(this._visiblePlanes=[],this._visiblePlaneSpriteNumbers=[]);var s=this._visiblePlanes.length>0,r=this._visiblePlanes;this._visiblePlanes.length||(r=this._planes);for(var a=0,o=!1,u=0;u<r.length;){var c=u;s&&(c=this._visiblePlaneSpriteNumbers[u]);var h=this.getSprite(c);if(h){var _=r[u];if(_){if(h.id=_.uniqueId,_.update(t,n)){if(_.visible){a=_.relativeDepth+this.floorRelativeDepth+c/1e3,_.type!==PA.TYPE_FLOOR&&(a=_.relativeDepth+this.wallRelativeDepth+c/1e3,(_.leftSide.length<1||_.rightSide.length<1)&&(a+=.5*i.ROOM_DEPTH_OFFSET));var l="plane "+c+" "+t.scale;this.updateSprite(h,_,l,a)}o=!0}h.visible!=(_.visible&&this._typeVisibility[_.type])&&(h.visible=!h.visible,o=!0),h.visible&&(s||(this._visiblePlanes.push(_),this._visiblePlaneSpriteNumbers.push(u)))}else h.id=0,h.visible&&(h.visible=!1,o=!0)}u++}return o}}},{key:"updatePlaneMasks",value:function(t){if(t){this._roomPlaneBitmapMaskParser.initialize(t);for(var e=[],i=[],n=!1,r=0;r<this._planes.length;){var a=this._planes[r];a&&(a.resetBitmapMasks(),a.type===PA.TYPE_LANDSCAPE&&e.push(r)),r++}var o,u=Object(s.a)(this._roomPlaneBitmapMaskParser.masks.values());try{for(u.s();!(o=u.n()).done;){var c=o.value,h=this._roomPlaneBitmapMaskParser.getMaskType(c),_=this._roomPlaneBitmapMaskParser.getMaskLocation(c),l=this._roomPlaneBitmapMaskParser.getMaskCategory(c);if(_)for(var d=0;d<this._planes.length;){var f=this._planes[d];if((f.type===PA.TYPE_WALL||f.type===PA.TYPE_LANDSCAPE)&&f&&f.location&&f.normal){var v=Et.dif(_,f.location);if(Math.abs(Et.scalarProjection(v,f.normal))<.01&&f.leftSide&&f.rightSide){var g=Et.scalarProjection(v,f.leftSide),O=Et.scalarProjection(v,f.rightSide);f.type===PA.TYPE_WALL||f.type===PA.TYPE_LANDSCAPE&&l===SA.HOLE?f.addBitmapMask(h,g,O):f.type===PA.TYPE_LANDSCAPE&&(f.canBeVisible||(n=!0),f.canBeVisible=!0,i.push(d))}}d++}}}catch(E){u.e(E)}finally{u.f()}for(r=0;r<e.length;){var y=e[r];if(i.indexOf(y)<0)this._planes[y].canBeVisible=!1,n=!0;r++}n&&(this._visiblePlanes=[],this._visiblePlaneSpriteNumbers=[])}}},{key:"updateSprite",value:function(t,e,i,n){var s=e.offset;t.offsetX=-s.x,t.offsetY=-s.y,t.relativeDepth=n,t.color=e.color,t.texture=this.getPlaneBitmap(e,i),t.name=i+"_"+this._assetUpdateCounter}},{key:"getPlaneBitmap",value:function(t,e){return t.bitmapData}},{key:"getBoundingRectangle",value:function(){return this._boundingRectangle||(this._boundingRectangle=Object(d.a)(Object(f.a)(i.prototype),"getBoundingRectangle",this).call(this)),new Z.j(this._boundingRectangle.x,this._boundingRectangle.y,this._boundingRectangle.width,this._boundingRectangle.height)}},{key:"planes",get:function(){var t,e=[],i=Object(s.a)(this._visiblePlanes);try{for(i.s();!(t=i.n()).done;){var n=t.value;e.push(n)}}catch(r){i.e(r)}finally{i.f()}return e}},{key:"floorRelativeDepth",get:function(){return i.ROOM_DEPTH_OFFSET+.1}},{key:"wallRelativeDepth",get:function(){return i.ROOM_DEPTH_OFFSET+.5}}],[{key:"getTextureCache",value:function(t){var e=i.RENDER_TEXTURE_CACHE.get(i.LAST_VISUALIZATION);return e?e.getValue(t):null}},{key:"addTextureCache",value:function(t,e){if(i.LAST_VISUALIZATION){var n=i.RENDER_TEXTURE_CACHE.get(i.LAST_VISUALIZATION);n||(n=new H,i.RENDER_TEXTURE_CACHE.set(i.LAST_VISUALIZATION,n)),n.add(t,e)}}}]),i}(Xe);aS.LAST_VISUALIZATION=null,aS.RENDER_TEXTURE_CACHE=new Map,aS.FLOOR_COLOR=16777215,aS.FLOOR_COLOR_LEFT=14540253,aS.FLOOR_COLOR_RIGHT=12303291,aS.WALL_COLOR_TOP=16777215,aS.WALL_COLOR_SIDE=13421772,aS.WALL_COLOR_BOTTOM=10066329,aS.WALL_COLOR_BORDER=10066329,aS.LANDSCAPE_COLOR_TOP=16777215,aS.LANDSCAPE_COLOR_SIDE=13421772,aS.LANDSCAPE_COLOR_BOTTOM=10066329,aS.ROOM_DEPTH_OFFSET=1e3;var oS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._tileHeight=void 0,t._tileHeight=0,t}return Object(a.a)(i,[{key:"getLayerYOffset",value:function(t,e,n){return 1===n?(this._tileHeight=this.object.model.getValue(dt.TILE_CURSOR_HEIGHT),32*-this._tileHeight):Object(d.a)(Object(f.a)(i.prototype),"getLayerYOffset",this).call(this,t,e,n)}}]),i}(Pk),uS=function(){function t(){Object(r.a)(this,t),this._visualizationDatas=void 0,this._visualizationDatas=new Map}return Object(a.a)(t,[{key:"getVisualization",value:function(t){var e=this.getVisualizationType(t);return e?new e:null}},{key:"getVisualizationType",value:function(t){if(!t)return null;var e=null;switch(t){case ft.ROOM:e=aS;break;case ft.TILE_CURSOR:e=oS;break;case ft.USER:case ft.BOT:case ft.RENTABLE_BOT:e=Ek;break;case ft.PET_ANIMATED:e=AA;break;case ft.FURNITURE_STATIC:e=Uk;break;case ft.FURNITURE_ANIMATED:e=Pk;break;case ft.FURNITURE_RESETTING_ANIMATED:e=fA;break;case ft.FURNITURE_BADGE_DISPLAY:e=wk;break;case ft.FURNITURE_BG:e=vA;break;case ft.FURNITURE_BB:e=xk;break;case ft.FURNITURE_ISOMETRIC_BB:e=aA;break;case ft.FURNITURE_BOTTLE:e=Bk;break;case ft.FURNITURE_BUILDER_PLACEHOLDER:e=Gk;break;case ft.FURNITURE_COUNTER_CLOCK:e=Hk;break;case ft.FURNITURE_CUBOID:e=Vk;break;case ft.FURNITURE_EXTERNAL_IMAGE:e=Wk;break;case ft.FURNITURE_FIREWORKS:e=tA;break;case ft.FURNITURE_GIFT_WRAPPED_FIREWORKS:e=eA;break;case ft.FURNITURE_GIFT_WRAPPED:e=iA;break;case ft.FURNITURE_GUILD_CUSTOMIZED:e=nA;break;case ft.FURNITURE_GUILD_ISOMETRIC_BADGE:e=sA;break;case ft.FURNITURE_HABBOWHEEL:e=rA;break;case ft.FURNITURE_MANNEQUIN:e=uA;break;case ft.FURNITURE_PARTY_BEAMER:e=cA;break;case ft.FURNITURE_PLANET_SYSTEM:e=_A;break;case ft.FURNITURE_POSTER:e=lA;break;case ft.FURNITURE_QUEUE_TILE:e=dA;break;case ft.FURNITURE_SCORE_BOARD:e=gA;break;case ft.FURNITURE_SOUNDBLOCK:e=OA;break;case ft.FURNITURE_STICKIE:e=yA;break;case ft.FURNITURE_VAL_RANDOMIZER:e=EA;break;case ft.FURNITURE_VOTE_COUNTER:e=pA;break;case ft.FURNITURE_VOTE_MAJORITY:e=mA;break;case ft.FURNITURE_WATER_AREA:e=IA;break;case ft.FURNITURE_YOUTUBE:e=bA}return e||(I.log("Unknown Visualization: ".concat(t)),null)}},{key:"getVisualizationData",value:function(e,i,n){var s=this._visualizationDatas.get(e);if(s)return s;var r=null;switch(i){case ft.FURNITURE_STATIC:case ft.FURNITURE_GIFT_WRAPPED:case ft.FURNITURE_BB:case ft.FURNITURE_ISOMETRIC_BB:case ft.FURNITURE_BG:case ft.FURNITURE_STICKIE:case ft.FURNITURE_BUILDER_PLACEHOLDER:r=new Ck;break;case ft.FURNITURE_ANIMATED:case ft.FURNITURE_RESETTING_ANIMATED:case ft.FURNITURE_POSTER:case ft.FURNITURE_HABBOWHEEL:case ft.FURNITURE_VAL_RANDOMIZER:case ft.FURNITURE_BOTTLE:case ft.FURNITURE_PLANET_SYSTEM:case ft.FURNITURE_QUEUE_TILE:case ft.FURNITURE_PARTY_BEAMER:case ft.FURNITURE_COUNTER_CLOCK:case ft.FURNITURE_WATER_AREA:case ft.FURNITURE_SCORE_BOARD:case ft.FURNITURE_FIREWORKS:case ft.FURNITURE_GIFT_WRAPPED_FIREWORKS:case ft.FURNITURE_GUILD_CUSTOMIZED:case ft.FURNITURE_GUILD_ISOMETRIC_BADGE:case ft.FURNITURE_VOTE_COUNTER:case ft.FURNITURE_VOTE_MAJORITY:case ft.FURNITURE_SOUNDBLOCK:case ft.FURNITURE_BADGE_DISPLAY:case ft.FURNITURE_EXTERNAL_IMAGE:case ft.FURNITURE_YOUTUBE:case ft.TILE_CURSOR:r=new Lk;break;case ft.FURNITURE_MANNEQUIN:r=new oA;break;case ft.ROOM:r=new rS;break;case ft.USER:case ft.BOT:case ft.RENTABLE_BOT:r=new yk;break;case ft.PET_ANIMATED:r=new kA}return r?r.initialize(n)?((r instanceof yk||r instanceof oA)&&(r.avatarManager=gD.instance.avatar),t.CACHING_ENABLED&&this._visualizationDatas.set(e,r),r):(r.dispose(),null):null}}]),t}();uS.CACHING_ENABLED=!0;var cS=Object(a.a)((function t(){Object(r.a)(this,t)}));cS.ROOM_MIN_X="room_min_x",cS.ROOM_MAX_X="room_max_x",cS.ROOM_MIN_Y="room_min_y",cS.ROOM_MAX_Y="room_max_y",cS.ROOM_IS_PUBLIC="room_is_public",cS.ROOM_Z_SCALE="room_z_scale",cS.AD_DISPLAY_DELAY="ad_display_delay",cS.IS_PLAYING_GAME="is_playing_game",cS.RESTRICTS_DRAGGING="restricts_dragging",cS.RESTRICTS_SCALING="restricts_scaling",cS.RESTRICTED_SCALE="room_scale";var hS=function(){function t(e,i){Object(r.a)(this,t),this._width=void 0,this._height=void 0,this._heights=void 0,this._isNotStackable=void 0,this._isRoomTile=void 0,this._width=e,this._height=i,this._heights=[],this._isNotStackable=[],this._isRoomTile=[];for(var n=e*i;n>0;)this._heights.push(0),this._isNotStackable.push(!1),this._isRoomTile.push(!1),n--}return Object(a.a)(t,[{key:"dispose",value:function(){this._width=0,this._height=0,this._height=null,this._isNotStackable=null,this._isRoomTile=null}},{key:"validPosition",value:function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height}},{key:"getTileHeight",value:function(t,e){return this.validPosition(t,e)?this._heights[e*this._width+t]:0}},{key:"setTileHeight",value:function(t,e,i){this.validPosition(t,e)&&(this._heights[e*this._width+t]=i)}},{key:"setStackingBlocked",value:function(t,e,i){this.validPosition(t,e)&&(this._isNotStackable[e*this._width+t]=i)}},{key:"setIsRoomTile",value:function(t,e,i){this.validPosition(t,e)&&(this._isRoomTile[e*this._width+t]=i)}},{key:"validateLocation",value:function(t,e,i,n,s,r,a,o,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,h=0,_=0;if(!this.validPosition(t,e)||!this.validPosition(t+i-1,e+n-1))return!1;(s<0||s>=this._width)&&(s=0),(r<0||r>=this._height)&&(r=0),a=Math.min(a,this._width-s),o=Math.min(o,this._height-r),-1===c&&(c=this.getTileHeight(t,e));for(var l=e;l<e+n;){for(h=t;h<t+i;){if(h<s||h>=s+a||l<r||l>=r+o)if(_=l*this._width+h,u){if(!this._isRoomTile[_])return!1}else if(this._isNotStackable[_]||!this._isRoomTile[_]||Math.abs(this._heights[_]-c)>.01)return!1;h++}l++}return!0}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(),_S=function(){function t(){Object(r.a)(this,t),this._isDisposed=void 0,this._scale=void 0,this._heightMap=void 0,this._width=void 0,this._height=void 0,this._floorHeight=void 0,this._isDisposed=!1,this._scale=64,this._heightMap=[],this._width=0,this._height=0,this._floorHeight=0}return Object(a.a)(t,[{key:"disposed",get:function(){return this._isDisposed}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}},{key:"dispose",value:function(){this.reset(),this._isDisposed=!0}},{key:"initialize",value:function(t,e,i){if(t<=this._width&&e<=this._height)return this._width=t,this._height=e,void(this._floorHeight=i);this.reset();for(var n=0;n<e;){var s=[];this._heightMap.push(s);for(var r=0;r<t;)s.push(0),r++;n++}this._width=t,this._height=e,this._floorHeight=i}},{key:"reset",value:function(){this._heightMap=[]}},{key:"setHeight",value:function(t,e,i){if(t<0||t>=this._width||e<0||e>=this._height)return!1;var n=this._heightMap[e];return!!n&&(n[t]=i,!0)}},{key:"getHeight",value:function(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;var i=this._heightMap[e];return i?i[t]:0}},{key:"getLocation",value:function(e,i,n,s,r){var a,o,u;if(0==e&&0==i)if(e=this._width,i=this._height,a=Math.round(this.scale/10),r==t.R){for(u=this._width-1;u>=0;){for(o=1;o<this._height;){if(this.getHeight(u,o)<=this._floorHeight){o-1<i&&(e=u,i=o-1);break}o++}u--}s+=this.scale/4-a/2,n+=this.scale/2}else{for(o=this._height-1;o>=0;){for(u=1;u<this._width;){if(this.getHeight(u,o)<=this._floorHeight){u-1<e&&(e=u-1,i=o);break}u++}o--}s+=this.scale/4-a/2,n-=a}var c=e,h=i,_=this.getHeight(e,i);return r==t.R?(c+=n/(this._scale/2)-.5,h+=.5,_-=(s-n/2)/(this._scale/2)):(h+=(this._scale/2-n)/(this._scale/2)-.5,c+=.5,_-=(s-(this._scale/2-n)/2)/(this._scale/2)),new Et(c,h,_)}},{key:"getLocationOldFormat",value:function(e,i,n){var s,r,a,o,u,c,h=0;a=(r=Math.ceil(e))-e;for(s=0;s<this._width;){if(r>=0&&r<this._height){if(this.getHeight(s,r)<=this._floorHeight){o=s-1,u=r,h=s,n=t.L;break}if(this.getHeight(s,r+1)<=this._floorHeight){o=s,h=(u=r)-e,n=t.R;break}}r++,s++}var _=this.scale/2*a,l=-h*this.scale/2;return l+=18*-i/32*this.scale/2,c=this.getHeight(o,u)*this.scale/2+l,n==t.R?c+=a*this.scale/4:c+=(1-a)*this.scale/4,this.getLocation(o,u,_,c,n)}},{key:"getOldLocation",value:function(e,i){if(null==e)return null;var n=0,s=0,r=0,a=0,o="",u=0;if(90==i)n=Math.floor(e.x-.5),s=Math.floor(e.y+.5),u=this.getHeight(n,s),r=this._scale/2-(e.y-s+.5)*(this._scale/2),a=(u-e.z)*(this._scale/2)+(this._scale/2-r)/2,o=t.L;else{if(180!=i)return null;n=Math.floor(e.x+.5),s=Math.floor(e.y-.5),u=this.getHeight(n,s),r=(e.x+.5-n)*(this._scale/2),a=(u-e.z)*(this._scale/2)+r/2,o=t.R}return[n,s,r,a,o]}},{key:"getOldLocationString",value:function(t,e){var i=this.getOldLocation(t,e);return null==i?null:":w="+Math.trunc(i[0])+","+Math.trunc(i[1])+" l="+Math.trunc(i[2])+","+Math.trunc(i[3])+" "+i[4]}},{key:"getDirection",value:function(e){return e==t.R?180:90}},{key:"getFloorAltitude",value:function(t,e){var i=this.getHeight(t,e),n=i+1;return i+(Math.trunc(this.getHeight(t-1,e-1))==n||Math.trunc(this.getHeight(t,e-1))==n||Math.trunc(this.getHeight(t+1,e-1))==n||Math.trunc(this.getHeight(t-1,e))==n||Math.trunc(this.getHeight(t+1,e))==n||Math.trunc(this.getHeight(t-1,e+1))==n||Math.trunc(this.getHeight(t,e+1))==n||Math.trunc(this.getHeight(t+1,e+1))==n?.5:0)}},{key:"isRoomTile",value:function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height&&this._heightMap[e][t]>=0}}]),t}();_S.DEFAULT_SCALE=32,_S.L="l",_S.R="r";var lS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._connection=void 0,n._roomCreator=void 0,n._planeParser=void 0,n._latestEntryTileEvent=void 0,n._currentRoomId=void 0,n._ownUserId=void 0,n._initialConnection=void 0,n._guideId=void 0,n._requesterId=void 0,n._connection=null,n._roomCreator=t,n._planeParser=new Xc,n._latestEntryTileEvent=null,n._currentRoomId=0,n._ownUserId=0,n._initialConnection=!0,n._guideId=-1,n._requesterId=-1,n}return Object(a.a)(i,[{key:"onDispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this),this._connection=null,this._roomCreator=null,this._latestEntryTileEvent=null,this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}},{key:"setConnection",value:function(t){!this._connection&&t&&(this._connection=t,this._connection.addMessageEvent(new pO(this.onUserInfoEvent.bind(this))),this._connection.addMessageEvent(new Lg(this.onRoomReadyMessageEvent.bind(this))),this._connection.addMessageEvent(new Cg(this.onRoomPaintEvent.bind(this))),this._connection.addMessageEvent(new Sg(this.onRoomModelEvent.bind(this))),this._connection.addMessageEvent(new Ng(this.onRoomHeightMapEvent.bind(this))),this._connection.addMessageEvent(new Dg(this.onRoomHeightMapUpdateEvent.bind(this))),this._connection.addMessageEvent(new Ug(this.onRoomThicknessEvent.bind(this))),this._connection.addMessageEvent(new jg(this.onRoomDoorEvent.bind(this))),this._connection.addMessageEvent(new ig(this.onRoomRollingEvent.bind(this))),this._connection.addMessageEvent(new eg(this.onObjectsDataUpdateEvent.bind(this))),this._connection.addMessageEvent(new cg(this.onFurnitureAliasesEvent.bind(this))),this._connection.addMessageEvent(new rg(this.onFurnitureFloorAddEvent.bind(this))),this._connection.addMessageEvent(new ag(this.onFurnitureFloorEvent.bind(this))),this._connection.addMessageEvent(new og(this.onFurnitureFloorRemoveEvent.bind(this))),this._connection.addMessageEvent(new ug(this.onFurnitureFloorUpdateEvent.bind(this))),this._connection.addMessageEvent(new mg(this.onFurnitureWallAddEvent.bind(this))),this._connection.addMessageEvent(new Ig(this.onFurnitureWallEvent.bind(this))),this._connection.addMessageEvent(new bg(this.onFurnitureWallRemoveEvent.bind(this))),this._connection.addMessageEvent(new Tg(this.onFurnitureWallUpdateEvent.bind(this))),this._connection.addMessageEvent(new hg(this.onFurnitureDataEvent.bind(this))),this._connection.addMessageEvent(new vg(this.onItemDataUpdateMessageEvent.bind(this))),this._connection.addMessageEvent(new Eg(this.onOneWayDoorStatusMessageEvent.bind(this))),this._connection.addMessageEvent(new Wg(this.onRoomUnitDanceEvent.bind(this))),this._connection.addMessageEvent(new Kg(this.onRoomUnitEffectEvent.bind(this))),this._connection.addMessageEvent(new Xg(this.onRoomUnitEvent.bind(this))),this._connection.addMessageEvent(new qg(this.onRoomUnitExpressionEvent.bind(this))),this._connection.addMessageEvent(new Qg(this.onRoomUnitHandItemEvent.bind(this))),this._connection.addMessageEvent(new Jg(this.onRoomUnitIdleEvent.bind(this))),this._connection.addMessageEvent(new $g(this.onRoomUnitInfoEvent.bind(this))),this._connection.addMessageEvent(new tO(this.onRoomUnitNumberEvent.bind(this))),this._connection.addMessageEvent(new eO(this.onRoomUnitRemoveEvent.bind(this))),this._connection.addMessageEvent(new iO(this.onRoomUnitStatusEvent.bind(this))),this._connection.addMessageEvent(new Hg(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new Vg(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new zg(this.onRoomUnitChatEvent.bind(this))),this._connection.addMessageEvent(new Yg(this.onRoomUnitTypingEvent.bind(this))),this._connection.addMessageEvent(new wg(this.onPetFigureUpdateEvent.bind(this))),this._connection.addMessageEvent(new Pg(this.onPetExperienceEvent.bind(this))),this._connection.addMessageEvent(new xg(this.onYouArePlayingGameEvent.bind(this))),this._connection.addMessageEvent(new sg(this.onDiceValueMessageEvent.bind(this))),this._connection.addMessageEvent(new SO(this.onIgnoreResultEvent.bind(this))),this._connection.addMessageEvent(new wd(this.onGuideSessionStartedMessageEvent.bind(this))),this._connection.addMessageEvent(new Dd(this.onGuideSessionEndedMessageEvent.bind(this))),this._connection.addMessageEvent(new Md(this.onGuideSessionErrorMessageEvent.bind(this))))}},{key:"setRoomId",value:function(t){0!==this._currentRoomId&&this._roomCreator&&this._roomCreator.destroyRoom(this._currentRoomId),this._currentRoomId=t,this._latestEntryTileEvent=null}},{key:"clearRoomId",value:function(){this._currentRoomId=0,this._latestEntryTileEvent=null}},{key:"onUserInfoEvent",value:function(t){if(t instanceof pO&&t.connection){var e=t.getParser();e&&(this._ownUserId=e.userInfo.userId)}}},{key:"onRoomReadyMessageEvent",value:function(t){var e=t.getParser();if(this._currentRoomId!==e.roomId&&this.setRoomId(e.roomId),this._roomCreator&&this._roomCreator.setRoomInstanceModelName(e.roomId,e.name),this._initialConnection)return t.connection.send(new YI),void(this._initialConnection=!1);t.connection.send(new gb)}},{key:"onRoomPaintEvent",value:function(t){if(t instanceof Cg){var e=t.getParser();if(e){var i=e.floorType,n=e.wallType,s=e.landscapeType;this._roomCreator&&this._roomCreator.updateRoomInstancePlaneType(this._currentRoomId,i,n,s)}}}},{key:"onRoomModelEvent",value:function(t){if(t instanceof Sg&&t.connection&&this._roomCreator){var e=t.getParser();if(e){var i=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(i){this._planeParser.reset();var n=e.width,s=e.height;this._planeParser.initializeTileMap(n,s);var r=null;this._latestEntryTileEvent&&(r=this._latestEntryTileEvent.getParser());for(var a=-1,o=-1,u=0,c=0,h=0;h<s;){for(var _=0;_<n;){var l=e.getHeight(_,h);(h>0&&h<s-1||_>0&&_<n-1)&&l!=Xc.TILE_BLOCKED&&(null==r||_==r.x&&h==r.y)&&(e.getHeight(_,h-1)==Xc.TILE_BLOCKED&&e.getHeight(_-1,h)==Xc.TILE_BLOCKED&&e.getHeight(_,h+1)==Xc.TILE_BLOCKED&&(a=_+.5,o=h,u=l,c=90),e.getHeight(_,h-1)==Xc.TILE_BLOCKED&&e.getHeight(_-1,h)==Xc.TILE_BLOCKED&&e.getHeight(_+1,h)==Xc.TILE_BLOCKED&&(a=_,o=h+.5,u=l,c=180)),this._planeParser.setTileHeight(_,h,l),_++}h++}this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),u),this._planeParser.initializeFromTileData(e.wallHeight),this._planeParser.setTileHeight(Math.floor(a),Math.floor(o),u+this._planeParser.wallHeight),64===e.scale?(this._planeParser.restrictsDragging=!0,this._planeParser.restrictsScaling=!0,this._planeParser.restrictedScale=.5):(this._planeParser.restrictsDragging=!1,this._planeParser.restrictsScaling=!1,this._planeParser.restrictedScale=1),i.scale=_S.DEFAULT_SCALE,i.initialize(n,s,this._planeParser.floorHeight);for(var d=e.height-1;d>=0;){for(var f=e.width-1;f>=0;)i.setHeight(f,d,this._planeParser.getTileHeight(f,d)),f--;d--}var v=this._planeParser.getMapData();v.doors.push({x:a,y:o,z:u,dir:c}),this._roomCreator.createRoomInstance(this._currentRoomId,v)}}}}},{key:"onRoomHeightMapEvent",value:function(t){if(t instanceof Ng&&t.connection&&this._roomCreator){var e=t.getParser();if(e){for(var i=e.width,n=e.height,s=new hS(i,n),r=0;r<n;){for(var a=0;a<i;)s.setTileHeight(a,r,e.getTileHeight(a,r)),s.setStackingBlocked(a,r,e.getStackingBlocked(a,r)),s.setIsRoomTile(a,r,e.isRoomTile(a,r)),a++;r++}this._roomCreator.setFurnitureStackingHeightMap(this._currentRoomId,s)}}}},{key:"onRoomHeightMapUpdateEvent",value:function(t){if(t instanceof Dg&&t.connection&&this._roomCreator){var e=t.getParser();if(e){var i=this._roomCreator.getFurnitureStackingHeightMap(this._currentRoomId);if(i){for(;e.next();)i.setTileHeight(e.x,e.y,e.tileHeight()),i.setStackingBlocked(e.x,e.y,e.isStackingBlocked()),i.setIsRoomTile(e.x,e.y,e.isRoomTile());this._roomCreator.refreshTileObjectMap(this._currentRoomId,"RoomMessageHandler.onRoomHeightMapUpdateEvent()")}}}}},{key:"onRoomThicknessEvent",value:function(t){if(t instanceof Ug){var e=t.getParser();if(e){var i=!e.hideWalls,n=e.thicknessWall,s=e.thicknessFloor;this._roomCreator&&(this._roomCreator.updateRoomInstancePlaneVisibility(this._currentRoomId,i,!0),this._roomCreator.updateRoomInstancePlaneThickness(this._currentRoomId,n,s))}}}},{key:"onRoomDoorEvent",value:function(t){t instanceof jg&&(this._latestEntryTileEvent=t)}},{key:"onRoomRollingEvent",value:function(t){if(t instanceof ig&&t.connection&&this._roomCreator){var e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,1,null),this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.rollerId,null,null,2,null);var i=e.itemsRolling;if(i&&i.length){var n,r=Object(s.a)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;a&&this._roomCreator.rollRoomObjectFloor(this._currentRoomId,a.id,a.location,a.targetLocation)}}catch(h){r.e(h)}finally{r.f()}}var o=e.unitRolling;if(o){this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,o.id,o.location,o.targetLocation);var u=this._roomCreator.getRoomObjectUser(this._currentRoomId,o.id);if(u&&u.type!==lt.MONSTER_PLANT){var c="std";switch(o.movementType){case vc.MOVE:c="mv";break;case vc.SLIDE:c="std"}this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,o.id,c)}}}}},{key:"onObjectsDataUpdateEvent",value:function(t){if(t instanceof eg&&t.connection&&this._roomCreator){var e=t.getParser();if(e){var i,n=Object(s.a)(e.objects);try{for(n.s();!(i=n.n()).done;){var r=i.value;this._roomCreator.updateRoomObjectFloor(this._currentRoomId,r.id,null,null,r.state,r.data)}}catch(a){n.e(a)}finally{n.f()}}}}},{key:"onFurnitureAliasesEvent",value:function(t){if(t instanceof cg&&t.connection&&this._roomCreator){t.getParser().aliases;this._connection.send(new gb)}}},{key:"onFurnitureFloorAddEvent",value:function(t){if(t instanceof rg&&t.connection&&this._roomCreator){var e=t.getParser().item;e&&this.addRoomObjectFurnitureFloor(this._currentRoomId,e)}}},{key:"onFurnitureFloorEvent",value:function(t){if(t instanceof ag&&t.connection&&this._roomCreator){var e=t.getParser();if(e)for(var i=e.items.length,n=0;n<i;){var s=e.items[n];s&&this.addRoomObjectFurnitureFloor(this._currentRoomId,s),n++}}}},{key:"onFurnitureFloorRemoveEvent",value:function(t){var e=this;if(t instanceof og&&t.connection&&this._roomCreator){var i=t.getParser();i&&(i.delay>0?setTimeout((function(){e._roomCreator.removeRoomObjectFloor(e._currentRoomId,i.itemId,i.isExpired?-1:i.userId,!0)}),i.delay):this._roomCreator.removeRoomObjectFloor(this._currentRoomId,i.itemId,i.isExpired?-1:i.userId,!0))}}},{key:"onFurnitureFloorUpdateEvent",value:function(t){if(t instanceof ug&&t.connection&&this._roomCreator){var e=t.getParser().item;if(e){var i=new Et(e.x,e.y,e.z),n=new Et(e.direction);this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,i,n,e.data.state,e.data,e.extra),this._roomCreator.updateRoomObjectFloorHeight(this._currentRoomId,e.itemId,e.stackHeight),this._roomCreator.updateRoomObjectFloorExpiration(this._currentRoomId,e.itemId,e.expires)}}}},{key:"onFurnitureWallAddEvent",value:function(t){if(t instanceof mg&&t.connection&&this._roomCreator){var e=t.getParser().item;e&&this.addRoomObjectFurnitureWall(this._currentRoomId,e)}}},{key:"onFurnitureWallEvent",value:function(t){if(t instanceof Ig&&t.connection&&this._roomCreator){var e=t.getParser();if(e)for(var i=e.items.length,n=0;n<i;){var s=e.items[n];s&&this.addRoomObjectFurnitureWall(this._currentRoomId,s),n++}}}},{key:"onFurnitureWallRemoveEvent",value:function(t){if(t instanceof bg&&t.connection&&this._roomCreator){var e=t.getParser();e&&this._roomCreator.removeRoomObjectWall(this._currentRoomId,e.itemId,e.userId)}}},{key:"onFurnitureWallUpdateEvent",value:function(t){if(t instanceof Tg&&t.connection&&this._roomCreator){var e=this._roomCreator.getLegacyWallGeometry(this._currentRoomId);if(e){var i=t.getParser().item;if(i){var n=e.getLocation(i.width,i.height,i.localX,i.localY,i.direction),s=new Et(e.getDirection(i.direction));this._roomCreator.updateRoomObjectWall(this._currentRoomId,i.itemId,n,s,i.state,i.stuffData),this._roomCreator.updateRoomObjectWallExpiration(this._currentRoomId,i.itemId,i.secondsToExpiration)}}}}},{key:"onFurnitureDataEvent",value:function(t){if(t instanceof hg&&t.connection&&this._roomCreator){var e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.furnitureId,null,null,e.objectData.state,e.objectData)}}},{key:"onItemDataUpdateMessageEvent",value:function(t){if(t instanceof vg&&t.connection&&this._roomCreator){var e=t.getParser();this._roomCreator.updateRoomObjectWallItemData(this._currentRoomId,e.furnitureId,e.data)}}},{key:"onOneWayDoorStatusMessageEvent",value:function(t){if(t instanceof Eg&&t.connection&&this._roomCreator){var e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.state,new Ta)}}},{key:"onDiceValueMessageEvent",value:function(t){if(t instanceof sg&&t.connection&&this._roomCreator){var e=t.getParser();this._roomCreator.updateRoomObjectFloor(this._currentRoomId,e.itemId,null,null,e.value,new Ta)}}},{key:"onRoomUnitDanceEvent",value:function(t){t instanceof Wg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,dt.FIGURE_DANCE,t.getParser().danceId)}},{key:"onRoomUnitEffectEvent",value:function(t){t instanceof Kg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserEffect(this._currentRoomId,t.getParser().unitId,t.getParser().effectId,t.getParser().delay)}},{key:"onRoomUnitEvent",value:function(t){if(t instanceof Xg&&t.connection&&this._roomCreator){var e=t.getParser().users;if(e&&e.length){var i,n=Object(s.a)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){var a=new Et(r.x,r.y,r.z),o=new Et(r.dir);this._roomCreator.addRoomObjectUser(this._currentRoomId,r.roomIndex,a,o,r.dir,r.userType,r.figure),r.webID===this._ownUserId&&(this._roomCreator.setRoomSessionOwnUser(this._currentRoomId,r.roomIndex),this._roomCreator.updateRoomObjectUserOwn(this._currentRoomId,r.roomIndex)),this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,r.roomIndex,r.figure,r.sex,r.subType,r.isRiding),lt.getTypeString(r.userType)===lt.PET&&this._roomCreator.getPetTypeId(r.figure)===ds.MONSTERPLANT&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,r.roomIndex,r.petPosture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,r.roomIndex,dt.FIGURE_IS_MUTED,this._roomCreator.sessionDataManager.isUserIgnored(r.name)?1:0)}}}catch(u){n.e(u)}finally{n.f()}this.updateGuideMarker()}}}},{key:"onRoomUnitExpressionEvent",value:function(t){t instanceof qg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,dt.FIGURE_EXPRESSION,t.getParser().expression)}},{key:"onRoomUnitHandItemEvent",value:function(t){t instanceof Qg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,dt.FIGURE_CARRY_OBJECT,t.getParser().handId)}},{key:"onRoomUnitIdleEvent",value:function(t){t instanceof Jg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,dt.FIGURE_SLEEP,t.getParser().isIdle?1:0)}},{key:"onRoomUnitInfoEvent",value:function(t){t instanceof $g&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,t.getParser().unitId,t.getParser().figure,t.getParser().gender)}},{key:"onRoomUnitNumberEvent",value:function(t){if(t instanceof tO&&t.connection&&this._roomCreator){var e=t.getParser();e&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.unitId,dt.FIGURE_NUMBER_VALUE,e.value)}}},{key:"onRoomUnitRemoveEvent",value:function(t){t instanceof eO&&t.connection&&this._roomCreator&&(this._roomCreator.removeRoomObjectUser(this._currentRoomId,t.getParser().unitId),this.updateGuideMarker())}},{key:"onRoomUnitStatusEvent",value:function(t){if(t instanceof iO&&t.connection&&this._roomCreator){var e=t.getParser().statuses;if(e&&e.length){var i=this._roomCreator.getRoomInstance(this._currentRoomId);if(i){var n,r=i.model.getValue(cS.ROOM_Z_SCALE)||1,a=Object(s.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){var u=o.height;u&&(u/=r);var c=new Et(o.x,o.y,o.z+u),h=new Et(o.direction),_=null;o.didMove&&(_=new Et(o.targetX,o.targetY,o.targetZ)),this._roomCreator.updateRoomObjectUserLocation(this._currentRoomId,o.id,c,_,o.canStandUp,u,h,o.headDirection),this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,o.id,null);var l=!0,d=!1,f=dt.STD,v="";if(o.actions&&o.actions.length){var g,O=Object(s.a)(o.actions);try{for(O.s();!(g=O.n()).done;){var y=g.value;if(y)switch(y.action){case"flatctrl":this._roomCreator.updateRoomObjectUserFlatControl(this._currentRoomId,o.id,y.value);break;case"sign":1===o.actions.length&&(l=!1),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,o.id,dt.FIGURE_SIGN,parseInt(y.value));break;case"gst":1===o.actions.length&&(l=!1),this._roomCreator.updateRoomObjectUserPetGesture(this._currentRoomId,o.id,y.value);break;case"wav":case"mv":default:d=!0,f=y.action,v=y.value;case"trd":}}}catch(E){O.e(E)}finally{O.f()}}d?this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,o.id,f,v):l&&this._roomCreator.updateRoomObjectUserPosture(this._currentRoomId,o.id,dt.STD,"")}}}catch(E){a.e(E)}finally{a.f()}this.updateGuideMarker()}}}}},{key:"onRoomUnitChatEvent",value:function(t){if(t.connection&&this._roomCreator){var e=t.getParser();e&&(this._roomCreator.updateRoomObjectUserGesture(this._currentRoomId,e.roomIndex,e.gesture),this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.roomIndex,dt.FIGURE_TALK,e.message.length/10))}}},{key:"onRoomUnitTypingEvent",value:function(t){t instanceof Yg&&t.connection&&this._roomCreator&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,t.getParser().unitId,dt.FIGURE_IS_TYPING,t.getParser().isTyping?1:0)}},{key:"onPetFigureUpdateEvent",value:function(t){if(t instanceof wg&&t.connection&&this._roomCreator){var e=t.getParser();e&&this._roomCreator.updateRoomObjectUserFigure(this._currentRoomId,e.roomIndex,e.figureData.figuredata,"","",e.isRiding)}}},{key:"onPetExperienceEvent",value:function(t){var e=t.getParser();e&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,e.roomIndex,dt.FIGURE_GAINED_EXPERIENCE,e.gainedExperience)}},{key:"onYouArePlayingGameEvent",value:function(t){if(t){var e=t.getParser();e&&this._roomCreator.setRoomEngineGameMode(this._currentRoomId,e.isPlaying)}}},{key:"addRoomObjectFurnitureFloor",value:function(t,e){if(e&&this._roomCreator){var i=new Et(e.x,e.y,e.z),n=new Et(e.direction);e.spriteName?this._roomCreator.addFurnitureFloorByTypeName(t,e.itemId,e.spriteName,i,n,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight):this._roomCreator.addFurnitureFloor(t,e.itemId,e.spriteId,i,n,e.state,e.data,e.extra,e.expires,e.usagePolicy,e.userId,e.username,!0,!0,e.stackHeight)}}},{key:"addRoomObjectFurnitureWall",value:function(t,e){if(e&&this._roomCreator){var i=this._roomCreator.getLegacyWallGeometry(t);if(i){var n=null;e.isOldFormat||(n=i.getLocation(e.width,e.height,e.localX,e.localY,e.direction));var s=new Et(i.getDirection(e.direction));this._roomCreator.addFurnitureWall(t,e.itemId,e.spriteId,n,s,e.state,e.stuffData,e.secondsToExpiration,e.usagePolicy,e.userId,e.username)}}}},{key:"onIgnoreResultEvent",value:function(t){if(t){var e=t.getParser();if(e){var i=this._roomCreator.roomSessionManager.getSession(this._currentRoomId);if(i){var n=i.userDataManager.getUserDataByName(e.name);if(n)switch(e.result){case 1:case 2:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.roomIndex,dt.FIGURE_IS_MUTED,1);case 3:return void this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.roomIndex,dt.FIGURE_IS_MUTED,0)}}}}}},{key:"onGuideSessionStartedMessageEvent",value:function(t){var e=t.getParser();this._guideId=e.guideUserId,this._requesterId=e.requesterUserId,this.updateGuideMarker()}},{key:"onGuideSessionEndedMessageEvent",value:function(t){this.removeGuideMarker()}},{key:"onGuideSessionErrorMessageEvent",value:function(t){this.removeGuideMarker()}},{key:"updateGuideMarker",value:function(){var t=this._roomCreator.sessionDataManager.userId;this.setUserGuideStatus(this._guideId,this._requesterId===t?uk.GUIDE:uk.NONE),this.setUserGuideStatus(this._requesterId,this._guideId===t?uk.REQUESTER:uk.NONE)}},{key:"removeGuideMarker",value:function(){this.setUserGuideStatus(this._guideId,uk.NONE),this.setUserGuideStatus(this._requesterId,uk.NONE),this._guideId=-1,this._requesterId=-1}},{key:"setUserGuideStatus",value:function(t,e){if(this._roomCreator&&this._roomCreator.roomSessionManager){var i=this._roomCreator.roomSessionManager.getSession(this._currentRoomId);if(i){var n=i.userDataManager.getDataByType(t,mh.USER);n&&this._roomCreator.updateRoomObjectUserAction(this._currentRoomId,n.roomIndex,dt.FIGURE_GUIDE_STATUS,e)}}}},{key:"currentRoomId",get:function(){return this._currentRoomId}}]),i}(m),dS=Object(a.a)((function t(){Object(r.a)(this,t)}));dS.CATALOG="catalog",dS.INVENTORY="inventory";var fS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._selected=void 0,n._selected=t,n}return Object(a.a)(i,[{key:"selected",get:function(){return this._selected}}]),i}(SR),vS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._selected=void 0,n._selected=t,n}return Object(a.a)(i,[{key:"selected",get:function(){return this._selected}}]),i}(SR),gS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(r.a)(this,i),(o=e.call(this,t,null))._height=void 0,o._sourceEventId=void 0,o._visible=void 0,o._toggleVisibility=void 0,o._height=n,o._visible=s,o._sourceEventId=a,o._toggleVisibility=u,o}return Object(a.a)(i,[{key:"height",get:function(){return this._height}},{key:"visible",get:function(){return this._visible}},{key:"sourceEventId",get:function(){return this._sourceEventId}},{key:"toggleVisibility",get:function(){return this._toggleVisibility}}]),i}(Ve),OS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,null,null))._type=void 0,n._type=t,n}return Object(a.a)(i,[{key:"type",get:function(){return this._type}}]),i}(Ve);OS.ENABLED="ROVUM_ENABLED",OS.DISABLED="ROVUM_DISABLED";var yS=Object(a.a)((function t(){Object(r.a)(this,t)}));yS.OBJECT_UNDEFINED="OBJECT_UNDEFINED",yS.OBJECT_MOVE="OBJECT_MOVE",yS.OBJECT_PLACE="OBJECT_PLACE",yS.OBJECT_ROTATE_POSITIVE="OBJECT_ROTATE_POSITIVE",yS.OBJECT_ROTATE_NEGATIVE="OBJECT_ROTATE_NEGATIVE",yS.OBJECT_MOVE_TO="OBJECT_MOVE_TO",yS.OBJECT_PLACE_TO="OBJECT_PLACE_TO",yS.OBJECT_PICKUP="OBJECT_PICKUP",yS.OBJECT_PICKUP_BOT="OBJECT_PICKUP_BOT",yS.OBJECT_PICKUP_PET="OBJECT_PICKUP_PET",yS.OBJECT_EJECT="OBJECT_EJECT",yS.OBJECT_SAVE_STUFF_DATA="OBJECT_SAVE_STUFF_DATA";var ES=function(){function t(e,i,n,s,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,_=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;Object(r.a)(this,t),this._id=0,this._category=0,this._operation="",this._loc=null,this._dir=null,this._typeId=0,this._instanceData=null,this._stuffData=null,this._state=-1,this._animFrame=-1,this._posture=null,this._id=e,this._category=i,this._operation=n,this._loc=new Et,this._loc.assign(s),this._dir=new Et,this._dir.assign(a),this._typeId=o,this._instanceData=u,this._stuffData=c,this._state=h,this._animFrame=_,this._posture=l}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"category",get:function(){return this._category}},{key:"operation",get:function(){return this._operation}},{key:"loc",get:function(){return this._loc}},{key:"dir",get:function(){return this._dir}},{key:"typeId",get:function(){return this._typeId}},{key:"instanceData",get:function(){return this._instanceData}},{key:"stuffData",get:function(){return this._stuffData}},{key:"state",get:function(){return this._state}},{key:"animFrame",get:function(){return this._animFrame}},{key:"posture",get:function(){return this._posture}},{key:"dispose",value:function(){this._loc=null,this._dir=null}}]),t}(),pS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._roomEngine=void 0,n._eventIds=void 0,n._selectedAvatarId=void 0,n._selectedObjectId=void 0,n._selectedObjectCategory=void 0,n._whereYouClickIsWhereYouGo=void 0,n._objectPlacementSource=void 0,n._roomEngine=t,n._eventIds=new Map,n._selectedAvatarId=-1,n._selectedObjectId=-1,n._selectedObjectCategory=-2,n._whereYouClickIsWhereYouGo=!0,n._objectPlacementSource=null,n.onRoomEngineObjectEvent=n.onRoomEngineObjectEvent.bind(Object(l.a)(n)),n._roomEngine.events.addEventListener(eR.ADDED,n.onRoomEngineObjectEvent),n}return Object(a.a)(i,[{key:"dispose",value:function(){this._eventIds&&(this._eventIds=null),this._roomEngine.events.removeEventListener(eR.ADDED,this.onRoomEngineObjectEvent),this._roomEngine=null}},{key:"onRoomEngineObjectEvent",value:function(t){var e=this.getSelectedRoomObjectData(t.roomId);if(e&&e.operation===yS.OBJECT_PLACE&&e.id===t.objectId){var i=this._roomEngine.getRoomObject(t.roomId,e.id,e.category);if(i&&i.model&&e.category===_t.FLOOR){var n=i.model.getValue(dt.FURNITURE_ALLOWED_DIRECTIONS);if(n&&n.length){var s=new Et(n[0]);if(i.setDirection(s),this.updateSelectedObjectData(t.roomId,e.id,e.category,e.loc,s,e.operation,e.typeId,e.instanceData,e.stuffData,e.state,e.animFrame,e.posture),!(e=this.getSelectedRoomObjectData(t.roomId)))return}}this.setFurnitureAlphaMultiplier(i,.5)}}},{key:"processRoomCanvasMouseEvent",value:function(t,e,i){if(t&&e&&!ti.isRunning()){var n=e.type,s=this._roomEngine.getRoomObjectCategoryForType(n);if(s===_t.ROOM||this._roomEngine.isPlayingGame()&&s===_t.UNIT||(s=_t.MINIMUM),this.getMouseEventId(s,t.type)===t.eventId){if(t.type===_i.MOUSE_CLICK||t.type===_i.DOUBLE_CLICK||t.type===_i.MOUSE_DOWN||t.type===_i.MOUSE_UP||t.type===_i.MOUSE_MOVE)return}else t.eventId&&this.setMouseEventId(s,t.type,t.eventId);e.mouseHandler&&e.mouseHandler.mouseEvent(t,i)}}},{key:"processRoomObjectPlacement",value:function(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this._objectPlacementSource=t;var h=new Et(-100,-100),_=new Et(0);return this.setSelectedRoomObjectData(e,i,n,h,_,yS.OBJECT_PLACE,s,r,a,o,u,c),this._roomEngine&&(this._roomEngine.setObjectMoverIconSprite(s,n,!1,r,a,o,u,c),this._roomEngine.setObjectMoverIconSpriteVisible(!1)),!0}},{key:"cancelRoomObjectInsert",value:function(t){return this.resetSelectedObjectData(t),!0}},{key:"getMouseEventId",value:function(t,e){var i=this._eventIds.get(t);return i&&i.get(e)||null}},{key:"setMouseEventId",value:function(t,e,i){var n=this._eventIds.get(t);n||(n=new Map,this._eventIds.set(t,n)),n.delete(e),n.set(e,i)}},{key:"handleRoomObjectEvent",value:function(t,e){if(t)if(t instanceof Be)this.handleRoomObjectMouseEvent(t,e);else switch(t.type){case mR.STATE_CHANGE:case mR.STATE_RANDOM:return void this.onRoomObjectStateChangedEvent(t,e);case _R.DIMMER_STATE:return void this.onRoomObjectDimmerStateUpdateEvent(t,e);case gR.POSITION_CHANGED:case gR.OBJECT_REMOVED:return void this.handleSelectedObjectRemove(t,e);case TR.OPEN_WIDGET:case TR.CLOSE_WIDGET:case TR.OPEN_FURNI_CONTEXT_MENU:case TR.CLOSE_FURNI_CONTEXT_MENU:case TR.PLACEHOLDER:case TR.CREDITFURNI:case TR.STICKIE:case TR.PRESENT:case TR.TROPHY:case TR.TEASER:case TR.ECOTRONBOX:case TR.DIMMER:case TR.WIDGET_REMOVE_DIMMER:case TR.CLOTHING_CHANGE:case TR.JUKEBOX_PLAYLIST_EDITOR:case TR.MANNEQUIN:case TR.PET_PRODUCT_MENU:case TR.GUILD_FURNI_CONTEXT_MENU:case TR.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:case TR.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:case TR.BACKGROUND_COLOR:case TR.MYSTERYBOX_OPEN_DIALOG:case TR.EFFECTBOX_OPEN_DIALOG:case TR.MYSTERYTROPHY_OPEN_DIALOG:case TR.ACHIEVEMENT_RESOLUTION_OPEN:case TR.ACHIEVEMENT_RESOLUTION_ENGRAVING:case TR.ACHIEVEMENT_RESOLUTION_FAILED:case TR.FRIEND_FURNITURE_CONFIRM:case TR.FRIEND_FURNITURE_ENGRAVING:case TR.BADGE_DISPLAY_ENGRAVING:case TR.HIGH_SCORE_DISPLAY:case TR.HIDE_HIGH_SCORE_DISPLAY:case TR.INERNAL_LINK:case TR.ROOM_LINK:return void this.onRoomObjectWidgetRequestEvent(t,e);case dR.DICE_ACTIVATE:case dR.DICE_OFF:case dR.USE_HABBOWHEEL:case dR.STICKIE:case dR.ENTER_ONEWAYDOOR:return void this.onRoomObjectFurnitureActionEvent(t,e);case dR.SOUND_MACHINE_INIT:case dR.SOUND_MACHINE_START:case dR.SOUND_MACHINE_STOP:case dR.SOUND_MACHINE_DISPOSE:return void this.handleObjectSoundMachineEvent(t,e);case dR.JUKEBOX_INIT:case dR.JUKEBOX_START:case dR.JUKEBOX_MACHINE_STOP:case dR.JUKEBOX_DISPOSE:return void this.handleObjectJukeboxEvent(t,e);case lR.ADD_HOLE:case lR.REMOVE_HOLE:return void this.onRoomObjectFloorHoleEvent(t,e);case yR.ROOM_AD_FURNI_CLICK:case yR.ROOM_AD_FURNI_DOUBLE_CLICK:case yR.ROOM_AD_TOOLTIP_SHOW:case yR.ROOM_AD_TOOLTIP_HIDE:case yR.ROOM_AD_LOAD_IMAGE:return void this.onRoomObjectRoomAdEvent(t,e);case cR.LOAD_BADGE:return void this.onRoomObjectBadgeAssetEvent(t,e);case dR.MOUSE_ARROW:case dR.MOUSE_BUTTON:return void this.handleMousePointer(t,e);case OR.PLAY_SOUND:case OR.PLAY_SOUND_AT_PITCH:return void this.handleRoomObjectPlaySoundEvent(t,e);case ER.ROOM_OBJECT_INITIALIZED:case ER.ROOM_OBJECT_DISPOSED:case ER.PLAY_SAMPLE:case ER.CHANGE_PITCH:return void this.handleRoomObjectSamplePlaybackEvent(t,e);case vR.ROOM_BACKGROUND_COLOR:return void this.onHSLColorEnableEvent(t,e);case hR.RODRE_CURRENT_USER_ID:case hR.RODRE_URL_PREFIX:return void this.onRoomObjectDataRequestEvent(t,e);default:return void I.log("Unhandled Event: ".concat(t.constructor.name),"Object ID: ".concat(t.object.id))}}},{key:"handleRoomObjectMouseEvent",value:function(t,e){if(t&&t.type)switch(t.type){case Be.CLICK:return void this.handleRoomObjectMouseClickEvent(t,e);case Be.MOUSE_MOVE:return void this.handleRoomObjectMouseMoveEvent(t,e);case Be.MOUSE_DOWN:return void this.handleRoomObjectMouseDownEvent(t,e);case Be.MOUSE_DOWN_LONG:return void this.handleRoomObjectMouseDownLongEvent(t,e);case Be.MOUSE_ENTER:return void this.handleRoomObjectMouseEnterEvent(t,e);case Be.MOUSE_LEAVE:return void this.handleRoomObjectMouseLeaveEvent(t,e)}}},{key:"handleRoomObjectMouseClickEvent",value:function(t,e){if(t){var i=yS.OBJECT_UNDEFINED,n=this.getSelectedRoomObjectData(e);n&&(i=n.operation);var s=!1,r=!1;this._whereYouClickIsWhereYouGo&&(i&&i!==yS.OBJECT_UNDEFINED||(s=this.handleMoveTargetFurni(e,t)));var a=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(i){case yS.OBJECT_MOVE:a===_t.ROOM?n&&this.modifyRoomObject(e,n.id,n.category,yS.OBJECT_MOVE_TO):a===_t.UNIT&&(n&&t.objectType===lt.MONSTER_PLANT&&this.modifyRoomObject(e,n.id,n.category,yS.OBJECT_MOVE_TO),t.eventId&&this.setMouseEventId(_t.ROOM,_i.MOUSE_CLICK,t.eventId),this.placeObjectOnUser(e,t.objectId,a)),r=!0,-1!==t.objectId&&this.setSelectedObject(e,t.objectId,a);break;case yS.OBJECT_PLACE:if(a===_t.ROOM)this.placeObject(e,t instanceof IR,t instanceof bR);else if(a===_t.UNIT)switch(t.objectType){case lt.MONSTER_PLANT:case lt.RENTABLE_BOT:this.placeObject(e,t instanceof IR,t instanceof bR);break;default:t.eventId&&this.setMouseEventId(_t.ROOM,_i.MOUSE_CLICK,t.eventId),this.placeObjectOnUser(e,t.objectId,a)}break;case yS.OBJECT_UNDEFINED:a===_t.ROOM?!s&&t instanceof IR&&this.onRoomObjectTileMouseEvent(e,t):(this.setSelectedObject(e,t.objectId,a),r=!1,a===_t.UNIT?(!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==lt.RENTABLE_BOT?!t.ctrlKey||t.altKey||t.shiftKey||t.objectType!==lt.MONSTER_PLANT?t.ctrlKey||t.altKey||!t.shiftKey||t.objectType!==lt.MONSTER_PLANT||this.modifyRoomObject(e,t.objectId,a,yS.OBJECT_ROTATE_POSITIVE):this.modifyRoomObject(e,t.objectId,a,yS.OBJECT_PICKUP_PET):this.modifyRoomObject(e,t.objectId,a,yS.OBJECT_PICKUP_BOT),this._roomEngine.isPlayingGame()?r=!0:s=!0):a!==_t.FLOOR&&a!==_t.WALL||(t.altKey||t.ctrlKey||t.shiftKey)&&(t.ctrlKey||t.altKey||!t.shiftKey?!t.ctrlKey||t.altKey||t.shiftKey||this.modifyRoomObject(e,t.objectId,a,yS.OBJECT_PICKUP):a===_t.FLOOR&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.REQUEST_ROTATE,e,t.objectId,a)),this._roomEngine.isPlayingGame()?r=!0:s=!0),t.eventId&&(s&&this.setMouseEventId(_t.ROOM,_i.MOUSE_CLICK,t.eventId),r&&this.setMouseEventId(_t.MINIMUM,_i.MOUSE_CLICK,t.eventId)))}if(a===_t.ROOM){var o=this.getMouseEventId(_t.MINIMUM,_i.MOUSE_CLICK),u=this.getMouseEventId(_t.UNIT,_i.MOUSE_CLICK);o===t.eventId||u===t.eventId||r||(this.deselectObject(e),this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.DESELECTED,e,-1,_t.MINIMUM)),this.setSelectedAvatar(e,0,!1))}}}},{key:"handleRoomObjectMouseMoveEvent",value:function(t,e){if(t){var i=yS.OBJECT_UNDEFINED,n=this.getSelectedRoomObjectData(e);n&&(i=n.operation);var s=this._roomEngine.getRoomObjectCategoryForType(t.objectType);if(this._roomEngine){var r=this._roomEngine.getRoomObjectCursor(e);if(r&&r.logic){var a=null;t instanceof IR?a=this.handleMouseOverTile(t,e):t.object&&-1!==t.object.id?this._whereYouClickIsWhereYouGo&&(a=this.handleMouseOverObject(s,e,t)):a=new gS(null,0,!1,t.eventId),r.processUpdateMessage(a)}}switch(i){case yS.OBJECT_MOVE:return void(s===_t.ROOM&&this.handleObjectMove(t,e));case yS.OBJECT_PLACE:return void(s===_t.ROOM&&this.handleObjectPlace(t,e))}}}},{key:"handleRoomObjectMouseDownEvent",value:function(t,e){if(t){var i=yS.OBJECT_UNDEFINED,n=this.getSelectedRoomObjectData(e);n&&(i=n.operation);var s=this._roomEngine.getRoomObjectCategoryForType(t.objectType);i!==yS.OBJECT_UNDEFINED||s!==_t.FLOOR&&s!==_t.WALL&&t.objectType!==lt.MONSTER_PLANT||(t.altKey&&!t.ctrlKey&&!t.shiftKey||this.decorateModeMove(t))&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.REQUEST_MOVE,e,t.objectId,s))}}},{key:"handleRoomObjectMouseDownLongEvent",value:function(t,e){if(t){var i=yS.OBJECT_UNDEFINED,n=this.getSelectedRoomObjectData(e);n&&(i=n.operation);var s=this._roomEngine.getRoomObjectCategoryForType(t.objectType);i!==yS.OBJECT_UNDEFINED||s!==_t.FLOOR&&s!==_t.WALL&&t.objectType!==lt.MONSTER_PLANT||(!t.ctrlKey&&!t.shiftKey||this.decorateModeMove(t))&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.REQUEST_MANIPULATION,e,t.objectId,s))}}},{key:"handleRoomObjectMouseEnterEvent",value:function(t,e){var i=t.objectId,n=t.objectType,s=this._roomEngine.getRoomObjectCategoryForType(n);this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.MOUSE_ENTER,e,i,s))}},{key:"handleRoomObjectMouseLeaveEvent",value:function(t,e){var i=t.objectId,n=t.objectType,s=this._roomEngine.getRoomObjectCategoryForType(n);if(s!==_t.ROOM&&s===_t.UNIT){var r=this._roomEngine.getRoomObjectCursor(e);r&&r.processUpdateMessage(new ZR(0,null))}this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new eR(eR.MOUSE_LEAVE,e,i,s))}},{key:"onRoomObjectStateChangedEvent",value:function(t,e){if(t)switch(t.type){case mR.STATE_CHANGE:return void this.changeObjectState(e,t.object.id,t.object.type,t.state,!1);case mR.STATE_RANDOM:return void this.changeObjectState(e,t.object.id,t.object.type,t.state,!0)}}},{key:"onRoomObjectDimmerStateUpdateEvent",value:function(t,e){t&&(t.type!==_R.DIMMER_STATE||this._roomEngine.events.dispatchEvent(new tR(e,t.state,t.presetId,t.effectId,t.color,t.brightness)))}},{key:"handleSelectedObjectRemove",value:function(t,e){if(t&&this._roomEngine)switch(t.type){case gR.POSITION_CHANGED:var i=t.objectId,n=t.objectType,s=this._roomEngine.getRoomObjectCategoryForType(n),r=this._roomEngine.getRoomObject(e,i,s),a=this._roomEngine.getRoomObjectSelectionArrow(e);if(r&&a&&a.logic){var o=r.getLocation();a.logic.processUpdateMessage(new Ve(o,null))}return;case gR.OBJECT_REMOVED:return void this.setSelectedAvatar(e,0,!1)}}},{key:"onRoomObjectWidgetRequestEvent",value:function(t,e){if(t&&this._roomEngine){var i=t.objectId,n=t.objectType,s=this._roomEngine.getRoomObjectCategoryForType(n),r=this._roomEngine.events;if(r)switch(t.type){case TR.OPEN_WIDGET:return void r.dispatchEvent(new oR(oR.OPEN_WIDGET,e,i,s,t.object.logic.widget));case TR.CLOSE_WIDGET:return void r.dispatchEvent(new oR(oR.CLOSE_WIDGET,e,i,s,t.object.logic.widget));case TR.OPEN_FURNI_CONTEXT_MENU:return void r.dispatchEvent(new oR(oR.OPEN_FURNI_CONTEXT_MENU,e,i,s,t.object.logic.contextMenu));case TR.CLOSE_FURNI_CONTEXT_MENU:return void r.dispatchEvent(new oR(oR.CLOSE_FURNI_CONTEXT_MENU,e,i,s));case TR.PLACEHOLDER:return void r.dispatchEvent(new oR(oR.REQUEST_PLACEHOLDER,e,i,s));case TR.CREDITFURNI:return void r.dispatchEvent(new oR(oR.REQUEST_CREDITFURNI,e,i,s));case TR.STICKIE:return void r.dispatchEvent(new oR(oR.REQUEST_STICKIE,e,i,s));case TR.PRESENT:return void r.dispatchEvent(new oR(oR.REQUEST_PRESENT,e,i,s));case TR.TROPHY:return void r.dispatchEvent(new oR(oR.REQUEST_TROPHY,e,i,s));case TR.TEASER:return void r.dispatchEvent(new oR(oR.REQUEST_TEASER,e,i,s));case TR.ECOTRONBOX:return void r.dispatchEvent(new oR(oR.REQUEST_ECOTRONBOX,e,i,s));case TR.DIMMER:return void r.dispatchEvent(new oR(oR.REQUEST_DIMMER,e,i,s));case TR.WIDGET_REMOVE_DIMMER:return void r.dispatchEvent(new oR(oR.REMOVE_DIMMER,e,i,s));case TR.CLOTHING_CHANGE:return void r.dispatchEvent(new oR(oR.REQUEST_CLOTHING_CHANGE,e,i,s));case TR.JUKEBOX_PLAYLIST_EDITOR:return void r.dispatchEvent(new oR(oR.REQUEST_PLAYLIST_EDITOR,e,i,s));case TR.MANNEQUIN:return void r.dispatchEvent(new oR(oR.REQUEST_MANNEQUIN,e,i,s));case TR.PET_PRODUCT_MENU:return void r.dispatchEvent(new uR(uR.USE_PRODUCT_FROM_ROOM,e,i,s));case TR.GUILD_FURNI_CONTEXT_MENU:return void this._roomEngine.connection.send(new WI(t.objectId,t.object.model.getValue(dt.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID)));case TR.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:return void r.dispatchEvent(new oR(oR.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,e,i,s));case TR.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:return void r.dispatchEvent(new oR(oR.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,e,i,s));case TR.BACKGROUND_COLOR:return void r.dispatchEvent(new oR(oR.REQUEST_BACKGROUND_COLOR,e,i,s));case TR.MYSTERYBOX_OPEN_DIALOG:return void r.dispatchEvent(new oR(oR.REQUEST_MYSTERYBOX_OPEN_DIALOG,e,i,s));case TR.EFFECTBOX_OPEN_DIALOG:return void r.dispatchEvent(new oR(oR.REQUEST_EFFECTBOX_OPEN_DIALOG,e,i,s));case TR.MYSTERYTROPHY_OPEN_DIALOG:return void r.dispatchEvent(new oR(oR.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,e,i,s));case TR.ACHIEVEMENT_RESOLUTION_OPEN:return void this._roomEngine.connection.send(new hE(t.objectId,0));case TR.ACHIEVEMENT_RESOLUTION_ENGRAVING:return void r.dispatchEvent(new oR(oR.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,e,i,s));case TR.ACHIEVEMENT_RESOLUTION_FAILED:return void r.dispatchEvent(new oR(oR.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,e,i,s));case TR.FRIEND_FURNITURE_CONFIRM:return void r.dispatchEvent(new oR(oR.REQUEST_FRIEND_FURNITURE_CONFIRM,e,i,s));case TR.FRIEND_FURNITURE_ENGRAVING:return void r.dispatchEvent(new oR(oR.REQUEST_FRIEND_FURNITURE_ENGRAVING,e,i,s));case TR.BADGE_DISPLAY_ENGRAVING:return void r.dispatchEvent(new oR(oR.REQUEST_BADGE_DISPLAY_ENGRAVING,e,i,s));case TR.HIGH_SCORE_DISPLAY:return void r.dispatchEvent(new oR(oR.REQUEST_HIGH_SCORE_DISPLAY,e,i,s));case TR.HIDE_HIGH_SCORE_DISPLAY:return void r.dispatchEvent(new oR(oR.REQUEST_HIDE_HIGH_SCORE_DISPLAY,e,i,s));case TR.INERNAL_LINK:return void r.dispatchEvent(new oR(oR.REQUEST_INTERNAL_LINK,e,i,s));case TR.ROOM_LINK:return void r.dispatchEvent(new oR(oR.REQUEST_ROOM_LINK,e,i,s))}}}},{key:"onRoomObjectFurnitureActionEvent",value:function(t,e){t&&this.useObject(e,t.object.id,t.object.type,t.type)}},{key:"handleObjectSoundMachineEvent",value:function(t,e){if(t){var i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this.getSelectedRoomObjectData(e);if(!n||n.category!==i||n.id!==t.objectId||n.operation!==yS.OBJECT_PLACE)switch(t.type){case dR.SOUND_MACHINE_INIT:return void this._roomEngine.events.dispatchEvent(new pR(pR.SOUND_MACHINE_INIT,e,t.objectId,i));case dR.SOUND_MACHINE_START:return void this._roomEngine.events.dispatchEvent(new pR(pR.SOUND_MACHINE_SWITCHED_ON,e,t.objectId,i));case dR.SOUND_MACHINE_STOP:return void this._roomEngine.events.dispatchEvent(new pR(pR.SOUND_MACHINE_SWITCHED_OFF,e,t.objectId,i));case dR.SOUND_MACHINE_DISPOSE:return void this._roomEngine.events.dispatchEvent(new pR(pR.SOUND_MACHINE_DISPOSE,e,t.objectId,i))}}}},{key:"handleObjectJukeboxEvent",value:function(t,e){if(t){var i=this._roomEngine.getRoomObjectCategoryForType(t.objectType),n=this.getSelectedRoomObjectData(e);if(!n||n.category!==i||n.id!==t.objectId||n.operation!==yS.OBJECT_PLACE)switch(t.type){case dR.JUKEBOX_INIT:return void this._roomEngine.events.dispatchEvent(new pR(pR.JUKEBOX_INIT,e,t.objectId,i));case dR.JUKEBOX_START:return void this._roomEngine.events.dispatchEvent(new pR(pR.JUKEBOX_SWITCHED_ON,e,t.objectId,i));case dR.JUKEBOX_MACHINE_STOP:return void this._roomEngine.events.dispatchEvent(new pR(pR.JUKEBOX_SWITCHED_OFF,e,t.objectId,i));case dR.JUKEBOX_DISPOSE:return void this._roomEngine.events.dispatchEvent(new pR(pR.JUKEBOX_DISPOSE,e,t.objectId,i))}}}},{key:"onRoomObjectFloorHoleEvent",value:function(t,e){if(t)switch(t.type){case lR.ADD_HOLE:return void this._roomEngine.addRoomInstanceFloorHole(e,t.objectId);case lR.REMOVE_HOLE:return void this._roomEngine.removeRoomInstanceFloorHole(e,t.objectId)}}},{key:"onRoomObjectRoomAdEvent",value:function(t,e){if(t){var i=null;switch(t.type){case yR.ROOM_AD_FURNI_CLICK:this._roomEngine.events.dispatchEvent(t),t.clickUrl&&t.clickUrl.length>0&&gD.instance.createLinkEvent(t.clickUrl),i=rR.FURNI_CLICK;break;case yR.ROOM_AD_FURNI_DOUBLE_CLICK:if(t.clickUrl&&t.clickUrl.length>0){var n="CATALOG_PAGE";0===t.clickUrl.indexOf(n)&&gD.instance.createLinkEvent(t.clickUrl.substr(n.length))}i=rR.FURNI_DOUBLE_CLICK;break;case yR.ROOM_AD_TOOLTIP_SHOW:i=rR.TOOLTIP_SHOW;break;case yR.ROOM_AD_TOOLTIP_HIDE:i=rR.TOOLTIP_HIDE}i&&this._roomEngine.events.dispatchEvent(new eR(i,e,t.objectId,this._roomEngine.getRoomObjectCategoryForType(t.objectType)))}}},{key:"onRoomObjectBadgeAssetEvent",value:function(t,e){if(t&&this._roomEngine)if(t.type!==cR.LOAD_BADGE);else{var i=t.objectId,n=t.objectType,s=this._roomEngine.getRoomObjectCategoryForType(n);this._roomEngine.loadRoomObjectBadgeImage(e,i,s,t.badgeId,t.groupBadge)}}},{key:"handleMousePointer",value:function(t,e){t&&this._roomEngine.updateMousePointer(t.type,t.objectId,t.objectType)}},{key:"handleRoomObjectPlaySoundEvent",value:function(t,e){var i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(t.type){case OR.PLAY_SOUND:return void this._roomEngine.events.dispatchEvent(new sR(sR.PLAY_SOUND,e,t.objectId,i,t.soundId,t.pitch));case OR.PLAY_SOUND_AT_PITCH:return void this._roomEngine.events.dispatchEvent(new sR(sR.PLAY_SOUND_AT_PITCH,e,t.objectId,i,t.soundId,t.pitch))}}},{key:"handleRoomObjectSamplePlaybackEvent",value:function(t,e){if(t){var i=this._roomEngine.getRoomObjectCategoryForType(t.objectType);switch(t.type){case ER.ROOM_OBJECT_INITIALIZED:this._roomEngine.events.dispatchEvent(new aR(aR.ROOM_OBJECT_INITIALIZED,e,t.objectId,i,t.sampleId,t.pitch));break;case ER.ROOM_OBJECT_DISPOSED:this._roomEngine.events.dispatchEvent(new aR(aR.ROOM_OBJECT_DISPOSED,e,t.objectId,i,t.sampleId,t.pitch));break;case ER.PLAY_SAMPLE:this._roomEngine.events.dispatchEvent(new aR(aR.PLAY_SAMPLE,e,t.objectId,i,t.sampleId,t.pitch));break;case ER.CHANGE_PITCH:this._roomEngine.events.dispatchEvent(new aR(aR.CHANGE_PITCH,e,t.objectId,i,t.sampleId,t.pitch))}}}},{key:"onHSLColorEnableEvent",value:function(t,e){t&&this._roomEngine&&(t.type!==vR.ROOM_BACKGROUND_COLOR||this._roomEngine.events.dispatchEvent(new fR(fR.ROOM_BACKGROUND_COLOR,e,t.enable,t.hue,t.saturation,t.lightness)))}},{key:"onRoomObjectDataRequestEvent",value:function(t,e){if(t&&this._roomEngine&&t.object)switch(t.type){case hR.RODRE_CURRENT_USER_ID:return void t.object.model.setValue(dt.SESSION_CURRENT_USER_ID,this._roomEngine.sessionDataManager.userId);case hR.RODRE_URL_PREFIX:return void t.object.model.setValue(dt.SESSION_URL_PREFIX,gD.instance.getConfiguration("url.prefix"))}}},{key:"onRoomObjectTileMouseEvent",value:function(t,e){if(this._roomEngine&&!this._roomEngine.isDecorating&&this._roomEngine.roomSessionManager){var i=this._roomEngine.roomSessionManager.getSession(t);i&&!i.isSpectator&&this.sendWalkUpdate(e.tileXAsInt,e.tileYAsInt)}}},{key:"handleObjectMove",value:function(t,e){if(t&&this._roomEngine&&this._roomEngine.events){var i=this.getSelectedRoomObjectData(e);if(i){var n=this._roomEngine.getRoomObject(e,i.id,i.category);if(n){var s=!0;if(i.category===_t.FLOOR||i.category===_t.UNIT){var r=this._roomEngine.getFurnitureStackingHeightMap(e);t instanceof IR&&this.handleFurnitureMove(n,i,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),r)||(this.handleFurnitureMove(n,i,i.loc.x,i.loc.y,r),s=!1)}else if(i.category===_t.WALL){if(s=!1,t instanceof bR){var a=t.wallLocation,o=t.wallWidth,u=t.wallHeight,c=t.x,h=t.y,_=t.direction;this.handleWallItemMove(n,i,a,o,u,c,h,_)&&(s=!0)}s||(n.setLocation(i.loc),n.setDirection(i.dir)),this._roomEngine.updateRoomObjectMask(e,i.id,s)}s?(this.setFurnitureAlphaMultiplier(n,.5),this._roomEngine.setObjectMoverIconSpriteVisible(!1)):(this.setFurnitureAlphaMultiplier(n,0),this._roomEngine.setObjectMoverIconSpriteVisible(!0))}}}}},{key:"handleObjectPlace",value:function(t,e){if(t&&this._roomEngine&&this._roomEngine.events){var i=this.getSelectedRoomObjectData(e);if(i){var n=this._roomEngine.getRoomObject(e,i.id,i.category);if(!n){if(t instanceof IR){if(i.category===_t.FLOOR)this._roomEngine.addFurnitureFloor(e,i.id,i.typeId,i.loc,i.dir,0,i.stuffData,parseFloat(i.instanceData),-1,0,0,"",!1);else if(i.category===_t.UNIT){this._roomEngine.addRoomObjectUser(e,i.id,new Et,new Et(180),180,i.typeId,i.instanceData);var s=this._roomEngine.getRoomObject(e,i.id,i.category);s&&i.posture&&s.model.setValue(dt.FIGURE_POSTURE,i.posture)}}else t instanceof bR&&i.category===_t.WALL&&this._roomEngine.addFurnitureWall(e,i.id,i.typeId,i.loc,i.dir,0,i.instanceData,0);if((n=this._roomEngine.getRoomObject(e,i.id,i.category))&&i.category===_t.FLOOR){var r=n.model.getValue(dt.FURNITURE_ALLOWED_DIRECTIONS);if(r&&r.length){var a=new Et(r[0]);if(n.setDirection(a),this.updateSelectedObjectData(e,i.id,i.category,i.loc,a,i.operation,i.typeId,i.instanceData,i.stuffData,i.state,i.animFrame,i.posture),!(i=this.getSelectedRoomObjectData(e)))return}}this.setFurnitureAlphaMultiplier(n,.5),this._roomEngine.setObjectMoverIconSpriteVisible(!0)}if(n){var o=!0,u=this._roomEngine.getFurnitureStackingHeightMap(e);if(i.category===_t.FLOOR)t instanceof IR&&this.handleFurnitureMove(n,i,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),u)||(this._roomEngine.removeRoomObjectFloor(e,i.id),o=!1);else if(i.category===_t.WALL){if(o=!1,t instanceof bR){var c=t.wallLocation,h=t.wallWidth,_=t.wallHeight,l=t.x,d=t.y,f=t.direction;this.handleWallItemMove(n,i,c,h,_,l,d,f)&&(o=!0)}o||this._roomEngine.removeRoomObjectWall(e,i.id),this._roomEngine.updateRoomObjectMask(e,i.id,o)}else i.category===_t.UNIT&&(t instanceof IR&&this.handleUserPlace(n,Math.trunc(t.tileX+.5),Math.trunc(t.tileY+.5),this._roomEngine.getLegacyWallGeometry(e))||(this._roomEngine.removeRoomObjectUser(e,i.id),o=!1));this._roomEngine.setObjectMoverIconSpriteVisible(!o)}}}}},{key:"handleFurnitureMove",value:function(t,e,i,n,s){if(!t||!e)return!1;var r=new Et;r.assign(t.getDirection()),t.setDirection(e.dir);var a=new Et(i,n,0),o=new Et;o.assign(t.getDirection());var u=this.validateFurnitureLocation(t,a,e.loc,e.dir,s);return u||(o.x=this.getValidRoomObjectDirection(t,!0),t.setDirection(o),u=this.validateFurnitureLocation(t,a,e.loc,e.dir,s)),u?(t.setLocation(u),o&&t.setDirection(o),!0):(t.setDirection(r),!1)}},{key:"handleWallItemMove",value:function(t,e,i,n,s,r,a,o){if(!t||!e)return!1;var u=new Et(o),c=this.validateWallItemLocation(t,i,n,s,r,a,e);return!!c&&(t.setLocation(c),t.setDirection(u),!0)}},{key:"validateFurnitureLocation",value:function(t,e,i,n,s){if(!t||!t.model||!e)return null;var r=null,a=t.getDirection();if(!a)return null;if(!i||!n)return null;if(e.x===i.x&&e.y===i.y&&a.x===n.x)return(r=new Et).assign(i),r;var o=t.model.getValue(dt.FURNITURE_SIZE_X),u=t.model.getValue(dt.FURNITURE_SIZE_Y);o<1&&(o=1),u<1&&(u=1);var c=i.x,h=i.y,_=o,l=u,d=0,f=Math.trunc(Math.trunc(a.x+45)%360/90);if(1!==f&&3!==f||(d=o,o=u,u=d),1!==(f=Math.trunc(Math.trunc(n.x+45)%360/90))&&3!==f||(d=_,_=l,l=d),s&&e){var v=1===t.model.getValue(dt.FURNITURE_ALWAYS_STACKABLE);return s.validateLocation(e.x,e.y,o,u,c,h,_,l,v)?new Et(e.x,e.y,s.getTileHeight(e.x,e.y)):null}return null}},{key:"validateWallItemLocation",value:function(t,e,i,n,s,r,a){if(null==t||null==t.model||null==e||null==i||null==n||null==a)return null;var o=t.model.getValue(dt.FURNITURE_SIZE_X),u=t.model.getValue(dt.FURNITURE_SIZE_Z),c=t.model.getValue(dt.FURNITURE_CENTER_Z);if((s<o/2||s>i.length-o/2||r<c||r>n.length-(u-c))&&(s<o/2&&s<=i.length-o/2?s=o/2:s>=o/2&&s>i.length-o/2&&(s=i.length-o/2),r<c&&r<=n.length-(u-c)?r=c:r>=c&&r>n.length-(u-c)&&(r=n.length-(u-c))),s<o/2||s>i.length-o/2||r<c||r>n.length-(u-c))return null;var h=Et.sum(Et.product(i,s/i.length),Et.product(n,r/n.length));return h=Et.sum(e,h)}},{key:"changeObjectState",value:function(t,e,i,n,s){var r=this._roomEngine.getRoomObjectCategoryForType(i);this.changeRoomObjectState(t,e,r,n,s)}},{key:"useObject",value:function(t,e,i,n){if(this._roomEngine&&this._roomEngine.connection)switch(n){case dR.DICE_ACTIVATE:return void this._roomEngine.connection.send(new $I(e));case dR.DICE_OFF:return void this._roomEngine.connection.send(new tb(e));case dR.USE_HABBOWHEEL:return void this._roomEngine.connection.send(new JI(e));case dR.STICKIE:return void this._roomEngine.connection.send(new CI(e));case dR.ENTER_ONEWAYDOOR:return void this._roomEngine.connection.send(new nb(e))}}},{key:"changeRoomObjectState",value:function(t,e,i,n,s){return!this._roomEngine||!this._roomEngine.connection||(i===_t.FLOOR?s?this._roomEngine.connection.send(new sb(e,n)):this._roomEngine.connection.send(new ib(e,n)):i===_t.WALL&&this._roomEngine.connection.send(new ab(e,n)),!0)}},{key:"sendWalkUpdate",value:function(t,e){this._roomEngine&&this._roomEngine.connection&&this._roomEngine.connection.send(new Pb(t,e))}},{key:"handleMouseOverObject",value:function(t,e,i){if(t!==_t.FLOOR)return null;var n=this._roomEngine.getRoomObject(e,i.objectId,_t.FLOOR);if(!n)return null;var s=this.getActiveSurfaceLocation(n,i);if(!s)return null;if(!this._roomEngine.getFurnitureStackingHeightMap(e))return null;var r=s.x,a=s.y,o=s.z;return new gS(new Et(r,a,n.getLocation().z),o,!0,i.eventId)}},{key:"handleMoveTargetFurni",value:function(t,e){if(e.objectType!==lt.USER&&e.objectType!==lt.PET&&e.objectType!==lt.BOT&&e.objectType!==lt.RENTABLE_BOT&&e.objectType!==lt.MONSTER_PLANT){var i=this._roomEngine.getRoomObject(t,e.objectId,_t.FLOOR),n=this.getActiveSurfaceLocation(i,e);return!!n&&(this.sendWalkUpdate(n.x,n.y),!0)}}},{key:"getActiveSurfaceLocation",value:function(t,e){if(!t||!e)return null;var i=this._roomEngine.sessionDataManager.getFloorItemDataByName(t.type);if(!i)return null;if(!i.canStandOn&&!i.canSitOn&&!i.canLayOn)return null;var n=t.model;if(!n)return null;var s=t.getLocation(),r=t.getDirection(),a=n.getValue(dt.FURNITURE_SIZE_X),o=n.getValue(dt.FURNITURE_SIZE_Y),u=n.getValue(dt.FURNITURE_SIZE_Z);if(90===r.x||270===r.x){var c=[o,a];a=c[0],o=c[1]}a<1&&(a=1),o<1&&(o=1);var h=this._roomEngine.getActiveRoomInstanceRenderingCanvas();if(!h)return null;var _=h.geometry.scale,l=i.canSitOn?.5:0,d=(_/2+e.spriteOffsetX+e.localX)/(_/4),f=(e.spriteOffsetY+e.localY+(u-l)*_/2)/(_/4),v=(d+2*f)/4,g=(d-2*f)/4,O=Math.floor(s.x+v),y=Math.floor(s.y-g+1),E=!1;(O<s.x||O>=s.x+a||y<s.y||y>=s.y+o)&&(E=!0);var p=i.canSitOn?u-.5:u;return E?null:new Et(O,y,p)}},{key:"handleMouseOverTile",value:function(t,e){if(this._whereYouClickIsWhereYouGo)return new gS(new Et(t.tileXAsInt,t.tileYAsInt,t.tileZAsInt),0,!0,t.eventId);var i=this._roomEngine.getRoomObjectCursor(e);if(i&&i.visualization){var n=t.tileXAsInt,s=t.tileYAsInt,r=t.tileZAsInt;if(this._roomEngine.getRoomInstance(e)){var a=this._roomEngine.getRoomTileObjectMap(e);if(a){var o=a.getObjectIntTile(n,s),u=this._roomEngine.getFurnitureStackingHeightMap(e);if(u){if(o&&o.model&&o.model.getValue(dt.FURNITURE_IS_VARIABLE_HEIGHT)>0){var c=u.getTileHeight(n,s),h=this._roomEngine.getLegacyWallGeometry(e).getHeight(n,s);return new gS(new Et(n,s,r),c-h,!0,t.eventId)}return new gS(new Et(n,s,r),0,!0,t.eventId)}}}}return null}},{key:"placeObject",value:function(t,e,i){var n=this.getSelectedRoomObjectData(t);if(n){var s=null,r=n.id,a=n.category,o=0,u=0,c=0,h=0,_="";if(this._roomEngine&&this._roomEngine.connection&&(s=this._roomEngine.getRoomObject(t,r,a))){var l=s.getLocation();if(h=s.getDirection().x,a===_t.FLOOR||a===_t.UNIT)o=l.x,u=l.y,c=l.z;else if(a===_t.WALL){o=l.x,u=l.y,c=l.z;var d=this._roomEngine.getLegacyWallGeometry(t);d&&(_=d.getOldLocationString(l,h))}h=(h/45%8+8)%8,r<0&&a===_t.UNIT&&(r*=-1),this._objectPlacementSource!==dS.CATALOG&&(a===_t.UNIT?n.typeId===mh.PET?this._roomEngine.connection.send(new PI(r,Math.trunc(o),Math.trunc(u))):n.typeId===mh.RENTABLE_BOT&&this._roomEngine.connection.send(new SI(r,Math.trunc(o),Math.trunc(u))):void 0!==s.model.getValue(dt.FURNITURE_IS_STICKIE)?this._roomEngine.connection.send(new QI(r,_)):this._roomEngine.connection.send(new XI(r,a,_,Math.trunc(o),Math.trunc(u),h)))}if(this._roomEngine.setPlacedRoomObjectData(t,new ES(n.id,n.category,null,n.dir,null)),this.resetSelectedObjectData(t),this._roomEngine&&this._roomEngine.events){var f=s&&s.id===n.id;this._roomEngine.events.dispatchEvent(new iR(eR.PLACED,t,r,a,_,o,u,c,h,f,e,i,n.instanceData))}}}},{key:"modifyRoomObject",value:function(t,e,i,n){if(!this._roomEngine)return!1;var s=this._roomEngine.getRoomObject(t,e,i);if(!s)return!1;var r=!0;switch(n){case yS.OBJECT_ROTATE_POSITIVE:case yS.OBJECT_ROTATE_NEGATIVE:if(this._roomEngine.connection){var a=0;a=n==yS.OBJECT_ROTATE_NEGATIVE?this.getValidRoomObjectDirection(s,!1):this.getValidRoomObjectDirection(s,!0);var o=s.getLocation().x,u=s.getLocation().y;if(this.isValidLocation(s,new Et(a),this._roomEngine.getFurnitureStackingHeightMap(t)))if(a=Math.trunc(a/45),s.type===lt.MONSTER_PLANT){var c=this._roomEngine.roomSessionManager.getSession(t);if(c){var h=c.userDataManager.getUserDataByIndex(e);h&&this._roomEngine.connection.send(new UI(h.webID,Math.trunc(o),Math.trunc(u),a))}}else this._roomEngine.connection.send(new zI(e,o,u,a))}break;case yS.OBJECT_EJECT:case yS.OBJECT_PICKUP:this._roomEngine.connection&&this._roomEngine.connection.send(new KI(i,e));break;case yS.OBJECT_PICKUP_PET:if(this._roomEngine.connection){var _=this._roomEngine.roomSessionManager.getSession(t);if(_){var l=_.userDataManager.getUserDataByIndex(e);_.pickupPet(l.webID)}}break;case yS.OBJECT_PICKUP_BOT:if(this._roomEngine.connection){var d=this._roomEngine.roomSessionManager.getSession(t);if(d){var f=d.userDataManager.getUserDataByIndex(e);d.pickupBot(f.webID)}}break;case yS.OBJECT_MOVE:r=!1,this.setFurnitureAlphaMultiplier(s,.5),this.setSelectedRoomObjectData(t,s.id,i,s.getLocation(),s.getDirection(),n),this._roomEngine.setObjectMoverIconSprite(s.id,i,!0),this._roomEngine.setObjectMoverIconSpriteVisible(!1);break;case yS.OBJECT_MOVE_TO:var v=this.getSelectedRoomObjectData(t);if(this.updateSelectedObjectData(t,v.id,v.category,v.loc,v.dir,yS.OBJECT_MOVE_TO,v.typeId,v.instanceData,v.stuffData,v.state,v.animFrame,v.posture),this.setFurnitureAlphaMultiplier(s,1),this._roomEngine.removeObjectMoverIconSprite(),this._roomEngine.connection)if(i===_t.FLOOR){var g=s.getDirection().x%360,O=s.getLocation(),y=g/45;this._roomEngine.connection.send(new zI(e,O.x,O.y,y))}else if(i===_t.WALL){var E=s.getDirection().x%360,p=this._roomEngine.getLegacyWallGeometry(t);if(p){var m=p.getOldLocationString(s.getLocation(),E);m&&this._roomEngine.connection.send(new _b(e,m))}}else if(i===_t.UNIT){var I=s.getDirection().x%360,b=s.getLocation(),T=I/45,R=(parseInt(s.model.getValue(dt.RACE)),this._roomEngine.roomSessionManager.getSession(t));if(R){var k=R.userDataManager.getUserDataByIndex(e);k&&this._roomEngine.connection.send(new UI(k.webID,b.x,b.y,T))}}}return r&&this.resetSelectedObjectData(t),!0}},{key:"modifyRoomObjectDataWithMap",value:function(t,e,i,n,s){if(!this._roomEngine)return!1;if(!this._roomEngine.getRoomObject(t,e,i))return!1;if(n===yS.OBJECT_SAVE_STUFF_DATA)this._roomEngine.connection&&this._roomEngine.connection.send(new BI(e,s));return!0}},{key:"modifyWallItemData",value:function(t,e,i,n){return!(!this._roomEngine||!this._roomEngine.connection)&&(this._roomEngine.connection.send(new xI(e,i,n)),!0)}},{key:"deleteWallItem",value:function(t,e){return!(!this._roomEngine||!this._roomEngine.connection)&&(this._roomEngine.connection.send(new FI(e)),!0)}},{key:"getValidRoomObjectDirection",value:function(t,e){if(!t||!t.model)return 0;var i=0,n=0,s=[];s=t.type===lt.MONSTER_PLANT?t.model.getValue(dt.PET_ALLOWED_DIRECTIONS):t.model.getValue(dt.FURNITURE_ALLOWED_DIRECTIONS);var r=t.getDirection().x;if(s&&s.length){if((i=s.indexOf(r))<0){for(i=0,n=0;n<s.length&&!(r<=s[n]);)i++,n++;i%=s.length}r=s[i=e?(i+1)%s.length:(i-1+s.length)%s.length]}return r}},{key:"isValidLocation",value:function(t,e,i){if(!t||!t.model||!e)return!1;var n=t.getDirection(),s=t.getLocation();if(!n||!s)return!1;if(n.x%180===e.x%180)return!0;var r=t.model.getValue(dt.FURNITURE_SIZE_X),a=t.model.getValue(dt.FURNITURE_SIZE_Y);r<1&&(r=1),a<1&&(a=1);var o=r,u=a,c=Math.trunc(Math.trunc(e.x+45)%360/90);if(1===c||3===c){var h=[a,r];r=h[0],a=h[1]}if(1===(c=Math.trunc(Math.trunc(n.x+45)%360/90))||3===c){var _=[u,o];o=_[0],u=_[1]}if(i&&s){var l=1===t.model.getValue(dt.FURNITURE_ALWAYS_STACKABLE);if(i.validateLocation(s.x,s.y,r,a,s.x,s.y,o,u,l,s.z))return!0}return!1}},{key:"placeObjectOnUser",value:function(t,e,i){var n=this.getSelectedRoomObjectData(t);n&&(this._roomEngine.getRoomObject(t,e,i)&&this._roomEngine&&this._roomEngine.events&&this._roomEngine.events.dispatchEvent(new nR(eR.PLACED_ON_USER,t,e,i,n.id,n.category)))}},{key:"setSelectedObject",value:function(t,e,i){if(this._roomEngine){var n=this._roomEngine.events;if(n)switch(i){case _t.UNIT:case _t.FLOOR:case _t.WALL:if(i===_t.UNIT)this.deselectObject(t),this.setSelectedAvatar(t,e,!0);else if(this.setSelectedAvatar(t,0,!1),e!==this._selectedObjectId){this.deselectObject(t);var s=this._roomEngine.getRoomObject(t,e,i);s&&s.logic&&(s.logic.processUpdateMessage(new vS(!0)),this._selectedObjectId=e,this._selectedObjectCategory=i)}return void n.dispatchEvent(new eR(eR.SELECTED,t,e,i))}}}},{key:"deselectObject",value:function(t){if(-1!==this._selectedObjectId){var e=this._roomEngine.getRoomObject(t,this._selectedObjectId,this._selectedObjectCategory);e&&e.logic&&(e.logic.processUpdateMessage(new vS(!1)),this._selectedObjectId=-1,this._selectedObjectCategory=_t.MINIMUM)}}},{key:"setSelectedAvatar",value:function(t,e,i){if(this._roomEngine){var n=_t.UNIT,s=this._roomEngine.getRoomObject(t,this._selectedAvatarId,n);s&&s.logic&&(s.logic.processUpdateMessage(new fS(!1)),this._selectedAvatarId=-1);var r=!1;if(i){var a=this._roomEngine.getRoomObject(t,e,n);if(a&&a.logic){a.logic.processUpdateMessage(new fS(!0)),r=!0,this._selectedAvatarId=e;var o=a.getLocation();o&&this._roomEngine.connection.send(new Cb(~~o.x,~~o.y))}}var u=this._roomEngine.getRoomObjectSelectionArrow(t);u&&u.logic&&(r&&!this._roomEngine.isPlayingGame()?u.logic.processUpdateMessage(new OS(OS.ENABLED)):u.logic.processUpdateMessage(new OS(OS.DISABLED)))}}},{key:"resetSelectedObjectData",value:function(t){if(this._roomEngine){this._roomEngine.removeObjectMoverIconSprite();var e=this.getSelectedRoomObjectData(t);if(e){if(e.operation===yS.OBJECT_MOVE||e.operation===yS.OBJECT_MOVE_TO){var i=this._roomEngine.getRoomObject(t,e.id,e.category);i&&e.operation!==yS.OBJECT_MOVE_TO&&(i.setLocation(e.loc),i.setDirection(e.dir)),this.setFurnitureAlphaMultiplier(i,1),e.category===_t.WALL&&this._roomEngine.updateRoomObjectMask(t,e.id,!0),this.updateSelectedObjectData(t,e.id,e.category,e.loc,e.dir,yS.OBJECT_MOVE,e.typeId,e.instanceData,e.stuffData,e.state,e.animFrame,e.posture)}else if(e.operation===yS.OBJECT_PLACE){var n=e.id;switch(e.category){case _t.FLOOR:this._roomEngine.removeRoomObjectFloor(t,n);break;case _t.WALL:this._roomEngine.removeRoomObjectWall(t,n);break;case _t.UNIT:this._roomEngine.removeRoomObjectUser(t,n)}}this._roomEngine.setSelectedRoomObjectData(t,null)}}}},{key:"getSelectedRoomObjectData",value:function(t){return this._roomEngine?this._roomEngine.getSelectedRoomObjectData(t):null}},{key:"setFurnitureAlphaMultiplier",value:function(t,e){t&&t.model&&t.model.setValue(dt.FURNITURE_ALPHA_MULTIPLIER,e)}},{key:"decorateModeMove",value:function(t){return this._roomEngine.isDecorating&&!(t.ctrlKey||t.shiftKey)}},{key:"cancelRoomObjectPlacement",value:function(t){return this.resetSelectedObjectData(t),!0}},{key:"setSelectedRoomObjectData",value:function(t,e,i,n,s,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:-1,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null;if(this.resetSelectedObjectData(t),this._roomEngine){var l=new ES(e,i,r,n,s,a,o,u,c,h,_);this._roomEngine.setSelectedRoomObjectData(t,l)}}},{key:"updateSelectedObjectData",value:function(t,e,i,n,s,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:-1,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null;if(!this._roomEngine)return null;var l=new ES(e,i,r,n,s,a,o,u,c,h,_);this._roomEngine.setSelectedRoomObjectData(t,l)}},{key:"handleUserPlace",value:function(t,e,i,n){return!!n.isRoomTile(e,i)&&(t.setLocation(new Et(e,i,n.getHeight(e,i))),!0)}},{key:"engine",get:function(){return this._roomEngine}},{key:"selectedAvatarId",get:function(){return this._selectedAvatarId}}]),i}(m),mS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._liftAmount=void 0,t._location=void 0,t._locationDelta=void 0,t._lastUpdateTime=void 0,t._changeTime=void 0,t._updateInterval=void 0,t._liftAmount=0,t._location=new Et,t._locationDelta=new Et,t._lastUpdateTime=0,t._changeTime=0,t._updateInterval=i.DEFAULT_UPDATE_INTERVAL,t}return Object(a.a)(i,[{key:"onDispose",value:function(){this._liftAmount=0,Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t);var e=this.getLocationOffset(),n=this.object&&this.object.model;if(n&&(e?this._liftAmount!==e.z&&(this._liftAmount=e.z,n.setValue(dt.FURNITURE_LIFT_AMOUNT,this._liftAmount)):0!==this._liftAmount&&(this._liftAmount=0,n.setValue(dt.FURNITURE_LIFT_AMOUNT,this._liftAmount))),this._locationDelta.length>0||e){var s=i.TEMP_VECTOR,r=this.time-this._changeTime;r===this._updateInterval>>1&&r++,r>this._updateInterval&&(r=this._updateInterval),this._locationDelta.length>0?(s.assign(this._locationDelta),s.multiply(r/this._updateInterval),s.add(this._location)):s.assign(this._location),e&&s.add(e),this.object.setLocation(s),r===this._updateInterval&&(this._locationDelta.x=0,this._locationDelta.y=0,this._locationDelta.z=0)}this._lastUpdateTime=this.time}},{key:"setObject",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"setObject",this).call(this,t),t&&this._location.assign(t.getLocation())}},{key:"processUpdateMessage",value:function(t){if(t)return Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t.location&&this._location.assign(t.location),t instanceof XR?this.processMoveMessage(t):void 0}},{key:"processMoveMessage",value:function(t){t&&this.object&&t.location&&(this._changeTime=this._lastUpdateTime,this._locationDelta.assign(t.targetLocation),this._locationDelta.subtract(this._location))}},{key:"getLocationOffset",value:function(){return null}},{key:"lastUpdateTime",get:function(){return this._lastUpdateTime}},{key:"updateInterval",set:function(t){t<=0&&(t=1),this._updateInterval=t}}]),i}(We);mS.DEFAULT_UPDATE_INTERVAL=500,mS.TEMP_VECTOR=new Et;var IS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._selected=void 0,t._reportedLocation=void 0,t._effectChangeTimeStamp=void 0,t._newEffect=void 0,t._blinkingStartTimestamp=void 0,t._blinkingEndTimestamp=void 0,t._talkingEndTimestamp=void 0,t._talkingPauseStartTimestamp=void 0,t._talkingPauseEndTimestamp=void 0,t._carryObjectStartTimestamp=void 0,t._carryObjectEndTimestamp=void 0,t._allowUseCarryObject=void 0,t._animationEndTimestamp=void 0,t._signEndTimestamp=void 0,t._gestureEndTimestamp=void 0,t._numberValueEndTimestamp=void 0,t._selected=!1,t._reportedLocation=null,t._effectChangeTimeStamp=0,t._newEffect=0,t._blinkingStartTimestamp=gD.instance.time+t.randomBlinkStartTimestamp(),t._blinkingEndTimestamp=0,t._talkingEndTimestamp=0,t._talkingPauseStartTimestamp=0,t._talkingPauseEndTimestamp=0,t._carryObjectStartTimestamp=0,t._carryObjectEndTimestamp=0,t._allowUseCarryObject=!1,t._animationEndTimestamp=0,t._signEndTimestamp=0,t._gestureEndTimestamp=0,t._numberValueEndTimestamp=0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[Be.CLICK,gR.POSITION_CHANGED,Be.MOUSE_ENTER,Be.MOUSE_LEAVE,dR.MOUSE_BUTTON,dR.MOUSE_ARROW];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"dispose",value:function(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new gR(gR.OBJECT_REMOVED,this.object)),Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._reportedLocation=null}},{key:"update",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._selected&&this.object&&this.eventDispatcher){var e=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===e.x&&this._reportedLocation.y===e.y&&this._reportedLocation.z===e.z||(this._reportedLocation||(this._reportedLocation=new Et),this._reportedLocation.assign(e),this.eventDispatcher.dispatchEvent(new gR(gR.POSITION_CHANGED,this.object)))}var n=this.object&&this.object.model;n&&this.updateModel(this.time,n)}},{key:"updateModel",value:function(t,e){this._talkingEndTimestamp>0&&(t>this._talkingEndTimestamp?(e.setValue(dt.FIGURE_TALK,0),this._talkingEndTimestamp=0,this._talkingPauseStartTimestamp=0,this._talkingPauseEndTimestamp=0):this._talkingPauseEndTimestamp||this._talkingPauseStartTimestamp?this._talkingPauseStartTimestamp>0&&t>this._talkingPauseStartTimestamp?(e.setValue(dt.FIGURE_TALK,0),this._talkingPauseStartTimestamp=0):this._talkingPauseEndTimestamp>0&&t>this._talkingPauseEndTimestamp&&(e.setValue(dt.FIGURE_TALK,1),this._talkingPauseEndTimestamp=0):(this._talkingPauseStartTimestamp=t+this.randomTalkingPauseStartTimestamp(),this._talkingPauseEndTimestamp=this._talkingPauseStartTimestamp+this.randomTalkingPauseEndTimestamp())),this._animationEndTimestamp>0&&t>this._animationEndTimestamp&&(e.setValue(dt.FIGURE_EXPRESSION,0),this._animationEndTimestamp=0),this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(dt.FIGURE_GESTURE,0),this._gestureEndTimestamp=0),this._signEndTimestamp>0&&t>this._signEndTimestamp&&(e.setValue(dt.FIGURE_SIGN,-1),this._signEndTimestamp=0),this._carryObjectEndTimestamp>0&&t>this._carryObjectEndTimestamp&&(e.setValue(dt.FIGURE_CARRY_OBJECT,0),e.setValue(dt.FIGURE_USE_OBJECT,0),this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1),this._allowUseCarryObject&&t-this._carryObjectStartTimestamp>5e3&&((t-this._carryObjectStartTimestamp)%1e4<1e3?e.setValue(dt.FIGURE_USE_OBJECT,1):e.setValue(dt.FIGURE_USE_OBJECT,0)),this._blinkingStartTimestamp>-1&&t>this._blinkingStartTimestamp&&(e.setValue(dt.FIGURE_BLINK,1),this._blinkingStartTimestamp=t+this.randomBlinkStartTimestamp(),this._blinkingEndTimestamp=t+this.randomBlinkEndTimestamp()),this._blinkingEndTimestamp>0&&t>this._blinkingEndTimestamp&&(e.setValue(dt.FIGURE_BLINK,0),this._blinkingEndTimestamp=0),this._effectChangeTimeStamp>0&&t>this._effectChangeTimeStamp&&(e.setValue(dt.FIGURE_EFFECT,this._newEffect),this._effectChangeTimeStamp=0),this._numberValueEndTimestamp>0&&t>this._numberValueEndTimestamp&&(e.setValue(dt.FIGURE_NUMBER_VALUE,0),this._numberValueEndTimestamp=0)}},{key:"processUpdateMessage",value:function(t){if(t&&this.object){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t);var e=this.object&&this.object.model;if(e){if(t instanceof zR)return e.setValue(dt.FIGURE_POSTURE,t.postureType),void e.setValue(dt.FIGURE_POSTURE_PARAMETER,t.parameter);if(t instanceof NR)return e.setValue(dt.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*t.numberOfWords);if(t instanceof KR)e.setValue(dt.FIGURE_IS_TYPING,t.isTyping?1:0);else if(t instanceof xR)e.setValue(dt.FIGURE_IS_MUTED,t.isMuted?1:0);else if(t instanceof VR)e.setValue(dt.FIGURE_IS_PLAYING_GAME,t.isPlayingGame?1:0);else{if(t instanceof qR)return e.setValue(dt.HEAD_DIRECTION,t.headDirection),e.setValue(dt.FIGURE_CAN_STAND_UP,t.canStandUp),void e.setValue(dt.FIGURE_VERTICAL_OFFSET,t.baseY);if(t instanceof wR)return e.setValue(dt.FIGURE_GESTURE,t.gesture),void(this._gestureEndTimestamp=this.time+3e3);if(t instanceof LR)return e.setValue(dt.FIGURE_EXPRESSION,t.expressionType),this._animationEndTimestamp=qt.getExpressionTimeout(e.getValue(dt.FIGURE_EXPRESSION)),void(this._animationEndTimestamp>-1&&(this._animationEndTimestamp+=this.time));if(t instanceof DR)e.setValue(dt.FIGURE_DANCE,t.danceStyle);else{if(t instanceof WR)return e.setValue(dt.FIGURE_SLEEP,t.isSleeping?1:0),void(t.isSleeping?this._blinkingStartTimestamp=-1:this._blinkingStartTimestamp=this.time+this.randomBlinkStartTimestamp());if(t instanceof HR)return e.setValue(dt.FIGURE_NUMBER_VALUE,t.value),void(this._numberValueEndTimestamp=this.time+3e3);if(t instanceof MR)this.updateAvatarEffect(t.effect,t.delayMilliseconds,e);else{if(t instanceof jR)return e.setValue(dt.FIGURE_CARRY_OBJECT,t.itemType),e.setValue(dt.FIGURE_USE_OBJECT,0),void(0===t.itemType?(this._carryObjectStartTimestamp=0,this._carryObjectEndTimestamp=0,this._allowUseCarryObject=!1):(this._carryObjectStartTimestamp=this.time,t.itemType<i.MAX_HAND_ID?(this._carryObjectEndTimestamp=0,this._allowUseCarryObject=t.itemType<=i.MAX_HAND_USE_ID):(this._carryObjectEndTimestamp=this._carryObjectStartTimestamp+1500,this._allowUseCarryObject=!1)));if(t instanceof QR)e.setValue(dt.FIGURE_USE_OBJECT,t.itemType);else{if(t instanceof YR)return e.setValue(dt.FIGURE_SIGN,t.signType),void(this._signEndTimestamp=this.time+5e3);if(!(t instanceof PR))return t instanceof UR?(e.setValue(dt.FIGURE,t.figure),void e.setValue(dt.GENDER,t.gender)):t instanceof fS?(this._selected=t.selected,void(this._reportedLocation=null)):void(t instanceof BR&&e.setValue(dt.OWN_USER,1));e.setValue(dt.FIGURE_FLAT_CONTROL,t.level)}}}}}}}},{key:"updateAvatarEffect",value:function(t,e,n){if(t===i.EFFECT_TYPE_SPLASH)this._effectChangeTimeStamp=gD.instance.time+i.EFFECT_SPLASH_LENGTH,this._newEffect=i.EFFECT_TYPE_SWIM;else if(t===i.EFFECT_TYPE_SPLASH_DARK)this._effectChangeTimeStamp=gD.instance.time+i.EFFECT_SPLASH_LENGTH,this._newEffect=i.EFFECT_TYPE_SWIM_DARK;else if(n.getValue(dt.FIGURE_EFFECT)===i.EFFECT_TYPE_SWIM)this._effectChangeTimeStamp=gD.instance.time+i.EFFECT_SPLASH_LENGTH,this._newEffect=t,t=i.EFFECT_TYPE_SPLASH;else if(n.getValue(dt.FIGURE_EFFECT)===i.EFFECT_TYPE_SWIM_DARK)this._effectChangeTimeStamp=gD.instance.time+i.EFFECT_SPLASH_LENGTH,this._newEffect=t,t=i.EFFECT_TYPE_SPLASH_DARK;else{if(0!==e)return this._effectChangeTimeStamp=gD.instance.time+e,void(this._newEffect=t);this._effectChangeTimeStamp=0}n.setValue(dt.FIGURE_EFFECT,t)}},{key:"mouseEvent",value:function(t,e){var i=null;switch(t.type){case _i.MOUSE_CLICK:i=Be.CLICK;break;case _i.ROLL_OVER:i=Be.MOUSE_ENTER,this.object.model&&this.object.model.setValue(dt.FIGURE_HIGHLIGHT,1),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_BUTTON,this.object));break;case _i.ROLL_OUT:i=Be.MOUSE_LEAVE,this.object.model&&this.object.model.setValue(dt.FIGURE_HIGHLIGHT,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_ARROW,this.object))}i&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Be(i,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}},{key:"randomTalkingPauseStartTimestamp",value:function(){return 100+200*Math.random()}},{key:"randomTalkingPauseEndTimestamp",value:function(){return 75+75*Math.random()}},{key:"randomBlinkStartTimestamp",value:function(){return 4500+1e3*Math.random()}},{key:"randomBlinkEndTimestamp",value:function(){return 50+200*Math.random()}}]),i}(mS);IS.MAX_HAND_ID=999999999,IS.MAX_HAND_USE_ID=999,IS.EFFECT_TYPE_SPLASH=28,IS.EFFECT_SPLASH_LENGTH=500,IS.EFFECT_TYPE_SWIM=29,IS.EFFECT_TYPE_SPLASH_DARK=184,IS.EFFECT_TYPE_SWIM_DARK=185;var bS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._sizeX=void 0,t._sizeY=void 0,t._sizeZ=void 0,t._centerX=void 0,t._centerY=void 0,t._centerZ=void 0,t._directions=void 0,t._mouseOver=void 0,t._locationOffset=void 0,t._bouncingStep=void 0,t._storedRotateMessage=void 0,t._directionInitialized=void 0,t._sizeX=0,t._sizeY=0,t._sizeZ=0,t._centerX=0,t._centerY=0,t._centerZ=0,t._directions=[],t._mouseOver=!1,t._locationOffset=new Et,t._bouncingStep=0,t._storedRotateMessage=null,t._directionInitialized=!1,-1===i.BOUNCING_STEPS&&(i.BOUNCING_STEPS=gD.instance.getConfiguration("furni.rotation.bounce.steps",8)),-1===i.BOUNCING_Z&&(i.BOUNCING_Z=gD.instance.getConfiguration("furni.rotation.bounce.height",.0625)),t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[mR.STATE_CHANGE,Be.CLICK,Be.MOUSE_DOWN,Be.MOUSE_DOWN_LONG,yR.ROOM_AD_TOOLTIP_SHOW,yR.ROOM_AD_TOOLTIP_HIDE,yR.ROOM_AD_FURNI_DOUBLE_CLICK,yR.ROOM_AD_FURNI_CLICK];return this.widget&&t.push(TR.OPEN_WIDGET,TR.CLOSE_WIDGET),this.contextMenu&&t.push(TR.OPEN_FURNI_CONTEXT_MENU,TR.CLOSE_FURNI_CONTEXT_MENU),this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){if(t){var e=this.object&&this.object.model;if(e){if(t.logic){if(t.logic.model){var i=t.logic.model.dimensions;i&&(this._sizeX=i.x,this._sizeY=i.y,this._sizeZ=i.z,this._centerX=this._sizeX/2,this._centerY=this._sizeY/2,this._centerZ=this._sizeZ/2);var n=t.logic.model.directions;if(n&&n.length){var r,a=Object(s.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;this._directions.push(o)}}catch(c){a.e(c)}finally{a.f()}this._directions.sort((function(t,e){return t-e}))}}if(t.logic.customVars){var u=t.logic.customVars.variables;u&&u.length&&e.setValue(dt.FURNITURE_CUSTOM_VARIABLES,u)}}e.setValue(dt.FURNITURE_SIZE_X,this._sizeX),e.setValue(dt.FURNITURE_SIZE_Y,this._sizeY),e.setValue(dt.FURNITURE_SIZE_Z,this._sizeZ),e.setValue(dt.FURNITURE_CENTER_X,this._centerX),e.setValue(dt.FURNITURE_CENTER_Y,this._centerY),e.setValue(dt.FURNITURE_CENTER_Z,this._centerZ),e.setValue(dt.FURNITURE_ALLOWED_DIRECTIONS,this._directions),e.setValue(dt.FURNITURE_ALPHA_MULTIPLIER,1)}}}},{key:"onDispose",value:function(){this._storedRotateMessage=null,this._directions=null,Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"setObject",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"setObject",this).call(this,t),t&&t.getLocation().length&&(this._directionInitialized=!0)}},{key:"getAdClickUrl",value:function(t){return t.getValue(dt.FURNITURE_AD_URL)}},{key:"handleAdClick",value:function(t,e,i){this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_FURNI_CLICK,this.object))}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._bouncingStep>0&&(this._bouncingStep++,this._bouncingStep>i.BOUNCING_STEPS&&(this._bouncingStep=0))}},{key:"processUpdateMessage",value:function(t){if(t instanceof ZR)this.processDataUpdateMessage(t);else if(t instanceof $R)this.processObjectHeightUpdateMessage(t);else if(t instanceof tk)this.processItemDataUpdateMessage(t);else{if(this._mouseOver=!1,t.location&&t.direction){if(!(t instanceof XR)){var e=this.object.getDirection(),n=this.object.getLocation();e.x!==t.direction.x&&this._directionInitialized&&n.x===t.location.x&&n.y===t.location.y&&n.z===t.location.z&&(this._bouncingStep=1,this._storedRotateMessage=new Ve(t.location,t.direction),t=null)}this._directionInitialized=!0}if(t instanceof vS&&this.contextMenu&&this.eventDispatcher&&this.object){var s=t.selected?TR.OPEN_FURNI_CONTEXT_MENU:TR.CLOSE_FURNI_CONTEXT_MENU;this.eventDispatcher.dispatchEvent(new TR(s,this.object))}Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}}},{key:"processDataUpdateMessage",value:function(t){t&&(this.object.setState(t.state,0),t.data&&t.data.writeRoomObjectModel(this.object.model),null!==t.extra&&this.object.model.setValue(dt.FURNITURE_EXTRAS,t.extra.toString()),this.object.model.setValue(dt.FURNITURE_STATE_UPDATE_TIME,this.lastUpdateTime))}},{key:"processObjectHeightUpdateMessage",value:function(t){t&&this.object.model.setValue(dt.FURNITURE_SIZE_Z,t.height)}},{key:"processItemDataUpdateMessage",value:function(t){t&&this.object.model.setValue(dt.FURNITURE_ITEMDATA,t.data)}},{key:"mouseEvent",value:function(t,e){var i=this.getAdClickUrl(this.object.model);switch(t.type){case _i.MOUSE_MOVE:if(this.eventDispatcher){var n=new Be(Be.MOUSE_MOVE,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);n.localX=t.localX,n.localY=t.localY,n.spriteOffsetX=t.spriteOffsetX,n.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(n)}return;case _i.ROLL_OVER:if(!this._mouseOver){if(this.eventDispatcher){i&&0===i.indexOf("http")&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_TOOLTIP_SHOW,this.object));var s=new Be(Be.MOUSE_ENTER,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);s.localX=t.localX,s.localY=t.localY,s.spriteOffsetX=t.spriteOffsetX,s.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(s)}this._mouseOver=!0}return;case _i.ROLL_OUT:if(this._mouseOver){if(this.eventDispatcher){i&&0===i.indexOf("http")&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_TOOLTIP_HIDE,this.object));var r=new Be(Be.MOUSE_LEAVE,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);r.localX=t.localX,r.localY=t.localY,r.spriteOffsetX=t.spriteOffsetX,r.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(r)}this._mouseOver=!1}return;case _i.DOUBLE_CLICK:return void this.useObject();case _i.MOUSE_CLICK:if(this.eventDispatcher){var a=new Be(Be.CLICK,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);a.localX=t.localX,a.localY=t.localY,a.spriteOffsetX=t.spriteOffsetX,a.spriteOffsetY=t.spriteOffsetY,this.eventDispatcher.dispatchEvent(a),i&&0===i.indexOf("http")&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_TOOLTIP_HIDE,this.object)),i&&i.length&&this.handleAdClick(this.object.id,this.object.type,i)}return;case _i.MOUSE_DOWN:if(this.eventDispatcher){var o=new Be(Be.MOUSE_DOWN,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);this.eventDispatcher.dispatchEvent(o)}return;case _i.MOUSE_DOWN_LONG:if(this.eventDispatcher){var u=new Be(Be.MOUSE_DOWN_LONG,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);this.eventDispatcher.dispatchEvent(u)}return}}},{key:"getLocationOffset",value:function(){return this._bouncingStep<=0?null:(this._locationOffset.x=0,this._locationOffset.y=0,this._bouncingStep<=i.BOUNCING_STEPS/2?this._locationOffset.z=i.BOUNCING_Z*this._bouncingStep:this._bouncingStep<=i.BOUNCING_STEPS&&(this._storedRotateMessage&&(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,this._storedRotateMessage),this._storedRotateMessage=null),this._locationOffset.z=i.BOUNCING_Z*(i.BOUNCING_STEPS-this._bouncingStep)),this._locationOffset)}},{key:"useObject",value:function(){if(this.object&&this.eventDispatcher){var t=this.getAdClickUrl(this.object.model);t&&t.length&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_FURNI_DOUBLE_CLICK,this.object,null,t)),this.widget&&this.eventDispatcher.dispatchEvent(new TR(TR.OPEN_WIDGET,this.object)),this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object))}}},{key:"tearDown",value:function(){1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&(this.widget&&this.eventDispatcher.dispatchEvent(new TR(TR.CLOSE_WIDGET,this.object)),this.contextMenu&&this.eventDispatcher.dispatchEvent(new TR(TR.CLOSE_FURNI_CONTEXT_MENU,this.object))),Object(d.a)(Object(f.a)(i.prototype),"tearDown",this).call(this)}}]),i}(mS);bS.BOUNCING_STEPS=-1,bS.BOUNCING_Z=-1;var TS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.BADGE_DISPLAY_ENGRAVING,cR.LOAD_BADGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object)if(t instanceof ZR){var e=t.data;e instanceof Aa&&this.updateBadge(e.getValue(1))}else t instanceof JR&&"loading_icon"!==t.assetName&&(this.object.model.setValue(dt.FURNITURE_BADGE_ASSET_NAME,t.assetName),this.object.model.setValue(dt.FURNITURE_BADGE_IMAGE_STATUS,1),this.update(gD.instance.time))}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.BADGE_DISPLAY_ENGRAVING,this.object))}},{key:"updateBadge",value:function(t){""!==t&&this.eventDispatcher&&(this.object.model.setValue(dt.FURNITURE_BADGE_IMAGE_STATUS,-1),this.eventDispatcher.dispatchEvent(new cR(cR.LOAD_BADGE,this.object,t,!1)))}}]),i}(bS),RS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.ACHIEVEMENT_RESOLUTION_OPEN,TR.ACHIEVEMENT_RESOLUTION_ENGRAVING,TR.ACHIEVEMENT_RESOLUTION_FAILED,cR.LOAD_BADGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof JR&&"loading_icon"!==t.assetName&&this.object.model.setValue(dt.FURNITURE_BADGE_VISIBLE_IN_STATE,i.BADGE_VISIBLE_IN_STATE),t instanceof vS){if(!this.eventDispatcher||!this.object)return;this.eventDispatcher.dispatchEvent(new TR(TR.CLOSE_FURNI_CONTEXT_MENU,this.object))}}},{key:"useObject",value:function(){if(this.object&&this.eventDispatcher){var t=null;switch(this.object.getState(0)){case i.STATE_RESOLUTION_NOT_STARTED:case i.STATE_RESOLUTION_IN_PROGRESS:t=new TR(TR.ACHIEVEMENT_RESOLUTION_OPEN,this.object);break;case i.STATE_RESOLUTION_ACHIEVED:t=new TR(TR.ACHIEVEMENT_RESOLUTION_ENGRAVING,this.object);break;case i.STATE_RESOLUTION_FAILED:t=new TR(TR.ACHIEVEMENT_RESOLUTION_FAILED,this.object)}t&&this.eventDispatcher.dispatchEvent(t)}}},{key:"updateBadge",value:function(t){t!==i.ACH_NOT_SET&&Object(d.a)(Object(f.a)(i.prototype),"updateBadge",this).call(this,t)}}]),i}(TS);RS.STATE_RESOLUTION_NOT_STARTED=0,RS.STATE_RESOLUTION_IN_PROGRESS=1,RS.STATE_RESOLUTION_ACHIEVED=2,RS.STATE_RESOLUTION_FAILED=3,RS.ACH_NOT_SET="ach_0",RS.BADGE_VISIBLE_IN_STATE=2;var kS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this)).onRoomToObjectOwnAvatarMoveEvent=t.onRoomToObjectOwnAvatarMoveEvent.bind(Object(l.a)(t)),t}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this.eventDispatcher&&this.eventDispatcher.addEventListener(RR.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent)}},{key:"tearDown",value:function(){this.eventDispatcher&&this.eventDispatcher.removeEventListener(RR.ROAME_MOVE_TO,this.onRoomToObjectOwnAvatarMoveEvent),Object(d.a)(Object(f.a)(i.prototype),"tearDown",this).call(this)}},{key:"onRoomToObjectOwnAvatarMoveEvent",value:function(t){if(t&&this.object){var e=this.object.getLocation(),i=t.targetLocation;if(i){var n=this.object.model.getValue(dt.FURNITURE_SIZE_X),s=this.object.model.getValue(dt.FURNITURE_SIZE_Y),r=(Math.floor(this.object.getDirection().x)+45)%360/90;if(1===r||3===r){var a=[s,n];n=a[0],s=a[1]}i.x>=e.x&&i.x<e.x+n&&i.y>=e.y&&i.y<e.y+s?this.object.setState(1,0):this.object.setState(0,0)}}}}]),i}(bS),AS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[mR.STATE_CHANGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){var n=null;if(t.type===_i.DOUBLE_CLICK){switch(t.spriteTag){case"start_stop":n=new mR(mR.STATE_CHANGE,this.object,1);break;case"reset":n=new mR(mR.STATE_CHANGE,this.object,2)}if(this.eventDispatcher&&n)return void this.eventDispatcher.dispatchEvent(n)}Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object,1))}}]),i}(bS),SS=Object(a.a)((function t(){Object(r.a)(this,t)}));SS.INFOSTAND_EXTRA_PARAM="RWEIEP_INFOSTAND_EXTRA_PARAM",SS.JUKEBOX="RWEIEP_JUKEBOX",SS.USABLE_PRODUCT="RWEIEP_USABLE_PRODUCT",SS.SONGDISK="RWEIEP_SONGDISK",SS.CRACKABLE_FURNI="RWEIEP_CRACKABLE_FURNI",SS.BRANDING_OPTIONS="RWEIEP_BRANDING_OPTIONS",SS.USABLE="RWEIEP_USABLE";var jS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object&&1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.CRACKABLE_FURNI)}}]),i}(bS),NS=Object(a.a)((function t(){Object(r.a)(this,t)}));NS.TOUCH_START="touchstart",NS.TOUCH_MOVE="touchmove",NS.TOUCH_CANCEL="touchcancel",NS.TOUCH_END="touchend",NS.TOUCH_LONG="touchlong";var DS=function(){function t(e){Object(r.a)(this,t),this._ordinal=void 0,this._ordinal=e}return Object(a.a)(t,[{key:"ordinal",get:function(){return this._ordinal}},{key:"equals",value:function(t){return t&&t._ordinal==this._ordinal}}]),t}();DS.NONE=new DS(0),DS.WAVE=new DS(1),DS.BLOW=new DS(2),DS.LAUGH=new DS(3),DS.CRY=new DS(4),DS.IDLE=new DS(5),DS.JUMP=new DS(6),DS.RESPECT=new DS(7);var MS=Object(a.a)((function t(){Object(r.a)(this,t)}));MS.DUMMY="DUMMY",MS.FRIEND_FURNITURE="FRIEND_FURNITURE",MS.MONSTERPLANT_SEED="MONSTERPLANT_SEED",MS.MYSTERY_BOX="MYSTERY_BOX",MS.EFFECT_BOX="EFFECT_BOX",MS.MYSTERY_TROPHY="MYSTERY_TROPHY",MS.RANDOM_TELEPORT="RANDOM_TELEPORT",MS.PURCHASABLE_CLOTHING="PURCHASABLE_CLOTHING",MS.GENERIC_USABLE="GENERIC_USABLE";var CS=Object(a.a)((function t(){Object(r.a)(this,t)}));CS.LOVE_LOCK=0,CS.CARVE_A_TREE=1,CS.FRIENDS_PORTRAIT=2,CS.WILD_WEST_WANTED=3,CS.HABBOWEEN=4;var LS=Object(a.a)((function t(){Object(r.a)(this,t)}));LS.CHAT_WIDGET="RWE_CHAT_WIDGET",LS.INFOSTAND="RWE_INFOSTAND",LS.ME_MENU="RWE_ME_MENU",LS.CHAT_INPUT_WIDGET="RWE_CHAT_INPUT_WIDGET",LS.FURNI_PLACEHOLDER="RWE_FURNI_PLACEHOLDER",LS.FURNI_CREDIT_WIDGET="RWE_FURNI_CREDIT_WIDGET",LS.FURNI_STICKIE_WIDGET="RWE_FURNI_STICKIE_WIDGET",LS.FURNI_TROPHY_WIDGET="RWE_FURNI_TROPHY_WIDGET",LS.FURNI_LOVELOCK_WIDGET="RWE_FURNI_LOVELOCK_WIDGET",LS.FURNI_PRESENT_WIDGET="RWE_FURNI_PRESENT_WIDGET",LS.FURNI_ECOTRONBOX_WIDGET="RWE_FURNI_ECOTRONBOX_WIDGET",LS.FURNI_PET_PACKAGE_WIDGET="RWE_FURNI_PET_PACKAGE_WIDGET",LS.PLAYLIST_EDITOR_WIDGET="RWE_PLAYLIST_EDITOR_WIDGET",LS.DOORBELL="RWE_DOORBELL",LS.LOADINGBAR="RWE_LOADINGBAR",LS.ROOM_QUEUE="RWE_ROOM_QUEUE",LS.ROOM_POLL="RWE_ROOM_POLL",LS.ROOM_VOTE="RWE_ROOM_VOTE",LS.USER_CHOOSER="RWE_USER_CHOOSER",LS.FURNI_CHOOSER="RWE_FURNI_CHOOSER",LS.ROOM_DIMMER="RWE_ROOM_DIMMER",LS.FRIEND_REQUEST="RWE_FRIEND_REQUEST",LS.CLOTHING_CHANGE="RWE_CLOTHING_CHANGE",LS.CONVERSION_TRACKING="RWE_CONVERSION_TRACKING",LS.USER_NOTIFICATION="RWE_USER_NOTIFICATION",LS.FRIENDS_BAR="RWE_FRIENDS_BAR",LS.PURSE_WIDGET="RWE_PURSE_WIDGET",LS.AVATAR_INFO="RWE_AVATAR_INFO",LS.WELCOME_GIFT="RWE_WELCOME_GIFT",LS.SPAMWALL_POSTIT_WIDGET="RWE_SPAMWALL_POSTIT_WIDGET",LS.EFFECTS="RWE_EFFECTS",LS.MANNEQUIN="RWE_MANNEQUIN",LS.FURNITURE_CONTEXT_MENU="RWE_FURNITURE_CONTEXT_MENU",LS.LOCATION_WIDGET="RWE_LOCATION_WIDGET",LS.CAMERA="RWE_CAMERA",LS.ROOM_THUMBNAIL_CAMERA="RWE_ROOM_THUMBNAIL_CAMERA",LS.ROOM_BACKGROUND_COLOR="RWE_ROOM_BACKGROUND_COLOR",LS.CUSTOM_USER_NOTIFICATION="RWE_CUSTOM_USER_NOTIFICATION",LS.FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWE_FURNI_ACHIEVEMENT_RESOLUTION_ENGRAVING",LS.FRIEND_FURNI_CONFIRM="RWE_FRIEND_FURNI_CONFIRM",LS.FRIEND_FURNI_ENGRAVING="RWE_FRIEND_FURNI_ENGRAVING",LS.HIGH_SCORE_DISPLAY="RWE_HIGH_SCORE_DISPLAY",LS.INTERNAL_LINK="RWE_INTERNAL_LINK",LS.CUSTOM_STACK_HEIGHT="RWE_CUSTOM_STACK_HEIGHT",LS.YOUTUBE="RWE_YOUTUBE",LS.RENTABLESPACE="RWE_RENTABLESPACE",LS.VIMEO="RWE_VIMEO",LS.ROOM_TOOLS="RWE_ROOM_TOOLS",LS.EXTERNAL_IMAGE="RWE_EXTERNAL_IMAGE",LS.WORD_QUIZZ="RWE_WORD_QUIZZ",LS.UI_HELP_BUBBLE="RWE_UI_HELP_BUBBLE",LS.ROOM_LINK="RWE_ROOM_LINK",LS.CRAFTING="RWE_CRAFTING",LS.ROOMGAME_CHECKERS="RWE_GAME_CHECKERS";var US=Object(a.a)((function t(){Object(r.a)(this,t)}));US.NOBODY=0,US.CONTROLLER=1,US.EVERYBODY=2;var PS=Object(a.a)((function t(){Object(r.a)(this,t)}));PS.NORMAL=0,PS.GENERIC=1,PS.BOT=2;var wS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"widget",get:function(){return LS.CRAFTING}}]),i}(bS),FS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.CREDITFURNI];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t);var e=0;t.logic&&t.logic.credits&&""!==t.logic.credits&&t.logic.credits.length>0&&(e=parseInt(t.logic.credits)),this.object.model.setValue(dt.FURNITURE_CREDIT_VALUE,e)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&(this.eventDispatcher.dispatchEvent(new TR(TR.CREDITFURNI,this.object)),Object(d.a)(Object(f.a)(i.prototype),"useObject",this).call(this))}}]),i}(bS),xS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[dR.MOUSE_BUTTON,dR.MOUSE_ARROW];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){switch(t.type){case _i.ROLL_OVER:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_BUTTON,this.object));break;case _i.ROLL_OUT:this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_ARROW,this.object))}Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}}]),i}(bS),BS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_ALWAYS_STACKABLE,1)}},{key:"widget",get:function(){return LS.CUSTOM_STACK_HEIGHT}}]),i}(xS),GS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._noTags=void 0,t._noTagsLastStateActivate=void 0,t._noTags=!1,t._noTagsLastStateActivate=!1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[dR.DICE_ACTIVATE,dR.DICE_OFF];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){var n=null;if(t.type===_i.DOUBLE_CLICK)return this._noTags?this._noTagsLastStateActivate&&0!==this.object.getState(0)&&100!==this.object.getState(0)?(n=new dR(dR.DICE_OFF,this.object),this._noTagsLastStateActivate=!1):(n=new dR(dR.DICE_ACTIVATE,this.object),this._noTagsLastStateActivate=!0):"activate"===t.spriteTag||0===this.object.getState(0)||100===this.object.getState(0)?n=new dR(dR.DICE_ACTIVATE,this.object):"deactivate"===t.spriteTag&&(n=new dR(dR.DICE_OFF,this.object)),void(n&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(n));Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}}]),i}(bS),HS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.ECOTRONBOX];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.ECOTRONBOX,this.object))}}]),i}(bS),VS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._showStateOnceRendered=void 0,t._updateCount=void 0,t._showStateOnceRendered=!1,t._updateCount=0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.INERNAL_LINK];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.action&&1===t.logic.action.startState&&(this._showStateOnceRendered=!0)}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._showStateOnceRendered&&(this._updateCount++,this._showStateOnceRendered&&this._updateCount>20&&(this.setAutomaticStateIndex(1),this._showStateOnceRendered=!1))}},{key:"setAutomaticStateIndex",value:function(t){this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX,t)}},{key:"mouseEvent",value:function(t,e){t&&e&&(t.type===_i.DOUBLE_CLICK&&this.setAutomaticStateIndex(0),Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e))}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.INERNAL_LINK,this.object))}}]),i}(bS),zS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._timer=void 0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.ROOM_LINK];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.action&&t.logic.action.link&&""!==t.logic.action.link&&t.logic.action.link.length>0&&this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_INTERNAL_LINK,t.logic.action.link)}},{key:"onDispose",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"setAutomaticStateIndex",value:function(t){this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX,t)}},{key:"useObject",value:function(){var t=this;this.setAutomaticStateIndex(1),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout((function(){t.setAutomaticStateIndex(0),t._timer=null}),2500),this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.ROOM_LINK,this.object))}}]),i}(bS),YS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._timer=void 0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.EFFECTBOX_OPEN_DIALOG];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.EFFECTBOX_OPEN_DIALOG,this.object))}},{key:"contextMenu",get:function(){return MS.EFFECT_BOX}}]),i}(bS),WS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t&&this.object&&this.object.model){var e="";t.logic&&t.logic.maskType&&""!==t.logic.maskType&&t.logic.maskType.length>0&&(e=t.logic.maskType),this.object.model.setValue(dt.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(dt.FURNITURE_PLANE_MASK_TYPE,e)}}},{key:"widget",get:function(){return LS.EXTERNAL_IMAGE}}]),i}(xS),KS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[mR.STATE_CHANGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.particleSystems&&t.logic.particleSystems.length&&this.object.model.setValue(dt.FURNITURE_FIREWORKS_DATA,t.logic.particleSystems)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){var n=null;if(t.type===_i.DOUBLE_CLICK){switch(t.spriteTag){case"start_stop":n=new mR(mR.STATE_CHANGE,this.object,1);break;case"reset":n=new mR(mR.STATE_CHANGE,this.object,2)}if(this.eventDispatcher&&n)return void this.eventDispatcher.dispatchEvent(n)}Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object,0))}}]),i}(bS),XS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._currentState=void 0,t._currentLocation=void 0,t._currentState=-1,t._currentLocation=null,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[lR.ADD_HOLE,lR.REMOVE_HOLE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"onDispose",value:function(){this._currentState===i.STATE_HOLE&&this.eventDispatcher.dispatchEvent(new lR(lR.REMOVE_HOLE,this.object)),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.handleAutomaticStateUpdate()}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object){t instanceof ZR&&this.handleStateUpdate(this.object.getState(0));var e=this.object.getLocation();this._currentLocation?e.x===this._currentLocation.x&&e.y===this._currentLocation.y||this._currentState===i.STATE_HOLE&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new lR(lR.ADD_HOLE,this.object)):this._currentLocation=new Et,this._currentLocation.assign(e)}}},{key:"handleStateUpdate",value:function(t){t!==this._currentState&&(this.eventDispatcher&&(t===i.STATE_HOLE?this.eventDispatcher.dispatchEvent(new lR(lR.ADD_HOLE,this.object)):this._currentState===i.STATE_HOLE&&this.eventDispatcher.dispatchEvent(new lR(lR.REMOVE_HOLE,this.object))),this._currentState=t)}},{key:"handleAutomaticStateUpdate",value:function(){if(this.object){var t=this.object.model;if(t){var e=t.getValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(e)||this.handleStateUpdate(e%2)}}}}]),i}(xS);XS.STATE_HOLE=0;var qS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._state=-1,t}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this.object&&this.object.model.setValue(dt.FURNITURE_FRIENDFURNI_ENGRAVING,this.engravingDialogType)}},{key:"processUpdateMessage",value:function(t){if(t instanceof ZR){var e=t.data;this._state=e?e.state:t.state}Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}},{key:"getEventTypes",value:function(){var t=[TR.FRIEND_FURNITURE_ENGRAVING];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&(this._state===i.STATE_LOCKED?this.eventDispatcher.dispatchEvent(new TR(TR.FRIEND_FURNITURE_ENGRAVING,this.object)):Object(d.a)(Object(f.a)(i.prototype),"useObject",this).call(this))}},{key:"engravingDialogType",get:function(){return 0}},{key:"contextMenu",get:function(){return this._state===i.STATE_UNLOCKED?MS.FRIEND_FURNITURE:MS.DUMMY}}]),i}(xS);qS.STATE_UNINITIALIZED=-1,qS.STATE_UNLOCKED=0,qS.STATE_LOCKED=1;var QS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,null,null))._type=void 0,n._type=t,n}return Object(a.a)(i,[{key:"type",get:function(){return this._type}}]),i}(Ve);QS.IMAGE_LOADED="ROAUM_IMAGE_LOADED",QS.IMAGE_LOADING_FAILED="ROAUM_IMAGE_FAILED";var ZS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,null,null))._type=void 0,n._mapData=void 0,n._type=i.UPDATE_MAP,n._mapData=t,n}return Object(a.a)(i,[{key:"type",get:function(){return this._type}},{key:"mapData",get:function(){return this._mapData}}]),i}(Ve);ZS.UPDATE_MAP="RORMUM_UPDATE_MAP";var JS=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[cR.LOAD_BADGE,TR.GUILD_FURNI_CONTEXT_MENU,TR.CLOSE_FURNI_CONTEXT_MENU];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR){var e=t.data;e instanceof Aa&&(this.updateGroupId(e.getValue(i.GROUPID_KEY)),this.updateBadge(e.getValue(i.BADGE_KEY)),this.updateColors(e.getValue(i.COLOR1_KEY),e.getValue(i.COLOR2_KEY)))}else t instanceof JR?"loading_icon"!==t.assetName&&(this.object.model.setValue(dt.FURNITURE_GUILD_CUSTOMIZED_ASSET_NAME,t.assetName),this.update(gD.instance.time)):t instanceof vS&&(t.selected||this.eventDispatcher.dispatchEvent(new TR(TR.CLOSE_FURNI_CONTEXT_MENU,this.object)))}},{key:"updateGroupId",value:function(t){this.object.model.setValue(dt.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID,parseInt(t))}},{key:"updateBadge",value:function(t){this.eventDispatcher.dispatchEvent(new cR(cR.LOAD_BADGE,this.object,t,!0))}},{key:"updateColors",value:function(t,e){this.object.model.setValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_1,parseInt(t,16)),this.object.model.setValue(dt.FURNITURE_GUILD_CUSTOMIZED_COLOR_2,parseInt(e,16))}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){if(t.type===_i.MOUSE_CLICK)this.openContextMenu();Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}},{key:"openContextMenu",value:function(){this.eventDispatcher.dispatchEvent(new TR(TR.GUILD_FURNI_CONTEXT_MENU,this.object))}}]),i}(xS);JS.GROUPID_KEY=1,JS.BADGE_KEY=2,JS.COLOR1_KEY=3,JS.COLOR2_KEY=4;var $S=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.INERNAL_LINK];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"updateGroupId",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"updateGroupId",this).call(this,t),this.object.model.setValue(dt.FURNITURE_INTERNAL_LINK,"groupforum/".concat(t))}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&(this.eventDispatcher.dispatchEvent(new TR(TR.INERNAL_LINK,this.object)),Object(d.a)(Object(f.a)(i.prototype),"useObject",this).call(this))}}]),i}(JS),tj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._state=-1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){return[TR.HIGH_SCORE_DISPLAY,TR.HIDE_HIGH_SCORE_DISPLAY]}},{key:"tearDown",value:function(){1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new TR(TR.HIDE_HIGH_SCORE_DISPLAY,this.object)),Object(d.a)(Object(f.a)(i.prototype),"tearDown",this).call(this)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&t instanceof ZR&&(t.state===i.SHOW_WIDGET_IN_STATE?this.eventDispatcher.dispatchEvent(new TR(TR.HIGH_SCORE_DISPLAY,this.object)):this.eventDispatcher.dispatchEvent(new TR(TR.HIDE_HIGH_SCORE_DISPLAY,this.object)),this._state=t.state)}}]),i}(bS);tj.SHOW_WIDGET_IN_STATE=1;var ej=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[mR.STATE_CHANGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){var n=null;switch(t.type){case _i.DOUBLE_CLICK:if("off"===t.spriteTag)n=new mR(mR.STATE_CHANGE,this.object,3);break;case _i.MOUSE_CLICK:switch(t.spriteTag){case"inc":n=new mR(mR.STATE_CHANGE,this.object,2);break;case"dec":n=new mR(mR.STATE_CHANGE,this.object,1)}}this.eventDispatcher&&n?this.eventDispatcher.dispatchEvent(n):Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object,3))}}]),i}(bS),ij=Object(a.a)((function t(){Object(r.a)(this,t)}));ij.LOVE_LOCK=0,ij.CARVE_A_TREE=1,ij.FRIENDS_PORTRAIT=2,ij.WILD_WEST_WANTED=3,ij.HABBOWEEN=4;var nj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"engravingDialogType",get:function(){return ij.HABBOWEEN}}]),i}(qS),sj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._nextState=void 0,t._nextStateExtra=void 0,t._nextStateTimestamp=void 0,t._nextState=0,t._nextStateTimestamp=0,t}return Object(a.a)(i,[{key:"update",value:function(t){if(this._nextStateTimestamp>0&&t>=this._nextStateTimestamp){this._nextStateTimestamp=0;var e=new Ta;e.setString(this._nextState.toString()),Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,new ZR(this._nextState,e,this._nextStateExtra))}Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t)}},{key:"processUpdateMessage",value:function(t){t instanceof ZR?this.processUpdate(t):Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}},{key:"processUpdate",value:function(t){if(t){var e=~~(t.state/1e3),n=~~(t.state%1e3);if(n)this._nextState=e,this._nextStateExtra=t.extra,this._nextStateTimestamp=this.time+n;else{this._nextStateTimestamp=0;var s=new Ta;s.setString(e.toString()),Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,new ZR(e,s,t.extra))}}}}]),i}(xS),rj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._showStateOnceRendered=!1,t._updateCount=0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.INERNAL_LINK];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.action&&(this.object.model.setValue(dt.FURNITURE_INTERNAL_LINK,t.logic.action.link),1===t.logic.action.startState&&(this._showStateOnceRendered=!0))}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._showStateOnceRendered&&(this._updateCount++,this._showStateOnceRendered&&20===this._updateCount&&(this.setAutomaticStateIndex(1),this._showStateOnceRendered=!1))}},{key:"setAutomaticStateIndex",value:function(t){this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX,t)}},{key:"mouseEvent",value:function(t,e){t&&e&&(t.type===_i.DOUBLE_CLICK&&this._showStateOnceRendered&&this.setAutomaticStateIndex(0),Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e))}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.INERNAL_LINK,this.object))}}]),i}(bS),aj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._disposeEventsAllowed=!1,t._isInitialized=!1,t._currentState=-1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[dR.JUKEBOX_START,dR.JUKEBOX_MACHINE_STOP,dR.JUKEBOX_DISPOSE,dR.JUKEBOX_INIT,TR.JUKEBOX_PLAYLIST_EDITOR];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"onDispose",value:function(){this.requestDispose(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&(this._isInitialized||this.requestInit(),this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.JUKEBOX),t instanceof ZR)){var e=this.object.getState(0);e!==this._currentState&&(this._currentState=e,1===e?this.requestPlayList():0===e&&this.requestStopPlaying())}}},{key:"requestInit",value:function(){this.object&&this.eventDispatcher&&(this._disposeEventsAllowed=!0,this.eventDispatcher.dispatchEvent(new dR(dR.JUKEBOX_INIT,this.object)),this._isInitialized=!0)}},{key:"requestPlayList",value:function(){this.object&&this.eventDispatcher&&(this._disposeEventsAllowed=!0,this.eventDispatcher.dispatchEvent(new dR(dR.JUKEBOX_START,this.object)))}},{key:"requestStopPlaying",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.JUKEBOX_MACHINE_STOP,this.object))}},{key:"requestDispose",value:function(){this._disposeEventsAllowed&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.JUKEBOX_DISPOSE,this.object))}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&(this.eventDispatcher.dispatchEvent(new TR(TR.JUKEBOX_PLAYLIST_EDITOR,this.object)),this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object,-1)))}}]),i}(xS),oj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"engravingDialogType",get:function(){return ij.LOVE_LOCK}}]),i}(qS),uj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.MANNEQUIN];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&(t.data.writeRoomObjectModel(this.object.model),this.processObjectData())}},{key:"processObjectData",value:function(){if(this.object&&this.object.model){var t=new Ra;t.initializeFromRoomObjectModel(this.object.model),this.object.model.setValue(dt.FURNITURE_MANNEQUIN_GENDER,t.getValue(i.GENDER)),this.object.model.setValue(dt.FURNITURE_MANNEQUIN_FIGURE,t.getValue(i.FIGURE)),this.object.model.setValue(dt.FURNITURE_MANNEQUIN_NAME,t.getValue(i.OUTFIT_NAME))}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.MANNEQUIN,this.object))}}]),i}(bS);uj.GENDER="GENDER",uj.FIGURE="FIGURE",uj.OUTFIT_NAME="OUTFIT_NAME";var cj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.object))}},{key:"contextMenu",get:function(){return MS.MONSTERPLANT_SEED}}]),i}(xS),hj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this.object&&this.object.model&&this.object.model.setValue(dt.FURNITURE_IS_VARIABLE_HEIGHT,1)}}]),i}(xS),_j=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.MYSTERYBOX_OPEN_DIALOG];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.MYSTERYBOX_OPEN_DIALOG,this.object))}},{key:"contextMenu",get:function(){return MS.MYSTERY_BOX}}]),i}(xS),lj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.MYSTERYTROPHY_OPEN_DIALOG];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.MYSTERYTROPHY_OPEN_DIALOG,this.object))}},{key:"contextMenu",get:function(){return MS.MYSTERY_TROPHY}}]),i}(xS),dj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[dR.ENTER_ONEWAYDOOR];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.ENTER_ONEWAYDOOR,this.object))}}]),i}(bS),fj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.PET_PRODUCT_MENU];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object&&1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.USABLE_PRODUCT)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.PET_PRODUCT_MENU,this.object))}}]),i}(bS),vj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.PLACEHOLDER];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.PLACEHOLDER,this.object))}}]),i}(bS),gj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.planetSystems&&this.object.model.setValue(dt.FURNITURE_PLANETSYSTEM_DATA,t.logic.planetSystems)}}]),i}(bS),Oj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.PRESENT];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.particleSystems&&t.logic.particleSystems.length&&this.object.model.setValue(dt.FURNITURE_FIREWORKS_DATA,t.logic.particleSystems)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&(t.data.writeRoomObjectModel(this.object.model),this.updateStuffData()),t instanceof ek&&t.numberKey===dt.FURNITURE_DISABLE_PICKING_ANIMATION&&this.object.model.setValue(dt.FURNITURE_DISABLE_PICKING_ANIMATION,t.numberValue)}},{key:"updateStuffData",value:function(){if(this.object&&this.object.model){var t=new Ra;t.initializeFromRoomObjectModel(this.object.model);var e=t.getValue(i.MESSAGE),n=this.object.model.getValue(dt.FURNITURE_DATA);e||"string"!==typeof n?this.object.model.setValue(dt.FURNITURE_DATA,t.getValue(i.MESSAGE)):this.object.model.setValue(dt.FURNITURE_DATA,n.substr(1)),this.writeToModel(dt.FURNITURE_TYPE_ID,t.getValue(i.PRODUCT_CODE)),this.writeToModel(dt.FURNITURE_PURCHASER_NAME,t.getValue(i.PURCHASER_NAME)),this.writeToModel(dt.FURNITURE_PURCHASER_FIGURE,t.getValue(i.PURCHASER_FIGURE))}}},{key:"writeToModel",value:function(t,e){e&&this.object.model.setValue(t,e)}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object){switch(t.type){case _i.ROLL_OVER:this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_BUTTON,this.object));break;case _i.ROLL_OUT:this.eventDispatcher.dispatchEvent(new dR(dR.MOUSE_ARROW,this.object))}Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.PRESENT,this.object))}}]),i}(bS);Oj.MESSAGE="MESSAGE",Oj.PRODUCT_CODE="PRODUCT_CODE",Oj.EXTRA_PARAM="EXTRA_PARAM",Oj.PURCHASER_NAME="PURCHASER_NAME",Oj.PURCHASER_FIGURE="PURCHASER_FIGURE";var yj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.object))}},{key:"contextMenu",get:function(){return MS.PURCHASABLE_CLOTHING}}]),i}(xS),Ej=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._oldLocation=void 0,t.updateInterval=mS.DEFAULT_UPDATE_INTERVAL,t._oldLocation=new Et,t}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){if(t){var e=t instanceof XR;if(this.object&&!e&&t.location){var n=this.object.getLocation(),s=Et.dif(t.location,n);if(s&&Math.abs(s.x)<2&&Math.abs(s.y)<2){var r=n;return(Math.abs(s.x)>1||Math.abs(s.y)>1)&&(r=Et.sum(n,Et.product(s,.5))),void Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,new XR(r,t.location,t.direction))}}if(t.location&&!e&&Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,new XR(t.location,t.location,t.direction)),t instanceof ZR)return t.state>0?this.updateInterval=mS.DEFAULT_UPDATE_INTERVAL/this.getUpdateIntervalValue(t.state):this.updateInterval=1,void this.handleDataUpdate(t);e&&t.isSlide&&(this.updateInterval=mS.DEFAULT_UPDATE_INTERVAL),Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}}},{key:"getUpdateIntervalValue",value:function(t){return t/i.MAX_ANIMATION_COUNT}},{key:"getAnimationValue",value:function(t){return t%i.MAX_ANIMATION_COUNT}},{key:"handleDataUpdate",value:function(t){var e=this.getAnimationValue(t.state);if(e!==t.state){var n=new Ta;n.setString(e.toString()),t=new ZR(e,n,t.extra)}Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}},{key:"update",value:function(t){this.object&&(this._oldLocation.assign(this.object.getLocation()),Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),0===Et.dif(this.object.getLocation(),this._oldLocation).length&&this.object.getState(0)!==i.ANIMATION_NOT_MOVING&&this.object.setState(i.ANIMATION_NOT_MOVING,0))}}]),i}(xS);Ej.ANIMATION_NOT_MOVING=0,Ej.ANIMATION_MOVING=1,Ej.MAX_ANIMATION_COUNT=10;var pj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[mR.STATE_RANDOM];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new mR(mR.STATE_RANDOM,this.object))}}]),i}(bS),mj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"contextMenu",get:function(){return MS.RANDOM_TELEPORT}}]),i}(xS),Ij=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[hR.RODRE_CURRENT_USER_ID];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"update",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.object&&this.object.model){this.object.model.getValue(dt.SESSION_CURRENT_USER_ID)||this.eventDispatcher.dispatchEvent(new hR(hR.RODRE_CURRENT_USER_ID,this.object));var e=this.object.model.getValue(dt.FURNITURE_DATA).getValue("renterId"),n=this.object.model.getValue(dt.SESSION_CURRENT_USER_ID);e?parseInt(e)===n?this.object.setState(2,0):this.object.setState(1,0):this.object.setState(0,0)}}},{key:"widget",get:function(){return LS.RENTABLESPACE}}]),i}(bS),bj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._roomColorUpdated=void 0,t._roomColorUpdated=!1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.BACKGROUND_COLOR,vR.ROOM_BACKGROUND_COLOR];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"onDispose",value:function(){if(this._roomColorUpdated){if(this.eventDispatcher&&this.object)1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.eventDispatcher.dispatchEvent(new vR(vR.ROOM_BACKGROUND_COLOR,this.object,!1,0,0,0));this._roomColorUpdated=!1}Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"processUpdateMessage",value:function(t){(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR)&&(t.data.writeRoomObjectModel(this.object.model),1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.processColorUpdate())}},{key:"processColorUpdate",value:function(){if(this.object&&this.object.model){var t=new ka;t.initializeFromRoomObjectModel(this.object.model);var e=t.getValue(0),i=t.getValue(1),n=t.getValue(2),s=t.getValue(3);e>-1&&i>-1&&n>-1&&s>-1&&(this.object.model.setValue(dt.FURNITURE_ROOM_BACKGROUND_COLOR_HUE,i),this.object.model.setValue(dt.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION,n),this.object.model.setValue(dt.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS,s),this.object.setState(e,0),this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new vR(vR.ROOM_BACKGROUND_COLOR,this.object,1===e,i,n,s)),this._roomColorUpdated=!0)}}},{key:"mouseEvent",value:function(t,e){t&&e&&this.object&&(t.type!==_i.DOUBLE_CLICK?Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e):this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.BACKGROUND_COLOR,this.object)))}}]),i}(xS),Tj=i(102),Rj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._disableFurnitureSelection=void 0,t._hasClickUrl=void 0,t._disableFurnitureSelection=!0,t._hasClickUrl=!1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[yR.ROOM_AD_LOAD_IMAGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this._disableFurnitureSelection&&this.object.model.setValue(dt.FURNITURE_SELECTION_DISABLED,1)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&this.processAdDataUpdateMessage(t),t instanceof QS&&this.processAdUpdate(t)}},{key:"processAdDataUpdateMessage",value:function(t){if(t){var e=new Ra;e.initializeFromRoomObjectModel(this.object.model);var n=parseInt(e.getValue(i.STATE));isNaN(n)||this.object.getState(0)===n||this.object.setState(n,0);var s=e.getValue(i.IMAGEURL_KEY),r=this.object.model.getValue(dt.FURNITURE_BRANDING_IMAGE_URL);r&&r===s||(this.object.model.setValue(dt.FURNITURE_BRANDING_IMAGE_URL,s),this.object.model.setValue(dt.FURNITURE_BRANDING_IMAGE_STATUS,0),this.downloadBackground());var a=e.getValue(i.CLICKURL_KEY);if(a){var o=this.object.model.getValue(dt.FURNITURE_BRANDING_URL);o&&o===a||this.object.model&&this.object.model.setValue(dt.FURNITURE_BRANDING_URL,a)}var u=parseInt(e.getValue(i.OFFSETX_KEY)),c=parseInt(e.getValue(i.OFFSETY_KEY)),h=parseInt(e.getValue(i.OFFSETZ_KEY));isNaN(u)||this.object.model.setValue(dt.FURNITURE_BRANDING_OFFSET_X,u),isNaN(c)||this.object.model.setValue(dt.FURNITURE_BRANDING_OFFSET_Y,c),isNaN(h)||this.object.model.setValue(dt.FURNITURE_BRANDING_OFFSET_Z,h);var _=i.IMAGEURL_KEY+"="+(null!==s?s:"")+"\t";this._hasClickUrl&&(_=_+(i.CLICKURL_KEY+"=")+(null!==a?a:"")+"\t"),_=(_=(_=_+(i.OFFSETX_KEY+"=")+u+"\t")+(i.OFFSETY_KEY+"=")+c+"\t")+(i.OFFSETZ_KEY+"=")+h+"\t",this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.BRANDING_OPTIONS+_)}}},{key:"processAdUpdate",value:function(t){if(t&&this.object)switch(t.type){case QS.IMAGE_LOADED:this.object.model.setValue(dt.FURNITURE_BRANDING_IMAGE_STATUS,1);break;case QS.IMAGE_LOADING_FAILED:this.object.model.setValue(dt.FURNITURE_BRANDING_IMAGE_STATUS,-1)}}},{key:"mouseEvent",value:function(t,e){t&&e&&t.type!==_i.MOUSE_MOVE&&t.type!==_i.DOUBLE_CLICK&&Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e)}},{key:"downloadBackground",value:function(){var t=this,e=this.object&&this.object.model;if(e){var i=e.getValue(dt.FURNITURE_BRANDING_IMAGE_URL),n=e.getValue(dt.FURNITURE_BRANDING_IMAGE_STATUS);if(i&&""!==i&&1!==n)if(i.endsWith(".gif"))this.object.model.setValue(dt.FURNITURE_BRANDING_IS_ANIMATED,!0),fetch(i).then((function(t){return t.arrayBuffer()})).then((function(t){return Object(Tj.parseGIF)(t)})).then((function(e){for(var n=e.lsd.width,s=e.lsd.height,r=n*s,a=Object(Tj.decompressFrames)(e,!1),o=[],u=[],h=new Uint8Array(4*r),_=0;_<a.length;_++){_>0&&(h=h.slice(0));for(var l=a[_].pixels,d=a[_].colorTable,f=a[_].transparentIndex,v=a[_].dims,g=0;g<v.height;g++)for(var O=0;O<v.width;O++){var y=l[g*v.width+O],E=(g+v.top)*n+(O+v.left);if(f!==y){var p=d[y];h[4*E]=p[0],h[4*E+1]=p[1],h[4*E+2]=p[2],h[4*E+3]=255}}var m=c.c.fromBuffer(h,n,s);o.push(new c.t(m)),u.push(a[_].delay)}gD.instance.roomEngine.roomContentLoader.createGifCollection(i,o,u),t.processUpdateMessage(new QS(QS.IMAGE_LOADED))})).catch((function(e){t.processUpdateMessage(new QS(QS.IMAGE_LOADING_FAILED))}));else{var s=gD.instance.core&&gD.instance.core.asset;if(!s)return;if(!s.getTexture(i))return void s.downloadAsset(i,(function(e){e?t.processUpdateMessage(new QS(QS.IMAGE_LOADED)):t.processUpdateMessage(new QS(QS.IMAGE_LOADING_FAILED))}));this.processUpdateMessage(new QS(QS.IMAGE_LOADED))}}}}]),i}(bS);Rj.STATE="state",Rj.IMAGEURL_KEY="imageUrl",Rj.CLICKURL_KEY="clickUrl",Rj.OFFSETX_KEY="offsetX",Rj.OFFSETY_KEY="offsetY",Rj.OFFSETZ_KEY="offsetZ";var kj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getAdClickUrl",value:function(t){return null}}]),i}(Rj),Aj=function(){function t(e){Object(r.a)(this,t),this._data=void 0,this._maxSize=void 0,this._index=void 0,this._data=[],this._maxSize=e,this._index=0}return Object(a.a)(t,[{key:"reset",value:function(){this._data=[],this._index=0}},{key:"addValue",value:function(t){this._data.length<this._maxSize?this._data.push(t):this._data[this._index]=t,this._index=(this._index+1)%this._maxSize}},{key:"getMax",value:function(){for(var t=Number.MIN_VALUE,e=0;e<this._maxSize;)this._data[e]>t&&(t=this._data[e]),e++;return t}},{key:"getMin",value:function(){for(var t=Number.MAX_VALUE,e=0;e<this._maxSize;)this._data[e]<t&&(t=this._data[e]),e++;return t}}]),t}(),Sj=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"format",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e>n*t.YEAR?t.getLocalization("friendlytime.years"+i,Math.round(e/t.YEAR)):e>n*t.MONTH?t.getLocalization("friendlytime.months"+i,Math.round(e/t.MONTH)):e>n*t.DAY?t.getLocalization("friendlytime.days"+i,Math.round(e/t.DAY)):e>n*t.HOUR?t.getLocalization("friendlytime.hours"+i,Math.round(e/t.HOUR)):e>n*t.MINUTE?t.getLocalization("friendlytime.minutes"+i,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds"+i,Math.round(e))}},{key:"shortFormat",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e>n*t.YEAR?t.getLocalization("friendlytime.years.short"+i,Math.round(e/t.YEAR)):e>n*t.MONTH?t.getLocalization("friendlytime.months.short"+i,Math.round(e/t.MONTH)):e>n*t.DAY?t.getLocalization("friendlytime.days.short"+i,Math.round(e/t.DAY)):e>n*t.HOUR?t.getLocalization("friendlytime.hours.short"+i,Math.round(e/t.HOUR)):e>n*t.MINUTE?t.getLocalization("friendlytime.minutes.short"+i,Math.round(e/t.MINUTE)):t.getLocalization("friendlytime.seconds.short"+i,Math.round(e))}},{key:"getLocalization",value:function(t,e){return gD.instance.getLocalizationWithParameter(t,"amount",e.toString())}}]),t}();Sj.MINUTE=60,Sj.HOUR=60*Sj.MINUTE,Sj.DAY=24*Sj.HOUR,Sj.WEEK=7*Sj.DAY,Sj.MONTH=30*Sj.DAY,Sj.YEAR=365*Sj.DAY;var jj=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"logEventLog",value:function(t){try{LT.available&&LT.call("logEventLog",t)}catch(e){I.log("External interface not working, failed to log event log.")}}},{key:"openPage",value:function(t){try{LT.available?LT.call("openPage",t):I.log("External interface not available, openPage failed.")}catch(e){I.log("Failed to open web page "+t)}}},{key:"openWebPage",value:function(t){window.open(t)}},{key:"sendHeartBeat",value:function(){try{LT.available&&LT.call("heartBeat")}catch(t){I.log("Failed to send heartbeat")}}},{key:"openWebPageAndMinimizeClient",value:function(e){try{LT.available&&t.openPage(e)}catch(i){I.log("Failed to open web page "+e)}}},{key:"closeWebPageAndRestoreClient",value:function(){try{LT.available&&LT.call("closeWebPageAndRestoreClient")}catch(t){I.log("Failed to close web page and restore client!")}}},{key:"openHabblet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{LT.available&&LT.call("openHabblet",t,e)}catch(i){I.log("Failed to open Habblet "+t)}}},{key:"closeHabblet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{LT.available&&LT.call("closeHabblet",t,e)}catch(i){I.log("Failed to close Habblet "+t)}}},{key:"send",value:function(t,e){try{LT.available&&LT.call("disconnect",t,e)}catch(i){I.log("Failed to close send ")}}},{key:"showGame",value:function(t){try{LT.available&&LT.callGame("showGame",t)}catch(e){I.log("Failed to open game: "+e)}}},{key:"hideGame",value:function(){try{LT.available&&LT.callGame("hideGame")}catch(t){I.log("Failed to hide game")}}},{key:"open",value:function(t){try{LT.available?LT.call("openExternalLink",escape(t)):I.log("External interface not available. Could not request to open: "+t)}catch(e){I.log("External interface not working. Could not request to open: "+t)}}},{key:"roomVisited",value:function(t){try{LT.available?LT.call("roomVisited",t):I.log("External interface not available. Could not store last room visit.")}catch(e){I.log("External interface not working. Could not store last room visit.")}}},{key:"openMinimail",value:function(t){try{LT.available?LT.call("openMinimail",t):I.log("External interface not available. Could not open minimail.")}catch(e){I.log("External interface not working. Could not open minimail.")}}},{key:"openNews",value:function(){try{LT.available?LT.call("openNews"):I.log("External interface not available. Could not open news.")}catch(t){I.log("External interface not working. Could not open news.")}}},{key:"closeNews",value:function(){try{LT.available?LT.call("closeNews"):I.log("External interface not available. Could not close news.")}catch(t){I.log("External interface not working. Could not close news.")}}},{key:"openAvatars",value:function(){try{LT.available?LT.call("openAvatars"):I.log("External interface not available. Could not open avatars.")}catch(t){I.log("External interface not working. Could not open avatars.")}}},{key:"openRoomEnterAd",value:function(){try{LT.available?LT.call("openRoomEnterAd"):I.log("External interface not available. Could not open roomenterad.")}catch(t){I.log("External interface not working. Could not open roomenterad.")}}},{key:"updateFigure",value:function(t){try{LT.available?LT.call("updateFigure",t):I.log("External interface not available. Could not update figure.")}catch(e){I.log("External interface not working. Could not update figure.")}}}]),t}();jj.ADVERTISEMENT="advertisement",jj.OPENLINK="openlink",jj.OPENROOM="openroom";var Nj=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"isWebGLAvailable",value:function(){return Object(GT.q)()}}]),t}(),Dj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._hasClickUrl=!0,t}return Object(a.a)(i,[{key:"getAdClickUrl",value:function(t){return t.getValue(dt.FURNITURE_BRANDING_URL)}},{key:"handleAdClick",value:function(t,e,i){0!==i.indexOf("http")?this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new yR(yR.ROOM_AD_FURNI_CLICK,this.object,"",i)):jj.openWebPage(i)}}]),i}(Rj),Mj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._roomColorUpdated=void 0,t._roomColorUpdated=!1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.DIMMER,TR.WIDGET_REMOVE_DIMMER,_R.DIMMER_STATE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"onDispose",value:function(){this._roomColorUpdated&&(this.eventDispatcher&&this.object&&(1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&(this.eventDispatcher.dispatchEvent(new _R(this.object,0,1,1,16777215,255)),this.eventDispatcher.dispatchEvent(new TR(TR.WIDGET_REMOVE_DIMMER,this.object))),this._roomColorUpdated=!1));Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"processUpdateMessage",value:function(t){if(t instanceof ZR){if(t.data){var e=t.data.getLegacyString();1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this.processDimmerData(e),Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,new ZR(this.getStateFromDimmerData(e),t.data))}}else Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}},{key:"getStateFromDimmerData",value:function(t){if(!t)return 0;var e=t.split(",");return e.length>=5?parseInt(e[0])-1:0}},{key:"processDimmerData",value:function(t){if(t){var e=t.split(",");if(e.length>=5){var i=this.getStateFromDimmerData(t),n=parseInt(e[1]),s=parseInt(e[2]),r=e[3],a=parseInt(r.substr(1),16),o=parseInt(e[4]);i||(a=16777215,o=255),this.eventDispatcher&&this.object&&(this.eventDispatcher.dispatchEvent(new _R(this.object,i,n,s,a,o)),this._roomColorUpdated=!0)}}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.DIMMER,this.object))}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t)}}]),i}(bS),Cj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._score=void 0,t._scoreIncreaser=void 0,t._scoreTimer=void 0,t._score=0,t._scoreIncreaser=50,t._scoreTimer=0,t}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){if(t instanceof ZR)return this.updateScore(t.state);Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t)}},{key:"updateScore",value:function(t){this._score=t;var e=this.object.getState(0);if(this._score!==e){var n=this._score-e;n<0&&(n=-n),n*i.UPDATE_INTERVAL>i.MAX_UPDATE_TIME?this._scoreIncreaser=i.MAX_UPDATE_TIME/n:this._scoreIncreaser=i.UPDATE_INTERVAL,this._scoreTimer=gD.instance.time}}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t);var e=this.object.getState(0);if(e!==this._score&&t>=this._scoreTimer+this._scoreIncreaser){var n=t-this._scoreTimer,s=n/this._scoreIncreaser,r=1;this._score<e&&(r=-1),s>r*(this._score-e)&&(s=r*(this._score-e)),this.object.setState(e+r*s,0),this._scoreTimer=t-(n-s*this._scoreIncreaser)}}}]),i}(bS);Cj.UPDATE_INTERVAL=50,Cj.MAX_UPDATE_TIME=3e3;var Lj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)){var e=this.object.model.getValue(dt.FURNITURE_EXTRAS),n=parseInt(e);this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.SONGDISK+n)}}}]),i}(bS),Uj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._state=-1,t._sampleId=-1,t._noPitch=!1,t._lastLocZ=0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[ER.ROOM_OBJECT_INITIALIZED,ER.ROOM_OBJECT_DISPOSED,ER.PLAY_SAMPLE,ER.CHANGE_PITCH];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),t.logic&&t.logic.soundSample&&(this._sampleId=t.logic.soundSample.id,this._noPitch=t.logic.soundSample.noPitch),this.object.model.setValue(dt.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,1)}},{key:"onDispose",value:function(){this._state!==i.STATE_UNINITIALIZED&&this.eventDispatcher.dispatchEvent(new ER(ER.ROOM_OBJECT_DISPOSED,this.object,this._sampleId)),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&this.updateSoundBlockMessage(t)}},{key:"updateSoundBlockMessage",value:function(t){if(t){var e=this.object&&this.object.model,n=this.object&&this.object.location;e&&n&&(this._state===i.STATE_UNINITIALIZED&&1===e.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&(this._lastLocZ=n.z,this.eventDispatcher.dispatchEvent(new ER(ER.ROOM_OBJECT_INITIALIZED,this.object,this._sampleId,this.getPitchForHeight(n.z)))),this._state!==i.STATE_UNINITIALIZED&&1===e.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&this._lastLocZ!==n.z&&(this._lastLocZ=n.z,this.eventDispatcher.dispatchEvent(new ER(ER.CHANGE_PITCH,this.object,this._sampleId,this.getPitchForHeight(n.z)))),this._state!==i.STATE_UNINITIALIZED&&t.state!==this._state&&this.playSoundAt(n.z),this._state=t.state)}}},{key:"playSoundAt",value:function(t){if(this.object){var e=this.getPitchForHeight(t);this.object.model.setValue(dt.FURNITURE_SOUNDBLOCK_RELATIVE_ANIMATION_SPEED,e),this.eventDispatcher.dispatchEvent(new ER(ER.PLAY_SAMPLE,this.object,this._sampleId,e))}}},{key:"getPitchForHeight",value:function(t){if(this._noPitch)return 1;var e=2*t;return e>i.HIGHEST_SEMITONE&&(e=Math.min(0,i.LOWEST_SEMITONE+(e-i.HIGHEST_SEMITONE-1))),Math.pow(2,e/12)}}]),i}(xS);Uj.HIGHEST_SEMITONE=12,Uj.LOWEST_SEMITONE=-12,Uj.STATE_UNINITIALIZED=-1;var Pj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._disposeEventsAllowed=!1,t._isInitialized=!1,t._currentState=-1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[dR.SOUND_MACHINE_START,dR.SOUND_MACHINE_STOP,dR.SOUND_MACHINE_DISPOSE,dR.SOUND_MACHINE_INIT];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"onDispose",value:function(){this.requestDispose(),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),1===this.object.model.getValue(dt.FURNITURE_REAL_ROOM_OBJECT)&&(this._isInitialized||this.requestInit(),this.object.model.setValue(SS.INFOSTAND_EXTRA_PARAM,SS.JUKEBOX),t instanceof ZR)){var e=this.object.getState(0);e!==this._currentState&&(this._currentState=e,1===e?this.requestPlayList():0===e&&this.requestStopPlaying())}}},{key:"requestInit",value:function(){this.object&&this.eventDispatcher&&(this._disposeEventsAllowed=!0,this.eventDispatcher.dispatchEvent(new dR(dR.SOUND_MACHINE_INIT,this.object)),this._isInitialized=!0)}},{key:"requestPlayList",value:function(){this.object&&this.eventDispatcher&&(this._disposeEventsAllowed=!0,this.eventDispatcher.dispatchEvent(new dR(dR.SOUND_MACHINE_START,this.object)))}},{key:"requestStopPlaying",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.SOUND_MACHINE_STOP,this.object))}},{key:"requestDispose",value:function(){this._disposeEventsAllowed&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.SOUND_MACHINE_DISPOSE,this.object))}}]),i}(xS),wj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.STICKIE,dR.STICKIE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t),this.updateColor(),this.object&&this.object.model.setValue(dt.FURNITURE_IS_STICKIE,"")}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof tk&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.STICKIE,this.object)),this.updateColor()}},{key:"updateColor",value:function(){if(this.object){var t=this.object.model.getValue(dt.FURNITURE_DATA),e=i.STICKIE_COLORS.indexOf(t);e<0&&(e=3),this.object.model.setValue(dt.FURNITURE_COLOR,e+1)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new dR(dR.STICKIE,this.object))}}]),i}(bS);wj.STICKIE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"];var Fj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.TROPHY];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.TROPHY,this.object))}}]),i}(bS),xj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._total=void 0,t._lastUpdate=void 0,t._interval=void 0,t._total=0,t._lastUpdate=0,t._interval=33,t}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR){var e=t.data;if(!e)return;this.updateTotal(e.result)}}},{key:"updateTotal",value:function(t){if(this._total=t,!this._lastUpdate)return this.object.model.setValue(dt.FURNITURE_VOTE_COUNTER_COUNT,t),void(this._lastUpdate=gD.instance.time);if(this._total!==this.currentTotal){var e=Math.abs(this._total-this.currentTotal);e*i.UPDATE_INTERVAL>i.MAX_UPDATE_TIME?this._interval=i.MAX_UPDATE_TIME/e:this._interval=i.UPDATE_INTERVAL,this._lastUpdate=gD.instance.time}}},{key:"update",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.object&&this.currentTotal!==this._total&&t>=this._lastUpdate+this._interval){var e=t-this._lastUpdate,n=e/this._interval,s=1;this._total<this.currentTotal&&(s=-1),n>s*(this._total-this.currentTotal)&&(n=s*(this._total-this.currentTotal)),this.object.model.setValue(dt.FURNITURE_VOTE_COUNTER_COUNT,this.currentTotal+s*n),this._lastUpdate=t-(e-n*this._interval)}}},{key:"currentTotal",get:function(){return this.object.model.getValue(dt.FURNITURE_VOTE_COUNTER_COUNT)}}]),i}(xS);xj.UPDATE_INTERVAL=33,xj.MAX_UPDATE_TIME=1e3;var Bj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object&&t instanceof ZR){var e=t.data;e instanceof Sa&&this.object.model.setValue(dt.FURNITURE_VOTE_MAJORITY_RESULT,e.result)}}}]),i}(xS),Gj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"mouseEvent",value:function(t,e){t&&e&&(t.type===_i.DOUBLE_CLICK&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new mR(mR.STATE_CHANGE,this.object)),Object(d.a)(Object(f.a)(i.prototype),"mouseEvent",this).call(this,t,e))}}]),i}(xS),Hj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t);var e="";t.logic&&t.logic.maskType&&""!==t.logic.maskType&&t.logic.maskType.length>0&&(e=t.logic.maskType),this.object.model.setValue(dt.FURNITURE_USES_PLANE_MASK,0),this.object.model.setValue(dt.FURNITURE_PLANE_MASK_TYPE,e)}}]),i}(xS),Vj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[hR.RODRE_URL_PREFIX];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.object.model.getValue(dt.SESSION_URL_PREFIX)||this.eventDispatcher.dispatchEvent(new hR(hR.RODRE_URL_PREFIX,this.object))}},{key:"widget",get:function(){return LS.YOUTUBE}}]),i}(bS),zj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._selected=void 0,t._reportedLocation=void 0,t._postureIndex=void 0,t._gestureIndex=void 0,t._headDirectionDelta=void 0,t._directions=void 0,t._talkingEndTimestamp=void 0,t._gestureEndTimestamp=void 0,t._expressionEndTimestamp=void 0,t._selected=!1,t._reportedLocation=null,t._postureIndex=0,t._gestureIndex=0,t._headDirectionDelta=0,t._directions=[],t._talkingEndTimestamp=0,t._gestureEndTimestamp=0,t._expressionEndTimestamp=0,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[Be.CLICK,gR.POSITION_CHANGED];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){if(t){var e=this.object&&this.object.model;if(e){if(t.logic&&t.logic.model){var i=t.logic.model.directions;if(i&&i.length){var n,r=Object(s.a)(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;this._directions.push(a)}}catch(o){r.e(o)}finally{r.f()}this._directions.sort()}}e.setValue(dt.PET_ALLOWED_DIRECTIONS,this._directions)}}}},{key:"dispose",value:function(){this._selected&&this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new gR(gR.OBJECT_REMOVED,this.object)),this._directions=null,this._reportedLocation=null}},{key:"update",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._selected&&this.object&&this.eventDispatcher){var e=this.object.getLocation();this._reportedLocation&&this._reportedLocation.x===e.x&&this._reportedLocation.y===e.y&&this._reportedLocation.z===e.z||(this._reportedLocation||(this._reportedLocation=new Et),this._reportedLocation.assign(e),this.eventDispatcher.dispatchEvent(new gR(gR.POSITION_CHANGED,this.object)))}this.object&&this.object.model&&this.updateModel(t,this.object.model)}},{key:"updateModel",value:function(t,e){this._gestureEndTimestamp>0&&t>this._gestureEndTimestamp&&(e.setValue(dt.FIGURE_GESTURE,null),this._gestureEndTimestamp=0),this._talkingEndTimestamp>0&&t>this._talkingEndTimestamp&&(e.setValue(dt.FIGURE_TALK,0),this._talkingEndTimestamp=0),this._expressionEndTimestamp>0&&t>this._expressionEndTimestamp&&(e.setValue(dt.FIGURE_EXPRESSION,0),this._expressionEndTimestamp=0)}},{key:"processUpdateMessage",value:function(t){if(t&&this.object){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t);var e=this.object&&this.object.model;if(e)if(t instanceof qR)e.setValue(dt.HEAD_DIRECTION,t.headDirection);else{if(t instanceof UR){var n=new YT(t.figure);return e.setValue(dt.FIGURE,t.figure),e.setValue(dt.RACE,t.subType),e.setValue(dt.PET_PALETTE_INDEX,n.paletteId),e.setValue(dt.PET_COLOR,n.color),e.setValue(dt.PET_TYPE,n.typeId),e.setValue(dt.PET_CUSTOM_LAYER_IDS,n.customLayerIds),e.setValue(dt.PET_CUSTOM_PARTS_IDS,n.customPartIds),e.setValue(dt.PET_CUSTOM_PALETTE_IDS,n.customPaletteIds),void e.setValue(dt.PET_IS_RIDING,t.isRiding?1:0)}if(t instanceof zR)e.setValue(dt.FIGURE_POSTURE,t.postureType);else{if(t instanceof NR)return e.setValue(dt.FIGURE_TALK,1),void(this._talkingEndTimestamp=this.time+1e3*t.numberOfWords);if(!(t instanceof WR))return t instanceof GR?(e.setValue(dt.FIGURE_GESTURE,t.gesture),void(this._gestureEndTimestamp=this.time+3e3)):t instanceof fS?(this._selected=t.selected,void(this._reportedLocation=null)):t instanceof CR?(e.setValue(dt.FIGURE_EXPERIENCE_TIMESTAMP,this.time),void e.setValue(dt.FIGURE_GAINED_EXPERIENCE,t.gainedExperience)):void 0;e.setValue(dt.FIGURE_SLEEP,t.isSleeping?1:0)}}}}},{key:"mouseEvent",value:function(t,e){var i=null;switch(t.type){case _i.MOUSE_CLICK:i=Be.CLICK;break;case _i.DOUBLE_CLICK:break;case _i.MOUSE_DOWN:this.object.model.getValue(dt.PET_TYPE)===ds.MONSTERPLANT&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Be(Be.MOUSE_DOWN,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}i&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new Be(i,this.object,t.eventId,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown))}}]),i}(mS),Yj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._planeParser=void 0,t._planeBitmapMaskParser=void 0,t._color=void 0,t._light=void 0,t._originalColor=void 0,t._originalLight=void 0,t._targetColor=void 0,t._targetLight=void 0,t._colorChangedTime=void 0,t._colorTransitionLength=void 0,t._lastHoleUpdate=void 0,t._needsMapUpdate=void 0,t._skipColorTransition=void 0,t._planeParser=new Xc,t._planeBitmapMaskParser=new NA,t._color=16777215,t._light=255,t._originalColor=16777215,t._originalLight=255,t._targetColor=16777215,t._targetLight=255,t._colorChangedTime=0,t._colorTransitionLength=1500,t._lastHoleUpdate=0,t._needsMapUpdate=!1,t._skipColorTransition=!1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[Be.MOUSE_MOVE,Be.CLICK];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"dispose",value:function(){Object(d.a)(Object(f.a)(i.prototype),"dispose",this).call(this),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null),this._planeBitmapMaskParser&&(this._planeBitmapMaskParser.dispose(),this._planeBitmapMaskParser=null)}},{key:"initialize",value:function(t){t&&this.object&&t instanceof zc&&this._planeParser.initializeFromMapData(t)&&(this.object.model.setValue(dt.ROOM_MAP_DATA,t),this.object.model.setValue(dt.ROOM_BACKGROUND_COLOR,16777215),this.object.model.setValue(dt.ROOM_FLOOR_VISIBILITY,1),this.object.model.setValue(dt.ROOM_WALL_VISIBILITY,1),this.object.model.setValue(dt.ROOM_LANDSCAPE_VISIBILITY,1),this._skipColorTransition=!0===gD.instance.getConfiguration("room.color.skip.transition"))}},{key:"update",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.updateBackgroundColor(t),this._needsMapUpdate){if(this._lastHoleUpdate&&t-this._lastHoleUpdate<5)return;var e=this.object&&this.object.model;if(e){var n=this._planeParser.getMapData();e.setValue(dt.ROOM_MAP_DATA,n),e.setValue(dt.ROOM_FLOOR_HOLE_UPDATE_TIME,t),this._planeParser.initializeFromMapData(n)}this._lastHoleUpdate=0,this._needsMapUpdate=!1}}},{key:"updateBackgroundColor",value:function(t){if(this.object&&this._colorChangedTime){var e=this._color,i=this._light;if(t-this._colorChangedTime>=this._colorTransitionLength)e=this._targetColor,i=this._targetLight,this._colorChangedTime=0;else{var n=this._originalColor>>16&255,s=this._originalColor>>8&255,r=255&this._originalColor,a=this._targetColor>>16&255,o=this._targetColor>>8&255,u=255&this._targetColor,c=(t-this._colorChangedTime)/this._colorTransitionLength;e=((n+=(a-n)*c)<<16)+((s+=(o-s)*c)<<8)+(r+=(u-r)*c),i=this._originalLight+(this._targetLight-this._originalLight)*c,this._color=e,this._light=i}var h=Qe.rgbToHSL(e);h=(16776960&h)+i,e=Qe.hslToRGB(h),this.object.model&&this.object.model.setValue(dt.ROOM_BACKGROUND_COLOR,e)}}},{key:"processUpdateMessage",value:function(t){if(t&&this.object){var e=this.object.model;e&&(t instanceof ok?this.onObjectRoomUpdateMessage(t,e):t instanceof sk?this.onObjectRoomMaskUpdateMessage(t,e):t instanceof ak?this.onObjectRoomPlaneVisibilityUpdateMessage(t,e):t instanceof rk?this.onObjectRoomPlanePropertyUpdateMessage(t,e):t instanceof nk?this.onObjectRoomFloorHoleUpdateMessage(t,e):t instanceof ik?this.onObjectRoomColorUpdateMessage(t,e):t instanceof ZS&&this.onObjectRoomMapUpdateMessage(t))}}},{key:"onObjectRoomUpdateMessage",value:function(t,e){switch(t.type){case ok.ROOM_FLOOR_UPDATE:return void e.setValue(dt.ROOM_FLOOR_TYPE,t.value);case ok.ROOM_WALL_UPDATE:return void e.setValue(dt.ROOM_WALL_TYPE,t.value);case ok.ROOM_LANDSCAPE_UPDATE:return void e.setValue(dt.ROOM_LANDSCAPE_TYPE,t.value)}}},{key:"onObjectRoomMaskUpdateMessage",value:function(t,e){var i=null,n=!1;switch(t.type){case sk.ADD_MASK:i=SA.WINDOW,t.maskCategory===sk.HOLE&&(i=SA.HOLE),this._planeBitmapMaskParser.addMask(t.maskId,t.maskType,t.maskLocation,i),n=!0;break;case sk.REMOVE_MASK:n=this._planeBitmapMaskParser.removeMask(t.maskId)}n&&e.setValue(dt.ROOM_PLANE_MASK_XML,this._planeBitmapMaskParser.getXML())}},{key:"onObjectRoomPlaneVisibilityUpdateMessage",value:function(t,e){var i=0;switch(t.visible&&(i=1),t.type){case ak.FLOOR_VISIBILITY:return void e.setValue(dt.ROOM_FLOOR_VISIBILITY,i);case ak.WALL_VISIBILITY:return e.setValue(dt.ROOM_WALL_VISIBILITY,i),void e.setValue(dt.ROOM_LANDSCAPE_VISIBILITY,i)}}},{key:"onObjectRoomPlanePropertyUpdateMessage",value:function(t,e){switch(t.type){case rk.FLOOR_THICKNESS:return void e.setValue(dt.ROOM_FLOOR_THICKNESS,t.value);case rk.WALL_THICKNESS:return void e.setValue(dt.ROOM_WALL_THICKNESS,t.value)}}},{key:"onObjectRoomFloorHoleUpdateMessage",value:function(t,e){switch(t.type){case nk.ADD:return this._planeParser.addFloorHole(t.id,t.x,t.y,t.width,t.height),void(this._needsMapUpdate=!0);case nk.REMOVE:return this._planeParser.removeFloorHole(t.id),void(this._needsMapUpdate=!0)}this._lastHoleUpdate=this.time}},{key:"onObjectRoomColorUpdateMessage",value:function(t,e){t&&e&&(this._originalColor=this._color,this._originalLight=this._light,this._targetColor=t.color,this._targetLight=t.light,this._colorChangedTime=this.time,this._skipColorTransition?this._colorTransitionLength=0:this._colorTransitionLength=1500,e.setValue(dt.ROOM_COLORIZE_BG_ONLY,t.backgroundOnly))}},{key:"onObjectRoomMapUpdateMessage",value:function(t){t&&t.mapData&&(this.object.model.setValue(dt.ROOM_MAP_DATA,t.mapData),this.object.model.setValue(dt.ROOM_FLOOR_HOLE_UPDATE_TIME,this.time),this._planeParser.initializeFromMapData(t.mapData))}},{key:"mouseEvent",value:function(t,e){if(t&&e&&this.object&&this.object.model){var i=t.spriteTag,n=0;if(i&&i.indexOf("@")>=0&&(n=parseInt(i.substr(i.indexOf("@")+1))),n<1||n>this._planeParser.planeCount)t.type===_i.ROLL_OUT&&this.object.model.setValue(dt.ROOM_SELECTED_PLANE,0);else{n--;var s,r=this._planeParser.getPlaneLocation(n),a=this._planeParser.getPlaneLeftSide(n),o=this._planeParser.getPlaneRightSide(n),u=this._planeParser.getPlaneNormalDirection(n),c=this._planeParser.getPlaneType(n);if(null!=r&&null!=a&&null!=o&&null!=u){var h=a.length,_=o.length;if(0!=h&&0!=_){var l=t.screenX,d=t.screenY,f=new Z.g(l,d);if(s=e.getPlanePosition(f,r,a,o)){var v=Et.product(a,s.x/h);v.add(Et.product(o,s.y/_)),v.add(r);var g=v.x,O=v.y,y=v.z;if(s.x>=0&&s.x<h&&s.y>=0&&s.y<_){this.object.model.setValue(dt.ROOM_SELECTED_X,g),this.object.model.setValue(dt.ROOM_SELECTED_Y,O),this.object.model.setValue(dt.ROOM_SELECTED_Z,y),this.object.model.setValue(dt.ROOM_SELECTED_PLANE,n+1);var E=null;switch(t.type===_i.MOUSE_MOVE||t.type===_i.ROLL_OVER?E=Be.MOUSE_MOVE:t.type===_i.MOUSE_CLICK&&(E=Be.CLICK),t.type){case _i.MOUSE_MOVE:case _i.ROLL_OVER:case _i.MOUSE_CLICK:var p=null;if(c===Wc.PLANE_FLOOR)p=new IR(E,this.object,t.eventId,g,O,y,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown);else if(c===Wc.PLANE_WALL||c===Wc.PLANE_LANDSCAPE){var m=90;u&&(m=u.x+90)>360&&(m-=360);var I=a.length*s.x/h,b=o.length*s.y/_;p=new bR(E,this.object,t.eventId,r,a,o,I,b,m,t.altKey,t.ctrlKey,t.shiftKey,t.buttonDown)}return void(this.eventDispatcher&&this.eventDispatcher.dispatchEvent(p))}}else this.object.model.setValue(dt.ROOM_SELECTED_PLANE,0)}else this.object.model.setValue(dt.ROOM_SELECTED_PLANE,0)}}}}}}]),i}(We),Wj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"initialize",value:function(t){this.object&&(this.object.model.setValue(dt.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(1,0))}},{key:"processUpdateMessage",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof OS&&this.object)switch(t.type){case OS.ENABLED:return void this.object.setState(0,0);case OS.DISABLED:return void this.object.setState(1,0)}}}]),i}(We),Kj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._lastEventId=void 0,t._isHidden=void 0,t._lastEventId=null,t._isHidden=!1,t}return Object(a.a)(i,[{key:"initialize",value:function(t){this.object&&(this.object.model.setValue(dt.FURNITURE_ALPHA_MULTIPLIER,1),this.object.setState(i.CURSOR_HIDDEN_STATE,0))}},{key:"processUpdateMessage",value:function(t){t instanceof gS&&(this._lastEventId&&this._lastEventId===t.sourceEventId||(t.toggleVisibility&&(this._isHidden=!this._isHidden),Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),this.object&&(this._isHidden?this.object.setState(i.CURSOR_HIDDEN_STATE,0):t.visible?(this.object.model.setValue(dt.TILE_CURSOR_HEIGHT,t.height),this.object.setState(t.height>.8?i.CURSOR_HEIGHT_STATE:i.CURSOR_VISIBLE_STATE)):this.object.setState(i.CURSOR_HIDDEN_STATE,0)),this._lastEventId=t.sourceEventId))}}]),i}(We);Kj.CURSOR_VISIBLE_STATE=0,Kj.CURSOR_HIDDEN_STATE=1,Kj.CURSOR_HEIGHT_STATE=6;var Xj=Object(a.a)((function t(){Object(r.a)(this,t)}));Xj.FURNITURE_BASIC="furniture_basic",Xj.FURNITURE_MULTISTATE="furniture_multistate",Xj.FURNITURE_MULTIHEIGHT="furniture_multiheight",Xj.FURNITURE_RANDOMSTATE="furniture_randomstate",Xj.FURNITURE_PLACEHOLDER="furniture_placeholder",Xj.FURNITURE_CREDIT="furniture_credit",Xj.FURNITURE_STICKIE="furniture_stickie",Xj.FURNITURE_PRESENT="furniture_present",Xj.FURNITURE_TROPHY="furniture_trophy",Xj.FURNITURE_ECOTRON_BOX="furniture_ecotron_box",Xj.FURNITURE_DICE="furniture_dice",Xj.FURNITURE_HOCKEY_SCORE="furniture_hockey_score",Xj.FURNITURE_HABBOWHEEL="furniture_habbowheel",Xj.FURNITURE_ONE_WAY_DOOR="furniture_one_way_door",Xj.FURNITURE_PLANET_SYSTEM="furniture_planet_system",Xj.FURNITURE_WINDOW="furniture_window",Xj.FURNITURE_EXTERNAL_IMAGE_WALLITEM="furniture_external_image_wallitem",Xj.FURNITURE_ROOMDIMMER="furniture_roomdimmer",Xj.FURNITURE_SOUND_MACHINE="furniture_sound_machine",Xj.FURNITURE_JUKEBOX="furniture_jukebox",Xj.FURNITURE_CRACKABLE="furniture_crackable",Xj.FURNITURE_PUSHABLE="furniture_pushable",Xj.FURNITURE_CLOTHING_CHANGE="furniture_clothing_change",Xj.FURNITURE_COUNTER_CLOCK="furniture_counter_clock",Xj.FURNITURE_SCORE="furniture_score",Xj.FURNITURE_ES="furniture_es",Xj.FURNITURE_FIREWORKS="furniture_fireworks",Xj.FURNITURE_SONG_DISK="furniture_song_disk",Xj.FURNITURE_BB="furniture_bb",Xj.FURNITURE_BG="furniture_bg",Xj.FURNITURE_WELCOME_GIFT="furniture_welcome_gift",Xj.FURNITURE_FLOOR_HOLE="furniture_floor_hole",Xj.FURNITURE_MANNEQUIN="furniture_mannequin",Xj.FURNITURE_GUILD_CUSTOMIZED="furniture_guild_customized",Xj.FURNITURE_GROUP_FORUM_TERMINAL="furniture_group_forum_terminal",Xj.FURNITURE_PET_CUSTOMIZATION="furniture_pet_customization",Xj.FURNITURE_CUCKOO_CLOCK="furniture_cuckoo_clock",Xj.FURNITURE_VOTE_COUNTER="furniture_vote_counter",Xj.FURNITURE_VOTE_MAJORITY="furniture_vote_majority",Xj.FURNITURE_SOUNDBLOCK="furniture_soundblock",Xj.FURNITURE_RANDOM_TELEPORT="furniture_random_teleport",Xj.FURNITURE_MONSTERPLANT_SEED="furniture_monsterplant_seed",Xj.FURNITURE_PURCHASABLE_CLOTHING="furniture_purchasable_clothing",Xj.FURNITURE_BACKGROUND_COLOR="furniture_background_color",Xj.FURNITURE_MYSTERYBOX="furniture_mysterybox",Xj.FURNITURE_EFFECTBOX="furniture_effectbox",Xj.FURNITURE_MYSTERYTROPHY="furniture_mysterytrophy",Xj.FURNITURE_ACHIEVEMENT_RESOLUTION="furniture_achievement_resolution",Xj.FURNITURE_LOVELOCK="furniture_lovelock",Xj.FURNITURE_WILDWEST_WANTED="furniture_wildwest_wanted",Xj.FURNITURE_HWEEN_LOVELOCK="furniture_hween_lovelock",Xj.FURNITURE_BADGE_DISPLAY="furniture_badge_display",Xj.FURNITURE_HIGH_SCORE="furniture_high_score",Xj.FURNITURE_INTERNAL_LINK="furniture_internal_link",Xj.FURNITURE_CUSTOM_STACK_HEIGHT="furniture_custom_stack_height",Xj.FURNITURE_YOUTUBE="furniture_youtube",Xj.FURNITURE_RENTABLE_SPACE="furniture_rentable_space",Xj.FURNITURE_CHANGE_STATE_WHEN_STEP_ON="furniture_change_state_when_step_on",Xj.FURNITURE_VIMEO="furniture_vimeo",Xj.FURNITURE_EDITABLE_INTERNAL_LINK="furniture_editable_internal_link",Xj.FURNITURE_EDITABLE_ROOM_LINK="furniture_editable_room_link",Xj.FURNITURE_CRAFTING_GIZMO="furniture_crafting_gizmo",Xj.ROOM="room",Xj.USER="user",Xj.BOT="bot",Xj.RENTABLE_BOT="rentable_bot",Xj.PET="pet",Xj.TILE_CURSOR="tile_cursor",Xj.SELECTION_ARROW="selection_arrow",Xj.GAME_SNOWBALL="game_snowball",Xj.GAME_SNOWSPLASH="game_snowsplash";var qj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.apply(this,arguments)}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[TR.CLOTHING_CHANGE];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"initialize",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"initialize",this).call(this,t);var e=this.object.model.getValue(dt.FURNITURE_DATA);this.updateClothingData(e)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&t.data&&this.updateClothingData(t.data.getLegacyString())}},{key:"updateClothingData",value:function(t){if(t&&t.length){var e=t.split(","),i=Object(n.a)(e,2),s=i[0],r=i[1];s&&s.length&&this.object.model.setValue(dt.FURNITURE_CLOTHING_BOY,s),r&&r.length&&this.object.model.setValue(dt.FURNITURE_CLOTHING_GIRL,r)}}},{key:"useObject",value:function(){this.object&&this.eventDispatcher&&this.eventDispatcher.dispatchEvent(new TR(TR.CLOTHING_CHANGE,this.object))}}]),i}(bS),Qj=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s)))._state=1,t}return Object(a.a)(i,[{key:"getEventTypes",value:function(){var t=[OR.PLAY_SOUND_AT_PITCH];return this.mergeTypes(Object(d.a)(Object(f.a)(i.prototype),"getEventTypes",this).call(this),t)}},{key:"processUpdateMessage",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"processUpdateMessage",this).call(this,t),t instanceof ZR&&(-1!==this._state&&t.state!==this._state&&this.dispatchSoundEvent(this.object.location.z),this._state=t.state)}},{key:"dispatchSoundEvent",value:function(t){var e=Math.pow(2,t-1.2);this.eventDispatcher.dispatchEvent(new OR(OR.PLAY_SOUND_AT_PITCH,this.object,"FURNITURE_cuckoo_clock",e))}}]),i}(xS),Zj=function(){function t(){Object(r.a)(this,t),this._events=void 0,this._cachedEvents=void 0,this._registeredEvents=void 0,this._functions=void 0,this._events=new b,this._cachedEvents=new Map,this._registeredEvents=new Map,this._functions=[]}return Object(a.a)(t,[{key:"getLogic",value:function(t){var e=this.getLogicType(t);if(!e)return null;var i=new e;if(!i)return null;if(i.eventDispatcher=this._events,!this._cachedEvents.get(t)){this._cachedEvents.set(t,!0);var n,r=i.getEventTypes(),a=Object(s.a)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;o&&this.registerEventType(o)}}catch(u){a.e(u)}finally{a.f()}}return i}},{key:"registerEventType",value:function(t){if(!this._registeredEvents.get(t)){this._registeredEvents.set(t,!0);var e,i=Object(s.a)(this._functions);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this._events.addEventListener(t,n)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"registerEventFunction",value:function(t){if(t&&!(this._functions.indexOf(t)>=0)){this._functions.push(t);var e,i=Object(s.a)(this._registeredEvents.keys());try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this._events.addEventListener(n,t)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"removeEventFunction",value:function(t){if(t){var e=this._functions.indexOf(t);if(-1!==e){this._functions.splice(e,1);var i,n=Object(s.a)(this._registeredEvents.keys());try{for(n.s();!(i=n.n()).done;){var r=i.value;r&&this._events.removeEventListener(r,t)}}catch(a){n.e(a)}finally{n.f()}}}}},{key:"getLogicType",value:function(t){if(!t)return null;var e=null;switch(t){case Xj.ROOM:e=Yj;break;case Xj.TILE_CURSOR:e=Kj;break;case Xj.SELECTION_ARROW:e=Wj;break;case Xj.USER:case Xj.BOT:case Xj.RENTABLE_BOT:e=IS;break;case Xj.PET:e=zj;break;case Xj.FURNITURE_BASIC:e=bS;break;case Xj.FURNITURE_BADGE_DISPLAY:e=TS;break;case Xj.FURNITURE_CHANGE_STATE_WHEN_STEP_ON:e=kS;break;case Xj.FURNITURE_COUNTER_CLOCK:e=AS;break;case Xj.FURNITURE_CRACKABLE:e=jS;break;case Xj.FURNITURE_CREDIT:e=FS;break;case Xj.FURNITURE_CUSTOM_STACK_HEIGHT:e=BS;break;case Xj.FURNITURE_DICE:e=GS;break;case Xj.FURNITURE_EDITABLE_INTERNAL_LINK:e=VS;break;case Xj.FURNITURE_EDITABLE_ROOM_LINK:e=zS;break;case Xj.FURNITURE_EXTERNAL_IMAGE_WALLITEM:e=WS;break;case Xj.FURNITURE_FIREWORKS:e=KS;break;case Xj.FURNITURE_FLOOR_HOLE:e=XS;break;case Xj.FURNITURE_GUILD_CUSTOMIZED:e=JS;break;case Xj.FURNITURE_HIGH_SCORE:e=tj;break;case Xj.FURNITURE_HOCKEY_SCORE:e=ej;break;case Xj.FURNITURE_ES:e=sj;break;case Xj.FURNITURE_MANNEQUIN:e=uj;break;case Xj.FURNITURE_MULTIHEIGHT:e=hj;break;case Xj.FURNITURE_MULTISTATE:e=xS;break;case Xj.FURNITURE_ONE_WAY_DOOR:e=dj;break;case Xj.FURNITURE_PET_CUSTOMIZATION:e=fj;break;case Xj.FURNITURE_PRESENT:e=Oj;break;case Xj.FURNITURE_PURCHASABLE_CLOTHING:e=yj;break;case Xj.FURNITURE_PUSHABLE:e=Ej;break;case Xj.FURNITURE_BACKGROUND_COLOR:e=bj;break;case Xj.FURNITURE_BG:e=kj;break;case Xj.FURNITURE_BB:e=Dj;break;case Xj.FURNITURE_ROOMDIMMER:e=Mj;break;case Xj.FURNITURE_SCORE:e=Cj;break;case Xj.FURNITURE_SOUNDBLOCK:e=Uj;break;case Xj.FURNITURE_STICKIE:e=wj;break;case Xj.FURNITURE_TROPHY:e=Fj;break;case Xj.FURNITURE_VOTE_COUNTER:e=xj;break;case Xj.FURNITURE_VOTE_MAJORITY:e=Bj;break;case Xj.FURNITURE_WINDOW:e=Hj;break;case Xj.FURNITURE_LOVELOCK:e=oj;break;case Xj.FURNITURE_YOUTUBE:e=Vj;break;case Xj.FURNITURE_CRAFTING_GIZMO:e=wS;break;case Xj.FURNITURE_RENTABLE_SPACE:e=Ij;break;case Xj.FURNITURE_EFFECTBOX:e=YS;break;case Xj.FURNITURE_MONSTERPLANT_SEED:e=cj;break;case Xj.FURNITURE_MYSTERYBOX:e=_j;break;case Xj.FURNITURE_MYSTERYTROPHY:e=lj;break;case Xj.FURNITURE_RANDOM_TELEPORT:e=mj;break;case Xj.FURNITURE_CLOTHING_CHANGE:e=qj;break;case Xj.FURNITURE_CUCKOO_CLOCK:e=Qj;break;case Xj.FURNITURE_ECOTRON_BOX:e=HS;break;case Xj.FURNITURE_GROUP_FORUM_TERMINAL:e=$S;break;case Xj.FURNITURE_HWEEN_LOVELOCK:e=nj;break;case Xj.FURNITURE_INTERNAL_LINK:e=rj;break;case Xj.FURNITURE_JUKEBOX:e=aj;break;case Xj.FURNITURE_PLACEHOLDER:e=vj;break;case Xj.FURNITURE_PLANET_SYSTEM:e=gj;break;case Xj.FURNITURE_RANDOMSTATE:e=pj;break;case Xj.FURNITURE_SONG_DISK:e=Lj;break;case Xj.FURNITURE_SOUND_MACHINE:e=Pj;break;case Xj.FURNITURE_WELCOME_GIFT:e=Gj;break;case Xj.FURNITURE_ACHIEVEMENT_RESOLUTION:e=RS;break;default:e=bS}return e||(I.log("Unknown Logic: ".concat(t)),null)}},{key:"events",get:function(){return this._events}}]),t}(),Jj=function(){function t(e,i){Object(r.a)(this,t),this._roomId=void 0,this._data=void 0,this._floorType=void 0,this._wallType=void 0,this._landscapeType=void 0,this._roomId=e,this._data=i,this._floorType=null,this._wallType=null,this._landscapeType=null}return Object(a.a)(t,[{key:"roomId",get:function(){return this._roomId}},{key:"data",get:function(){return this._data}},{key:"floorType",get:function(){return this._floorType},set:function(t){this._floorType=t}},{key:"wallType",get:function(){return this._wallType},set:function(t){this._wallType=t}},{key:"landscapeType",get:function(){return this._landscapeType},set:function(t){this._landscapeType=t}}]),t}(),$j=function(){function t(e,i,n,s,a,o,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:NaN,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,_=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",f=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],v=!(arguments.length>13&&void 0!==arguments[13])||arguments[13],g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:-1;Object(r.a)(this,t),this._id=void 0,this._typeId=void 0,this._type=void 0,this._location=void 0,this._direction=void 0,this._state=void 0,this._data=void 0,this._extra=void 0,this._expiryTime=void 0,this._usagePolicy=void 0,this._ownerId=void 0,this._ownerName=void 0,this._synchronized=void 0,this._realRoomObject=void 0,this._sizeZ=void 0,this._id=e,this._typeId=i,this._type=n,this._state=o,this._data=u,this._extra=c,this._expiryTime=h,this._usagePolicy=_,this._ownerId=l,this._ownerName=d,this._synchronized=f,this._realRoomObject=v,this._sizeZ=g,this._location=new Et,this._direction=new Et,this._location.assign(s),this._direction.assign(a)}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"typeId",get:function(){return this._typeId}},{key:"type",get:function(){return this._type}},{key:"location",get:function(){return this._location}},{key:"direction",get:function(){return this._direction}},{key:"state",get:function(){return this._state}},{key:"data",get:function(){return this._data}},{key:"extra",get:function(){return this._extra}},{key:"expiryTime",get:function(){return this._expiryTime}},{key:"usagePolicy",get:function(){return this._usagePolicy}},{key:"ownerId",get:function(){return this._ownerId}},{key:"ownerName",get:function(){return this._ownerName}},{key:"synchronized",get:function(){return this._synchronized}},{key:"realRoomObject",get:function(){return this._realRoomObject}},{key:"sizeZ",get:function(){return this._sizeZ}}]),t}(),tN=function(){function t(){Object(r.a)(this,t),this._targetId=-1,this._targetCategory=-2,this._targetLoc=null,this._moveDistance=0,this._previousMoveSpeed=0,this._maintainPreviousMoveSpeed=!1,this._currentLoc=null,this._targetObjectLoc=void 0,this._limitedLocX=!1,this._limitedLocY=!1,this._centeredLocX=!1,this._centeredLocY=!1,this._screenWd=0,this._screenHt=0,this._scale=0,this._roomWd=0,this._roomHt=0,this._geometryUpdateId=-1,this._scaleChanged=!1,this._followDuration=void 0,this._targetObjectLoc=new Et}return Object(a.a)(t,[{key:"location",get:function(){return this._currentLoc}},{key:"targetId",get:function(){return this._targetId},set:function(t){this._targetId=t}},{key:"targetCategory",get:function(){return this._targetCategory},set:function(t){this._targetCategory=t}},{key:"targetObjectLoc",get:function(){return this._targetObjectLoc},set:function(t){this._targetObjectLoc.assign(t)}},{key:"limitedLocationX",get:function(){return this._limitedLocX},set:function(t){this._limitedLocX=t}},{key:"limitedLocationY",get:function(){return this._limitedLocY},set:function(t){this._limitedLocY=t}},{key:"centeredLocX",get:function(){return this._centeredLocX},set:function(t){this._centeredLocX=t}},{key:"centeredLocY",get:function(){return this._centeredLocY},set:function(t){this._centeredLocY=t}},{key:"screenWd",get:function(){return this._screenWd},set:function(t){this._screenWd=t}},{key:"screenHt",get:function(){return this._screenHt},set:function(t){this._screenHt=t}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this._scaleChanged=!0)}},{key:"roomWd",get:function(){return this._roomWd},set:function(t){this._roomWd=t}},{key:"roomHt",get:function(){return this._roomHt},set:function(t){this._roomHt=t}},{key:"geometryUpdateId",get:function(){return this._geometryUpdateId},set:function(t){this._geometryUpdateId=t}},{key:"isMoving",get:function(){return null!=this._targetLoc&&null!=this._currentLoc}},{key:"target",set:function(t){var e;null==this._targetLoc&&(this._targetLoc=new Et),this._targetLoc.x==t.x&&this._targetLoc.y==t.y&&this._targetLoc.z==t.z||(this._targetLoc.assign(t),e=Et.dif(this._targetLoc,this._currentLoc),this._moveDistance=e.length,this._maintainPreviousMoveSpeed=!0)}},{key:"dispose",value:function(){this._targetLoc=null,this._currentLoc=null}},{key:"initializeLocation",value:function(t){null==this._currentLoc&&(this._currentLoc=new Et,this._currentLoc.assign(t))}},{key:"resetLocation",value:function(t){null==this._currentLoc&&(this._currentLoc=new Et),this._currentLoc.assign(t)}},{key:"update",value:function(e,i){var n,s,r,a;if(this._followDuration>0&&null!=this._targetLoc&&null!=this._currentLoc){if(this._scaleChanged)return this._scaleChanged=!1,this._currentLoc=this._targetLoc,void(this._targetLoc=null);(n=Et.dif(this._targetLoc,this._currentLoc)).length>this._moveDistance&&(this._moveDistance=n.length),n.length<=i?(this._currentLoc=this._targetLoc,this._targetLoc=null,this._previousMoveSpeed=0):(s=Math.sin(Math.PI*n.length/this._moveDistance),a=(r=.5*i)+(this._moveDistance/t.MOVE_SPEED_DENOMINATOR-r)*s,this._maintainPreviousMoveSpeed&&(a<this._previousMoveSpeed?(a=this._previousMoveSpeed)>n.length&&(a=n.length):this._maintainPreviousMoveSpeed=!1),this._previousMoveSpeed=a,n.divide(n.length),n.multiply(a),this._currentLoc=Et.sum(this._currentLoc,n))}}},{key:"reset",value:function(){this._geometryUpdateId=-1}},{key:"activateFollowing",value:function(t){this._followDuration=t}}]),t}();tN.MOVE_SPEED_DENOMINATOR=12;var eN=function(){function t(e,i){Object(r.a)(this,t),this._tileObjectMap=void 0,this._width=void 0,this._height=void 0,this._tileObjectMap=new Map;for(var n=0;n<i;)this._tileObjectMap.set(n,new Map),n++;this._width=e,this._height=i}return Object(a.a)(t,[{key:"clear",value:function(){var t,e=Object(s.a)(this._tileObjectMap.values());try{for(e.s();!(t=e.n()).done;){var i=t.value;i&&i.clear()}}catch(n){e.e(n)}finally{e.f()}this._tileObjectMap.clear()}},{key:"populate",value:function(t){this.clear();var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this.addRoomObject(n)}}catch(r){i.e(r)}finally{i.f()}}},{key:"dispose",value:function(){this._tileObjectMap=null,this._width=0,this._height=0}},{key:"getObjectIntTile",value:function(t,e){if(t>=0&&t<this._width&&e>=0&&e<this._height){var i=this._tileObjectMap.get(e);if(i)return i.get(t)}return null}},{key:"setObjectInTile",value:function(t,e,i){if(i.isReady){if(t>=0&&t<this._width&&e>=0&&e<this._height){var n=this._tileObjectMap.get(e);n&&n.set(t,i)}}else I.log("Assigning non initialized object to tile object map!")}},{key:"addRoomObject",value:function(t){if(t&&t.model&&t.isReady){var e=t.getLocation(),i=t.getDirection();if(e&&i){var n=t.model.getValue(dt.FURNITURE_SIZE_X),s=t.model.getValue(dt.FURNITURE_SIZE_Y);n<1&&(n=1),s<1&&(s=1);var r=Math.trunc(i.x+45)%360/90;if(1===r||3===r){var a=[s,n];n=a[0],s=a[1]}for(var o=e.y;o<e.y+s;){for(var u=e.x;u<e.x+n;){var c=this.getObjectIntTile(u,o);(!c||c!==t&&c.getLocation().z<=e.z)&&this.setObjectInTile(u,o,t),u++}o++}}}}}]),t}(),iN=function(){function t(e){Object(r.a)(this,t),this._roomId=void 0,this._modelName=void 0,this._legacyGeometry=void 0,this._tileObjectMap=void 0,this._roomCamera=void 0,this._selectedObject=void 0,this._placedObject=void 0,this._furnitureStackingHeightMap=void 0,this._floorStack=void 0,this._wallStack=void 0,this._mouseButtonCursorOwners=void 0,this._roomId=e,this._modelName=null,this._legacyGeometry=new _S,this._tileObjectMap=null,this._roomCamera=new tN,this._selectedObject=null,this._placedObject=null,this._furnitureStackingHeightMap=null,this._floorStack=new Map,this._wallStack=new Map,this._mouseButtonCursorOwners=[]}return Object(a.a)(t,[{key:"dispose",value:function(){}},{key:"setModelName",value:function(t){this._modelName=t}},{key:"setSelectedObject",value:function(t){this._selectedObject&&this._selectedObject.dispose(),this._selectedObject=t}},{key:"setPlacedObject",value:function(t){this._placedObject&&this._placedObject.dispose(),this._placedObject=t}},{key:"setFurnitureStackingHeightMap",value:function(t){this._furnitureStackingHeightMap&&this._furnitureStackingHeightMap.dispose(),this._furnitureStackingHeightMap=t,this._tileObjectMap&&this._tileObjectMap.dispose(),this._furnitureStackingHeightMap&&(this._tileObjectMap=new eN(this._furnitureStackingHeightMap.width,this._furnitureStackingHeightMap.height))}},{key:"addPendingFurnitureFloor",value:function(t){t&&(this._floorStack.delete(t.id),this._floorStack.set(t.id,t))}},{key:"removePendingFunitureFloor",value:function(t){var e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}},{key:"getPendingFurnitureFloor",value:function(t){var e=this._floorStack.get(t);return e?(this._floorStack.delete(t),e):null}},{key:"getNextPendingFurnitureFloor",value:function(){if(!this._floorStack.size)return null;var t=this._floorStack.keys();return this.getPendingFurnitureFloor(t.next().value)}},{key:"addPendingFurnitureWall",value:function(t){t&&(this._wallStack.delete(t.id),this._wallStack.set(t.id,t))}},{key:"removePendingFurnitureWall",value:function(t){var e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}},{key:"getPendingFurnitureWall",value:function(t){var e=this._wallStack.get(t);return e?(this._wallStack.delete(t),e):null}},{key:"getNextPendingFurnitureWall",value:function(){if(!this._wallStack.size)return null;var t=this._wallStack.keys();return this.getPendingFurnitureWall(t.next().value)}},{key:"addButtonMouseCursorOwner",value:function(t){return-1===this._mouseButtonCursorOwners.indexOf(t)&&(this._mouseButtonCursorOwners.push(t),!0)}},{key:"removeButtonMouseCursorOwner",value:function(t){var e=this._mouseButtonCursorOwners.indexOf(t);return e>-1&&(this._mouseButtonCursorOwners.splice(e,1),!0)}},{key:"hasButtonMouseCursorOwners",value:function(){return this._mouseButtonCursorOwners.length>0}},{key:"roomId",get:function(){return this._roomId}},{key:"modelName",get:function(){return this._modelName}},{key:"legacyGeometry",get:function(){return this._legacyGeometry}},{key:"tileObjectMap",get:function(){return this._tileObjectMap}},{key:"roomCamera",get:function(){return this._roomCamera}},{key:"selectedObject",get:function(){return this._selectedObject}},{key:"placedObject",get:function(){return this._placedObject}},{key:"furnitureStackingHeightMap",get:function(){return this._furnitureStackingHeightMap}}]),t}(),nN=function(){function t(e,i){Object(r.a)(this,t),this._object=void 0,this._groupBadge=void 0,this._object=e,this._groupBadge=i}return Object(a.a)(t,[{key:"object",get:function(){return this._object}},{key:"groupBadge",get:function(){return this._groupBadge}}]),t}(),sN=function(){function t(){Object(r.a)(this,t),this.maxZ=void 0,this.spriteCount=0,this.externalImageCount=0}return Object(a.a)(t,[{key:"getFurniData",value:function(e,i,n,r){var a,o=[],u=i.getSortableSpriteList(),c=n.getRoomObjects(n.activeRoomId,_t.UNIT),h=Object(s.a)(c);try{for(h.s();!(a=h.n()).done;){var _=a.value;if(_.id!==r){var l=_.visualization.getSpriteList();if(l){var d,f=0,v=0,g=Object(s.a)(u);try{for(g.s();!(d=g.n()).done;){var O=d.value;if(O.name==="avatar_"+_.id){f=O.z,v=O.y+O.height-i.geometry.scale/4;break}}}catch(R){g.e(R)}finally{g.f()}var y=n.getRoomObjectScreenLocation(n.activeRoomId,_.id,_t.UNIT,i.id);if(y){0===v&&(v=y.y);var E,p=Object(s.a)(l);try{for(p.s();!(E=p.n()).done;){var m=E.value;m.x=m.x+(y.x-i.screenOffsetX),m.y=m.y+v,m.z=m.z+f,0!==m.name.indexOf("h_std_fx29_")&&0!==m.name.indexOf("h_std_fx185_")||(m.y=m.y+t.AVATAR_WATER_EFFECT_MAGIC_Y_OFFSET),u.push(m)}}catch(R){p.e(R)}finally{p.f()}}}}}}catch(R){h.e(R)}finally{h.f()}(u=t.addMannequinSprites(u,n)).sort(t.sortSpriteDataObjects);var I,b=Object(s.a)(u);try{for(b.s();!(I=b.n()).done;){var T=I.value;null!==T.name&&T.name.length>0&&0!==T.name.indexOf("tile_cursor_")&&t.isSpriteInViewPort(T,e,i)&&(r<0||T.objectId!=r)&&(o.push(this.getSpriteDataObject(T,e,i,n)),this.maxZ||(this.maxZ=T.z),this.spriteCount++)}}catch(R){b.e(R)}finally{b.f()}return JSON.stringify(o)}},{key:"getRoomRenderingModifiers",value:function(t){return JSON.stringify(new Object)}},{key:"getSpriteDataObject",value:function(e,i,n,s){var r=[],a={},o=e.name;return-1!==e.name.indexOf("@")&&(o=(r=e.name.split("@"))[0],r[1]),a.name=o,a.x=e.x-i.x,a.y=e.y-i.y,a.x=a.x+n.screenOffsetX,a.y=a.y+n.screenOffsetY,a.z=e.z,e.alpha&&"255"!==e.alpha.toString()&&(a.alpha=e.alpha),e.flipH&&(a.flipH=e.flipH),e.skew&&(a.skew=e.skew),e.frame&&(a.frame=e.frame),e.color&&e.color.length>0&&(a.color=parseInt(e.color)),e.blendMode&&"normal"!==e.blendMode&&(a.blendMode=e.blendMode),0===o.indexOf("http")&&(a.width=e.width,a.height=e.height,this.externalImageCount++,this.externalImageCount>t.MAX_EXTERNAL_IMAGE_COUNT&&(a.name="box")),e.posture&&(a.posture=e.posture),a}},{key:"makeBackgroundPlane",value:function(e,i,n){var s=new Z.g(0,0),r=new Z.g(e.width,0),a=new Z.g(0,e.height),o=new Z.g(e.width,e.height),u=t.sortQuadPoints(s,r,a,o),c=0;n.length>0?(c=n[0].z,this.maxZ&&(c=Math.max(this.maxZ,c))):c=this.maxZ?this.maxZ:0,c+=1.776104*this.spriteCount+2.31743*n.length;var h=new DA(null,i);return h.cornerPoints=u,h.z=c,h}},{key:"sortRoomPlanes",value:function(t,e,i){var n=new Map,r=1;this.maxZ&&(r+=this.maxZ);var a,o=Object(s.a)(t);try{for(o.s();!(a=o.n()).done;){var u=a.value,c={plane:u,z:r};n.set(u.uniqueId,c)}}catch(O){o.e(O)}finally{o.f()}var h=e.getPlaneSortableSprites();h.sort((function(t,e){return e.z-t.z})),h.reverse();var _,l=[],d=Object(s.a)(h);try{for(d.s();!(_=d.n()).done;){var f=_.value,v=f.sprite;if(v){var g=n.get(v.id);g&&(n.delete(v.id),g.z=f.z,l.push(g))}}}catch(O){d.e(O)}finally{d.f()}return l=l.concat(Array.from(n.values()))}},{key:"getRoomPlanes",value:function(e,i,n,r){var a=[],o=n.getRoomObject(n.activeRoomId,rN.ROOM_OBJECT_ID,_t.ROOM).visualization;if(o){var u,c=i.geometry,h=this.sortRoomPlanes(o.planes,i,n),_=gD.instance.stage,l=Object(s.a)(h);try{for(l.s();!(u=l.n()).done;){var d=u.value,f=d.plane,v=[],g=Et.sum(f.location,f.leftSide),O=c.getScreenPoint(f.location),y=c.getScreenPoint(g),E=c.getScreenPoint(Et.sum(f.location,f.rightSide)),p=c.getScreenPoint(Et.sum(g,f.rightSide));v.push(O,y,E,p);for(var m=0,I=0,b=0,T=v;b<T.length;b++){var R=T[b];R.x+=_.width/2,R.y+=_.height/2,R.x+=i.screenOffsetX,R.y+=i.screenOffsetY,R.x+=-e.x,R.y+=-e.y,R.x<0?m--:R.x>=e.width&&m++,R.y<0?I--:R.y>=e.height&&I++}if(4===Math.abs(m)||4===Math.abs(I));else{var k,A=t.sortQuadPoints(O,y,E,p),S=Object(s.a)(f.getDrawingDatas(c));try{for(S.s();!(k=S.n()).done;){var j=k.value;j.cornerPoints=A,j.z=d.z,a.push(j)}}catch(N){S.e(N)}finally{S.f()}}}}catch(N){l.e(N)}finally{l.f()}a.unshift(this.makeBackgroundPlane(e,r,a))}return a}}],[{key:"addMannequinSprites",value:function(e,i){var n,r=[],a=Object(s.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o)if("boutique_mannequin1"===o.type&&0===o.name.indexOf("mannequin_")){var u=i.getRoomObject(i.activeRoomId,o.objectId,_t.FLOOR);if(u){var c=u.visualization.getSpriteList();if(c){var h,_=Object(s.a)(c);try{for(_.s();!(h=_.n()).done;){var l=h.value;l.x=l.x+(o.x+o.width/2+t.MANNEQUIN_MAGIC_X_OFFSET),l.y=l.y+(o.y+o.height+t.MANNEQUIN_MAGIC_Y_OFFSET),l.z=l.z+o.z,r.push(l)}}catch(d){_.e(d)}finally{_.f()}}}}else r.push(o)}}catch(d){a.e(d)}finally{a.f()}return r}},{key:"sortSpriteDataObjects",value:function(t,e){return t.z<e.z?1:(t.z,e.z,-1)}},{key:"isSpriteInViewPort",value:function(t,e,i){return!0}},{key:"sortQuadPoints",value:function(t,e,i,n){var s=[];if(t.x==e.x?s.push(t,i,e,n):t.x==i.x?s.push(t,e,i,n):e.x<t.x&&e.y>t.y||e.x>t.x&&e.y<t.y?s.push(t,i,e,n):s.push(t,e,i,n),s[0].x<s[1].x){var r=s[0];s[0]=s[1],s[1]=r,r=s[2],s[2]=s[3],s[3]=r}if(s[0].y<s[2].y){var a=s[0];s[0]=s[2],s[2]=a,a=s[1],s[1]=s[3],s[3]=a}return s}}]),t}();sN.MANNEQUIN_MAGIC_X_OFFSET=1,sN.MANNEQUIN_MAGIC_Y_OFFSET=-16,sN.AVATAR_WATER_EFFECT_MAGIC_Y_OFFSET=-52,sN.MAX_EXTERNAL_IMAGE_COUNT=30;var rN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._communication=void 0,n._roomRendererFactory=void 0,n._roomManager=void 0,n._visualizationFactory=void 0,n._sessionDataManager=void 0,n._roomSessionManager=void 0,n._roomObjectEventHandler=void 0,n._roomMessageHandler=void 0,n._roomContentLoader=void 0,n._ready=void 0,n._roomContentLoaderReady=void 0,n._imageObjectIdBank=void 0,n._imageCallbacks=void 0,n._thumbnailObjectIdBank=void 0,n._thumbnailCallbacks=void 0,n._activeRoomId=void 0,n._activeRoomActiveCanvas=void 0,n._activeRoomActiveCanvasMouseX=void 0,n._activeRoomActiveCanvasMouseY=void 0,n._activeRoomIsDragged=void 0,n._activeRoomWasDragged=void 0,n._activeRoomDragStartX=void 0,n._activeRoomDragStartY=void 0,n._activeRoomDragX=void 0,n._activeRoomDragY=void 0,n._roomDraggingAlwaysCenters=void 0,n._roomAllowsDragging=void 0,n._roomDatas=void 0,n._roomInstanceDatas=void 0,n._skipFurnitureCreationForNextFrame=void 0,n._mouseCursorUpdate=void 0,n._badgeListenerObjects=void 0,n._logicFactory=void 0,n._communication=t,n._sessionDataManager=null,n._roomSessionManager=null,n._roomManager=null,n._roomObjectEventHandler=new pS(Object(l.a)(n)),n._roomMessageHandler=new lS(Object(l.a)(n)),n._roomContentLoader=new gt,n._ready=!1,n._roomContentLoaderReady=!1,n._activeRoomId=-1,n._activeRoomActiveCanvas=-1,n._roomInstanceDatas=new Map,n._roomDatas=new Map,n._roomRendererFactory=new Oi,n._visualizationFactory=new uS,n._logicFactory=new Zj,n._activeRoomActiveCanvasMouseX=0,n._activeRoomActiveCanvasMouseY=0,n._activeRoomIsDragged=!1,n._activeRoomWasDragged=!1,n._activeRoomDragStartX=0,n._activeRoomDragStartY=0,n._activeRoomDragX=0,n._activeRoomDragY=0,n._skipFurnitureCreationForNextFrame=!1,n._mouseCursorUpdate=!1,n._imageObjectIdBank=null,n._imageCallbacks=new Map,n._thumbnailCallbacks=new Map,n._roomDraggingAlwaysCenters=!1,n._roomAllowsDragging=!0,n._badgeListenerObjects=new Map,n.runVisibilityUpdate=n.runVisibilityUpdate.bind(Object(l.a)(n)),n.processRoomObjectEvent=n.processRoomObjectEvent.bind(Object(l.a)(n)),n.onRoomSessionEvent=n.onRoomSessionEvent.bind(Object(l.a)(n)),n.onRoomContentLoaderReadyEvent=n.onRoomContentLoaderReadyEvent.bind(Object(l.a)(n)),n.onBadgeImageReadyEvent=n.onBadgeImageReadyEvent.bind(Object(l.a)(n)),n}return Object(a.a)(i,[{key:"onInit",value:function(){this._ready||(this._imageObjectIdBank=new Ze(1e3),this._thumbnailObjectIdBank=new Ze(1e3),this._logicFactory.registerEventFunction(this.processRoomObjectEvent),this._roomManager&&(this._roomManager.setContentLoader(this._roomContentLoader),this._roomManager.addUpdateCategory(_t.FLOOR),this._roomManager.addUpdateCategory(_t.WALL),this._roomManager.addUpdateCategory(_t.UNIT),this._roomManager.addUpdateCategory(_t.CURSOR),this._roomManager.addUpdateCategory(_t.ROOM)),this._roomMessageHandler.setConnection(this._communication.connection),this._roomContentLoader.initialize(this.events),this._roomContentLoader.setSessionDataManager(this._sessionDataManager),this._roomContentLoader.setIconListener(this),this._roomSessionManager&&(this._roomSessionManager.events.addEventListener(QT.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.addEventListener(QT.ENDED,this.onRoomSessionEvent)),this.events.addEventListener(gt.LOADER_READY,this.onRoomContentLoaderReadyEvent),gD.instance.ticker.add(this.update,this),document.addEventListener("visibilitychange",this.runVisibilityUpdate))}},{key:"onDispose",value:function(){if(this._ready){var t,e=Object(s.a)(this._roomInstanceDatas);try{for(e.s();!(t=e.n()).done;){var r=Object(n.a)(t.value,2),a=r[0];r[1];this.removeRoomInstance(a)}}catch(o){e.e(o)}finally{e.f()}document.removeEventListener("visibilitychange",this.runVisibilityUpdate),gD.instance.ticker.remove(this.update,this),this._roomObjectEventHandler&&this._roomObjectEventHandler.dispose(),this._roomMessageHandler&&this._roomMessageHandler.dispose(),this._roomContentLoader&&this._roomContentLoader.dispose(),this.events.removeEventListener(gt.LOADER_READY,this.onRoomContentLoaderReadyEvent),this._roomSessionManager&&(this._roomSessionManager.events.removeEventListener(QT.STARTED,this.onRoomSessionEvent),this._roomSessionManager.events.removeEventListener(QT.ENDED,this.onRoomSessionEvent)),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}}},{key:"onRoomSessionEvent",value:function(t){if(t instanceof QT)switch(t.type){case QT.STARTED:return void(this._roomMessageHandler&&this._roomMessageHandler.setRoomId(t.session.roomId));case QT.ENDED:return void(this._roomMessageHandler&&(this._roomMessageHandler.clearRoomId(),this.removeRoomInstance(t.session.roomId)))}}},{key:"onRoomContentLoaderReadyEvent",value:function(t){this._roomContentLoaderReady=!0,this._roomManager.init()}},{key:"setActiveRoomId",value:function(t){this._activeRoomId=t}},{key:"destroyRoom",value:function(t){this.removeRoomInstance(t)}},{key:"getRoomInstance",value:function(t){return this._roomManager&&this._roomManager.getRoomInstance(this.getRoomId(t))||null}},{key:"removeRoomInstance",value:function(t){this.getRoomInstance(t)&&this._roomManager&&this._roomManager.removeRoomInstance(this.getRoomId(t));var e=this._roomInstanceDatas.get(t);e&&(this._roomInstanceDatas.delete(e.roomId),e.dispose()),this.events.dispatchEvent(new VT(VT.DISPOSED,t))}},{key:"createRoomInstance",value:function(t,e){var i="111",n="201",s="1";if(!this._ready){var r=this._roomDatas.get(t);return r&&(this._roomDatas.delete(t),i=r.floorType,n=r.wallType,s=r.landscapeType),(r=new Jj(t,e)).floorType=i,r.wallType=n,r.landscapeType=s,this._roomDatas.set(t,r),void I.log("Room Engine not initilized yet, can not create room. Room data stored for later initialization.")}if(e){var a=this._roomDatas.get(t);a&&(this._roomDatas.delete(t),a.floorType&&(i=a.floorType),a.wallType&&(n=a.wallType),a.landscapeType&&(s=a.landscapeType)),this.setupRoomInstance(t,e,i,n,s,this.getRoomInstanceModelName(t))&&(e.restrictsDragging?this._roomAllowsDragging=!1:this._roomAllowsDragging=!0,this.events.dispatchEvent(new VT(VT.INITIALIZED,t)))}else I.log("Room property messages received before floor height map, will initialize when floor height map received.")}},{key:"setupRoomInstance",value:function(t,e,n,s,r,a){if(this._ready&&this._roomManager){var o=this._roomManager.createRoomInstance(this.getRoomId(t));if(!o)return null;var u=_t.ROOM,c=o.createRoomObjectAndInitalize(i.ROOM_OBJECT_ID,i.ROOM_OBJECT_TYPE,u);if(o.model.setValue(cS.ROOM_IS_PUBLIC,0),o.model.setValue(cS.ROOM_Z_SCALE,1),e)if(o.model.setValue(cS.RESTRICTS_DRAGGING,e.restrictsDragging),o.model.setValue(cS.RESTRICTS_SCALING,e.restrictsScaling),o.model.setValue(cS.RESTRICTED_SCALE,e.restrictedScale),e.dimensions){var h=e.dimensions.minX,_=e.dimensions.maxX,l=e.dimensions.minY,d=e.dimensions.maxY;o.model.setValue(cS.ROOM_MIN_X,h),o.model.setValue(cS.ROOM_MAX_X,_),o.model.setValue(cS.ROOM_MIN_Y,l),o.model.setValue(cS.ROOM_MAX_Y,d);var f=423*h+671*_+913*l+7509*d;c&&c.model&&c.model.setValue(dt.ROOM_RANDOM_SEED,f)}var v=c&&c.logic||null;if(v&&(v.initialize(e),n&&(v.processUpdateMessage(new ok(ok.ROOM_FLOOR_UPDATE,n)),o.model.setValue(dt.ROOM_FLOOR_TYPE,n)),s&&(v.processUpdateMessage(new ok(ok.ROOM_WALL_UPDATE,s)),o.model.setValue(dt.ROOM_WALL_TYPE,s)),r&&(v.processUpdateMessage(new ok(ok.ROOM_LANDSCAPE_UPDATE,r)),o.model.setValue(dt.ROOM_LANDSCAPE_TYPE,r))),e&&e.doors.length)for(var g=0;g<e.doors.length;){var O=e.doors[g];if(O){var y=O.x,E=O.y,p=O.z,m=O.dir,I=sk.DOOR,b="door_"+g,T=new Et(y,E,p);v.processUpdateMessage(new sk(sk.ADD_MASK,b,I,T,sk.HOLE)),90!==m&&180!==m||(90===m&&(o.model.setValue(dt.ROOM_DOOR_X,y-.5),o.model.setValue(dt.ROOM_DOOR_Y,E)),180===m&&(o.model.setValue(dt.ROOM_DOOR_X,y),o.model.setValue(dt.ROOM_DOOR_Y,E-.5)),o.model.setValue(dt.ROOM_DOOR_Z,p),o.model.setValue(dt.ROOM_DOOR_DIR,m))}g++}return o.createRoomObjectAndInitalize(i.CURSOR_OBJECT_ID,i.CURSOR_OBJECT_TYPE,_t.CURSOR),gD.instance.getConfiguration("enable.avatar.arrow",!1)&&o.createRoomObjectAndInitalize(i.ARROW_OBJECT_ID,i.ARROW_OBJECT_TYPE,_t.CURSOR),o}}},{key:"getRoomInstanceDisplay",value:function(t,e,n,s,r){var a=this.getRoomInstance(t);if(!a)return null;var o=a.renderer;if(!o&&!(o=this._roomRendererFactory.createRenderer()))return null;o.roomObjectVariableAccurateZ=dt.OBJECT_ACCURATE_Z_VALUE,a.setRenderer(o);var u=o.createCanvas(e,n,s,r);if(!u)return null;if(a.model.getValue(cS.RESTRICTS_SCALING)){var h=a.model.getValue(cS.RESTRICTED_SCALE);h||(h=1),u.setScale(h),u.restrictsScaling=!0}else u.restrictsScaling=!1;if(u.setMouseListener(this._roomObjectEventHandler),u.geometry){u.geometry.z_scale=a.model.getValue(cS.ROOM_Z_SCALE);var _=a.model.getValue(dt.ROOM_DOOR_X),l=a.model.getValue(dt.ROOM_DOOR_Y),d=a.model.getValue(dt.ROOM_DOOR_Z),f=a.model.getValue(dt.ROOM_DOOR_DIR),v=new Et(_,l,d),g=null;90===f&&(g=new Et(-2e3,0,0)),180===f&&(g=new Et(0,-2e3,0)),u.geometry.setDisplacement(v,g);var O=u.master;if(O){var y=new et(c.t.EMPTY);y.name=i.OVERLAY,y.interactive=!1,O.addChild(y)}}return u.master}},{key:"setRoomInstanceRenderingCanvasMask",value:function(t,e,i){var n=this.getRoomInstanceRenderingCanvas(t,e);n&&n.setMask(i)}},{key:"setRoomInstanceRenderingCanvasScale",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=this.getRoomInstanceRenderingCanvas(t,e);if(o){if(o.restrictsScaling&&!r)return;o.setScale(i,n,s,r,a),this.events.dispatchEvent(new VT(VT.ROOM_ZOOMED,t))}}},{key:"getRoomInstanceRenderingCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=this.getRoomInstance(t);if(!i)return null;var n=i.renderer;if(!n)return null;-1===e&&(e=this._activeRoomActiveCanvas);var s=n.getCanvas(e);return s||null}},{key:"getActiveRoomInstanceRenderingCanvas",value:function(){return this.getRoomInstanceRenderingCanvas(this._activeRoomId,this._activeRoomActiveCanvas)}},{key:"getRoomInstanceRenderingCanvasOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===e&&(e=this._activeRoomActiveCanvas);var i=this.getRoomInstanceRenderingCanvas(t,e);return i?new Z.g(i.screenOffsetX,i.screenOffsetY):null}},{key:"setRoomInstanceRenderingCanvasOffset",value:function(t,e,i){var n=this.getRoomInstanceRenderingCanvas(t,e);if(!n||!i)return!1;var s=~~i.x,r=~~i.y;return n.screenOffsetX!==s||n.screenOffsetY!==r?(this.events.dispatchEvent(new $T(t,-(n.screenOffsetX-s),-(n.screenOffsetY-r))),n.screenOffsetX=s,n.screenOffsetY=r,!0):void 0}},{key:"getRoomInstanceRenderingCanvasScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1e3===t&&(t=this._activeRoomId),-1===e&&(e=this._activeRoomActiveCanvas);var i=this.getRoomInstanceRenderingCanvas(t,e);return i?i.scale:1}},{key:"initializeRoomInstanceRenderingCanvas",value:function(t,e,i,n){var s=this.getRoomInstanceRenderingCanvas(t,e);s&&s.initialize(i,n)}},{key:"getRoomInstanceGeometry",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=this.getRoomInstance(t);if(!i)return null;var n=i.renderer;if(!n)return null;-1===e&&(e=this._activeRoomActiveCanvas);var s=n.getCanvas(e);return s?s.geometry:null}},{key:"getRoomInstanceVariable",value:function(t,e){var i=this.getRoomInstance(t);return i&&i.model&&i.model.getValue(e)||null}},{key:"updateRoomInstancePlaneVisibility",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.getRoomOwnObject(t);return!!n&&(n.processUpdateMessage(new ak(ak.WALL_VISIBILITY,e)),n.processUpdateMessage(new ak(ak.FLOOR_VISIBILITY,i)),!0)}},{key:"updateRoomInstancePlaneThickness",value:function(t,e,i){var n=this.getRoomOwnObject(t);return!!n&&(n.processUpdateMessage(new rk(rk.WALL_THICKNESS,e)),n.processUpdateMessage(new rk(rk.FLOOR_THICKNESS,i)),!0)}},{key:"updateRoomInstancePlaneType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.getRoomOwnObject(t),a=this.getRoomInstance(t);if(!r){var o=this._roomDatas.get(t);return o||(o=new Jj(t,null),this._roomDatas.set(t,o)),e&&(o.floorType=e),i&&(o.wallType=i),n&&(o.landscapeType=n),!0}return e&&(a&&!s&&a.model.setValue(dt.ROOM_FLOOR_TYPE,e),r.processUpdateMessage(new ok(ok.ROOM_FLOOR_UPDATE,e))),i&&(a&&!s&&a.model.setValue(dt.ROOM_WALL_TYPE,i),r.processUpdateMessage(new ok(ok.ROOM_WALL_UPDATE,i))),n&&(a&&!s&&a.model.setValue(dt.ROOM_LANDSCAPE_TYPE,n),r.processUpdateMessage(new ok(ok.ROOM_LANDSCAPE_UPDATE,n))),!0}},{key:"updateObjectRoomColor",value:function(t,e,i,n){var s=this.getRoomOwnObject(t);if(!s||!s.logic)return!1;var r=new ik(ik.BACKGROUND_COLOR,e,i,n);return s.logic.processUpdateMessage(r),this.events.dispatchEvent(new JT(t,e,i,n)),!0}},{key:"addRoomInstanceFloorHole",value:function(t,e){if(!(e<0)){var i=this.getRoomOwnObject(t),n=this.getRoomObjectFloor(t,e);if(i&&i.logic&&n&&n.model){var s=n.getLocation(),r=n.model.getValue(dt.FURNITURE_SIZE_X),a=n.model.getValue(dt.FURNITURE_SIZE_Y);i.processUpdateMessage(new nk(nk.ADD,e,s.x,s.y,r,a))}}}},{key:"removeRoomInstanceFloorHole",value:function(t,e){if(!(e<0)){var i=this.getRoomOwnObject(t);i&&i.processUpdateMessage(new nk(nk.REMOVE,e))}}},{key:"setRoomEngineGameMode",value:function(t,e){var i=this.getRoomInstance(t);if(i){var n=e?1:0;i.model.setValue(cS.IS_PLAYING_GAME,n),0===n?this.events.dispatchEvent(new VT(VT.NORMAL_MODE,t)):this.events.dispatchEvent(new VT(VT.GAME_MODE,t))}}},{key:"isRoomIdPlayingGame",value:function(t){var e=this.getRoomInstance(t);return!!e&&e.model.getValue(cS.IS_PLAYING_GAME)>0}},{key:"isPlayingGame",value:function(){return this.isRoomIdPlayingGame(this._activeRoomId)}},{key:"disableUpdate",value:function(t){t?gD.instance.ticker.remove(this.update,this):(gD.instance.ticker.remove(this.update,this),gD.instance.ticker.add(this.update,this))}},{key:"runUpdate",value:function(){this.update(1)}},{key:"runVisibilityUpdate",value:function(){document.hidden||this.update(1,!0)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._roomManager&&(t=gD.instance.time,ti.turnVisualizationOn(),this.processPendingFurniture(),this._roomManager.update(t,e),this.updateRoomCameras(t),this._mouseCursorUpdate&&this.setPointer(),ti.turnVisualizationOff())}},{key:"setPointer",value:function(){this._mouseCursorUpdate=!1;var t=this.getRoomInstanceData(this._activeRoomId);t&&t.hasButtonMouseCursorOwners()?document.body.style.cursor="pointer":document.body.style.cursor="auto"}},{key:"processPendingFurniture",value:function(){if(this._skipFurnitureCreationForNextFrame)this._skipFurnitureCreationForNextFrame=!1;else{var t,e=(new Date).valueOf(),i=Object(s.a)(this._roomInstanceDatas.values());try{for(i.s();!(t=i.n()).done;){var n=t.value;if(n){for(var r=null,a=0,o=!1;r=n.getNextPendingFurnitureFloor();){if(o=this.processPendingFurnitureFloor(n.roomId,r.id,r),!(++a%5)&&(new Date).valueOf()-e>=40){this._skipFurnitureCreationForNextFrame=!0;break}}for(;!this._skipFurnitureCreationForNextFrame&&(r=n.getNextPendingFurnitureWall());){if(o=this.processPendingFurnitureWall(n.roomId,r.id,r),!(++a%5)&&(new Date).valueOf()-e>=40){this._skipFurnitureCreationForNextFrame=!0;break}}if(o&&this._roomManager)this._roomManager.getRoomInstance(this.getRoomId(n.roomId)).hasUninitializedObjects()||this.objectsInitialized(n.roomId.toString());if(this._skipFurnitureCreationForNextFrame)return}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"onRoomEngineInitalized",value:function(t){if(t){this._ready=!0,this.events.dispatchEvent(new VT(VT.ENGINE_INITIALIZED,0));var e,i=Object(s.a)(this._roomDatas.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this.createRoomInstance(n.roomId,n.data)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"processPendingFurnitureFloor",value:function(t,e,i){if(!i){var n=this.getRoomInstanceData(t);if(n&&(i=n.getPendingFurnitureFloor(e)),!i)return!1}var s=i.type;s||(s=this.getFurnitureFloorName(i.typeId));var r=this.createRoomObjectFloor(t,e,s);if(!r)return!1;var a=r.model;if(a&&(a.setValue(dt.FURNITURE_COLOR,this.getFurnitureFloorColorIndex(i.typeId)),a.setValue(dt.FURNITURE_TYPE_ID,i.typeId),a.setValue(dt.FURNITURE_AD_URL,this.getRoomObjectAdUrl(i.type)),a.setValue(dt.FURNITURE_REAL_ROOM_OBJECT,i.realRoomObject?1:0),a.setValue(dt.FURNITURE_EXPIRY_TIME,i.expiryTime),a.setValue(dt.FURNITURE_EXPIRTY_TIMESTAMP,gD.instance.time),a.setValue(dt.FURNITURE_USAGE_POLICY,i.usagePolicy),a.setValue(dt.FURNITURE_OWNER_ID,i.ownerId),a.setValue(dt.FURNITURE_OWNER_NAME,i.ownerName)),!this.updateRoomObjectFloor(t,e,i.location,i.direction,i.state,i.data,i.extra))return!1;if(i.sizeZ>=0&&!this.updateRoomObjectFloorHeight(t,e,i.sizeZ))return!1;this.events&&this.events.dispatchEvent(new eR(eR.ADDED,t,e,_t.FLOOR));var o=this.getPlacedRoomObjectData(t);return o&&o.id===e&&o.category===_t.FLOOR&&this.selectRoomObject(t,e,_t.FLOOR),r.isReady&&i.synchronized&&this.addObjectToTileMap(t,r),!0}},{key:"processPendingFurnitureWall",value:function(t,e,i){if(!i){var n=this.getRoomInstanceData(t);if(n&&(i=n.getPendingFurnitureWall(e)),!i)return!1}var s="";i.data&&(s=i.data.getLegacyString());var r=this.getFurnitureWallName(i.typeId,s);r||(r="");var a=this.createRoomObjectWall(t,e,r);if(!a)return!1;var o=a.model;if(o&&(o.setValue(dt.FURNITURE_COLOR,this.getFurnitureWallColorIndex(i.typeId)),o.setValue(dt.FURNITURE_TYPE_ID,i.typeId),o.setValue(dt.FURNITURE_AD_URL,this.getRoomObjectAdUrl(i.type)),o.setValue(dt.FURNITURE_REAL_ROOM_OBJECT,i.realRoomObject?1:0),o.setValue(dt.OBJECT_ACCURATE_Z_VALUE,1),o.setValue(dt.FURNITURE_EXPIRY_TIME,i.expiryTime),o.setValue(dt.FURNITURE_EXPIRTY_TIMESTAMP,gD.instance.time),o.setValue(dt.FURNITURE_USAGE_POLICY,i.usagePolicy),o.setValue(dt.FURNITURE_OWNER_ID,i.ownerId),o.setValue(dt.FURNITURE_OWNER_NAME,i.ownerName)),!this.updateRoomObjectWall(t,e,i.location,i.direction,i.state,s))return!1;this.events&&this.events.dispatchEvent(new eR(eR.ADDED,t,e,_t.WALL));var u=this.getPlacedRoomObjectData(t);return u&&Math.abs(u.id)===e&&u.category===_t.WALL&&this.selectRoomObject(t,e,_t.WALL),!0}},{key:"setRoomSessionOwnUser",value:function(t,e){if(this._roomSessionManager){var i=this._roomSessionManager.getSession(t);i&&i.setOwnRoomIndex(e);var n=this.getRoomCamera(t);n&&(n.targetId=e,n.targetCategory=_t.UNIT,n.activateFollowing(this.cameraFollowDuration))}}},{key:"cameraFollowDuration",get:function(){return 1e3}},{key:"updateRoomCameras",value:function(t){var e,i=Object(s.a)(this._roomInstanceDatas.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.roomCamera;if(r){var a=null,o=this.getRoomObject(n.roomId,r.targetId,r.targetCategory);o&&(a=o.getLocation()),a&&(n.roomId===this._activeRoomId&&this._activeRoomIsDragged||this.updateRoomCamera(n.roomId,1,a,t))}}}}catch(c){i.e(c)}finally{i.f()}if(this._activeRoomWasDragged){var u=this.getRoomInstanceRenderingCanvas(this._activeRoomId,1);u&&this.setRoomInstanceRenderingCanvasOffset(this._activeRoomId,1,new Z.g(u.screenOffsetX+this._activeRoomDragX,u.screenOffsetY+this._activeRoomDragY)),this._activeRoomDragX=0,this._activeRoomDragY=0}}},{key:"updateRoomCamera",value:function(t,e,i,n){var s=this.getRoomInstanceRenderingCanvas(t,e),r=this.getRoomInstanceData(t);if(s&&r&&1===s.scale){var a=s.geometry,o=r.roomCamera,u=this.getRoomInstance(t);if(a&&o&&u){var c=this.getRoomCanvasRectangle(t,e);if(c){var h=Math.floor(i.z)+1,_=Math.round(c.width),l=Math.round(c.height),d=this.getCanvasBoundingRectangle(e);if(d&&(d.right<0||d.bottom<0||d.left>=_||d.top>=l)&&o.reset(),o.screenWd!==_||o.screenHt!==l||o.scale!==a.scale||o.geometryUpdateId!==a.updateId||!Et.isEqual(i,o.targetObjectLoc)||o.isMoving){o.targetObjectLoc=i;var f=new Et;f.assign(i),f.x=Math.round(f.x),f.y=Math.round(f.y);var v=u.model.getValue(cS.ROOM_MIN_X)-.5,g=u.model.getValue(cS.ROOM_MIN_Y)-.5,O=u.model.getValue(cS.ROOM_MAX_X)+.5,y=u.model.getValue(cS.ROOM_MAX_Y)+.5,E=Math.round((v+O)/2),p=Math.round((g+y)/2),m=new Z.g(f.x-E,f.y-p),I=a.scale/Math.sqrt(2),b=I/2,T=new Z.d;T.rotate(-(a.direction.x+90)/180*Math.PI),(m=T.apply(m)).y=m.y*(b/I);var R=c.width/2/I-1,k=c.height/2/b-1,A=0,S=0,j=0,N=0,D=a.getScreenPoint(new Et(E,p,2));if(!D)return;if(D.x=D.x+Math.round(c.width/2),D.y=D.y+Math.round(c.height/2),!d)return void a.adjustLocation(new Et(0,0),25);if(d.x+=-s.screenOffsetX,d.y+=-s.screenOffsetY,!(d.width>1&&d.height>1))return void a.adjustLocation(new Et(-30,-30),25);A=(d.left-D.x-.25*a.scale)/I,j=(d.right-D.x+.25*a.scale)/I,S=(d.top-D.y-.5*a.scale)/b,N=(d.bottom-D.y+.5*a.scale)/b;var M=!1,C=!1,L=!1,U=!1;Math.round((j-A)*I)<c.width?(h=2,m.x=(j+A)/2,L=!0):(m.x>j-R&&(m.x=j-R,M=!0),m.x<A+R&&(m.x=A+R,M=!0)),Math.round((N-S)*b)<c.height?(h=2,m.y=(N+S)/2,U=!0):(m.y>N-k&&(m.y=N-k,C=!0),m.y<S+k&&(m.y=S+k,C=!0),C&&(m.y=m.y/(b/I))),T.invert(),(m=T.apply(m)).x=m.x+E,m.y=m.y+p;var P=.35,w=.2,F=.2;if(F*_>100&&(F=100/_),P*l>150&&(P=150/l),w*l>150&&(w=150/l),o.limitedLocationX&&o.screenWd==_&&o.screenHt==l&&(F=0),o.limitedLocationY&&o.screenWd==_&&o.screenHt==l&&(P=0,w=0),c.width=c.width*(1-2*F),c.height=c.height*(1-(P+w)),c.width<10&&(c.width=10),c.height<10&&(c.height=10),P+w>0?(c.x+=-c.width/2,c.y+=-c.height*(w/(P+w))):(c.x+=-c.width/2,c.y+=-c.height/2),!(D=a.getScreenPoint(f)))return;if(D){D.x=D.x+s.screenOffsetX,D.y=D.y+s.screenOffsetY,f.z=h,f.x=Math.round(2*m.x)/2,f.y=Math.round(2*m.y)/2,o.location||(a.location=f,this.useOffsetScrolling?o.initializeLocation(new Et(0,0,0)):o.initializeLocation(f));var x=a.getScreenPoint(f),B=new Et(0,0,0);x&&(B.x=x.x,B.y=x.y),(D.x<c.left||D.x>c.right)&&!o.centeredLocX||(D.y<c.top||D.y>c.bottom)&&!o.centeredLocY||L&&!o.centeredLocX&&o.screenWd!=_||U&&!o.centeredLocY&&o.screenHt!=l||o.roomWd!=d.width||o.roomHt!=d.height||o.screenWd!=_||o.screenHt!=l?(o.limitedLocationX=M,o.limitedLocationY=C,this.useOffsetScrolling?o.target=B:o.target=f):(M||(o.limitedLocationX=!1),C||(o.limitedLocationY=!1))}o.centeredLocX=L,o.centeredLocY=U,o.screenWd=_,o.screenHt=l,o.scale=a.scale,o.geometryUpdateId=a.updateId,o.roomWd=d.width,o.roomHt=d.height,this._sessionDataManager.isCameraFollowDisabled||(this.useOffsetScrolling?o.update(n,8):o.update(n,.5)),this.useOffsetScrolling?this.setRoomInstanceRenderingCanvasOffset(this.activeRoomId,1,new Z.g(-o.location.x,-o.location.y)):a.adjustLocation(o.location,25)}else o.limitedLocationX=!1,o.limitedLocationY=!1,o.centeredLocX=!1,o.centeredLocY=!1}}}}},{key:"getRoomCanvasRectangle",value:function(t,e){var i=this.getRoomInstanceRenderingCanvas(t,e);return i?new Z.j(0,0,i.width,i.height):null}},{key:"getRoomObjectBoundingRectangle",value:function(t,e,i,n){var s=this.getRoomInstanceGeometry(t,n);if(!s)return null;var r=this.getRoomObject(t,e,i);if(!r)return null;var a=r.visualization;if(!a)return null;var o=a.getBoundingRectangle(),u=this.getRoomInstanceRenderingCanvas(t,n),c=u?u.scale:1,h=s.getScreenPoint(r.getLocation());return h?(h.x=Math.round(h.x),h.y=Math.round(h.y),o.x=o.x*c,o.y=o.y*c,o.width=o.width*c,o.height=o.height*c,h.x=h.x*c,h.y=h.y*c,o.x+=h.x,o.y+=h.y,u?(o.x+=Math.round(u.width/2)+u.screenOffsetX,o.y+=Math.round(u.height/2)+u.screenOffsetY,o):null):null}},{key:"getCanvasBoundingRectangle",value:function(t){return this.getRoomObjectBoundingRectangle(this._activeRoomId,i.ROOM_OBJECT_ID,_t.ROOM,t)}},{key:"getFurnitureFloorName",value:function(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorNameForTypeId(t):null}},{key:"getFurnitureWallName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._roomContentLoader?this._roomContentLoader.getFurnitureWallNameForTypeId(t,e):null}},{key:"getFurnitureFloorColorIndex",value:function(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureFloorColorIndex(t):null}},{key:"getFurnitureWallColorIndex",value:function(t){return this._roomContentLoader?this._roomContentLoader.getFurnitureWallColorIndex(t):null}},{key:"getRoomInstanceData",value:function(t){var e=this._roomInstanceDatas.get(t);if(e)return e;var i=new iN(t);return this._roomInstanceDatas.set(i.roomId,i),i}},{key:"getRoomInstanceModelName",value:function(t){var e=this.getRoomInstanceData(t);return e?e.modelName:null}},{key:"setRoomInstanceModelName",value:function(t,e){var i=this.getRoomInstanceData(t);i&&i.setModelName(e)}},{key:"getRoomTileObjectMap",value:function(t){var e=this.getRoomInstanceData(t);return e?e.tileObjectMap:null}},{key:"getCurrentRoomCamera",value:function(){return this.getRoomCamera(this._activeRoomId)}},{key:"getRoomCamera",value:function(t){var e=this.getRoomInstanceData(t);return e?e.roomCamera:null}},{key:"getSelectedRoomObjectData",value:function(t){var e=this.getRoomInstanceData(t);return e?e.selectedObject:null}},{key:"setSelectedRoomObjectData",value:function(t,e){var i=this.getRoomInstanceData(t);if(!i)return null;i.setSelectedObject(e),e&&i.setPlacedObject(null)}},{key:"getPlacedRoomObjectData",value:function(t){var e=this.getRoomInstanceData(t);return e?e.placedObject:null}},{key:"setPlacedRoomObjectData",value:function(t,e){var i=this.getRoomInstanceData(t);if(!i)return null;i.setPlacedObject(e)}},{key:"cancelRoomObjectPlacement",value:function(){this._roomObjectEventHandler&&this._roomObjectEventHandler.cancelRoomObjectPlacement(this._activeRoomId)}},{key:"getFurnitureStackingHeightMap",value:function(t){var e=this.getRoomInstanceData(t);return e?e.furnitureStackingHeightMap:null}},{key:"setFurnitureStackingHeightMap",value:function(t,e){var i=this.getRoomInstanceData(t);if(!i)return null;i.setFurnitureStackingHeightMap(e)}},{key:"getLegacyWallGeometry",value:function(t){var e=this.getRoomInstanceData(t);return e?e.legacyGeometry:null}},{key:"createRoomObjectAndInitialize",value:function(t,e,i,n){var s=this.getRoomInstance(t);return s?s.createRoomObjectAndInitalize(e,i,n):null}},{key:"getTotalObjectsForManager",value:function(t,e){var i=this.getRoomInstance(t);return i?i.getTotalObjectsForManager(e):0}},{key:"getRoomObject",value:function(t,e,n){if(!this._ready)return null;var s=this.getRoomId(t);return 0===t&&(s=i.TEMPORARY_ROOM),this.getObject(s,e,n)}},{key:"getObject",value:function(t,e,i){var n=null;if(this._roomManager&&(n=this._roomManager.getRoomInstance(t)),!n)return null;var s=n.getRoomObject(e,i);if(!s)switch(i){case _t.FLOOR:this.processPendingFurnitureFloor(this.getRoomIdFromString(t),e,null),s=n.getRoomObject(e,i);break;case _t.WALL:this.processPendingFurnitureWall(this.getRoomIdFromString(t),e,null),s=n.getRoomObject(e,i)}return s}},{key:"getRoomObjectByIndex",value:function(t,e,i){var n=this.getRoomInstance(t);return n?n.getRoomObjectByIndex(e,i):null}},{key:"getRoomObjectCategoryForType",value:function(t){return t&&this._roomContentLoader?this._roomContentLoader.getCategoryForType(t):_t.MINIMUM}},{key:"getRoomObjectCursor",value:function(t){return this.getObject(this.getRoomId(t),i.CURSOR_OBJECT_ID,_t.CURSOR)}},{key:"getRoomObjectSelectionArrow",value:function(t){return this.getObject(this.getRoomId(t),i.ARROW_OBJECT_ID,_t.CURSOR)}},{key:"getRoomOwnObject",value:function(t){return this.getObject(this.getRoomId(t),i.ROOM_OBJECT_ID,_t.ROOM)}},{key:"getRoomObjectUser",value:function(t,e){return this.getObject(this.getRoomId(t),e,_t.UNIT)}},{key:"removeRoomObjectUser",value:function(t,e){return this.removeRoomObject(t,e,_t.UNIT)}},{key:"createRoomObjectUser",value:function(t,e,i){return this.createRoomObjectAndInitialize(t,e,i,_t.UNIT)}},{key:"getRoomObjectFloor",value:function(t,e){return this.getObject(this.getRoomId(t),e,_t.FLOOR)}},{key:"createRoomObjectFloor",value:function(t,e,i){return this.createRoomObjectAndInitialize(t,e,i,_t.FLOOR)}},{key:"removeRoomObjectFloor",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.getRoomInstanceData(t);if(s&&s.removePendingFunitureFloor(e),this._sessionDataManager&&i===this._sessionDataManager.userId&&!ZT.isBuilderClubId(e)){var r=this.getRoomObject(t,e,_t.FLOOR);if(r){var a=this.getRoomObjectScreenLocation(t,e,_t.FLOOR,this._activeRoomActiveCanvas);if(a){var o=1===r.model.getValue(dt.FURNITURE_DISABLE_PICKING_ANIMATION);if(!o){var u=r.model.getValue(dt.FURNITURE_TYPE_ID),c=r.model.getValue(dt.FURNITURE_EXTRAS),h=r.model.getValue(dt.FURNITURE_DATA_FORMAT),_=ja.getData(h),l=this.getFurnitureFloorIcon(u,null,c,_).data;if(l){var d=Ut.generateImage(l);if(this.events){var f=new XT(d,a.x,a.y);f.iconName=WT.INVENTORY,this.events.dispatchEvent(f)}}}}}}this.removeRoomObject(t,e,_t.FLOOR),this.setMouseDefault(t,_t.FLOOR,e),n&&this.refreshTileObjectMap(t,"RoomEngine.disposeObjectFurniture()")}},{key:"getRoomObjectWall",value:function(t,e){return this.getObject(this.getRoomId(t),e,_t.WALL)}},{key:"removeRoomObjectWall",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._sessionDataManager&&i===this._sessionDataManager.userId&&!ZT.isBuilderClubId(e)){var n=this.getRoomObject(t,e,_t.WALL);if(n&&-1===n.type.indexOf("post_it")&&-1===n.type.indexOf("external_image_wallitem")){var s=this.getRoomObjectScreenLocation(t,e,_t.WALL,this._activeRoomActiveCanvas);if(s){var r=n.model.getValue(dt.FURNITURE_TYPE_ID),a=n.model.getValue(dt.FURNITURE_DATA),o=this.getFurnitureWallIcon(r,null,a).data;if(o){var u=Ut.generateImage(o);if(this.events){var c=new XT(u,s.x,s.y);c.iconName=WT.INVENTORY,this.events.dispatchEvent(c)}}}}}this.removeRoomObject(t,e,_t.WALL),this.updateRoomObjectMask(t,e,!1),this.setMouseDefault(t,_t.WALL,e)}},{key:"createRoomObjectWall",value:function(t,e,i){return this.createRoomObjectAndInitialize(t,e,i,_t.WALL)}},{key:"removeRoomObject",value:function(t,e,i){var n=this.getRoomInstance(t);if(!n)return null;n.removeRoomObject(e,i),this.events&&this.events.dispatchEvent(new eR(eR.REMOVED,t,e,i))}},{key:"addFurnitureFloor",value:function(t,e,i,n,s,r,a){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:NaN,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",l=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],d=!(arguments.length>13&&void 0!==arguments[13])||arguments[13],f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:-1,v=this.getRoomInstanceData(t);if(!v)return!1;var g=new $j(e,i,null,n,s,r,a,o,u,c,h,_,l,d,f);return v.addPendingFurnitureFloor(g),!0}},{key:"addFurnitureFloorByTypeName",value:function(t,e,i,n,s,r,a){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:NaN,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",l=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],d=!(arguments.length>13&&void 0!==arguments[13])||arguments[13],f=arguments.length>14&&void 0!==arguments[14]?arguments[14]:-1,v=this.getRoomInstanceData(t);if(!v)return!1;var g=new $j(e,0,i,n,s,r,a,o,u,c,h,_,l,d,f);return v.addPendingFurnitureFloor(g),!0}},{key:"addFurnitureWall",value:function(t,e,i,n,s,r,a){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",_=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],l=this.getRoomInstanceData(t);if(!l)return!1;var d=new Ta;d.setString(a);var f=new $j(e,i,null,n,s,r,d,NaN,o,u,c,h,!0,_);return l.addPendingFurnitureWall(f),!0}},{key:"updateRoomObjectFloor",value:function(t,e,i,n,s,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=this.getRoomObjectFloor(t,e);return!!o&&(o.processUpdateMessage(new Ve(i,n)),o.processUpdateMessage(new ZR(s,r,a)),!0)}},{key:"updateRoomObjectWall",value:function(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=this.getRoomObjectWall(t,e);if(!a||!a.logic)return!1;var o=new Ve(i,n),u=new Ta,c=new ZR(s,u);return u.setString(r),a.logic.processUpdateMessage(o),a.logic.processUpdateMessage(c),this.updateRoomObjectMask(t,e),!0}},{key:"updateRoomObjectWallItemData",value:function(t,e,i){var n=this.getRoomObjectWall(t,e);return!(!n||!n.logic)&&(n.logic.processUpdateMessage(new tk(i)),!0)}},{key:"updateRoomObjectFloorHeight",value:function(t,e,i){var n=this.getRoomObjectFloor(t,e);return!!n&&(n.processUpdateMessage(new $R(null,null,i)),!0)}},{key:"updateRoomObjectFloorExpiration",value:function(t,e,i){var n=this.getRoomObjectFloor(t,e);return!!n&&(n.model.setValue(dt.FURNITURE_EXPIRY_TIME,i),n.model.setValue(dt.FURNITURE_EXPIRTY_TIMESTAMP,gD.instance.time),!0)}},{key:"updateRoomObjectWallExpiration",value:function(t,e,i){var n=this.getRoomObjectWall(t,e);return!!n&&(n.model.setValue(dt.FURNITURE_EXPIRY_TIME,i),n.model.setValue(dt.FURNITURE_EXPIRTY_TIMESTAMP,gD.instance.time),!0)}},{key:"updateRoomObjectMask",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=_t.WALL+"_"+e,s=this.getRoomObjectWall(t,e),r=null;if(s&&s.model){if(s.model.getValue(dt.FURNITURE_USES_PLANE_MASK)>0){var a=s.model.getValue(dt.FURNITURE_PLANE_MASK_TYPE),o=s.getLocation();r=i?new sk(sk.ADD_MASK,n,a,o):new sk(sk.REMOVE_MASK,n)}}else r=new sk(sk.REMOVE_MASK,n);var u=this.getRoomOwnObject(t);u&&u.logic&&r&&u.logic.processUpdateMessage(r)}},{key:"rollRoomObjectFloor",value:function(t,e,i,n){var s=this.getRoomObjectFloor(t,e);s&&s.processUpdateMessage(new XR(i,n,null,!!n))}},{key:"updateRoomObjectWallLocation",value:function(t,e,i){var n=this.getRoomObjectWall(t,e);return!!n&&(n.logic&&n.logic.processUpdateMessage(new XR(i,null,null)),this.updateRoomObjectMask(t,e),!0)}},{key:"addRoomObjectUser",value:function(t,e,i,n,s,r,a){if(this.getRoomObjectUser(t,e))return!1;var o=lt.getTypeString(r);o===lt.PET&&(o=this.getPetType(a));var u=this.createRoomObjectUser(t,e,o);return!!u&&(u.processUpdateMessage(new qR(this.fixedUserLocation(t,i),null,n,s,!1,0)),a&&u.processUpdateMessage(new UR(a)),this.events&&this.events.dispatchEvent(new eR(eR.ADDED,t,e,_t.UNIT)),!0)}},{key:"updateRoomObjectUserLocation",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:NaN,u=this.getRoomObjectUser(t,e);if(!u)return!1;i||(i=u.getLocation()),a||(a=u.getDirection()),isNaN(o)&&(o=u.model.getValue(dt.HEAD_DIRECTION)),u.processUpdateMessage(new qR(this.fixedUserLocation(t,i),this.fixedUserLocation(t,n),a,o,s,r));var c=this._roomSessionManager&&this._roomSessionManager.getSession(t)||null;return c&&c.ownRoomIndex===e&&this._logicFactory.events.dispatchEvent(new RR(RR.ROAME_MOVE_TO,n)),!0}},{key:"fixedUserLocation",value:function(t,e){if(!e)return null;var i=this.getFurnitureStackingHeightMap(t),n=this.getLegacyWallGeometry(t);if(!i||!n)return e;var s=e.z,r=i.getTileHeight(e.x,e.y),a=n.getHeight(e.x,e.y);return Math.abs(s-r)<.1&&Math.abs(r-a)<.1&&(s=n.getFloorAltitude(e.x,e.y)),new Et(e.x,e.y,s)}},{key:"updateRoomObjectUserAction",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=this.getRoomObjectUser(t,e);if(!r)return!1;var a=null;switch(i){case dt.FIGURE_TALK:a=new NR(n);break;case dt.FIGURE_SLEEP:a=new WR(1===n);break;case dt.FIGURE_IS_TYPING:a=new KR(1===n);break;case dt.FIGURE_IS_MUTED:a=new xR(1===n);break;case dt.FIGURE_CARRY_OBJECT:a=new jR(n,s);break;case dt.FIGURE_USE_OBJECT:a=new QR(n);break;case dt.FIGURE_DANCE:a=new DR(n);break;case dt.FIGURE_GAINED_EXPERIENCE:a=new CR(n);break;case dt.FIGURE_NUMBER_VALUE:a=new HR(n);break;case dt.FIGURE_SIGN:a=new YR(n);break;case dt.FIGURE_EXPRESSION:a=new LR(n);break;case dt.FIGURE_IS_PLAYING_GAME:a=new VR(1===n);break;case dt.FIGURE_GUIDE_STATUS:a=new FR(n)}return!!a&&(r.processUpdateMessage(a),!0)}},{key:"updateRoomObjectUserFigure",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.getRoomObjectUser(t,e);return!!a&&(a.processUpdateMessage(new UR(i,n,s,r)),!0)}},{key:"updateRoomObjectUserFlatControl",value:function(t,e,i){var n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new PR(parseInt(i))),!0)}},{key:"updateRoomObjectUserEffect",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=this.getRoomObjectUser(t,e);return!!s&&(s.processUpdateMessage(new MR(i,n)),!0)}},{key:"updateRoomObjectUserGesture",value:function(t,e,i){var n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new wR(i)),!0)}},{key:"updateRoomObjectUserPetGesture",value:function(t,e,i){var n=this.getRoomObjectUser(t,e);return!!n&&(n.processUpdateMessage(new GR(i)),!0)}},{key:"updateRoomObjectUserPosture",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this.getRoomObjectUser(t,e);return!!s&&(s.processUpdateMessage(new zR(i,n)),!0)}},{key:"updateRoomObjectUserOwn",value:function(t,e){var i=this.getRoomObjectUser(t,e);i&&i.processUpdateMessage(new BR)}},{key:"useRoomObject",value:function(t,e){var i=this.getRoomObject(this._activeRoomId,t,e);if(i){var n=i.logic;if(n)return n.useObject(),!0}return!1}},{key:"objectInitialized",value:function(t,e,n){var s=this.getRoomIdFromString(t);n===_t.WALL&&this.updateRoomObjectMask(s,e);var r=this.getRoomObject(s,e,n);if(r&&r.model&&r.logic){var a=r.model.getValue(dt.FURNITURE_DATA_FORMAT);if(!isNaN(a)){var o=ja.getData(a);o.initializeFromRoomObjectModel(r.model),r.processUpdateMessage(new ZR(r.getState(0),o))}this.events.dispatchEvent(new eR(eR.CONTENT_UPDATED,s,e,n))}t!==i.TEMPORARY_ROOM&&this.addObjectToTileMap(s,r)}},{key:"changeObjectModelData",value:function(t,e,i,n,s){var r=this.getObject(this.getRoomId(t),e,i);if(!r||!r.logic)return!1;var a=new ek(n,s);return r.processUpdateMessage(a),!0}},{key:"changeObjectState",value:function(t,e,i){var n=this.getObject(this.getRoomId(t),e,i);if(n&&n.model){var s=n.model.getValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX);isNaN(s)?s=1:s+=1,n.model.setValue(dt.FURNITURE_AUTOMATIC_STATE_INDEX,s);var r=n.model.getValue(dt.FURNITURE_DATA_FORMAT),a=ja.getData(r);a.initializeFromRoomObjectModel(n.model),n.logic&&n.logic.processUpdateMessage(new ZR(s,a))}}},{key:"loadRoomObjectBadgeImage",value:function(t,e,n,s){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._sessionDataManager){var a=null;if(0===t){var o=this._roomManager.getRoomInstance(i.TEMPORARY_ROOM);o&&(a=o.getRoomObject(e,n))}else a=this.getRoomObjectFloor(t,e);if(a&&a.logic){var u=r?this._sessionDataManager.loadGroupBadgeImage(s):this._sessionDataManager.loadBadgeImage(s);if(u)this.putBadgeInObjectAssets(a,s,r);else{u="loading_icon",this._badgeListenerObjects||(this._badgeListenerObjects=new Map),this._badgeListenerObjects.size||this._sessionDataManager.events.addEventListener(qT.IMAGE_READY,this.onBadgeImageReadyEvent);var c=this._badgeListenerObjects.get(s);c||(c=[]),c.push(new nN(a,r)),this._badgeListenerObjects.set(s,c)}a.logic.processUpdateMessage(new JR(s,u))}}}},{key:"onBadgeImageReadyEvent",value:function(t){if(this._sessionDataManager){var e=this._badgeListenerObjects&&this._badgeListenerObjects.get(t.badgeId);if(e){var i,n=Object(s.a)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r){this.putBadgeInObjectAssets(r.object,t.badgeId,r.groupBadge);var a=r.groupBadge?this._sessionDataManager.loadGroupBadgeImage(t.badgeId):this._sessionDataManager.loadBadgeImage(t.badgeId);r.object&&r.object.logic&&r.object.logic.processUpdateMessage(new JR(t.badgeId,a))}}}catch(o){n.e(o)}finally{n.f()}this._badgeListenerObjects.delete(t.badgeId),this._badgeListenerObjects.size||this._sessionDataManager.events.removeEventListener(qT.IMAGE_READY,this.onBadgeImageReadyEvent)}}}},{key:"putBadgeInObjectAssets",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._roomContentLoader&&this._sessionDataManager){var n=i?this._sessionDataManager.loadGroupBadgeImage(e):this._sessionDataManager.loadBadgeImage(e),s=i?this._sessionDataManager.getGroupBadgeImage(e):this._sessionDataManager.getBadgeImage(e);s&&this._roomContentLoader.addAssetToCollection(t.type,n,s,!1)}}},{key:"dispatchMouseEvent",value:function(t,e,n,s,r,a,o,u){var c=this.getRoomInstanceRenderingCanvas(this._activeRoomId,t);if(c){var h=this.getRenderingCanvasOverlay(c),_=this.getOverlayIconSprite(h,i.OBJECT_ICON_SPRITE);if(_){var l=_.getLocalBounds();_.x=e-l.width/2,_.y=n-l.height/2}if(!this.handleRoomDragging(c,e,n,s,r,a,o)&&!c.handleMouseEvent(e,n,s,r,a,o,u)){var d=null;s===_i.MOUSE_CLICK?(this.events&&this.events.dispatchEvent(new eR(eR.DESELECTED,this._activeRoomId,-1,_t.MINIMUM)),d=Be.CLICK):s===_i.MOUSE_MOVE?d=Be.MOUSE_MOVE:s===_i.MOUSE_DOWN?d=Be.MOUSE_DOWN:s===_i.MOUSE_DOWN_LONG?d=Be.MOUSE_DOWN_LONG:s===_i.MOUSE_UP&&(d=Be.MOUSE_UP),this._roomObjectEventHandler.handleRoomObjectEvent(new Be(d,this.getRoomObject(this._activeRoomId,i.ROOM_OBJECT_ID,_t.ROOM),null,r),this._activeRoomId)}this._activeRoomActiveCanvas=t,this._activeRoomActiveCanvasMouseX=e,this._activeRoomActiveCanvasMouseY=n}}},{key:"handleRoomDragging",value:function(t,e,n,s,r,a,o){var u=e-this._activeRoomActiveCanvasMouseX,c=n-this._activeRoomActiveCanvasMouseY;if(s===_i.MOUSE_DOWN)r||a||o||this.isDecorating||this._roomAllowsDragging&&(this._activeRoomIsDragged=!0,this._activeRoomWasDragged=!1,this._activeRoomDragStartX=this._activeRoomActiveCanvasMouseX,this._activeRoomDragStartY=this._activeRoomActiveCanvasMouseY);else if(s===_i.MOUSE_UP){if(this._activeRoomIsDragged&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged)){var h=this.getRoomInstanceData(this._activeRoomId);if(h){var _=h.roomCamera;_&&(this.useOffsetScrolling&&(_.isMoving||(_.centeredLocX=!1,_.centeredLocY=!1),_.resetLocation(new Et(-t.screenOffsetX,-t.screenOffsetY))),this._roomDraggingAlwaysCenters&&_.reset())}}}else if(s===_i.MOUSE_MOVE)this._activeRoomIsDragged&&(this._activeRoomWasDragged||(u=e-this._activeRoomDragStartX,c=n-this._activeRoomDragStartY,(u<=-i.DRAG_THRESHOLD||u>=i.DRAG_THRESHOLD||c<=-i.DRAG_THRESHOLD||c>=i.DRAG_THRESHOLD)&&(this._activeRoomWasDragged=!0),u=0,c=0),0==u&&0==c||(this._activeRoomDragX+=u,this._activeRoomDragY+=c,this._activeRoomWasDragged=!0));else if((s===_i.MOUSE_CLICK||s===_i.DOUBLE_CLICK)&&(this._activeRoomIsDragged=!1,this._activeRoomWasDragged))return this._activeRoomWasDragged=!1,!0;return!1}},{key:"updateMousePointer",value:function(t,e,i){var n=this.getRoomObjectCategoryForType(i);t!==dR.MOUSE_BUTTON?this.setMouseDefault(this._activeRoomId,n,e):this.setMouseButton(this._activeRoomId,n,e)}},{key:"setMouseButton",value:function(t,e,i){if(this._roomSessionManager){var n=this._roomSessionManager.getSession(t);if(n&&(e!==_t.FLOOR&&e!==_t.WALL||n.controllerLevel>=Zu.GUEST)){var s=this.getRoomInstanceData(t);s&&s.addButtonMouseCursorOwner(e+"_"+i)&&(this._mouseCursorUpdate=!0)}}}},{key:"setMouseDefault",value:function(t,e,i){if(this._roomSessionManager){var n=this.getRoomInstanceData(t);n&&n.removeButtonMouseCursorOwner(e+"_"+i)&&(this._mouseCursorUpdate=!0)}}},{key:"processRoomObjectOperation",value:function(t,e,i){if(!this._roomObjectEventHandler)return!1;this._roomObjectEventHandler.modifyRoomObject(this._activeRoomId,t,e,i)}},{key:"modifyRoomObjectDataWithMap",value:function(t,e,i,n){if(!this._roomObjectEventHandler)return!1;e===_t.FLOOR&&this._roomObjectEventHandler.modifyRoomObjectDataWithMap(this._activeRoomId,t,e,i,n)}},{key:"modifyRoomObjectData",value:function(t,e,i,n){if(!this._roomObjectEventHandler)return!1;e===_t.WALL&&this._roomObjectEventHandler.modifyWallItemData(this._activeRoomId,t,i,n)}},{key:"processRoomObjectEvent",value:function(t){if(this._roomObjectEventHandler){var e=this.getRoomObjectRoomId(t.object);if(e){var i=this.getRoomIdFromString(e);this._roomObjectEventHandler.handleRoomObjectEvent(t,i)}}}},{key:"processRoomObjectPlacement",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=this.getRoomInstance(this._activeRoomId);return!(!c||0!==c.model.getValue(cS.ROOM_IS_PUBLIC))&&(!!this._roomObjectEventHandler&&this._roomObjectEventHandler.processRoomObjectPlacement(t,this._activeRoomId,e,i,n,s,r,a,o,u))}},{key:"getRoomObjectScreenLocation",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;-1==n&&(n=this._activeRoomActiveCanvas);var s=this.getRoomInstanceGeometry(t,n);if(!s)return null;var r=this.getRoomObject(t,e,i);if(!r)return null;var a=s.getScreenPoint(r.getLocation());if(!a)return null;var o=this.getRoomInstanceRenderingCanvas(t,n);return o?(a.x=a.x*o.scale,a.y=a.y*o.scale,a.x+=o.width/2+o.screenOffsetX,a.y+=o.height/2+o.screenOffsetY,a.x=Math.round(a.x),a.y=Math.round(a.y),a):null}},{key:"selectRoomObject",value:function(t,e,i){this._roomObjectEventHandler&&this._roomObjectEventHandler.setSelectedObject(t,e,i)}},{key:"setSelectedAvatar",value:function(t,e){this._roomObjectEventHandler||this._roomObjectEventHandler.setSelectedAvatar(t,e,!0)}},{key:"cancelRoomObjectInsert",value:function(){this._roomObjectEventHandler&&this._roomObjectEventHandler.cancelRoomObjectInsert(this._activeRoomId)}},{key:"addOverlayIconSprite",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(t&&i){var s=this.getOverlayIconSprite(t,e);return s?null:((s=new et(i)).name=e,s.scale.set(n),t.addChild(s),s)}}},{key:"onRoomContentLoaded",value:function(t,e,i){if(this._roomContentLoader&&-1!==t){this._thumbnailObjectIdBank.freeNumber(t-1);var n=this._thumbnailCallbacks.get(e);if(n){this._thumbnailCallbacks.delete(e);var r=this._roomContentLoader.getImage(e);if(r){var a,o=Object(s.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&u.imageReady(t,null,r)}}catch(c){o.e(c)}finally{o.f()}}}}}},{key:"setObjectMoverIconSprite",value:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=null,h=0,_=null,l=1;if(n)_=this.getRoomObjectImage(this._activeRoomId,t,e,new Et,1,null);else if(this._roomContentLoader)if(e===_t.FLOOR?(c=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),h=this._roomContentLoader.getFurnitureFloorColorIndex(t)):e===_t.WALL&&(c=this._roomContentLoader.getFurnitureWallNameForTypeId(t,s),h=this._roomContentLoader.getFurnitureWallColorIndex(t)),e===_t.UNIT)if("pet"===(c=lt.getTypeString(t))){c=this.getPetType(s);var d=new YT(s);_=this.getRoomObjectPetImage(d.typeId,d.paletteId,d.color,new Et(180),64,null,!0,0,d.customParts,u)}else _=this.getGenericRoomObjectImage(c,s,new Et(180),64,null,0,null,r,a,o,u);else _=this.getGenericRoomObjectImage(c,h.toString(),new Et,1,null,0,s,r,a,o,u);if(_&&_.data){var f=this.getActiveRoomInstanceRenderingCanvas();if(f){var v=this.getRenderingCanvasOverlay(f);this.removeOverlayIconSprite(v,i.OBJECT_ICON_SPRITE);var g=this.addOverlayIconSprite(v,i.OBJECT_ICON_SPRITE,_.data,l);g&&(g.x=this._activeRoomActiveCanvasMouseX-_.data.width/2,g.y=this._activeRoomActiveCanvasMouseY-_.data.height/2)}}}},{key:"getRoomObjectImage",value:function(t,e,i,n,s,r){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(!this._roomManager)return null;var o=-1,u=null,c=null,h="",_=null,l=this.getRoomId(t),d=this._roomManager.getRoomInstance(l);if(d){var f=d.getRoomObject(e,i);if(f&&f.model)switch(o=f.id,u=f.type,i){case _t.FLOOR:case _t.WALL:h=f.model.getValue(dt.FURNITURE_COLOR).toString(),_=f.model.getValue(dt.FURNITURE_EXTRAS);var v=f.model.getValue(dt.FURNITURE_DATA_FORMAT);v!==Ta.FORMAT_KEY&&(c=ja.getData(v)).initializeFromRoomObjectModel(f.model);break;case _t.UNIT:h=f.model.getValue(dt.FIGURE)}}return this.getGenericRoomObjectImage(u,h,n,s,r,a,_,c,-1,-1,null,o)}},{key:"getFurnitureFloorIconUrl",value:function(t){var e=null,i="";return this._roomContentLoader?(e=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),i=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(e,i)):null}},{key:"getFurnitureFloorIcon",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.getFurnitureFloorImage(t,new Et,1,e,0,i,-1,-1,n)}},{key:"getFurnitureWallIconUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null,n="";return this._roomContentLoader?(i=this._roomContentLoader.getFurnitureWallNameForTypeId(t,e),n=this._roomContentLoader.getFurnitureWallColorIndex(t).toString(),this._roomContentLoader.getAssetIconUrl(i,n)):null}},{key:"getFurnitureWallIcon",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.getFurnitureWallImage(t,new Et,1,e,0,i)}},{key:"getFurnitureFloorImage",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=null,h="";return this._roomContentLoader&&(c=this._roomContentLoader.getFurnitureFloorNameForTypeId(t),h=this._roomContentLoader.getFurnitureFloorColorIndex(t).toString()),1===i&&n?this.getGenericRoomObjectThumbnail(c,h,n,r,u):this.getGenericRoomObjectImage(c,h,e,i,n,s,r,u,a,o)}},{key:"getFurnitureWallImage",value:function(t,e,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,u=null,c="";return this._roomContentLoader&&(u=this._roomContentLoader.getFurnitureWallNameForTypeId(t),c=this._roomContentLoader.getFurnitureWallColorIndex(t).toString()),1===i&&n?this.getGenericRoomObjectThumbnail(u,c,n,r,null):this.getGenericRoomObjectImage(u,c,e,i,n,s,r,null,a,o)}},{key:"getRoomObjectPetImage",value:function(t,e,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,_=null,l=t+" "+e+" "+i.toString(16);if(o&&(l+=" head"),c){l=l+" "+c.length;var d,f=Object(s.a)(c);try{for(f.s();!(d=f.n()).done;){var v=d.value;l=l+" "+v.layerId+" "+v.partId+" "+v.paletteId}}catch(g){f.e(g)}finally{f.f()}}return this._roomContentLoader&&(_=this._roomContentLoader.getPetNameForType(t)),this.getGenericRoomObjectImage(_,l,n,r,a,u,null,null,-1,-1,h)}},{key:"getGenericRoomObjectImage",value:function(t,e,n,s,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:-1;if(!this._roomManager)return null;var d=new AR;if(d.id=-1,!this._ready||!t)return d;var f=this._roomManager.getRoomInstance(i.TEMPORARY_ROOM);if(!f&&!(f=this._roomManager.createRoomInstance(i.TEMPORARY_ROOM)))return d;var v=this._imageObjectIdBank.reserveNumber(),g=this.getRoomObjectCategoryForType(t);if(v<0)return d;v++;var O=f.createRoomObjectAndInitalize(v,t,g);if(!O||!O.model||!O.logic)return d;var y=O.model;switch(g){case _t.FLOOR:case _t.WALL:y.setValue(dt.FURNITURE_COLOR,parseInt(e)),y.setValue(dt.FURNITURE_EXTRAS,o);break;case _t.UNIT:if(t===lt.USER||t===lt.BOT||t===lt.RENTABLE_BOT||t===lt.PET)y.setValue(dt.FIGURE,e);else{var E=new YT(e);y.setValue(dt.PET_PALETTE_INDEX,E.paletteId),y.setValue(dt.PET_COLOR,E.color),E.headOnly&&y.setValue(dt.PET_HEAD_ONLY,1),E.hasCustomParts&&(y.setValue(dt.PET_CUSTOM_LAYER_IDS,E.customLayerIds),y.setValue(dt.PET_CUSTOM_PARTS_IDS,E.customPartIds),y.setValue(dt.PET_CUSTOM_PALETTE_IDS,E.customPaletteIds)),_&&y.setValue(dt.FIGURE_POSTURE,_)}case _t.ROOM:}O.setDirection(n);var p=O.visualization;if(!p)return f.removeRoomObject(v,g),d;(c>-1||u)&&(u&&""!==u.getLegacyString()?O.logic.processUpdateMessage(new ZR(parseInt(u.getLegacyString()),u)):O.logic.processUpdateMessage(new ZR(c,u)));var m=new ei(s,new Et(-135,30,0),new Et(11,11,5));if(p.update(m,0,!0,!1),h>0)for(var I=0;I<h;)p.update(m,0,!0,!1),I++;var b=p.getImage(a,l);if(d.data=b,d.id=v,!this.isRoomContentTypeLoaded(t)&&r){var T=this._imageCallbacks.get(v.toString());T||(T=[],this._imageCallbacks.set(v.toString(),T)),T.push(r),y.setValue(dt.IMAGE_QUERY_SCALE,s)}else f.removeRoomObject(v,g),this._imageObjectIdBank.freeNumber(v-1),d.id=0;return m.dispose(),d}},{key:"getGenericRoomObjectThumbnail",value:function(t,e,n){if(!this._roomManager)return null;var s=new AR;if(s.id=-1,!this._ready||!t)return s;var r=this._roomManager.getRoomInstance(i.TEMPORARY_ROOM);if(!r&&!(r=this._roomManager.createRoomInstance(i.TEMPORARY_ROOM)))return s;var a=this._thumbnailObjectIdBank.reserveNumber();this.getRoomObjectCategoryForType(t);if(a<0)return s;a++,s.id=a,s.data=null,s.image=null;var o=[t,e].join("_"),u=this._roomContentLoader.getImage(o);if(!u&&n){var c=this._thumbnailCallbacks.get(o);c||(c=[],this._thumbnailCallbacks.set(o,c),this._roomContentLoader.downloadImage(a,t,e,null)),c.push(n)}else u&&(s.image=u),this._thumbnailObjectIdBank.freeNumber(a-1),s.id=0;return s}},{key:"initalizeTemporaryObjectsByType",value:function(t,e){var n=this._roomManager.getRoomInstance(i.TEMPORARY_ROOM);if(n&&this._roomContentLoader){var r=this._roomContentLoader.getCategoryForType(t),a=n.getManager(r),o=null,u=0;if(a&&a.objects.length){var c,h=Object(s.a)(a.objects.getValues());try{for(h.s();!(c=h.n()).done;){var _=c.value;if(_&&_.model&&_.type===t){var l=_.id,d=_.visualization,f=null;if(d){var v=_.model.getValue(dt.IMAGE_QUERY_SCALE);o&&u!==v&&(o.dispose(),o=null),o||(u=v,o=new ei(v,new Et(-135,30,0),new Et(11,11,5))),d.update(o,0,!0,!1),f=d.image}n.removeRoomObject(l,r),this._imageObjectIdBank.freeNumber(l-1);var g=this._imageCallbacks.get(l.toString());if(g){this._imageCallbacks.delete(l.toString());var O,y=Object(s.a)(g);try{for(y.s();!(O=y.n()).done;){var E=O.value;E&&(f?E.imageReady(l,f):E.imageFailed(l))}}catch(p){y.e(p)}finally{y.f()}}}}}catch(p){h.e(p)}finally{h.f()}}o&&o.dispose()}}},{key:"setObjectMoverIconSpriteVisible",value:function(t){var e=this.getActiveRoomInstanceRenderingCanvas();if(e){var n=this.getRenderingCanvasOverlay(e),s=this.getOverlayIconSprite(n,i.OBJECT_ICON_SPRITE);s&&(s.visible=t)}}},{key:"removeObjectMoverIconSprite",value:function(){var t=this.getActiveRoomInstanceRenderingCanvas();if(t){var e=this.getRenderingCanvasOverlay(t);this.removeOverlayIconSprite(e,i.OBJECT_ICON_SPRITE)}}},{key:"getRenderingCanvasOverlay",value:function(t){if(!t)return null;var e=t.master;return e&&e.getChildByName(i.OVERLAY)||null}},{key:"removeOverlayIconSprite",value:function(t,e){if(!t)return!1;for(var i=t.children.length-1;i>=0;){var n=t.getChildAt(i);if(n&&n.name===e){if(t.removeChildAt(i),n.children.length){var s=n.getChildAt(0);s.parent.removeChild(s),s.destroy()}return!0}i--}return!1}},{key:"getOverlayIconSprite",value:function(t,e){if(!t)return null;for(var i=t.children.length-1;i>=0;){var n=t.getChildAt(i);if(n&&n.name===e)return n;i--}return null}},{key:"getRoomObjects",value:function(t,e){if(this._ready){var i=this.getRoomId(t),n=this._roomManager.getRoomInstance(i);if(n)return n.getRoomObjectsForCategory(e)}return[]}},{key:"addObjectToTileMap",value:function(t,e){var i=this.getRoomInstanceData(t).tileObjectMap;i&&i.addRoomObject(e)}},{key:"refreshTileObjectMap",value:function(t,e){var i=this.getRoomInstanceData(t).tileObjectMap;i&&i.populate(this.getRoomObjects(t,_t.FLOOR))}},{key:"getRenderRoomMessage",value:function(t,e){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,r=null;if(!(r=s>-1?this.getRoomInstanceRenderingCanvas(this._activeRoomId,s):this.getActiveRoomInstanceRenderingCanvas()))return null;n&&r.skipSpriteVisibilityChecking();var a=-1;i||null==this._roomSessionManager.getSession(this._activeRoomId)||(a=this._roomSessionManager.getSession(this._activeRoomId).ownRoomIndex);var o=new sN,u=o.getFurniData(t,r,this,a),c=o.getRoomRenderingModifiers(this),h=o.getRoomPlanes(t,r,this,e);return n&&r.resumeSpriteVisibilityChecking(),console.log(u,c,h),null}},{key:"createTextureFromRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;n=e>-1?this.getRoomInstanceRenderingCanvas(this._activeRoomId,e):this.getActiveRoomInstanceRenderingCanvas();return i?Ut.generateTexture(n.master,i):n.getDisplayAsTexture()}},{key:"saveTextureAsScreenshot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;(i=e?new qO:new XO).assignBitmap(t),this._communication.connection.send(i)}},{key:"saveBase64AsScreenshot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;(i=e?new qO:new XO).assignBase64(t),this._communication.connection.send(i)}},{key:"objectsInitialized",value:function(t){var e=this.getRoomIdFromString(t);this.events.dispatchEvent(new VT(VT.OBJECTS_INITIALIZED,e))}},{key:"getRoomId",value:function(t){return t.toString()}},{key:"getRoomIdFromString",value:function(t){if(!t)return-1;var e=t.split("_");return e.length<=0?-1:parseInt(e[0])||0}},{key:"getRoomObjectRoomId",value:function(t){return t&&t.model?t.model.getValue(dt.OBJECT_ROOM_ID):null}},{key:"getRoomObjectAdUrl",value:function(t){return this._roomContentLoader.getRoomObjectAdUrl(t)}},{key:"getPetTypeId",value:function(t){var e=-1;if(t){var i=t.split(" ");i.length>1&&(e=parseInt(i[0]))}return e}},{key:"getPetType",value:function(t){if(!t)return null;var e=t.split(" ");if(e.length>1){var i=parseInt(e[0]);return this._roomContentLoader?this._roomContentLoader.getPetNameForType(i):"pet"}return null}},{key:"isRoomContentTypeLoaded",value:function(t){return!!this._roomContentLoader&&null!==this._roomContentLoader.getCollection(t)}},{key:"getPetColorResult",value:function(t,e){return this._roomContentLoader?this._roomContentLoader.getPetColorResult(t,e):null}},{key:"getPetColorResultsForTag",value:function(t,e){return this._roomContentLoader?this._roomContentLoader.getPetColorResultsForTag(t,e):null}},{key:"deleteRoomObject",value:function(t,e){return!(!this._roomObjectEventHandler||e!==_t.WALL)&&this._roomObjectEventHandler.deleteWallItem(this._activeRoomId,t)}},{key:"connection",get:function(){return this._communication.connection}},{key:"sessionDataManager",get:function(){return this._sessionDataManager},set:function(t){this._sessionDataManager=t}},{key:"roomSessionManager",get:function(){return this._roomSessionManager},set:function(t){this._roomSessionManager=t}},{key:"roomManager",get:function(){return this._roomManager},set:function(t){this._roomManager=t}},{key:"objectEventHandler",get:function(){return this._roomObjectEventHandler}},{key:"roomRendererFactory",get:function(){return this._roomRendererFactory}},{key:"visualizationFactory",get:function(){return this._visualizationFactory}},{key:"logicFactory",get:function(){return this._logicFactory}},{key:"activeRoomId",get:function(){return this._activeRoomId}},{key:"ready",get:function(){return this._ready}},{key:"roomContentLoader",get:function(){return this._roomContentLoader}},{key:"isDecorating",get:function(){if(!this._roomSessionManager)return!1;var t=this._roomSessionManager.getSession(this._activeRoomId);return t&&t.isDecorating||!1}},{key:"useOffsetScrolling",get:function(){return!0}},{key:"selectedAvatarId",get:function(){return this._roomObjectEventHandler?this._roomObjectEventHandler.selectedAvatarId:-1}},{key:"getRoomObjectCount",value:function(t,e){return null==this._roomManager?0:this._roomManager.getRoomInstance(t.toString()).getRoomObjectsForCategory(e).length}}]),i}(w);rN.ROOM_OBJECT_ID=-1,rN.ROOM_OBJECT_TYPE="room",rN.CURSOR_OBJECT_ID=-2,rN.CURSOR_OBJECT_TYPE="tile_cursor",rN.ARROW_OBJECT_ID=-3,rN.ARROW_OBJECT_TYPE="selection_arrow",rN.OVERLAY="overlay",rN.OBJECT_ICON_SPRITE="object_icon_sprite",rN.DRAG_THRESHOLD=15,rN.TEMPORARY_ROOM="temporary_room";var aN=Object(a.a)((function t(){Object(r.a)(this,t)}));aN.KICKED_OUT_OF_ROOM=4008,aN.STRIP_LOCKED_FOR_TRADING=-13001;var oN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(r.a)(this,i),(s=e.call(this,t,n))._message=void 0,s._message=a,s}return Object(a.a)(i,[{key:"message",get:function(){return this._message}}]),i}(QT);oN.RSEME_KICKED="RSEME_KICKED",oN.RSEME_PETS_FORBIDDEN_IN_HOTEL="RSEME_PETS_FORBIDDEN_IN_HOTEL",oN.RSEME_PETS_FORBIDDEN_IN_FLAT="RSEME_PETS_FORBIDDEN_IN_FLAT",oN.RSEME_MAX_PETS="RSEME_MAX_PETS",oN.RSEME_MAX_NUMBER_OF_OWN_PETS="RSEME_MAX_NUMBER_OF_OWN_PETS",oN.RSEME_NO_FREE_TILES_FOR_PET="RSEME_NO_FREE_TILES_FOR_PET",oN.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET="RSEME_SELECTED_TILE_NOT_FREE_FOR_PET",oN.RSEME_BOTS_FORBIDDEN_IN_HOTEL="RSEME_BOTS_FORBIDDEN_IN_HOTEL",oN.RSEME_BOTS_FORBIDDEN_IN_FLAT="RSEME_BOTS_FORBIDDEN_IN_FLAT",oN.RSEME_BOT_LIMIT_REACHED="RSEME_BOT_LIMIT_REACHED",oN.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT="RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT",oN.RSEME_BOT_NAME_NOT_ACCEPTED="RSEME_BOT_NAME_NOT_ACCEPTED";var uN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._connection=void 0,s._listener=void 0,s._roomId=void 0,s._connection=t,s._listener=n,s._roomId=0,s}return Object(a.a)(i,[{key:"onDispose",value:function(){this._connection=null,this._listener=null}},{key:"setRoomId",value:function(t){this._roomId=t}},{key:"connection",get:function(){return this._connection}},{key:"listener",get:function(){return this._listener}},{key:"roomId",get:function(){return this._roomId}}]),i}(m),cN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Bl(s.onRoomGenericError.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomGenericError",value:function(t){if(t instanceof Bl){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=null;e.errorCode===aN.KICKED_OUT_OF_ROOM&&(n=oN.RSEME_KICKED)&&0!=n.length&&this.listener.events.dispatchEvent(new oN(n,i))}}}}}]),i}(uN),hN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t,n))._id=-1,a._headline=void 0,a._summary=void 0,a._numQuestions=0,a._startMessage="",a._endMessage="",a._questionArray=null,a._npsPoll=!1,a._id=s,a}return Object(a.a)(i,[{key:"id",get:function(){return this._id}},{key:"headline",get:function(){return this._headline},set:function(t){this._headline=t}},{key:"summary",get:function(){return this._summary},set:function(t){this._summary=t}},{key:"numQuestions",get:function(){return this._numQuestions},set:function(t){this._numQuestions=t}},{key:"startMessage",get:function(){return this._startMessage},set:function(t){this._startMessage=t}},{key:"endMessage",get:function(){return this._endMessage},set:function(t){this._endMessage=t}},{key:"questionArray",get:function(){return this._questionArray},set:function(t){this._questionArray=t}},{key:"npsPoll",get:function(){return this._npsPoll},set:function(t){this._npsPoll=t}}]),i}(QT);hN.OFFER="RSPE_POLL_OFFER",hN.ERROR="RSPE_POLL_ERROR",hN.CONTENT="RSPE_POLL_CONTENT";var _N=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new pv(s.onPollContentsEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Iv(s.onPollOfferEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new mv(s.onPollErrorEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onPollContentsEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=new hN(hN.CONTENT,e,i.id);n.startMessage=i.startMessage,n.endMessage=i.endMessage,n.numQuestions=i.numQuestions,n.questionArray=i.questionArray,n.npsPoll=i.npsPoll,this.listener.events.dispatchEvent(n)}}}}},{key:"onPollOfferEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=new hN(hN.OFFER,e,i.id);n.summary=i.headline,n.summary=i.summary,this.listener.events.dispatchEvent(n)}}}}},{key:"onPollErrorEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e)if(t.getParser()){var i=new hN(hN.ERROR,e,-1);i.headline="???",i.summary="???",this.listener.events.dispatchEvent(i)}}}}]),i}(uN),lN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){var u,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,_=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1;return Object(r.a)(this,i),(u=e.call(this,t,n))._objectId=void 0,u._message=void 0,u._chatType=void 0,u._links=void 0,u._extraParam=void 0,u._style=void 0,u._objectId=s,u._message=a,u._chatType=o,u._links=h,u._extraParam=_,u._style=c,u}return Object(a.a)(i,[{key:"objectId",get:function(){return this._objectId}},{key:"message",get:function(){return this._message}},{key:"chatType",get:function(){return this._chatType}},{key:"links",get:function(){return this._links}},{key:"extraParam",get:function(){return this._extraParam}},{key:"style",get:function(){return this._style}}]),i}(QT);lN.CHAT_EVENT="RSCE_CHAT_EVENT",lN.FLOOD_EVENT="RSCE_FLOOD_EVENT",lN.CHAT_TYPE_SPEAK=0,lN.CHAT_TYPE_WHISPER=1,lN.CHAT_TYPE_SHOUT=2,lN.CHAT_TYPE_RESPECT=3,lN.CHAT_TYPE_PETRESPECT=4,lN.CHAT_TYPE_HAND_ITEM_RECEIVED=5,lN.CHAT_TYPE_PETTREAT=6,lN.CHAT_TYPE_PETREVIVE=7,lN.CHAT_TYPE_PET_REBREED_FERTILIZE=8,lN.CHAT_TYPE_PET_SPEED_FERTILIZE=9,lN.CHAT_TYPE_MUTE_REMAINING=10;var dN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Hg(s.onRoomUnitChatEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Vg(s.onRoomUnitChatEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new zg(s.onRoomUnitChatEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Zg(s.onRoomUnitHandItemReceivedEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new UO(s.onRespectReceivedEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new DT(s.onPetRespectNoficationEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new CO(s.onPetSupplementedNotificationEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Bg(s.onFloodControlEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Gg(s.onRemainingMuteEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomUnitChatEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=lN.CHAT_TYPE_SPEAK;t instanceof Vg?n=lN.CHAT_TYPE_SHOUT:t instanceof zg&&(n=lN.CHAT_TYPE_WHISPER);var s=new lN(lN.CHAT_EVENT,e,i.roomIndex,i.message,n,i.bubble);this.listener.events.dispatchEvent(s)}}}}},{key:"onRoomUnitHandItemReceivedEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();i&&this.listener.events.dispatchEvent(new lN(lN.CHAT_EVENT,e,i.giverUserId,"",lN.CHAT_TYPE_HAND_ITEM_RECEIVED,PS.GENERIC,null,i.handItemType))}}}},{key:"onRespectReceivedEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=e.userDataManager.getUserData(i.userId);n&&this.listener.events.dispatchEvent(new lN(lN.CHAT_EVENT,e,n.roomIndex,"",lN.CHAT_TYPE_RESPECT,PS.GENERIC))}}}}},{key:"onPetRespectNoficationEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=e.userDataManager.getPetData(i.petData.id);if(n){var s=lN.CHAT_TYPE_PETRESPECT;i.isTreat&&(s=lN.CHAT_TYPE_PETTREAT),this.listener.events.dispatchEvent(new lN(lN.CHAT_EVENT,e,n.roomIndex,"",s,PS.GENERIC))}}}}}},{key:"onPetSupplementedNotificationEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=e.userDataManager.getPetData(i.petId);if(n){var s=-1,r=e.userDataManager.getUserData(i.userId);r&&(s=r.roomIndex);var a=lN.CHAT_TYPE_PETREVIVE;switch(i.supplementType){case LO.REVIVE:a=lN.CHAT_TYPE_PETREVIVE;break;case LO.REBREED_FERTILIZER:a=lN.CHAT_TYPE_PET_REBREED_FERTILIZE;break;case LO.SPEED_FERTILIZER:a=lN.CHAT_TYPE_PET_SPEED_FERTILIZE}this.listener.events.dispatchEvent(new lN(lN.CHAT_EVENT,e,n.roomIndex,"",a,PS.GENERIC,null,s))}}}}}},{key:"onFloodControlEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=i.seconds;this.listener.events.dispatchEvent(new lN(lN.FLOOD_EVENT,e,-1,n.toString(),0,0))}}}}},{key:"onRemainingMuteEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();i&&this.listener.events.dispatchEvent(new lN(lN.CHAT_EVENT,e,e.ownRoomIndex,"",lN.CHAT_TYPE_MUTE_REMAINING,PS.GENERIC,null,i.seconds))}}}}]),i}(uN),fN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(QT);fN.RSDUE_ALLOW_PETS="RSDUE_ALLOW_PETS";var vN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Kv(s.onGetGuestRoomResultEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onGetGuestRoomResultEvent",value:function(t){if(t instanceof Kv){var e=t.getParser();if(e&&!e.roomForward){var i=this.listener.getSession(this.roomId);if(i){var n=e.data;i.tradeMode=n.tradeMode,i.isGuildRoom=0!==n.habboGroupId,i.doorMode=n.doorMode,i.allowPets=n.allowPets,i.moderationSettings=e.moderation,this.listener.events.dispatchEvent(new fN(fN.RSDUE_ALLOW_PETS,i)),this.listener.events.dispatchEvent(new QT(QT.ROOM_DATA,i))}}}}}]),i}(uN),gN=function(){function t(e,i,n,s){Object(r.a)(this,t),this._id=void 0,this._type=void 0,this._color=void 0,this._brightness=void 0,this._id=e,this._type=i,this._color=n,this._brightness=s}return Object(a.a)(t,[{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}}]),t}(),ON=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t,n))._selectedPresetId=0,s._presets=void 0,s._presets=[],s}return Object(a.a)(i,[{key:"storePreset",value:function(t,e,i,n){this._presets[t-1]=new gN(t,e,i,n)}},{key:"getPreset",value:function(t){return t<0||t>=this._presets.length?null:this._presets[t]}},{key:"presetCount",get:function(){return this._presets.length}},{key:"selectedPresetId",get:function(){return this._selectedPresetId},set:function(t){this._selectedPresetId=t}}]),i}(QT);ON.ROOM_DIMMER_PRESETS="RSDPE_PRESETS";var yN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new pg(s.onRoomDimmerPresets.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomDimmerPresets",value:function(t){if(t){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=new ON(ON.ROOM_DIMMER_PRESETS,i);n.selectedPresetId=e.selectedPresetId;for(var s=0;s<e.presetCount;){var r=e.getPreset(s);r&&n.storePreset(r.id,r.type,r.color,r.brightness),s++}this.listener&&this.listener.events.dispatchEvent(n)}}}}}]),i}(uN),EN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Gv(s.onRoomRightsEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Bv(s.onRoomRightsClearEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Hv(s.onRoomRightsOwnerEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomRightsEvent",value:function(t){if(t instanceof Gv){var e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(t.getParser().controllerLevel)}}},{key:"onRoomRightsClearEvent",value:function(t){if(t instanceof Bv){var e=this.listener.getSession(this.roomId);e&&e.setControllerLevel(Zu.NONE)}}},{key:"onRoomRightsOwnerEvent",value:function(t){if(t instanceof Hv){var e=this.listener.getSession(this.roomId);e&&e.setRoomOwner()}}}]),i}(uN),pN=i(96),mN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u,c,h,_){var l;return Object(r.a)(this,i),(l=e.call(this,t,n))._classId=0,l._itemType="",l._productCode=void 0,l._placedItemId=0,l._placedItemType="",l._placedInRoom=void 0,l._petFigureString=void 0,l._classId=s,l._itemType=a,l._productCode=o,l._placedItemId=u,l._placedItemType=c,l._placedInRoom=h,l._petFigureString=_,l}return Object(a.a)(i,[{key:"classId",get:function(){return this._classId}},{key:"itemType",get:function(){return this._itemType}},{key:"productCode",get:function(){return this._productCode}},{key:"placedItemId",get:function(){return this._placedItemId}},{key:"placedInRoom",get:function(){return this._placedInRoom}},{key:"placedItemType",get:function(){return this._placedItemType}},{key:"petFigureString",get:function(){return this._petFigureString}}]),i}(QT);mN.RSPE_PRESENT_OPENED="RSPE_PRESENT_OPENED";var IN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t?(t.addMessageEvent(new cf(s.onFurnitureGiftOpenedEvent.bind(Object(l.a)(s)))),s):Object(pN.a)(s)}return Object(a.a)(i,[{key:"onFurnitureGiftOpenedEvent",value:function(t){if(t){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);i&&this.listener&&this.listener.events&&this.listener.events.dispatchEvent(new mN(mN.RSPE_PRESENT_OPENED,i,e.classId,e.itemType,e.productCode,e.placedItemId,e.placedItemType,e.placedInRoom,e.petFigureString))}}}}]),i}(uN),bN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t,n))._userName="",a._userName=s,a}return Object(a.a)(i,[{key:"userName",get:function(){return this._userName}}]),i}(QT);bN.DOORBELL="RSDE_DOORBELL",bN.RSDE_REJECTED="RSDE_REJECTED",bN.RSDE_ACCEPTED="RSDE_ACCEPTED";var TN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i)}(QT);TN.SPECTATOR_MODE="RSSME_SPECTATOR_MODE";var RN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new zv(s.onRoomEnterEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Lg(s.onRoomReadyMessageEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new ml(s.onDesktopViewEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new wv(s.onRoomDoorbellAcceptedEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new xv(s.onRoomDoorbellRejectedEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new NT(s.onYouAreSpectatorMessageEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomEnterEvent",value:function(t){t instanceof zv&&this.listener&&this.listener.sessionUpdate(this.roomId,i.RS_CONNECTED)}},{key:"onRoomReadyMessageEvent",value:function(t){if(t instanceof Lg){var e=this.roomId,n=t.getParser().roomId;this.listener&&(this.listener.sessionReinitialize(e,n),this.listener.sessionUpdate(this.roomId,i.RS_READY))}}},{key:"onDesktopViewEvent",value:function(t){t instanceof ml&&this.listener&&this.listener.sessionUpdate(this.roomId,i.RS_DISCONNECTED)}},{key:"onRoomDoorbellAcceptedEvent",value:function(t){if(t instanceof wv&&this.listener){var e=t.getParser();if(e){var i=e.userName;if(i&&i.length){if(this.listener.events){var n=this.listener.getSession(this.roomId);if(!n)return;this.listener.events.dispatchEvent(new bN(bN.RSDE_ACCEPTED,n,i))}}else this.connection.send(new mb(this.roomId))}}}},{key:"onRoomDoorbellRejectedEvent",value:function(t){if(t instanceof xv&&this.listener){var e=t.getParser();if(e){var n=e.userName;if(n&&n.length){if(this.listener.events){var s=this.listener.getSession(this.roomId);if(!s)return;this.listener.events.dispatchEvent(new bN(bN.RSDE_REJECTED,s,n))}}else this.listener.sessionUpdate(this.roomId,i.RS_DISCONNECTED)}}}},{key:"onYouAreSpectatorMessageEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(!e)return;e.isSpectator=!0,this.listener.events.dispatchEvent(new TN(TN.SPECTATOR_MODE,e))}}}]),i}(uN);RN.RS_CONNECTED="RS_CONNECTED",RN.RS_READY="RS_READY",RN.RS_DISCONNECTED="RS_DISCONNECTED";var kN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,i.MYSTERY_BOX_KEYS_UPDATE))._boxColor=void 0,s._keyColor=void 0,s._boxColor=t,s._keyColor=n,s}return Object(a.a)(i,[{key:"boxColor",get:function(){return this._boxColor}},{key:"keyColor",get:function(){return this._keyColor}}]),i}(E.a);kN.MYSTERY_BOX_KEYS_UPDATE="mbke_update",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){return Object(r.a)(this,i),e.call(this,i.PERKS_UPDATED)}return Object(a.a)(i)}(E.a)).PERKS_UPDATED="PUE_perks_updated",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,i.CONFIRM_PET_BREEDING,t))._nestId=void 0,c._pet1=void 0,c._pet2=void 0,c._rarityCategories=void 0,c._resultPetTypeId=void 0,c._nestId=n,c._pet1=s,c._pet2=a,c._rarityCategories=o,c._resultPetTypeId=u,c}return Object(a.a)(i,[{key:"rarityCategories",get:function(){return this._rarityCategories}},{key:"nestId",get:function(){return this._nestId}},{key:"pet1",get:function(){return this._pet1}},{key:"pet2",get:function(){return this._pet2}},{key:"resultPetTypeId",get:function(){return this._resultPetTypeId}}]),i}(QT)).CONFIRM_PET_BREEDING="RSPFUE_CONFIRM_PET_BREEDING",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.RSPFUE_CONFIRM_PET_BREEDING_RESULT,t))._breedingNestStuffId=void 0,a._result=void 0,a._breedingNestStuffId=n,a._result=s,a}return Object(a.a)(i,[{key:"breedingNestStuffId",get:function(){return this._breedingNestStuffId}},{key:"result",get:function(){return this._result}}]),i}(QT)).RSPFUE_CONFIRM_PET_BREEDING_RESULT="RSPFUE_CONFIRM_PET_BREEDING_RESULT";var AN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.RSDE_DANCE,t))._roomIndex=void 0,a._danceId=void 0,a._roomIndex=n,a._danceId=s,a}return Object(a.a)(i,[{key:"roomIndex",get:function(){return this._roomIndex}},{key:"danceId",get:function(){return this._danceId}}]),i}(QT);AN.RSDE_DANCE="RSDE_DANCE";var SN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o){var u;return Object(r.a)(this,i),(u=e.call(this,i.FAVOURITE_GROUP_UPDATE,t))._roomIndex=void 0,u._habboGroupId=void 0,u._habboGroupName=void 0,u._status=void 0,u._roomIndex=n,u._habboGroupId=s,u._habboGroupName=o,u._status=a,u}return Object(a.a)(i,[{key:"roomIndex",get:function(){return this._roomIndex}},{key:"habboGroupId",get:function(){return this._habboGroupId}},{key:"habboGroupName",get:function(){return this._habboGroupName}},{key:"status",get:function(){return this._status}}]),i}(QT);SN.FAVOURITE_GROUP_UPDATE="RSFGUE_FAVOURITE_GROUP_UPDATE";var jN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,i.RSFRE_FRIEND_REQUEST,t))._requestId=0,o._userId=0,o._userName=void 0,o._requestId=n,o._userId=s,o._userName=a,o}return Object(a.a)(i,[{key:"requestId",get:function(){return this._requestId}},{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}}]),i}(QT);jN.RSFRE_FRIEND_REQUEST="RSFRE_FRIEND_REQUEST",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.NEST_BREEDING_SUCCESS,t))._rarityCategory=void 0,a._petId=void 0,a._petId=n,a._rarityCategory=s,a}return Object(a.a)(i,[{key:"rarityCategory",get:function(){return this._rarityCategory}},{key:"petId",get:function(){return this._petId}}]),i}(QT)).NEST_BREEDING_SUCCESS="RSPFUE_NEST_BREEDING_SUCCESS",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,i.PET_BREEDING,t))._state=void 0,o._ownPetId=void 0,o._otherPetId=void 0,o._state=n,o._ownPetId=s,o._otherPetId=a,o}return Object(a.a)(i,[{key:"state",get:function(){return this._state}},{key:"ownPetId",get:function(){return this._ownPetId}},{key:"otherPetId",get:function(){return this._otherPetId}}]),i}(QT)).PET_BREEDING="RSPFUE_PET_BREEDING",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.PET_BREEDING_RESULT,t))._resultData=void 0,a._otherResultData=void 0,a._resultData=n,a._otherResultData=s,a}return Object(a.a)(i,[{key:"resultData",get:function(){return this._resultData}},{key:"otherResultData",get:function(){return this._otherResultData}}]),i}(QT)).PET_BREEDING_RESULT="RSPFUE_PET_BREEDING_RESULT",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o;return Object(r.a)(this,i),(o=e.call(this,i.PET_COMMANDS,t))._petId=void 0,o._allCommandIds=void 0,o._enabledCommandIds=void 0,o._petId=n,o._allCommandIds=s,o._enabledCommandIds=a,o}return Object(a.a)(i,[{key:"id",get:function(){return this._petId}},{key:"commands",get:function(){return this._allCommandIds}},{key:"enabledCommands",get:function(){return this._enabledCommandIds}}]),i}(QT)).PET_COMMANDS="RSPIUE_ENABLED_PET_COMMANDS";var NN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.PET_FIGURE_UPDATE,t))._petId=void 0,a._figure=void 0,a._petId=n,a._figure=s,a}return Object(a.a)(i,[{key:"id",get:function(){return this._petId}},{key:"figure",get:function(){return this._figure}}]),i}(QT);NN.PET_FIGURE_UPDATE="RSPFUE_PET_FIGURE_UPDATE";var DN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,i.PET_INFO,t))._petInfo=void 0,s._petInfo=n,s}return Object(a.a)(i,[{key:"petInfo",get:function(){return this._petInfo}}]),i}(QT);DN.PET_INFO="RSPIUE_PET_INFO",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.PET_LEVEL_UPDATE,t))._petId=void 0,a._level=void 0,a._petId=n,a._level=s,a}return Object(a.a)(i,[{key:"petId",get:function(){return this._petId}},{key:"level",get:function(){return this._level}}]),i}(QT)).PET_LEVEL_UPDATE="RSPLUE_PET_LEVEL_UPDATE";var MN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n))._objectId=-1,c._figureData=void 0,c._nameValidationStatus=0,c._nameValidationInfo=null,c._objectId=s,c._figureData=a,c._nameValidationStatus=o,c._nameValidationInfo=u,c}return Object(a.a)(i,[{key:"objectId",get:function(){return this._objectId}},{key:"figureData",get:function(){return this._figureData}},{key:"nameValidationStatus",get:function(){return this._nameValidationStatus}},{key:"nameValidationInfo",get:function(){return this._nameValidationInfo}}]),i}(QT);MN.RSOPPE_OPEN_PET_PACKAGE_REQUESTED="RSOPPE_OPEN_PET_PACKAGE_REQUESTED",MN.RSOPPE_OPEN_PET_PACKAGE_RESULT="RSOPPE_OPEN_PET_PACKAGE_RESULT";var CN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,i.PET_STATUS_UPDATE,t))._petId=void 0,c._canBreed=void 0,c._canHarvest=void 0,c._canRevive=void 0,c._hasBreedingPermission=void 0,c._petId=n,c._canBreed=s,c._canHarvest=a,c._canRevive=o,c._hasBreedingPermission=u,c}return Object(a.a)(i,[{key:"petId",get:function(){return this._petId}},{key:"canBreed",get:function(){return this._canBreed}},{key:"canHarvest",get:function(){return this._canHarvest}},{key:"canRevive",get:function(){return this._canRevive}},{key:"hasBreedingPermission",get:function(){return this._hasBreedingPermission}}]),i}(QT);CN.PET_STATUS_UPDATE="RSPFUE_PET_STATUS_UPDATE";var LN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(r.a)(this,i),(a=e.call(this,i.QUEUE_STATUS,t))._name=void 0,a._target=void 0,a._queues=void 0,a._isActive=void 0,a._activeQueue=void 0,a._name=n,a._target=s,a._queues=new Map,a._isActive=o,a}return Object(a.a)(i,[{key:"isActive",get:function(){return this._isActive}},{key:"queueSetName",get:function(){return this._name}},{key:"queueSetTarget",get:function(){return this._target}},{key:"queueTypes",get:function(){return Array.from(this._queues.keys())}},{key:"getQueueSize",value:function(t){return this._queues.get(t)}},{key:"addQueue",value:function(t,e){this._queues.set(t,e)}}]),i}(QT);LN.QUEUE_STATUS="RSQE_QUEUE_STATUS",LN.QUEUE_TYPE_CLUB="c",LN.QUEUE_TYPE_NORMAL="d",LN.QUEUE_TARGET_VISITOR=2,LN.QUEUE_TARGET_SPECTATOR=1;var UN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,i.RSUBE_BADGES,t))._userId=0,a._badges=void 0,a._badges=[],a._userId=n,a._badges=s,a}return Object(a.a)(i,[{key:"userId",get:function(){return this._userId}},{key:"badges",get:function(){return this._badges}}]),i}(QT);UN.RSUBE_BADGES="RSUBE_BADGES";var PN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,i.USER_DATA_UPDATED,t))._addedUsers=void 0,s._addedUsers=n,s}return Object(a.a)(i,[{key:"addedUsers",get:function(){return this._addedUsers}}]),i}(QT);PN.USER_DATA_UPDATED="RMUDUE_USER_DATA_UPDATED";var wN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,i.USER_FIGURE,t))._roomIndex=0,c._figure="",c._gender="",c._customInfo="",c._achievementScore=void 0,c._roomIndex=n,c._figure=s,c._gender=a,c._customInfo=o,c._achievementScore=u,c}return Object(a.a)(i,[{key:"roomIndex",get:function(){return this._roomIndex}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"customInfo",get:function(){return this._customInfo}},{key:"activityPoints",get:function(){return this._achievementScore}}]),i}(QT);wN.USER_FIGURE="RSUBE_FIGURE",(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,i.UTRE_USER_TAGS_RECEIVED))._userId=void 0,s._tags=void 0,s._userId=t,s._tags=n,s}return Object(a.a)(i,[{key:"userId",get:function(){return this._userId}},{key:"tags",get:function(){return this._tags}}]),i}(E.a)).UTRE_USER_TAGS_RECEIVED="UTRE_USER_TAGS_RECEIVED";var FN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(r.a)(this,i),(o=e.call(this,t,n))._question="",o._choices=void 0,o._SafeStr_7651=void 0,o._SafeStr_7654=0,o._choices=[],o._SafeStr_7651=[],o._question=s,o._choices=a,o._SafeStr_7651=u,null==o._SafeStr_7651&&(o._SafeStr_7651=[]),o._SafeStr_7654=c,o}return Object(a.a)(i,[{key:"question",get:function(){return this._question}},{key:"choices",get:function(){return this._choices.slice()}},{key:"_SafeStr_4173",get:function(){return this._SafeStr_7651.slice()}},{key:"_SafeStr_4174",get:function(){return this._SafeStr_7654}}]),i}(QT);FN.VOTE_QUESTION="RSPE_VOTE_QUESTION",FN.VOTE_RESULT="RSPE_VOTE_RESULT";var xN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object(r.a)(this,i),(s=e.call(this,t,n))._id=-1,s._pollType=null,s._pollId=-1,s._questionId=-1,s._duration=-1,s._question=null,s._userId=-1,s._value=void 0,s._answerCounts=void 0,s._id=a,s}return Object(a.a)(i,[{key:"id",get:function(){return this._id}},{key:"pollType",get:function(){return this._pollType},set:function(t){this._pollType=t}},{key:"pollId",get:function(){return this._pollId},set:function(t){this._pollId=t}},{key:"questionId",get:function(){return this._questionId},set:function(t){this._questionId=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"question",get:function(){return this._question},set:function(t){this._question=t}},{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"answerCounts",get:function(){return this._answerCounts},set:function(t){this._answerCounts=t}}]),i}(QT);xN.QUESTION="RWPUW_NEW_QUESTION",xN.FINISHED="RWPUW_QUESION_FINSIHED",xN.ANSWERED="RWPUW_QUESTION_ANSWERED";var BN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,i.UPDATED))._uiFlags=void 0,n._uiFlags=t,n}return Object(a.a)(i,[{key:"uiFlags",get:function(){return this._uiFlags}}]),i}(E.a);BN.UPDATED="APUE_UPDATED";var GN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,i.UNUE_NAME_UPDATED))._name=void 0,n._name=t,n}return Object(a.a)(i,[{key:"name",get:function(){return this._name}}]),i}(E.a);GN.UNUE_NAME_UPDATED="unue_name_updated";var HN=function(){function t(){Object(r.a)(this,t),this._id=void 0,this._level=void 0,this._maximumLevel=void 0,this._experience=void 0,this._levelExperienceGoal=void 0,this._energy=void 0,this._maximumEnergy=void 0,this._happyness=void 0,this._maximumHappyness=void 0,this._ownerId=void 0,this._ownerName=void 0,this._respect=void 0,this._age=void 0,this._unknownRarity=void 0,this._saddle=void 0,this._rider=void 0,this._breedable=void 0,this._skillThresholds=void 0,this._publiclyRideable=void 0,this._fullyGrown=void 0,this._dead=void 0,this._maximumTimeToLive=void 0,this._remainingTimeToLive=void 0,this._remainingGrowTime=void 0,this._rarityLevel=void 0,this._publiclyBreedable=void 0,this._adultLevel=7}return Object(a.a)(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"level",get:function(){return this._level},set:function(t){this._level=t}},{key:"maximumLevel",get:function(){return this._maximumLevel},set:function(t){this._maximumLevel=t}},{key:"experience",get:function(){return this._experience},set:function(t){this._experience=t}},{key:"levelExperienceGoal",get:function(){return this._levelExperienceGoal},set:function(t){this._levelExperienceGoal=t}},{key:"energy",get:function(){return this._energy},set:function(t){this._energy=t}},{key:"maximumEnergy",get:function(){return this._maximumEnergy},set:function(t){this._maximumEnergy=t}},{key:"happyness",get:function(){return this._happyness},set:function(t){this._happyness=t}},{key:"maximumHappyness",get:function(){return this._maximumHappyness},set:function(t){this._maximumHappyness=t}},{key:"ownerId",get:function(){return this._ownerId},set:function(t){this._ownerId=t}},{key:"ownerName",get:function(){return this._ownerName},set:function(t){this._ownerName=t}},{key:"respect",get:function(){return this._respect},set:function(t){this._respect=t}},{key:"age",get:function(){return this._age},set:function(t){this._age=t}},{key:"unknownRarity",get:function(){return this._unknownRarity},set:function(t){this._unknownRarity=t}},{key:"saddle",get:function(){return this._saddle},set:function(t){this._saddle=t}},{key:"rider",get:function(){return this._rider},set:function(t){this._rider=t}},{key:"skillTresholds",get:function(){return this._skillThresholds},set:function(t){this._skillThresholds=t}},{key:"publiclyRideable",get:function(){return this._publiclyRideable},set:function(t){this._publiclyRideable=t}},{key:"breedable",get:function(){return this._breedable},set:function(t){this._breedable=t}},{key:"fullyGrown",get:function(){return this._fullyGrown},set:function(t){this._fullyGrown=t}},{key:"dead",get:function(){return this._dead},set:function(t){this._dead=t}},{key:"rarityLevel",get:function(){return this._rarityLevel},set:function(t){this._rarityLevel=t}},{key:"maximumTimeToLive",get:function(){return this._maximumTimeToLive},set:function(t){this._maximumTimeToLive=t}},{key:"remainingTimeToLive",get:function(){return this._remainingTimeToLive},set:function(t){this._remainingTimeToLive=t}},{key:"remainingGrowTime",get:function(){return this._remainingGrowTime},set:function(t){this._remainingGrowTime=t}},{key:"publiclyBreedable",get:function(){return this._publiclyBreedable},set:function(t){this._publiclyBreedable=t}},{key:"adultLevel",get:function(){return this._adultLevel}}]),t}(),VN=function(){function t(e){Object(r.a)(this,t),this._roomIndex=-1,this._name="",this._type=0,this._sex="",this._figure="",this._custom="",this._activityPoints=void 0,this._webID=0,this._groupID=0,this._groupStatus=0,this._groupName="",this._ownerId=0,this._ownerName="",this._petLevel=0,this._rarityLevel=0,this._hasSaddle=void 0,this._isRiding=void 0,this._canBreed=void 0,this._canHarvest=void 0,this._canRevive=void 0,this._hasBreedingPermission=void 0,this._botSkills=void 0,this._isModerator=void 0,this._roomIndex=e}return Object(a.a)(t,[{key:"roomIndex",get:function(){return this._roomIndex}},{key:"activityPoints",get:function(){return this._activityPoints},set:function(t){this._activityPoints=t}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"sex",get:function(){return this._sex},set:function(t){this._sex=t}},{key:"figure",get:function(){return this._figure},set:function(t){this._figure=t}},{key:"custom",get:function(){return this._custom},set:function(t){this._custom=t}},{key:"webID",get:function(){return this._webID},set:function(t){this._webID=t}},{key:"groupId",get:function(){return this._groupID},set:function(t){this._groupID=t}},{key:"groupName",get:function(){return this._groupName},set:function(t){this._groupName=t}},{key:"groupStatus",get:function(){return this._groupStatus},set:function(t){this._groupStatus=t}},{key:"ownerId",get:function(){return this._ownerId},set:function(t){this._ownerId=t}},{key:"ownerName",get:function(){return this._ownerName},set:function(t){this._ownerName=t}},{key:"rarityLevel",get:function(){return this._rarityLevel},set:function(t){this._rarityLevel=t}},{key:"hasSaddle",get:function(){return this._hasSaddle},set:function(t){this._hasSaddle=t}},{key:"isRiding",get:function(){return this._isRiding},set:function(t){this._isRiding=t}},{key:"canBreed",get:function(){return this._canBreed},set:function(t){this._canBreed=t}},{key:"canHarvest",get:function(){return this._canHarvest},set:function(t){this._canHarvest=t}},{key:"canRevive",get:function(){return this._canRevive},set:function(t){this._canRevive=t}},{key:"hasBreedingPermission",get:function(){return this._hasBreedingPermission},set:function(t){this._hasBreedingPermission=t}},{key:"petLevel",get:function(){return this._petLevel},set:function(t){this._petLevel=t}},{key:"botSkills",get:function(){return this._botSkills},set:function(t){this._botSkills=t}},{key:"isModerator",get:function(){return this._isModerator},set:function(t){this._isModerator=t}}]),t}(),zN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Xg(s.onRoomUnitEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new $g(s.onRoomUnitInfoEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new eO(s.onRoomUnitRemoveEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Wg(s.onRoomUnitDanceEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new EO(s.onUserCurrentBadgesEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Fv(s.onRoomDoorbellEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new mO(s.onUserNameChangeMessageEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Pl(s.onNewFriendRequestEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Fg(s.onPetInfoEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new jT(s.onPetStatusUpdateEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new wg(s.onPetFigureUpdateEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Ov(s.onPetPlacingError.bind(Object(l.a)(s)))),t.addMessageEvent(new hv(s.onBotError.bind(Object(l.a)(s)))),t.addMessageEvent(new ST(s.onFavoriteMembershipUpdateMessageEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onRoomUnitEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser().users,n=[];if(i&&i.length){var r,a=Object(s.a)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o){var u=new VN(o.roomIndex);u.name=o.name,u.custom=o.custom,u.activityPoints=o.activityPoints,u.figure=o.figure,u.type=o.userType,u.webID=o.webID,u.groupId=o.groupID,u.groupName=o.groupName,u.groupStatus=o.groupStatus,u.sex=o.sex,u.ownerId=o.ownerId,u.ownerName=o.ownerName,u.rarityLevel=o.rarityLevel,u.hasSaddle=o.hasSaddle,u.isRiding=o.isRiding,u.canBreed=o.canBreed,u.canHarvest=o.canHarvest,u.canRevive=o.canRevive,u.hasBreedingPermission=o.hasBreedingPermission,u.petLevel=o.petLevel,u.botSkills=o.botSkills,u.isModerator=o.isModerator,e.userDataManager.getUserData(o.roomIndex)||n.push(u),e.userDataManager.updateUserData(u)}}}catch(c){a.e(c)}finally{a.f()}}this.listener.events.dispatchEvent(new PN(e,n))}}}},{key:"onRoomUnitInfoEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();i&&(e.userDataManager.updateFigure(i.unitId,i.figure,i.gender,!1,!1),e.userDataManager.updateMotto(i.unitId,i.motto),e.userDataManager.updateAchievementScore(i.unitId,i.achievementScore),this.listener.events.dispatchEvent(new wN(e,i.unitId,i.figure,i.gender,i.motto,i.achievementScore)))}}}},{key:"onRoomUnitRemoveEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);e&&e.userDataManager.removeUserData(t.getParser().unitId)}}},{key:"onRoomUnitDanceEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);i&&this.listener.events.dispatchEvent(new AN(i,e.unitId,e.danceId))}}}},{key:"onUserCurrentBadgesEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);i&&(i.userDataManager.setUserBadges(e.userId,e.badges),this.listener.events.dispatchEvent(new UN(i,e.userId,e.badges)))}}}},{key:"onRoomDoorbellEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=e.userName;if(i&&i.length){var n=this.listener.getSession(this.roomId);n&&this.listener.events.dispatchEvent(new bN(bN.DOORBELL,n,i))}}}}},{key:"onUserNameChangeMessageEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);i&&i.userDataManager.updateName(e.id,e.newName)}}}},{key:"onNewFriendRequestEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=e.request;this.listener.events.dispatchEvent(new jN(i,n.requestId,n.requesterUserId,n.requesterName))}}}}},{key:"onPetInfoEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=new HN;n.id=e.id,n.level=e.level,n.maximumLevel=e.maximumLevel,n.experience=e.experience,n.levelExperienceGoal=e.levelExperienceGoal,n.energy=e.energy,n.maximumEnergy=e.maximumEnergy,n.happyness=e.happyness,n.maximumHappyness=e.maximumHappyness,n.ownerId=e.ownerId,n.ownerName=e.ownerName,n.respect=e.respect,n.age=e.age,n.unknownRarity=e.unknownRarity,n.saddle=e.saddle,n.rider=e.rider,n.breedable=e.breedable,n.fullyGrown=e.fullyGrown,n.rarityLevel=e.rarityLevel,n.dead=e.dead,n.skillTresholds=e.skillTresholds,n.publiclyRideable=e.publiclyRideable,n.maximumTimeToLive=e.maximumTimeToLive,n.remainingTimeToLive=e.remainingTimeToLive,n.remainingGrowTime=e.remainingGrowTime,n.publiclyBreedable=e.publiclyBreedable,this.listener.events.dispatchEvent(new DN(i,n))}}}}},{key:"onPetStatusUpdateEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);i&&(i.userDataManager.updatePetBreedingStatus(e.roomIndex,e.canBreed,e.canHarvest,e.canRevive,e.hasBreedingPermission),this.listener.events.dispatchEvent(new CN(i,e.petId,e.canBreed,e.canHarvest,e.canRevive,e.hasBreedingPermission)))}}}},{key:"onPetFigureUpdateEvent",value:function(t){if(this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=e.figureData.figuredata;i.userDataManager.updateFigure(e.roomIndex,n,"",e.hasSaddle,e.isRiding),this.listener.events.dispatchEvent(new NN(i,e.petId,n))}}}}},{key:"onPetPlacingError",value:function(t){if(t&&this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=null;switch(e.errorCode){case 0:n=oN.RSEME_PETS_FORBIDDEN_IN_HOTEL;break;case 1:n=oN.RSEME_PETS_FORBIDDEN_IN_FLAT;break;case 2:n=oN.RSEME_MAX_PETS;break;case 3:n=oN.RSEME_NO_FREE_TILES_FOR_PET;break;case 4:n=oN.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET;break;case 5:n=oN.RSEME_MAX_NUMBER_OF_OWN_PETS}n&&0!=n.length&&this.listener.events.dispatchEvent(new oN(n,i))}}}}},{key:"onBotError",value:function(t){if(t&&this.listener){var e=t.getParser();if(e){var i=this.listener.getSession(this.roomId);if(i){var n=null;switch(e.errorCode){case 0:n=oN.RSEME_BOTS_FORBIDDEN_IN_HOTEL;break;case 1:n=oN.RSEME_BOTS_FORBIDDEN_IN_FLAT;break;case 2:n=oN.RSEME_BOT_LIMIT_REACHED;break;case 3:n=oN.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT;break;case 4:n=oN.RSEME_BOT_NAME_NOT_ACCEPTED}n&&0!=n.length&&this.listener.events.dispatchEvent(new oN(n,i))}}}}},{key:"onFavoriteMembershipUpdateMessageEvent",value:function(t){if(this.listener){var e=t.getParser(),i=this.listener.getSession(this.roomId);if(i){var n=i.userDataManager.getUserDataByIndex(e.roomIndex);n&&(n.groupId=e.groupId,n.groupName=e.groupName,this.listener.events.dispatchEvent(new SN(i,e.roomIndex,e.groupId,e.status,e.groupName)))}}}}]),i}(uN),YN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),s=e.call(this,t,n),t.addMessageEvent(new Tv(s.onQuestionEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new bv(s.onQuestionAnsweredEvent.bind(Object(l.a)(s)))),t.addMessageEvent(new Rv(s.onQuestionFinishedEvent.bind(Object(l.a)(s)))),s}return Object(a.a)(i,[{key:"onQuestionEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=new xN(xN.QUESTION,e,i.pollId);n.question=i.question,n.duration=i.duration,n.pollType=i.pollType,n.questionId=i.questionId,n.pollId=i.pollId,this.listener.events.dispatchEvent(n)}}}}},{key:"onQuestionAnsweredEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=new xN(xN.ANSWERED,e,i.userId);n.value=i.value,n.userId=i.userId,n.answerCounts=i.answerCounts,this.listener.events.dispatchEvent(n)}}}}},{key:"onQuestionFinishedEvent",value:function(t){if(this.listener){var e=this.listener.getSession(this.roomId);if(e){var i=t.getParser();if(i){var n=new xN(xN.FINISHED,e);n.questionId=i.questionId,n.answerCounts=i.answerCounts,this.listener.events.dispatchEvent(n)}}}}}]),i}(uN),WN=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,null,[{key:"getLocalizationKey",value:function(e){switch(e){case t.FREE_TRADING:return"${trading.mode.free}";case t.ROOM_CONTROLLER_REQUIRED:return"${trading.mode.controller}";case t.NO_TRADING:return"${trading.mode.not.allowed}"}return""}}]),t}();WN.NO_TRADING=0,WN.ROOM_CONTROLLER_REQUIRED=1,WN.FREE_TRADING=2;var KN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._connection=void 0,t._userDataByType=void 0,t._userDataByRoomIndex=void 0,t._userBadges=void 0,t._connection=null,t._userDataByType=new Map,t._userDataByRoomIndex=new Map,t._userBadges=new Map,t}return Object(a.a)(i,[{key:"onDispose",value:function(){this._connection=null}},{key:"setConnection",value:function(t){this._connection=t}},{key:"getUserData",value:function(t){return this.getDataByType(t,i.TYPE_USER)}},{key:"getPetData",value:function(t){return this.getDataByType(t,i.TYPE_PET)}},{key:"getBotData",value:function(t){return this.getDataByType(t,i.TYPE_BOT)}},{key:"getRentableBotData",value:function(t){return this.getDataByType(t,i.TYPE_RENTABLE_BOT)}},{key:"getDataByType",value:function(t,e){var i=this._userDataByType.get(e);if(!i)return null;var n=i.get(t);return n||null}},{key:"getUserDataByIndex",value:function(t){var e=this._userDataByRoomIndex.get(t);return e||null}},{key:"getUserDataByName",value:function(t){var e,i=Object(s.a)(this._userDataByRoomIndex.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.name===t)return n}}catch(r){i.e(r)}finally{i.f()}return null}},{key:"updateUserData",value:function(t){if(t){this.removeUserData(t.roomIndex);var e=this._userDataByType.get(t.type);e||(e=new Map,this._userDataByType.set(t.type,e)),e.set(t.webID,t),this._userDataByRoomIndex.set(t.roomIndex,t)}}},{key:"removeUserData",value:function(t){var e=this.getUserDataByIndex(t);if(e){this._userDataByRoomIndex.delete(t);var i=this._userDataByType.get(e.type);i&&i.delete(e.webID)}}},{key:"getUserBadges",value:function(t){this._connection&&this._connection.send(new aT(t));var e=this._userBadges.get(t);return e||[]}},{key:"setUserBadges",value:function(t,e){this._userBadges.set(t,e)}},{key:"updateFigure",value:function(t,e,i,n,s){var r=this.getUserDataByIndex(t);r&&(r.figure=e,r.sex=i,r.hasSaddle=n,r.isRiding=s)}},{key:"updateName",value:function(t,e){var i=this.getUserDataByIndex(t);i&&(i.name=e)}},{key:"updateMotto",value:function(t,e){var i=this.getUserDataByIndex(t);i&&(i.custom=e)}},{key:"updateAchievementScore",value:function(t,e){var i=this.getUserDataByIndex(t);i&&(i.activityPoints=e)}},{key:"updatePetLevel",value:function(t,e){var i=this.getUserDataByIndex(t);i&&(i.petLevel=e)}},{key:"updatePetBreedingStatus",value:function(t,e,i,n,s){var r=this.getUserDataByIndex(t);r&&(r.canBreed=e,r.canHarvest=i,r.canRevive=n,r.hasBreedingPermission=s)}},{key:"requestPetInfo",value:function(t){this._connection&&(this.getPetData(t)&&this._connection.send(new Bm(t)))}},{key:"connection",get:function(){return this._connection}}]),i}(m);KN.TYPE_USER=1,KN.TYPE_PET=2,KN.TYPE_BOT=3,KN.TYPE_RENTABLE_BOT=4;var XN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._connection=void 0,t._userData=void 0,t._roomId=void 0,t._password=void 0,t._state=void 0,t._tradeMode=void 0,t._doorMode=void 0,t._allowPets=void 0,t._controllerLevel=void 0,t._ownRoomIndex=void 0,t._isGuildRoom=void 0,t._isRoomOwner=void 0,t._isDecorating=void 0,t._isSpectator=void 0,t._moderationSettings=void 0,t._connection=null,t._userData=new KN,t._roomId=0,t._password=null,t._state=QT.CREATED,t._tradeMode=WN.NO_TRADING,t._doorMode=0,t._controllerLevel=Zu.NONE,t._ownRoomIndex=-1,t._isGuildRoom=!1,t._isRoomOwner=!1,t._isDecorating=!1,t._isSpectator=!1,t._moderationSettings=null,t}return Object(a.a)(i,[{key:"onDispose",value:function(){this._userData&&(this._userData.dispose(),this._userData=null),this._connection=null}},{key:"setConnection",value:function(t){!this._connection&&t&&(this._connection=t,this._userData&&this._userData.setConnection(t))}},{key:"setControllerLevel",value:function(t){t>=Zu.NONE&&t<=Zu.MODERATOR?this._controllerLevel=t:this._controllerLevel=Zu.NONE}},{key:"setOwnRoomIndex",value:function(t){this._ownRoomIndex=t}},{key:"setRoomOwner",value:function(){this._isRoomOwner=!0}},{key:"start",value:function(){return!(this._state!==QT.CREATED||!this._connection)&&(this._state=QT.STARTED,this.enterRoom())}},{key:"enterRoom",value:function(){return!!this._connection&&(this._connection.send(new hI(this._roomId,this._password)),!0)}},{key:"reset",value:function(t){t!==this._roomId&&(this._roomId=t)}},{key:"sendChatMessage",value:function(t,e){this._connection.send(new Ib(t,e))}},{key:"sendShoutMessage",value:function(t,e){this._connection.send(new bb(t,e))}},{key:"sendWhisperMessage",value:function(t,e,i){this._connection.send(new Rb(t,e,i))}},{key:"sendChatTypingMessage",value:function(t){t?this._connection.send(new kb):this._connection.send(new Ab)}},{key:"sendMottoMessage",value:function(t){this._connection.send(new cT(t))}},{key:"sendDanceMessage",value:function(t){this._connection.send(new jb(t))}},{key:"sendExpressionMessage",value:function(t){this._connection.send(new Sb(t))}},{key:"sendSignMessage",value:function(t){t<0||t>17||this._connection.send(new Ub(t))}},{key:"sendPostureMessage",value:function(t){this._connection.send(new Lb(t))}},{key:"sendDoorbellApprovalMessage",value:function(t,e){this._connection.send(new cI(t,e))}},{key:"sendAmbassadorAlertMessage",value:function(t){this._connection.send(new lI(t))}},{key:"sendKickMessage",value:function(t){this._connection.send(new gI(t))}},{key:"sendMuteMessage",value:function(t,e){this._connection.send(new yI(t,e,this._roomId))}},{key:"sendBanMessage",value:function(t,e){this._connection.send(new dI(t,this._roomId,e))}},{key:"sendGiveRightsMessage",value:function(t){this._connection.send(new vI(t))}},{key:"sendTakeRightsMessage",value:function(t){this._connection.send(new pI(t))}},{key:"sendPollStartMessage",value:function(t){this._connection.send(new Wm(t))}},{key:"sendPollRejectMessage",value:function(t){this._connection.send(new Ym(t))}},{key:"sendPollAnswerMessage",value:function(t,e,i){this._connection.send(new zm(t,e,i))}},{key:"updateMoodlightData",value:function(t,e,i,n,s){var r="000000"+i.toString(16).toUpperCase();r="#"+r.substring(r.length-6),this.connection.send(new HI(t,e,r,n,s))}},{key:"toggleMoodlightState",value:function(){this.connection.send(new VI)}},{key:"pickupPet",value:function(t){this._connection&&this._connection.send(new wI(t))}},{key:"pickupBot",value:function(t){this._connection&&this._connection.send(new jI(t))}},{key:"requestMoodlightSettings",value:function(){this._connection&&this._connection.send(new GI)}},{key:"openGift",value:function(t){this._connection.send(new cb(t))}},{key:"mountPet",value:function(t){this._connection.send(new Pm(t,!0))}},{key:"dismountPet",value:function(t){this._connection.send(new Pm(t,!1))}},{key:"usePetProduct",value:function(t,e){this._connection.send(new Vm(t,e))}},{key:"removePetSaddle",value:function(t){this._connection.send(new xm(t))}},{key:"togglePetBreeding",value:function(t){this._connection.send(new Gm(t))}},{key:"togglePetRiding",value:function(t){this._connection.send(new Hm(t))}},{key:"useMultistateItem",value:function(t){this._connection.send(new ib(t))}},{key:"harvestPet",value:function(t){this._connection.send(new LI(t))}},{key:"compostPlant",value:function(t){this._connection.send(new MI(t))}},{key:"connection",get:function(){return this._connection}},{key:"userDataManager",get:function(){return this._userData}},{key:"roomId",get:function(){return this._roomId},set:function(t){this._roomId=t}},{key:"password",get:function(){return this._password},set:function(t){this._password=t}},{key:"state",get:function(){return this._state}},{key:"_Str_7411",get:function(){return!0}},{key:"tradeMode",get:function(){return this._tradeMode},set:function(t){this._tradeMode=t}},{key:"doorMode",get:function(){return this._doorMode},set:function(t){this._doorMode=t}},{key:"allowPets",get:function(){return this._allowPets},set:function(t){this._allowPets=t}},{key:"controllerLevel",get:function(){return this._controllerLevel}},{key:"ownRoomIndex",get:function(){return this._ownRoomIndex}},{key:"isGuildRoom",get:function(){return this._isGuildRoom},set:function(t){this._isGuildRoom=t}},{key:"isRoomOwner",get:function(){return this._isRoomOwner}},{key:"isDecorating",get:function(){return this._isDecorating},set:function(t){this._isDecorating=t}},{key:"isSpectator",get:function(){return this._isSpectator},set:function(t){this._isSpectator=t}},{key:"moderationSettings",get:function(){return this._moderationSettings},set:function(t){this._moderationSettings=t}}]),i}(m),qN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this))._communication=void 0,s._roomEngine=void 0,s._handlers=void 0,s._sessions=void 0,s._pendingSession=void 0,s._sessionStarting=void 0,s._viewerSession=void 0,s._communication=t,s._roomEngine=n,s._handlers=[],s._sessions=new Map,s._pendingSession=null,s._sessionStarting=!1,s._viewerSession=null,s.onRoomEngineEvent=s.onRoomEngineEvent.bind(Object(l.a)(s)),s}return Object(a.a)(i,[{key:"onInit",value:function(){this.createHandlers(),this.processPendingSession(),this._roomEngine.events.addEventListener(VT.ENGINE_INITIALIZED,this.onRoomEngineEvent)}},{key:"onDispose",value:function(){this._roomEngine.events.removeEventListener(VT.ENGINE_INITIALIZED,this.onRoomEngineEvent),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"createHandlers",value:function(){var t=this._communication&&this._communication.connection;t&&this._handlers.push(new dN(t,this),new vN(t,this),new yN(t,this),new EN(t,this),new RN(t,this),new zN(t,this),new IN(t,this),new cN(t,this),new YN(t,this),new _N(t,this))}},{key:"setHandlers",value:function(t){if(this._handlers&&this._handlers.length){var e,i=Object(s.a)(this._handlers);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&n.setRoomId(t.roomId)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"onRoomEngineEvent",value:function(t){this.processPendingSession()}},{key:"processPendingSession",value:function(){this._pendingSession&&this._roomEngine.ready&&(this.addSession(this._pendingSession),this._pendingSession=null)}},{key:"getSession",value:function(t){var e=this._sessions.get(this.getRoomId(t));return e||null}},{key:"createSession",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new XN;return i.roomId=t,i.password=e,this.addSession(i)}},{key:"addSession",value:function(t){return this._roomEngine.ready?(this._sessionStarting=!0,this._sessions.get(this.getRoomId(t.roomId))&&this.removeSession(t.roomId,!1),t.setConnection(this._communication.connection),this._sessions.set(this.getRoomId(t.roomId),t),this.events.dispatchEvent(new QT(QT.CREATED,t)),this._viewerSession=t,this.startSession(this._viewerSession),!0):(this._pendingSession=t,!1)}},{key:"startSession",value:function(t){return t.state!==QT.STARTED&&(this._sessionStarting=!1,t.start()?(this.events.dispatchEvent(new QT(QT.STARTED,t)),this.setHandlers(t),!0):(this.removeSession(t.roomId),!1))}},{key:"removeSession",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getSession(t);i&&(this._sessions.delete(this.getRoomId(t)),this.events.dispatchEvent(new QT(QT.ENDED,i,e)),i.dispose())}},{key:"sessionUpdate",value:function(t,e){if(this.getSession(t))switch(e){case RN.RS_CONNECTED:case RN.RS_READY:return;case RN.RS_DISCONNECTED:return void this.removeSession(t)}}},{key:"sessionReinitialize",value:function(t,e){var i=this.getSession(t);i&&(this._sessions.delete(this.getRoomId(t)),i.reset(e),this._sessions.set(this.getRoomId(e),i),this.setHandlers(i))}},{key:"getRoomId",value:function(t){return"hard_coded_room_id"}},{key:"communication",get:function(){return this._communication}},{key:"roomEngine",get:function(){return this._roomEngine}},{key:"viewerSession",get:function(){return this._viewerSession}}]),i}(w),QN=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this,i.SETTINGS_UPDATED))._volumeSystem=void 0,t._volumeFurni=void 0,t._volumeTrax=void 0,t._oldChat=void 0,t._roomInvites=void 0,t._cameraFollow=void 0,t._flags=void 0,t._chatType=void 0,t}return Object(a.a)(i,[{key:"clone",value:function(){var t=new i;return t._volumeSystem=this._volumeSystem,t._volumeFurni=this._volumeFurni,t._volumeTrax=this._volumeTrax,t._oldChat=this._oldChat,t._roomInvites=this._roomInvites,t._cameraFollow=this._cameraFollow,t._flags=this._flags,t._chatType=this._chatType,t}},{key:"volumeSystem",get:function(){return this._volumeSystem},set:function(t){this._volumeSystem=t}},{key:"volumeFurni",get:function(){return this._volumeFurni},set:function(t){this._volumeFurni=t}},{key:"volumeTrax",get:function(){return this._volumeTrax},set:function(t){this._volumeTrax=t}},{key:"oldChat",get:function(){return this._oldChat},set:function(t){this._oldChat=t}},{key:"roomInvites",get:function(){return this._roomInvites},set:function(t){this._roomInvites=t}},{key:"cameraFollow",get:function(){return this._cameraFollow},set:function(t){this._cameraFollow=t}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"chatType",get:function(){return this._chatType},set:function(t){this._chatType=t}}]),i}(E.a);QN.SETTINGS_UPDATED="NSE_SETTINGS_UPDATED";var ZN=function(){function t(e,i){Object(r.a)(this,t),this._image=void 0,this._placeHolder=void 0,this._image=e,this._placeHolder=i}return Object(a.a)(t,[{key:"image",get:function(){return this._image}},{key:"placeHolder",get:function(){return this._placeHolder}}]),t}(),JN=function(){function t(e){Object(r.a)(this,t),this._code=void 0,this._parts=void 0,this._code=e,this._parts=[]}return Object(a.a)(t,[{key:"code",get:function(){return this._code}},{key:"parts",get:function(){return this._parts}}]),t}(),$N=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=e,this.key=i,this.color=n,this.position=s}return Object(a.a)(t,[{key:"code",get:function(){return 0===this.key?null:t.getCode(this.type,this.key,this.color,this.position)}},{key:"calculatePosition",value:function(e){var i=this.calculateGridPos(this.position),n=t.CELL_WIDTH*i.x+t.CELL_WIDTH/2-e.width/2,s=t.CELL_HEIGHT*i.y+t.CELL_HEIGHT/2-e.height/2;return n<0&&(n=0),n+e.width>t.IMAGE_WIDTH&&(n=t.IMAGE_WIDTH-e.width),s<0&&(s=0),s+e.height>t.IMAGE_HEIGHT&&(s=t.IMAGE_HEIGHT-e.height),new J(Math.floor(n),Math.floor(s))}},{key:"calculateGridPos",value:function(t){var e=new J;return e.x=Math.floor(t%3),e.y=Math.floor(t/3),e}}],[{key:"getCode",value:function(e,i,n,s){return(e===t.BASE?e:i>=100?t.SYMBOL_ALT:t.SYMBOL)+(i<10?"0":"")+(e===t.BASE?i:i>=100?i-100:i)+(n<10?"0":"")+n+s}}]),t}();$N.BASE="b",$N.SYMBOL="s",$N.SYMBOL_ALT="t",$N.BASE_PART=0,$N.LAYER_PART=1,$N.IMAGE_WIDTH=39,$N.IMAGE_HEIGHT=39,$N.CELL_WIDTH=13,$N.CELL_HEIGHT=13;var tD=function(){function t(e,i){Object(r.a)(this,t),this._assets=void 0,this._sessionDataManager=void 0,this._messages=void 0,this._groupBases=void 0,this._groupSymbols=void 0,this._groupPartColors=void 0,this._requestedBadges=void 0,this._groupBadgesQueue=void 0,this._readyToGenerateGroupBadges=void 0,this._assets=e,this._sessionDataManager=i,this._groupBases=new Map,this._groupSymbols=new Map,this._groupPartColors=new Map,this._requestedBadges=new Map,this._groupBadgesQueue=new Map,this._readyToGenerateGroupBadges=!1}return Object(a.a)(t,[{key:"init",value:function(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new Gl(this.onGroupBadgePartsEvent.bind(this))];var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.registerMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}}}},{key:"dispose",value:function(){if(this._messages&&this._messages.length){var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.removeMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}this._messages=null}this._sessionDataManager=null}},{key:"getBadgeImage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.NORMAL_BADGE,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.getBadgeTexture(e,i);return!s&&n&&(s=this.getBadgePlaceholder()),s}},{key:"getBadgeInfo",value:function(t){var e=this.getBadgeTexture(t);return e?new ZN(e,!1):new ZN(this.getBadgePlaceholder(),!0)}},{key:"loadBadgeImage",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.NORMAL_BADGE;return this._assets.getTexture(this.getBadgeUrl(e,i))?e:(this.getBadgeTexture(e,i),null)}},{key:"getBadgeTexture",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.NORMAL_BADGE,s=this.getBadgeUrl(e,n);if(!s||!s.length)return null;var r=this._assets.getTexture(s);if(r)return r.clone();if(n===t.NORMAL_BADGE){if(this._requestedBadges.get(e))return null;this._requestedBadges.set(e,!0),this._assets.downloadAsset(s,(function(t){if(t){i._requestedBadges.delete(e);var n=i._assets.getTexture(s);n&&i._sessionDataManager&&i._sessionDataManager.events.dispatchEvent(new qT(e,n.clone()))}}))}else if(n===t.GROUP_BADGE){if(this._groupBadgesQueue.get(e))return;this._groupBadgesQueue.set(e,!0),this._readyToGenerateGroupBadges&&this.loadGroupBadge(e)}return null}},{key:"getBadgePlaceholder",value:function(){var t=gD.instance.getConfiguration("images.url")+"/loading_icon.png",e=this._assets.getTexture(t);return e?e.clone():null}},{key:"getBadgeUrl",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.NORMAL_BADGE,n=null;switch(i){case t.NORMAL_BADGE:n=gD.instance.getConfiguration("badge.asset.url").replace("%badgename%",e);break;case t.GROUP_BADGE:n=e}return n}},{key:"loadGroupBadge",value:function(t){var e,i=new JN(t),n=Object(T.a)(t.matchAll(/[b|s][0-9]{4,6}/g)),r=Object(s.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value[0],o=6===a.length,u=a[0],c=parseInt(a.slice(1,o?3:4)),h=parseInt(a.slice(o?3:4,o?5:6)),_=a.length<6?0:parseInt(a.slice(o?5:6,o?6:7)),l=new $N(u,c,h,_);i.parts.push(l)}}catch(d){r.e(d)}finally{r.f()}this.renderGroupBadge(i)}},{key:"renderGroupBadge",value:function(t){var e=new q,i=new et(it.EMPTY);i.width=$N.IMAGE_WIDTH,i.height=$N.IMAGE_HEIGHT,e.addChild(i);var n,r=Object(s.a)(t.parts);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=!0,u="b"===a.type?this._groupBases.get(a.key):this._groupSymbols.get(a.key);if(u){var c,h=Object(s.a)(u);try{for(h.s();!(c=h.n()).done;){var _=c.value;if(_&&_.length){var l=this._assets.getTexture("badgepart_".concat(_));if(l){var d=a.calculatePosition(l),f=d.x,v=d.y,g=new et(l);g.position.set(f,v),o&&(g.tint=parseInt(this._groupPartColors.get(a.color),16)),o=!1,e.addChild(g)}}}}catch(y){h.e(y)}finally{h.f()}}}}catch(y){r.e(y)}finally{r.f()}this._requestedBadges.delete(t.code),this._groupBadgesQueue.delete(t.code);var O=Ut.generateTexture(e);this._assets.setTexture(t.code,O),this._sessionDataManager&&this._sessionDataManager.events.dispatchEvent(new qT(t.code,O))}},{key:"onGroupBadgePartsEvent",value:function(t){var e=this;if(t){var i=t.getParser();if(i){i.bases.forEach((function(t,i){return e._groupBases.set(i,t.map((function(t){return t.replace(".png","").replace(".gif","")})))})),i.symbols.forEach((function(t,i){return e._groupSymbols.set(i,t.map((function(t){return t.replace(".png","").replace(".gif","")})))})),this._groupPartColors=i.partColors,this._readyToGenerateGroupBadges=!0;var n,r=Object(s.a)(this._groupBadgesQueue.keys());try{for(r.s();!(n=r.n()).done;){var a=n.value;this.loadGroupBadge(a)}}catch(o){r.e(o)}finally{r.f()}}}}},{key:"disposed",get:function(){return!!this._sessionDataManager}}]),t}();tD.GROUP_BADGE="group_badge",tD.NORMAL_BADGE="normal_badge";var eD=Object(a.a)((function t(){Object(r.a)(this,t)}));eD.OLD_IDENTITY=0,eD.NEW_IDENTITY=1,eD.REAL_NOOB=2;var iD=Object(a.a)((function t(){Object(r.a)(this,t)}));iD.SUPER_USER=9,iD.ADMINISTRATOR=8,iD.COMMUNITY=7,iD.PLAYER_SUPPORT=6,iD.MODERATOR=5,iD.EMPLOYEE=4,iD.BUS_PARTNER=3,iD.PARTNER=2,iD.CELEBRITY=1,iD.NONE=0;var nD=function(){function t(e,i,n,s,a,o,u,c,h,_,l,d,f,v,g,O,y,E,p,m,I,b,T,R,k,A,S,j,N){Object(r.a)(this,t),this._type=void 0,this._id=void 0,this._className=void 0,this._fullName=void 0,this._category=void 0,this._hasIndexedColor=void 0,this._colourIndex=void 0,this._revision=void 0,this._tileSizeX=void 0,this._tileSizeY=void 0,this._tileSizeZ=void 0,this._colors=void 0,this._localizedName=void 0,this._description=void 0,this._adUrl=void 0,this._purchaseOfferId=void 0,this._rentOfferId=void 0,this._customParams=void 0,this._specialType=void 0,this._purchaseCouldBeUsedForBuyout=void 0,this._rentCouldBeUsedForBuyout=void 0,this._availableForBuildersClub=void 0,this._canStandOn=void 0,this._canSitOn=void 0,this._canLayOn=void 0,this._excludedFromDynamic=void 0,this._furniLine=void 0,this._environment=void 0,this._rare=void 0,this._type=e,this._id=i,this._fullName=n,this._className=s,this._category=a,this._revision=c,this._tileSizeX=h,this._tileSizeY=_,this._tileSizeZ=l,this._colors=d,this._hasIndexedColor=f,this._colourIndex=v,this._localizedName=o,this._description=u,this._adUrl=g,this._purchaseOfferId=O,this._purchaseCouldBeUsedForBuyout=y,this._rentOfferId=E,this._rentCouldBeUsedForBuyout=p,this._customParams=I,this._specialType=b,this._availableForBuildersClub=m,this._canStandOn=T,this._canSitOn=R,this._canLayOn=k,this._excludedFromDynamic=A,this._furniLine=S,this._environment=j,this._rare=N}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"className",get:function(){return this._className},set:function(t){this._className=t}},{key:"fullName",get:function(){return this._fullName}},{key:"category",get:function(){return this._category}},{key:"hasIndexedColor",get:function(){return this._hasIndexedColor}},{key:"colorIndex",get:function(){return this._colourIndex}},{key:"revision",get:function(){return this._revision}},{key:"tileSizeX",get:function(){return this._tileSizeX}},{key:"tileSizeY",get:function(){return this._tileSizeY}},{key:"tileSizeZ",get:function(){return this._tileSizeZ}},{key:"colors",get:function(){return this._colors}},{key:"name",get:function(){return this._localizedName}},{key:"description",get:function(){return this._description}},{key:"adUrl",get:function(){return this._adUrl}},{key:"purchaseOfferId",get:function(){return this._purchaseOfferId}},{key:"customParams",get:function(){return this._customParams}},{key:"specialType",get:function(){return this._specialType}},{key:"rentOfferId",get:function(){return this._rentOfferId}},{key:"purchaseCouldBeUsedForBuyout",get:function(){return this._purchaseCouldBeUsedForBuyout}},{key:"rentCouldBeUsedForBuyout",get:function(){return this._rentCouldBeUsedForBuyout}},{key:"availableForBuildersClub",get:function(){return this._availableForBuildersClub}},{key:"canStandOn",get:function(){return this._canStandOn}},{key:"canSitOn",get:function(){return this._canSitOn}},{key:"canLayOn",get:function(){return this._canLayOn}},{key:"isExternalImage",get:function(){return!(-1===this._className.indexOf("external_image"))}},{key:"excludeDynamic",get:function(){return this._excludedFromDynamic}},{key:"furniLine",get:function(){return this._furniLine}},{key:"environment",get:function(){return this._environment}},{key:"rare",get:function(){return this._rare}}]),t}(),sD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this))._floorItems=void 0,a._wallItems=void 0,a._localization=void 0,a._nitroLogger=void 0,a._floorItems=t,a._wallItems=n,a._localization=s,a._nitroLogger=new I(a.constructor.name),a}return Object(a.a)(i,[{key:"loadFurnitureData",value:function(t){var e=this;t&&fetch(t).then((function(t){return t.json()})).then((function(t){return e.onFurnitureDataLoaded(t)})).catch((function(t){return e.onFurnitureDataError(t)}))}},{key:"onFurnitureDataLoaded",value:function(t){t&&("undefined"!=typeof t.roomitemtypes&&"undefined"!=typeof t.wallitemtypes||this._nitroLogger.warn("Could not find `roomitemtypes` or `wallitemtypes` in furnidata."),t.roomitemtypes&&this.parseFloorItems(t.roomitemtypes),t.wallitemtypes&&this.parseWallItems(t.wallitemtypes),this.dispatchEvent(new E.a(i.FURNITURE_DATA_READY)))}},{key:"onFurnitureDataError",value:function(t){t&&(console.error(t),this.dispatchEvent(new E.a(i.FURNITURE_DATA_ERROR)))}},{key:"parseFloorItems",value:function(t){if(t&&t.furnitype){var e,i=Object(s.a)(t.furnitype);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=[];if(n.partcolors){var a,o=Object(s.a)(n.partcolors.color);try{for(o.s();!(a=o.n()).done;){var u=a.value;"#"===u.charAt(0)?(u=u.replace("#",""),r.push(parseInt(u,16))):r.push(parseInt(u,16))}}catch(f){o.e(f)}finally{o.f()}}var c=n.classname.split("*"),h=c[0],_=c.length>1?parseInt(c[1]):0,l=c.length>1,d=new nD(ct.FLOOR,n.id,n.classname,h,n.category,n.name,n.description,n.revision,n.xdim,n.ydim,0,r,l,_,n.adurl,n.offerid,n.buyout,n.rentofferid,n.rentbuyout,n.bc,n.customparams,n.specialtype,n.canstandon,n.cansiton,n.canlayon,n.excludeddynamic,n.furniline,n.environment,n.rare);this._floorItems.set(d.id,d),this.updateLocalizations(d)}}}catch(f){i.e(f)}finally{i.f()}}}},{key:"parseWallItems",value:function(t){if(t&&t.furnitype){var e,i=Object(s.a)(t.furnitype);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=new nD(ct.WALL,n.id,n.classname,n.classname,n.category,n.name,n.description,n.revision,0,0,0,null,!1,0,n.adurl,n.offerid,n.buyout,n.rentofferid,n.rentbuyout,n.bc,null,n.specialtype,!1,!1,!1,n.excludeddynamic,n.furniline,n.environment,n.rare);this._wallItems.set(r.id,r),this.updateLocalizations(r)}}}catch(a){i.e(a)}finally{i.f()}}}},{key:"updateLocalizations",value:function(t){if(this._localization)switch(t.type){case ct.FLOOR:return this._localization.setValue("roomItem.name."+t.id,t.name),void this._localization.setValue("roomItem.desc."+t.id,t.description);case ct.WALL:return this._localization.setValue("wallItem.name."+t.id,t.name),void this._localization.setValue("wallItem.desc."+t.id,t.description)}}}]),i}(b);sD.FURNITURE_DATA_READY="FDP_FURNITURE_DATA_READY",sD.FURNITURE_DATA_ERROR="FDP_FURNITURE_DATA_ERROR";var rD=function(){function t(e){Object(r.a)(this,t),this._sessionDataManager=void 0,this._groupBadges=void 0,this._messages=void 0,this._sessionDataManager=e,this._groupBadges=new Map}return Object(a.a)(t,[{key:"init",value:function(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new Lg(this.onRoomReadyMessageEvent.bind(this)),new kO(this.onGroupBadgesEvent.bind(this))];var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.registerMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}}}},{key:"dispose",value:function(){if(!this.disposed){if(this._messages&&this._messages.length){var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.removeMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}this._messages=null}this._groupBadges=null,this._sessionDataManager=null}}},{key:"onRoomReadyMessageEvent",value:function(t){this._sessionDataManager.send(new lT)}},{key:"onGroupBadgesEvent",value:function(t){var e,i=t.getParser(),r=Object(s.a)(i.badges.entries());try{for(r.s();!(e=r.n()).done;){var a=Object(n.a)(e.value,2),o=a[0],u=a[1];this._groupBadges.set(o,u)}}catch(c){r.e(c)}finally{r.f()}}},{key:"getGroupBadge",value:function(t){return this._groupBadges.get(t)}},{key:"disposed",get:function(){return!!this._sessionDataManager}}]),t}(),aD=function(){function t(e){Object(r.a)(this,t),this._sessionDataManager=void 0,this._ignoredUsers=void 0,this._messages=void 0,this._sessionDataManager=e,this._ignoredUsers=[]}return Object(a.a)(t,[{key:"init",value:function(){if(this._sessionDataManager&&this._sessionDataManager.communication){this._messages=[new AO(this.onIgnoredUsersEvent.bind(this)),new SO(this.onIgnoreResultEvent.bind(this))];var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.registerMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}}}},{key:"dispose",value:function(){if(!this.disposed){if(this._messages&&this._messages.length){var t,e=Object(s.a)(this._messages);try{for(e.s();!(t=e.n()).done;){var i=t.value;this._sessionDataManager.communication.removeMessageEvent(i)}}catch(n){e.e(n)}finally{e.f()}this._messages=null}this._sessionDataManager=null}}},{key:"requestIgnoredUsers",value:function(){this._sessionDataManager.send(new iT(this._sessionDataManager.userName))}},{key:"onIgnoredUsersEvent",value:function(t){if(t){var e=t.getParser();e&&(this._ignoredUsers=e.ignoredUsers)}}},{key:"onIgnoreResultEvent",value:function(t){if(t){var e=t.getParser();if(e){var i=e.name;switch(e.result){case 0:return;case 1:return void this.addUserToIgnoreList(i);case 2:return this.addUserToIgnoreList(i),void this._ignoredUsers.shift();case 3:return void this.removeUserFromIgnoreList(i)}}}}},{key:"addUserToIgnoreList",value:function(t){this._ignoredUsers.indexOf(t)<0&&this._ignoredUsers.push(t)}},{key:"removeUserFromIgnoreList",value:function(t){var e=this._ignoredUsers.indexOf(t);e>=0&&this._ignoredUsers.splice(e,1)}},{key:"ignoreUserId",value:function(t){this._sessionDataManager.send(new sT(t))}},{key:"ignoreUser",value:function(t){this._sessionDataManager.send(new nT(t))}},{key:"unignoreUser",value:function(t){this._sessionDataManager.send(new rT(t))}},{key:"isIgnored",value:function(t){return this._ignoredUsers.indexOf(t)>=0}},{key:"disposed",get:function(){return!!this._sessionDataManager}}]),t}(),oD=function(){function t(e,i,n){Object(r.a)(this,t),this._type=void 0,this._name=void 0,this._description=void 0,this._type=e,this._name=i,this._description=n}return Object(a.a)(t,[{key:"type",get:function(){return this._type}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}}]),t}(),uD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._products=void 0,n._products=t,n}return Object(a.a)(i,[{key:"dispose",value:function(){this._products=null}},{key:"loadProductData",value:function(t){var e=this;t&&fetch(t).then((function(t){return t.json()})).then((function(t){return e.onProductDataLoadedEvent(t)})).catch((function(t){return e.onProductDataError(t)}))}},{key:"onProductDataLoadedEvent",value:function(t){t&&(this.parseProducts(t.productdata),this.dispatchEvent(new E.a(i.PDP_PRODUCT_DATA_READY)))}},{key:"onProductDataError",value:function(t){t&&this.dispatchEvent(new E.a(i.PDP_PRODUCT_DATA_FAILED))}},{key:"parseProducts",value:function(t){if(t){var e,i=Object(s.a)(t.product);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&this._products.set(n.code,new oD(n.code,n.name,n.description))}}catch(r){i.e(r)}finally{i.f()}}}}]),i}(b);uD.PDP_PRODUCT_DATA_READY="PDP_PRODUCT_DATA_READY",uD.PDP_PRODUCT_DATA_FAILED="PDP_PRODUCT_DATA_FAILED";var cD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this))._communication=void 0,n._userId=void 0,n._name=void 0,n._figure=void 0,n._gender=void 0,n._realName=void 0,n._respectsReceived=void 0,n._respectsLeft=void 0,n._respectsPetLeft=void 0,n._canChangeName=void 0,n._ignoredUsersManager=void 0,n._groupInformationManager=void 0,n._clubLevel=void 0,n._securityLevel=void 0,n._isAmbassador=void 0,n._noobnessLevel=void 0,n._systemOpen=void 0,n._systemShutdown=void 0,n._isAuthenticHabbo=void 0,n._isRoomCameraFollowDisabled=void 0,n._chatStyle=void 0,n._uiFlags=void 0,n._floorItems=void 0,n._wallItems=void 0,n._products=void 0,n._furnitureData=void 0,n._productData=void 0,n._furnitureReady=void 0,n._productsReady=void 0,n._furnitureListenersNotified=void 0,n._pendingFurnitureListeners=void 0,n._pendingProductListeners=void 0,n._badgeImageManager=void 0,n._communication=t,n.resetUserInfo(),n._ignoredUsersManager=new aD(Object(l.a)(n)),n._groupInformationManager=new rD(Object(l.a)(n)),n._clubLevel=0,n._securityLevel=0,n._isAmbassador=!1,n._noobnessLevel=-1,n._systemOpen=!1,n._systemShutdown=!1,n._isAuthenticHabbo=!1,n._isRoomCameraFollowDisabled=!1,n._chatStyle=0,n._uiFlags=0,n._floorItems=new Map,n._wallItems=new Map,n._products=new Map,n._furnitureData=null,n._furnitureReady=!1,n._productsReady=!1,n._furnitureListenersNotified=!1,n._pendingFurnitureListeners=[],n._pendingProductListeners=[],n._badgeImageManager=null,n.onFurnitureDataReadyEvent=n.onFurnitureDataReadyEvent.bind(Object(l.a)(n)),n.onProductDataReadyEvent=n.onProductDataReadyEvent.bind(Object(l.a)(n)),n.onNitroSettingsEvent=n.onNitroSettingsEvent.bind(Object(l.a)(n)),n}return Object(a.a)(i,[{key:"onInit",value:function(){this.loadFurnitureData(),this.loadProductData(),this.loadBadgeImageManager(),this._ignoredUsersManager&&this._ignoredUsersManager.init(),this._groupInformationManager&&this._groupInformationManager.init(),this._communication.registerMessageEvent(new T_(this.onUserFigureEvent.bind(this))),this._communication.registerMessageEvent(new pO(this.onUserInfoEvent.bind(this))),this._communication.registerMessageEvent(new gO(this.onUserPermissionsEvent.bind(this))),this._communication.registerMessageEvent(new g_(this.onAvailabilityStatusMessageEvent.bind(this))),this._communication.registerMessageEvent(new I_(this.onChangeNameUpdateEvent.bind(this))),this._communication.registerMessageEvent(new mO(this.onUserNameChangeMessageEvent.bind(this))),this._communication.registerMessageEvent(new Lg(this.onRoomModelNameEvent.bind(this))),this._communication.registerMessageEvent(new jO(this.onInClientLinkEvent.bind(this))),this._communication.registerMessageEvent(new qf(this.onMysteryBoxKeysEvent.bind(this))),this._communication.registerMessageEvent(new Od(this.onNoobnessLevelMessageEvent.bind(this))),gD.instance.events.addEventListener(QN.SETTINGS_UPDATED,this.onNitroSettingsEvent)}},{key:"onDispose",value:function(){this.destroyFurnitureData(),this._ignoredUsersManager&&(this._ignoredUsersManager.dispose(),this._ignoredUsersManager=null),this._groupInformationManager&&(this._groupInformationManager.dispose(),this._groupInformationManager=null),gD.instance.events.removeEventListener(QN.SETTINGS_UPDATED,this.onNitroSettingsEvent),Object(d.a)(Object(f.a)(i.prototype),"onDispose",this).call(this)}},{key:"resetUserInfo",value:function(){this._userId=0,this._name=null,this._figure=null,this._gender=null,this._realName=null,this._canChangeName=!1}},{key:"loadFurnitureData",value:function(){this.destroyFurnitureData(),this._furnitureData=new sD(this._floorItems,this._wallItems,gD.instance.localization),this._furnitureData.addEventListener(sD.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureData.loadFurnitureData(gD.instance.getConfiguration("furnidata.url"))}},{key:"loadProductData",value:function(){this.destroyProductData(),this._productData=new uD(this._products),this._productData.addEventListener(uD.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productData.loadProductData(gD.instance.getConfiguration("productdata.url"))}},{key:"loadBadgeImageManager",value:function(){this._badgeImageManager||(this._badgeImageManager=new tD(gD.instance.core.asset,this),this._badgeImageManager.init())}},{key:"hasProductData",value:function(t){return!!this._productsReady||(t&&-1===this._pendingProductListeners.indexOf(t)&&this._pendingProductListeners.push(t),!1)}},{key:"getAllFurnitureData",value:function(t){if(!this._furnitureReady)return-1===this._pendingFurnitureListeners.indexOf(t)&&this._pendingFurnitureListeners.push(t),null;var e,i=[],n=Object(s.a)(this._floorItems.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&i.push(r)}}catch(c){n.e(c)}finally{n.f()}var a,o=Object(s.a)(this._wallItems.values());try{for(o.s();!(a=o.n()).done;){var u=a.value;u&&i.push(u)}}catch(c){o.e(c)}finally{o.f()}return i}},{key:"removePendingFurniDataListener",value:function(t){if(this._pendingFurnitureListeners){var e=this._pendingFurnitureListeners.indexOf(t);-1!==e&&this._pendingFurnitureListeners.splice(e,1)}}},{key:"onUserFigureEvent",value:function(t){t&&t.connection&&(this._figure=t.getParser().figure,this._gender=t.getParser().gender,jj.updateFigure(this._figure))}},{key:"onUserInfoEvent",value:function(t){if(t&&t.connection){this.resetUserInfo();var e=t.getParser().userInfo;e&&(this._userId=e.userId,this._name=e.username,this._figure=e.figure,this._gender=e.gender,this._realName=e.realName,this._respectsReceived=e.respectsReceived,this._respectsLeft=e.respectsRemaining,this._respectsPetLeft=e.respectsPetRemaining,this._canChangeName=e.canChangeName,this._ignoredUsersManager&&this._ignoredUsersManager.requestIgnoredUsers())}}},{key:"onUserPermissionsEvent",value:function(t){t&&t.connection&&(this._clubLevel=t.getParser().clubLevel,this._securityLevel=t.getParser().securityLevel,this._isAmbassador=t.getParser().isAmbassador)}},{key:"onAvailabilityStatusMessageEvent",value:function(t){if(t&&t.connection){var e=t.getParser();e&&(this._systemOpen=e.isOpen,this._systemShutdown=e.onShutdown,this._isAuthenticHabbo=e.isAuthenticUser)}}},{key:"onChangeNameUpdateEvent",value:function(t){if(t&&t.connection){var e=t.getParser();e&&e.resultCode===I_.NAME_OK&&(this._canChangeName=!1,this.events.dispatchEvent(new GN(e.name)))}}},{key:"onUserNameChangeMessageEvent",value:function(t){if(t&&t.connection){var e=t.getParser();e&&e.webId===this.userId&&(this._name=e.newName,this._canChangeName=!1,this.events.dispatchEvent(new GN(this._name)))}}},{key:"onRoomModelNameEvent",value:function(t){if(t){var e=t.getParser();e&&jj.roomVisited(e.roomId)}}},{key:"onFurnitureDataReadyEvent",value:function(t){if(this._furnitureData.removeEventListener(sD.FURNITURE_DATA_READY,this.onFurnitureDataReadyEvent),this._furnitureReady=!0,!this._furnitureListenersNotified&&(this._furnitureListenersNotified=!0,this._pendingFurnitureListeners&&this._pendingFurnitureListeners.length)){var e,i=Object(s.a)(this._pendingFurnitureListeners);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&n.loadFurnitureData()}}catch(r){i.e(r)}finally{i.f()}}this._pendingProductListeners=[]}},{key:"onProductDataReadyEvent",value:function(t){this._productData.removeEventListener(uD.PDP_PRODUCT_DATA_READY,this.onProductDataReadyEvent),this._productsReady=!0;var e,i=Object(s.a)(this._pendingProductListeners);try{for(i.s();!(e=i.n()).done;){var n=e.value;n&&n.loadProductData()}}catch(r){i.e(r)}finally{i.f()}this._pendingProductListeners=[]}},{key:"onInClientLinkEvent",value:function(t){if(t){var e=t.getParser();e&&gD.instance.createLinkEvent(e.link)}}},{key:"onMysteryBoxKeysEvent",value:function(t){if(t){var e=t.getParser();e&&this.events.dispatchEvent(new kN(e.boxColor,e.keyColor))}}},{key:"onNoobnessLevelMessageEvent",value:function(t){this._noobnessLevel=t.getParser().noobnessLevel,this._noobnessLevel!==eD.OLD_IDENTITY&&gD.instance.core.configuration.setValue("new.identity",1)}},{key:"onNitroSettingsEvent",value:function(t){this._isRoomCameraFollowDisabled=t.cameraFollow,this._chatStyle=t.chatType,this._uiFlags=t.flags,this.events.dispatchEvent(new BN(this._uiFlags))}},{key:"destroyFurnitureData",value:function(){this._furnitureData&&(this._furnitureData.dispose(),this._furnitureData=null)}},{key:"destroyProductData",value:function(){this._productData&&(this._productData.dispose(),this._productData=null)}},{key:"getFloorItemData",value:function(t){var e=this._floorItems.get(t);return e||null}},{key:"getFloorItemDataByName",value:function(t){if(!t||!this._floorItems||!this._floorItems.size)return null;var e,i=Object(s.a)(this._floorItems.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.className===t)return n}}catch(r){i.e(r)}finally{i.f()}}},{key:"getWallItemData",value:function(t){var e=this._wallItems.get(t);return e||null}},{key:"getWallItemDataByName",value:function(t){if(!t||!this._wallItems||!this._wallItems.size)return null;var e,i=Object(s.a)(this._wallItems.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n&&n.className===t)return n}}catch(r){i.e(r)}finally{i.f()}}},{key:"getProductData",value:function(t){return this._productsReady||this.loadProductData(),this._products.get(t)}},{key:"getBadgeUrl",value:function(t){return this._badgeImageManager.getBadgeUrl(t)}},{key:"getGroupBadgeUrl",value:function(t){return this._badgeImageManager.getBadgeUrl(t,tD.GROUP_BADGE)}},{key:"getBadgeImage",value:function(t){return this._badgeImageManager.getBadgeImage(t)}},{key:"getGroupBadgeImage",value:function(t){return this._badgeImageManager.getBadgeImage(t,tD.GROUP_BADGE)}},{key:"loadBadgeImage",value:function(t){return this._badgeImageManager.loadBadgeImage(t)}},{key:"loadGroupBadgeImage",value:function(t){return this._badgeImageManager.loadBadgeImage(t,tD.GROUP_BADGE)}},{key:"hasSecurity",value:function(t){return this._securityLevel>=t}},{key:"giveRespect",value:function(t){t<0||this._respectsLeft<=0||(this.send(new pT(t)),this._respectsLeft--)}},{key:"givePetRespect",value:function(t){t<0||this._respectsPetLeft<=0||(this.send(new wm(t)),this._respectsPetLeft--)}},{key:"sendSpecialCommandMessage",value:function(t){this.send(new Ib(t))}},{key:"sendChatStyleUpdate",value:function(t){this._chatStyle=t,this.send(new Tb(t))}},{key:"ignoreUser",value:function(t){this._ignoredUsersManager&&this._ignoredUsersManager.ignoreUser(t)}},{key:"unignoreUser",value:function(t){this._ignoredUsersManager&&this._ignoredUsersManager.unignoreUser(t)}},{key:"isUserIgnored",value:function(t){return this._ignoredUsersManager&&this._ignoredUsersManager.isIgnored(t)}},{key:"getGroupBadge",value:function(t){return this._groupInformationManager&&this._groupInformationManager.getGroupBadge(t)}},{key:"send",value:function(t){this._communication.connection.send(t)}},{key:"communication",get:function(){return this._communication}},{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._name}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"realName",get:function(){return this._realName}},{key:"ignoredUsersManager",get:function(){return this._ignoredUsersManager}},{key:"groupInformationManager",get:function(){return this._groupInformationManager}},{key:"respectsReceived",get:function(){return this._respectsReceived}},{key:"respectsLeft",get:function(){return this._respectsLeft}},{key:"respectsPetLeft",get:function(){return this._respectsPetLeft}},{key:"canChangeName",get:function(){return this._canChangeName}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"securityLevel",get:function(){return this._securityLevel}},{key:"isAmbassador",get:function(){return this._isAmbassador}},{key:"isNoob",get:function(){return this._noobnessLevel!==eD.OLD_IDENTITY}},{key:"isRealNoob",get:function(){return this._noobnessLevel===eD.REAL_NOOB}},{key:"isSystemOpen",get:function(){return this._systemOpen}},{key:"isSystemShutdown",get:function(){return this._systemShutdown}},{key:"isAuthenticHabbo",get:function(){return this._isAuthenticHabbo}},{key:"isModerator",get:function(){return this._securityLevel>=iD.MODERATOR}},{key:"isCameraFollowDisabled",get:function(){return this._isRoomCameraFollowDisabled}},{key:"chatStyle",get:function(){return this._chatStyle}},{key:"uiFlags",get:function(){return this._uiFlags}}]),i}(w),hD=i(58),_D=i(53),lD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i)}(E.a);lD.TRAX_SONG_COMPLETE="SME_TRAX_SONG_COMPLETE";var dD=Object(a.a)((function t(){Object(r.a)(this,t)}));dD.PRIORITY_ROOM_PLAYLIST=0,dD.PRIORITY_USER_PLAYLIST=1,dD.PRIORITY_SONG_PLAY=2,dD.PRIORITY_PURCHASE_PREVIEW=3,dD.PRIORITY_COUNT=4;var fD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._timerInstance=void 0,t._songRequestList=void 0,t._requestedSongs=void 0,t._availableSongs=void 0,t._songRequestsPerPriority=void 0,t._currentEntryId=void 0,t._playPosition=void 0,t._isPlaying=void 0,t._timerInstance=null,t._songRequestList=[],t._requestedSongs=new Map,t._availableSongs=new Map,t._songRequestsPerPriority=[],t._currentEntryId=-1,t._playPosition=-1,t._isPlaying=!1,t.onEvent=t.onEvent.bind(Object(l.a)(t)),t._timerInstance=setInterval(t.onTick.bind(Object(l.a)(t)),1e3),t}return Object(a.a)(i,[{key:"onInit",value:function(){gD.instance.communication.connection.addMessageEvent(new s_(this.onEvent)),gD.instance.communication.connection.addMessageEvent(new r_(this.onEvent)),gD.instance.communication.connection.addMessageEvent(new Jh(this.onNowPlayingMessageEvent.bind(this))),gD.instance.communication.connection.addMessageEvent(new Zh(this.onEvent)),gD.instance.communication.connection.addMessageEvent(new Qh(this.onEvent)),gD.instance.roomEngine.events.addEventListener(pR.JUKEBOX_INIT,this.onEvent),gD.instance.roomEngine.events.addEventListener(pR.JUKEBOX_DISPOSE,this.onEvent),gD.instance.roomEngine.events.addEventListener(pR.SOUND_MACHINE_INIT,this.onEvent),gD.instance.roomEngine.events.addEventListener(pR.SOUND_MACHINE_DISPOSE,this.onEvent),this.events.addEventListener(lD.TRAX_SONG_COMPLETE,this.onEvent)}},{key:"onDispose",value:function(){this._timerInstance&&(clearInterval(this._timerInstance),this._timerInstance=null),gD.instance.communication.connection.removeMessageEvent(new s_(this.onEvent)),gD.instance.communication.connection.removeMessageEvent(new r_(this.onEvent)),gD.instance.communication.connection.removeMessageEvent(new Jh(this.onNowPlayingMessageEvent.bind(this))),gD.instance.communication.connection.removeMessageEvent(new Zh(this.onEvent)),gD.instance.communication.connection.removeMessageEvent(new Qh(this.onEvent)),gD.instance.roomEngine.events.removeEventListener(pR.JUKEBOX_INIT,this.onEvent),gD.instance.roomEngine.events.removeEventListener(pR.JUKEBOX_DISPOSE,this.onEvent),gD.instance.roomEngine.events.removeEventListener(pR.SOUND_MACHINE_INIT,this.onEvent),gD.instance.roomEngine.events.removeEventListener(pR.SOUND_MACHINE_DISPOSE,this.onEvent),this.events.removeEventListener(lD.TRAX_SONG_COMPLETE,this.onEvent)}},{key:"onEvent",value:function(t){}},{key:"onTraxSongInfoMessageEvent",value:function(t){var e,i=t.getParser(),n=Object(s.a)(i.songs);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=null!==this._availableSongs.get(r.id);this._requestedSongs.get(r.id);if(!a){var o=new n_(r.id,r.length,r.name,r.creator,r.data);this._availableSongs.set(r.id,o);var u=this.getTopRequestPriority();this.getSongIdRequestedAtPriority(u)}}}catch(c){n.e(c)}finally{n.f()}}},{key:"onNowPlayingMessageEvent",value:function(t){var e=t.getParser();this._isPlaying=-1!==e.currentSongId,e.currentSongId>=0?this.playSong(e.currentSongId,dD.PRIORITY_ROOM_PLAYLIST,e.syncCount/1e3,0,1,1):this.stopPlaying(),e.nextSongId>=0&&this.requestSong(e.nextSongId,!0),this._playPosition=e.currentPosition}},{key:"onTick",value:function(){0!==this._songRequestList.length&&(gD.instance.communication.connection.send(Object(_D.a)(Kb,Object(T.a)(this._songRequestList))),this._songRequestList=[])}},{key:"requestSong",value:function(t,e){null===this._requestedSongs.get(t)&&(this._requestedSongs.set(t,e),this._songRequestList.push(t))}},{key:"playSong",value:function(t,e){}},{key:"stopPlaying",value:function(){this._currentEntryId=-1,this._playPosition=-1,this._isPlaying=!1}},{key:"getTopRequestPriority",value:function(){return this._songRequestsPerPriority.length-1}},{key:"getSongIdRequestedAtPriority",value:function(t){return t<0||t>=dD.PRIORITY_COUNT?-1:this._songRequestsPerPriority[t]?this._songRequestsPerPriority[t].songId:-1}},{key:"playPosition",get:function(){return this._playPosition},set:function(t){this._playPosition=t}}]),i}(w);fD.SKIP_POSITION_SET=-1,fD.MAXIMUM_NOTIFY_PRIORITY=dD.PRIORITY_ROOM_PLAYLIST;var vD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._volumeSystem=void 0,t._volumeFurni=void 0,t._volumeTrax=void 0,t._internalSamples=void 0,t._furniSamples=void 0,t._furnitureBeingPlayed=void 0,t._musicManager=void 0,t._volumeSystem=.5,t._volumeFurni=.5,t._volumeTrax=.5,t._internalSamples=new H,t._furniSamples=new H,t._furnitureBeingPlayed=new H,t._musicManager=new fD,t.onEvent=t.onEvent.bind(Object(l.a)(t)),t}return Object(a.a)(i,[{key:"onInit",value:function(){this._musicManager.init(),gD.instance.roomEngine.events.addEventListener(aR.PLAY_SAMPLE,this.onEvent),gD.instance.roomEngine.events.addEventListener(eR.REMOVED,this.onEvent),gD.instance.roomEngine.events.addEventListener(VT.DISPOSED,this.onEvent),gD.instance.events.addEventListener(QN.SETTINGS_UPDATED,this.onEvent),gD.instance.events.addEventListener(hD.a.PLAY_SOUND,this.onEvent)}},{key:"onDispose",value:function(){this._musicManager&&(this._musicManager.dispose(),this._musicManager=null),gD.instance.roomEngine.events.removeEventListener(aR.PLAY_SAMPLE,this.onEvent),gD.instance.roomEngine.events.removeEventListener(eR.REMOVED,this.onEvent),gD.instance.roomEngine.events.removeEventListener(VT.DISPOSED,this.onEvent),gD.instance.events.removeEventListener(QN.SETTINGS_UPDATED,this.onEvent),gD.instance.events.removeEventListener(hD.a.PLAY_SOUND,this.onEvent)}},{key:"onEvent",value:function(t){var e=this;switch(t.type){case aR.PLAY_SAMPLE:var i=t;return void this.playFurniSample(i.objectId,i.sampleId,i.pitch);case eR.REMOVED:var n=t;return void this.stopFurniSample(n.objectId);case VT.DISPOSED:return void this._furnitureBeingPlayed.getKeys().forEach((function(t){e.stopFurniSample(t)}));case QN.SETTINGS_UPDATED:var s=t,r=s.volumeFurni!==this._volumeFurni;return this._volumeSystem=s.volumeSystem/100,this._volumeFurni=s.volumeFurni/100,this._volumeTrax=s.volumeTrax/100,void(r&&this.updateFurniSamplesVolume(this._volumeFurni));case hD.a.PLAY_SOUND:var a=t;return void this.playInternalSample(a.sampleCode)}}},{key:"playSample",value:function(t,e){t.volume=e,t.currentTime=0;try{t.play()}catch(i){console.log(i)}}},{key:"playInternalSample",value:function(t){var e=this._internalSamples.getValue(t);if(!e){var i=gD.instance.getConfiguration("sounds.url");e=new Audio(i.replace("%sample%",t)),this._internalSamples.add(t,e)}this.playSample(e,this._volumeSystem)}},{key:"playFurniSample",value:function(t,e,i){var n=this,s=this._furniSamples.getValue(e);if(!s){var r=gD.instance.getConfiguration("external.samples.url");s=new Audio(r.replace("%sample%",e.toString())),this._furniSamples.add(e,s)}this._furnitureBeingPlayed.hasKey(t)||this._furnitureBeingPlayed.add(t,e),s.onended=function(e){n.stopFurniSample(t)},s.onpause=function(e){n.stopFurniSample(t)},s.onerror=function(e){n.stopFurniSample(t)},this.playSample(s,this._volumeFurni,i)}},{key:"stopInternalSample",value:function(t){var e=this._internalSamples.getValue(t);if(e)try{e.pause()}catch(i){console.log(i)}}},{key:"stopFurniSample",value:function(t){var e=this._furnitureBeingPlayed.getValue(t);if(e){var i=this._furniSamples.getValue(e);if(this._furnitureBeingPlayed.remove(t),i)try{i.pause()}catch(n){console.log(n)}}}},{key:"updateInternalSamplesVolume",value:function(t){this._internalSamples.getValues().forEach((function(e){e.volume=t}))}},{key:"updateFurniSamplesVolume",value:function(t){this._furniSamples.getValues().forEach((function(e){e.volume=t}))}},{key:"musicManager",get:function(){return this._musicManager}}]),i}(w);LT.available,O.b.SCALE_MODE=window.devicePixelRatio%1?g.p.LINEAR:g.p.NEAREST,O.b.ROUND_PIXELS=!0;var gD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,n))._nitroTimer=void 0,s._worker=void 0,s._core=void 0,s._events=void 0,s._communication=void 0,s._localization=void 0,s._avatar=void 0,s._roomEngine=void 0,s._sessionDataManager=void 0,s._roomSessionManager=void 0,s._roomManager=void 0,s._cameraManager=void 0,s._soundManager=void 0,s._linkTrackers=void 0,s._workerTrackers=void 0,s._isReady=void 0,s._isDisposed=void 0,i.INSTANCE||(i.INSTANCE=Object(l.a)(s)),s._nitroTimer=new B,s._worker=null,s._core=t,s._events=new b,s._communication=new CT(t.communication),s._localization=new FT(s._communication),s._avatar=new Fe,s._roomEngine=new rN(s._communication),s._sessionDataManager=new cD(s._communication),s._roomSessionManager=new qN(s._communication,s._roomEngine),s._roomManager=new It(s._roomEngine,s._roomEngine.visualizationFactory,s._roomEngine.logicFactory),s._cameraManager=new pi,s._soundManager=new vD,s._linkTrackers=[],s._workerTrackers=[],s._isReady=!1,s._isDisposed=!1,s._core.configuration.events.addEventListener(p.LOADED,s.onConfigurationLoadedEvent.bind(Object(l.a)(s))),s._roomEngine.events.addEventListener(VT.ENGINE_INITIALIZED,s.onRoomEngineReady.bind(Object(l.a)(s))),s._worker&&(s._worker.onmessage=s.createWorkerEvent.bind(Object(l.a)(s))),s}return Object(a.a)(i,[{key:"init",value:function(){if(!this._isReady&&!this._isDisposed){if(this._avatar&&this._avatar.init(),this._soundManager&&this._soundManager.init(),this._roomEngine&&(this._roomEngine.sessionDataManager=this._sessionDataManager,this._roomEngine.roomSessionManager=this._roomSessionManager,this._roomEngine.roomManager=this._roomManager,this._sessionDataManager&&this._sessionDataManager.init(),this._roomSessionManager&&this._roomSessionManager.init(),this._roomEngine.init()),!this._communication.connection)throw new Error("No connection found");new UT(this._communication.connection),this._isReady=!0}}},{key:"dispose",value:function(){this._isDisposed||(this._roomManager&&(this._roomManager.dispose(),this._roomManager=null),this._roomSessionManager&&(this._roomSessionManager.dispose(),this._roomSessionManager=null),this._sessionDataManager&&(this._sessionDataManager.dispose(),this._sessionDataManager=null),this._roomEngine&&(this._roomEngine.dispose(),this._roomEngine=null),this._avatar&&(this._avatar.dispose(),this._avatar=null),this._soundManager&&(this._soundManager.dispose(),this._soundManager=null),this._communication&&(this._communication.dispose(),this._communication=null),Object(d.a)(Object(f.a)(i.prototype),"destroy",this).call(this),this._isDisposed=!0,this._isReady=!1)}},{key:"onConfigurationLoadedEvent",value:function(t){var e=this.getConfiguration("system.animation.fps",24);this.getConfiguration("system.limits.fps",!0)&&(i.instance.ticker.maxFPS=e)}},{key:"onRoomEngineReady",value:function(t){this.startSendingHeartBeat()}},{key:"getConfiguration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._core.configuration.getValue(t,e)}},{key:"getLocalization",value:function(t){return this._localization.getValue(t)}},{key:"getLocalizationWithParameter",value:function(t,e,i){return this._localization.getValueWithParameter(t,e,i)}},{key:"getLocalizationWithParameters",value:function(t,e,i){return this._localization.getValueWithParameters(t,e,i)}},{key:"addWorkerEventTracker",value:function(t){this._workerTrackers.indexOf(t)>=0||this._workerTrackers.push(t)}},{key:"removeWorkerEventTracker",value:function(t){var e=this._workerTrackers.indexOf(t);-1!==e&&this._workerTrackers.splice(e,1)}},{key:"createWorkerEvent",value:function(t){if(t){var e,i=t.data,n=Object(s.a)(this._workerTrackers);try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&r.workerMessageReceived(i)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"sendWorkerEvent",value:function(t){t&&this._worker&&this._worker.postMessage(t)}},{key:"addLinkEventTracker",value:function(t){this._linkTrackers.indexOf(t)>=0||this._linkTrackers.push(t)}},{key:"removeLinkEventTracker",value:function(t){var e=this._linkTrackers.indexOf(t);-1!==e&&this._linkTrackers.splice(e,1)}},{key:"createLinkEvent",value:function(t){if(t&&""!==t){var e,i=Object(s.a)(this._linkTrackers);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.eventUrlPrefix;r.length>0?t.substr(0,r.length)===r&&n.linkReceived(t):n.linkReceived(t)}}}catch(a){i.e(a)}finally{i.f()}}}},{key:"startSendingHeartBeat",value:function(){this.sendHeartBeat(),setInterval(this.sendHeartBeat,1e4)}},{key:"sendHeartBeat",value:function(){jj.sendHeartBeat()}},{key:"setWorker",value:function(t){this._worker=t,this._worker.onmessage=this.createWorkerEvent.bind(this)}},{key:"nitroTimer",get:function(){return this._nitroTimer}},{key:"core",get:function(){return this._core}},{key:"events",get:function(){return this._events}},{key:"localization",get:function(){return this._localization}},{key:"communication",get:function(){return this._communication}},{key:"avatar",get:function(){return this._avatar}},{key:"roomEngine",get:function(){return this._roomEngine}},{key:"sessionDataManager",get:function(){return this._sessionDataManager}},{key:"roomSessionManager",get:function(){return this._roomSessionManager}},{key:"roomManager",get:function(){return this._roomManager}},{key:"cameraManager",get:function(){return this._cameraManager}},{key:"soundManager",get:function(){return this._soundManager}},{key:"width",get:function(){return this.renderer.width}},{key:"height",get:function(){return this.renderer.height}},{key:"ticker",get:function(){return y.a.shared}},{key:"time",get:function(){return this.ticker.lastTime}},{key:"isReady",get:function(){return this._isReady}},{key:"isDisposed",get:function(){return this._isDisposed}}],[{key:"bootstrap",value:function(){i.INSTANCE&&(i.INSTANCE.dispose(),i.INSTANCE=null);var t=document.createElement("canvas"),e=new this(new x,{autoDensity:!1,resolution:window.devicePixelRatio,width:window.innerWidth,height:window.innerHeight,view:t});t.addEventListener("webglcontextlost",(function(){return e.events.dispatchEvent(new E.a(i.WEBGL_CONTEXT_LOST))}))}},{key:"instance",get:function(){return this.INSTANCE||null}}]),i}(v.a);gD.WEBGL_CONTEXT_LOST="NE_WEBGL_CONTEXT_LOST",gD.WEBGL_UNAVAILABLE="NE_WEBGL_UNAVAILABLE",gD.READY="NE_READY!",gD.INSTANCE=null;var OD=function(){function t(e,i){if(Object(r.a)(this,t),this._referenceCount=void 0,this._referenceTimestamp=void 0,this._name=void 0,this._baseTexture=void 0,this._data=void 0,this._textures=void 0,this._assets=void 0,this._palettes=void 0,this._paletteAssetNames=void 0,!e)throw new Error("invalid_collection");this._name=e.name,this._baseTexture=i&&i.baseTexture||null,this._data=e,this._textures=new Map,this._assets=new Map,this._palettes=new Map,this._paletteAssetNames=[],i&&this.addLibraryAsset(i.textures),this.define(e)}return Object(a.a)(t,[{key:"dispose",value:function(){if(this._palettes){var t,e=Object(s.a)(this._palettes.values());try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(r){e.e(r)}finally{e.f()}this._palettes.clear()}if(this._paletteAssetNames&&(this.disposePaletteAssets(),this._paletteAssetNames=null),this._assets){var i,n=Object(s.a)(this._assets.values());try{for(n.s();!(i=n.n()).done;){i.value.recycle()}}catch(r){n.e(r)}finally{n.f()}this._assets.clear()}}},{key:"addReference",value:function(){this._referenceCount++,this._referenceTimestamp=gD.instance.time}},{key:"removeReference",value:function(){this._referenceCount--,this._referenceCount<=0&&(this._referenceCount=0,this._referenceTimestamp=gD.instance.time,this.disposePaletteAssets(!1))}},{key:"define",value:function(t){var e=t.assets,i=t.palettes;e&&this.defineAssets(e),i&&this.definePalettes(i)}},{key:"defineAssets",value:function(t){if(t)for(var e in t){var i=t[e];if(i){var n=-i.x||0,s=-i.y||0,r=!1,a=i.usesPalette||!1,o=i.source||"";i.flipH&&o.length&&(r=!0),o.length||(o=e);var u=this.getLibraryAsset(o);if(u){var c=this.createAsset(e,o,u,r,false,n,s,a);if(!c){var h=this.getAsset(e);h&&h.name!==h.source&&(c=this.replaceAsset(e,o,u,r,false,n,s,a))}}}}}},{key:"definePalettes",value:function(t){if(t)for(var e in t){var i=t[e];if(i){var n=i.id.toString();if(!this._palettes.get(n)){var s=16777215,r=16777215,a=i.color1;a&&a.length>0&&(s=parseInt(a,16)),(a=i.color2)&&a.length>0&&(r=parseInt(a,16)),this._palettes.set(n,new ai(i.rgb,s,r))}}}}},{key:"createAsset",value:function(t,e,i,n,s,r,a,o){if(this._assets.get(t))return!1;var u=qe.createAsset(t,e,i,r,a,n,s,o);return this._assets.set(t,u),!0}},{key:"replaceAsset",value:function(t,e,i,n,s,r,a,o){var u=this._assets.get(t);return u&&(this._assets.delete(t),u.recycle()),this.createAsset(t,e,i,n,s,r,a,o)}},{key:"getAsset",value:function(t){if(!t)return null;var e=this._assets.get(t);return e||null}},{key:"getAssetWithPalette",value:function(t,e){var i=t+"@"+e,n=this.getAsset(i);if(!n){if(!(n=this.getAsset(t))||!n.usesPalette)return n;var s=this.getPalette(e);if(s){var r=s.applyPalette(n.texture);r&&(this._paletteAssetNames.push(i),this.createAsset(i,n.source+"@"+e,r,n.flipH,n.flipV,n.x,n.y,!1),n=this.getAsset(i))}}return n}},{key:"getTexture",value:function(t){return this._textures.get(t)}},{key:"getPaletteNames",value:function(){return Array.from(this._palettes.keys())}},{key:"getPaletteColors",value:function(t){var e=this.getPalette(t);return e?[e.primaryColor,e.secondaryColor]:null}},{key:"getPalette",value:function(t){if(!t)return null;var e=this._palettes.get(t);return e||null}},{key:"addAsset",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!t||!e)return!1;var o=this.getLibraryAsset(t);return o?!!i&&(o.baseTexture=e.baseTexture,o.frame=e.frame,o.trim=e.trim,o.updateUvs(),!0):(this._textures.set(t,e),this.createAsset(t,t,e,r,a,n,s,!1))}},{key:"disposeAsset",value:function(t){var e=this._assets.get(t);if(e){this._assets.delete(t);var i=this.getLibraryAsset(e.source);i&&(this._textures.delete(e.source),i.destroy(!0)),e.recycle()}}},{key:"getLibraryAsset",value:function(t){if(!t)return null;t=this._name+"_"+t;var e=this._textures.get(t);return e||null}},{key:"addLibraryAsset",value:function(t){if(t)for(var e in t){var i=t[e];i&&this._textures.set(yD.removeFileExtension(e),i)}}},{key:"disposePaletteAssets",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._paletteAssetNames&&(e||this._paletteAssetNames.length>t.PALETTE_ASSET_DISPOSE_THRESHOLD)){var i,n=Object(s.a)(this._paletteAssetNames);try{for(n.s();!(i=n.n()).done;){var r=i.value;this.disposeAsset(r)}}catch(a){n.e(a)}finally{n.f()}this._paletteAssetNames=[]}}},{key:"referenceCount",get:function(){return this._referenceCount}},{key:"referenceTimestamp",get:function(){return this._referenceTimestamp}},{key:"name",get:function(){return this._name}},{key:"baseTexture",get:function(){return this._baseTexture}},{key:"data",get:function(){return this._data}},{key:"textures",get:function(){return this._textures}},{key:"assets",get:function(){return this._assets}}]),t}();OD.PALETTE_ASSET_DISPOSE_THRESHOLD=10;var yD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;return Object(r.a)(this,i),(t=e.call(this))._logger=void 0,t._textures=void 0,t._collections=void 0,t._logger=new I(t.constructor.name),t._textures=new Map,t._collections=new Map,t}return Object(a.a)(i,[{key:"getTexture",value:function(t){if(!t)return null;var e=this._textures.get(t);return e||null}},{key:"setTexture",value:function(t,e){t&&e&&this._textures.set(t,e)}},{key:"getAsset",value:function(t){if(!t)return null;var e,i=Object(s.a)(this._collections.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n){var r=n.getAsset(t);if(r)return r}}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"getCollection",value:function(t){if(!t)return null;var e=this._collections.get(t);return e||null}},{key:"createCollection",value:function(t,e){if(!t)return null;var i=new OD(t,e);if(i){var r,a=Object(s.a)(i.textures.entries());try{for(a.s();!(r=a.n()).done;){var o=Object(n.a)(r.value,2),u=o[0],c=o[1];this.setTexture(u,c)}}catch(h){a.e(h)}finally{a.f()}this._collections.set(i.name,i)}return i}},{key:"downloadAsset",value:function(t,e){this.downloadAssets([t],e)}},{key:"downloadAssets",value:function(t,e){var i=this;if(t&&t.length){var n,r=new h.b,a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;o&&r.add({url:o,crossOrigin:"anonymous",loadType:h.c.LOAD_TYPE.XHR,xhrType:h.c.XHR_RESPONSE_TYPE.BUFFER})}}catch(l){a.e(l)}finally{a.f()}var u=t.length,_=function(t,n){return t?--u?void 0:(r.destroy(),void e(!0)):(i._logger.error("Failed to download asset: "+n),r.destroy(),void e(!1))};r.load((function(t,e){var n=function(t){var n=e[t];if(!n||n.error||!n.xhr)return _(!1,n.url),{v:void 0};var s=n.xhr.getResponseHeader("Content-Type")||"application/octet-stream";if("application/octet-stream"===s){var r=new ot(n.data);return i.processAsset(r.baseTexture,r.jsonFile,(function(t){_(t,n.url)})),"continue"}if("image/png"===s||"image/gif"===s){var a=V(n.data),o=new c.c("data:".concat(s,";base64,").concat(a));if(o.valid){var u=new c.t(o);i.setTexture(n.name,u),_(!0,n.url)}else o.once("update",(function(){var t=new c.t(o);i.setTexture(n.name,t),_(!0,n.url)}));return"continue"}_(!1,n.url)};for(var s in e){var r=n(s);if("continue"!==r&&"object"===typeof r)return r.v}}))}else e(!0)}},{key:"processAsset",value:function(t,e,i){var n=this,s=e.spritesheet;if(!t||!s||!Object.keys(s).length)return this.createCollection(e,null),void i(!0);var r=function(){var r=new _.a(t,s);r.parse((function(){n.createCollection(e,r),i(!0)}))};t.valid?r():t.once("update",(function(){return r()}))}},{key:"collections",get:function(){return this._collections}}],[{key:"removeFileExtension",value:function(t){return t.substring(0,t.lastIndexOf("."))||t}}]),i}(m),ED=Object(a.a)((function t(){Object(r.a)(this,t)}));ED.RENDERER_VERSION="1.2.5",ED.UI_VERSION="";var pD=function(){function t(e,i){Object(r.a)(this,t),this._effect=void 0,this._alpha=void 0,this._effect=e,this._alpha=i}return Object(a.a)(t,[{key:"effect",get:function(){return this._effect}},{key:"alpha",get:function(){return this._alpha}}]),t}(),mD=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(r.a)(this,t),this._roomEngine=void 0,this._planeParser=void 0,this._previewRoomId=1,this._currentPreviewObjectType=0,this._currentPreviewObjectCategory=0,this._currentPreviewObjectData="",this._currentPreviewRectangle=null,this._currentPreviewCanvasWidth=0,this._currentPreviewCanvasHeight=0,this._currentPreviewScale=64,this._currentPreviewNeedsZoomOut=void 0,this._automaticStateChange=void 0,this._previousAutomaticStateChangeTime=void 0,this._addViewOffset=void 0,this._backgroundColor=305148561,this._backgroundSprite=null,this._disableUpdate=!1,this._roomEngine=e,this._planeParser=new Xc,this._previewRoomId=ii.makeRoomPreviewerId(i),this._addViewOffset=new Z.g(0,0),this.onRoomObjectAdded=this.onRoomObjectAdded.bind(this),this.onRoomInitializedonRoomInitialized=this.onRoomInitializedonRoomInitialized.bind(this),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.addEventListener(eR.ADDED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(eR.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.addEventListener(VT.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this.createRoomForPreview()}return Object(a.a)(t,[{key:"dispose",value:function(){this.reset(!0),this.isRoomEngineReady&&this._roomEngine.events&&(this._roomEngine.events.removeEventListener(eR.ADDED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(eR.CONTENT_UPDATED,this.onRoomObjectAdded),this._roomEngine.events.removeEventListener(VT.INITIALIZED,this.onRoomInitializedonRoomInitialized)),this._backgroundSprite&&(this._backgroundSprite.destroy(),this._backgroundSprite=null),this._planeParser&&(this._planeParser.dispose(),this._planeParser=null)}},{key:"createRoomForPreview",value:function(){if(this.isRoomEngineReady){var t=new Xc;t.initializeTileMap(9,9);for(var e=1;e<8;){for(var i=1;i<8;)t.setTileHeight(i,e,0),i++;e++}t.initializeFromTileData(),this._roomEngine.createRoomInstance(this._previewRoomId,t.getMapData()),t.dispose()}}},{key:"reset",value:function(e){this.isRoomEngineReady&&(this._roomEngine.removeRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectWall(this._previewRoomId,t.PREVIEW_OBJECT_ID),this._roomEngine.removeRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID),e||this.updatePreviewRoomView()),this._currentPreviewObjectCategory=_t.MINIMUM}},{key:"updatePreviewModel",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new qc;n.flush(),n.parseModel(t,e,i);var s=this._roomEngine.getLegacyWallGeometry(this._previewRoomId);if(s){this._planeParser.reset();var r=n.width,a=n.height;this._planeParser.initializeTileMap(r,a);for(var o=null,u=-1,c=-1,h=0,_=0,l=0;l<a;){for(var d=0;d<r;){var f=n.getHeight(d,l);(l>0&&l<a-1||d>0&&d<r-1)&&f!=Xc.TILE_BLOCKED&&(null==o||d==o.x&&l==o.y)&&(n.getHeight(d,l-1)==Xc.TILE_BLOCKED&&n.getHeight(d-1,l)==Xc.TILE_BLOCKED&&n.getHeight(d,l+1)==Xc.TILE_BLOCKED&&(u=d+.5,c=l,h=f,_=90),n.getHeight(d,l-1)==Xc.TILE_BLOCKED&&n.getHeight(d-1,l)==Xc.TILE_BLOCKED&&n.getHeight(d+1,l)==Xc.TILE_BLOCKED&&(u=d,c=l+.5,h=f,_=180)),this._planeParser.setTileHeight(d,l,f),d++}l++}this._planeParser.setTileHeight(Math.floor(u),Math.floor(c),h),this._planeParser.initializeFromTileData(n.wallHeight),this._planeParser.setTileHeight(Math.floor(u),Math.floor(c),h+this._planeParser.wallHeight),s.scale=_S.DEFAULT_SCALE,s.initialize(r,a,this._planeParser.floorHeight);for(var v=n.height-1;v>=0;){for(var g=n.width-1;g>=0;)s.setHeight(g,v,this._planeParser.getTileHeight(g,v)),g--;v--}var O=this._planeParser.getMapData();O.doors.push({x:u,y:c,z:h,dir:_});var y=this.getRoomPreviewOwnRoomObject();y&&y.processUpdateMessage(new ZS(O))}}},{key:"addFurnitureIntoRoom",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n||(n=new Ta),this.isRoomEngineReady&&(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=_t.FLOOR,this._currentPreviewObjectData="",this._roomEngine.addFurnitureFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),i,0,n,NaN,-1,0,-1,"",!0,!1))){this._previousAutomaticStateChangeTime=gD.instance.time,this._automaticStateChange=!0;var r=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);return r&&s&&r.model.setValue(dt.FURNITURE_EXTRAS,s),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}return-1}},{key:"addWallItemIntoRoom",value:function(e,i,n){if(this.isRoomEngineReady){if(this._currentPreviewObjectCategory===_t.WALL&&this._currentPreviewObjectType===e&&this._currentPreviewObjectData===n)return t.PREVIEW_OBJECT_ID;if(this.reset(!1),this._currentPreviewObjectType=e,this._currentPreviewObjectCategory=_t.WALL,this._currentPreviewObjectData=n,this._roomEngine.addFurnitureWall(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,new Et(.5,2.3,1.8),i,0,n,0,0,-1,"",!1))return this._previousAutomaticStateChangeTime=gD.instance.time,this._automaticStateChange=!0,this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID}return-1}},{key:"addAvatarIntoRoom",value:function(e,i){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=_t.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Et(90,0,0),135,lt.getTypeNumber(lt.USER),e)&&(this._previousAutomaticStateChangeTime=gD.instance.time,this._automaticStateChange=!0,this.updateUserGesture(1),this.updateUserEffect(i),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}},{key:"addPetIntoRoom",value:function(e){return this.isRoomEngineReady?(this.reset(!1),this._currentPreviewObjectType=1,this._currentPreviewObjectCategory=_t.UNIT,this._currentPreviewObjectData=e,this._roomEngine.addRoomObjectUser(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Et(90,0,0),90,lt.getTypeNumber(lt.PET),e)&&(this._previousAutomaticStateChangeTime=gD.instance.time,this._automaticStateChange=!1,this.updateUserGesture(1),this.updateUserPosture("std")),this.updatePreviewRoomView(),t.PREVIEW_OBJECT_ID):-1}},{key:"updateUserPosture",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserPosture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,i)}},{key:"updateUserGesture",value:function(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserGesture(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}},{key:"updateUserEffect",value:function(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserEffect(this._previewRoomId,t.PREVIEW_OBJECT_ID,e)}},{key:"updateObjectUserFigure",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserFigure(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,i,n,s)}},{key:"updateObjectUserAction",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserAction(this._previewRoomId,t.PREVIEW_OBJECT_ID,e,i,n)}},{key:"updateObjectStuffData",value:function(e){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,null,null,e.state,e)}},{key:"changeRoomObjectState",value:function(){this.isRoomEngineReady&&(this._automaticStateChange=!1,this._currentPreviewObjectCategory!==_t.UNIT&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}},{key:"changeRoomObjectDirection",value:function(){if(this.isRoomEngineReady){var e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(!e)return;var i=this._roomEngine.objectEventHandler.getValidRoomObjectDirection(e,!0);switch(this._currentPreviewObjectCategory){case _t.FLOOR:var n=new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y),s=new Et(i,i,i);return void this._roomEngine.updateRoomObjectFloor(this._previewRoomId,t.PREVIEW_OBJECT_ID,n,s,null,null);case _t.WALL:return}}}},{key:"checkAutomaticRoomObjectStateChange",value:function(){if(this._automaticStateChange){var e=gD.instance.time;e>this._previousAutomaticStateChangeTime+t.AUTOMATIC_STATE_CHANGE_INTERVAL&&(this._previousAutomaticStateChangeTime=e,this.isRoomEngineReady&&this._roomEngine.changeObjectState(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory))}}},{key:"getRoomCanvas",value:function(e,i){if(this.isRoomEngineReady){var n=this._roomEngine.getRoomInstanceDisplay(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,i,this._currentPreviewScale);if(n&&null!==this._backgroundColor){var s=this._backgroundSprite;s||(s=new et(c.t.WHITE),n.addChildAt(s,0)),s.width=e,s.height=i,s.tint=this._backgroundColor}this._roomEngine.setRoomInstanceRenderingCanvasMask(this._previewRoomId,t.PREVIEW_CANVAS_ID,!0);var r=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);return r&&r.adjustLocation(new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),30),this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=i,n}return null}},{key:"modifyRoomCanvas",value:function(e,i){this.isRoomEngineReady&&(this._currentPreviewCanvasWidth=e,this._currentPreviewCanvasHeight=i,this._backgroundSprite&&(this._backgroundSprite.width=e,this._backgroundSprite.height=i),this._roomEngine.initializeRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID,e,i))}},{key:"addViewOffset",get:function(){return this._addViewOffset},set:function(t){this._addViewOffset=t}},{key:"updatePreviewObjectBoundingRectangle",value:function(e){var i=this._roomEngine.getRoomObjectBoundingRectangle(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,t.PREVIEW_CANVAS_ID);if(i&&e)if(i.x+=-(this._currentPreviewCanvasWidth>>1),i.y+=-(this._currentPreviewCanvasHeight>>1),i.x+=-e.x,i.y+=-e.y,this._currentPreviewRectangle){var n=this._currentPreviewRectangle.clone().enlarge(i);(n.width-this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth-this._currentPreviewRectangle.width>>1||n.height-this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1||this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)&&(this._currentPreviewRectangle=n)}else this._currentPreviewRectangle=i}},{key:"validatePreviewSize",value:function(e){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return e;if(this.isRoomEngineReady){var i=this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID);this._currentPreviewRectangle.width>this._currentPreviewCanvasWidth*(1+t.ALLOWED_IMAGE_CUT)||this._currentPreviewRectangle.height>this._currentPreviewCanvasHeight*(1+t.ALLOWED_IMAGE_CUT)?t.ZOOM_ENABLED?.5!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5,null,null),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0,e.x=e.x>>1,e.y=e.y>>1,this._currentPreviewRectangle.x=this._currentPreviewRectangle.x>>2,this._currentPreviewRectangle.y=this._currentPreviewRectangle.y>>2,this._currentPreviewRectangle.width=this._currentPreviewRectangle.width>>2,this._currentPreviewRectangle.height=this._currentPreviewRectangle.height>>2):i.isZoomedIn()&&(i.performZoomOut(),this._currentPreviewScale=t.SCALE_SMALL,this._currentPreviewNeedsZoomOut=!0):this._currentPreviewNeedsZoomOut||(t.ZOOM_ENABLED?1!==this._roomEngine.getRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID)&&(this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1,null,null),this._currentPreviewScale=t.SCALE_NORMAL):i.isZoomedIn()||(i.performZoomIn(),this._currentPreviewScale=t.SCALE_NORMAL))}return e}},{key:"zoomIn",value:function(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,1):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomIn());this._currentPreviewScale=t.SCALE_NORMAL}},{key:"zoomOut",value:function(){this.isRoomEngineReady&&(t.ZOOM_ENABLED?this._roomEngine.setRoomInstanceRenderingCanvasScale(this._previewRoomId,t.PREVIEW_CANVAS_ID,.5):this._roomEngine.getRoomInstanceGeometry(this._previewRoomId,t.PREVIEW_CANVAS_ID).performZoomOut());this._currentPreviewScale=t.SCALE_SMALL}},{key:"updateAvatarDirection",value:function(e,i){this.isRoomEngineReady&&this._roomEngine.updateRoomObjectUserLocation(this._previewRoomId,t.PREVIEW_OBJECT_ID,new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),new Et(t.PREVIEW_OBJECT_LOCATION_X,t.PREVIEW_OBJECT_LOCATION_Y,0),!1,0,new Et(45*e,0,0),45*i)}},{key:"updateObjectRoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!!this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,t,e,i,n)}},{key:"updateRoomWallsAndFloorVisibility",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneVisibility(this._previewRoomId,t,e)}},{key:"getCanvasOffset",value:function(t){if(this._currentPreviewRectangle.width<1||this._currentPreviewRectangle.height<1)return t;var e=-(this._currentPreviewRectangle.left+this._currentPreviewRectangle.right)>>1,i=-(this._currentPreviewRectangle.top+this._currentPreviewRectangle.bottom)>>1,n=this._currentPreviewCanvasHeight-this._currentPreviewRectangle.height>>1;n>10?i+=Math.min(15,n-10):this._currentPreviewObjectCategory!==_t.UNIT?i+=5-Math.max(0,n/2):i-=5-Math.min(0,n/2),i+=this._addViewOffset.y;var s=(e+=this._addViewOffset.x)-t.x,r=i-t.y;if(0!==s||0!==r){var a=Math.sqrt(s*s+r*r);return a>10&&(e=t.x+10*s/a,i=t.y+10*r/a),new Z.g(e,i)}return null}},{key:"updatePreviewRoomView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((!this._disableUpdate||e)&&(this.checkAutomaticRoomObjectStateChange(),this.isRoomEngineReady)){var i=this._roomEngine.getRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID);if(i&&(this.updatePreviewObjectBoundingRectangle(i),this._currentPreviewRectangle)){var n=this._currentPreviewScale;i=this.validatePreviewSize(i);var s=this.getCanvasOffset(i);s&&this._roomEngine.setRoomInstanceRenderingCanvasOffset(this._previewRoomId,t.PREVIEW_CANVAS_ID,s),this._currentPreviewScale!==n&&(this._currentPreviewRectangle=null)}}}},{key:"disableUpdate",set:function(t){this._disableUpdate=t}},{key:"disableRoomEngineUpdate",set:function(t){this.isRoomEngineReady&&this._roomEngine.disableUpdate(t)}},{key:"onRoomInitializedonRoomInitialized",value:function(t){t&&(t.type!==VT.INITIALIZED||t.roomId===this._previewRoomId&&this.isRoomEngineReady&&this._roomEngine.updateRoomInstancePlaneType(this._previewRoomId,"110","99999"))}},{key:"onRoomObjectAdded",value:function(e){if(e.roomId===this._previewRoomId&&e.objectId===t.PREVIEW_OBJECT_ID&&e.category===this._currentPreviewObjectCategory){this._currentPreviewRectangle=null,this._currentPreviewNeedsZoomOut=!1;var i=this._roomEngine.getRoomObject(e.roomId,e.objectId,e.category);if(i&&i.model&&e.category===_t.WALL){var n=i.model.getValue(dt.FURNITURE_SIZE_Z),s=i.model.getValue(dt.FURNITURE_CENTER_Z);null===n&&null===s||this._roomEngine.updateRoomObjectWallLocation(e.roomId,e.objectId,new Et(.5,2.3,(3.6-n)/2+s))}}}},{key:"updateRoomEngine",value:function(){this.isRoomEngineReady&&this._roomEngine.runUpdate()}},{key:"getRenderingCanvas",value:function(){var e=this._roomEngine.getRoomInstanceRenderingCanvas(this._previewRoomId,t.PREVIEW_CANVAS_ID);return e||null}},{key:"getGenericRoomObjectImage",value:function(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:-1,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return this.isRoomEngineReady?this._roomEngine.getGenericRoomObjectImage(t,e,i,n,s,r,a,o,u,c,h):null}},{key:"getRoomObjectImage",value:function(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.isRoomEngineReady?this._roomEngine.getRoomObjectImage(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory,e,i,n,s):null}},{key:"getRoomObjectCurrentImage",value:function(){if(this.isRoomEngineReady){var e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(e&&e.visualization)return e.visualization.getImage(16777215,-1)}return null}},{key:"getRoomPreviewObject",value:function(){if(this.isRoomEngineReady){var e=this._roomEngine.getRoomObject(this._previewRoomId,t.PREVIEW_OBJECT_ID,this._currentPreviewObjectCategory);if(e)return e}return null}},{key:"getRoomPreviewOwnRoomObject",value:function(){if(this.isRoomEngineReady){var t=this._roomEngine.getRoomObject(this._previewRoomId,rN.ROOM_OBJECT_ID,_t.ROOM);if(t)return t}return null}},{key:"isRoomEngineReady",get:function(){return this._roomEngine&&this._roomEngine.ready}},{key:"roomId",get:function(){return this._previewRoomId}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t}},{key:"width",get:function(){return this._currentPreviewCanvasWidth}},{key:"height",get:function(){return this._currentPreviewCanvasHeight}}]),t}();mD.SCALE_NORMAL=64,mD.SCALE_SMALL=32,mD.PREVIEW_COUNTER=0,mD.PREVIEW_CANVAS_ID=1,mD.PREVIEW_OBJECT_ID=1,mD.PREVIEW_OBJECT_LOCATION_X=2,mD.PREVIEW_OBJECT_LOCATION_Y=2,mD.ALLOWED_IMAGE_CUT=.25,mD.AUTOMATIC_STATE_CHANGE_INTERVAL=2500,mD.ZOOM_ENABLED=!0;var ID=Object(a.a)((function t(){Object(r.a)(this,t)}));ID.NO_CLUB=0,ID.CLUB=1,ID.VIP=2;var bD=function(){function t(e){Object(r.a)(this,t),this._target=void 0,this._running=void 0,this._complete=!0,this._tag=void 0,this._target=e}return Object(a.a)(t,[{key:"running",get:function(){return this._running&&!!this._target}},{key:"complete",get:function(){return this._complete}},{key:"target",get:function(){return this._target},set:function(t){this._target=t}},{key:"tag",get:function(){return this._tag},set:function(t){this._tag=t}},{key:"start",value:function(){this._running=!0}},{key:"update",value:function(t){}},{key:"stop",value:function(){this._target=null,this._running=!1}},{key:"tick",value:function(t){}}]),t}(),TD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){return Object(r.a)(this,i),e.call(this,t)}return Object(a.a)(i,[{key:"tick",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"tick",this).call(this,t),this.target&&(this.target.remove(),this.target=null)}}]),i}(bD),RD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._startTimeMs=void 0,s._duration=void 0,s._complete=!1,s._duration=n,s}return Object(a.a)(i,[{key:"duration",get:function(){return this._duration}},{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._complete=!1,this._startTimeMs=gD.instance.time}},{key:"tick",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"tick",this).call(this,t);var e=(t-this._startTimeMs)/this._duration;e<1?this.update(e):(this.update(1),this._complete=!0)}}]),i}(bD),kD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s){var a;return Object(r.a)(this,i),(a=e.call(this,t,n))._height=void 0,a._offset=void 0,a._height=s,a}return Object(a.a)(i,[{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._offset=0,this.target.style.top=this._offset-this._height+"px"}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.target.style.top=this._offset-this._height+this.getBounceOffset(t)*this._height+"px"}},{key:"getBounceOffset",value:function(t){return t<.364?7.5625*t*t:t<.727?7.5625*(t-=.545)*t+.75:t<.909?7.5625*(t-=.9091)*t+.9375:7.5625*(t-=.955)*t+.984375}},{key:"stop",value:function(){this.target.style.top=this._offset+"px",Object(d.a)(Object(f.a)(i.prototype),"stop",this).call(this)}}]),i}(RD),AD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){return Object(r.a)(this,i),e.call(this,t,n)}return Object(a.a)(i,[{key:"update",value:function(t){this._interval.update(Math.pow(t,1/this._rate))}}]),i}(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n){var s;return Object(r.a)(this,i),(s=e.call(this,t))._rate=void 0,s._rate=n,s}return Object(a.a)(i)}(function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t.target,t.duration))._interval=void 0,n._interval=t,n}return Object(a.a)(i,[{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._interval.start()}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._interval.update(t)}},{key:"stop",value:function(){Object(d.a)(Object(f.a)(i.prototype),"stop",this).call(this),this._interval.stop()}}]),i}(RD))),SD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t,n,s,a,o,u){var c;return Object(r.a)(this,i),(c=e.call(this,t,n))._startX=void 0,c._startY=void 0,c._deltaX=void 0,c._deltaY=void 0,c._height=void 0,c._numJumps=void 0,c._deltaX=s,c._deltaY=a,c._height=-o,c._numJumps=u,c}return Object(a.a)(i,[{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._startX=this.target.offsetLeft,this._startY=this.target.offsetTop}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this.target.style.left=this._startX+this._deltaX*t+"px",this.target.style.top=this._startY+this._height*Math.abs(Math.sin(t*Math.PI*this._numJumps))+this._deltaY*t+"px"}}]),i}(RD),jD=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"getNumRunningMotions",value:function(e){var i,n=0,r=Object(s.a)(t._RUNNING_MOTIONS);try{for(r.s();!(i=r.n()).done;){i.value.target===e&&n++}}catch(a){r.e(a)}finally{r.f()}return n}}],[{key:"TIMER_TIME",get:function(){return 1e3/gD.instance.ticker.FPS}},{key:"runMotion",value:function(e){return-1===t._RUNNING_MOTIONS.indexOf(e)&&-1===t._QUEUED_MOTIONS.indexOf(e)&&(t._IS_UPDATING?t._QUEUED_MOTIONS.push(e):(t._RUNNING_MOTIONS.push(e),e.start()),t.startTimer()),e}},{key:"removeMotion",value:function(e){var i=t._RUNNING_MOTIONS.indexOf(e);i>-1?t._IS_UPDATING?-1==(i=t._REMOVED_MOTIONS.indexOf(e))&&t._REMOVED_MOTIONS.push(e):(t._RUNNING_MOTIONS.splice(i,1),e.running&&e.stop(),t._RUNNING_MOTIONS.length||t.stopTimer()):(i=t._QUEUED_MOTIONS.indexOf(e))>-1&&t._QUEUED_MOTIONS.splice(i,1)}},{key:"getMotionByTag",value:function(e){var i,n=Object(s.a)(t._RUNNING_MOTIONS);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.tag==e)return r}}catch(c){n.e(c)}finally{n.f()}var a,o=Object(s.a)(t._QUEUED_MOTIONS);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u.tag==e)return u}}catch(c){o.e(c)}finally{o.f()}return null}},{key:"getMotionByTarget",value:function(e){var i,n=Object(s.a)(t._RUNNING_MOTIONS);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r.target==e)return r}}catch(c){n.e(c)}finally{n.f()}var a,o=Object(s.a)(t._QUEUED_MOTIONS);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u.target==e)return u}}catch(c){o.e(c)}finally{o.f()}return null}},{key:"getMotionByTagAndTarget",value:function(e,i){var n,r=Object(s.a)(t._RUNNING_MOTIONS);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.tag==e&&a.target==i)return a}}catch(h){r.e(h)}finally{r.f()}var o,u=Object(s.a)(t._QUEUED_MOTIONS);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.tag==e&&c.target==i)return c}}catch(h){u.e(h)}finally{u.f()}return null}},{key:"isRunning",get:function(){return!!t._TIMER}},{key:"isUpdating",get:function(){return t._IS_UPDATING}},{key:"onTick",value:function(){t._IS_UPDATING=!0;for(var e=gD.instance.time,i=null;i=t._QUEUED_MOTIONS.pop();)t._RUNNING_MOTIONS.push(i);for(;i=t._REMOVED_MOTIONS.pop();)t._RUNNING_MOTIONS.splice(t._RUNNING_MOTIONS.indexOf(i),1),i.running&&i.stop();var n,r=Object(s.a)(t._RUNNING_MOTIONS);try{for(r.s();!(n=r.n()).done;)(i=n.value).running?(i.tick(e),i.complete&&t.removeMotion(i)):t.removeMotion(i)}catch(a){r.e(a)}finally{r.f()}t._RUNNING_MOTIONS.length||t.stopTimer(),t._IS_UPDATING=!1}},{key:"startTimer",value:function(){t._TIMER||(t._TIMER=setInterval(t.onTick,t.TIMER_TIME))}},{key:"stopTimer",value:function(){t._TIMER&&(clearInterval(t._TIMER),t._TIMER=null)}}]),t}();jD._QUEUED_MOTIONS=[],jD._RUNNING_MOTIONS=[],jD._REMOVED_MOTIONS=[],jD._TIMER=null,jD._IS_UPDATING=!1;var ND=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(){var t;Object(r.a)(this,i);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];(t=e.call(this,s?s[0].target:null))._motion=void 0,t._queue=void 0,t._queue=[];for(var o=0,u=s;o<u.length;o++){var c=u[o];t._queue.push(c)}return t._motion=s[0],t._complete=!t._motion,t}return Object(a.a)(i,[{key:"running",get:function(){return!(!this._running||!this._motion)&&this._motion.running}},{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._motion.start()}},{key:"update",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"update",this).call(this,t),this._motion.running&&this._motion.update(t)}},{key:"stop",value:function(){Object(d.a)(Object(f.a)(i.prototype),"stop",this).call(this),this._motion.stop()}},{key:"tick",value:function(t){if(Object(d.a)(Object(f.a)(i.prototype),"tick",this).call(this,t),this._motion.tick(t),this._motion.complete){this._motion.stop();var e=this._queue.indexOf(this._motion);e<this._queue.length-1?(this._motion=this._queue[e+1],this._target=this._motion.target,this._motion.start()):this._complete=!0}}}]),i}(bD),DD=function(t){Object(o.a)(i,t);var e=Object(u.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,null))._startTimeMs=void 0,n._waitTimeMs=void 0,n._waitTimeMs=t,n}return Object(a.a)(i,[{key:"running",get:function(){return this._running}},{key:"start",value:function(){Object(d.a)(Object(f.a)(i.prototype),"start",this).call(this),this._complete=!1,this._startTimeMs=gD.instance.time}},{key:"tick",value:function(t){Object(d.a)(Object(f.a)(i.prototype),"tick",this).call(this,t),this._complete=t-this._startTimeMs>=this._waitTimeMs,this._complete&&this.stop()}}]),i}(bD)}}]);