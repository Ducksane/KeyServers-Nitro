(this["webpackJsonpnitro-react"]=this["webpackJsonpnitro-react"]||[]).push([[0],{183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var r=n(69),a=n(128),c=n(3),i=n(113),s=n(8),o=n(7),l=n(4),u=n(1),d=n(2),j=function(e){if(!e)return 0;var t,n=0,r=Object(s.a)(e.achievements);try{for(r.s();!(t=r.n()).done;){n+=t.value.levelCount}}catch(a){r.e(a)}finally{r.f()}return n},b=function(){function e(t){Object(u.a)(this,e),this._code=void 0,this._achievements=void 0,this._code=t,this._achievements=[]}return Object(d.a)(e,[{key:"getProgress",value:function(){return f(this)}},{key:"getMaxProgress",value:function(){return j(this)}},{key:"code",get:function(){return this._code}},{key:"achievements",get:function(){return this._achievements},set:function(e){this._achievements=e}}]),e}(),O=function(e){if(!e)return null;var t=e.badgeId;return e.finalLevel||(t=F().getPreviousLevelBadgeId(t)),t},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=L("achievements.images.url"),a=n?"achicon_":"achcategory_";return a+=e.code,null!==t&&(a+="_".concat(t>0?"active":"inactive")),r.replace("%image%",a)},f=function(e){if(!e)return 0;var t,n=0,r=Object(s.a)(e.achievements);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=a.finalLevel?a.level:a.level-1}}catch(c){r.e(c)}finally{r.f()}return n},g=function(e){if(!e)return 0;var t,n=0,r=Object(s.a)(e.achievements);try{for(r.s();!(t=r.n()).done;){t.value.unseen>0&&n++}}catch(a){r.e(a)}finally{r.f()}return n},m=function(e){return!!e&&!!(e.finalLevel||e.level-1>0)},v=function(e){return e?e.finalLevel?e.level:e.level-1:0},p=function(){function e(t,n,r){Object(u.a)(this,e),this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0,this._productName=t,this._customImage=n,this._furnitureClassName=r}return Object(d.a)(e,[{key:"productName",get:function(){return this._productName}},{key:"customImage",get:function(){return this._customImage}},{key:"furnitureClassName",get:function(){return this._furnitureClassName}}]),e}(),x=Object(d.a)((function e(){Object(u.a)(this,e)}));x.STATE_UNLOCKED=1,x.STATE_LOCKED_AVAILABLE=2,x.STATE_LOCKED_EXPIRED=3,x.STATE_LOCKED_FUTURE=4;var _=Object(d.a)((function e(){Object(u.a)(this,e)}));_.OKAY=0,_.MISSING_OFFER=1,_.FURNI_LIMIT_REACHED=2,_.NOT_IN_ROOM=3,_.NOT_ROOM_OWNER=4,_.GUILD_ROOM=5,_.VISITORS_IN_ROOM=6;var E=function(){function e(t,n,r){Object(u.a)(this,e),this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._children=void 0,this._offerIds=void 0,this._parent=void 0,this._isVisible=void 0,this._isActive=void 0,this._isOpen=void 0,this._depth=n,this._parent=r,this._localization=t.localization,this._pageId=t.pageId,this._pageName=t.pageName,this._iconId=t.icon,this._children=[],this._offerIds=t.offerIds,this._isVisible=t.visible,this._isActive=!1,this._isOpen=!1}return Object(d.a)(e,[{key:"activate",value:function(){this._isActive=!0}},{key:"deactivate",value:function(){this._isActive=!1}},{key:"open",value:function(){this._isOpen=!0}},{key:"close",value:function(){this._isOpen=!1}},{key:"addChild",value:function(e){e&&this._children.push(e)}},{key:"depth",get:function(){return this._depth}},{key:"isBranch",get:function(){return this._children.length>0}},{key:"isLeaf",get:function(){return 0===this._children.length}},{key:"localization",get:function(){return this._localization}},{key:"pageId",get:function(){return this._pageId}},{key:"pageName",get:function(){return this._pageName}},{key:"iconId",get:function(){return this._iconId}},{key:"children",get:function(){return this._children}},{key:"offerIds",get:function(){return this._offerIds}},{key:"parent",get:function(){return this._parent}},{key:"isVisible",get:function(){return this._isVisible}},{key:"isActive",get:function(){return this._isActive}},{key:"isOpen",get:function(){return this._isOpen}}]),e}(),I=function(){function e(t,n,r,a,c){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;Object(u.a)(this,e),this._pageId=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._mode=void 0,this._pageId=t,this._layoutCode=n,this._localization=r,this._offers=a,this._acceptSeasonCurrencyAsCredits=c;var o,l=Object(s.a)(a);try{for(l.s();!(o=l.n()).done;){var d=o.value;d.page=this}}catch(j){l.e(j)}finally{l.f()}this._mode=-1===i?e.MODE_NORMAL:i}return Object(d.a)(e,[{key:"pageId",get:function(){return this._pageId}},{key:"layoutCode",get:function(){return this._layoutCode}},{key:"localization",get:function(){return this._localization}},{key:"offers",get:function(){return this._offers}},{key:"acceptSeasonCurrencyAsCredits",get:function(){return this._acceptSeasonCurrencyAsCredits}},{key:"mode",get:function(){return this._mode}}]),e}();I.MODE_NORMAL=0;var y=Object(d.a)((function e(){Object(u.a)(this,e)}));y.DUCKET_INFO="ducket_info",y.CREDITS="credits",y.AVATAR_EFFECTS="avatar_effects",y.HC_MEMBERSHIP="hc_membership",y.CLUB_GIFTS="club_gifts",y.LIMITED_SOLD="limited_sold",y.PET_ACCESSORIES="pet_accessories",y.TRAX_SONGS="trax_songs",y.NEW_ADDITIONS="new_additions",y.QUEST_SHELL="quest_shell",y.QUEST_SNOWFLAKES="quest_snowflakes",y.VAL_QUESTS="val_quests",y.GUILD_CUSTOM_FURNI="guild_custom_furni",y.GIFT_SHOP="gift_shop",y.HORSE_STYLES="horse_styles",y.HORSE_SHOE="horse_shoe",y.SET_EASTER="set_easter",y.ECOTRON_TRANSFORM="ecotron_transform",y.LOYALTY_INFO="loyalty_info",y.ROOM_BUNDLES="room_bundles",y.ROOM_BUNDLES_MOBILE="room_bundles_mobile",y.HABBO_CLUB_DESKTOP="habbo_club_desktop",y.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";var C=Object(d.a)((function e(t,n){Object(u.a)(this,e),this.breed=t,this.palettes=n})),T=Object(d.a)((function e(){Object(u.a)(this,e)}));T.NONE=0,T.CONFIRM=1,T.PURCHASE=2,T.NO_CREDITS=3,T.NO_POINTS=4,T.SOLD_OUT=5,T.FAILED=6;var S=Object(d.a)((function e(){Object(u.a)(this,e)}));function N(){return l.Je.instance}function R(e){N().addLinkEventTracker(e)}S.NORMAL="NORMAL",S.BUILDER="BUILDERS_CLUB";function k(){return N().avatar}function A(e){return k().structureData.getPalette(e)}function w(e){return k().structureData.getSetType(e)}function D(){return N().cameraManager}function U(e){e=e.startsWith("event:")?e.substring(6):e,N().createLinkEvent(e)}function P(){return N().communication}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return N().getConfiguration(e,t)}function M(){return P().connection}function F(){return N().localization}function H(){return N().ticker}function B(e){N().removeLinkEventTracker(e)}function G(){return N().roomEngine}var W=!1,V=0,q=0,Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.clientX,r=e.clientY,a=e.type;switch(a===l.xe.MOUSE_CLICK&&(V&&(q=1,V>=Date.now()-300&&q++),V=Date.now(),2===q&&(W||(a=l.xe.DOUBLE_CLICK),q=0,V=null)),a){case l.xe.MOUSE_CLICK:case l.xe.DOUBLE_CLICK:break;case l.xe.MOUSE_MOVE:W=!0;break;case l.xe.MOUSE_DOWN:W=!1;break;case l.xe.MOUSE_UP:case l.xe.RIGHT_CLICK:break;default:return}G().dispatchMouseEvent(t,n,r,a,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)},z=!1,K=0,Q=0,X=null,J=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=t.type;r&&(s=l.Nh.TOUCH_LONG),s!==l.Nh.TOUCH_END||z||(s=l.xe.MOUSE_CLICK,K&&(Q=1,K>=Date.now()-300&&Q++),K=Date.now(),2===Q&&(s=l.xe.DOUBLE_CLICK,Q=0,K=null)),X&&clearTimeout(X);var o=0,u=0;switch(t.touches[0]?(o=t.touches[0].clientX,u=t.touches[0].clientY):t.changedTouches[0]&&(o=t.changedTouches[0].clientX,u=t.changedTouches[0].clientY),s){case l.xe.MOUSE_CLICK:case l.xe.DOUBLE_CLICK:break;case l.Nh.TOUCH_START:X=setTimeout((function(){z||e(t,n,!0)}),300),s=l.xe.MOUSE_DOWN,z=!1;break;case l.Nh.TOUCH_MOVE:s=l.xe.MOUSE_MOVE,z=!0;break;case l.Nh.TOUCH_END:s=l.xe.MOUSE_UP;break;case l.Nh.TOUCH_LONG:s=l.xe.MOUSE_DOWN_LONG;break;default:return}G().dispatchMouseEvent(n,o,u,s,a,c,i,!1)};function Z(e){return!(!e||!e.model)&&ae().userId===e.model.getValue(l.Ig.FURNITURE_OWNER_ID)}function $(e,t,n){return!!e&&(e.controllerLevel>=l.Yf.GUEST||ae().isModerator||Z(G().getRoomObject(e.roomId,t,n)))}function ee(){return N().roomSessionManager}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ee().createSession(e,t)}function ne(){var e=he();return e?e.model.getValue(l.Ig.FIGURE_CAN_STAND_UP):l.k.POSTURE_STAND}function re(){var e=he();if(!e)return!1;var t=e.model.getValue(l.Ig.FIGURE_EFFECT);return!(29===t||30===t||185===t)}function ae(){return N().sessionDataManager}function ce(){return L("hc.disabled",!1)?l.zd.VIP:ae().clubLevel}function ie(e,t){var n=null;switch(t.toLowerCase()){case aa.FLOOR:n=ae().getFloorItemData(e);break;case aa.WALL:n=ae().getWallItemData(e)}return n}function se(e,t,n){var r=G().getRoomObject(e,t,n);if(r){var a=r.model.getValue(l.Ig.FURNITURE_TYPE_ID);switch(n){case l.Cg.FLOOR:return ae().getFloorItemData(a);case l.Cg.WALL:return ae().getWallItemData(a)}return null}}function oe(){var e=he();return e?e.model.getValue(l.Ig.FIGURE_POSTURE):l.k.POSTURE_STAND}function le(e){return e?ae().getProductData(e):null}function ue(){return ee().getSession(-1)}function de(){ea(new l.qb)}function je(){return ae().clubLevel>=l.zd.CLUB}function be(){return ae().clubLevel>=l.zd.VIP}var Oe=function(){ue()&&(de(),ee().removeSession(-1))};function he(){for(var e=ae().userId,t=G().activeRoomId,n=l.Cg.UNIT,r=G().getTotalObjectsForManager(t,n),a=0;a<r;){var c=G().getRoomObjectByIndex(t,a,n);if(c){var i=ue().userDataManager.getUserDataByIndex(c.id);if(i&&i.webID===e)return c}a++}return null}var fe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=G().getRoomObjectBoundingRectangle(e,t,n,r);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},ge=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=G().getRoomObjectScreenLocation(e,t,n,r);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=G(),a=r.activeRoomId;r.initializeRoomInstanceRenderingCanvas(a,n,e,t)};function ve(e,t,n){G().processRoomObjectOperation(e,t,n)}function pe(e){G().setActiveRoomId(e)}var xe=function(){function e(t,n,r,a){Object(u.a)(this,e),this._id=void 0,this._type=void 0,this._color=void 0,this._brightness=void 0,this._id=t,this._type=n,this._color=r,this._brightness=a}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}}]),e}(),_e=function(){function e(t,n,r){Object(u.a)(this,e),this._id=void 0,this._category=void 0,this._name=void 0,this._id=t,this._category=n,this._name=r}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"category",get:function(){return this._category}},{key:"name",get:function(){return this._name}}]),e}(),Ee=n(5),Ie=n(6),ye=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe),Ce=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i){var s;return Object(u.a)(this,n),(s=t.call(this,n.AVATAR_INFO))._userId=void 0,s._userName=void 0,s._userType=void 0,s._roomIndex=void 0,s._allowNameChange=void 0,s._userId=e,s._userName=r,s._userType=a,s._roomIndex=c,s._allowNameChange=i,s}return Object(d.a)(n,[{key:"userId",get:function(){return this._userId}},{key:"userName",get:function(){return this._userName}},{key:"userType",get:function(){return this._userType}},{key:"roomIndex",get:function(){return this._roomIndex}},{key:"allowNameChange",get:function(){return this._allowNameChange}}]),n}(ye);Ce.AVATAR_INFO="RWAIE_AVATAR_INFO";var Te=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._items=void 0,a._items=r,a}return Object(d.a)(n,[{key:"items",get:function(){return this._items}}]),n}(ye);Te.USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",Te.FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT";var Se=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.FLOOD_CONTROL))._seconds=0,r._seconds=e,r}return Object(d.a)(n,[{key:"seconds",get:function(){return this._seconds}}]),n}(ye);Se.FLOOD_CONTROL="RWFCE_FLOOD_CONTROL";var Ne=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i,s){var o;return Object(u.a)(this,n),(o=t.call(this,e))._roomIndex=void 0,o._category=void 0,o._id=void 0,o._name=void 0,o._userType=void 0,o._roomIndex=r,o._category=a,o._id=c,o._name=i,o._userType=s,o}return Object(d.a)(n,[{key:"roomIndex",get:function(){return this._roomIndex}},{key:"category",get:function(){return this._category}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"userType",get:function(){return this._userType}}]),n}(ye);Ne.TYPE="RWONE_TYPE";var Re=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._id=-1,a._summary=void 0,a._headline=void 0,a._numQuestions=0,a._startMessage="",a._endMessage="",a._questionArray=null,a._pollType="",a._npsPoll=!1,a._id=r,a}return Object(d.a)(n,[{key:"id",get:function(){return this._id}},{key:"summary",get:function(){return this._summary},set:function(e){this._summary=e}},{key:"headline",get:function(){return this._headline},set:function(e){this._headline=e}},{key:"numQuestions",get:function(){return this._numQuestions},set:function(e){this._numQuestions=e}},{key:"startMessage",get:function(){return this._startMessage},set:function(e){this._startMessage=e}},{key:"endMessage",get:function(){return this._endMessage},set:function(e){this._endMessage=e}},{key:"questionArray",get:function(){return this._questionArray},set:function(e){this._questionArray=e}},{key:"pollType",get:function(){return this._pollType},set:function(e){this._pollType=e}},{key:"npsPoll",get:function(){return this._npsPoll},set:function(e){this._npsPoll=e}}]),n}(ye);Re.OFFER="RWPUW_OFFER",Re.ERROR="RWPUW_ERROR",Re.CONTENT="RWPUW_CONTENT";var ke=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(u.a)(this,n),(r=t.call(this,e))._hue=void 0,r._saturation=void 0,r._lightness=void 0,r._hue=a,r._saturation=c,r._lightness=i,r}return Object(d.a)(n,[{key:"hue",get:function(){return this._hue}},{key:"saturation",get:function(){return this._saturation}},{key:"lightness",get:function(){return this._lightness}}]),n}(ye);ke.PREVIEW="RWUBCPE_PREVIEW",ke.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";var Ae=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i,s,o,l,d,j,b,O){var h,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,g=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,m=arguments.length>14&&void 0!==arguments[14]?arguments[14]:null;return Object(u.a)(this,n),(h=t.call(this,e))._userId=void 0,h._text=void 0,h._chatType=void 0,h._userName=void 0,h._links=void 0,h._userX=void 0,h._userY=void 0,h._userImage=void 0,h._userColor=void 0,h._roomId=void 0,h._userCategory=void 0,h._userType=void 0,h._petType=void 0,h._styleId=void 0,h._userId=r,h._text=a,h._chatType=f,h._userName=c,h._userCategory=i,h._userType=s,h._petType=o,h._links=m,h._userX=l,h._userY=d,h._userImage=j,h._userColor=b,h._roomId=O,h._styleId=g,h}return Object(d.a)(n,[{key:"userId",get:function(){return this._userId}},{key:"text",get:function(){return this._text}},{key:"chatType",get:function(){return this._chatType}},{key:"userName",get:function(){return this._userName}},{key:"userCategory",get:function(){return this._userCategory}},{key:"userType",get:function(){return this._userType}},{key:"petType",get:function(){return this._petType}},{key:"links",get:function(){return this._links}},{key:"userX",get:function(){return this._userX}},{key:"userY",get:function(){return this._userY}},{key:"userImage",get:function(){return this._userImage}},{key:"userColor",get:function(){return this._userColor}},{key:"roomId",get:function(){return this._roomId}},{key:"styleId",get:function(){return this._styleId}}]),n}(ye);Ae.CHAT_EVENT="RWUCE_CHAT_EVENT",Ae.CHAT_TYPE_SPEAK=0,Ae.CHAT_TYPE_WHISPER=1,Ae.CHAT_TYPE_SHOUT=2,Ae.CHAT_TYPE_RESPECT=3,Ae.CHAT_TYPE_PETRESPECT=4,Ae.CHAT_TYPE_NOTIFY=5,Ae.CHAT_TYPE_PETTREAT=6,Ae.CHAT_TYPE_PETREVIVE=7,Ae.CHAT_TYPE_PET_REBREED_FERTILIZE=8,Ae.CHAT_TYPE_PET_SPEED_FERTILIZE=9,Ae.CHAT_TYPE_BOT_SPEAK=10,Ae.CHAT_TYPE_BOT_SHOUT=11,Ae.CHAT_TYPE_BOT_WHISPER=12;var we=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,n.CHAT_INPUT_CONTENT))._chatMode="",a._userName="",a._chatMode=e,a._userName=r,a}return Object(d.a)(n,[{key:"chatMode",get:function(){return this._chatMode}},{key:"userName",get:function(){return this._userName}}]),n}(ye);we.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",we.WHISPER="whisper",we.SHOUT="shout";var De=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,e))._objectId=void 0,i._value=void 0,i._furniType=void 0,i._objectId=r,i._value=a,i._furniType=c,i}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"value",get:function(){return this._value}},{key:"furniType",get:function(){return this._furniType}}]),n}(ye);De.CREDIT_FURNI_UPDATE="RWUCFE_CREDIT_FURNI_UPDATE";var Ue=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(u.a)(this,n),(r=t.call(this,n.UPDATE_CUSTOM_STACK_HEIGHT))._objectId=void 0,r._height=void 0,r._objectId=e,r._height=a,r}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"height",get:function(){return this._height}}]),n}(ye);Ue.UPDATE_CUSTOM_STACK_HEIGHT="RWUCSHE_UPDATE_CUSTOM_STACK_HEIGHT";var Pe=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.UPDATE_DANCE))._isDancing=void 0,r._isDancing=e,r}return Object(d.a)(n,[{key:"isDancing",get:function(){return this._isDancing}}]),n}(ye);Pe.UPDATE_DANCE="RWUDSE_UPDATE_DANCE";var Le=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.UPDATE_DECORATE))._isDecorating=void 0,r._isDecorating=e,r}return Object(d.a)(n,[{key:"isDecorating",get:function(){return this._isDecorating}}]),n}(ye);Le.UPDATE_DECORATE="RWUDME_UPDATE_DECORATE";var Me=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e))._selectedPresetId=0,r._presets=void 0,r._presets=[],r}return Object(d.a)(n,[{key:"presetCount",get:function(){return this._presets.length}},{key:"presets",get:function(){return this._presets}},{key:"selectedPresetId",get:function(){return this._selectedPresetId},set:function(e){this._selectedPresetId=e}},{key:"setPresetValues",value:function(e,t,n,r){var a=new xe(e,t,n,r);this._presets[e-1]=a}},{key:"getPresetNumber",value:function(e){return this._presets[e]}}]),n}(ye);Me.PRESETS="RWUDE_PRESETS",Me.HIDE="RWUDE_HIDE";var Fe=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i){var s;return Object(u.a)(this,n),(s=t.call(this,n.DIMMER_STATE))._state=void 0,s._presetId=void 0,s._effectId=void 0,s._color=void 0,s._brightness=void 0,s._state=e,s._presetId=r,s._effectId=a,s._color=c,s._brightness=i,s}return Object(d.a)(n,[{key:"state",get:function(){return this._state}},{key:"presetId",get:function(){return this._presetId}},{key:"effectId",get:function(){return this._effectId}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}}]),n}(ye);Fe.DIMMER_STATE="RWUDSE_DIMMER_STATE";var He=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(u.a)(this,n),(r=t.call(this,n.UPDATE_EXTERNAL_IMAGE))._objectId=void 0,r._photoData=void 0,r._objectId=e,r._photoData=a,r}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"photoData",get:function(){return this._photoData}}]),n}(ye);He.UPDATE_EXTERNAL_IMAGE="RWUEIE_UPDATE_EXTERNAL_IMAGE";var Be=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(ye),Ge=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).id=0,e.category=0,e.name="",e.description="",e.image=null,e.isWallItem=!1,e.isStickie=!1,e.isRoomOwner=!1,e.roomControllerLevel=0,e.isAnyRoomController=!1,e.expiration=-1,e.purchaseCatalogPageId=-1,e.purchaseOfferId=-1,e.extraParam="",e.isOwner=!1,e.stuffData=null,e.groupId=0,e.ownerId=0,e.ownerName="",e.usagePolicy=0,e.rentCatalogPageId=-1,e.rentOfferId=-1,e.purchaseCouldBeUsedForBuyout=!1,e.rentCouldBeUsedForBuyout=!1,e.availableForBuildersClub=!1,e.tileSizeX=1,e.tileSizeY=1,e}return Object(d.a)(n)}(Be);Ge.FURNI="RWUIFE_FURNI";var We=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).level=0,e.maximumLevel=0,e.experience=0,e.levelExperienceGoal=0,e.energy=0,e.maximumEnergy=0,e.happyness=0,e.maximumHappyness=0,e.respectsPetLeft=0,e.respect=0,e.age=0,e.name="",e.id=-1,e.image=null,e.petType=0,e.petBreed=0,e.petFigure="",e.posture="std",e.isOwner=!1,e.ownerId=-1,e.ownerName="",e.canRemovePet=!1,e.roomIndex=0,e.unknownRarityLevel=0,e.saddle=!1,e.rider=!1,e.breedable=!1,e.skillTresholds=[],e.publiclyRideable=0,e.fullyGrown=!1,e.dead=!1,e.rarityLevel=0,e.maximumTimeToLive=0,e.remainingTimeToLive=0,e.remainingGrowTime=0,e.publiclyBreedable=!1,e}return Object(d.a)(n)}(Be);We.PET_INFO="RWUIPE_PET_INFO";var Ve=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="",e.motto="",e.webID=0,e.figure="",e.badges=[],e.carryItem=0,e.roomIndex=0,e.amIOwner=!1,e.amIAnyRoomController=!1,e.roomControllerLevel=0,e.ownerId=-1,e.ownerName="",e.botSkills=[],e}return Object(d.a)(n)}(Be);Ve.RENTABLE_BOT="RWUIRBE_RENTABLE_BOT";var qe=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="",e.motto="",e.achievementScore=0,e.webID=0,e.xp=0,e.userType=-1,e.figure="",e.badges=[],e.groupId=0,e.groupName="",e.groupBadgeId="",e.carryItem=0,e.roomIndex=0,e.isSpectatorMode=!1,e.allowNameChange=!1,e.amIOwner=!1,e.amIAnyRoomController=!1,e.roomControllerLevel=0,e.canBeKicked=!1,e.canBeBanned=!1,e.canBeMuted=!1,e.respectLeft=0,e.isIgnored=!1,e.isGuildRoom=!1,e.canTrade=!1,e.canTradeReason=0,e.targetRoomControllerLevel=0,e.isAmbassador=!1,e}return Object(d.a)(n,[{key:"isOwnUser",get:function(){return this.type===n.OWN_USER}}]),n}(Be);qe.OWN_USER="RWUIUE_OWN_USER",qe.PEER="RWUIUE_PEER",qe.BOT="RWUIUE_BOT",qe.TRADE_REASON_OK=0,qe.TRADE_REASON_SHUTDOWN=2,qe.TRADE_REASON_NO_TRADING=3,qe.DEFAULT_BOT_BADGE_ID="BOT";var Ye=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i){var s;return Object(u.a)(this,n),(s=t.call(this,e))._objectId=void 0,s._figure=void 0,s._gender=void 0,s._name=void 0,s._objectId=r,s._figure=a,s._gender=c,s._name=i,s}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"figure",get:function(){return this._figure}},{key:"gender",get:function(){return this._gender}},{key:"name",get:function(){return this._name}}]),n}(ye);Ye.MANNEQUIN_UPDATE="RWUME_MANNEQUIN_UPDATE";var ze=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return Object(u.a)(this,n),(c=t.call(this,e))._objectId=-1,c._classId=0,c._itemType="",c._giftMessage="",c._imageUrl=null,c._isController=void 0,c._purchaserName=void 0,c._purchaserFigure=void 0,c._placedItemId=-1,c._placedItemType="",c._placedInRoom=void 0,c._objectId=r,c._giftMessage=a,c._imageUrl=s,c._isController=i,c._purchaserName=o,c._purchaserFigure=l,c}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"classId",get:function(){return this._classId},set:function(e){this._classId=e}},{key:"itemType",get:function(){return this._itemType},set:function(e){this._itemType=e}},{key:"giftMessage",get:function(){return this._giftMessage}},{key:"imageUrl",get:function(){return this._imageUrl}},{key:"isController",get:function(){return this._isController}},{key:"purchaserName",get:function(){return this._purchaserName}},{key:"purchaserFigure",get:function(){return this._purchaserFigure}},{key:"placedItemId",get:function(){return this._placedItemId},set:function(e){this._placedItemId=e}},{key:"placedInRoom",get:function(){return this._placedInRoom},set:function(e){this._placedInRoom=e}},{key:"placedItemType",get:function(){return this._placedItemType},set:function(e){this._placedItemType=e}}]),n}(ye);ze.PACKAGEINFO="RWUPDE_PACKAGEINFO",ze.CONTENTS="RWUPDE_CONTENTS",ze.CONTENTS_CLUB="RWUPDE_CONTENTS_CLUB",ze.CONTENTS_FLOOR="RWUPDE_CONTENTS_FLOOR",ze.CONTENTS_LANDSCAPE="RWUPDE_CONTENTS_LANDSCAPE",ze.CONTENTS_WALLPAPER="RWUPDE_CONTENTS_WALLPAPER",ze.CONTENTS_IMAGE="RWUPDE_CONTENTS_IMAGE";var Ke=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i,s,o){var l;return Object(u.a)(this,n),(l=t.call(this,n.UPDATE_CHAT))._objectId=void 0,l._category=void 0,l._botId=void 0,l._chat=void 0,l._automaticChat=void 0,l._chatDelay=void 0,l._mixSentences=void 0,l._objectId=e,l._category=r,l._botId=a,l._chat=c,l._automaticChat=i,l._chatDelay=s,l._mixSentences=o,l}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"category",get:function(){return this._category}},{key:"botId",get:function(){return this._botId}},{key:"chat",get:function(){return this._chat}},{key:"automaticChat",get:function(){return this._automaticChat}},{key:"chatDelay",get:function(){return this._chatDelay}},{key:"mixSentences",get:function(){return this._mixSentences}}]),n}(ye);Ke.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";var Qe=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._roomId=0,a._roomId=r,a}return Object(d.a)(n,[{key:"roomId",get:function(){return this._roomId}}]),n}(ye);Qe.GAME_MODE="RWUREE_GAME_MODE",Qe.NORMAL_MODE="RWUREE_NORMAL_MODE";var Xe=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,e))._id=void 0,i._category=void 0,i._roomId=void 0,i._id=r,i._category=a,i._roomId=c,i}return Object(d.a)(n,[{key:"id",get:function(){return this._id}},{key:"category",get:function(){return this._category}},{key:"roomId",get:function(){return this._roomId}}]),n}(ye);Xe.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",Xe.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",Xe.USER_REMOVED="RWUROE_USER_REMOVED",Xe.FURNI_REMOVED="RWUROE_FURNI_REMOVED",Xe.FURNI_ADDED="RWUROE_FURNI_ADDED",Xe.USER_ADDED="RWUROE_USER_ADDED",Xe.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",Xe.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",Xe.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";var Je=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,e))._songId=void 0,i._songName=void 0,i._songAuthor=void 0,i._songId=r,i._songName=a,i._songAuthor=c,i}return Object(d.a)(n,[{key:"songId",get:function(){return this._songId}},{key:"songName",get:function(){return this._songName}},{key:"songAuthor",get:function(){return this._songAuthor}}]),n}(ye);Je.PLAYING_CHANGED="RWUSE_PLAYING_CHANGED",Je.DATA_RECEIVED="RWUSE_DATA_RECEIVED",(function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i,s){var o;return Object(u.a)(this,n),(o=t.call(this,e))._color=void 0,o._name=void 0,o._date=void 0,o._message=void 0,o._extra=void 0,o._color=r,o._name=a,o._date=c,o._message=i,o._extra=s,o}return Object(d.a)(n,[{key:"color",get:function(){return this._color}},{key:"name",get:function(){return this._name}},{key:"date",get:function(){return this._date}},{key:"message",get:function(){return this._message}},{key:"extra",get:function(){return this._extra}}]),n}(ye)).TROPHY_UPDATE="RWUTE_TROPHY_UPDATE";var Ze=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.USER_DATA_UPDATED)}return Object(d.a)(n)}(ye);Ze.USER_DATA_UPDATED="RWUUDE_USER_DATA_UPDATED";var $e=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(u.a)(this,n),(r=t.call(this,n.UPDATE_YOUTUBE_DISPLAY))._objectId=void 0,r._hasControl=void 0,r._objectId=e,r._hasControl=a,r}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"hasControl",get:function(){return this._hasControl}}]),n}(ye);$e.UPDATE_YOUTUBE_DISPLAY="RWUEIE_UPDATE_YOUTUBE_DISPLAY";var et=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._items=void 0,a._items=r,a}return Object(d.a)(n,[{key:"items",get:function(){return this._items}}]),n}(ye);et.USE_PRODUCT_BUBBLES="RWUPBE_USE_PRODUCT_BUBBLES";var tt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._id=-1,a._pollType=null,a._pollId=-1,a._questionId=-1,a._duration=-1,a._question=null,a._userId=-1,a._value=void 0,a._answerCounts=void 0,a._id=r,a}return Object(d.a)(n,[{key:"id",get:function(){return this._id}},{key:"pollType",get:function(){return this._pollType},set:function(e){this._pollType=e}},{key:"pollId",get:function(){return this._pollId},set:function(e){this._pollId=e}},{key:"questionId",get:function(){return this._questionId},set:function(e){this._questionId=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"question",get:function(){return this._question},set:function(e){this._question=e}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}},{key:"answerCounts",get:function(){return this._answerCounts},set:function(e){this._answerCounts=e}}]),n}(ye);tt.NEW_QUESTION="RWPUW_NEW_QUESTION",tt.QUESTION_FINISHED="RWPUW_QUESION_FINSIHED",tt.QUESTION_ANSWERED="RWPUW_QUESTION_ANSWERED";var nt=function(){function e(t,n,r,a,c,i,s){Object(u.a)(this,e),this._id=void 0,this._category=void 0,this._name=void 0,this._requestRoomObjectId=void 0,this._targetRoomObjectId=void 0,this._requestInventoryStripId=void 0,this._replace=void 0,this._id=t,this._category=n,this._name=r,this._requestRoomObjectId=a,this._requestInventoryStripId=i,this._replace=s}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"category",get:function(){return this._category}},{key:"name",get:function(){return this._name}},{key:"requestRoomObjectId",get:function(){return this._requestRoomObjectId}},{key:"requestInventoryStripId",get:function(){return this._requestInventoryStripId}},{key:"replace",get:function(){return this._replace}}]),e}(),rt=function(e){if(null==e||"object"!=typeof e)return e;var t=new e.constructor;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},at=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"makeColorHex",value:function(e){return"#"+e}},{key:"makeColorNumberHex",value:function(e){var t=e.toString(16);if(t.length<6)for(var n=6-t.length,r=0;r<n;r++)t="0"+t;return"#"+t}},{key:"convertFromHex",value:function(e){return parseInt(e.replace("#",""),16)}}]),e}(),ct=function(e){var t=N().localization.getBadgeDesc(e);return t&&t.length||(t="badge_desc_".concat(e)),t},it=function(e){var t=N().localization.getBadgeName(e);return t&&t.length||(t="badge_name_".concat(e)),t};function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return N().getLocalizationWithParameters(e,t,n)}var ot=Object(d.a)((function e(){Object(u.a)(this,e)}));ot.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects",ot.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";var lt=n(58),ut=n(16);function dt(e,t){Object(c.useEffect)((function(){var n=new e(t);return P().registerMessageEvent(n),function(){return P().removeMessageEvent(n)}}),[e,t])}var jt=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)(null),O=Object(o.a)(j,2),h=O[0],f=O[1],m=Object(c.useState)(-1),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(0),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useMemo)((function(){var e=0;return u.forEach((function(t){return e+=g(t)})),e}),[u]),T=Object(c.useMemo)((function(){var e=0;return u.forEach((function(t){return e+=t.getProgress()})),e}),[u]),S=Object(c.useMemo)((function(){var e=0;return u.forEach((function(t){return e+=t.getMaxProgress()})),e}),[u]),N=Object(c.useMemo)((function(){return~~(100*(T-0)/(S-0)+0)}),[T,S]),R=Object(c.useCallback)((function(e,t){d((function(n){var r,a=Object(ut.a)(n),c=Object(s.a)(a);try{for(c.s();!(r=c.n()).done;){var i=r.value;if(i.code===e){var o,l=Object(s.a)(i.achievements);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.achievementId===t&&(u.unseen=0)}}catch(d){l.e(d)}finally{l.f()}}}}catch(d){c.e(d)}finally{c.f()}return a}))}),[]),k=Object(c.useCallback)((function(e){var t=e.getParser().achievement;d((function(e){var n=Object(ut.a)(e),r=n.findIndex((function(e){return e.code===t.category}));if(-1===r){var a=new b(t.category);a.achievements.push(t),n.push(a)}else{var c=rt(n[r]),i=Object(ut.a)(c.achievements),s=i.findIndex((function(e){return e.achievementId===t.achievementId})),o=null;-1===s?i.push(t):(o=i[s],i[s]=t),function(e){if(!e)return!1;var t=L("achievements.unseen.ignored"),n=e.badgeId.replace(/[0-9]/g,"");return t.indexOf(n)>=0}(t)||(t.unseen++,o&&(t.unseen+=o.unseen)),c.achievements=i,n[r]=c}return n}))}),[]);dt(l.b,k);var A=Object(c.useCallback)((function(e){var t,n=e.getParser(),r=[],a=Object(s.a)(n.achievements);try{var c=function(){var e=t.value,n=e.category,a=r.find((function(e){return e.code===n}));a||(a=new b(n),r.push(a)),a.achievements.push(e)};for(a.s();!(t=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}d(r)}),[]);dt(l.d,A);var w=Object(c.useCallback)((function(e){var t=e.getParser();y(t.score)}),[]);return dt(l.e,w),Object(c.useEffect)((function(){n&&(ea(new l.Kf),r(!1))}),[n]),{achievementCategories:u,selectedCategoryCode:h,setSelectedCategoryCode:f,selectedAchievementId:p,setSelectedAchievementId:x,achievementScore:I,getTotalUnseen:C,getProgress:T,getMaxProgress:S,scaledProgressPercent:N,setAchievementSeen:R}},bt=n(11),Ot=n(36),ht=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);ht.SHOW_CATALOG="CE_SHOW_CATALOG",ht.HIDE_CATALOG="CE_HIDE_CATALOG",ht.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",ht.SOLD_OUT="CE_SOLD_OUT",ht.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",ht.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",ht.INIT_GIFT="CE_INIT_GIFT",ht.CATALOG_RESET="CE_RESET",ht.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";var ft=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c;return Object(u.a)(this,n),(c=t.call(this,ht.INIT_GIFT))._pageId=void 0,c._offerId=void 0,c._extraData=void 0,c._pageId=e,c._offerId=r,c._extraData=a,c}return Object(d.a)(n,[{key:"pageId",get:function(){return this._pageId}},{key:"offerId",get:function(){return this._offerId}},{key:"extraData",get:function(){return this._extraData}}]),n}(ht),gt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.POST_MARKETPLACE))._item=void 0,r._item=e,r}return Object(d.a)(n,[{key:"item",get:function(){return this._item}}]),n}(ht);gt.POST_MARKETPLACE="CE_POST_MARKETPLACE";var mt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.PURCHASE_SUCCESS))._purchase=void 0,r._purchase=e,r}return Object(d.a)(n,[{key:"purchase",get:function(){return this._purchase}}]),n}(l.Oe);mt.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";var vt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.PURCHASE_FAILED))._code=void 0,r._code=e,r}return Object(d.a)(n,[{key:"code",get:function(){return this._code}}]),n}(l.Oe);vt.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";var pt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.NOT_ALLOWED))._code=void 0,r._code=e,r}return Object(d.a)(n,[{key:"code",get:function(){return this._code}}]),n}(l.Oe);pt.NOT_ALLOWED="CPNAE_NOT_ALLOWED";var xt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);xt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",xt.SELECT_PRODUCT="CWE_SELECT_PRODUCT",xt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",xt.PURCHASE="CWE_PURCHASE",xt.COLOUR_ARRAY="CWE_COLOUR_ARRAY",xt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",xt.COLOUR_INDEX="CWE_COLOUR_INDEX",xt.TEXT_INPUT="CWE_TEXT_INPUT",xt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",xt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",xt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",xt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",xt.GUILD_SELECTED="CWE_GUILD_SELECTED",xt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",xt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",xt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",xt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",xt.TOGGLE="CWE_CWE_TOGGLE",xt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",xt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",xt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";l.Oe;var _t=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.SOLD_OUT)}return Object(d.a)(n)}(l.Oe);_t.SOLD_OUT="CPSOE_SOLD_OUT";l.Oe;(function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,n.UPDATE_STUFF_DATA))._offer=void 0,a._stuffData=void 0,a._offer=e,a._stuffData=r,a}return Object(d.a)(n,[{key:"offer",get:function(){return this._offer}},{key:"stuffData",get:function(){return this._stuffData}}]),n}(l.Oe)).UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";var Et=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);Et.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",Et.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",Et.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",Et.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",Et.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";var It=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(n(25).a);It.INIT="HC_NAME_CHANGE_INIT";var yt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.REPORT_USER))._reportedUserId=void 0,r._reportedUserId=e,r}return Object(d.a)(n,[{key:"reportedUserId",get:function(){return this._reportedUserId}}]),n}(l.Oe);yt.REPORT_USER="HCE_HELP_CENTER_REPORT_USER";var Ct=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c;return Object(u.a)(this,n),(c=t.call(this,n.FURNI_ADDED)).id=e,c.spriteId=r,c.category=a,c}return Object(d.a)(n)}(l.Oe);Ct.FURNI_ADDED="IFAE_FURNI_ADDED";var Tt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);Tt.SHOW_MOD_TOOLS="MTE_SHOW_MOD_TOOLS",Tt.HIDE_MOD_TOOLS="MTE_HIDE_MOD_TOOLS",Tt.TOGGLE_MOD_TOOLS="MTE_TOGGLE_MOD_TOOLS",Tt.OPEN_ROOM_INFO="MTE_OPEN_ROOM_INFO",Tt.OPEN_ROOM_CHATLOG="MTE_OPEN_ROOM_CHATLOG",Tt.OPEN_USER_INFO="MTE_OPEN_USER_INFO",Tt.OPEN_USER_CHATLOG="MTE_OPEN_USER_CHATLOG";var St=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,Tt.OPEN_ROOM_CHATLOG))._roomId=void 0,r._roomId=e,r}return Object(d.a)(n,[{key:"roomId",get:function(){return this._roomId}}]),n}(Tt),Nt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,Tt.OPEN_ROOM_INFO))._roomId=void 0,r._roomId=e,r}return Object(d.a)(n,[{key:"roomId",get:function(){return this._roomId}}]),n}(Tt),Rt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,Tt.OPEN_USER_CHATLOG))._userId=void 0,r._userId=e,r}return Object(d.a)(n,[{key:"userId",get:function(){return this._userId}}]),n}(Tt),kt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,Tt.OPEN_USER_INFO))._userId=void 0,r._userId=e,r}return Object(d.a)(n,[{key:"userId",get:function(){return this._userId}}]),n}(Tt),At=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return Object(u.a)(this,n),(r=t.call(this,n.ALERT))._messages=void 0,r._alertType=void 0,r._clickUrl=void 0,r._clickUrlText=void 0,r._title=void 0,r._imageUrl=void 0,r._messages=e,r._alertType=a,r._clickUrl=c,r._clickUrlText=i,r._title=s,r._imageUrl=o,r}return Object(d.a)(n,[{key:"messages",get:function(){return this._messages}},{key:"alertType",get:function(){return this._alertType}},{key:"clickUrl",get:function(){return this._clickUrl}},{key:"clickUrlText",get:function(){return this._clickUrlText}},{key:"title",get:function(){return this._title}},{key:"imageUrl",get:function(){return this._imageUrl}}]),n}(l.Oe);At.ALERT="NAE_ALERT";var wt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,n.NEW_BUBBLE))._message=void 0,i._notificationType=void 0,i._imageUrl=void 0,i._linkUrl=void 0,i._message=e,i._notificationType=r,i._imageUrl=a,i._linkUrl=c,i}return Object(d.a)(n,[{key:"message",get:function(){return this._message}},{key:"notificationType",get:function(){return this._notificationType}},{key:"imageUrl",get:function(){return this._imageUrl}},{key:"linkUrl",get:function(){return this._linkUrl}}]),n}(l.Oe);wt.NEW_BUBBLE="NBE_NEW_BUBBLE";var Dt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(u.a)(this,n),(a=t.call(this,e))._message=void 0,a._clickUrl=void 0,a._headerText=void 0,a._message=r,a._clickUrl=c,a._headerText=i,a}return Object(d.a)(n,[{key:"message",get:function(){return this._message}},{key:"clickUrl",get:function(){return this._clickUrl}},{key:"headerText",get:function(){return this._headerText}}]),n}(l.Oe);Dt.HOTEL_ALERT="NCAE_HOTEL_ALERT";var Ut=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);Ut.SHOW_NOTIFICATION_CENTER="NCE_SHOW_NOTIFICATION_CENTER",Ut.HIDE_NOTIFICATION_CENTER="NCE_HIDE_NOTIFICATION_CENTER",Ut.TOGGLE_NOTIFICATION_CENTER="NCE_TOGGLE_NOTIFICATION_CENTER",Ut.ADD_NOTIFICATION="NCE_ADD_NOTIFICATION";var Pt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i,s,o){var l;return Object(u.a)(this,n),(l=t.call(this,n.CONFIRM))._confirmType=void 0,l._message=void 0,l._onConfirm=void 0,l._onCancel=void 0,l._confirmText=void 0,l._cancelText=void 0,l._title=void 0,l._confirmType=e,l._message=r,l._onConfirm=a,l._onCancel=c,l._confirmText=i,l._cancelText=s,l._title=o,l}return Object(d.a)(n,[{key:"confirmType",get:function(){return this._confirmType}},{key:"message",get:function(){return this._message}},{key:"onConfirm",get:function(){return this._onConfirm}},{key:"onCancel",get:function(){return this._onCancel}},{key:"confirmText",get:function(){return this._confirmText}},{key:"cancelText",get:function(){return this._cancelText}},{key:"title",get:function(){return this._title}}]),n}(l.Oe);Pt.CONFIRM="NCE_CONFIRM";var Lt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);Lt.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",Lt.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",Lt.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";var Mt=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(l.Oe);Mt.SAVE_WIRED="WE_SAVE_WIRED";var Ft=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Object(u.a)(this,n),(e=t.call(this,n.SELECT_OBJECT))._objectId=void 0,e._category=void 0,e._objectId=r,e._category=a,e}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"category",get:function(){return this._category}}]),n}(Mt);Ft.SELECT_OBJECT="WE_SELECT_OBJECT";var Ht=function(e,t,n){Object(c.useEffect)((function(){return t.addEventListener(e,n),function(){return t.removeEventListener(e,n)}}),[e,t,n])},Bt=function(e,t){return Ht(e,Oa().events,t)},Gt=function(e,t){return e.dispatchEvent(t)},Wt=function(e){return Gt(N().events,e)},Vt=function(e,t){return Ht(e,N().events,t)},qt=function(e,t){return Ht(e,G().events,t)},Yt=function(e,t){return Ht(e,ee().events,t)},zt=new l.vb,Kt=function(e){return Gt(zt,e)},Qt=function(e,t){return Ht(e,zt,t)},Xt=function(e,t){var n=Object(c.useState)((function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(r){return t}})),r=Object(o.a)(n,2),a=r[0],i=r[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;i(n),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(n))}catch(r){l.Re.error(r)}}]},Jt=function(){return Xt(ot.CATALOG_PLACE_MULTIPLE_OBJECTS,!1)},Zt=function(){return Object(Ot.a)(Jt)},$t=function(){return Xt(ot.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1)},en=function(){return Object(Ot.a)($t)},tn=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)(-1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(-1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(S.NORMAL),x=Object(o.a)(p,2),y=x[0],T=(x[1],Object(c.useState)(null)),R=Object(o.a)(T,2),k=R[0],A=R[1],w=Object(c.useState)(null),D=Object(o.a)(w,2),P=D[0],L=D[1],M=Object(c.useState)(null),F=Object(o.a)(M,2),H=F[0],B=F[1],W=Object(c.useState)(null),V=Object(o.a)(W,2),q=V[0],Y=V[1],z=Object(c.useState)([]),K=Object(o.a)(z,2),Q=K[0],X=K[1],J=Object(c.useState)(null),Z=Object(o.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],ce=Object(c.useState)(null),se=Object(o.a)(ce,2),oe=se[0],de=se[1],je=Object(c.useState)(!1),be=Object(o.a)(je,2),Oe=be[0],he=be[1],fe=Object(c.useState)({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),ge=Object(o.a)(fe,2),me=ge[0],ve=ge[1],pe=Object(c.useState)({}),xe=Object(o.a)(pe,2),_e=xe[0],Ee=xe[1],Ie=Object(c.useState)(!1),ye=Object(o.a)(Ie,2),Ce=ye[0],Te=ye[1],Se=Zt(),Ne=Object(o.a)(Se,2),Re=Ne[0],ke=(Ne[1],en()),Ae=Object(o.a)(ke,2),we=Ae[0],De=(Ae[1],Object(c.useState)(null)),Ue=Object(o.a)(De,2),Pe=Ue[0],Le=Ue[1],Me=Object(c.useState)(null),Fe=Object(o.a)(Me,2),He=Fe[0],Be=Fe[1],Ge=Object(c.useState)(0),We=Object(o.a)(Ge,2),Ve=We[0],qe=We[1],Ye=Object(c.useState)(0),ze=Object(o.a)(Ye,2),Ke=ze[0],Qe=ze[1],Xe=Object(c.useState)(0),Je=Object(o.a)(Xe,2),Ze=(Je[0],Je[1]),$e=Object(c.useState)(0),et=Object(o.a)($e,2),tt=et[0],nt=et[1],rt=Object(c.useState)(0),at=Object(o.a)(rt,2),ct=(at[0],at[1]),it=Object(c.useState)(0),ot=Object(o.a)(it,2),lt=(ot[0],ot[1]),jt=Object(c.useRef)(new da),Ot=Object(c.useCallback)((function(){h(-1),v(-1),A(null),L(null),B(null),Y(null),X([]),ee(null),ae([]),r(!1)}),[]),ht=Object(c.useCallback)((function(e){if(!e)return _.MISSING_OFFER;if(Ve<0||Ve>=Ke)return _.FURNI_LIMIT_REACHED;var t=ue();if(!t)return _.NOT_IN_ROOM;if(!t.isRoomOwner)return _.NOT_ROOM_OWNER;if(tt<=0)for(var n=G(),r=n.getRoomObjectCount(t.roomId,l.Cg.UNIT);r>0;){var a=n.getRoomObjectByIndex(t.roomId,r,l.Cg.UNIT),c=t.userDataManager.getUserDataByIndex(a.id);if(c&&c.type===l.Gg.USER&&c.roomIndex!==t.ownRoomIndex&&!c.isModerator)return _.VISITORS_IN_ROOM;r--}return _.OKAY}),[Ve,Ke,tt]),ft=Object(c.useCallback)((function(e){var t=ue();return!(!(t&&e.page&&"sold_ltd_items"!==e.page.layoutCode&&y===S.NORMAL&&(t.isRoomOwner||t.isGuildRoom&&t.controllerLevel>=l.Yf.GUILD_MEMBER)||y===S.BUILDER&&ht(e)===_.OKAY)||e.pricingModel===ia.PRICING_MODEL_BUNDLE||e.product.productType===aa.EFFECT||e.product.productType===aa.HABBO_CLUB)}),[y,ht]),gt=Object(c.useCallback)((function(e){if(ft(e)){var t=e.product;if(t){var n=0;switch(t.productType){case aa.FLOOR:n=l.Cg.FLOOR;break;case aa.WALL:n=l.Cg.WALL}G().processRoomObjectPlacement(l.Fg.CATALOG,-e.offerId,n,t.productClassId,t.extraParam)&&(Le(e),Te(!0),r(!1))}}}),[ft]),xt=Object(c.useCallback)((function(e,t){var n=G(),r=n.getRoomInstanceVariable(n.activeRoomId,l.Ig.ROOM_WALL_TYPE),a=n.getRoomInstanceVariable(n.activeRoomId,l.Ig.ROOM_FLOOR_TYPE),c=n.getRoomInstanceVariable(n.activeRoomId,l.Ig.ROOM_LANDSCAPE_TYPE);switch(r=r&&r.length?r:"101",a=a&&a.length?a:"101",c=c&&c.length?c:"1.1",e){case"floor":return void n.updateRoomInstancePlaneType(n.activeRoomId,t,r,c,!0);case"wallpaper":return void n.updateRoomInstancePlaneType(n.activeRoomId,a,t,c,!0);case"landscape":return void n.updateRoomInstancePlaneType(n.activeRoomId,a,r,t,!0);default:return void n.updateRoomInstancePlaneType(n.activeRoomId,a,r,c,!0)}}),[]),Et=Object(c.useCallback)((function(){Pe&&(G().cancelRoomObjectInsert(),Te(!1),Le(null))}),[Pe]),It=Object(c.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Te((function(t){return t&&e&&U("catalog/open"),!1}))}),[]),yt=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||It(),Be((function(e){if(e)switch(e.category){case l.Cg.FLOOR:G().removeRoomObjectFloor(e.roomId,e.objectId);break;case l.Cg.WALL:switch(e.furniData.className){case"floor":case"wallpaper":case"landscape":xt("reset","");break;default:G().removeRoomObjectWall(e.roomId,e.objectId)}break;default:G().deleteRoomObject(e.objectId,e.category)}return null}))}),[It,xt]),Tt=Object(c.useCallback)((function(e,t){if(t.pageId===e&&t!==k)return t;var n,r=Object(s.a)(t.children);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=Tt(e,a);if(c)return c}}catch(i){r.e(i)}finally{r.f()}return null}),[k]),St=Object(c.useCallback)((function(e,t){if(t.pageName===e&&t!==k)return t;var n,r=Object(s.a)(t.children);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=St(e,a);if(c)return c}}catch(i){r.e(i)}finally{r.f()}return null}),[k]),Nt=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!P||!P.size)return null;if(t){var n=[],r=P.get(e);if(r&&r.length){var a,c=Object(s.a)(r);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.isVisible&&n.push(i)}}catch(o){c.e(o)}finally{c.f()}}if(n.length)return n}return P.get(e)}),[P]),Rt=Object(c.useCallback)((function(e,t){e<0||(d(!0),h(e),e>-1&&ea(new l.cc(e,t,y)))}),[y]),kt=Object(c.useCallback)((function(e,t,n,r,a,c){var i=new I(e,t,n,r,c);if(B(i),v((function(t){return-1!==e?e:t})),he(!1),a>-1&&i.offers.length){var o,l=Object(s.a)(i.offers);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.offerId===a){Y(u);break}}}catch(d){l.e(d)}finally{l.f()}}}),[]),At=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(Et(),"root"===e.parent.pageName&&e.children.length){var n,r=Object(s.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.isVisible){e=a;break}}}catch(o){r.e(o)}finally{r.f()}}for(var c=[],i=e;i&&"root"!==i.pageName;)c.push(i),i=i.parent;c.reverse(),X((function(t){var n,r=t.indexOf(e)>=0,a=e.isOpen,i=Object(s.a)(t);try{for(i.s();!(n=i.n()).done;){var l=n.value;l.deactivate(),-1===c.indexOf(l)&&l.close()}}catch(o){i.e(o)}finally{i.f()}var u,d=Object(s.a)(c);try{for(d.s();!(u=d.n()).done;){var j=u.value;j.activate(),j.parent&&j.open(),j===e.parent&&j.children.length&&j.open()}}catch(o){d.e(o)}finally{d.f()}return r&&a?e.close():e.open(),c})),e.pageId>-1&&Rt(e.pageId,t)}),[X,Rt,Et]),wt=Object(c.useCallback)((function(e){if(ee(null),n){var t=Tt(e,k);t&&At(t)}else jt.current.requestById=e,r(!0)}),[n,k,Tt,At]),Dt=Object(c.useCallback)((function(e){if(ee(null),n){var t=St(e,k);t&&At(t)}else jt.current.requestByName=e,r(!0)}),[n,k,St,At]),Ut=Object(c.useCallback)((function(e){if(ee(null),n){var t=Nt(e);if(!t||!t.length)return;At(t[0],e)}else jt.current.requestedByOfferId=e,r(!0)}),[n,Nt,At]),Pt=Object(c.useCallback)((function(){}),[]),Lt=Object(c.useCallback)((function(e){var t=e.getParser(),n=new Map;A(function e(t,r,a){var c,i=new E(t,r,a),o=Object(s.a)(i.offerIds);try{for(o.s();!(c=o.n()).done;){var l=c.value;n.has(l)?n.get(l).push(i):n.set(l,[i])}}catch(b){o.e(b)}finally{o.f()}r++;var u,d=Object(s.a)(t.children);try{for(d.s();!(u=d.n()).done;){var j=u.value;i.addChild(e(j,r,i))}}catch(b){d.e(b)}finally{d.f()}return i}(t.root,0,null)),L(n)}),[A,L]);dt(l.W,Lt);var Mt=Object(c.useCallback)((function(e){var t=e.getParser();if(t.catalogType===y){var n,r=[],a=Object(s.a)(t.offers);try{for(a.s();!(n=a.n()).done;){var c,i=n.value,o=[],l=le(i.localizationId),u=Object(s.a)(i.products);try{for(u.s();!(c=u.n()).done;){var j=c.value,b=ie(j.furniClassId,j.productType);o.push(new ca(j.productType,j.furniClassId,j.extraParam,j.productCount,l,b,j.uniqueLimitedItem,j.uniqueLimitedSeriesSize,j.uniqueLimitedItemsLeft))}}catch(f){u.e(f)}finally{u.f()}if(o.length){var h=new ia(i.offerId,i.localizationId,i.rent,i.priceCredits,i.priceActivityPoints,i.priceActivityPointsType,i.giftable,i.clubLevel,o,i.bundlePurchaseAllowed);(y===S.NORMAL||h.pricingModel!==ia.PRICING_MODEL_BUNDLE&&h.pricingModel!==ia.PRICING_MODEL_MULTI)&&r.push(h)}}}catch(f){a.e(f)}finally{a.f()}t.frontPageItems&&t.frontPageItems.length&&ae(t.frontPageItems),d(!1),O===t.pageId&&kt(t.pageId,t.layoutCode,new la(t.localization.images.concat(),t.localization.texts.concat()),r,t.offerId,t.acceptSeasonCurrencyAsCredits)}}),[y,O,ae,d,kt]);dt(l.U,Mt);var Ft=Object(c.useCallback)((function(e){var t=e.getParser();Kt(new mt(t.offer))}),[]);dt(l.zf,Ft);var Ht=Object(c.useCallback)((function(e){var t=e.getParser();Kt(new vt(t.code))}),[]);dt(l.vf,Ht);var Bt=Object(c.useCallback)((function(e){var t=e.getParser();Kt(new pt(t.code))}),[]);dt(l.yf,Bt);var Gt=Object(c.useCallback)((function(e){e.getParser();Kt(new _t)}),[]);dt(l.Sd,Gt);var Wt=Object(c.useCallback)((function(e){var t=e.getParser().offer;if(t&&t.products.length){t.products[0].uniqueLimitedItem;var n,r=[],a=le(t.localizationId),c=Object(s.a)(t.products);try{for(c.s();!(n=c.n()).done;){var i=n.value,o=ie(i.furniClassId,i.productType);r.push(new ca(i.productType,i.furniClassId,i.extraParam,i.productCount,a,o,i.uniqueLimitedItem,i.uniqueLimitedSeriesSize,i.uniqueLimitedItemsLeft))}}catch(u){c.e(u)}finally{c.f()}var l=new ia(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,r,t.bundlePurchaseAllowed);(y===S.NORMAL||l.pricingModel!==ia.PRICING_MODEL_BUNDLE&&l.pricingModel!==ia.PRICING_MODEL_MULTI)&&(l.page=H,Y(l),l.product&&l.product.productType===aa.WALL&&ve((function(e){var t=Object(bt.a)({},e);return t.extraData=l.product.extraParam||null,t})))}}),[y,H,Y,ve]);dt(l.tf,Wt);var Vt=Object(c.useCallback)((function(e){var t=e.getParser(),n=new C(t.productCode,t.palettes.slice());Ee((function(e){var t=[];e.petPalettes&&t.push.apply(t,Object(ut.a)(e.petPalettes));for(var r=0;r<t.length;r++){if(t[r].breed===n.breed){t.splice(r,1);break}}return t.push(n),Object(bt.a)(Object(bt.a)({},e),{},{petPalettes:t})}))}),[Ee]);dt(l.Dh,Vt);var Yt=Object(c.useCallback)((function(e){var t=e.getParser();Ee((function(e){var n=t.offers;return Object(bt.a)(Object(bt.a)({},e),{},{clubOffers:n})}))}),[Ee]);dt(l.Ad,Yt);var zt=Object(c.useCallback)((function(e){var t=e.getParser();Ee((function(e){var n=t.groups;return Object(bt.a)(Object(bt.a)({},e),{},{groups:n})}))}),[Ee]);dt(l.xd,zt);var Xt=Object(c.useCallback)((function(e){var t=e.getParser();Ee((function(e){var n=new oa(t);return Object(bt.a)(Object(bt.a)({},e),{},{giftConfiguration:n})}))}),[Ee]);dt(l.Ac,Xt);var Jt=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n="";n=1===t.result?st("inventory.marketplace.result.title.success"):st("inventory.marketplace.result.title.failure");var r=st("inventory.marketplace.result.".concat(t.result));Ha.simpleAlert(r,Ua.DEFAULT,null,null,n)}}),[]);dt(l.de,Jt);var $t=Object(c.useCallback)((function(e){var t=e.getParser();Ee((function(e){var n=t;return Object(bt.a)(Object(bt.a)({},e),{},{clubGifts:n})}))}),[Ee]);dt(l.fb,$t);var tn=Object(c.useCallback)((function(e){var t=n;Ot(),t&&Ha.simpleAlert(st("catalog.alert.published.description"),Ua.ALERT,null,null,st("catalog.alert.published.title"))}),[n,Ot]);dt(l.X,tn);var nn=Object(c.useCallback)((function(e){var t=e.getParser();qe(t.furniCount),Pt()}),[Pt]);dt(l.D,nn);var rn=Object(c.useCallback)((function(e){var t=e.getParser();Qe(t._Str_15864),Ze(t._Str_24094),nt(t._Str_3709),ct(N().time),lt(t._Str_24379),Pt()}),[Pt]);dt(l.H,rn);var an=Object(c.useCallback)((function(e){wn(dr.CREDITS)}),[]);Qt(mt.PURCHASE_SUCCESS,an);var cn=Object(c.useCallback)((function(e){if(Ce&&e.type===l.kg.PLACED)if(yt(!0),Pe){var t=!1,n=Pe.product;if(e.category===l.Cg.WALL)switch(n.furnitureData.className){case"floor":case"wallpaper":case"landscape":t=e.placedOnFloor||e.placedOnWall;break;default:t=e.placedInRoom}else t=e.placedInRoom;if(t)switch(Be(new ua(e.roomId,e.objectId,e.category,e.wallLocation,e.x,e.y,e.direction,Pe)),y){case S.NORMAL:switch(e.category){case l.Cg.FLOOR:G().addFurnitureFloor(e.roomId,e.objectId,n.productClassId,new l.Oi(e.x,e.y,e.z),new l.Oi(e.direction),0,new l.Qd);break;case l.Cg.WALL:switch(n.furnitureData.className){case"floor":case"wallpaper":case"landscape":xt(n.furnitureData.className,n.extraParam);break;default:G().addFurnitureWall(e.roomId,e.objectId,n.productClassId,new l.Oi(e.x,e.y,e.z),new l.Oi(45*e.direction),0,e.instanceData,0)}}var r=G().getRoomObject(e.roomId,e.objectId,e.category);r&&r.model.setValue(l.Ig.FURNITURE_ALPHA_MULTIPLIER,.5),we?(ea(new l.xf(O,Pe.offerId,n.extraParam,1)),Re&&gt(Pe)):Re&&gt(Pe);break;case S.BUILDER:var a=Pe.page.pageId;switch(-12345678===a&&(a=-1),e.category){case l.Cg.FLOOR:ea(new l.E(a,Pe.offerId,n.extraParam,e.x,e.y,e.direction));break;case l.Cg.WALL:ea(new l.F(a,Pe.offerId,n.extraParam,e.wallLocation))}Re&&gt(Pe)}else It()}else It()}),[Ce,Pe,Re,we,y,O,yt,It,xt,gt]);qt(l.kg.PLACED,cn);var sn=Object(c.useCallback)((function(e){var t=G();if(He&&He.productClassId===e.spriteId&&He.roomId===t.activeRoomId){switch(e.category){case Un.FLOOR:var n=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_FLOOR_TYPE);He.extraParam!==n&&ea(new l.Ub(e.id));break;case Un.WALL_PAPER:var r=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_WALL_TYPE);He.extraParam!==r&&ea(new l.Ub(e.id));break;case Un.LANDSCAPE:var a=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_LANDSCAPE_TYPE);He.extraParam!==a&&ea(new l.Ub(e.id));break;default:ea(new l.Tb(e.id,He.category,He.wallLocation,He.x,He.y,He.direction))}Re||yt()}}),[He,Re,yt]);return Qt(Ct.FURNI_ADDED,sn),Object(c.useEffect)((function(){return function(){return Y(null)}}),[H]),Object(c.useEffect)((function(){if(n&&k&&jt.current)switch(jt.current.requestType){case da.REQUEST_TYPE_NONE:if(H)return;if(k.isBranch){var e,t=Object(s.a)(k.children);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r&&r.isVisible)return void At(r)}}catch(a){t.e(a)}finally{t.f()}}return;case da.REQUEST_TYPE_ID:return wt(jt.current.requestById),void jt.current.resetRequest();case da.REQUEST_TYPE_OFFER:return Ut(jt.current.requestedByOfferId),void jt.current.resetRequest();case da.REQUEST_TYPE_NAME:return Dt(jt.current.requestByName),void jt.current.resetRequest()}}),[n,k,H,At,wt,Ut,Dt]),Object(c.useEffect)((function(){!$&&H&&-1===H.pageId&&wt(m)}),[$,H,m,wt]),Object(c.useEffect)((function(){n&&!k&&(ea(new l.ic),ea(new l.fc),ea(new l.bc(y)),ea(new l.G))}),[n,k,y]),Object(c.useEffect)((function(){return de(new l.Kg(G(),++l.Kg.PREVIEW_COUNTER)),function(){de((function(e){return e.dispose(),null}))}}),[]),{isVisible:n,setIsVisible:r,isBusy:u,pageId:O,previousPageId:m,currentType:y,rootNode:k,offersToNodes:P,currentPage:H,setCurrentPage:B,currentOffer:q,setCurrentOffer:Y,activeNodes:Q,searchResult:$,setSearchResult:ee,frontPageItems:re,roomPreviewer:oe,navigationHidden:Oe,setNavigationHidden:he,purchaseOptions:me,setPurchaseOptions:ve,catalogOptions:_e,setCatalogOptions:Ee,getNodeById:Tt,getNodeByName:St,activateNode:At,openPageById:wt,openPageByName:Dt,openPageByOfferId:Ut,requestOfferToMover:gt}},nn=function(){return Object(Ot.a)(tn)},rn=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useMemo)((function(){var e=n.filter((function(e){return e.online}));return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),e}),[n]),x=Object(c.useMemo)((function(){var e=n.filter((function(e){return!e.online}));return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),e}),[n]),_=Object(c.useCallback)((function(e){return ea(new l.Db(e.id))}),[]),E=Object(c.useCallback)((function(e,t){return t!==e.relationshipStatus&&ea(new l.Ih(e.id,t))}),[]),I=Object(c.useCallback)((function(e){var t,r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.id===e)return a}}catch(c){r.e(c)}finally{r.f()}return null}),[n]),y=Object(c.useCallback)((function(e){return!I(e)&&(!u.find((function(t){return t.requesterUserId===e}))&&!(O.indexOf(e)>=0))}),[u,O,I]),C=Object(c.useCallback)((function(e,t){if(!y(e))return!1;h((function(t){var n=Object(ut.a)(t);return n.push(e),n})),ea(new l.Of(t))}),[y]),T=Object(c.useCallback)((function(e,t){-1!==e||t?d((function(n){var r=Object(ut.a)(n),a=r.findIndex((function(t){return t.id===e}));return-1===a?n:(ea(t?new l.a(r[a].id):new l.ob(!1,r[a].id)),r.splice(a,1),r)})):(ea(new l.ob(!0)),d([]))}),[]),S=Object(c.useCallback)((function(e){var t=e.getParser();v(new va(t.userFriendLimit,t.normalFriendLimit,t.extendedFriendLimit,t.categories)),ea(new l.hc)}),[]);dt(l.ge,S);var N=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n,r=Object(ut.a)(e),a=Object(s.a)(t.fragment);try{var c=function(){var e=n.value,t=r.findIndex((function(t){return t.id===e.id})),a=new qr;a.populate(e),t>-1?r[t]=a:r.push(a)};for(a.s();!(n=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return r}))}),[]);dt(l.Fb,N);var R=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n,r=Object(ut.a)(e),a=function(e){var t=r.findIndex((function(t){return t.id===e.id}));if(-1===t){var n=new qr;n.populate(e),r.unshift(n)}else r[t].populate(e)},c=Object(s.a)(t.addedFriends);try{for(c.s();!(n=c.n()).done;){a(n.value)}}catch(j){c.e(j)}finally{c.f()}var i,o=Object(s.a)(t.updatedFriends);try{for(o.s();!(i=o.n()).done;){a(i.value)}}catch(j){o.e(j)}finally{o.f()}var l,u=Object(s.a)(t.removedFriendIds);try{var d=function(){var e=l.value,t=r.findIndex((function(t){return t.id===e}));t>-1&&r.splice(t,1)};for(u.s();!(l=u.n()).done;)d()}catch(j){u.e(j)}finally{u.f()}return r}))}),[]);dt(l.Gb,R);var k=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){var n,r=Object(ut.a)(e),a=Object(s.a)(t.requests);try{var c=function(){var e=n.value,t=r.findIndex((function(t){return t.requesterUserId===e.requesterUserId}));if(t>0)r[t]=rt(r[t]),r[t].populate(e);else{var a=new ma;a.populate(e),r.push(a)}};for(a.s();!(n=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return r}))}),[]);dt(l.Hb,k);var A=Object(c.useCallback)((function(e){var t=e.getParser().request;d((function(e){var n=Object(ut.a)(e);if(-1===n.findIndex((function(e){return e.requesterUserId===t.requesterUserId}))){var r=new ma;r.populate(t),n.push(r)}return n}))}),[]);return dt(l.Ie,A),Object(c.useEffect)((function(){ea(new l.fe)}),[]),{friends:n,requests:u,sentRequests:O,settings:m,onlineFriends:p,offlineFriends:x,getFriend:I,canRequestFriend:y,requestFriend:C,requestResponse:T,followFriend:_,updateRelationship:E}},an=function(){return Object(Ot.a)(rn)},cn=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(-1),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(ga.HIDDEN),g=Object(o.a)(f,2),m=g[0],v=g[1],p=an().getFriend,x=void 0===p?null:p,_=Object(c.useMemo)((function(){return n.filter((function(e){return-1===O.indexOf(e.threadId)}))}),[n,O]),E=Object(c.useMemo)((function(){return u>0&&_.find((function(e){return e.threadId===u||null}))}),[u,_]),I=Object(c.useCallback)((function(e){var t=n.find((function(t){return t.participant&&t.participant.id===e}));if(t)return t;var a=x(e);return a?(t=new _a(a),r((function(e){var n=Object(ut.a)(e);return n.push(t),n})),h((function(e){var n=e.indexOf(t.threadId);if(-1===n)return e;var r=Object(ut.a)(e);return r.splice(n,1),r})),t):null}),[n,x]),y=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n=Object(ut.a)(e),r=n.findIndex((function(e){return e.participant&&e.participant.id===t.senderId})),a=null;if(-1===r){var c=x(t.senderId);c&&(a=new _a(c),n.push(a))}else n[r]=rt(n[r]),a=n[r];return a.addMessage(t.senderId,t.messageText,t.secondsSinceSent,t.extraData),u===a.threadId&&a.setRead(),a.unreadCount>0&&wn(dr.MESSENGER_MESSAGE_RECEIVED),n}))}),[u,x]);dt(l.He,y);var C=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n=Object(ut.a)(e),r=n.findIndex((function(e){return e.participant&&e.participant.id===t.senderId})),a=null;if(-1===r){var c=x(t.senderId);c&&(a=new _a(c),n.push(a))}else n[r]=rt(n[r]),a=n[r];return a.addMessage(null,t.messageText,0,null,pa.ROOM_INVITE),u===a.threadId&&a.setRead(),a.unreadCount>0&&wn(dr.MESSENGER_MESSAGE_RECEIVED),n}))}),[u,x]);dt(l.yg,C);var T=Object(c.useCallback)((function(e){var t=e.getParser(),n="Received room invite error: errorCode: "+t.errorCode+", recipients: "+t.failedRecipients;Ha.simpleAlert(n,Ua.DEFAULT,null,null,st("friendlist.alert.title"))}),[]);return dt(l.xg,T),Object(c.useEffect)((function(){u<=0||r((function(e){var t=Object(ut.a)(e),n=t.findIndex((function(e){return e.threadId===u}));if(-1!==n)return t[n]=rt(t[n]),t[n].setRead(),t}))}),[u]),Object(c.useEffect)((function(){v((function(e){if(!_.length)return ga.HIDDEN;var t,n=!1,r=Object(s.a)(_);try{for(r.s();!(t=r.n()).done;){if(t.value.unreadCount>0){n=!0;break}}}catch(a){r.e(a)}finally{r.f()}return n?ga.UNREAD:ga.SHOW}))}),[_]),{messageThreads:n,activeThread:E,iconState:m,visibleThreads:_,getMessageThread:I,setActiveThreadId:d,closeThread:function(e){h((function(t){var n=Object(ut.a)(t);return n.indexOf(e)>=0?t:(n.push(e),n)}))},sendMessage:function(e,t){e&&t&&t.length&&(ea(new l.Eh(e.participant.id,t)),1===n.length&&1===e.groups.length&&wn(dr.MESSENGER_NEW_THREAD),r((function(n){var r=Object(ut.a)(n),a=r.findIndex((function(t){return t.threadId===e.threadId}));return-1===a?n:(r[a]=rt(r[a]),(e=r[a]).addMessage(ae().userId,t,0,null,pa.CHAT),u===e.threadId&&e.setRead(),r)})))}}},sn=function(){return Object(Ot.a)(cn)},on=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1];return{isVisible:Object(c.useMemo)((function(){return!!n.length}),[n]),activate:Object(c.useCallback)((function(){var e=-1;return r((function(t){var n=Object(ut.a)(t);return e=n.length?n[n.length-1]+1:0,n.push(e),n})),e}),[]),deactivate:Object(c.useCallback)((function(e){r((function(t){var n=Object(ut.a)(t),r=n.indexOf(e);return-1===r?t:(n.splice(r,1),n)}))}),[])}},ln=n(53),un=function(){var e=Object(c.useState)(new Map),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useCallback)((function(e){var t;return(null===(t=n.get(e))||void 0===t?void 0:t.length)||0}),[n]),i=Object(c.useMemo)((function(){var e,t=0,r=Object(s.a)(n.keys());try{for(r.s();!(e=r.n()).done;){var c=e.value;t+=a(c)}}catch(i){r.e(i)}finally{r.f()}return t}),[n,a]),u=Object(c.useCallback)((function(e){var t=!0;return r((function(n){if(!n.has(e))return t=!1,n;var r=new Map(n);return r.delete(e),function(e){ea(new l.ki(e))}(e),r})),t}),[]),d=Object(c.useCallback)((function(e,t){var n=!0;return r((function(r){if(!r.has(e))return n=!1,r;var a=new Map(r),c=a.get(e);if(c){var i,o=Object(s.a)(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;c.splice(c.indexOf(u),1)}}catch(d){o.e(d)}finally{o.f()}}return function(e,t){ea(Object(ln.a)(l.li,[e].concat(Object(ut.a)(t))))}(e,t),a})),n}),[]),j=Object(c.useCallback)((function(e,t){return!!n.has(e)&&n.get(e).indexOf(t)>=0}),[n]),b=Object(c.useCallback)((function(e,t){r((function(n){if(!n.has(e))return n;var r=new Map(n),a=r.get(e),c=a.indexOf(t);return c>=0&&a.splice(c,1),r}))}),[]),O=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n,r=new Map(e),a=Object(s.a)(t.categories);try{for(a.s();!(n=a.n()).done;){var c=n.value,i=r.get(c);i||(i=[],r.set(c,i));var o,l=t.getItemsByCategory(c),u=Object(s.a)(l);try{for(u.s();!(o=u.n()).done;){var d=o.value;-1===i.indexOf(d)&&i.push(d)}}catch(j){u.e(j)}finally{u.f()}}}catch(j){a.e(j)}finally{a.f()}return r}))}),[]);return dt(l.ji,O),{getCount:a,getFullCount:i,resetCategory:u,resetItems:d,isUnseen:j,removeUnseen:b}},dn=function(){return Object(Ot.a)(un)},jn=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)([]),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(null),x=Object(o.a)(p,2),_=x[0],E=x[1],I=on(),y=I.isVisible,C=void 0!==y&&y,T=I.activate,S=void 0===T?null:T,N=I.deactivate,R=void 0===N?null:N,k=dn(),A=k.isUnseen,w=void 0===A?null:A,D=k.resetCategory,U=void 0===D?null:D,P=L("user.badges.max.slots",5),M=function(){return m.length<P},F=Object(c.useCallback)((function(e){var t,n=e.getParser(),r=n.getAllBadgeCodes(),a=[],c=Object(s.a)(r);try{for(c.s();!(t=c.n()).done;){var i=t.value;a.push(n.getBadgeId(i))}}catch(o){c.e(o)}finally{c.f()}d(r),h(a),v(n.getActiveBadgeCodes())}),[]);dt(l.v,F);var H=Object(c.useCallback)((function(e){var t=e.getParser(),n=w(Jn.BADGE,t.badgeId);d((function(e){var r=Object(ut.a)(e);return n?r.unshift(t.badgeCode):r.push(t.badgeCode),r})),h((function(e){var r=Object(ut.a)(e);return n?r.unshift(t.badgeId):r.push(t.badgeId),r}))}),[w]);return dt(l.u,H),Object(c.useEffect)((function(){u&&u.length&&E((function(e){var t=e;return t&&-1===u.indexOf(t)&&(t=null),t||(t=u[0]),t}))}),[u]),Object(c.useEffect)((function(){if(C)return function(){U(Jn.BADGE)}}),[C,U]),Object(c.useEffect)((function(){C&&n&&(ea(new l.Lf),r(!1))}),[C,n]),{badgeCodes:u,activeBadgeCodes:m,selectedBadgeCode:_,setSelectedBadgeCode:E,isWearingBadge:function(e){return m.indexOf(e)>=0},canWearBadges:M,toggleBadge:function(e){v((function(t){var n=Object(ut.a)(t),r=n.indexOf(e);if(-1===r){if(!M())return t;n.push(e)}else n.splice(r,1);for(var a=new l.Gh,c=0;c<P;c++)a.addActivatedBadge(n[c]||null);return ea(a),n}))},getBadgeId:function(e){var t=u.indexOf(e);return-1===t?0:O[t]||0},activate:S,deactivate:R}},bn=function(){return Object(Ot.a)(jn)},On=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=on(),g=f.isVisible,m=void 0!==g&&g,v=f.activate,p=void 0===v?null:v,x=f.deactivate,_=void 0===x?null:x,E=dn(),I=E.isUnseen,y=void 0===I?null:I,C=E.resetCategory,T=void 0===C?null:C,S=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){var n,r=Object(ut.a)(e),a=r.map((function(e){return e.botData.id})),c=[],i=Object(s.a)(t.items.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;-1===a.indexOf(o.id)&&c.push(o)}}catch(f){i.e(f)}finally{i.f()}var l,u=Object(s.a)(a);try{var d=function(){var e,n=l.value,a=!0,c=Object(s.a)(t.items.values());try{for(c.s();!(e=c.n()).done;){if(e.value.id===n){a=!1;break}}}catch(f){c.e(f)}finally{c.f()}if(!a)return"continue";var i=r.findIndex((function(e){return e.botData.id===n})),o=r[i];if(-1===i||!o)return"continue";qn()===o.botData.id&&(zn(),U("inventory/open")),r.splice(i,1)};for(u.s();!(l=u.n()).done;)d()}catch(f){u.e(f)}finally{u.f()}for(var j=0,b=c;j<b.length;j++){var O=b[j],h={botData:O};y(Jn.BOT,O.id)?r.unshift(h):r.push(h)}return r}))}),[y]);dt(l.z,S);var N=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){var n=Object(ut.a)(e);if(n.findIndex((function(e){return e.botData.id===t.item.id}))>=0)return e;var r={botData:t.item};return y(Jn.BOT,r.botData.id)?n.unshift(r):n.push(r),n}))}),[y]);dt(l.x,N);var R=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){var n=Object(ut.a)(e),r=n.findIndex((function(e){return e.botData.id===t.itemId}));return-1===r?e:(n.splice(r,1),qn()===t.itemId&&(zn(),U("inventory/show")),n)}))}),[]);return dt(l.B,R),Object(c.useEffect)((function(){u&&u.length&&h((function(e){var t=e;return t&&-1===u.indexOf(t)&&(t=null),t||(t=u[0]),t}))}),[u]),Object(c.useEffect)((function(){if(m)return function(){T(Jn.BOT)}}),[m,T]),Object(c.useEffect)((function(){m&&n&&(ea(new l.ac),r(!1))}),[m,n]),{botItems:u,selectedBot:O,setSelectedBot:h,activate:p,deactivate:_}},hn=function(){return Object(Ot.a)(On)},fn=null,gn=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=on(),g=f.isVisible,m=void 0!==g&&g,v=f.activate,p=void 0===v?null:v,x=f.deactivate,_=void 0===x?null:x,E=dn(),I=E.isUnseen,y=void 0===I?null:I,C=E.resetCategory,T=void 0===C?null:C,S=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){var n,r=Object(ut.a)(e),a=Object(s.a)(t.items);try{for(a.s();!(n=a.n()).done;){for(var c=n.value,i=0,o=null;i<r.length;){for(var l=r[i],u=0;u<l.items.length;){var d=l.items[u];if(d.id===c.itemId){d.update(c);var j=Object(ut.a)(l.items);j[u]=d,l.items=j,o=l;break}u++}if(o)break;i++}if(o)o.hasUnseenItems=!0,r[i]=rt(o);else{var b=new Pn(c);Fn(r,b,y(Jn.FURNI,c.itemId)),Kt(new Ct(b.id,b.type,b.category))}}}catch(O){a.e(O)}finally{a.f()}return r}))}),[y]);dt(l.Lb,S);var N=Object(c.useCallback)((function(e){var t=e.getParser();fn||(fn=new Array(t.totalFragments));var n=Hn(t.fragment,t.totalFragments,t.fragmentNumber,fn);n&&(d((function(e){var t,r=Object(ut.a)(e),a=Bn(r),c=Object(s.a)(a);try{for(c.s();!(t=c.n()).done;){var i=t.value;if(!n.get(i))for(var o=0;o<r.length;){var l=r[o],u=l.remove(i);if(u){qn()===u.ref&&(zn(),Qn(l)||U("inventory/show")),l.getTotalCount()<=0&&(r.splice(o,1),l.dispose());break}o++}}}catch(f){c.e(f)}finally{c.f()}var d,j=Object(s.a)(n.keys());try{for(j.s();!(d=j.n()).done;){var b=d.value;if(!(a.indexOf(b)>=0)){var O=n.get(b);if(O){var h=new Pn(O);Fn(r,h,y(Jn.FURNI,b)),Kt(new Ct(h.id,h.type,h.category))}}}}catch(f){j.e(f)}finally{j.f()}return r})),fn=null)}),[y]);dt(l.Nb,N);var R=Object(c.useCallback)((function(e){r(!0)}),[]);dt(l.Ob,R);var k=Object(c.useCallback)((function(e){var t=e.getParser();d((function(e){for(var n=Object(ut.a)(e),r=0;r<n.length;){var a=n[r],c=a.remove(t.itemId);if(c){qn()===c.ref&&(zn(),Qn(a)||U("inventory/show")),a.getTotalCount()<=0&&(n.splice(r,1),a.dispose());break}r++}return n}))}),[]);dt(l.Pb,k);var A=Object(c.useCallback)((function(e){}),[]);return dt(l.Vb,A),Object(c.useEffect)((function(){u&&u.length&&h((function(e){var t=e;return t&&-1===u.indexOf(t)&&(t=null),t||(t=u[0]),t}))}),[u]),Object(c.useEffect)((function(){if(m)return function(){T(Jn.FURNI)&&d((function(e){var t,n=Object(ut.a)(e),r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.hasUnseenItems=!1}}catch(a){r.e(a)}finally{r.f()}return n}))}}),[m,T]),Object(c.useEffect)((function(){m&&n&&(ea(new l.Mb),r(!1))}),[m,n]),{isVisible:m,groupItems:u,setGroupItems:d,selectedItem:O,setSelectedItem:h,activate:p,deactivate:_}},mn=function(){return Object(Ot.a)(gn)},vn=null,pn=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=on(),f=h.isVisible,g=void 0!==f&&f,m=h.activate,v=void 0===m?null:m,p=h.deactivate,x=void 0===p?null:p,_=dn(),E=_.isUnseen,I=void 0===E?null:E,y=_.resetCategory,C=void 0===y?null:y,T=Object(c.useCallback)((function(e){var t=e.getParser();vn||(vn=new Array(t.totalFragments));var n=tr(t.fragment,t.totalFragments,t.fragmentNumber,vn);n&&(u((function(e){var t=Object(ut.a)(e);return er(t,n,I),t})),vn=null)}),[I]);dt(l.kf,T);var S=Object(c.useCallback)((function(e){var t=e.getParser();u((function(e){var n=Object(ut.a)(e);return Zn(t.pet,n,I(Jn.PET,t.pet.id)),n}))}),[I]);dt(l.hf,S);var N=Object(c.useCallback)((function(e){var t=e.getParser();u((function(e){var n=Object(ut.a)(e);return $n(t.petId,n),n}))}),[]);return dt(l.nf,N),Object(c.useEffect)((function(){s&&s.length&&O((function(e){var t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((function(){if(g)return function(){C(Jn.PET)}}),[g,C]),Object(c.useEffect)((function(){g&&n&&(ea(new l.Pf),r(!1))}),[g,n]),{petItems:s,selectedPet:b,setSelectedPet:O,activate:v,deactivate:x}},xn=function(){return Object(Ot.a)(pn)},_n=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(o.a)(a,2),u=i[0],d=i[1],j=Object(c.useState)(nr.TRADING_STATE_READY),b=Object(o.a)(j,2),O=b[0],h=b[1],f=mn(),g=f.groupItems,m=void 0===g?[]:g,v=f.setGroupItems,p=void 0===v?null:v,x=f.activate,_=void 0===x?null:x,E=f.deactivate,I=void 0===E?null:E,y=O>=nr.TRADING_STATE_RUNNING,C=Object(c.useCallback)((function(e){var t=e.getParser();n&&u&&(n.userId===t.userID?r((function(e){var n=rt(e);return n.accepts=t.userAccepts,n})):u.userId===t.userID&&d((function(e){var n=rt(e);return n.accepts=t.userAccepts,n})))}),[n,u]);dt(l.Ph,C);var T=Object(c.useCallback)((function(e){var t=e.getParser();t.reason===l.Th.ERROR_WHILE_COMMIT?cr(ar.ERROR_WHILE_COMMIT):n&&t.userID!==n.userId&&cr(ar.THEY_CANCELLED),r(null),d(null),h(nr.TRADING_STATE_READY)}),[n]);dt(l.Sh,T);var S=Object(c.useCallback)((function(e){e.getParser();r(null),d(null),h(nr.TRADING_STATE_READY)}),[]);dt(l.Uh,S);var N=Object(c.useCallback)((function(e){e.getParser();h(nr.TRADING_STATE_COUNTDOWN)}),[]);dt(l.Wh,N);var R=Object(c.useCallback)((function(e){var t=e.getParser(),n=sr(t.firstUserItemArray),a=sr(t.secondUserItemArray);r((function(e){var r=rt(e);r.userId===t.firstUserID?(r.creditsCount=t.firstUserNumCredits,r.itemCount=t.firstUserNumItems,r.userItems=n):(r.creditsCount=t.secondUserNumCredits,r.itemCount=t.secondUserNumItems,r.userItems=a);var c,i=[],o=Object(s.a)(r.userItems.getValues());try{for(o.s();!(c=o.n()).done;)for(var l=c.value,u=0;u<l.getTotalCount();){var d=l.getItemByIndex(u);d&&i.push(d.ref),u++}}catch(j){o.e(j)}finally{o.f()}return p((function(e){var t,n=Object(ut.a)(e),r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.lockItemIds(i)}}catch(j){r.e(j)}finally{r.f()}return n})),r})),d((function(e){var r=rt(e);return r.userId===t.firstUserID?(r.creditsCount=t.firstUserNumCredits,r.itemCount=t.firstUserNumItems,r.userItems=n):(r.creditsCount=t.secondUserNumCredits,r.itemCount=t.secondUserNumItems,r.userItems=a),r}))}),[p]);dt(l.Zh,R);var k=Object(c.useCallback)((function(e){e.getParser()}),[]);dt(l.bi,k);var A=Object(c.useCallback)((function(e){var t=e.getParser(),n=new rr,a=ue().userDataManager.getUserData(t.userID);n.userItems=new l.g;var c=new rr,i=ue().userDataManager.getUserData(t.otherUserID);c.userItems=new l.g,a.webID===ae().userId?(n.userId=a.webID,n.userName=a.name,n.canTrade=t.userCanTrade,c.userId=i.webID,c.userName=i.name,c.canTrade=t.otherUserCanTrade):i.webID===ae().userId&&(n.userId=i.webID,n.userName=i.name,n.canTrade=t.otherUserCanTrade,c.userId=a.webID,c.userName=a.name,c.canTrade=t.userCanTrade),r(n),d(c),h(nr.TRADING_STATE_RUNNING)}),[]);dt(l.di,A);var w=Object(c.useCallback)((function(e){var t=e.getParser();cr(t.reason,t.otherUserName)}),[]);dt(l.ei,w);var D=Object(c.useCallback)((function(e){e.getParser();cr(ar.THEY_NOT_ALLOWED)}),[]);dt(l.fi,D);var U=Object(c.useCallback)((function(e){e.getParser();cr(ar.YOU_NOT_ALLOWED)}),[]);return dt(l.hi,U),Object(c.useEffect)((function(){if(O!==nr.TRADING_STATE_READY){var e=_();return function(){return I(e)}}}),[O,_,I]),{ownUser:n,otherUser:u,tradeState:O,setTradeState:h,isTrading:y,groupItems:m,progressTrade:function(){switch(O){case nr.TRADING_STATE_RUNNING:return u.itemCount||n.accepts||Ha.simpleAlert(st("inventory.trading.warning.other_not_offering"),null,null,null),void(n.accepts?ea(new l.gi):ea(new l.Oh));case nr.TRADING_STATE_CONFIRMING:return ea(new l.Vh),void h(nr.TRADING_STATE_CONFIRMED)}},removeItem:function(e){var t=e.getLastItem();t&&ea(new l.ai(t.id))},stopTrading:function(){y&&(O!==nr.TRADING_STATE_RUNNING?ea(new l.Qh):ea(new l.Rh))}}},En=function(){return Object(Ot.a)(_n)},In=function(){return Object(c.useState)({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0})},yn=function(){return Object(Ot.a)(In)},Cn=function(){var e=Object(c.useState)(new Ba),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useMemo)((function(){return L("hc.disabled",!1)}),[]),i=Object(c.useMemo)((function(){return a||n.clubDays>0?Sa.ACTIVE:n.pastVipDays>0||n.pastVipDays>0?Sa.EXPIRED:Sa.NONE}),[n,a]),u=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n=rt(e);return n.credits=parseFloat(t.credits),e.credits!==n.credits&&wn(dr.CREDITS),n}))}),[]);dt(l.si,u);var d=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n=rt(e);return n.activityPoints=t.currencies,n}))}),[]);dt(l.ui,d);var j=Object(c.useCallback)((function(e){var t=e.getParser();r((function(e){var n=rt(e);return n.activityPoints=new Map(n.activityPoints),n.activityPoints.set(t.type,t.amount),0===t.type&&wn(dr.DUCKETS),n}))}),[]);dt(l.f,j);var b=Object(c.useCallback)((function(e){var t=e.getParser(),n=t.productName;"club_habbo"!==n&&"habbo_club"!==n||r((function(e){var n=rt(e);return n.clubDays=Math.max(0,t.daysToPeriodEnd),n.clubPeriods=Math.max(0,t.periodsSubscribedAhead),n.isVip=t.isVip,n.pastClubDays=t.pastClubDays,n.pastVipDays=t.pastVipDays,n.isExpiring=t.responseType===l.Mi.RESPONSE_TYPE_DISCOUNT_AVAILABLE,n.minutesUntilExpiration=t.minutesUntilExpiration,n.minutesSinceLastModified=t.minutesSinceLastModified,n}))}),[]);return dt(l.Li,b),Object(c.useEffect)((function(){if(!a){ea(new l.Ki("habbo_club"));var e=setInterval((function(){return ea(new l.Ki("habbo_club"))}),5e4);return function(){return clearInterval(e)}}}),[a]),Object(c.useEffect)((function(){ea(new l.ti)}),[]),{purse:n,hcDisabled:a,clubStatus:i,getCurrencyAmount:function(e){if(-1===e)return n.credits;var t,r=Object(s.a)(n.activityPoints.entries());try{for(r.s();!(t=r.n()).done;){var a=Object(o.a)(t.value,2),c=a[0],i=a[1];if(c===e)return i}}catch(l){r.e(l)}finally{r.f()}return 0}}},Tn=function(){return Object(Ot.a)(Cn)},Sn=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useCallback)((function(e){n.indexOf(e)>=0||r([].concat(Object(ut.a)(n),[e]))}),[n]),i=Object(c.useCallback)((function(e){var t=n.indexOf(e);if(-1!==t){var a=Object(ut.a)(n);a.splice(t,1),r(a)}}),[n]),s=Object(c.useCallback)((function(e,t){ue().sendDoorbellApprovalMessage(e,t),i(e)}),[i]),u=Object(c.useCallback)((function(e){switch(e.type){case l.Qg.DOORBELL:return void a(e.userName);case l.Qg.RSDE_REJECTED:case l.Qg.RSDE_ACCEPTED:return void i(e.userName)}}),[a,i]);return Yt(l.Qg.DOORBELL,u),Yt(l.Qg.RSDE_REJECTED,u),Yt(l.Qg.RSDE_ACCEPTED,u),{users:n,addUser:a,removeUser:i,answer:s}},Nn=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useCallback)((function(e){var t=e.getParser();r(t.userInfo),u(t.userInfo.figure)}),[]);dt(l.zi,d);var j=Object(c.useCallback)((function(e){var t=e.getParser();u(t.figure)}),[]);return dt(l.xb,j),{userInfo:n,userFigure:s}},Rn=function(){return Object(Ot.a)(Nn)},kn=function(e){return t=function(){return e()},Object(c.useEffect)(t,[]);var t},An=!1,wn=function(e){An&&Wt(new lt.a(lt.a.PLAY_SOUND,e))},Dn=[l.xe.MOUSE_CLICK];!function(){var e=function(){return Dn.forEach((function(e){return window.removeEventListener(e,t)}))},t=function(t){return(An=!0)&&e()};Dn.forEach((function(e){return window.addEventListener(e,t)}))}();var Un=Object(d.a)((function e(){Object(u.a)(this,e)}));Un.DEFAULT=1,Un.WALL_PAPER=2,Un.FLOOR=3,Un.LANDSCAPE=4,Un.POST_IT=5,Un.POSTER=6,Un.SOUND_SET=7,Un.TRAX_SONG=8,Un.PRESENT=9,Un.ECOTRON_BOX=10,Un.TROPHY=11,Un.CREDIT_FURNI=12,Un.PET_SHAMPOO=13,Un.PET_CUSTOM_PART=14,Un.PET_CUSTOM_PART_SHAMPOO=15,Un.PET_SADDLE=16,Un.GUILD_FURNI=17,Un.GAME_FURNI=18,Un.MONSTERPLANT_SEED=19,Un.MONSTERPLANT_REVIVAL=20,Un.MONSTERPLANT_REBREED=21,Un.MONSTERPLANT_FERTILIZE=22,Un.FIGURE_PURCHASABLE_SET=23;var Pn=function(){function e(t){Object(u.a)(this,e),this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._songId=void 0,this._locked=void 0,this._id=void 0,this._ref=void 0,this._category=void 0,this._type=void 0,this._stuffData=void 0,this._extra=void 0,this._recyclable=void 0,this._tradeable=void 0,this._groupable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._hasRentPeriodStarted=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._slotId=void 0,this._isRented=void 0,this._flatId=void 0,t&&(this._locked=!1,this._id=t.itemId,this._type=t.spriteId,this._ref=t.ref,this._category=t.category,this._groupable=t.isGroupable&&!t.rentable,this._tradeable=t.tradable,this._recyclable=t.isRecycleable,this._sellable=t.sellable,this._stuffData=t.stuffData,this._extra=t.extra,this._secondsToExpiration=t.secondsToExpiration,this._expirationTimeStamp=t.expirationTimeStamp,this._hasRentPeriodStarted=t.hasRentPeriodStarted,this._creationDay=t.creationDay,this._creationMonth=t.creationMonth,this._creationYear=t.creationYear,this._slotId=t.slotId,this._songId=t.songId,this._flatId=t.flatId,this._isRented=t.rentable,this._isWallItem=t.isWallItem)}return Object(d.a)(e,[{key:"rentable",get:function(){return this._isRented}},{key:"id",get:function(){return this._id}},{key:"ref",get:function(){return this._ref}},{key:"category",get:function(){return this._category}},{key:"type",get:function(){return this._type}},{key:"stuffData",get:function(){return this._stuffData},set:function(e){this._stuffData=e}},{key:"extra",get:function(){return this._extra}},{key:"recyclable",get:function(){return this._recyclable}},{key:"isTradable",get:function(){return this._tradeable}},{key:"isGroupable",get:function(){return this._groupable}},{key:"sellable",get:function(){return this._sellable}},{key:"secondsToExpiration",get:function(){if(-1===this._secondsToExpiration)return-1;var e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(N().time-this._expirationTimeStamp)/1e3)<0&&(e=0):e=this._secondsToExpiration,e}},{key:"creationDay",get:function(){return this._creationDay}},{key:"creationMonth",get:function(){return this._creationMonth}},{key:"creationYear",get:function(){return this._creationYear}},{key:"slotId",get:function(){return this._slotId}},{key:"songId",get:function(){return this._songId}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e}},{key:"flatId",get:function(){return this._flatId}},{key:"isWallItem",get:function(){return this._isWallItem}},{key:"hasRentPeriodStarted",get:function(){return this._hasRentPeriodStarted}},{key:"expirationTimeStamp",get:function(){return this._expirationTimeStamp}},{key:"update",value:function(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}},{key:"clone",value:function(){var t=new e(null);return t._expirationTimeStamp=this._expirationTimeStamp,t._isWallItem=this._isWallItem,t._songId=this._songId,t._locked=this._locked,t._id=this._id,t._ref=this._ref,t._category=this._category,t._type=this._type,t._stuffData=this._stuffData,t._extra=this._extra,t._recyclable=this._recyclable,t._tradeable=this._tradeable,t._groupable=this._groupable,t._sellable=this._sellable,t._secondsToExpiration=this._secondsToExpiration,t._hasRentPeriodStarted=this._hasRentPeriodStarted,t._creationDay=this._creationDay,t._creationMonth=this._creationMonth,t._creationYear=this._creationYear,t._slotId=this._slotId,t._isRented=this._isRented,t._flatId=this._flatId,t}}]),e}(),Ln=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;Object(u.a)(this,e),this._type=void 0,this._category=void 0,this._roomEngine=void 0,this._stuffData=void 0,this._extra=void 0,this._isWallItem=void 0,this._iconUrl=void 0,this._name=void 0,this._description=void 0,this._locked=void 0,this._selected=void 0,this._hasUnseenItems=void 0,this._items=void 0,this._type=t,this._category=n,this._roomEngine=r,this._stuffData=a,this._extra=c,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}return Object(d.a)(e,[{key:"clone",value:function(){var t=new e;return t._type=this._type,t._category=this._category,t._roomEngine=this._roomEngine,t._stuffData=this._stuffData,t._extra=this._extra,t._isWallItem=this._isWallItem,t._iconUrl=this._iconUrl,t._name=this._name,t._description=this._description,t._locked=this._locked,t._selected=this._selected,t._hasUnseenItems=this._hasUnseenItems,t._items=this._items,t}},{key:"prepareGroup",value:function(){this.setIcon(),this.setName(),this.setDescription()}},{key:"dispose",value:function(){}},{key:"getItemByIndex",value:function(e){return this._items[e]}},{key:"getItemById",value:function(e){var t,n=Object(s.a)(this._items);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"getTradeItems",value:function(e){var t=[],n=this.getLastItem();if(!n)return t;for(var r=0,a=0;a<this._items.length&&!(r>=e);){var c=this.getItemByIndex(a);!c.locked&&c.isTradable&&c.type===n.type&&(t.push(c),r++),a++}return t}},{key:"push",value:function(e){for(var t=Object(ut.a)(this._items),n=0;n<t.length;){var r=t[n];if(r.id===e.id)return(r=r.clone()).locked=!1,t.splice(n,1),t.push(r),void(this._items=t);n++}t.push(e),this._items=t,1===this._items.length&&this.prepareGroup()}},{key:"pop",value:function(){var e=Object(ut.a)(this._items),t=null;if(e.length>0){var n=e.length-1;t=e[n],e.splice(n,1)}return this._items=e,t}},{key:"remove",value:function(e){for(var t=Object(ut.a)(this._items),n=0;n<t.length;){var r=t[n];if(r.id===e)return t.splice(n,1),this._items=t,r;n++}return null}},{key:"getTotalCount",value:function(){if(this._category===Un.POST_IT){for(var e=0,t=0;t<this._items.length;){var n=this.getItemByIndex(t);e+=parseInt(n.stuffData.getLegacyString()),t++}return e}return this._items.length}},{key:"getUnlockedCount",value:function(){if(this.category===Un.POST_IT)return this.getTotalCount();for(var e=0,t=0;t<this._items.length;){this.getItemByIndex(t).locked||e++,t++}return e}},{key:"getLastItem",value:function(){return this._items.length?this.getItemByIndex(this._items.length-1):null}},{key:"unlockAllItems",value:function(){for(var e=Object(ut.a)(this._items),t=0;t<e.length;){var n=e[t];if(n.locked){var r=n.clone();r.locked=!1,e[t]=r}t++}this._items=e}},{key:"lockItemIds",value:function(e){for(var t=Object(ut.a)(this._items),n=0,r=!1;n<t.length;){var a=t[n],c=e.indexOf(a.ref)>=0;if(a.locked!==c){r=!0;var i=a.clone();i.locked=c,t[n]=i}n++}return this._items=t,r}},{key:"setName",value:function(){var e=this.getLastItem();if(e){var t="";switch(this._category){case Un.POSTER:t="poster_"+e.stuffData.getLegacyString()+"_name";break;case Un.TRAX_SONG:return void(this._name="SONG_NAME");default:t=this.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type}this._name=st(t)}else this._name=""}},{key:"setDescription",value:function(){this._description=""}},{key:"setIcon",value:function(){if(!this._iconUrl){var e=null;(e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type))&&(this._iconUrl=e)}}},{key:"type",get:function(){return this._type}},{key:"category",get:function(){return this._category}},{key:"stuffData",get:function(){return this._stuffData}},{key:"extra",get:function(){return this._extra}},{key:"iconUrl",get:function(){return this._iconUrl}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"hasUnseenItems",get:function(){return this._hasUnseenItems},set:function(e){this._hasUnseenItems=e}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e}},{key:"isWallItem",get:function(){var e=this.getItemByIndex(0);return!!e&&e.isWallItem}},{key:"isGroupable",get:function(){var e=this.getItemByIndex(0);return!!e&&e.isGroupable}},{key:"isSellable",get:function(){var e=this.getItemByIndex(0);return!!e&&e.sellable}},{key:"items",get:function(){return this._items},set:function(e){this._items=e}}]),e}(),Mn=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return new Ln(e,t,G(),n,r)},Fn=function(e,t,n){t.isGroupable?function(e,t,n){var r,a=null,c=Object(s.a)(e);try{for(c.s();!(r=c.n()).done;){var i=r.value;if(i.type===t.type&&i.isWallItem===t.isWallItem&&i.isGroupable)if(t.category===Un.POSTER){if(i.stuffData.getLegacyString()===t.stuffData.getLegacyString()){a=i;break}}else{if(t.category!==Un.GUILD_FURNI){a=i;break}if(t.stuffData.compare(i.stuffData)){a=i;break}}}}catch(l){c.e(l)}finally{c.f()}if(a){if(a.push(t),n){a.hasUnseenItems=!0;var o=e.indexOf(a);o>=0&&e.splice(o,1),e.unshift(a)}return a}(a=Mn(t.type,t.category,t.stuffData,t.extra)).push(t),n?(a.hasUnseenItems=!0,e.unshift(a)):e.push(a)}(e,t,n):function(e,t,n){var r,a=[],c=Object(s.a)(e);try{for(c.s();!(r=c.n()).done;){var i=r.value;i.type===t.type&&a.push(i)}}catch(j){c.e(j)}finally{c.f()}for(var o=0,l=a;o<l.length;o++){var u=l[o];if(u.getItemById(t.id))return u}var d=Mn(t.type,t.category,t.stuffData,t.extra);d.push(t),n?(d.hasUnseenItems=!0,e.unshift(d)):e.push(d)}(e,t,n)},Hn=function(e,t,n,r){if(1===t)return e;r[n]=e;var a,c=Object(s.a)(r);try{for(c.s();!(a=c.n()).done;){if(!a.value)return null}}catch(g){c.e(g)}finally{c.f()}var i,l=new Map,u=Object(s.a)(r);try{for(u.s();!(i=u.n()).done;){var d,j=i.value,b=Object(s.a)(j);try{for(b.s();!(d=b.n()).done;){var O=Object(o.a)(d.value,2),h=O[0],f=O[1];l.set(h,f)}}catch(g){b.e(g)}finally{b.f()}j.clear()}}catch(g){u.e(g)}finally{u.f()}return r=null,l},Bn=function(e){var t,n=[],r=Object(s.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.getTotalCount();a.category===Un.POST_IT&&(c=1);for(var i=0;i<c;)n.push(a.getItemByIndex(i).id),i++}}catch(o){r.e(o)}finally{r.f()}return n},Gn=!1,Wn=-1,Vn=function(e){return Gn=e},qn=function(){return Wn},Yn=function(e){return Wn=e},zn=function(){-1!==qn()&&(G().cancelRoomObjectPlacement(),Yn(-1),Vn(!1))},Kn=function(e){var t=e.petData;if(!t)return!1;var n=ee().getSession(1);return!!n&&(!(!n.isRoomOwner&&!n.allowPets)&&(U("inventory/hide"),G().processRoomObjectPlacement(l.Fg.INVENTORY,-t.id,l.Cg.UNIT,l.Gg.PET,t.figureData.figuredata)&&(Yn(t.id),Vn(!0)),!0))},Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.getUnlockedCount())return!1;var n=e.getLastItem();if(!n)return!1;if(n.category===Un.FLOOR||n.category===Un.WALL_PAPER||n.category===Un.LANDSCAPE)return t||ea(new l.Ub(n.id)),!1;U("inventory/hide");var r=0;return r=n.isWallItem?l.Cg.WALL:l.Cg.FLOOR,(n.category===Un.POSTER?G().processRoomObjectPlacement(l.Fg.INVENTORY,n.id,r,n.type,n.stuffData.getLegacyString()):G().processRoomObjectPlacement(l.Fg.INVENTORY,n.id,r,n.type,n.extra.toString(),n.stuffData))&&(Yn(n.ref),Vn(!0)),!0},Xn=function(e){var t=e.botData;if(!t)return!1;var n=ee().getSession(1);return!(!n||!n.isRoomOwner)&&(U("inventory/hide"),G().processRoomObjectPlacement(l.Fg.INVENTORY,-t.id,l.Cg.UNIT,l.Gg.RENTABLE_BOT,t.figure)&&(Yn(t.id),Vn(!0)),!0)},Jn=Object(d.a)((function e(){Object(u.a)(this,e)}));Jn.FURNI=1,Jn.RENTABLE=2,Jn.PET=3,Jn.BADGE=4,Jn.BOT=5,Jn.GAMES=6;var Zn=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={petData:e};return n?t.unshift(r):t.push(r),r},$n=function(e,t){for(var n=0;n<t.length;){var r=t[n];if(r&&r.petData.id===e)return qn()===r.petData.id&&(zn(),U("inventory/open")),t.splice(n,1),r;n++}return null},er=function(e,t,n){var r,a=e.map((function(e){return e.petData.id})),c=[],i=[],o=Object(s.a)(t.keys());try{for(o.s();!(r=o.n()).done;){var l=r.value;-1===a.indexOf(l)&&c.push(l)}}catch(p){o.e(p)}finally{o.f()}var u,d=Object(s.a)(a);try{for(d.s();!(u=d.n()).done;){var j=u.value;!t.get(j)&&i.push(j)}}catch(p){d.e(p)}finally{d.f()}a.length;for(var b=0,O=i;b<O.length;b++){var h=O[b];$n(h,e)}for(var f=0,g=c;f<g.length;f++){var m=g[f],v=t.get(m);v&&Zn(v,e,n(Jn.PET,v.id))}return e},tr=function(e,t,n,r){if(1===t)return e;r[n]=e;var a,c=Object(s.a)(r);try{for(c.s();!(a=c.n()).done;){if(!a.value)return null}}catch(g){c.e(g)}finally{c.f()}var i,l=new Map,u=Object(s.a)(r);try{for(u.s();!(i=u.n()).done;){var d,j=i.value,b=Object(s.a)(j);try{for(b.s();!(d=b.n()).done;){var O=Object(o.a)(d.value,2),h=O[0],f=O[1];l.set(h,f)}}catch(g){b.e(g)}finally{b.f()}j.clear()}}catch(g){u.e(g)}finally{u.f()}return r=null,l},nr=Object(d.a)((function e(){Object(u.a)(this,e)}));nr.TRADING_STATE_READY=0,nr.TRADING_STATE_RUNNING=1,nr.TRADING_STATE_COUNTDOWN=2,nr.TRADING_STATE_CONFIRMING=3,nr.TRADING_STATE_CONFIRMED=4,nr.TRADING_STATE_COMPLETED=5,nr.TRADING_STATE_CANCELLED=6;var rr=Object(d.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l.g,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(u.a)(this,e),this.userId=t,this.userName=n,this.userItems=r,this.itemCount=a,this.creditsCount=c,this.accepts=i,this.canTrade=s})),ar=Object(d.a)((function e(){Object(u.a)(this,e)}));ar.ALERT_SCAM=0,ar.HOTEL_TRADING_DISABLED=1,ar.YOU_NOT_ALLOWED=2,ar.THEY_NOT_ALLOWED=4,ar.ROOM_DISABLED=6,ar.YOU_OPEN=7,ar.THEY_OPEN=8,ar.ERROR_WHILE_COMMIT=9,ar.THEY_CANCELLED=10;var cr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case ar.ALERT_SCAM:return void Ha.simpleAlert(st("inventory.trading.warning.other_not_offering"),null,null,null,st("inventory.trading.notification.title"));case ar.HOTEL_TRADING_DISABLED:case ar.YOU_NOT_ALLOWED:case ar.THEY_NOT_ALLOWED:case ar.ROOM_DISABLED:case ar.YOU_OPEN:case ar.THEY_OPEN:return void Ha.simpleAlert(st("inventory.trading.openfail.".concat(e),["otherusername"],[t]),null,null,null,st("inventory.trading.openfail.title"));case ar.ERROR_WHILE_COMMIT:return void Ha.simpleAlert("".concat(st("inventory.trading.notification.caption"),", ").concat(st("inventory.trading.notification.commiterror.info")),null,null,null,st("inventory.trading.notification.title"));case ar.THEY_CANCELLED:return void Ha.simpleAlert(st("inventory.trading.info.closed"),null,null,null,st("inventory.trading.notification.title"))}},ir=function(e){var t;return(null===(t=ae().getWallItemData(e))||void 0===t?void 0:t.isExternalImage)||!1},sr=function(e){var t=new l.g;if(e.length){var n,r=Object(s.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,c=a.spriteId,i=a.category,o=a.furniType+c;a.isGroupable&&!ir(c)||(o="itemid"+a.itemId),a.category===Un.POSTER?o=a.itemId+"poster"+a.stuffData.getLegacyString():a.category===Un.GUILD_FURNI&&(o="");var u=a.isGroupable&&!ir(a.spriteId)?t.getValue(o):null;u||(u=Mn(c,i,a.stuffData),t.add(o,u)),u.push(new Pn(a))}}catch(d){r.e(d)}finally{r.f()}}return t},or=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getProductImageUrl",value:function(e,t,n){var r=null;switch(e){case l.V.S:r=G().getFurnitureFloorIconUrl(t);break;case l.V.I:var a=this.getProductCategory(l.V.I,t);if(1===a)r=G().getFurnitureWallIconUrl(t,n);else switch(a){case Un.WALL_PAPER:case Un.LANDSCAPE:case Un.FLOOR:}case l.V.E:}return r}},{key:"getProductCategory",value:function(e,t){if(e===l.V.S)return 1;if(e===l.V.I){if(3001===t)return Un.WALL_PAPER;if(3002===t)return Un.FLOOR;if(4057===t)return Un.LANDSCAPE}return 1}}]),e}(),lr=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getRandomNumber",value:function(e){return Math.floor(Math.random()*e)}},{key:"getRandomElement",value:function(e){return e[this.getRandomNumber(e.length)]}},{key:"getRandomElements",value:function(e,t){for(var n=new Array(t),r=e.length,a=new Array(r);t--;){var c=this.getRandomNumber(r);n[t]=e[c in a?a[c]:c],a[c]=--r in a?a[r]:r}return n}}]),e}(),ur=new Map;ur.set("r","red"),ur.set("b","blue"),ur.set("g","green"),ur.set("y","yellow"),ur.set("w","white"),ur.set("o","orange"),ur.set("c","cyan"),ur.set("br","brown"),ur.set("pr","purple"),ur.set("pk","pink"),ur.set("red","red"),ur.set("blue","blue"),ur.set("green","green"),ur.set("yellow","yellow"),ur.set("white","white"),ur.set("orange","orange"),ur.set("cyan","cyan"),ur.set("brown","brown"),ur.set("purple","purple"),ur.set("pink","pink");var dr=Object(d.a)((function e(){Object(u.a)(this,e)}));dr.CAMERA_SHUTTER="camera_shutter",dr.CREDITS="credits",dr.DUCKETS="duckets",dr.MESSENGER_NEW_THREAD="messenger_new_thread",dr.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",dr.MODTOOLS_NEW_TICKET="modtools_new_ticket";var jr=function(){function e(t){Object(u.a)(this,e),this._type=void 0,this._type=t}return Object(d.a)(e,[{key:"type",get:function(){return this._type}}]),e}(),br=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.AVATAR_EXPRESSION))._animation=void 0,r._animation=e,r}return Object(d.a)(n,[{key:"animation",get:function(){return this._animation}}]),n}(jr);br.AVATAR_EXPRESSION="RWAEM_MESSAGE_AVATAR_EXPRESSION";var Or=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.CHANGE_MOTTO))._motto=void 0,r._motto=e,r}return Object(d.a)(n,[{key:"motto",get:function(){return this._motto}}]),n}(jr);Or.CHANGE_MOTTO="RWCMM_CHANGE_MOTTO";var hr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.CHANGE_POSTURE))._posture=void 0,r._posture=e,r}return Object(d.a)(n,[{key:"posture",get:function(){return this._posture}}]),n}(jr);hr.CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",hr.POSTURE_STAND=0,hr.POSTURE_SIT=1;var fr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i){var s;return Object(u.a)(this,n),(s=t.call(this,e))._chatType=void 0,s._text=void 0,s._recipientName=void 0,s._styleId=void 0,s._text=r,s._chatType=a,s._recipientName=c,s._styleId=i,s}return Object(d.a)(n,[{key:"text",get:function(){return this._text}},{key:"chatType",get:function(){return this._chatType}},{key:"recipientName",get:function(){return this._recipientName}},{key:"styleId",get:function(){return this._styleId}}]),n}(jr);fr.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",fr.CHAT_DEFAULT=0,fr.CHAT_WHISPER=1,fr.CHAT_SHOUT=2;var gr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,e))._objectId=void 0,i._userName=void 0,i._roomId=void 0,i._objectId=r,i._userName=a,i._roomId=c,i}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"userName",get:function(){return this._userName}},{key:"roomId",get:function(){return this._roomId}}]),n}(jr);gr.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR";var mr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.TYPING_STATUS))._isTyping=void 0,r._isTyping=e,r}return Object(d.a)(n,[{key:"isTyping",get:function(){return this._isTyping}}]),n}(jr);mr.TYPING_STATUS="RWCTM_TYPING_STATUS";var vr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._objectId=void 0,a._objectId=r,a}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}}]),n}(jr);vr.REDEEM="RWCFRM_REDEEM";var pr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,n.DANCE))._style=0,r._style=e,r}return Object(d.a)(n,[{key:"style",get:function(){return this._style}}]),n}(jr);pr.DANCE="RWDM_MESSAGE_DANCE",pr.NORMAL_STYLE=0,pr.CLUB_STYLE=[2,3,4];var xr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.call(this,n.CHANGE_STATE)}return Object(d.a)(n)}(jr);xr.CHANGE_STATE="RWCDSM_CHANGE_STATE";var _r=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c;return Object(u.a)(this,n),(c=t.call(this,n.PREVIEW_DIMMER_PRESET))._color=void 0,c._brightness=void 0,c._bgOnly=void 0,c._color=e,c._brightness=r,c._bgOnly=a,c}return Object(d.a)(n,[{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}},{key:"bgOnly",get:function(){return this._bgOnly}}]),n}(jr);_r.PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET";var Er=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c,i){var s;return Object(u.a)(this,n),(s=t.call(this,n.SAVE_PRESET))._presetNumber=void 0,s._effectTypeId=void 0,s._color=void 0,s._brightness=void 0,s._apply=void 0,s._presetNumber=e,s._effectTypeId=r,s._color=a,s._brightness=c,s._apply=i,s}return Object(d.a)(n,[{key:"presetNumber",get:function(){return this._presetNumber}},{key:"effectTypeId",get:function(){return this._effectTypeId}},{key:"color",get:function(){return this._color}},{key:"brightness",get:function(){return this._brightness}},{key:"apply",get:function(){return this._apply}}]),n}(jr);Er.SAVE_PRESET="RWSDPM_SAVE_PRESET";var Ir=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Object(u.a)(this,n),(c=t.call(this,e))._furniId=void 0,c._furniCategory=void 0,c._offerId=void 0,c._objectData=void 0,c._furniId=r,c._furniCategory=a,c._offerId=i,c._objectData=s,c}return Object(d.a)(n,[{key:"furniId",get:function(){return this._furniId}},{key:"furniCategory",get:function(){return this._furniCategory}},{key:"objectData",get:function(){return this._objectData}},{key:"offerId",get:function(){return this._offerId}}]),n}(jr);Ir.ROTATE="RWFAM_ROTATE",Ir.MOVE="RWFAM_MOVE",Ir.PICKUP="RWFAM_PICKUP",Ir.EJECT="RWFAM_EJECT",Ir.USE="RWFAM_USE",Ir.OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",Ir.SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA";var yr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a,c){var i;return Object(u.a)(this,n),(i=t.call(this,e))._objectId=void 0,i._category=void 0,i._roomId=void 0,i._objectId=r,i._category=a,i._roomId=c,i}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"category",get:function(){return this._category}},{key:"roomId",get:function(){return this._roomId}}]),n}(jr);yr.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",yr.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",yr.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",yr.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",yr.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",yr.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",yr.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",yr.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",yr.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",yr.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",yr.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",yr.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",yr.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING";var Cr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._id=-1,a._questionId=0,a._answers=null,a._id=r,a}return Object(d.a)(n,[{key:"id",get:function(){return this._id}},{key:"questionId",get:function(){return this._questionId},set:function(e){this._questionId=e}},{key:"answers",get:function(){return this._answers},set:function(e){this._answers=e}}]),n}(jr);Cr.START="RWPM_START",Cr.REJECT="RWPM_REJECT",Cr.ANSWER="RWPM_ANSWER";var Tr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._objectId=void 0,a._objectId=r,a}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}}]),n}(jr);Tr.OPEN_PRESENT="RWPOM_OPEN_PRESENT";var Sr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n)}(jr);Sr.USER_CHOOSER="RWRWM_USER_CHOOSER",Sr.FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",Sr.ME_MENU="RWRWM_ME_MENU",Sr.EFFECTS="RWRWM_EFFECTS",Sr.FLOOR_EDITOR="RWRWM_FLOOR_EDITOR";var Nr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r,a){var c;return Object(u.a)(this,n),(c=t.call(this,e))._id=void 0,c._category=void 0,c._id=r,c._category=a,c}return Object(d.a)(n,[{key:"id",get:function(){return this._id}},{key:"category",get:function(){return this._category}}]),n}(jr);Nr.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",Nr.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",Nr.SELECT_OBJECT="RWROM_SELECT_OBJECT",Nr.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",Nr.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST";var Rr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object(u.a)(this,n),(a=t.call(this,e))._objectId=void 0,a._petId=void 0,a._objectId=r,a._petId=c,a}return Object(d.a)(n,[{key:"objectId",get:function(){return this._objectId}},{key:"petId",get:function(){return this._petId}}]),n}(jr);Rr.PET_PRODUCT="RWUPM_PET_PRODUCT",Rr.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED";var kr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,e))._userId=void 0,a._userId=r,a}return Object(d.a)(n,[{key:"userId",get:function(){return this._userId}}]),n}(jr);kr.WHISPER_USER="RWUAM_WHISPER_USER",kr.IGNORE_USER="RWUAM_IGNORE_USER",kr.IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",kr.UNIGNORE_USER="RWUAM_UNIGNORE_USER",kr.KICK_USER="RWUAM_KICK_USER",kr.BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",kr.BAN_USER_DAY="RWUAM_BAN_USER_DAY",kr.BAN_USER_PERM="RWUAM_BAN_USER_PERM",kr.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",kr.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",kr.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",kr.RESPECT_USER="RWUAM_RESPECT_USER",kr.GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",kr.TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",kr.START_TRADING="RWUAM_START_TRADING",kr.OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",kr.REPORT="RWUAM_REPORT",kr.PICKUP_PET="RWUAM_PICKUP_PET",kr.MOUNT_PET="RWUAM_MOUNT_PET",kr.TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",kr.TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",kr.DISMOUNT_PET="RWUAM_DISMOUNT_PET",kr.SADDLE_OFF="RWUAM_SADDLE_OFF",kr.TRAIN_PET="RWUAM_TRAIN_PET",kr.RESPECT_PET=" RWUAM_RESPECT_PET",kr.TREAT_PET="RWUAM_TREAT_PET",kr.REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",kr.START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",kr.PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",kr.DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",kr.GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",kr.GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",kr.GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",kr.REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",kr.HARVEST_PET="RWUAM_HARVEST_PET",kr.REVIVE_PET="RWUAM_REVIVE_PET",kr.COMPOST_PLANT="RWUAM_COMPOST_PLANT",kr.GET_BOT_INFO="RWUAM_GET_BOT_INFO",kr.REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",kr.AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",kr.AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",kr.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",kr.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",kr.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",kr.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",kr.RELATIONSHIP_NONE="RWUAM_RELATIONSHIP_NONE",kr.RELATIONSHIP_HEART="RWUAM_RELATIONSHIP_HEART",kr.RELATIONSHIP_SMILE="RWUAM_RELATIONSHIP_SMILE",kr.RELATIONSHIP_BOBBA="RWUAM_RELATIONSHIP_BOBBA";var Ar=function(){function e(){Object(u.a)(this,e),this._container=null}return Object(d.a)(e,[{key:"container",get:function(){return this._container},set:function(e){this._container=e}}]),e}(),wr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){}},{key:"processWidgetMessage",value:function(e){if(!e)return null;switch(e.type){case Sr.FURNI_CHOOSER:this.processChooser();break;case Nr.SELECT_OBJECT:this.selectRoomObject(e)}return null}},{key:"processChooser",value:function(){var e=this.container.roomSession.roomId,t=[],n=G().getRoomObjects(e,l.Cg.WALL),r=G().getRoomObjects(e,l.Cg.FLOOR);n.forEach((function(e){var n=e.type;if(n.startsWith("poster"))n=st("poster_".concat(n.replace("poster",""),"_name"));else{var r=e.model.getValue(l.Ig.FURNITURE_TYPE_ID),a=ae().getWallItemData(r);a&&a.name.length&&(n=a.name)}t.push(new _e(e.id,l.Cg.WALL,n))})),r.forEach((function(e){var n=e.type,r=e.model.getValue(l.Ig.FURNITURE_TYPE_ID),a=ae().getFloorItemData(r);a&&a.name.length&&(n=a.name),t.push(new _e(e.id,l.Cg.FLOOR,n))})),t.sort((function(e,t){return e.name<t.name?-1:1})),this.container.eventDispatcher.dispatchEvent(new Te(Te.FURNI_CHOOSER_CONTENT,t))}},{key:"selectRoomObject",value:function(e){e.category!==l.Cg.WALL&&e.category!==l.Cg.FLOOR||G().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}},{key:"type",get:function(){return l.sh.FURNI_CHOOSER}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[Sr.FURNI_CHOOSER,Nr.SELECT_OBJECT]}}]),n}(Ar),Dr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){}},{key:"processWidgetMessage",value:function(e){if(e.type===Rr.MONSTERPLANT_SEED){var t=e;this.container.roomSession.useMultistateItem(t.objectId)}return null}},{key:"type",get:function(){return l.sh.FURNITURE_CONTEXT_MENU}},{key:"eventTypes",get:function(){return[l.mg.OPEN_FURNI_CONTEXT_MENU,l.mg.CLOSE_FURNI_CONTEXT_MENU]}},{key:"messageTypes",get:function(){return[Rr.MONSTERPLANT_SEED]}}]),n}(Ar),Ur=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){}},{key:"processWidgetMessage",value:function(e){switch(e.type){case yr.REQUEST_CREDITFURNI:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n||!Z(n))return;this.container.eventDispatcher.dispatchEvent(new De(De.CREDIT_FURNI_UPDATE,t.objectId,n.model.getValue(l.Ig.FURNITURE_CREDIT_VALUE),n.model.getValue(l.Ig.FURNITURE_TYPE_ID)+"_"+t.type+"_"+t.objectId));break;case vr.REDEEM:var r=e;this.container.roomSession.connection.send(new l.Kb(r.objectId))}return null}},{key:"type",get:function(){return l.sh.FURNI_CREDIT_WIDGET}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[yr.REQUEST_CREDITFURNI,vr.REDEEM]}}]),n}(Ar),Pr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._lastFurniId=-1,e}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.mg.OPEN_WIDGET:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;return this._lastFurniId=t.objectId,void this.container.eventDispatcher.dispatchEvent(new Ue(this._lastFurniId,n.getLocation().z));case l.mg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new Ue(-1))}}},{key:"processWidgetMessage",value:function(e){return e.type,null}},{key:"type",get:function(){return l.sh.CUSTOM_STACK_HEIGHT}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar),Lr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.Pg.ROOM_DIMMER_PRESETS:var t=e,n=new Me(Me.PRESETS);n.selectedPresetId=t.selectedPresetId;for(var r=0;r<t.presetCount;){var a=t.getPreset(r);a&&n.setPresetValues(a.id,a.type,a.color,a.brightness),r++}return void this.container.eventDispatcher.dispatchEvent(n);case l.hg.ROOM_COLOR:var c=e;return void this.container.eventDispatcher.dispatchEvent(new Fe(c.state,c.presetId,c.effectId,c.color,c.brightness));case l.mg.REMOVE_DIMMER:return void this.container.eventDispatcher.dispatchEvent(new Me(Me.HIDE))}}},{key:"processWidgetMessage",value:function(e){switch(e.type){case yr.REQUEST_DIMMER:this.canOpenWidget()&&this.container.roomSession.requestMoodlightSettings();break;case Er.SAVE_PRESET:if(this.canOpenWidget()){var t=e;this.container.roomSession.updateMoodlightData(t.presetNumber,t.effectTypeId,t.color,t.brightness,t.apply)}break;case xr.CHANGE_STATE:this.canOpenWidget()&&this.container.roomSession.toggleMoodlightState();break;case _r.PREVIEW_DIMMER_PRESET:var n=this.container.roomSession.roomId,r=e;G().updateObjectRoomColor(n,r.color,r.brightness,r.bgOnly)}return null}},{key:"canOpenWidget",value:function(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=l.Yf.GUEST||ae().isModerator}},{key:"type",get:function(){return l.sh.ROOM_DIMMER}},{key:"eventTypes",get:function(){return[l.Pg.ROOM_DIMMER_PRESETS,l.hg.ROOM_COLOR,l.mg.REMOVE_DIMMER]}},{key:"messageTypes",get:function(){return[yr.REQUEST_DIMMER,Er.SAVE_PRESET,xr.CHANGE_STATE,_r.PREVIEW_DIMMER_PRESET]}}]),n}(Ar),Mr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._lastFurniId=-1,e}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.mg.OPEN_WIDGET:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;this._lastFurniId=t.objectId;var r=n.model.getValue(l.Ig.FURNITURE_DATA),a=JSON.parse(r);return void this.container.eventDispatcher.dispatchEvent(new He(n.id,a));case l.mg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new He(-1))}}},{key:"processWidgetMessage",value:function(e){return e.type,null}},{key:"type",get:function(){return l.sh.EXTERNAL_IMAGE}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar),Fr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){if(e&&e.type===l.mg.REQUEST_INTERNAL_LINK){var t=e,r=G();if(!t||!r)return;var a=r.getRoomObject(t.roomId,t.objectId,t.category);if(a){var c=a.model.getValue(l.Ig.FURNITURE_DATA)[n.INTERNALLINK];c&&c.length||(c=a.model.getValue(l.Ig.FURNITURE_INTERNAL_LINK)),c&&c.length&&U(c)}}}},{key:"processWidgetMessage",value:function(e){return null}},{key:"type",get:function(){return l.sh.INTERNAL_LINK}},{key:"eventTypes",get:function(){return[l.mg.REQUEST_INTERNAL_LINK]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar);Fr.INTERNALLINK="internalLink";var Hr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){if(e.type!==l.mg.REQUEST_MANNEQUIN);else{var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;var r=n.model,a=r.getValue(l.Ig.FURNITURE_MANNEQUIN_FIGURE),c=r.getValue(l.Ig.FURNITURE_MANNEQUIN_GENDER),i=r.getValue(l.Ig.FURNITURE_MANNEQUIN_NAME);this.container.eventDispatcher.dispatchEvent(new Ye(Ye.MANNEQUIN_UPDATE,n.id,a,c,i))}}},{key:"processWidgetMessage",value:function(e){return e.type,null}},{key:"type",get:function(){return l.sh.MANNEQUIN}},{key:"eventTypes",get:function(){return[l.mg.REQUEST_MANNEQUIN]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar),Br=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._lastFurniId=-1,e._name=null,e}return Object(d.a)(n,[{key:"processEvent",value:function(e){if(e.type!==l.Xg.RSPE_PRESENT_OPENED);else{var t=e,r=null;t.itemType===aa.FLOOR?r=ae().getFloorItemData(t.classId):t.itemType===aa.WALL&&(r=ae().getWallItemData(t.classId));var a=!1;if(t.placedInRoom){var c=G().getRoomObject(this.container.roomSession.roomId,t.placedItemId,l.Cg.FLOOR);c&&(a=Z(c))}var i=null,s=null;switch(t.itemType){case aa.WALL:if(r)switch(r.className){case n.FLOOR:s=new ze(ze.CONTENTS_FLOOR,0,st("inventory.furni.item.floor.name"),a);break;case n.LANDSCAPE:s=new ze(ze.CONTENTS_LANDSCAPE,0,st("inventory.furni.item.landscape.name"),a);break;case n.WALLPAPER:s=new ze(ze.CONTENTS_WALLPAPER,0,st("inventory.furni.item.wallpaper.name"),a);break;case n.POSTER:var o=t.productCode,u=null;0===o.indexOf("poster")&&(u=o.replace("poster","")),i=G().getFurnitureWallIconUrl(t.classId,u);var d=ae().getProductData(o);d?this._name=d.name:r&&(this._name=r.name),s=new ze(ze.CONTENTS,0,this._name,a,i);break;default:i=G().getFurnitureWallIconUrl(t.classId),r&&(this._name=r.name),s=new ze(ze.CONTENTS,0,this._name,a,i)}break;case aa.HABBO_CLUB:s=new ze(ze.CONTENTS_CLUB,0,st("widget.furni.present.hc"),!1);break;default:if(t.placedItemType===aa.PET){var j=t.petFigureString;if(j&&j.length){var b=new l.jf(j),O=G().getRoomObjectPetImage(b.typeId,b.paletteId,b.color,new l.Oi(90),64,this,!0,0,b.customParts);O&&(i=O.getImage().src)}}if(!i){var h=G().getFurnitureFloorImage(t.classId,new l.Oi(90),64,this);h&&(i=h.getImage().src)}var f=ae().getProductData(t.productCode);this._name=f?f.name:r.name,i&&(s=new ze(ze.CONTENTS,0,this._name,a,i))}s&&(s.classId=t.classId,s.itemType=t.itemType,s.placedItemId=t.placedItemId,s.placedInRoom=t.placedInRoom,s.placedItemType=t.placedItemType,this.container.eventDispatcher.dispatchEvent(s))}}},{key:"processWidgetMessage",value:function(e){switch(e.type){case yr.REQUEST_PRESENT:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return null;this._lastFurniId=t.objectId;var r=n.model.getValue(l.Ig.FURNITURE_DATA)||"",a=n.model.getValue(l.Ig.FURNITURE_PURCHASER_NAME),c=n.model.getValue(l.Ig.FURNITURE_PURCHASER_FIGURE),i=n.model.getValue(l.Ig.FURNITURE_TYPE_ID),s=n.model.getValue(l.Ig.FURNITURE_EXTRAS),o=G().getFurnitureFloorImage(i,new l.Oi(180),64,null,0,s);this.container.eventDispatcher.dispatchEvent(new ze(ze.PACKAGEINFO,t.objectId,r,Z(n),o.getImage().src,a,c));break;case Tr.OPEN_PRESENT:var u=e;if(u.objectId!==this._lastFurniId)return null;this.container.roomSession.openGift(u.objectId),G().changeObjectModelData(G().activeRoomId,u.objectId,l.Cg.FLOOR,l.Ig.FURNITURE_DISABLE_PICKING_ANIMATION,1)}return null}},{key:"imageReady",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;n?r=n.src:t&&(r=l.Mh.generateImageUrl(t)),this.container.eventDispatcher.dispatchEvent(new ze(ze.CONTENTS_IMAGE,0,this._name,!1,r))}},{key:"imageFailed",value:function(e){}},{key:"type",get:function(){return l.sh.FURNI_PRESENT_WIDGET}},{key:"eventTypes",get:function(){return[l.Xg.RSPE_PRESENT_OPENED]}},{key:"messageTypes",get:function(){return[yr.REQUEST_PRESENT,Tr.OPEN_PRESENT]}}]),n}(Ar);Br.FLOOR="floor",Br.WALLPAPER="wallpaper",Br.LANDSCAPE="landscape",Br.POSTER="poster";var Gr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"onRoomInfo",value:function(e){}},{key:"processEvent",value:function(e){if(e&&e.type===l.mg.REQUEST_ROOM_LINK){var t=e,r=G();if(!t||!r)return;var a=r.getRoomObject(t.roomId,t.objectId,t.category);if(a){var c=a.model.getValue(l.Ig.FURNITURE_DATA)[n.INTERNALLINK];c&&c.length||(c=a.model.getValue(l.Ig.FURNITURE_INTERNAL_LINK)),c&&c.length&&U("navigator/goto/"+c)}}}},{key:"processWidgetMessage",value:function(e){return null}},{key:"type",get:function(){return l.sh.ROOM_LINK}},{key:"eventTypes",get:function(){return[l.mg.REQUEST_ROOM_LINK]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar);Gr.INTERNALLINK="internalLink";var Wr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._lastFurniId=-1,e}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.mg.OPEN_WIDGET:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;this._lastFurniId=t.objectId;var r=ae().hasSecurity(l.Bh.EMPLOYEE)||Z(n);return this.container.eventDispatcher.dispatchEvent(new $e(n.id,r)),void ea(new l.yc(this._lastFurniId));case l.mg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new $e(-1))}}},{key:"processWidgetMessage",value:function(e){return e.type,null}},{key:"type",get:function(){return l.sh.YOUTUBE}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar);Wr.CONTROL_COMMAND_PREVIOUS_VIDEO=0,Wr.CONTROL_COMMAND_NEXT_VIDEO=1,Wr.CONTROL_COMMAND_PAUSE_VIDEO=2,Wr.CONTROL_COMMAND_CONTINUE_VIDEO=3;var Vr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){var t,n=e;switch(e.type){case l.Wg.OFFER:(t=new Re(Re.OFFER,n.id)).summary=n.summary,t.headline=n.headline;break;case l.Wg.ERROR:(t=new Re(Re.ERROR,n.id)).summary=n.summary,t.headline=n.headline;break;case l.Wg.CONTENT:(t=new Re(Re.CONTENT,n.id)).startMessage=n.startMessage,t.endMessage=n.endMessage,t.numQuestions=n.numQuestions,t.questionArray=n.questionArray,t.npsPoll=n.npsPoll}t&&this.container.eventDispatcher.dispatchEvent(t)}},{key:"processWidgetMessage",value:function(e){var t=e;switch(e.type){case Cr.START:this.container.roomSession.sendPollStartMessage(t.id);break;case Cr.REJECT:this.container.roomSession.sendPollRejectMessage(t.id);break;case Cr.ANSWER:this.container.roomSession.sendPollAnswerMessage(t.id,t.questionId,t.answers)}return null}},{key:"type",get:function(){return l.sh.ROOM_POLL}},{key:"eventTypes",get:function(){return[l.Wg.OFFER,l.Wg.ERROR,l.Wg.CONTENT]}},{key:"messageTypes",get:function(){return[Cr.ANSWER,Cr.REJECT,Cr.START]}}]),n}(Ar),qr=function(){function e(){Object(u.a)(this,e),this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}return Object(d.a)(e,[{key:"populate",value:function(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}]),e}();qr.RELATIONSHIP_NONE=0,qr.RELATIONSHIP_HEART=1,qr.RELATIONSHIP_SMILE=2,qr.RELATIONSHIP_BOBBA=3;var Yr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.Zg.USER_DATA_UPDATED:return void this.container.eventDispatcher.dispatchEvent(new Ze);case l.Og.RSDE_DANCE:var t=e,n=!1,r=this.container.roomSession.userDataManager.getUserData(ae().userId);return r&&r.roomIndex===t.roomIndex&&(n=0!==t.danceId),void this.container.eventDispatcher.dispatchEvent(new Pe(n));case l.ng.USE_PRODUCT_FROM_INVENTORY:return;case l.ng.USE_PRODUCT_FROM_ROOM:return void this.processUsableRoomObject(e.objectId);case l.Vg.PET_STATUS_UPDATE:return void this.processRoomSessionPetStatusUpdateEvent(e)}}},{key:"processWidgetMessage",value:function(e){var t=0;switch(e instanceof kr&&(t=e.userId),e.type){case Nr.GET_OWN_CHARACTER_INFO:this.processOwnCharacterInfo();break;case kr.START_NAME_CHANGE:case kr.REQUEST_PET_UPDATE:break;case Rr.PET_PRODUCT:var n=e;this.container.roomSession.usePetProduct(n.objectId,n.petId);break;case kr.HARVEST_PET:this.container.roomSession.harvestPet(t);break;case kr.COMPOST_PLANT:this.container.roomSession.compostPlant(t);break;case pr.DANCE:var r=e;this.container.roomSession.sendDanceMessage(r.style);break;case br.AVATAR_EXPRESSION:var a=e;this.container.roomSession.sendExpressionMessage(a.animation.ordinal);break;case hr.CHANGE_POSTURE:var c=e;this.container.roomSession.sendPostureMessage(c.posture);break;case kr.RELATIONSHIP_NONE:ea(new l.Ih(t,qr.RELATIONSHIP_NONE));break;case kr.RELATIONSHIP_HEART:ea(new l.Ih(t,qr.RELATIONSHIP_HEART));break;case kr.RELATIONSHIP_SMILE:ea(new l.Ih(t,qr.RELATIONSHIP_SMILE));break;case kr.RELATIONSHIP_BOBBA:ea(new l.Ih(t,qr.RELATIONSHIP_BOBBA))}return null}},{key:"processOwnCharacterInfo",value:function(){var e=ae().userId,t=ae().userName,n=ae().canChangeName,r=this.container.roomSession.userDataManager.getUserData(e);r&&this.container.eventDispatcher.dispatchEvent(new Ce(e,t,r.type,r.roomIndex,n))}},{key:"processUsableRoomObject",value:function(e){var t=this.container.roomSession.roomId,n=G().getRoomObject(t,e,l.Cg.FLOOR);if(n&&Z(n)){var r=n.model.getValue(l.Ig.FURNITURE_OWNER_ID),a=n.model.getValue(l.Ig.FURNITURE_TYPE_ID),c=ae().getFloorItemData(a),i=c.customParams.split(" "),s=i.length?parseInt(i[0]):-1;-1!==s&&this.processUseableProduct(t,e,s,c.specialType,r)}}},{key:"processUseableProduct",value:function(e,t,n,r,a){var c,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,o=[],u=G().getRoomObjects(e,l.Cg.UNIT),d=Object(s.a)(u);try{for(d.s();!(c=d.n()).done;){var j=c.value,b=this.container.roomSession.userDataManager.getUserDataByIndex(j.id),O=!1;if(b&&b.type===l.Gg.PET){if(b.ownerId===a){b.hasSaddle&&r===Un.PET_SADDLE&&(O=!0);var h=b.figure.split(" "),f=h.length?parseInt(h[0]):-1;if(f===n){if(r===Un.MONSTERPLANT_REVIVAL&&!b.canRevive)continue;if(r===Un.MONSTERPLANT_REBREED&&(b.petLevel<7||b.canRevive||b.canBreed))continue;if(r===Un.MONSTERPLANT_FERTILIZE&&(b.petLevel>=7||b.canRevive))continue;o.push(new nt(b.roomIndex,l.Cg.UNIT,b.name,t,j.id,i,O))}}}else;}}catch(g){d.e(g)}finally{d.f()}o.length&&this.container.eventDispatcher.dispatchEvent(new et(et.USE_PRODUCT_BUBBLES,o))}},{key:"processRoomSessionPetStatusUpdateEvent",value:function(e){}},{key:"type",get:function(){return l.sh.AVATAR_INFO}},{key:"eventTypes",get:function(){return[l.Zg.USER_DATA_UPDATED,l.Og.RSDE_DANCE,l.ng.USE_PRODUCT_FROM_INVENTORY,l.ng.USE_PRODUCT_FROM_ROOM,l.Vg.PET_STATUS_UPDATE]}},{key:"messageTypes",get:function(){return[Nr.GET_OWN_CHARACTER_INFO,kr.START_NAME_CHANGE,kr.REQUEST_PET_UPDATE,Rr.PET_PRODUCT,kr.REQUEST_BREED_PET,kr.HARVEST_PET,kr.REVIVE_PET,kr.COMPOST_PLANT,pr.DANCE,br.AVATAR_EXPRESSION,hr.CHANGE_POSTURE,kr.RELATIONSHIP_NONE,kr.RELATIONSHIP_HEART,kr.RELATIONSHIP_SMILE,kr.RELATIONSHIP_BOBBA]}}]),n}(Ar),zr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._avatarColorCache=new Map,e._avatarImageCache=new Map,e._petImageCache=new Map,e}return Object(d.a)(n,[{key:"processEvent",value:function(e){if(e.type!==l.Ng.CHAT_EVENT);else{var t=e,n=G().getRoomObject(t.session.roomId,t.objectId,l.Cg.UNIT),r=(n?n.getLocation():new l.Oi,ge(t.session.roomId,null===n||void 0===n?void 0:n.id,l.Cg.UNIT)),a=n?this.container.roomSession.userDataManager.getUserDataByIndex(t.objectId):new l.nh(-1),c="",i=0,s=null,o=t.chatType,u=t.style,d=0,j=-1,b=t.message;if(a){d=a.type;var O=a.figure;switch(d){case l.Gg.PET:s=this.getPetImage(O,2,!0,64,n.model.getValue(l.Ig.FIGURE_POSTURE)),j=new l.jf(O).typeId;break;case l.Gg.USER:s=this.getUserImage(O);break;case l.Gg.RENTABLE_BOT:case l.Gg.BOT:u=l.Lh.BOT}i=this._avatarColorCache.get(O),c=a.name}switch(o){case l.Ng.CHAT_TYPE_RESPECT:b=st("widgets.chatbubble.respect",["username"],[c]),Oa().getValue("respect.options").enabled&&wn(Oa().getValue("respect.options").sound);break;case l.Ng.CHAT_TYPE_PETREVIVE:case l.Ng.CHAT_TYPE_PET_REBREED_FERTILIZE:case l.Ng.CHAT_TYPE_PET_SPEED_FERTILIZE:var h="widget.chatbubble.petrevived";o===l.Ng.CHAT_TYPE_PET_REBREED_FERTILIZE?h="widget.chatbubble.petrefertilized;":o===l.Ng.CHAT_TYPE_PET_SPEED_FERTILIZE&&(h="widget.chatbubble.petspeedfertilized");var f=null;if(G().getRoomObject(t.session.roomId,t.extraParam,l.Cg.UNIT)){var g=this.container.roomSession.userDataManager.getUserDataByIndex(n.id);g&&(f=g.name)}b=st(h,["petName","userName"],[c,f]);break;case l.Ng.CHAT_TYPE_PETRESPECT:b=st("widget.chatbubble.petrespect",["petname"],[c]);break;case l.Ng.CHAT_TYPE_PETTREAT:b=st("widget.chatbubble.pettreat",["petname"],[c]);break;case l.Ng.CHAT_TYPE_HAND_ITEM_RECEIVED:b=st("widget.chatbubble.handitem",["username","handitem"],[c,st("handitem"+t.extraParam)]);break;case l.Ng.CHAT_TYPE_MUTE_REMAINING:b=st("widget.chatbubble.mutetime",["hours","minutes","seconds"],[(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),(t.extraParam%60).toString()])}this.container.eventDispatcher.dispatchEvent(new Ae(Ae.CHAT_EVENT,a.roomIndex,b,c,l.Cg.UNIT,d,j,r.x,r.y,s,i,t.session.roomId,o,u,[]))}}},{key:"processWidgetMessage",value:function(e){return null}},{key:"getUserImage",value:function(e){var t=this._avatarImageCache.get(e);return t||(t=this.setFigureImage(e)),t}},{key:"setFigureImage",value:function(e){var t=k().createAvatarImage(e,l.q.LARGE,null,this);if(t){var n=t.getCroppedImage(l.r.HEAD),r=t.getPartColor(l.p.CHEST);return this._avatarColorCache.set(e,r&&r.rgb||16777215),t.dispose(),this._avatarImageCache.set(e,n.src),n.src}}},{key:"getPetImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=this._petImageCache.get(e+a);if(c)return c;var i=new l.jf(e),s=i.typeId,o=G().getRoomObjectPetImage(s,i.paletteId,i.color,new l.Oi(45*t),r,null,!1,0,i.customParts,a);return o&&(c=l.Mh.generateImageUrl(o.data),this._petImageCache.set(e+a,c)),c}},{key:"resetFigure",value:function(e){this.setFigureImage(e)}},{key:"dispose",value:function(){}},{key:"disposed",get:function(){return!1}},{key:"type",get:function(){return l.sh.CHAT_WIDGET}},{key:"eventTypes",get:function(){return[l.Ng.CHAT_EVENT]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar),Kr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){if(e.type===l.Ng.FLOOD_EVENT){var t=e;this.container.eventDispatcher.dispatchEvent(new Se(parseInt(t.message)))}}},{key:"processWidgetMessage",value:function(e){switch(e.type){case mr.TYPING_STATUS:var t=e;this.container.roomSession.sendChatTypingMessage(t.isTyping);break;case fr.MESSAGE_CHAT:var n=e;if(""===n.text)return null;var r=n.text,a=r.split(" ");if(a.length>0){var c=a[0],i="";if(a.length>1&&(i=a[1]),":"===c.charAt(0)&&"x"===i){var s=G().selectedAvatarId;if(s>-1){var o=this.container.roomSession.userDataManager.getUserDataByIndex(s);o&&(i=o.name,r=n.text.replace(" x"," "+o.name))}}switch(c.toLowerCase()){case":compass":return U("mediaroom/video/BBjCFrR-QqA"),null;case":shake":return l.fh.init(2500,5e3),l.fh.turnVisualizationOn(),null;case":rotate":return l.Lg.init(2500,5e3),l.Lg.turnVisualizationOn(),null;case":d":case";d":ce()===l.zd.VIP&&this.container.roomSession.sendExpressionMessage(l.n.LAUGH.ordinal);break;case"o/":case"_o/":return this.container.roomSession.sendExpressionMessage(l.n.WAVE.ordinal),null;case":kiss":if(ce()===l.zd.VIP)return this.container.roomSession.sendExpressionMessage(l.n.BLOW.ordinal),null;break;case":jump":if(ce()===l.zd.VIP)return this.container.roomSession.sendExpressionMessage(l.n.JUMP.ordinal),null;break;case":idle":return this.container.roomSession.sendExpressionMessage(l.n.IDLE.ordinal),null;case"_b":return this.container.roomSession.sendExpressionMessage(l.n.RESPECT.ordinal),null;case":sign":return this.container.roomSession.sendSignMessage(parseInt(i)),null;case":iddqd":case":flip":return G().events.dispatchEvent(new l.vh(this.container.roomSession.roomId,-1,!0)),null;case":zoom":return G().events.dispatchEvent(new l.vh(this.container.roomSession.roomId,parseFloat(i),!1)),null;case":screenshot":var u=G().createTextureFromRoom(this.container.roomSession.roomId,1),d=new Image;return d.src=l.Mh.generateImageUrl(u),window.open("").document.write(d.outerHTML),null;case":pickall":return(this.container.roomSession.isRoomOwner||ae().isModerator)&&Ha.confirm(st("room.confirm.pick_all"),(function(){ae().sendSpecialCommandMessage(":pickall")}),null,null,null,st("generic.alert.title")),null;case":furni":return this.container.processWidgetMessage(new Sr(Sr.FURNI_CHOOSER)),null;case":chooser":return this.container.processWidgetMessage(new Sr(Sr.USER_CHOOSER)),null;case":floor":case":bcfloor":return this.container.roomSession.controllerLevel>=l.Yf.ROOM_OWNER&&U("floor-editor/show"),null;case":togglefps":return N().ticker.maxFPS>0?N().ticker.maxFPS=0:N().ticker.maxFPS=L("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return Ha.showNitroAlert(),null;case":settings":return(this.container.roomSession.isRoomOwner||ae().isModerator)&&ea(new l.ch(this.container.roomSession.roomId)),null}}var j=n.styleId;if(this.container&&this.container.roomSession)switch(n.chatType){case fr.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(r,j);break;case fr.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(r,j);break;case fr.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(n.recipientName,r,j)}break;case gr.MESSAGE_SELECT_AVATAR:var b=e;G().setSelectedAvatar(b.roomId,b.objectId)}return null}},{key:"type",get:function(){return l.sh.CHAT_INPUT_WIDGET}},{key:"eventTypes",get:function(){return[l.Ng.FLOOD_EVENT]}},{key:"messageTypes",get:function(){return[mr.TYPING_STATUS,fr.MESSAGE_CHAT,gr.MESSAGE_SELECT_AVATAR]}}]),n}(Ar),Qr=function(){function e(t,n){Object(u.a)(this,e),this._roomSession=void 0,this._eventDispatcher=void 0,this._handlers=[],this._eventMap=new Map,this._messageMap=new Map,this._roomSession=t,this._eventDispatcher=n}return Object(d.a)(e,[{key:"registerHandler",value:function(e){var t=e.eventTypes;if(t.push(l.mg.OPEN_WIDGET,l.mg.CLOSE_WIDGET),t&&t.length){var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var c=this._eventMap.get(a);c||(c=[],this._eventMap.set(a,c)),c.push(e)}}}catch(b){r.e(b)}finally{r.f()}}var i=e.messageTypes;if(i&&i.length){var o,u=Object(s.a)(i);try{for(u.s();!(o=u.n()).done;){var d=o.value;if(d){var j=this._messageMap.get(d);j||(j=[],this._messageMap.set(d,j)),j.push(e)}}}catch(b){u.e(b)}finally{u.f()}}e.container=this,this._handlers.push(e)}},{key:"processEvent",value:function(e){var t=this._eventMap.get(e.type);if(!t||!t.length)return null;var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var c=!0;e.type!==l.mg.OPEN_WIDGET&&e.type!==l.mg.CLOSE_WIDGET||e instanceof l.mg&&(c=a.type===e.widget),c&&a.processEvent(e)}}}catch(i){r.e(i)}finally{r.f()}}},{key:"processWidgetMessage",value:function(e){var t=this._messageMap.get(e.type);if(!t||!t.length)return null;var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var c=a.processWidgetMessage(e);if(c)return c}}}catch(i){r.e(i)}finally{r.f()}return null}},{key:"roomSession",get:function(){return this._roomSession}},{key:"eventDispatcher",get:function(){return this._eventDispatcher}}]),e}(),Xr=Object(d.a)((function e(){Object(u.a)(this,e)}));Xr.WATER=0,Xr.LIGHT=1;var Jr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){switch(e.type){case l.Ug.PET_INFO:return void this.processPetInfoEvent(e);case l.Yg.RSUBE_BADGES:case l.ah.USER_FIGURE:case l.Tg.FAVOURITE_GROUP_UPDATE:return void this.container.eventDispatcher.dispatchEvent(e)}}},{key:"processWidgetMessage",value:function(e){var t=0,n=null,r=0,a=0;if(e instanceof kr){if(t=e.userId,!(n=[kr.REQUEST_PET_UPDATE,kr.RESPECT_PET,kr.PICKUP_PET,kr.MOUNT_PET,kr.TOGGLE_PET_RIDING_PERMISSION,kr.TOGGLE_PET_BREEDING_PERMISSION,kr.DISMOUNT_PET,kr.SADDLE_OFF,kr.GIVE_CARRY_ITEM_TO_PET,kr.GIVE_WATER_TO_PET,kr.GIVE_LIGHT_TO_PET,kr.TREAT_PET].indexOf(e.type)>=0?this.container.roomSession.userDataManager.getPetData(t):this.container.roomSession.userDataManager.getUserData(t)))return null}else e instanceof Ir&&(r=e.furniId,a=e.furniCategory);switch(e.type){case Nr.GET_OBJECT_NAME:return this.processObjectNameMessage(e);case Nr.GET_OBJECT_INFO:return this.processObjectInfoMessage(e);case kr.RESPECT_USER:ae().giveRespect(t);break;case kr.RESPECT_PET:ae().givePetRespect(t);break;case kr.WHISPER_USER:this.container.eventDispatcher.dispatchEvent(new we(we.WHISPER,n.name));break;case kr.IGNORE_USER:ae().ignoreUser(n.name);break;case kr.UNIGNORE_USER:ae().unignoreUser(n.name);break;case kr.KICK_USER:this.container.roomSession.sendKickMessage(e.userId);break;case kr.BAN_USER_DAY:case kr.BAN_USER_HOUR:case kr.BAN_USER_PERM:this.container.roomSession.sendBanMessage(e.userId,e.type);break;case kr.MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(e.userId,2);break;case kr.MUTE_USER_5MIN:this.container.roomSession.sendMuteMessage(e.userId,5);break;case kr.MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(e.userId,10);break;case kr.GIVE_RIGHTS:this.container.roomSession.sendGiveRightsMessage(e.userId);break;case kr.TAKE_RIGHTS:this.container.roomSession.sendTakeRightsMessage(e.userId);break;case kr.START_TRADING:ea(new l.ci(n.roomIndex));break;case kr.PICKUP_PET:this.container.roomSession.pickupPet(t);break;case kr.MOUNT_PET:this.container.roomSession.mountPet(t);break;case kr.TOGGLE_PET_RIDING_PERMISSION:this.container.roomSession.togglePetRiding(t);break;case kr.TOGGLE_PET_BREEDING_PERMISSION:this.container.roomSession.togglePetBreeding(t);break;case kr.DISMOUNT_PET:this.container.roomSession.dismountPet(t);break;case kr.SADDLE_OFF:this.container.roomSession.removePetSaddle(t);break;case kr.PASS_CARRY_ITEM:ea(new l.lh(t));break;case kr.GIVE_CARRY_ITEM_TO_PET:ea(new l.mh(t));break;case kr.GIVE_WATER_TO_PET:ea(new l.pf(t,Xr.WATER));break;case kr.GIVE_LIGHT_TO_PET:ea(new l.pf(t,Xr.LIGHT));break;case kr.TREAT_PET:ea(new l.of(t));break;case kr.DROP_CARRY_ITEM:ea(new l.kh);break;case kr.REQUEST_PET_UPDATE:return void this.container.roomSession.userDataManager.requestPetInfo(t);case kr.REPORT:return;case kr.REPORT_CFH_OTHER:return void Kt(new yt(t));case kr.AMBASSADOR_ALERT_USER:return void this.container.roomSession.sendAmbassadorAlertMessage(t);case kr.AMBASSADOR_KICK_USER:return void this.container.roomSession.sendKickMessage(t);case kr.AMBASSADOR_MUTE_USER_2MIN:return void this.container.roomSession.sendMuteMessage(t,2);case kr.AMBASSADOR_MUTE_USER_10MIN:return void this.container.roomSession.sendMuteMessage(t,10);case kr.AMBASSADOR_MUTE_USER_60MIN:return void this.container.roomSession.sendMuteMessage(t,60);case kr.AMBASSADOR_MUTE_USER_18HOUR:return void this.container.roomSession.sendMuteMessage(t,1080);case Ir.ROTATE:return void G().processRoomObjectOperation(r,a,l.Eg.OBJECT_ROTATE_POSITIVE);case Ir.MOVE:return void G().processRoomObjectOperation(r,a,l.Eg.OBJECT_MOVE);case Ir.PICKUP:return void G().processRoomObjectOperation(r,a,l.Eg.OBJECT_PICKUP);case Ir.EJECT:return void G().processRoomObjectOperation(r,a,l.Eg.OBJECT_EJECT);case Ir.USE:return void G().useRoomObject(r,a);case Ir.SAVE_STUFF_DATA:var c=e;if(!c.objectData)return;var i=new Map,u=c.objectData.split("\t");if(u){var d,j=Object(s.a)(u);try{for(j.s();!(d=j.n()).done;){var b=d.value.split("=",2),O=Object(o.a)(b,2),h=O[0],f=O[1];i.set(h,f)}}catch(g){j.e(g)}finally{j.f()}}return void G().modifyRoomObjectDataWithMap(r,a,l.Eg.OBJECT_SAVE_STUFF_DATA,i);case Or.CHANGE_MOTTO:return void this.container.roomSession.sendMottoMessage(e.motto)}return null}},{key:"processObjectNameMessage",value:function(e){var t=-1,n=null,r=0;switch(e.category){case l.Cg.FLOOR:case l.Cg.WALL:var a=G().getRoomObject(this.container.roomSession.roomId,e.id,e.category);if(!a)break;if(0===a.type.indexOf("poster"))n=st("${poster_"+parseInt(a.type.replace("poster",""))+"_name}");else{var c=null,i=a.model.getValue(l.Ig.FURNITURE_TYPE_ID);if(e.category===l.Cg.FLOOR?c=ae().getFloorItemData(i):e.category===l.Cg.WALL&&(c=ae().getWallItemData(i)),!c)break;t=c.id,n=c.name}break;case l.Cg.UNIT:var s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!s)break;t=s.webID,n=s.name,r=s.type}return n&&this.container.eventDispatcher.dispatchEvent(new Ne(Ne.TYPE,e.id,e.category,t,n,r)),null}},{key:"processObjectInfoMessage",value:function(e){var t=this.container.roomSession.roomId;switch(e.category){case l.Cg.FLOOR:case l.Cg.WALL:this.processFurniInfoMessage(e,t);break;case l.Cg.UNIT:var n=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!n)break;switch(n.type){case l.Gg.PET:this.container.roomSession.userDataManager.requestPetInfo(n.webID);break;case l.Gg.USER:this.processUserInfoMessage(e,t,n);break;case l.Gg.BOT:this.processBotInfoMessage(e,t,n);break;case l.Gg.RENTABLE_BOT:this.processRentableBotInfoMessage(e,t,n)}}return null}},{key:"processFurniInfoMessage",value:function(e,t){var n=new Ge(Ge.FURNI);n.id=e.id,n.category=e.category;var r=G().getRoomObject(t,e.id,e.category);if(r){var a=r.model;a.getValue(l.th.INFOSTAND_EXTRA_PARAM)&&(n.extraParam=a.getValue(l.th.INFOSTAND_EXTRA_PARAM));var c=a.getValue(l.Ig.FURNITURE_DATA_FORMAT),i=l.bf.getData(c);i.initializeFromRoomObjectModel(a),n.stuffData=i;var s=r.type;if(0===s.indexOf("poster")){var o=parseInt(s.replace("poster",""));n.name=st("${poster_"+o+"_name}"),n.description=st("${poster_"+o+"_desc}")}else{var u=a.getValue(l.Ig.FURNITURE_TYPE_ID),d=null;e.category===l.Cg.FLOOR?d=ae().getFloorItemData(u):e.category===l.Cg.WALL&&(d=ae().getWallItemData(u)),d&&(n.name=d.name,n.description=d.description,n.purchaseOfferId=d.purchaseOfferId,n.purchaseCouldBeUsedForBuyout=d.purchaseCouldBeUsedForBuyout,n.rentOfferId=d.rentOfferId,n.rentCouldBeUsedForBuyout=d.rentCouldBeUsedForBuyout,n.availableForBuildersClub=d.availableForBuildersClub,n.tileSizeX=d.tileSizeX,n.tileSizeY=d.tileSizeY,Kt(new Ft(n.id,n.category)))}s.indexOf("post_it")>-1&&(n.isStickie=!0);var j=a.getValue(l.Ig.FURNITURE_EXPIRY_TIME),b=a.getValue(l.Ig.FURNITURE_EXPIRTY_TIMESTAMP);n.expiration=j<0?j:Math.max(0,j-(N().time-b)/1e3);var O=G().getRoomObjectImage(t,e.id,e.category,new l.Oi(180),64,null);(!O.data||O.data.width>140||O.data.height>200)&&(O=G().getRoomObjectImage(t,e.id,e.category,new l.Oi(180),1,null)),n.image=O.getImage(),n.isWallItem=e.category===l.Cg.WALL,n.isRoomOwner=this.container.roomSession.isRoomOwner,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.isAnyRoomController=ae().isModerator,n.ownerId=a.getValue(l.Ig.FURNITURE_OWNER_ID),n.ownerName=a.getValue(l.Ig.FURNITURE_OWNER_NAME),n.usagePolicy=a.getValue(l.Ig.FURNITURE_USAGE_POLICY);var h=a.getValue(l.Ig.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==h&&(n.groupId=h),Z(r)&&(n.isOwner=!0),this.container.eventDispatcher.dispatchEvent(n)}}},{key:"processUserInfoMessage",value:function(e,t,n){var r=qe.OWN_USER;n.webID!==ae().userId&&(r=qe.PEER);var a=new qe(r);a.isSpectatorMode=this.container.roomSession.isSpectator,a.name=n.name,a.motto=n.custom,a.achievementScore=n.activityPoints,a.webID=n.webID,a.roomIndex=n.roomIndex,a.userType=l.Gg.USER;var c=G().getRoomObject(t,n.roomIndex,e.category);if(c&&(a.carryItem=c.model.getValue(l.Ig.FIGURE_CARRY_OBJECT)||0),r===qe.OWN_USER&&(a.allowNameChange=ae().canChangeName),a.amIOwner=this.container.roomSession.isRoomOwner,a.isGuildRoom=this.container.roomSession.isGuildRoom,a.roomControllerLevel=this.container.roomSession.controllerLevel,a.amIAnyRoomController=ae().isModerator,a.isAmbassador=ae().isAmbassador,r===qe.PEER){if(c){var i=c.model.getValue(l.Ig.FIGURE_FLAT_CONTROL);null!==i&&(a.targetRoomControllerLevel=i),a.canBeMuted=this.canBeMuted(a),a.canBeKicked=this.canBeKicked(a),a.canBeBanned=this.canBeBanned(a)}a.isIgnored=ae().isUserIgnored(n.name),a.respectLeft=ae().respectsLeft;var s=ae().isSystemShutdown,o=this.container.roomSession.tradeMode;if(s)a.canTrade=!1;else switch(o){case l.ih.ROOM_CONTROLLER_REQUIRED:var u=a.roomControllerLevel!==l.Yf.NONE&&a.roomControllerLevel!==l.Yf.GUILD_MEMBER,d=a.targetRoomControllerLevel!==l.Yf.NONE&&a.targetRoomControllerLevel!==l.Yf.GUILD_MEMBER;a.canTrade=u||d;break;case l.ih.NO_TRADING:a.canTrade=!0;break;default:a.canTrade=!1}a.canTradeReason=qe.TRADE_REASON_OK,s&&(a.canTradeReason=qe.TRADE_REASON_SHUTDOWN),o!==l.ih.FREE_TRADING&&(a.canTradeReason=qe.TRADE_REASON_NO_TRADING)}a.groupId=n.groupId,a.groupBadgeId=ae().getGroupBadge(a.groupId),a.groupName=n.groupName,a.badges=this.container.roomSession.userDataManager.getUserBadges(n.webID),a.figure=n.figure,this.container.eventDispatcher.dispatchEvent(a)}},{key:"processBotInfoMessage",value:function(e,t,n){var r=new qe(qe.BOT);r.name=n.name,r.motto=n.custom,r.webID=n.webID,r.roomIndex=n.roomIndex,r.userType=n.type;var a=G().getRoomObject(t,n.roomIndex,e.category);a&&(r.carryItem=a.model.getValue(l.Ig.FIGURE_CARRY_OBJECT)||0),r.amIOwner=this.container.roomSession.isRoomOwner,r.isGuildRoom=this.container.roomSession.isGuildRoom,r.roomControllerLevel=this.container.roomSession.controllerLevel,r.amIAnyRoomController=ae().isModerator,r.isAmbassador=ae().isAmbassador,r.badges=[qe.DEFAULT_BOT_BADGE_ID],r.figure=n.figure,this.container.eventDispatcher.dispatchEvent(r)}},{key:"processRentableBotInfoMessage",value:function(e,t,n){var r=new Ve(Ve.RENTABLE_BOT);r.name=n.name,r.motto=n.custom,r.webID=n.webID,r.roomIndex=n.roomIndex,r.ownerId=n.ownerId,r.ownerName=n.ownerName,r.botSkills=n.botSkills;var a=G().getRoomObject(t,n.roomIndex,e.category);a&&(r.carryItem=a.model.getValue(l.Ig.FIGURE_CARRY_OBJECT)||0),r.amIOwner=this.container.roomSession.isRoomOwner,r.roomControllerLevel=this.container.roomSession.controllerLevel,r.amIAnyRoomController=ae().isModerator,r.badges=[qe.DEFAULT_BOT_BADGE_ID],r.figure=n.figure,this.container.eventDispatcher.dispatchEvent(r)}},{key:"processPetInfoEvent",value:function(e){var t=e.petInfo;if(t){var n=this.container.roomSession.userDataManager.getPetData(t.id);if(n){var r=new l.jf(n.figure),a=null;r.typeId===l.qf.MONSTERPLANT&&(a=t.level>=t.adultLevel?"std":"grw"+t.level);var c=t.ownerId===ae().userId,i=new We(We.PET_INFO);i.name=n.name,i.id=t.id,i.ownerId=t.ownerId,i.ownerName=t.ownerName,i.rarityLevel=t.rarityLevel,i.petType=r.typeId,i.petBreed=r.paletteId,i.petFigure=n.figure,i.posture=a,i.isOwner=c,i.roomIndex=n.roomIndex,i.level=t.level,i.maximumLevel=t.maximumLevel,i.experience=t.experience,i.levelExperienceGoal=t.levelExperienceGoal,i.energy=t.energy,i.maximumEnergy=t.maximumEnergy,i.happyness=t.happyness,i.maximumHappyness=t.maximumHappyness,i.respect=t.respect,i.respectsPetLeft=ae().respectsPetLeft,i.age=t.age,i.saddle=t.saddle,i.rider=t.rider,i.breedable=t.breedable,i.fullyGrown=t.fullyGrown,i.dead=t.dead,i.rarityLevel=t.rarityLevel,i.skillTresholds=t.skillTresholds,i.canRemovePet=!1,i.publiclyRideable=t.publiclyRideable,i.maximumTimeToLive=t.maximumTimeToLive,i.remainingTimeToLive=t.remainingTimeToLive,i.remainingGrowTime=t.remainingGrowTime,i.publiclyBreedable=t.publiclyBreedable,(c||this.container.roomSession.isRoomOwner||ae().isModerator||this.container.roomSession.controllerLevel>=l.Yf.GUEST)&&(i.canRemovePet=!0),this.container.eventDispatcher.dispatchEvent(i)}}}},{key:"checkGuildSetting",value:function(e){return e.isGuildRoom?e.roomControllerLevel>=l.Yf.GUILD_ADMIN:e.roomControllerLevel>=l.Yf.GUEST}},{key:"canBeMuted",value:function(e){var t=this;return this.isValidSetting(e,(function(e,n){return n.allowMute===l.Ag.MODERATION_LEVEL_USER_WITH_RIGHTS?t.checkGuildSetting(e):e.roomControllerLevel>=l.Yf.ROOM_OWNER}))}},{key:"canBeKicked",value:function(e){var t=this;return this.isValidSetting(e,(function(e,n){switch(n.allowKick){case l.Ag.MODERATION_LEVEL_ALL:return!0;case l.Ag.MODERATION_LEVEL_USER_WITH_RIGHTS:return t.checkGuildSetting(e);default:return e.roomControllerLevel>=l.Yf.ROOM_OWNER}}))}},{key:"canBeBanned",value:function(e){var t=this;return this.isValidSetting(e,(function(e,n){return n.allowBan===l.Ag.MODERATION_LEVEL_USER_WITH_RIGHTS?t.checkGuildSetting(e):e.roomControllerLevel>=l.Yf.ROOM_OWNER}))}},{key:"isValidSetting",value:function(e,t){if(!this.container.roomSession._Str_7411)return!1;var n=this.container.roomSession.moderationSettings,r=!1;return n&&(r=t(e,n)),r&&e.targetRoomControllerLevel<l.Yf.ROOM_OWNER}},{key:"type",get:function(){return l.sh.INFOSTAND}},{key:"eventTypes",get:function(){return[l.Ug.PET_INFO,l.Yg.RSUBE_BADGES,l.ah.USER_FIGURE,l.Tg.FAVOURITE_GROUP_UPDATE]}},{key:"messageTypes",get:function(){return[Nr.GET_OBJECT_INFO,Nr.GET_OBJECT_NAME,kr.RESPECT_USER,kr.WHISPER_USER,kr.IGNORE_USER,kr.UNIGNORE_USER,kr.KICK_USER,kr.BAN_USER_DAY,kr.BAN_USER_HOUR,kr.BAN_USER_PERM,kr.MUTE_USER_2MIN,kr.MUTE_USER_5MIN,kr.MUTE_USER_10MIN,kr.GIVE_RIGHTS,kr.TAKE_RIGHTS,kr.START_TRADING,kr.OPEN_HOME_PAGE,kr.PASS_CARRY_ITEM,kr.GIVE_CARRY_ITEM_TO_PET,kr.DROP_CARRY_ITEM,kr.REPORT,kr.PICKUP_PET,kr.MOUNT_PET,kr.TOGGLE_PET_RIDING_PERMISSION,kr.TOGGLE_PET_BREEDING_PERMISSION,kr.DISMOUNT_PET,kr.SADDLE_OFF,kr.TRAIN_PET,kr.RESPECT_PET,kr.REQUEST_PET_UPDATE,kr.GIVE_LIGHT_TO_PET,kr.GIVE_WATER_TO_PET,kr.TREAT_PET,kr.REPORT_CFH_OTHER,kr.AMBASSADOR_ALERT_USER,kr.AMBASSADOR_KICK_USER,kr.AMBASSADOR_MUTE_USER_2MIN,kr.AMBASSADOR_MUTE_USER_10MIN,kr.AMBASSADOR_MUTE_USER_60MIN,kr.AMBASSADOR_MUTE_USER_18HOUR,Or.CHANGE_MOTTO,Ir.MOVE,Ir.ROTATE,Ir.EJECT,Ir.PICKUP,Ir.USE,Ir.SAVE_STUFF_DATA]}}]),n}(Ar),Zr=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){}},{key:"processWidgetMessage",value:function(e){if(!e)return null;switch(e.type){case Sr.USER_CHOOSER:this.processChooser();break;case Nr.SELECT_OBJECT:this.selectRoomObject(e)}return null}},{key:"processChooser",value:function(){var e=this,t=this.container.roomSession.roomId,n=[];G().getRoomObjects(t,l.Cg.UNIT).forEach((function(t){var r=e.container.roomSession.userDataManager.getUserDataByIndex(t.id);r&&n.push(new _e(r.roomIndex,l.Cg.UNIT,r.name))})),n.sort((function(e,t){return e.name<t.name?-1:1})),this.container.eventDispatcher.dispatchEvent(new Te(Te.USER_CHOOSER_CONTENT,n))}},{key:"selectRoomObject",value:function(e){e.category===l.Cg.UNIT&&G().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}},{key:"type",get:function(){return l.sh.USER_CHOOSER}},{key:"eventTypes",get:function(){return[]}},{key:"messageTypes",get:function(){return[Sr.USER_CHOOSER,Nr.SELECT_OBJECT]}}]),n}(Ar),$r=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"processEvent",value:function(e){var t,n=e;switch(e.type){case l.bh.ANSWERED:var r=this.container.roomSession.roomId,a=this.container.roomSession.userDataManager.getUserData(n.userId);if(!a)return;(t=new tt(tt.QUESTION_ANSWERED,n.id)).value=n.value,t.userId=n.userId,t.answerCounts=n.answerCounts,"0"===t.value?G().updateRoomObjectUserGesture(r,a.roomIndex,l.k.getGestureId(l.k.GESTURE_SAD)):G().updateRoomObjectUserGesture(r,a.roomIndex,l.k.getGestureId(l.k.GESTURE_SMILE));break;case l.bh.FINISHED:(t=new tt(tt.QUESTION_FINISHED,n.id)).pollId=n.pollId,t.questionId=n.questionId,t.answerCounts=n.answerCounts;break;case l.bh.QUESTION:(t=new tt(tt.NEW_QUESTION,n.id)).question=n.question,t.duration=n.duration,t.pollType=n.pollType,t.questionId=n.questionId,t.pollId=n.pollId}t&&this.container.eventDispatcher.dispatchEvent(t)}},{key:"processWidgetMessage",value:function(e){return null}},{key:"type",get:function(){return l.sh.WORD_QUIZZ}},{key:"eventTypes",get:function(){return[l.bh.ANSWERED,l.bh.FINISHED,l.bh.QUESTION]}},{key:"messageTypes",get:function(){return[]}}]),n}(Ar),ea=function(e){return M().send(e)},ta=function(e){N().sendWorkerEvent(e)},na=function(e,t){var n=e.get(t),r=[];if(n&&n.length){var a,c=Object(s.a)(n);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.isVisible&&r.push(i)}}catch(o){c.e(o)}finally{c.f()}}return r},ra=function e(t,n,r,a){if(r.isVisible&&r.pageId>0){var c=!1,i=[r.pageName,r.localization].join(" ").toLowerCase().replace(/ /gi,"");if(i.indexOf(t)>-1&&(a.push(r),c=!0),!c){var o,l=Object(s.a)(n);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(i.indexOf(u)>=0){a.push(r);break}}}catch(b){l.e(b)}finally{l.f()}}}var d,j=Object(s.a)(r.children);try{for(j.s();!(d=j.n()).done;){e(t,n,d.value,a)}}catch(b){j.e(b)}finally{j.f()}};var aa=Object(d.a)((function e(){Object(u.a)(this,e)}));aa.WALL="i",aa.FLOOR="s",aa.EFFECT="e",aa.HABBO_CLUB="h",aa.BADGE="b",aa.GAME_TOKEN="GAME_TOKEN",aa.PET="p",aa.ROBOT="r";var ca=function(){function e(t,n,r,a,c,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;Object(u.a)(this,e),this._productType=void 0,this._productClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._productData=void 0,this._furnitureData=void 0,this._isUniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,this._productType=t.toLowerCase(),this._productClassId=n,this._extraParam=r,this._productCount=a,this._productData=c,this._furnitureData=i,this._isUniqueLimitedItem=s,this._uniqueLimitedItemSeriesSize=o,this._uniqueLimitedItemsLeft=l}return Object(d.a)(e,[{key:"getIconUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this._productType){case aa.FLOOR:return G().getFurnitureFloorIconUrl(this.productClassId);case aa.WALL:if(e&&this._furnitureData){var t="";switch(this._furnitureData.className){case"floor":t=["th",this._furnitureData.className,e.product.extraParam].join("_");break;case"wallpaper":t=["th","wall",e.product.extraParam].join("_");break;case"landscape":t=["th",this._furnitureData.className,(e.product.extraParam||"").replace(".","_"),"001"].join("_")}if(""!==t){var n=L("catalog.asset.url");return"".concat(n,"/").concat(t,".png")}}return G().getFurnitureWallIconUrl(this.productClassId,this._extraParam);case aa.EFFECT:case aa.HABBO_CLUB:return this.productClassId,"";case aa.BADGE:return ae().getBadgeUrl(this._extraParam);case aa.ROBOT:return null}return null}},{key:"productType",get:function(){return this._productType}},{key:"productClassId",get:function(){return this._productClassId}},{key:"extraParam",get:function(){return this._extraParam},set:function(e){this._extraParam=e}},{key:"productCount",get:function(){return this._productCount}},{key:"productData",get:function(){return this._productData}},{key:"furnitureData",get:function(){return this._furnitureData}},{key:"isUniqueLimitedItem",get:function(){return this._isUniqueLimitedItem}},{key:"uniqueLimitedItemSeriesSize",get:function(){return this._uniqueLimitedItemSeriesSize}},{key:"uniqueLimitedItemsLeft",get:function(){return this._uniqueLimitedItemsLeft},set:function(e){this._uniqueLimitedItemsLeft=e}}],[{key:"stripAddonProducts",value:function(t){return 1===t.length?t:t.filter((function(t){return t.productType!==aa.BADGE&&t.productType!==aa.EFFECT&&t.productClassId!==e.EFFECT_CLASSID_NINJA_DISAPPEAR}))}}]),e}();ca.EFFECT_CLASSID_NINJA_DISAPPEAR=108;var ia=function(){function e(t,n,r,a,c,i,o,l,d,j){Object(u.a)(this,e),this._pricingModel=void 0,this._priceType=void 0,this._offerId=void 0,this._localizationId=void 0,this._priceInCredits=void 0,this._priceInActivityPoints=void 0,this._activityPointType=void 0,this._giftable=void 0,this._isRentOffer=void 0,this._page=void 0,this._clubLevel=0,this._products=void 0,this._badgeCode=void 0,this._bundlePurchaseAllowed=!1,this._offerId=t,this._localizationId=n,this._isRentOffer=r,this._priceInCredits=a,this._priceInActivityPoints=c,this._activityPointType=i,this._giftable=o,this._clubLevel=l,this._products=d,this._bundlePurchaseAllowed=j,this.setPricingModelForProducts(),this.setPricingType();var b,O=Object(s.a)(d);try{for(O.s();!(b=O.n()).done;){var h=b.value;if(h.productType===aa.BADGE){this._badgeCode=h.extraParam;break}}}catch(f){O.e(f)}finally{O.f()}}return Object(d.a)(e,[{key:"activate",value:function(){}},{key:"clubLevel",get:function(){return this._clubLevel}},{key:"page",get:function(){return this._page},set:function(e){this._page=e}},{key:"offerId",get:function(){return this._offerId}},{key:"localizationId",get:function(){return this._localizationId}},{key:"priceInCredits",get:function(){return this._priceInCredits}},{key:"priceInActivityPoints",get:function(){return this._priceInActivityPoints}},{key:"activityPointType",get:function(){return this._activityPointType}},{key:"giftable",get:function(){return this._giftable}},{key:"product",get:function(){if(!this._products||!this._products.length)return null;if(1===this._products.length)return this._products[0];var e=ca.stripAddonProducts(this._products);return e.length?e[0]:null}},{key:"pricingModel",get:function(){return this._pricingModel}},{key:"priceType",get:function(){return this._priceType}},{key:"bundlePurchaseAllowed",get:function(){return this._bundlePurchaseAllowed}},{key:"isRentOffer",get:function(){return this._isRentOffer}},{key:"badgeCode",get:function(){return this._badgeCode}},{key:"localizationName",get:function(){var e=le(this._localizationId);return e?e.name:st(this._localizationId)}},{key:"localizationDescription",get:function(){var e=le(this._localizationId);return e?e.description:st(this._localizationId)}},{key:"isLazy",get:function(){return!1}},{key:"products",get:function(){return this._products}},{key:"setPricingModelForProducts",value:function(){var t=ca.stripAddonProducts(this._products);1===t.length?1===t[0].productCount?this._pricingModel=e.PRICING_MODEL_SINGLE:this._pricingModel=e.PRICING_MODEL_MULTI:t.length>1?this._pricingModel=e.PRICING_MODEL_BUNDLE:this._pricingModel=e.PRICING_MODEL_UNKNOWN}},{key:"setPricingType",value:function(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=e.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=e.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=e.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=e.PRICE_TYPE_NONE}},{key:"clone",value:function(){var t,n=[],r=le(this.localizationId),a=Object(s.a)(this._products);try{for(a.s();!(t=a.n()).done;){var c=t.value,i=ie(c.productClassId,c.productType);n.push(new ca(c.productType,c.productClassId,c.extraParam,c.productCount,r,i))}}catch(l){a.e(l)}finally{a.f()}var o=new e(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,n,this.bundlePurchaseAllowed);return o.page=this.page,o}}]),e}();ia.PRICING_MODEL_UNKNOWN="pricing_model_unknown",ia.PRICING_MODEL_SINGLE="pricing_model_single",ia.PRICING_MODEL_MULTI="pricing_model_multi",ia.PRICING_MODEL_BUNDLE="pricing_model_bundle",ia.PRICING_MODEL_FURNITURE="pricing_model_furniture",ia.PRICE_TYPE_NONE="price_type_none",ia.PRICE_TYPE_CREDITS="price_type_credits",ia.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",ia.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";var sa=function(){function e(t){Object(u.a)(this,e),this._furniData=void 0,this._page=void 0,this._product=void 0,this._furniData=t,this._product=new ca(this._furniData.type,this._furniData.id,this._furniData.customParams,1,le(this._furniData.className),this._furniData)}return Object(d.a)(e,[{key:"activate",value:function(){ea(new l.rc(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}},{key:"offerId",get:function(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}},{key:"priceInActivityPoints",get:function(){return 0}},{key:"activityPointType",get:function(){return 0}},{key:"priceInCredits",get:function(){return 0}},{key:"page",get:function(){return this._page},set:function(e){this._page=e}},{key:"priceType",get:function(){return""}},{key:"product",get:function(){return this._product}},{key:"products",get:function(){return[this._product]}},{key:"localizationId",get:function(){return"roomItem.name."+this._furniData.id}},{key:"bundlePurchaseAllowed",get:function(){return!1}},{key:"isRentOffer",get:function(){return this._furniData.rentOfferId>-1}},{key:"giftable",get:function(){return!1}},{key:"pricingModel",get:function(){return ia.PRICING_MODEL_FURNITURE}},{key:"clubLevel",get:function(){return 0}},{key:"badgeCode",get:function(){return""}},{key:"localizationName",get:function(){return this._furniData.name}},{key:"localizationDescription",get:function(){return this._furniData.description}},{key:"isLazy",get:function(){return!0}}]),e}(),oa=function(){function e(t){Object(u.a)(this,e),this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=t.isEnabled,this._price=t.price,this._boxTypes=t.boxTypes,this._ribbonTypes=t.ribbonTypes,this._stuffTypes=t.giftWrappers,this._defaultStuffTypes=t.giftFurnis}return Object(d.a)(e,[{key:"isEnabled",get:function(){return this._isEnabled}},{key:"price",get:function(){return this._price}},{key:"stuffTypes",get:function(){return this._stuffTypes}},{key:"boxTypes",get:function(){return this._boxTypes}},{key:"ribbonTypes",get:function(){return this._ribbonTypes}},{key:"defaultStuffTypes",get:function(){return this._defaultStuffTypes}}]),e}(),la=function(){function e(t,n){Object(u.a)(this,e),this._images=void 0,this._texts=void 0,this._images=t,this._texts=n}return Object(d.a)(e,[{key:"getText",value:function(e){var t=this._texts[e]||"";return t&&t.length&&(t=t.replace(/\r\n|\r|\n/g,"<br />")),t}},{key:"getImage",value:function(e){var t=this._images[e]||"";if(!t||!t.length)return null;var n=L("catalog.asset.image.url");return n=n.replace("%name%",t)}}]),e}(),ua=function(){function e(t,n,r,a,c,i,s,o){Object(u.a)(this,e),this.roomId=t,this.objectId=n,this.category=r,this.wallLocation=a,this.x=c,this.y=i,this.direction=s,this.offer=o}return Object(d.a)(e,[{key:"offerId",get:function(){return this.offer.offerId}},{key:"productClassId",get:function(){return this.offer.product.productClassId}},{key:"productData",get:function(){return this.offer.product.productData}},{key:"furniData",get:function(){return this.offer.product.furnitureData}},{key:"extraParam",get:function(){return this.offer.product.extraParam}}]),e}(),da=function(){function e(){Object(u.a)(this,e),this._requestType=void 0,this._requestById=void 0,this._requestedByOfferId=void 0,this._requestByName=void 0,this._requestType=e.REQUEST_TYPE_NONE}return Object(d.a)(e,[{key:"resetRequest",value:function(){this._requestType=e.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}},{key:"requestType",get:function(){return this._requestType}},{key:"requestById",get:function(){return this._requestById},set:function(t){this._requestType=e.REQUEST_TYPE_ID,this._requestById=t}},{key:"requestedByOfferId",get:function(){return this._requestedByOfferId},set:function(t){this._requestType=e.REQUEST_TYPE_OFFER,this._requestedByOfferId=t}},{key:"requestByName",get:function(){return this._requestByName},set:function(t){this._requestType=e.REQUEST_TYPE_NAME,this._requestByName=t}}]),e}();da.REQUEST_TYPE_NONE=0,da.REQUEST_TYPE_ID=1,da.REQUEST_TYPE_OFFER=2,da.REQUEST_TYPE_NAME=3;var ja=Object(d.a)((function e(t,n,r){Object(u.a)(this,e),this.searchValue=t,this.offers=n,this.filteredNodes=r}));function ba(){return N().core}function Oa(){return ba().configuration}var ha=function(e){if(!e||!e.length)return null;var t=e.split("/");return{username:t[0],figure:t[1],userId:parseInt(t[2])}},fa=Object(d.a)((function e(){Object(u.a)(this,e)}));fa.GROUP_CHAT=0,fa.PRIVATE_CHAT=1;var ga=Object(d.a)((function e(){Object(u.a)(this,e)}));ga.HIDDEN=0,ga.SHOW=1,ga.UNREAD=2;var ma=function(){function e(){Object(u.a)(this,e),this._id=void 0,this._name=void 0,this._requesterUserId=void 0,this._figureString=void 0}return Object(d.a)(e,[{key:"populate",value:function(e){return!!e&&(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"requesterUserId",get:function(){return this._requesterUserId}},{key:"figureString",get:function(){return this._figureString}}]),e}(),va=Object(d.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(u.a)(this,e),this.userFriendLimit=t,this.normalFriendLimit=n,this.extendedFriendLimit=r,this.categories=a})),pa=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(u.a)(this,e),this._type=void 0,this._senderId=void 0,this._message=void 0,this._secondsSinceSent=void 0,this._extraData=void 0,this._date=void 0,this._type=c,this._senderId=t,this._message=n,this._secondsSinceSent=r,this._extraData=a,this._date=new Date}return Object(d.a)(e,[{key:"type",get:function(){return this._type}},{key:"senderId",get:function(){return this._senderId}},{key:"message",get:function(){return this._message}},{key:"secondsSinceSent",get:function(){return this._secondsSinceSent}},{key:"extraData",get:function(){return this._extraData}},{key:"date",get:function(){return this._date}}]),e}();pa.CHAT=0,pa.ROOM_INVITE=1,pa.STATUS_NOTIFICATION=2,pa.SECURITY_NOTIFICATION=3;var xa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa.PRIVATE_CHAT;Object(u.a)(this,e),this._userId=void 0,this._chats=void 0,this._type=void 0,this._userId=t,this._chats=[],this._type=n}return Object(d.a)(e,[{key:"addChat",value:function(e){this._chats.push(e)}},{key:"userId",get:function(){return this._userId}},{key:"chats",get:function(){return this._chats}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}}]),e}(),_a=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(u.a)(this,e),this._threadId=void 0,this._participant=void 0,this._groups=void 0,this._lastUpdated=void 0,this._unreadCount=void 0,this._threadId=++e.THREAD_ID,this._participant=t,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0,n&&(this.addMessage(null,st("messenger.moderationinfo"),0,null,pa.SECURITY_NOTIFICATION),this._unreadCount=0)}return Object(d.a)(e,[{key:"addMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=e<0&&r,i=c?ha(r).userId:e,s=this.getLastGroup(i);if(s){c&&(s.type=fa.GROUP_CHAT);var o=new pa(e,t,n,r,a);return s.addChat(o),this._lastUpdated=new Date,this._unreadCount++,o}}},{key:"getLastGroup",value:function(e){var t=this._groups[this._groups.length-1];return t&&t.userId===e||(t=new xa(e),this._groups.push(t)),t}},{key:"setRead",value:function(){this._unreadCount=0}},{key:"threadId",get:function(){return this._threadId}},{key:"participant",get:function(){return this._participant}},{key:"groups",get:function(){return this._groups}},{key:"lastUpdated",get:function(){return this._lastUpdated}},{key:"unreadCount",get:function(){return this._unreadCount}},{key:"unread",get:function(){return this._unreadCount>0}}]),e}();function Ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;U(0===e?"friends-messenger/open":"friends-messenger/".concat(e))}_a.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",_a.THREAD_ID=0;function Ia(e){ea(new l.Oc(e,!0))}function ya(e){U("groups/manage/".concat(e))}function Ca(e,t){U(t?"group-members/".concat(e,"/").concat(t):"group-members/".concat(e))}var Ta=function(e){return ea(new l.Qc(e))},Sa=Object(d.a)((function e(){Object(u.a)(this,e)}));Sa.ACTIVE="active",Sa.NONE="none",Sa.EXPIRED="expired";var Na=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],Ra=Object(d.a)((function e(){Object(u.a)(this,e)}));Ra.NONE=0,Ra.START_DOORBELL=1,Ra.START_PASSWORD=2,Ra.STATE_PENDING_SERVER=3,Ra.UPDATE_STATE=4,Ra.STATE_WAITING=5,Ra.STATE_NO_ANSWER=6,Ra.STATE_WRONG_PASSWORD=7,Ra.STATE_ACCEPTED=8;var ka=Object(d.a)((function e(){Object(u.a)(this,e)}));ka.LIST=0,ka.THUMBNAILS=1,ka.FORCED_THUMBNAILS=2;var Aa=function(){for(var e=[],t=10;t<=100;t+=10)e.push(t);return e}(),wa=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function Da(e){ea(new l.wg(e,!1,!0))}var Ua=Object(d.a)((function e(){Object(u.a)(this,e)}));Ua.DEFAULT="default",Ua.MOTD="motd",Ua.MODERATION="moderation",Ua.EVENT="event",Ua.NITRO="nitro",Ua.SEARCH="search",Ua.ALERT="alert";var Pa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua.DEFAULT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(u.a)(this,e),this._id=void 0,this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,e.ITEM_ID+=1,this._id=e.ITEM_ID,this._messages=t,this._alertType=n,this._clickUrl=r,this._clickUrlText=a,this._title=c,this._imageUrl=i}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"messages",get:function(){return this._messages}},{key:"alertType",get:function(){return this._alertType},set:function(e){this._alertType=e}},{key:"clickUrl",get:function(){return this._clickUrl}},{key:"clickUrlText",get:function(){return this._clickUrlText}},{key:"title",get:function(){return this._title}},{key:"imageUrl",get:function(){return this._imageUrl}}]),e}();Pa.ITEM_ID=-1;var La=Object(d.a)((function e(){Object(u.a)(this,e)}));La.FRIENDOFFLINE="friendoffline",La.FRIENDONLINE="friendonline",La.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",La.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",La.ACHIEVEMENT="achievement",La.BADGE_RECEIVED="badge_received",La.INFO="info",La.RECYCLEROK="recyclerok",La.RESPECT="respect",La.CLUB="club",La.SOUNDMACHINE="soundmachine",La.PETLEVEL="petlevel",La.CLUBGIFT="clubgift",La.BUYFURNI="buyfurni",La.VIP="vip",La.ROOMMESSAGESPOSTED="roommessagesposted";var Ma=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:La.INFO,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(u.a)(this,e),this._id=void 0,this._message=void 0,this._notificationType=void 0,this._iconUrl=void 0,this._linkUrl=void 0,e.ITEM_ID+=1,this._id=e.ITEM_ID,this._message=t,this._notificationType=n,this._iconUrl=r,this._linkUrl=a}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"message",get:function(){return this._message}},{key:"notificationType",get:function(){return this._notificationType}},{key:"iconUrl",get:function(){return this._iconUrl}},{key:"linkUrl",get:function(){return this._linkUrl}}]),e}();Ma.ITEM_ID=-1;var Fa=function(){function e(t,n,r,a,c,i,s){Object(u.a)(this,e),this._id=void 0,this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,e.ITEM_ID+=1,this._id=e.ITEM_ID,this._confirmType=t,this._message=n,this._onConfirm=r,this._onCancel=a,this._confirmText=c,this._cancelText=i,this._title=s}return Object(d.a)(e,[{key:"id",get:function(){return this._id}},{key:"confirmType",get:function(){return this._confirmType}},{key:"message",get:function(){return this._message}},{key:"onConfirm",get:function(){return this._onConfirm}},{key:"onCancel",get:function(){return this._onCancel}},{key:"confirmText",get:function(){return this._confirmText}},{key:"cancelText",get:function(){return this._cancelText}},{key:"title",get:function(){return this._title}}]),e}();Fa.ITEM_ID=-1,Object(d.a)((function e(){Object(u.a)(this,e)})).DEFAULT="default";var Ha=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"cleanText",value:function(e){return e.replace(/\\r/g,"\r")}},{key:"getTimeZeroPadded",value:function(e){var t="0"+e;return t.substr(t.length-2,t.length)}},{key:"getMainNotificationConfig",value:function(){return L("notification",{})}},{key:"getNotificationConfig",value:function(e){var t=this.getMainNotificationConfig();return t?t[e]:null}},{key:"getNotificationPart",value:function(e,t,n,r){if(e.has(n))return e.get(n);var a=["notification",t,n].join(".");return N().localization.hasValue(a)||r?st(a,Array.from(e.keys()),Array.from(e.values())):null}},{key:"getNotificationImageUrl",value:function(e,t){var n=e.get("image");return n||(n=L("image.library.notifications.url","").replace("%image%",t.replace(/\./g,"_"))),st(n)}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=new Map);var n=this.getNotificationConfig("notification."+e);if(n)for(var r in n)t.set(r,n[r]);var a=this.getNotificationPart(t,e,"title",!0),c=this.getNotificationPart(t,e,"message",!0).replace(/\\r/g,"\r"),i=this.getNotificationPart(t,e,"linkTitle",!1),s=this.getNotificationPart(t,e,"linkUrl",!1),o=this.getNotificationImageUrl(t,e);"BUBBLE"===t.get("display")?this.showSingleBubble(st(c),La.INFO,o,s):this.simpleAlert(c,e,s,i,a,o),t.get("sound")&&wn(t.get("sound"))}},{key:"showSingleBubble",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.BUBBLES_DISABLED||Kt(new wt(e,t,n,r))}},{key:"showClubGiftNotification",value:function(e){e<=0||this.showSingleBubble(e.toString(),La.CLUBGIFT,null,"catalog/open/"+L("catalog.links")["hc.hc_gifts"])}},{key:"handleMOTD",value:function(e){var t=this;e=e.map((function(e){return t.cleanText(e)})),Kt(new At(e,Ua.MOTD,null,null,st("notifications.motd.title")))}},{key:"confirm",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;r&&r.length||(r=st("generic.confirm")),a&&a.length||(a=st("generic.cancel")),c&&c.length||(c=st("notifications.broadcast.title")),Kt(new Pt(i,this.cleanText(e),t,n,r,a,c))}},{key:"simpleAlert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;a&&a.length||(a=st("notifications.broadcast.title")),t&&t.length||(t=Ua.DEFAULT),Kt(new At([this.cleanText(e)],t,n,r,a,c))}},{key:"showNitroAlert",value:function(){Kt(new At(null,Ua.NITRO))}},{key:"showModeratorMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.simpleAlert(e,Ua.DEFAULT,t,st("mod.alert.link"),st("mod.alert.title"))}},{key:"handleModeratorCaution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t)}},{key:"handleModeratorMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t,!1)}},{key:"handleUserBannedMessage",value:function(e){this.showModeratorMessage(e)}},{key:"handleHotelClosedMessage",value:function(e,t,n){this.simpleAlert(st("opening.hours."+(n?"disconnected":"closed"),["h","m"],[this.getTimeZeroPadded(e),this.getTimeZeroPadded(t)]),Ua.DEFAULT,null,null,st("opening.hours.title"))}},{key:"handleHotelMaintenanceMessage",value:function(e,t){this.simpleAlert(st("maintenance.shutdown",["m","d"],[e.toString(),t.toString()]),Ua.DEFAULT,null,null,st("opening.hours.title"))}},{key:"handleHotelClosingMessage",value:function(e){this.simpleAlert(st("opening.hours.shutdown",["m"],[e.toString()]),Ua.DEFAULT,null,null,st("opening.hours.title"))}},{key:"handleLoginFailedHotelClosedMessage",value:function(e,t){this.simpleAlert(st("opening.hours.disconnected",["h","m"],[e.toString(),t.toString()]),Ua.DEFAULT,null,null,st("opening.hours.title"))}},{key:"openUrl",value:function(e){e&&e.length&&(e.startsWith("http")?l.Ed.openWebPage(e):U(e))}},{key:"showModerationDisclaimer",value:function(){var e=this;if(l.og.isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout((function(){e.showModerationDisclaimer()}),l.og.totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS)}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble(st("mod.chatdisclaimer"),La.INFO),this.MODERATION_DISCLAIMER_SHOWN=!0}}}]),e}();Ha.MODERATION_DISCLAIMER_SHOWN=!1,Ha.MODERATION_DISCLAIMER_DELAY_MS=5e3,Ha.MODERATION_DISCLAIMER_TIMEOUT=null,Ha.BUBBLES_DISABLED=!1;var Ba=function(){function e(){Object(u.a)(this,e),this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}return Object(d.a)(e,[{key:"credits",get:function(){return this._credits},set:function(e){this._lastUpdated=N().time,this._credits=e}},{key:"activityPoints",get:function(){return this._activityPoints},set:function(e){this._lastUpdated=N().time,this._activityPoints=e}},{key:"clubDays",get:function(){return this._clubDays},set:function(e){this._lastUpdated=N().time,this._clubDays=e}},{key:"clubPeriods",get:function(){return this._clubPeriods},set:function(e){this._lastUpdated=N().time,this._clubPeriods=e}},{key:"_Str_13571",get:function(){return this._clubDays>0||this._clubPeriods>0}},{key:"isVip",get:function(){return this._isVIP},set:function(e){this._isVIP=e}},{key:"pastClubDays",get:function(){return this._pastClubDays},set:function(e){this._lastUpdated=N().time,this._pastClubDays=e}},{key:"pastVipDays",get:function(){return this._pastVipDays},set:function(e){this._lastUpdated=N().time,this._pastVipDays=e}},{key:"isExpiring",get:function(){return this._isExpiring},set:function(e){this._isExpiring=e}},{key:"minutesUntilExpiration",get:function(){var e=(N().time-this._lastUpdated)/6e4,t=this._minutesUntilExpiration-e;return t>0?t:0},set:function(e){this._lastUpdated=N().time,this._minutesUntilExpiration=e}},{key:"minutesSinceLastModified",get:function(){return this._minutesSinceLastModified},set:function(e){this._lastUpdated=N().time,this._minutesSinceLastModified=e}},{key:"lastUpdated",get:function(){return this._lastUpdated}},{key:"clubLevel",get:function(){return 0===this.clubDays&&0===this.clubPeriods?l.zd.NO_CLUB:this.isVip?l.zd.VIP:l.zd.CLUB}}],[{key:"from",value:function(t){var n=new e;return n._credits=t._credits,n._activityPoints=t._activityPoints,n._clubDays=t._clubDays,n._clubPeriods=t._clubPeriods,n._isVIP=t._isVIP,n._pastClubDays=t._pastClubDays,n._pastVipDays=t._pastVipDays,n._isExpiring=t._isExpiring,n._minutesUntilExpiration=t._minutesUntilExpiration,n._minutesSinceLastModified=t._minutesSinceLastModified,n._lastUpdated=t._lastUpdated,n}}]),e}();function Ga(e){ea(new l.Ci(e))}var Wa=function(e){var t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()},Va=Object(d.a)((function e(){Object(u.a)(this,e)}));Va.TOGGLE_FURNI_STATE=0,Va.RESET=1,Va.SET_FURNI_STATE=3,Va.MOVE_FURNI=4,Va.GIVE_SCORE=6,Va.CHAT=7,Va.TELEPORT=8,Va.JOIN_TEAM=9,Va.LEAVE_TEAM=10,Va.CHASE=11,Va.FLEE=12,Va.MOVE_AND_ROTATE_FURNI=13,Va.GIVE_SCORE_TO_PREDEFINED_TEAM=14,Va.TOGGLE_TO_RANDOM_STATE=15,Va.MOVE_FURNI_TO=16,Va.GIVE_REWARD=17,Va.CALL_ANOTHER_STACK=18,Va.KICK_FROM_ROOM=19,Va.MUTE_USER=20,Va.BOT_TELEPORT=21,Va.BOT_MOVE=22,Va.BOT_TALK=23,Va.BOT_GIVE_HAND_ITEM=24,Va.BOT_FOLLOW_AVATAR=25,Va.BOT_CHANGE_FIGURE=26,Va.BOT_TALK_DIRECT_TO_AVTR=27;var qa=Object(d.a)((function e(){Object(u.a)(this,e)}));qa.STATES_MATCH=0,qa.FURNIS_HAVE_AVATARS=1,qa.ACTOR_IS_ON_FURNI=2,qa.TIME_ELAPSED_MORE=3,qa.TIME_ELAPSED_LESS=4,qa.USER_COUNT_IN=5,qa.ACTOR_IS_IN_TEAM=6,qa.HAS_STACKED_FURNIS=7,qa.STUFF_TYPE_MATCHES=8,qa.STUFFS_IN_FORMATION=9,qa.ACTOR_IS_GROUP_MEMBER=10,qa.ACTOR_IS_WEARING_BADGE=11,qa.ACTOR_IS_WEARING_EFFECT=12,qa.NOT_STATES_MATCH=13,qa.FURNI_NOT_HAVE_HABBO=14,qa.NOT_ACTOR_ON_FURNI=15,qa.NOT_USER_COUNT_IN=16,qa.NOT_ACTOR_IN_TEAM=17,qa.NOT_HAS_STACKED_FURNIS=18,qa.NOT_FURNI_IS_OF_TYPE=19,qa.NOT_STUFFS_IN_FORMATION=20,qa.NOT_ACTOR_IN_GROUP=21,qa.NOT_ACTOR_WEARS_BADGE=22,qa.NOT_ACTOR_WEARING_EFFECT=23,qa.DATE_RANGE_ACTIVE=24,qa.ACTOR_HAS_HANDITEM=25;var Ya=function(e){return"".concat(e.getFullYear(),"/").concat(("0"+(e.getMonth()+1)).slice(-2),"/").concat(("0"+e.getDate()).slice(-2)," ").concat(("0"+e.getHours()).slice(-2),":").concat(("0"+e.getMinutes()).slice(-2))},za=Object(d.a)((function e(){Object(u.a)(this,e)}));za.STUFF_SELECTION_OPTION_NONE=0,za.STUFF_SELECTION_OPTION_BY_ID=1,za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;var Ka=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"))._lineColor=void 0,a._color=void 0,a.uniforms.lineColor=new Float32Array(3),a.uniforms.color=new Float32Array(3),a.lineColor=e,a.color=r,a}return Object(d.a)(n,[{key:"lineColor",get:function(){return this._lineColor},set:function(e){var t=this.uniforms.lineColor;"number"===typeof e?(l.ib.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=l.ib.rgb2hex(t))}},{key:"color",get:function(){return this._color},set:function(e){var t=this.uniforms.color;"number"===typeof e?(l.ib.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=l.ib.rgb2hex(t))}}]),n}(l.Pe),Qa=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"show",value:function(t){e.applySelectionShader(e.getRoomObject(t))}},{key:"hide",value:function(t){e.clearSelectionShader(e.getRoomObject(t))}},{key:"clearSelectionShaderFromFurni",value:function(t){var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.clearSelectionShader(e.getRoomObject(a))}}catch(c){r.e(c)}finally{r.f()}}},{key:"applySelectionShaderToFurni",value:function(t){var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.applySelectionShader(e.getRoomObject(a))}}catch(c){r.e(c)}finally{r.f()}}},{key:"getRoomObject",value:function(e){var t=G();return t.getRoomObject(t.activeRoomId,e,l.Cg.FLOOR)}},{key:"applySelectionShader",value:function(t){if(t){var n=t.visualization;if(n){var r,a=Object(s.a)(n.sprites);try{for(a.s();!(r=a.n()).done;){var c=r.value;1!==c.blendMode&&(c.filters=[e._selectionShader])}}catch(i){a.e(i)}finally{a.f()}}}}},{key:"clearSelectionShader",value:function(e){if(e){var t=e.visualization;if(t){var n,r=Object(s.a)(t.sprites);try{for(r.s();!(n=r.n()).done;){n.value.filters=[]}}catch(a){r.e(a)}finally{r.f()}}}}}]),e}();Qa._selectionShader=new Ka([1,1,1],[.6,.6,.6]);var Xa="\t",Ja=Object(d.a)((function e(){Object(u.a)(this,e)}));Ja.AVATAR_SAYS_SOMETHING=0,Ja.AVATAR_WALKS_ON_FURNI=1,Ja.AVATAR_WALKS_OFF_FURNI=2,Ja.EXECUTE_ONCE=3,Ja.TOGGLE_FURNI=4,Ja.EXECUTE_PERIODICALLY=6,Ja.AVATAR_ENTERS_ROOM=7,Ja.GAME_STARTS=8,Ja.GAME_ENDS=9,Ja.SCORE_ACHIEVED=10,Ja.COLLISION=11,Ja.EXECUTE_PERIODICALLY_LONG=12,Ja.BOT_REACHED_STUFF=13,Ja.BOT_REACHED_AVATAR=14;var Za=n(17),$a=n(0),ec=["ref","innerRef","display","fit","grow","shrink","fullWidth","fullHeight","overflow","position","float","pointer","visible","textColor","classNames","className","style","children"],tc=function(e){e.ref;var t=e.innerRef,n=void 0===t?null:t,r=e.display,a=void 0===r?null:r,i=e.fit,s=void 0!==i&&i,o=e.grow,l=void 0!==o&&o,u=e.shrink,d=void 0!==u&&u,j=e.fullWidth,b=void 0!==j&&j,O=e.fullHeight,h=void 0!==O&&O,f=e.overflow,g=void 0===f?null:f,m=e.position,v=void 0===m?null:m,p=e.float,x=void 0===p?null:p,_=e.pointer,E=void 0!==_&&_,I=e.visible,y=void 0===I?null:I,C=e.textColor,T=void 0===C?null:C,S=e.classNames,N=void 0===S?[]:S,R=e.className,k=void 0===R?"":R,A=e.style,w=void 0===A?{}:A,D=e.children,U=void 0===D?null:D,P=Object(Za.a)(e,ec),L=Object(c.useMemo)((function(){var e=[];return a&&a.length&&e.push("d-"+a),(s||b)&&e.push("w-100"),(s||h)&&e.push("h-100"),l&&e.push("flex-grow-1"),d&&e.push("flex-shrink-0"),g&&e.push("overflow-"+g),v&&e.push("position-"+v),x&&e.push("float-"+x),E&&e.push("cursor-pointer"),null!==y&&e.push(y?"visible":"invisible"),T&&e.push("text-"+T),N.length&&e.push.apply(e,Object(ut.a)(N)),e}),[a,s,l,d,b,h,g,v,x,E,y,T,N]),M=Object(c.useMemo)((function(){var e=L.join(" ");return k.length&&(e+=" "+k),e.trim()}),[L,k]),F=Object(c.useMemo)((function(){var e={};return Object.keys(w).length&&(e=Object(bt.a)(Object(bt.a)({},e),w)),e}),[w]);return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({ref:n,className:M,style:F},P),{},{children:U}))},nc=Object(c.createContext)({isCssGrid:!1}),rc=function(e){return Object($a.jsx)(nc.Provider,{value:e.value,children:e.children})},ac=["inline","gap","maxContent","columnCount","center","alignSelf","alignItems","justifyContent","fullHeight","classNames","style"],cc=function(e){var t=e.inline,n=void 0!==t&&t,r=e.gap,a=void 0===r?2:r,i=e.maxContent,s=void 0!==i&&i,o=e.columnCount,l=void 0===o?0:o,u=e.center,d=void 0!==u&&u,j=e.alignSelf,b=void 0===j?null:j,O=e.alignItems,h=void 0===O?null:O,f=e.justifyContent,g=void 0===f?null:f,m=e.fullHeight,v=void 0===m||m,p=e.classNames,x=void 0===p?[]:p,_=e.style,E=void 0===_?{}:_,I=Object(Za.a)(e,ac),y=Object(c.useMemo)((function(){var e=[];return n?e.push("inline-grid"):e.push("grid"),a?e.push("gap-"+a):0===a&&e.push("gap-0"),s&&e.push("flex-basis-max-content"),b&&e.push("align-self-"+b),h&&e.push("align-items-"+h),g&&e.push("justify-content-"+g),h||g||!d||e.push("align-items-center","justify-content-center"),x.length&&e.push.apply(e,Object(ut.a)(x)),e}),[n,a,s,b,h,g,d,x]),C=Object(c.useMemo)((function(){var e={};return l&&(e["--bs-columns"]=l.toString()),Object.keys(E).length&&(e=Object(bt.a)(Object(bt.a)({},e),E)),e}),[l,E]);return Object($a.jsx)(rc,{value:{isCssGrid:!0},children:Object($a.jsx)(tc,Object(bt.a)({fullHeight:v,classNames:y,style:C},I))})},ic=["columnMinWidth","columnMinHeight","columnCount","fullHeight","maxContent","overflow","style"],sc=function(e){var t=e.columnMinWidth,n=void 0===t?40:t,r=e.columnMinHeight,a=void 0===r?40:r,i=e.columnCount,s=void 0===i?0:i,o=e.fullHeight,l=void 0!==o&&o,u=(e.maxContent,e.overflow),d=void 0===u?"auto":u,j=e.style,b=void 0===j?{}:j,O=Object(Za.a)(e,ic),h=Object(c.useMemo)((function(){var e={};return e["--nitro-grid-column-min-height"]=a+"px",s>1&&(e.gridTemplateColumns="repeat(auto-fill, minmax(".concat(n,"px, 1fr))")),Object.keys(b).length&&(e=Object(bt.a)(Object(bt.a)({},e),b)),e}),[n,a,s,b]);return Object($a.jsx)(cc,Object(bt.a)({columnCount:s,fullHeight:l,overflow:d,style:h},O))},oc=["display","column","reverse","gap","center","alignSelf","alignItems","justifyContent","classNames"],lc=function(e){var t=e.display,n=void 0===t?"flex":t,r=e.column,a=void 0===r?void 0:r,i=e.reverse,s=void 0!==i&&i,o=e.gap,l=void 0===o?null:o,u=e.center,d=void 0!==u&&u,j=e.alignSelf,b=void 0===j?null:j,O=e.alignItems,h=void 0===O?null:O,f=e.justifyContent,g=void 0===f?null:f,m=e.classNames,v=void 0===m?[]:m,p=Object(Za.a)(e,oc),x=Object(c.useMemo)((function(){var e=[];return a?s?e.push("flex-column-reverse"):e.push("flex-column"):s&&e.push("flex-row-reverse"),l&&e.push("gap-"+l),b&&e.push("align-self-"+b),h&&e.push("align-items-"+h),g&&e.push("justify-content-"+g),h||g||!d||e.push("align-items-center","justify-content-center"),v.length&&e.push.apply(e,Object(ut.a)(v)),e}),[a,s,l,d,b,h,g,v]);return Object($a.jsx)(tc,Object(bt.a)({display:n,classNames:x},p))},uc=["variant","size","active","disabled","classNames"],dc=function(e){var t=e.variant,n=void 0===t?"primary":t,r=e.size,a=void 0===r?"sm":r,i=e.active,s=void 0!==i&&i,o=e.disabled,l=void 0!==o&&o,u=e.classNames,d=void 0===u?[]:u,j=Object(Za.a)(e,uc),b=Object(c.useMemo)((function(){var e=["btn"];return n&&e.push("btn-"+n),a&&e.push("btn-"+a),s&&e.push("active"),l&&e.push("disabled"),d.length&&e.push.apply(e,Object(ut.a)(d)),e}),[n,a,s,l,d]);return Object($a.jsx)(lc,Object(bt.a)({center:!0,classNames:b},j))},jc=["classNames"],bc=function(e){var t=e.classNames,n=void 0===t?[]:t,r=Object(Za.a)(e,jc),a=Object(c.useMemo)((function(){var e=["btn-group"];return n.length&&e.push.apply(e,Object(ut.a)(n)),e}),[n]);return Object($a.jsx)(tc,Object(bt.a)({classNames:a},r))},Oc=Object(c.createContext)({closers:null,setClosers:null,closeAll:null}),hc=function(e){return Object($a.jsx)(Oc.Provider,Object(bt.a)({},e))},fc=["alignItems","gap","children"],gc=function(e){var t=e.alignItems,n=void 0===t?"center":t,r=e.gap,a=void 0===r?1:r,c=e.children,i=void 0===c?null:c,s=Object(Za.a)(e,fc);return Object($a.jsx)(lc,Object(bt.a)(Object(bt.a)({alignItems:n,gap:a},s),{},{children:i}))},mc=n(22),vc=["headerText","isExpanded","gap","classNames","children"],pc=function(e){var t=e.headerText,n=void 0===t?"":t,r=e.isExpanded,a=void 0!==r&&r,i=e.gap,s=void 0===i?0:i,l=e.classNames,u=void 0===l?[]:l,d=e.children,j=void 0===d?null:d,b=Object(Za.a)(e,vc),O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useContext)(Oc),v=m.setClosers,p=void 0===v?null:v,x=m.closeAll,_=void 0===x?null:x,E=Object(c.useCallback)((function(){return g(!1)}),[]),I=Object(c.useMemo)((function(){var e=["nitro-card-accordion-set"];return f&&e.push("active"),u&&u.length&&e.push.apply(e,Object(ut.a)(u)),e}),[f,u]);return Object(c.useEffect)((function(){g(a)}),[a]),Object(c.useEffect)((function(){var e=E;return p((function(t){var n=Object(ut.a)(t);return n.push(e),n})),function(){p((function(t){var n=Object(ut.a)(t),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}))}}),[E,p]),Object($a.jsxs)(Jc,Object(bt.a)(Object(bt.a)({classNames:I,gap:s},b),{},{children:[Object($a.jsxs)(lc,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:function(){_(),g((function(e){return!e}))},children:[Object($a.jsx)(Hi,{children:n}),Object($a.jsx)(mc.a,{icon:f?"caret-up":"caret-down"})]}),f&&Object($a.jsx)(Jc,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:j})]}))},xc=function(e){var t=Object.assign({},e),n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],i=r[1],l=Object(c.useCallback)((function(){var e,t=Object(s.a)(a);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}),[a]);return Object($a.jsx)(hc,{value:{closers:a,setClosers:i,closeAll:l},children:Object($a.jsx)(Jc,Object(bt.a)({gap:0},t))})},_c=["overflow","classNames"],Ec=function(e){var t=e.overflow,n=void 0===t?"auto":t,r=e.classNames,a=void 0===r?[]:r,i=Object(Za.a)(e,_c),s=Object(c.useMemo)((function(){var e=["container-fluid","content-area"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]);return Object($a.jsx)(Jc,Object(bt.a)({classNames:s,overflow:n},i))},Ic=Object(c.createContext)({theme:null}),yc=function(e){return Object($a.jsx)(Ic.Provider,{value:e.value,children:e.children})},Cc=["headerText","noCloseButton","onCloseClick","justifyContent","alignItems","classNames","children"],Tc=function(e){var t=e.headerText,n=void 0===t?null:t,r=(e.noCloseButton,e.onCloseClick),a=void 0===r?null:r,i=(e.justifyContent,e.alignItems,e.classNames),s=void 0===i?[]:i,o=(e.children,Object(Za.a)(e,Cc)),l=Object(c.useMemo)((function(){var e=["drag-handler","container-fluid","nitro-card-header"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]),u=Object(c.useCallback)((function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]);return Object($a.jsx)(Jc,Object(bt.a)(Object(bt.a)({center:!0,position:"relative",classNames:l},o),{},{children:Object($a.jsxs)(lc,{fullWidth:!0,center:!0,children:[Object($a.jsx)("span",{className:"nitro-card-header-text",children:n}),Object($a.jsx)(tc,{position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:u,onClick:a,children:Object($a.jsx)(mc.a,{icon:"times"})})]})}))},Sc=["justifyContent","classNames"],Nc=function(e){var t=e.justifyContent,n=void 0===t?"center":t,r=e.classNames,a=void 0===r?[]:r,i=Object(Za.a)(e,Sc),s=Object(c.useMemo)((function(){var e=["container-fluid","bg-muted","p-1"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]);return Object($a.jsx)(lc,Object(bt.a)({justifyContent:n,classNames:s},i))},Rc=n(38),kc=Object(d.a)((function e(){Object(u.a)(this,e)}));kc.CENTER="DWP_CENTER",kc.TOP_CENTER="DWP_TOP_CENTER",kc.TOP_LEFT="DWP_TOP_LEFT",kc.NOTHING="DWP_NOTHING";var Ac=[],wc=new Map,Dc=function(e){var t=e.uniqueKey,n=void 0===t?null:t,r=e.handleSelector,a=void 0===r?".drag-handler":r,i=e.windowPosition,u=void 0===i?kc.CENTER:i,d=e.disableDrag,j=void 0!==d&&d,b=e.dragStyle,O=void 0===b?{}:b,h=e.children,f=void 0===h?null:h,g=e.offsetLeft,m=void 0===g?0:g,v=e.offsetTop,p=void 0===v?0:v,x=Object(c.useState)(null),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useState)(null),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)({x:0,y:0}),R=Object(o.a)(N,2),k=R[0],A=R[1],w=Object(c.useState)(!1),D=Object(o.a)(w,2),U=D[0],P=D[1],L=Object(c.useState)(null),M=Object(o.a)(L,2),F=M[0],H=M[1],B=Object(c.useRef)(),G=Object(c.useCallback)((function(){var e,t=400,n=Object(s.a)(Ac);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+=1,r.style.zIndex=t.toString()}}catch(a){n.e(a)}finally{n.f()}}),[]),W=Object(c.useCallback)((function(){var e=Ac.indexOf(B.current);if(-1===e)Ac.push(B.current);else{if(e===Ac.length-1)return;e>=0&&(Ac.splice(e,1),Ac.push(B.current))}G()}),[G]),V=Object(c.useCallback)((function(e){W()}),[W]),q=Object(c.useCallback)((function(e){W()}),[W]),Y=Object(c.useCallback)((function(e,t){A({x:e,y:t}),P(!0)}),[]),z=Object(c.useCallback)((function(e){Y(e.clientX,e.clientY)}),[Y]),K=Object(c.useCallback)((function(e){var t=e.touches[0];Y(t.clientX,t.clientY)}),[Y]),Q=Object(c.useCallback)((function(e){I({x:e.clientX-k.x,y:e.clientY-k.y})}),[k]),X=Object(c.useCallback)((function(e){var t=e.touches[0];I({x:t.clientX-k.x,y:t.clientY-k.y})}),[k]),J=Object(c.useCallback)((function(){if(B.current&&F){var e=T.x+E.x,t=T.y+E.y,r=B.current.offsetLeft+e,a=B.current.offsetTop+t;a<0?t=-B.current.offsetTop:a+F.offsetHeight>=document.body.offsetHeight-0&&(t=document.body.offsetHeight-B.current.offsetHeight-B.current.offsetTop),r+B.current.offsetWidth<0?e=-B.current.offsetLeft:r>=document.body.offsetWidth-0&&(e=document.body.offsetWidth-B.current.offsetWidth-B.current.offsetLeft),I({x:0,y:0}),S({x:e,y:t}),P(!1),null!==n&&wc.set(n,{x:e,y:t})}}),[F,E,T,n]),Z=Object(c.useCallback)((function(e){J()}),[J]),$=Object(c.useCallback)((function(e){J()}),[J]);return Object(c.useEffect)((function(){var e=B.current;if(e){if(Ac.push(e),G(),!j){var t=e.querySelector(a);t&&H(t)}var r=0,c=0;switch(u){case kc.TOP_CENTER:e.style.top=50+p+"px",e.style.left="calc(50vw - ".concat(e.offsetWidth/2+m,"px)");break;case kc.CENTER:e.style.top="calc(50vh - ".concat(e.offsetHeight/2+p,"px)"),e.style.left="calc(50vw - ".concat(e.offsetWidth/2+m,"px)");break;case kc.TOP_LEFT:e.style.top=50+p+"px",e.style.left=50+m+"px"}if(null!==n){var i=wc.get(n);i&&(r=i.x,c=i.y)}return I({x:0,y:0}),S({x:r,y:c}),function(){var t=Ac.indexOf(e);t>=0&&Ac.splice(t,1)}}}),[a,u,n,j,m,p,G]),Object(c.useEffect)((function(){if(T||E){var e=B.current;e&&(e.style.transform="translate(".concat(T.x+E.x,"px, ").concat(T.y+E.y,"px)"),e.style.visibility="visible")}}),[T,E]),Object(c.useEffect)((function(){if(F)return F.addEventListener(l.xe.MOUSE_DOWN,z),F.addEventListener(l.Nh.TOUCH_START,K),function(){F.removeEventListener(l.xe.MOUSE_DOWN,z),F.removeEventListener(l.Nh.TOUCH_START,K)}}),[F,z,K]),Object(c.useEffect)((function(){if(U)return document.addEventListener(l.xe.MOUSE_UP,Z),document.addEventListener(l.Nh.TOUCH_END,$),document.addEventListener(l.xe.MOUSE_MOVE,Q),document.addEventListener(l.Nh.TOUCH_MOVE,X),function(){document.removeEventListener(l.xe.MOUSE_UP,Z),document.removeEventListener(l.Nh.TOUCH_END,$),document.removeEventListener(l.xe.MOUSE_MOVE,Q),document.removeEventListener(l.Nh.TOUCH_MOVE,X)}}),[U,Z,Q,$,X]),Object(Rc.createPortal)(Object($a.jsx)(tc,{position:"absolute",innerRef:B,className:"draggable-window animate__animated animate__fadeIn",onMouseDownCapture:V,onTouchStartCapture:q,style:O,children:f}),document.getElementById("draggable-windows-container"))},Uc=["theme","uniqueKey","handleSelector","windowPosition","disableDrag","overflow","position","gap","classNames"],Pc=function(e){var t=e.theme,n=void 0===t?"primary":t,r=e.uniqueKey,a=void 0===r?null:r,i=e.handleSelector,s=void 0===i?".drag-handler":i,o=e.windowPosition,l=void 0===o?kc.CENTER:o,u=e.disableDrag,d=void 0!==u&&u,j=e.overflow,b=void 0===j?"hidden":j,O=e.position,h=void 0===O?"relative":O,f=e.gap,g=void 0===f?0:f,m=e.classNames,v=void 0===m?[]:m,p=Object(Za.a)(e,Uc),x=Object(c.useMemo)((function(){var e=["nitro-card","rounded","shadow"];return e.push("theme-".concat(n||"primary")),v.length&&e.push.apply(e,Object(ut.a)(v)),e}),[n,v]);return Object($a.jsx)(yc,{value:{theme:n},children:Object($a.jsx)(Dc,{uniqueKey:a,handleSelector:s,windowPosition:l,disableDrag:d,children:Object($a.jsx)(Jc,Object(bt.a)({overflow:b,position:h,gap:g,classNames:x},p))})})},Lc=["figure","gender","headOnly","direction","scale","classNames","style"],Mc=function(e){var t=e.figure,n=void 0===t?"":t,r=e.gender,a=void 0===r?"M":r,i=e.headOnly,s=void 0!==i&&i,u=e.direction,d=void 0===u?0:u,j=e.scale,b=void 0===j?1:j,O=e.classNames,h=void 0===O?[]:O,f=e.style,g=void 0===f?{}:f,m=Object(Za.a)(e,Lc),v=Object(c.useState)(null),p=Object(o.a)(v,2),x=p[0],_=p[1],E=Object(c.useState)(-1),I=Object(o.a)(E,2),y=I[0],C=I[1],T=Object(c.useRef)(!1),S=Object(c.useMemo)((function(){var e=["avatar-image"];return h.length&&e.push.apply(e,Object(ut.a)(h)),e}),[h]),N=Object(c.useMemo)((function(){var e={};return x&&x.length&&(e.backgroundImage="url('".concat(x,"')")),1!==b&&(e.transform="scale(".concat(b,")"),b%1||(e.imageRendering="pixelated")),Object.keys(g).length&&(e=Object(bt.a)(Object(bt.a)({},e),g)),e}),[x,b,g]);return Object(c.useEffect)((function(){var e=k().createAvatarImage(n,l.q.LARGE,a,{resetFigure:function(e){T.current||C(Math.random())},dispose:function(){},disposed:!1},null);if(e){var t=l.r.FULL;s&&(t=l.r.HEAD),e.setDirection(t,d);var r=e.getCroppedImage(t);r&&_(r.src),e.dispose()}}),[n,a,d,s,y]),Object(c.useEffect)((function(){return T.current=!1,function(){T.current=!0}}),[]),Object($a.jsx)(tc,Object(bt.a)({classNames:S,style:N},m))},Fc=["imageUrl","fit","style"],Hc=function(e){var t=e.imageUrl,n=void 0===t?null:t,r=e.fit,a=void 0===r||r,i=e.style,s=void 0===i?null:i,o=Object(Za.a)(e,Fc),l=Object(c.useMemo)((function(){var e=Object(bt.a)({},s);return n&&(e.background="url(".concat(n,") center no-repeat")),e}),[s,n]);return Object($a.jsx)(tc,Object(bt.a)({fit:a,style:l},o))},Bc=["badgeCode","isGroup","showInfo","customTitle","isGrayscale","scale","classNames","style","children"],Gc=function(e){var t=e.badgeCode,n=void 0===t?null:t,r=e.isGroup,a=void 0!==r&&r,i=e.showInfo,s=void 0!==i&&i,u=e.customTitle,d=void 0===u?null:u,j=e.isGrayscale,b=void 0!==j&&j,O=e.scale,h=void 0===O?1:O,f=e.classNames,g=void 0===f?[]:f,m=e.style,v=void 0===m?{}:m,p=e.children,x=void 0===p?null:p,_=Object(Za.a)(e,Bc),E=Object(c.useState)(null),I=Object(o.a)(E,2),y=I[0],C=I[1],T=Object(c.useMemo)((function(){var e=["badge-image"];return a&&e.push("group-badge"),b&&e.push("grayscale"),g.length&&e.push.apply(e,Object(ut.a)(g)),e}),[g,a,b]),S=Object(c.useMemo)((function(){var e={};return y&&(e.backgroundImage="url('".concat(a||b?y.src:location.protocol+"//lavvos.eu/swfs/c_images/album1584/"+n,".gif')"),e.width=y.width,e.height=y.height,1!==h&&(e.transform="scale(".concat(h,")"),h%1||(e.imageRendering="pixelated"),e.width=y.width*h,e.height=y.height*h)),Object.keys(v).length&&(e=Object(bt.a)(Object(bt.a)({},e),v)),e}),[y,h,v]);return Object(c.useEffect)((function(){if(n&&n.length){var e=!1,t=function t(r){if(r.badgeId===n){var a=l.Mh.generateImage(new l.Ve(r.image));a.onload=function(){return C(a)},e=!0,ae().events.removeEventListener(l.s.IMAGE_READY,t)}};ae().events.addEventListener(l.s.IMAGE_READY,t);var r=a?ae().getGroupBadgeImage(n):ae().getBadgeImage(n);if(r&&!e){var c=l.Mh.generateImage(new l.Ve(r));c.onload=function(){return C(c)}}return function(){return ae().events.removeEventListener(l.s.IMAGE_READY,t)}}}),[n,a]),Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({classNames:T,style:S},_),{},{children:[s&&L("badge.descriptions.enabled",!0)&&Object($a.jsxs)(tc,{className:"badge-information text-black py-1 px-2 small",children:[Object($a.jsx)("div",{className:"fw-bold mb-1",children:a?d:it(n)}),Object($a.jsx)("div",{children:a?st("group.badgepopup.body"):ct(n)})]}),x]}))},Wc=["type","classNames","style"],Vc=function(e){var t=e.type,n=void 0===t?"":t,r=e.classNames,a=void 0===r?[]:r,i=e.style,s=void 0===i?{}:i,o=Object(Za.a)(e,Wc),l=Object(c.useMemo)((function(){var e=["nitro-currency-icon"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]),u=Object(c.useMemo)((function(){var e=L("currency.asset.icon.url","");return e=e.replace("%type%",n.toString()),"url(".concat(e,")")}),[n]),d=Object(c.useMemo)((function(){var e={};return e.backgroundImage=u,Object.keys(s).length&&(e=Object(bt.a)(Object(bt.a)({},e),s)),e}),[s,u]);return Object($a.jsx)(tc,Object(bt.a)({classNames:l,style:d},o))},qc=["productType","productClassId","extraData"],Yc=function(e){var t=e.productType,n=void 0===t?"s":t,r=e.productClassId,a=void 0===r?-1:r,c=e.extraData,i=void 0===c?"":c,s=Object(Za.a)(e,qc);return Object($a.jsx)(oi,Object(bt.a)({imageUrl:function(){var e=null;switch(n.toLocaleLowerCase()){case aa.FLOOR:e=G().getFurnitureFloorIconUrl(a);break;case aa.WALL:e=G().getFurnitureWallIconUrl(a,i)}return e}(),className:"furni-image"},s))},zc=["productType","productClassId","direction","extraData","scale","style"],Kc=function(e){var t=e.productType,n=void 0===t?"s":t,r=e.productClassId,a=void 0===r?-1:r,i=e.direction,s=void 0===i?2:i,u=e.extraData,d=void 0===u?"":u,j=e.scale,b=void 0===j?1:j,O=e.style,h=void 0===O?{}:O,f=Object(Za.a)(e,zc),g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useMemo)((function(){var e,t={};return null!==v&&void 0!==v&&null!==(e=v.src)&&void 0!==e&&e.length&&(t.backgroundImage="url('".concat(v.src,"')"),t.width=v.width,t.height=v.height),1!==b&&(t.transform="scale(".concat(b,")"),b%1||(t.imageRendering="pixelated")),Object.keys(h).length&&(t=Object(bt.a)(Object(bt.a)({},t),h)),t}),[v,b,h]),_=Object(c.useCallback)((function(){var e=null,t={imageReady:function(e,t,n){!n&&t&&(n=l.Mh.generateImage(t)),n.onload=function(){return p(n)}},imageFailed:null};switch(n.toLocaleLowerCase()){case aa.FLOOR:e=G().getFurnitureFloorImage(a,new l.Oi(s),64,t,0,d);break;case aa.WALL:e=G().getFurnitureWallImage(a,new l.Oi(s),64,t,0,d)}if(e){var r=e.getImage();r.onload=function(){return p(r)}}}),[n,a,s,d]);return Object(c.useEffect)((function(){_()}),[_]),v?Object($a.jsx)(tc,Object(bt.a)({classNames:["furni-image"],style:x},f)):null},Qc=function(e){var t=e.figure,n=void 0===t?null:t,r=e.userName,a=void 0===r?null:r,c=e.message,i=void 0===c?null:c,s=e.editable,o=void 0!==s&&s,l=e.onChange,u=void 0===l?null:l;return Object($a.jsxs)(lc,{overflow:"hidden",className:"nitro-gift-card text-black",children:[Object($a.jsxs)("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!a&&Object($a.jsx)("div",{className:"gift-incognito"}),n&&Object($a.jsx)("div",{className:"gift-avatar",children:Object($a.jsx)(Mc,{figure:n,direction:2,headOnly:!0})})]}),Object($a.jsx)(lc,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:Object($a.jsxs)(Jc,{grow:!0,overflow:"auto",justifyContent:"between",children:[!o&&Object($a.jsx)(Hi,{textBreak:!0,className:"gift-message",children:i}),o&&null!==u&&Object($a.jsx)("textarea",{className:"gift-message h-100",maxLength:140,value:i,onChange:function(e){return u(e.target.value)},placeholder:st("catalog.gift_wrapping_new.message_hint")}),a&&Object($a.jsx)(Hi,{italics:!0,textEnd:!0,className:"pe-1",children:st("catalog.gift_wrapping_new.message_from",["name"],[a])})]})})]})},Xc=["size","offset","column","gap","classNames"],Jc=function(e){var t=e.size,n=void 0===t?0:t,r=e.offset,a=void 0===r?0:r,i=e.column,s=void 0===i||i,o=e.gap,l=void 0===o?2:o,u=e.classNames,d=void 0===u?[]:u,j=Object(Za.a)(e,Xc),b=Object(c.useContext)(nc).isCssGrid,O=void 0!==b&&b,h=Object(c.useMemo)((function(){var e=[];if(n){var t="col-".concat(n);O&&(t="g-".concat(t)),e.push(t)}if(a){var r="offset-".concat(a);O&&(r="g-start-".concat(a)),e.push(r)}return d.length&&e.push.apply(e,Object(ut.a)(d)),e}),[n,a,O,d]);return Object($a.jsx)(lc,Object(bt.a)({classNames:h,column:s,gap:l},j))},Zc=["count","position","classNames","children"],$c=function(e){var t=e.count,n=void 0===t?0:t,r=(e.position,e.classNames),a=void 0===r?[]:r,i=e.children,s=void 0===i?null:i,o=Object(Za.a)(e,Zc),l=Object(c.useMemo)((function(){var e=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({position:"absolute",classNames:l},o),{},{children:[n,s]}))},ei=function(e){var t=e.value,n=(void 0===t?0:t).toString().split("");return Object($a.jsx)($a.Fragment,{children:n.map((function(e,t){return Object($a.jsx)("i",{className:"limited-edition-number n-"+e},t)}))})},ti=["uniqueNumber","uniqueSeries","classNames","children"],ni=function(e){var t=e.uniqueNumber,n=void 0===t?0:t,r=e.uniqueSeries,a=void 0===r?0:r,i=e.classNames,s=void 0===i?[]:i,o=e.children,l=void 0===o?null:o,u=Object(Za.a)(e,ti),d=Object(c.useMemo)((function(){var e=["unique-compact-plate","z-index-1"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({classNames:d},u),{},{children:[Object($a.jsx)("div",{children:Object($a.jsx)(ei,{value:n})}),Object($a.jsx)("div",{children:Object($a.jsx)(ei,{value:a})}),l]}))},ri=["uniqueLimitedItemsLeft","uniqueLimitedSeriesSize","classNames"],ai=function(e){var t=e.uniqueLimitedItemsLeft,n=void 0===t?0:t,r=e.uniqueLimitedSeriesSize,a=void 0===r?0:r,i=e.classNames,s=void 0===i?[]:i,o=Object(Za.a)(e,ri),l=Object(c.useMemo)((function(){var e=["unique-complete-plate"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]);return Object($a.jsx)(tc,Object(bt.a)(Object(bt.a)({classNames:l},o),{},{children:Object($a.jsxs)(Jc,{className:"plate-container",gap:0,children:[Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[st("unique.items.left"),Object($a.jsx)("div",{children:Object($a.jsx)(ei,{value:n})})]}),Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[st("unique.items.number.sold"),Object($a.jsx)("div",{children:Object($a.jsx)(ei,{value:a})})]})]})}))},ci=["itemImage","itemColor","itemActive","itemCount","itemCountMinimum","itemUniqueSoldout","itemUniqueNumber","itemUnseen","itemHighlight","disabled","center","column","style","classNames","position","overflow","children"],ii=function(e){var t=e.itemImage,n=void 0===t?void 0:t,r=e.itemColor,a=void 0===r?void 0:r,i=e.itemActive,s=void 0!==i&&i,o=e.itemCount,l=void 0===o?1:o,u=e.itemCountMinimum,d=void 0===u?1:u,j=e.itemUniqueSoldout,b=void 0!==j&&j,O=e.itemUniqueNumber,h=void 0===O?-2:O,f=e.itemUnseen,g=void 0!==f&&f,m=e.itemHighlight,v=void 0!==m&&m,p=e.disabled,x=void 0!==p&&p,_=e.center,E=void 0===_||_,I=e.column,y=void 0===I||I,C=e.style,T=void 0===C?{}:C,S=e.classNames,N=void 0===S?[]:S,R=e.position,k=void 0===R?"relative":R,A=e.overflow,w=void 0===A?"hidden":A,D=e.children,U=void 0===D?null:D,P=Object(Za.a)(e,ci),L=Object(c.useMemo)((function(){var e=["layout-grid-item","border","border-2","border-muted","rounded"];return s&&e.push("active"),(b||h>0)&&e.push("unique-item"),b&&e.push("sold-out"),g&&e.push("unseen"),v&&e.push("has-highlight"),x&&e.push("disabled"),null===n&&e.push("icon","loading-icon"),N.length&&e.push.apply(e,Object(ut.a)(N)),e}),[s,b,h,g,v,x,n,N]),M=Object(c.useMemo)((function(){var e=Object(bt.a)({},T);return n&&(e.backgroundImage="url(".concat(n,")")),a&&(e.backgroundColor=a),Object.keys(T).length&&(e=Object(bt.a)(Object(bt.a)({},e),T)),e}),[T,n,a]);return Object($a.jsxs)(Jc,Object(bt.a)(Object(bt.a)({center:E,pointer:!0,position:k,overflow:w,column:y,classNames:L,style:M},P),{},{children:[l>d&&Object($a.jsx)($c,{count:l}),h>0&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(tc,{fit:!0,className:"unique-bg-override",style:{backgroundImage:"url(".concat(n,")")}}),Object($a.jsx)("div",{className:"position-absolute bottom-0 unique-item-counter",children:Object($a.jsx)(ei,{value:h})})]}),U]}))},si=["imageUrl"],oi=function(e){var t=e.imageUrl,n=void 0===t?null:t,r=Object(Za.a)(e,si);return Object($a.jsx)("img",Object(bt.a)({src:n,alt:""},r))},li=function(e){var t=Object.assign({},e);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({classNames:["spinner-container"]},t),{},{children:[Object($a.jsx)(tc,{className:"spinner"}),Object($a.jsx)(tc,{className:"spinner"}),Object($a.jsx)(tc,{className:"spinner"})]}))},ui=function(e){var t=e.roomId,n=void 0===t?-1:t,r=e.textureReceiver,a=void 0===r?null:r,i=e.onClose,s=void 0===i?null:i,o=Object(c.useRef)(),u=Object(c.useCallback)((function(){if(!o||!o.current)return null;var e=o.current.getBoundingClientRect();return new l.Te(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),d=Object(c.useCallback)((function(){wn(dr.CAMERA_SHUTTER),a(G().createTextureFromRoom(n,1,u()))}),[n,u,a]);return Object($a.jsx)(Dc,{handleSelector:".nitro-room-thumbnail-camera",children:Object($a.jsxs)("div",{className:"nitro-room-thumbnail-camera px-2",children:[Object($a.jsx)("div",{ref:o,className:"camera-frame"}),Object($a.jsxs)("div",{className:"d-flex align-items-end h-100 pb-2",children:[Object($a.jsx)("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:s,children:st("cancel")}),Object($a.jsx)("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:d,children:st("navigator.thumbeditor.save")})]})]})})},di=["title","close","classNames","children","type"],ji=function(e){var t=e.title,n=void 0===t?"":t,r=e.close,a=void 0===r?null:r,i=e.classNames,s=void 0===i?[]:i,o=e.children,l=void 0===o?null:o,u=e.type,d=void 0===u?Ua.DEFAULT:u,j=Object(Za.a)(e,di),b=Object(c.useMemo)((function(){var e=["nitro-alert"];return e.push("nitro-alert-"+d),s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s,d]);return Object($a.jsxs)(Pc,Object(bt.a)(Object(bt.a)({classNames:b,theme:"primary-slim"},j),{},{children:[Object($a.jsx)(Tc,{headerText:n,onCloseClick:a}),Object($a.jsx)(Ec,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:l})]}))},bi=n(40),Oi=Object(d.a)((function e(){Object(u.a)(this,e)}));function hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;switch(e){case Oi.BOUNCE:switch(t){default:return{};case bi.b:return{animationName:"bounceIn",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"bounceOut",animationDuration:"".concat(n,"ms")}}case Oi.SLIDE_LEFT:switch(t){default:return{};case bi.b:return{animationName:"slideInLeft",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"slideOutLeft",animationDuration:"".concat(n,"ms")}}case Oi.SLIDE_RIGHT:switch(t){default:return{};case bi.b:return{animationName:"slideInRight",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"slideOutRight",animationDuration:"".concat(n,"ms")}}case Oi.FLIP_X:switch(t){default:return{};case bi.b:return{animationName:"flipInX",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"flipOutX",animationDuration:"".concat(n,"ms")}}case Oi.FADE_UP:switch(t){default:return{};case bi.b:return{animationName:"fadeInUp",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"fadeOutDown",animationDuration:"".concat(n,"ms")}}case Oi.FADE_IN:switch(t){default:return{};case bi.b:return{animationName:"fadeIn",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"fadeOut",animationDuration:"".concat(n,"ms")}}case Oi.FADE_DOWN:switch(t){default:return{};case bi.b:return{animationName:"fadeInDown",animationDuration:"".concat(n,"ms")};case bi.c:return{animationName:"fadeOutUp",animationDuration:"".concat(n,"ms")}}case Oi.HEAD_SHAKE:return t===bi.b?{animationName:"headShake",animationDuration:"".concat(n,"ms")}:{}}return null}Oi.BOUNCE="bounce",Oi.SLIDE_LEFT="slideLeft",Oi.SLIDE_RIGHT="slideRight",Oi.FLIP_X="flipX",Oi.FADE_IN="fadeIn",Oi.FADE_DOWN="fadeDown",Oi.FADE_UP="fadeUp",Oi.HEAD_SHAKE="headShake";var fi=function(e){var t=e.type,n=void 0===t?null:t,r=e.inProp,a=void 0!==r&&r,i=e.timeout,s=void 0===i?300:i,l=e.className,u=void 0===l?null:l,d=e.children,j=void 0===d?null:d,b=Object(c.useState)(!1),O=Object(o.a)(b,2),h=O[0],f=O[1];return Object(c.useEffect)((function(){var e=null;return a?f(!0):e=setTimeout((function(){f(!1),clearTimeout(s)}),s),function(){e&&clearTimeout(e)}}),[a,s]),Object($a.jsx)(bi.d,{in:a,timeout:s,children:function(e){return Object($a.jsx)("div",{className:(null!==u&&void 0!==u?u:"")+" animate__animated",style:Object(bt.a)({},hi(n,e,s)),children:h&&j})}})},gi=["fadesOut","timeoutMs","close","overflow","classNames"],mi=function(e){var t=e.fadesOut,n=void 0===t||t,r=e.timeoutMs,a=void 0===r?8e3:r,i=e.close,s=void 0===i?null:i,l=e.overflow,u=void 0===l?"hidden":l,d=e.classNames,j=void 0===d?[]:d,b=Object(Za.a)(e,gi),O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useMemo)((function(){var e=["nitro-notification-bubble","rounded","animate__animated animate__backInRight"];return j.length&&e.push.apply(e,Object(ut.a)(j)),e}),[j]);return Object(c.useEffect)((function(){return g(!0),function(){return g(!1)}}),[]),Object(c.useEffect)((function(){if(n){var e=setTimeout((function(){g(!1),setTimeout((function(){return s()}),300)}),a);return function(){return clearTimeout(e)}}}),[n,a,s]),Object($a.jsx)(fi,{type:Oi.FADE_IN,inProp:f,timeout:300,children:Object($a.jsx)(lc,Object(bt.a)({overflow:u,classNames:m,onClick:s},b))})},vi=["figure","typeId","paletteId","petColor","customParts","posture","headOnly","direction","scale","style"],pi=function(e){var t=e.figure,n=void 0===t?"":t,r=e.typeId,a=void 0===r?-1:r,i=e.paletteId,s=void 0===i?-1:i,u=e.petColor,d=void 0===u?16777215:u,j=e.customParts,b=void 0===j?[]:j,O=e.posture,h=void 0===O?"std":O,f=e.headOnly,g=void 0!==f&&f,m=e.direction,v=void 0===m?0:m,p=e.scale,x=void 0===p?1:p,_=e.style,E=void 0===_?{}:_,I=Object(Za.a)(e,vi),y=Object(c.useState)(null),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useRef)(!1),R=Object(c.useMemo)((function(){var e={};return T&&T.length&&(e.backgroundImage="url(".concat(T,")")),1!==x&&(e.transform="scale(".concat(x,")"),x%1||(e.imageRendering="pixelated")),Object.keys(E).length&&(e=Object(bt.a)(Object(bt.a)({},e),E)),e}),[T,x,E]);Object(c.useEffect)((function(){var e=a,t=s,r=d,c=b,i=g;if(n&&n.length){var o=new l.jf(n);e=o.typeId,t=o.paletteId,r=o.color,c=o.customParts}16===e&&(i=!1);var u=G().getRoomObjectPetImage(e,t,r,new l.Oi(45*v),64,{imageReady:function(e,t,n){N.current||(n?S(n.src):t&&S(l.Mh.generateImageUrl(t)))},imageFailed:function(e){}},i,0,c,h);if(u){var j=u.getImage();j&&S(j.src)}}),[n,a,s,d,b,h,g,v]),Object(c.useEffect)((function(){return N.current=!1,function(){N.current=!0}}),[]);"url('".concat(T,"')");return Object($a.jsx)(tc,Object(bt.a)({classNames:["pet-image"],style:R},I))},xi=["text","progress","maxProgress","position","justifyContent","classNames","children"],_i=function(e){var t=e.text,n=void 0===t?"":t,r=e.progress,a=void 0===r?0:r,i=e.maxProgress,s=void 0===i?100:i,o=e.position,l=void 0===o?"relative":o,u=e.justifyContent,d=void 0===u?"center":u,j=e.classNames,b=void 0===j?[]:j,O=e.children,h=void 0===O?null:O,f=Object(Za.a)(e,xi),g=Object(c.useMemo)((function(){var e=["nitro-progress-bar","text-white"];return b.length&&e.push.apply(e,Object(ut.a)(b)),e}),[b]);return Object($a.jsxs)(Jc,Object(bt.a)(Object(bt.a)({position:l,justifyContent:d,classNames:g},f),{},{children:[n&&n.length>0&&Object($a.jsx)(lc,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:n}),Object($a.jsx)(tc,{className:"nitro-progress-bar-inner",style:{width:~~(100*(a-0)/(s-0)+0)+"%"}}),h]}))},Ei=["level","classNames","children"],Ii=function(e){var t=e.level,n=void 0===t?0:t,r=e.classNames,a=void 0===r?[]:r,i=e.children,s=void 0===i?null:i,o=Object(Za.a)(e,Ei),l=Object(c.useMemo)((function(){var e=["nitro-rarity-level"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({classNames:l},o),{},{children:[Object($a.jsx)("div",{children:n}),s]}))},yi=function(e){var t=e.roomPreviewer,n=void 0===t?null:t,r=e.height,a=void 0===r?0:r,i=e.children,s=void 0===i?null:i,u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useRef)(),h=Object(c.useCallback)((function(e){n&&j&&O.current&&(n.updatePreviewRoomView(),j.canvasUpdated&&(O.current.style.backgroundImage="url(".concat(l.Mh.generateImageUrl(j.master),")")))}),[n,j,O]),f=Object(c.useCallback)((function(){if(O.current&&n){var e=document.defaultView.getComputedStyle(O.current,null).backgroundColor;e=(e=l.ib.rgbStringToHex(e)).replace("#","0x"),n.backgroundColor=parseInt(e,16);var t=O.current.parentElement.clientWidth;n.getRoomCanvas(t,a);var r=n.getRenderingCanvas();b(r),r.canvasUpdated=!0,h(-1)}}),[O,a,n,h]);return Object(c.useEffect)((function(){if(n){j||f(),N().ticker.add(h);var e=new ResizeObserver((function(){if(n&&O.current){var e=O.current.parentElement.offsetWidth;n.modifyRoomCanvas(e,a),h(-1)}}));return e.observe(O.current),function(){e.disconnect(),N().ticker.remove(h)}}}),[j,n,O,a,f,h]),Object($a.jsxs)("div",{className:"room-preview-container",children:[Object($a.jsx)("div",{ref:O,className:"room-preview-image",style:{height:a},onClick:function(e){n&&(e.shiftKey?n.changeRoomObjectDirection():n.changeRoomObjectState())}}),s]})},Ci=["roomId","customUrl","shrink","overflow","classNames","children"],Ti=function(e){var t=e.roomId,n=void 0===t?-1:t,r=e.customUrl,a=void 0===r?null:r,i=e.shrink,s=void 0===i||i,o=e.overflow,l=void 0===o?"hidden":o,u=e.classNames,d=void 0===u?[]:u,j=e.children,b=void 0===j?null:j,O=Object(Za.a)(e,Ci),h=Object(c.useMemo)((function(){var e=["room-thumbnail","rounded","border"];return d.length&&e.push.apply(e,Object(ut.a)(d)),e}),[d]),f=Object(c.useMemo)((function(){return a&&a.length?L("image.library.url")+a:L("thumbnails.url").replace("%thumbnail%",n.toString())}),[a,n]);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({shrink:s,overflow:l,classNames:h},O),{},{children:[f&&Object($a.jsx)("img",{alt:"",src:f}),b]}))},Si=function(e){var t=e.color,n=void 0===t?"":t,r=e.message,a=void 0===r?"":r,c=e.date,i=void 0===c?"":c,s=e.senderName,o=void 0===s?"":s,l=e.customTitle,u=void 0===l?null:l,d=e.onCloseClick,j=void 0===d?null:d;return Object($a.jsx)(Dc,{handleSelector:".drag-handler",children:Object($a.jsxs)(Jc,{gap:0,alignItems:"center",className:"nitro-layout-trophy trophy-".concat(n),children:[Object($a.jsxs)(lc,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[Object($a.jsx)(tc,{position:"absolute",pointer:!0,className:"trophy-close",onClick:j}),Object($a.jsx)(Hi,{bold:!0,children:st("widget.furni.trophy.title")})]}),Object($a.jsxs)(Jc,{className:"trophy-content py-1",gap:1,children:[u&&Object($a.jsx)(Hi,{bold:!0,children:u}),a]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[Object($a.jsx)(Hi,{bold:!0,children:i}),Object($a.jsx)(Hi,{bold:!0,children:o})]})]})})},Ni=["userId","userName","classNames","pointer","children"],Ri=function(e){var t=e.userId,n=void 0===t?0:t,r=(e.userName,e.classNames),a=void 0===r?[]:r,i=e.pointer,s=void 0===i||i,o=e.children,l=void 0===o?null:o,u=Object(Za.a)(e,Ni),d=Object(c.useMemo)((function(){var e=["nitro-friends-spritesheet","icon-profile-sm"];return a.length&&e.push.apply(e,Object(ut.a)(a)),e}),[a]);return Object($a.jsx)(tc,Object(bt.a)(Object(bt.a)({classNames:d,pointer:s,onClick:function(e){return Ga(n)}},u),{},{children:l}))},ki=["isActive","count","overflow","position","pointer","classNames","children"],Ai=function(e){var t=e.isActive,n=void 0!==t&&t,r=e.count,a=void 0===r?0:r,i=e.overflow,s=void 0===i?"hidden":i,o=e.position,l=void 0===o?"relative":o,u=e.pointer,d=void 0===u||u,j=e.classNames,b=void 0===j?[]:j,O=e.children,h=void 0===O?null:O,f=Object(Za.a)(e,ki),g=Object(c.useMemo)((function(){var e=["nav-item","rounded-top","border"];return n&&e.push("active"),b.length&&e.push.apply(e,Object(ut.a)(b)),e}),[n,b]);return Object($a.jsxs)(lc,Object(bt.a)(Object(bt.a)({overflow:s,pointer:d,position:l,classNames:g},f),{},{children:[Object($a.jsx)(lc,{shrink:!0,center:!0,children:h}),a>0&&Object($a.jsx)($c,{count:a})]}))},wi=["justifyContent","gap","classNames","children"],Di=function(e){var t=e.justifyContent,n=void 0===t?"center":t,r=e.gap,a=void 0===r?1:r,i=e.classNames,s=void 0===i?[]:i,o=e.children,l=void 0===o?null:o,u=Object(Za.a)(e,wi),d=Object(c.useMemo)((function(){var e=["container-fluid","nitro-card-tabs","pt-1"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]);return Object($a.jsx)(lc,Object(bt.a)(Object(bt.a)({justifyContent:n,gap:a,classNames:d},u),{},{children:l}))},Ui=["classNames"],Pi=function(e){var t=e.classNames,n=void 0===t?[]:t,r=Object(Za.a)(e,Ui),a=Object(c.useMemo)((function(){var e=["form-group"];return n.length&&e.push.apply(e,Object(ut.a)(n)),e}),[n]);return Object($a.jsx)(lc,Object(bt.a)({classNames:a},r))},Li=["variant","height","classNames","style"],Mi=function(e){var t=e.variant,n=void 0===t?"black":t,r=e.height,a=void 0===r?1:r,i=e.classNames,s=void 0===i?[]:i,o=e.style,l=void 0===o?{}:o,u=Object(Za.a)(e,Li),d=Object(c.useMemo)((function(){var e=[];return n&&e.push("bg-"+n),s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[n,s]),j=Object(c.useMemo)((function(){var e={display:"list-item"};return a>0&&(e.height=a),Object.keys(l).length&&(e=Object(bt.a)(Object(bt.a)({},e),l)),e}),[a,l]);return Object($a.jsx)(tc,Object(bt.a)({classNames:d,style:j},u))},Fi=["variant","fontWeight","fontSize","align","bold","underline","italics","truncate","center","textEnd","small","wrap","noWrap","textBreak"],Hi=function(e){var t=e.variant,n=void 0===t?"black":t,r=e.fontWeight,a=void 0===r?null:r,i=e.fontSize,s=void 0===i?0:i,o=e.align,l=void 0===o?null:o,u=e.bold,d=void 0!==u&&u,j=e.underline,b=void 0!==j&&j,O=e.italics,h=void 0!==O&&O,f=e.truncate,g=void 0!==f&&f,m=e.center,v=void 0!==m&&m,p=e.textEnd,x=void 0!==p&&p,_=e.small,E=void 0!==_&&_,I=e.wrap,y=void 0!==I&&I,C=e.noWrap,T=void 0!==C&&C,S=e.textBreak,N=void 0!==S&&S,R=Object(Za.a)(e,Fi),k=Object(c.useMemo)((function(){var e=["d-inline"];return n&&e.push("text-"+n),d&&e.push("fw-bold"),a&&e.push("fw-"+a),s&&e.push("fs-"+s),l&&e.push("text-"+l),b&&e.push("text-decoration-underline"),h&&e.push("fst-italic"),g&&e.push("text-truncate"),v&&e.push("text-center"),x&&e.push("text-end"),E&&e.push("small"),y&&e.push("text-wrap"),T&&e.push("text-nowrap"),N&&e.push("text-break"),e}),[n,a,s,l,d,b,h,g,v,x,E,y,T,N]);return Object($a.jsx)(tc,Object(bt.a)({classNames:k},R))},Bi=n(19),Gi=n(15),Wi=n.n(Gi),Vi=n(132),qi=n(129),Yi=n(133),zi=function(e){var t=e.isError,n=void 0!==t&&t,r=e.message,a=void 0===r?"":r,i=e.percent,s=void 0===i?0:i,o=Object(c.useCallback)(function(){var e=Object(Bi.a)(Wi.a.mark((function e(t){return Wi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Object(qi.a)(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(c.useCallback)(function(){var e=Object(Bi.a)(Wi.a.mark((function e(t){return Wi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){n&&Ha.simpleAlert(a,null,null,null,"Connection Error")}),[n,a]),Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(Jc,{fullHeight:!0,position:"relative",className:"nitro-loading",children:[Object($a.jsx)(Vi.a,{options:{fpsLimit:60,particles:{color:{value:"#008cff",animation:{enable:!0,speed:10}},move:{attract:{enable:!0,rotate:{x:2e3,y:2e3}},direction:"none",enable:!0,outModes:{default:"destroy"},path:{clamp:!1,enable:!0,delay:{value:0},generator:Yi.a,options:{sides:6,turnSteps:30,angle:30}},random:!1,speed:3,straight:!1,trail:{fillColor:"#000",length:20,enable:!0}},number:{density:{enable:!0,area:800},value:0},opacity:{value:1},shape:{type:"circle"},size:{value:2}},fullScreen:{zIndex:-1},detectRetina:!0,emitters:{direction:"none",rate:{quantity:1,delay:.25},size:{width:0,height:0},position:{x:50,y:50}}},init:o}),Object($a.jsx)(tc,{fullHeight:!0,className:"container h-100",children:Object($a.jsxs)(Jc,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[Object($a.jsx)(tc,{className:"connecting-duck animate__animated animate__pulse animate__faster animate__infinite"}),Object($a.jsx)(Jc,{size:6,className:"text-center py-4",children:n&&a&&a.length?Object($a.jsx)(tc,{className:"fs-4 text-shadow",children:a}):Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Hi,{fontSize:4,variant:"white",className:"text-shadow",children:[s.toFixed(),"%"]}),Object($a.jsx)(_i,{progress:s,className:"mt-2 large"})]})})]})})]})})},Ki=["achievement","scale"],Qi=function(e){var t=e.achievement,n=void 0===t?null:t,r=e.scale,a=void 0===r?1:r,c=Object(Za.a)(e,Ki);return n?Object($a.jsx)(Gc,Object(bt.a)({badgeCode:O(n),isGrayscale:!m(n),scale:a},c)):null},Xi=["achievement","selectedAchievementId","setSelectedAchievementId","children"],Ji=function(e){var t=e.achievement,n=void 0===t?null:t,r=e.selectedAchievementId,a=void 0===r?-1:r,c=e.setSelectedAchievementId,i=void 0===c?null:c,s=e.children,o=void 0===s?null:s,l=Object(Za.a)(e,Xi);return n?Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemActive:a===n.achievementId,itemUnseen:n.unseen>0,onClick:function(e){return i(n.achievementId)}},l),{},{children:[Object($a.jsx)(Qi,{achievement:n}),o]})):null},Zi=["achievements","selectedAchievementId","setSelectedAchievementId","children"],$i=function(e){var t=e.achievements,n=void 0===t?null:t,r=e.selectedAchievementId,a=void 0===r?-1:r,c=e.setSelectedAchievementId,i=void 0===c?null:c,s=e.children,o=void 0===s?null:s,l=Object(Za.a)(e,Zi);return Object($a.jsxs)(sc,Object(bt.a)(Object(bt.a)({columnCount:6,columnMinWidth:50,columnMinHeight:50},l),{},{children:[n&&n.length>0&&n.map((function(e,t){return Object($a.jsx)(Ji,{achievement:e,selectedAchievementId:a,setSelectedAchievementId:i},t)})),o]}))},es=["achievement","children"],ts=function(e){var t=e.achievement,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,c=Object(Za.a)(e,es);return n?Object($a.jsxs)(lc,Object(bt.a)(Object(bt.a)({shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden"},c),{},{children:[Object($a.jsxs)(Jc,{center:!0,gap:1,children:[Object($a.jsx)(Qi,{className:"nitro-achievements-badge-image",achievement:n,scale:2}),Object($a.jsx)(Hi,{fontWeight:"bold",children:st("achievements.details.level",["level","limit"],[v(n).toString(),n.levelCount.toString()])})]}),Object($a.jsxs)(Jc,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{fontWeight:"bold",truncate:!0,children:it(O(n))}),Object($a.jsx)(Hi,{textBreak:!0,children:ct(O(n))})]}),(n.levelRewardPoints>0||n.scoreLimit>0)&&Object($a.jsxs)(Jc,{gap:1,children:[n.levelRewardPoints>0&&Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{truncate:!0,className:"small",children:st("achievements.details.reward")}),Object($a.jsxs)(lc,{center:!0,className:"fw-bold small",gap:1,children:[n.levelRewardPoints,Object($a.jsx)(Vc,{type:n.levelRewardPointType})]})]}),n.scoreLimit>0&&Object($a.jsx)(_i,{text:st("achievements.details.progress",["progress","limit"],[(n.currentPoints+n.scoreAtStartOfLevel).toString(),(n.scoreLimit+n.scoreAtStartOfLevel).toString()]),progress:n.currentPoints+n.scoreAtStartOfLevel,maxProgress:n.scoreLimit+n.scoreAtStartOfLevel})]})]}),a]})):null},ns=function(e){var t=e.category,n=void 0===t?null:t,r=e.selectedAchievementId,a=void 0===r?-1:r,i=e.setSelectedAchievementId,s=void 0===i?null:i,o=e.setAchievementSeen,l=void 0===o?null:o,u=Object(c.useMemo)((function(){return-1===a?null:n.achievements.find((function(e){return e.achievementId===a}))}),[n,a]);return Object(c.useEffect)((function(){u||n.achievements.length&&s(n.achievements[0].achievementId)}),[u,n,s]),Object(c.useEffect)((function(){u&&l(n.code,u.achievementId)}),[u,n,l]),n?Object($a.jsxs)(Jc,{fullHeight:!0,justifyContent:"between",children:[Object($a.jsx)($i,{achievements:n.achievements,selectedAchievementId:a,setSelectedAchievementId:s}),!!u&&Object($a.jsx)(ts,{achievement:u})]}):null},rs=["category","selectedCategoryCode","setSelectedCategoryCode","children"],as=function(e){var t=e.category,n=void 0===t?null:t,r=e.selectedCategoryCode,a=void 0===r?null:r,c=e.setSelectedCategoryCode,i=void 0===c?null:c,s=e.children,o=void 0===s?null:s,l=Object(Za.a)(e,rs);if(!n)return null;var u=f(n),d=j(n),b=h(n,u),O=g(n);return Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemActive:a===n.code,itemCount:O,itemCountMinimum:0,gap:1,onClick:function(e){return i(n.code)}},l),{},{children:[Object($a.jsx)(Hi,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:st("quests.".concat(n.code,".name"))}),Object($a.jsx)(Hc,{position:"relative",imageUrl:b,children:Object($a.jsxs)(Hi,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[u," / ",d]})}),o]}))},cs=["categories","selectedCategoryCode","setSelectedCategoryCode","children"],is=function(e){var t=e.categories,n=void 0===t?null:t,r=e.selectedCategoryCode,a=void 0===r?null:r,c=e.setSelectedCategoryCode,i=void 0===c?null:c,s=e.children,o=void 0===s?null:s,l=Object(Za.a)(e,cs);return Object($a.jsxs)(sc,Object(bt.a)(Object(bt.a)({columnCount:3,columnMinWidth:90,columnMinHeight:100},l),{},{children:[n&&n.length>0&&n.map((function(e,t){return Object($a.jsx)(as,{category:e,selectedCategoryCode:a,setSelectedCategoryCode:i},t)})),o]}))},ss=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=jt(),s=i.achievementCategories,l=void 0===s?[]:s,u=i.selectedCategoryCode,d=void 0===u?null:u,j=i.setSelectedCategoryCode,b=void 0===j?null:j,O=i.selectedAchievementId,f=void 0===O?-1:O,g=i.setSelectedAchievementId,m=void 0===g?null:g,v=i.achievementScore,p=void 0===v?0:v,x=i.getProgress,_=void 0===x?0:x,E=i.getMaxProgress,I=void 0===E?0:E,y=i.setAchievementSeen,C=void 0===y?null:y,T=Object(c.useMemo)((function(){return null===d?null:l.find((function(e){return e.code===d}))}),[l,d]);return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}},eventUrlPrefix:"achievements/"};return R(e),function(){return B(e)}}),[]),r?Object($a.jsxs)(Pc,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("inventory.achievements"),onCloseClick:function(e){return a(!1)}}),T&&Object($a.jsxs)(Nc,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[Object($a.jsx)(tc,{onClick:function(e){return b(null)},className:"nitro-achievements-back-arrow"}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsx)(Hi,{fontSize:4,fontWeight:"bold",className:"text-small",children:st("quests.".concat(T.code,".name"))}),Object($a.jsx)(Hi,{children:st("achievements.details.categoryprogress",["progress","limit"],[T.getProgress().toString(),T.getMaxProgress().toString()])})]}),Object($a.jsx)(oi,{imageUrl:h(T,null,!0)})]}),Object($a.jsxs)(Ec,{gap:1,children:[!T&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(is,{categories:l,selectedCategoryCode:d,setSelectedCategoryCode:b}),Object($a.jsxs)(Jc,{grow:!0,justifyContent:"end",gap:1,children:[Object($a.jsx)(Hi,{small:!0,center:!0,children:st("achievements.categories.score",["score"],[p.toString()])}),Object($a.jsx)(_i,{text:st("achievements.categories.totalprogress",["progress","limit"],[_.toString(),I.toString()]),progress:_,maxProgress:I})]})]}),T&&Object($a.jsx)(ns,{category:T,selectedAchievementId:f,setSelectedAchievementId:m,setAchievementSeen:C})]})]}):null},os=Object(d.a)((function e(){Object(u.a)(this,e)}));os.ACTION_SAVE="AEA_ACTION_SAVE",os.ACTION_CLEAR="AEA_ACTION_CLEAR",os.ACTION_RESET="AEA_ACTION_RESET",os.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";var ls=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(u.a)(this,e),this._partColor=void 0,this._isDisabled=void 0,this._isHC=void 0,this._isSelected=void 0,this._notifier=void 0,this._partColor=t,this._isDisabled=n,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}return Object(d.a)(e,[{key:"dispose",value:function(){this._partColor=null}},{key:"partColor",get:function(){return this._partColor}},{key:"color",get:function(){return l.ib.int2rgb(this._partColor.rgb)}},{key:"isDisabled",get:function(){return this._isDisabled}},{key:"isHC",get:function(){return this._isHC}},{key:"isSelected",get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.notify&&this.notify()}},{key:"notify",get:function(){return this._notifier},set:function(e){this._notifier=e}}]),e}(),us=function(){function e(){Object(u.a)(this,e),this._data=void 0,this._colors=void 0,this._gender="M",this._direction=e.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}return Object(d.a)(e,[{key:"loadAvatarData",value:function(e,t){this._data=new Map,this._colors=new Map,this._gender=t,this.parseFigureString(e),this.updateView()}},{key:"parseFigureString",value:function(e){if(e){var t=e.split(".");if(t&&t.length){var n,r=Object(s.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value.split("-");if(a.length){for(var c=a[0],i=parseInt(a[1]),o=[],l=2;l<a.length;)o.push(parseInt(a[l])),l++;o.length||o.push(0),this.savePartSetId(c,i,!1),this.savePartSetColourId(c,o,!1)}}}catch(u){r.e(u)}finally{r.f()}}}}},{key:"getPartSetId",value:function(e){var t=this._data.get(e);return void 0!==t?t:-1}},{key:"getColorIds",value:function(e){var t=this._colors.get(e);return void 0!==t?t:[bs.avatarSetFirstSelectableColor(e)]}},{key:"getFigureString",value:function(){var e,t="",n=[],r=Object(s.a)(this._data.entries());try{for(r.s();!(e=r.n()).done;){var a=Object(o.a)(e.value,2),c=a[0],i=a[1],l=this._colors.get(c),u=c+"-"+i;if(l&&l.length)for(var d=0;d<l.length;)u=u+"-"+l[d],d++;n.push(u)}}catch(b){r.e(b)}finally{r.f()}for(var j=0;j<n.length;)t+=n[j],j<n.length-1&&(t+="."),j++;return t}},{key:"savePartData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(e,t,r),this.savePartSetColourId(e,n,r)}},{key:"savePartSetId",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case e.FACE:case e.HAIR:case e.HAT:case e.HEAD_ACCESSORIES:case e.EYE_ACCESSORIES:case e.FACE_ACCESSORIES:case e.SHIRT:case e.JACKET:case e.CHEST_ACCESSORIES:case e.CHEST_PRINTS:case e.TROUSERS:case e.SHOES:case e.TROUSER_ACCESSORIES:n>=0?this._data.set(t,n):this._data.delete(t)}r&&this.updateView()}},{key:"savePartSetColourId",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case e.FACE:case e.HAIR:case e.HAT:case e.HEAD_ACCESSORIES:case e.EYE_ACCESSORIES:case e.FACE_ACCESSORIES:case e.SHIRT:case e.JACKET:case e.CHEST_ACCESSORIES:case e.CHEST_PRINTS:case e.TROUSERS:case e.SHOES:case e.TROUSER_ACCESSORIES:this._colors.set(t,n)}r&&this.updateView()}},{key:"getFigureStringWithFace",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r="",a=[e.FACE],c=[],i=0,s=a;i<s.length;i++){var o=s[i],l=this._colors.get(o);if(l){var u=this._data.get(o);o===e.FACE&&n&&(u=t);var d=o+"-"+u;if(u>=0)for(var j=0;j<l.length;)d=d+"-"+l[j],j++;c.push(d)}}for(var b=0;b<c.length;)r+=c[b],b<c.length-1&&(r+="."),b++;return r}},{key:"updateView",value:function(){this.notify&&this.notify()}},{key:"gender",get:function(){return this._gender}},{key:"direction",get:function(){return this._direction},set:function(e){this._direction=e,this.updateView()}},{key:"avatarEffectType",get:function(){return this._avatarEffectType},set:function(e){this._avatarEffectType=e}},{key:"notify",get:function(){return this._notifier},set:function(e){this._notifier=e}}]),e}();us.DEFAULT_DIRECTION=4,us.MALE="M",us.FEMALE="F",us.UNISEX="U",us.SCALE="h",us.STD="std",us.DEFAULT_FRAME="0",us.FACE="hd",us.HAIR="hr",us.HAT="ha",us.HEAD_ACCESSORIES="he",us.EYE_ACCESSORIES="ea",us.FACE_ACCESSORIES="fa",us.JACKET="cc",us.SHIRT="ch",us.CHEST_ACCESSORIES="ca",us.CHEST_PRINTS="cp",us.TROUSERS="lg",us.SHOES="sh",us.TROUSER_ACCESSORIES="wa",us.SET_TYPES=[us.FACE,us.HAIR,us.HAT,us.HEAD_ACCESSORIES,us.EYE_ACCESSORIES,us.FACE_ACCESSORIES,us.JACKET,us.SHIRT,us.CHEST_ACCESSORIES,us.CHEST_PRINTS,us.TROUSERS,us.SHOES,us.TROUSERS];var ds=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Object(u.a)(this,e),this._renderManager=void 0,this._partSet=void 0,this._partColors=void 0,this._useColors=void 0,this._isDisabled=void 0,this._thumbContainer=void 0,this._imageUrl=void 0,this._maxColorIndex=void 0,this._isValidFigure=void 0,this._isHC=void 0,this._isSellable=void 0,this._isClear=void 0,this._isSelected=void 0,this._disposed=void 0,this._isInitalized=void 0,this._notifier=void 0,this._renderManager=k(),this._partSet=t,this._partColors=n,this._useColors=r,this._isDisabled=a,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,t){var c,i=t.parts,o=Object(s.a)(i);try{for(o.s();!(c=o.n()).done;){var l=c.value;this._maxColorIndex=Math.max(this._maxColorIndex,l.colorLayerIndex)}}catch(d){o.e(d)}finally{o.f()}}}return Object(d.a)(e,[{key:"init",value:function(){this._isInitalized||(this._isInitalized=!0,this.update())}},{key:"dispose",value:function(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}},{key:"update",value:function(){this.updateThumbVisualization()}},{key:"analyzeFigure",value:function(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;var e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}},{key:"renderThumb",value:function(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;var t,n=this._partSet.parts.concat().sort(this.sortByDrawOrder),r=new l.Ne,a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(c){for(var i=null,o=0,u=!1;!u&&o<e.THUMB_DIRECTIONS.length;){var d=us.SCALE+"_"+us.STD+"_"+c.type+"_"+c.id+"_"+e.THUMB_DIRECTIONS[o]+"_"+us.DEFAULT_FRAME;(i=this._renderManager.getAssetByName(d))&&i.texture?u=!0:o++}if(u){var j=i.offsetX,b=i.offsetY,O=null;if(this._useColors&&c.colorLayerIndex>0){var h=this._partColors[c.colorLayerIndex-1];h&&(O=h)}var f=new l.Ve(i.texture);f.position.set(j,b),O&&(f.tint=O.rgb),r.addChild(f)}}}}catch(g){a.e(g)}finally{a.f()}return r}},{key:"updateThumbVisualization",value:function(){if(this._isInitalized){var e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=l.Mh.generateImageUrl(e),this.notify&&this.notify())}}},{key:"setAlpha",value:function(t,n){return t.filters=[e.ALPHA_FILTER],t}},{key:"sortByDrawOrder",value:function(t,n){var r=e.DRAW_ORDER.indexOf(t.type),a=e.DRAW_ORDER.indexOf(n.type);return r<a?-1:r>a?1:t.index<n.index?-1:t.index>n.index?1:0}},{key:"resetFigure",value:function(e){this.analyzeFigure()&&this.update()}},{key:"disposed",get:function(){return this._disposed}},{key:"id",get:function(){return this._partSet?this._partSet.id:-1}},{key:"partSet",get:function(){return this._partSet}},{key:"partColors",set:function(e){this._partColors=e,this.update()}},{key:"isDisabled",get:function(){return this._isDisabled}},{key:"thumbContainer",set:function(e){this._thumbContainer=e,this.update()}},{key:"imageUrl",get:function(){return this._imageUrl}},{key:"maxColorIndex",get:function(){return this._maxColorIndex}},{key:"isHC",get:function(){return this._isHC}},{key:"isSellable",get:function(){return this._isSellable}},{key:"isClear",get:function(){return this._isClear},set:function(e){this._isClear=e}},{key:"isSelected",get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.notify&&this.notify()}},{key:"notify",get:function(){return this._notifier},set:function(e){this._notifier=e}}]),e}();ds.ALPHA_FILTER=new l.Le(.2),ds.THUMB_DIRECTIONS=[2,6,0,4,3,1],ds.DRAW_ORDER=[l.p.LEFT_HAND_ITEM,l.p.LEFT_HAND,l.p.LEFT_SLEEVE,l.p.LEFT_COAT_SLEEVE,l.p.BODY,l.p.SHOES,l.p.LEGS,l.p.CHEST,l.p.CHEST_ACCESSORY,l.p.COAT_CHEST,l.p.CHEST_PRINT,l.p.WAIST_ACCESSORY,l.p.RIGHT_HAND,l.p.RIGHT_SLEEVE,l.p.RIGHT_COAT_SLEEVE,l.p.HEAD,l.p.FACE,l.p.EYES,l.p.HAIR,l.p.HAIR_BIG,l.p.FACE_ACCESSORY,l.p.EYE_ACCESSORY,l.p.HEAD_ACCESSORY,l.p.HEAD_ACCESSORY_EXTRA,l.p.RIGHT_HAND_ITEM];var js=function(){function e(t,n,r){Object(u.a)(this,e),this._name=void 0,this._parts=void 0,this._palettes=void 0,this._selectedPartIndex=-1,this._paletteIndexes=void 0,this._name=t,this._parts=n,this._palettes=r,this._selectedPartIndex=-1}return Object(d.a)(e,[{key:"init",value:function(){var e,t=Object(s.a)(this._parts);try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.init()}}catch(r){t.e(r)}finally{t.f()}}},{key:"dispose",value:function(){if(this._parts){var e,t=Object(s.a)(this._parts);try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(o){t.e(o)}finally{t.f()}this._parts=null}if(this._palettes){var n,r=Object(s.a)(this._palettes);try{for(r.s();!(n=r.n()).done;){var a,c=n.value,i=Object(s.a)(c);try{for(i.s();!(a=i.n()).done;){a.value.dispose()}}catch(o){i.e(o)}finally{i.f()}}}catch(o){r.e(o)}finally{r.f()}this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}},{key:"selectPartId",value:function(e){if(this._parts)for(var t=0;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}},{key:"selectColorIds",value:function(e){if(e&&this._palettes){this._paletteIndexes=new Array(e.length);for(var t=0;t<this._palettes.length;){var n=this.getPalette(t);if(n){var r=0;if(e.length>t)r=e[t];else{var a=n[0];a&&a.partColor&&(r=a.partColor.id)}for(var c=0;c<n.length;){var i=n[c];i.partColor.id===r?(this._paletteIndexes[t]=c,i.isSelected=!0):i.isSelected=!1,c++}}t++}this.updatePartColors()}}},{key:"selectPartIndex",value:function(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){var t=this._parts[this._selectedPartIndex];t&&(t.isSelected=!1)}if(this._parts.length>e){var n=this._parts[e];if(n)return n.isSelected=!0,this._selectedPartIndex=e,n}return null}},{key:"selectColorIndex",value:function(e,t){var n=this.getPalette(t);if(!n)return null;if(n.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;var r=n[e];return r?(r.isSelected=!0,this.updatePartColors(),r):null}},{key:"getCurrentColorIndex",value:function(e){return this._paletteIndexes[e]}},{key:"deselectColorIndex",value:function(e,t){var n=this.getPalette(t);if(n&&!(n.length<=e)){var r=n[e];r&&(r.isSelected=!1)}}},{key:"getSelectedColorIds",value:function(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;var e=this._palettes[0];if(!e||!e.length)return null;var t=e[0];if(!t||!t.partColor)return null;for(var n=t.partColor.id,r=[],a=0;a<this._paletteIndexes.length;){var c=this._palettes[a];if(c&&!(c.length<=a))if(c.length>this._paletteIndexes[a]){var i=c[this._paletteIndexes[a]];i&&i.partColor?r.push(i.partColor.id):r.push(n)}else r.push(n);a++}var s=this.getCurrentPart();return s?r.slice(0,Math.max(s.maxColorIndex,1)):null}},{key:"getSelectedColors",value:function(){for(var e=[],t=0;t<this._paletteIndexes.length;){var n=this.getSelectedColor(t);n?e.push(n.partColor):e.push(null),t++}return e}},{key:"getSelectedColor",value:function(e){var t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}},{key:"getSelectedColorId",value:function(e){var t=this.getSelectedColor(e);return t&&t.partColor?t.partColor.id:0}},{key:"getPalette",value:function(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}},{key:"getCurrentPart",value:function(){return this._parts[this._selectedPartIndex]}},{key:"updatePartColors",value:function(){var e,t=this.getSelectedColors(),n=Object(s.a)(this._parts);try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&(r.partColors=t)}}catch(a){n.e(a)}finally{n.f()}}},{key:"hasClubSelectionsOverLevel",value:function(e){var t=!1,n=this.getSelectedColors();if(n)for(var r=0;r<n.length;){var a=n[r];a&&a.clubLevel>e&&(t=!0),r++}var c=this.getCurrentPart();if(c&&c.partSet){var i=c.partSet;i&&i.clubLevel>e&&(t=!0)}return t}},{key:"hasInvalidSelectedItems",value:function(e){var t=this.getCurrentPart();if(!t)return!1;var n=t.partSet;return n&&n.isSellable?e.indexOf(n.id)>-1:void 0}},{key:"stripClubItemsOverLevel",value:function(e){var t=this.getCurrentPart();if(t&&t.partSet&&t.partSet.clubLevel>e){var n=this.selectPartIndex(0);return n&&!n.partSet&&this.selectPartIndex(1),!0}return!1}},{key:"stripClubColorsOverLevel",value:function(t){var n=[],r=this.getSelectedColors(),a=this.getPalette(0),c=!1,i=e.defaultColorId(a,t);if(-1===i)return!1;for(var s=0;s<r.length;){var o=r[s];o?o.clubLevel>t?(n.push(i),c=!0):n.push(o.id):(n.push(i),c=!0),s++}return c&&this.selectColorIds(n),c}},{key:"name",get:function(){return this._name}},{key:"parts",get:function(){return this._parts}},{key:"selectedPartIndex",get:function(){return this._selectedPartIndex}}],[{key:"defaultColorId",value:function(e,t){if(!e||!e.length)return-1;for(var n=0;n<e.length;){var r=e[n];if(r.partColor&&r.partColor.clubLevel<=t)return r.partColor.id;n++}return-1}}]),e}(),bs=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getGender",value:function(e){switch(e){case us.MALE:case"m":case"M":e=us.MALE;break;case us.FEMALE:case"f":case"F":e=us.FEMALE;break;default:e=us.MALE}return e}},{key:"hasFigureSetId",value:function(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}},{key:"createCategory",value:function(e,t){if(!e||!t||!this.CURRENT_FIGURE)return null;for(var n=[],r=[],a=0;a<this.MAX_PALETTES;)r.push([]),a++;var c=w(t);if(!c)return null;var i=A(c.paletteID);if(!i)return null;var o=this.CURRENT_FIGURE.getColorIds(t);o||(o=[]);var l,u=new Array(o.length),d=this.clubItemsDimmed,j=ce(),b=Object(s.a)(i.colors.getValues());try{for(b.s();!(l=b.n()).done;){var O=l.value;if(O.isSelectable&&(d||j>=O.clubLevel)){for(var h=0;h<this.MAX_PALETTES;){var f=j<O.clubLevel,g=new ls(O,f);r[h].push(g),h++}if(t!==us.FACE)for(var m=0;m<o.length;)O.id===o[m]&&(u[m]=O),m++}}}catch(C){b.e(C)}finally{b.f()}if(-1===(d?k().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):k().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,j)).indexOf(t)){var v=new ds(null,null,!1);v.isClear=!0,n.push(v)}var p=t!==us.FACE,x=c.partSets;for(a=x.length-1;a>=0;){var _=x.getWithIndex(a),E=!1;if((_.gender===us.UNISEX||_.gender===this.CURRENT_FIGURE.gender)&&(E=!0),_.isSelectable&&E&&(d||j>=_.clubLevel)){var I=j<_.clubLevel,y=!0;_.isSellable&&(y=this.hasFigureSetId(_.id)),y&&n.push(new ds(_,u,p,I))}a--}for(n.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),a=0;a<this.MAX_PALETTES;)r[a].sort(this.colorSorter),a++;return new js(t,n,r)}},{key:"clubSorter",value:function(e,t){var n=e.partSet?e.partSet.clubLevel:9999999999,r=t.partSet?t.partSet.clubLevel:9999999999,a=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return a&&!c?1:c&&!a||n>r?-1:n<r?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}},{key:"colorSorter",value:function(e,t){var n=e.partColor?e.partColor.clubLevel:-1,r=t.partColor?t.partColor.clubLevel:-1;return n<r?-1:n>r?1:e.partColor.index<t.partColor.index?-1:e.partColor.index>t.partColor.index?1:0}},{key:"noobSorter",value:function(e,t){var n=e.partSet?e.partSet.clubLevel:-1,r=t.partSet?t.partSet.clubLevel:-1,a=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return a&&!c?1:c&&!a||n<r?-1:n>r?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}},{key:"avatarSetFirstSelectableColor",value:function(e){var t=w(e);if(!t)return-1;var n=A(t.paletteID);if(!n)return-1;var r,a=Object(s.a)(n.colors.getValues());try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c.isSelectable&&!(ce()<c.clubLevel))return c.id}}catch(i){a.e(i)}finally{a.f()}return-1}},{key:"clubItemsFirst",get:function(){return L("avatareditor.show.clubitems.first",!0)}},{key:"clubItemsDimmed",get:function(){return L("avatareditor.show.clubitems.dimmed",!0)}}]),e}();bs.MAX_PALETTES=2,bs.CURRENT_FIGURE=null,bs.FIGURE_SET_IDS=[],bs.BOUND_FURNITURE_NAMES=[];var Os=n(10),hs=n(9),fs=function(){function e(){Object(u.a)(this,e),this._categories=void 0,this._isInitalized=void 0,this._maxPaletteCount=void 0,this._disposed=void 0,this._isInitalized=!1,this._maxPaletteCount=0}return Object(d.a)(e,[{key:"dispose",value:function(){this._categories=null,this._disposed=!0}},{key:"disposed",get:function(){return this._disposed}},{key:"init",value:function(){this._categories||(this._categories=new Map)}},{key:"reset",value:function(){if(this._isInitalized=!1,this._categories){var e,t=Object(s.a)(this._categories.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.dispose()}}catch(r){t.e(r)}finally{t.f()}}this._categories=new Map}},{key:"addCategory",value:function(e){var t=this._categories.get(e);t||(t=bs.createCategory(this,e))&&(this._categories.set(e,t),this.updateSelectionsFromFigure(e))}},{key:"updateSelectionsFromFigure",value:function(e){var t=this._categories.get(e);if(t){var n=bs.CURRENT_FIGURE.getPartSetId(e),r=bs.CURRENT_FIGURE.getColorIds(e);r||(r=[]),t.selectPartId(n),t.selectColorIds(r)}}},{key:"hasClubSelectionsOverLevel",value:function(e){if(!this._categories)return!1;var t,n=Object(s.a)(this._categories.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r&&r.hasClubSelectionsOverLevel(e))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"hasInvalidSelectedItems",value:function(e){if(!this._categories)return!1;var t,n=Object(s.a)(this._categories.values());try{for(n.s();!(t=n.n()).done;){if(t.value.hasInvalidSelectedItems(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"stripClubItemsOverLevel",value:function(e){if(!this._categories)return!1;var t,n=!1,r=Object(s.a)(this._categories.entries());try{for(r.s();!(t=r.n()).done;){var a=Object(o.a)(t.value,2),c=a[0],i=a[1],l=!1;if(i.stripClubItemsOverLevel(e)&&(l=!0),i.stripClubColorsOverLevel(e)&&(l=!0),l){var u=i.getCurrentPart();u&&bs.CURRENT_FIGURE&&bs.CURRENT_FIGURE.savePartData(c,u.id,i.getSelectedColorIds(),!0),n=!0}}}catch(d){r.e(d)}finally{r.f()}return n}},{key:"stripInvalidSellableItems",value:function(){if(!this._categories)return!1;var e,t=!1,n=Object(s.a)(this._categories.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(o.a)(e.value,2);r[0],r[1]}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"selectPart",value:function(e,t){var n=this._categories.get(e);if(n){var r=n.selectedPartIndex;n.selectPartIndex(t);var a=n.getCurrentPart();a&&(a.isDisabled?n.selectPartIndex(r):(this._maxPaletteCount=a.maxColorIndex,bs.CURRENT_FIGURE.savePartData(e,a.id,n.getSelectedColorIds(),!0)))}}},{key:"selectColor",value:function(e,t,n){var r=this._categories.get(e);if(r){var a=r.getCurrentColorIndex(n);r.selectColorIndex(t,n),r.getSelectedColor(n).isDisabled?r.selectColorIndex(a,n):bs.CURRENT_FIGURE.savePartSetColourId(e,r.getSelectedColorIds(),!0)}}},{key:"getCategoryData",value:function(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}},{key:"categories",get:function(){return this._categories}},{key:"canSetGender",get:function(){return!1}},{key:"maxPaletteCount",get:function(){return this._maxPaletteCount||1},set:function(e){this._maxPaletteCount=e}},{key:"name",get:function(){return null}}]),e}(),gs=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._imageCallBackHandled=!1,e}return Object(d.a)(n,[{key:"init",value:function(){Object(Os.a)(Object(hs.a)(n.prototype),"init",this).call(this),this.addCategory(us.FACE),this._isInitalized=!0}},{key:"selectColor",value:function(e,t,r){Object(Os.a)(Object(hs.a)(n.prototype),"selectColor",this).call(this,e,t,r),this.updateSelectionsFromFigure(us.FACE)}},{key:"updateSelectionsFromFigure",value:function(e){if(this._categories&&bs.CURRENT_FIGURE){var t=this._categories.get(e);if(t){var n=bs.CURRENT_FIGURE.getPartSetId(e),r=bs.CURRENT_FIGURE.getColorIds(e);r||(r=[]),t.selectPartId(n),t.selectColorIds(r);var a,c=Object(s.a)(t.parts);try{var i=function(){var e=a.value;!function t(n){var r=bs.CURRENT_FIGURE.getFigureStringWithFace(e.id),a=k().createAvatarImage(r,l.q.LARGE,null,{resetFigure:t,dispose:null,disposed:!1}),c=a.getImageAsSprite(l.r.HEAD);c&&(c.y=10,e.thumbContainer=c,setTimeout((function(){return a.dispose()}),0))}()};for(c.s();!(a=c.n()).done;)i()}catch(o){c.e(o)}finally{c.f()}}}}},{key:"canSetGender",get:function(){return!0}},{key:"name",get:function(){return l.m.GENERIC}}]),n}(fs);function ms(e){var t,n=e.parts,r=0,a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;r=Math.max(r,c.colorLayerIndex)}}catch(i){a.e(i)}finally{a.f()}return r}function vs(e,t){return t=t.filter((function(t){return-1===e.indexOf(t)})),[].concat(Object(ut.a)(e),Object(ut.a)(lr.getRandomElements(t,lr.getRandomNumber(t.length)+1)))}function ps(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)return null;var a=e.partSets.getValues().filter((function(e){return!e.isSelectable||"U"!==e.gender&&e.gender!==t||e.clubLevel>n||e.isSellable&&-1===r.indexOf(e.id)?null:e}));return a&&a.length?lr.getRandomElement(a):null}function xs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];var r=e.colors.getValues().filter((function(e){return!e.isSelectable||e.clubLevel>n?null:e}));return r&&r.length?lr.getRandomElements(r,ms(t)):null}var _s=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"init",value:function(){Object(Os.a)(Object(hs.a)(n.prototype),"init",this).call(this),this.addCategory(us.HAIR),this.addCategory(us.HAT),this.addCategory(us.HEAD_ACCESSORIES),this.addCategory(us.EYE_ACCESSORIES),this.addCategory(us.FACE_ACCESSORIES),this._isInitalized=!0}},{key:"name",get:function(){return l.m.HEAD}}]),n}(fs),Es=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"init",value:function(){Object(Os.a)(Object(hs.a)(n.prototype),"init",this).call(this),this.addCategory(us.TROUSERS),this.addCategory(us.SHOES),this.addCategory(us.TROUSER_ACCESSORIES),this._isInitalized=!0}},{key:"name",get:function(){return l.m.LEGS}}]),n}(fs),Is=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"init",value:function(){Object(Os.a)(Object(hs.a)(n.prototype),"init",this).call(this),this.addCategory(us.SHIRT),this.addCategory(us.CHEST_PRINTS),this.addCategory(us.JACKET),this.addCategory(us.CHEST_ACCESSORIES),this._isInitalized=!0}},{key:"name",get:function(){return l.m.TORSO}}]),n}(fs),ys=["icon","selected","classNames","children"],Cs=function(e){var t=e.icon,n=void 0===t?null:t,r=e.selected,a=void 0!==r&&r,i=e.classNames,s=void 0===i?[]:i,o=(e.children,Object(Za.a)(e,ys)),l=Object(c.useMemo)((function(){var e=["nitro-avatar-editor-spritesheet"];return n&&n.length&&e.push(n+"-icon"),a&&e.push("selected"),s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[n,a,s]);return Object($a.jsx)(tc,Object(bt.a)({classNames:l},o))},Ts=function(e){var t=e.figureData,n=void 0===t?null:t,r=Object(c.useState)(-1),a=Object(o.a)(r,2),i=(a[0],a[1]),s=Object(c.useCallback)((function(){i((function(e){return e+1}))}),[]),u=Object(c.useCallback)((function(e){e<l.l.MIN_DIRECTION&&(e=l.l.MAX_DIRECTION+(e+1)),e>l.l.MAX_DIRECTION&&(e-=l.l.MAX_DIRECTION+1),n.direction=e}),[n]);return Object(c.useEffect)((function(){if(n)return n.notify=s,function(){n.notify=null}}),[n,s]),Object($a.jsxs)(Jc,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[Object($a.jsx)(Mc,{figure:n.getFigureString(),direction:n.direction,scale:2}),Object($a.jsx)(Cs,{className:"avatar-spotlight",icon:"spotlight"}),Object($a.jsx)(tc,{className:"avatar-shadow"}),Object($a.jsxs)(tc,{className:"arrow-container",children:[Object($a.jsx)(Cs,{pointer:!0,icon:"arrow-left",onClick:function(e){return u(n.direction+1)}}),Object($a.jsx)(Cs,{pointer:!0,icon:"arrow-right",onClick:function(e){return u(n.direction-1)}})]})]})},Ss=["partItem","children"],Ns=function(e){var t=e.partItem,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,Ss),s=Object(c.useState)(-1),l=Object(o.a)(s,2),u=(l[0],l[1]),d=L("hc.disabled",!1),j=Object(c.useCallback)((function(){u((function(e){return e+1}))}),[]);return Object(c.useEffect)((function(){return n.notify=j,function(){n.notify=null}}),[n,j]),Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemImage:n.isClear?void 0:n.imageUrl,itemActive:n.isSelected},i),{},{children:[!d&&n.isHC&&Object($a.jsx)(Vc,{className:"position-absolute end-1 bottom-1",type:"hc"}),n.isClear&&Object($a.jsx)(Cs,{icon:"clear"}),n.isSellable&&Object($a.jsx)(Cs,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),a]}))},Rs=function(e){var t=e.model,n=void 0===t?null:t,r=e.category,a=void 0===r?null:r,i=e.setMaxPaletteCount,s=void 0===i?null:i,o=Object(c.useCallback)((function(e){var t=a.parts.indexOf(e);if(-1!==t){n.selectPart(a.name,t);var r=a.getCurrentPart();s(r.maxColorIndex||1)}}),[n,a,s]);return Object($a.jsx)(sc,{columnCount:3,columnMinHeight:50,children:a.parts.length>0&&a.parts.map((function(e,t){return Object($a.jsx)(Ns,{partItem:e,onClick:function(t){return o(e)}},t)}))})},ks=["colorItem","children"],As=function(e){var t=e.colorItem,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,ks),s=Object(c.useState)(-1),l=Object(o.a)(s,2),u=(l[0],l[1]),d=L("hc.disabled",!1),j=Object(c.useCallback)((function(){u((function(e){return e+1}))}),[]);return Object(c.useEffect)((function(){return n.notify=j,function(){return n.notify=null}})),Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemHighlight:!0,itemColor:n.color,itemActive:n.isSelected,className:"clear-bg"},i),{},{children:[!d&&n.isHC&&Object($a.jsx)(Vc,{className:"position-absolute end-1 bottom-1",type:"hc"}),a]}))},ws=function(e){var t=e.model,n=void 0===t?null:t,r=e.category,a=void 0===r?null:r,i=e.paletteSet,s=void 0===i?[]:i,o=e.paletteIndex,l=void 0===o?-1:o,u=Object(c.useCallback)((function(e){var t=s.indexOf(e);-1!==t&&n.selectColor(a.name,t,l)}),[n,a,s,l]);return Object($a.jsx)(sc,{gap:1,columnCount:5,columnMinWidth:30,children:s.length>0&&s.map((function(e,t){return Object($a.jsx)(As,{colorItem:e,onClick:function(t){return u(e)}},t)}))})},Ds=function(e){var t=e.model,n=void 0===t?null:t,r=e.gender,a=void 0===r?null:r,i=e.setGender,l=void 0===i?null:i,u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useCallback)((function(e){var t=n.categories.get(e);if(t){t.init(),b(t);var r,a=Object(s.a)(t.parts);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c&&c.isSelected){g(c.maxColorIndex||1);break}}}catch(i){a.e(i)}finally{a.f()}}}),[n]);return Object(c.useEffect)((function(){n.init();var e,t=Object(s.a)(n.categories.keys());try{for(t.s();!(e=t.n()).done;){var r=e.value;m(r);break}}catch(a){t.e(a)}finally{t.f()}}),[n,m]),n&&j?Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:2,children:[n.canSetGender&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(lc,{center:!0,pointer:!0,className:"category-item",onClick:function(e){return l(us.MALE)},children:Object($a.jsx)(Cs,{icon:"male",selected:a===us.MALE})}),Object($a.jsx)(lc,{center:!0,pointer:!0,className:"category-item",onClick:function(e){return l(us.FEMALE)},children:Object($a.jsx)(Cs,{icon:"female",selected:a===us.FEMALE})})]}),!n.canSetGender&&n.categories&&n.categories.size>0&&Array.from(n.categories.keys()).map((function(e){var t=n.categories.get(e);return Object($a.jsx)(lc,{center:!0,pointer:!0,className:"category-item",onClick:function(t){return m(e)},children:Object($a.jsx)(Cs,{icon:t.name,selected:j===t})},e)}))]}),Object($a.jsx)(Jc,{size:5,overflow:"hidden",children:Object($a.jsx)(Rs,{model:n,category:j,setMaxPaletteCount:g})}),Object($a.jsxs)(Jc,{size:5,overflow:"hidden",children:[f>=1&&Object($a.jsx)(ws,{model:n,category:j,paletteSet:j.getPalette(0),paletteIndex:0}),2===f&&Object($a.jsx)(ws,{model:n,category:j,paletteSet:j.getPalette(1),paletteIndex:1})]})]}):null},Us=function(e){var t=e.figureData,n=void 0===t?null:t,r=e.savedFigures,a=void 0===r?[]:r,i=e.setSavedFigures,s=void 0===i?null:i,u=e.loadAvatarInEditor,d=void 0===u?null:u,j=L("hc.disabled",!1),b=Object(c.useCallback)((function(e){if(!(e>=a.length||e<0)){var t=Object(o.a)(a[e],2),n=t[0],r=t[1];d(n.getFigureString(),r)}}),[a,d]),O=Object(c.useCallback)((function(e){if(!(!n||e>=a.length||e<0)){var t=Object(ut.a)(a),r=n.getFigureString(),c=n.gender;t[e]=[k().createFigureContainer(r),c],s(t),ea(new l.yh(e+1,r,c))}}),[n,a,s]),h=Object(c.useMemo)((function(){if(!a||!a.length)return[];var e=[];return a.forEach((function(t,n){var r=Object(o.a)(t,2),a=r[0],c=r[1],i=0;a&&(i=k().getFigureClubLevel(a,c)),e.push(Object($a.jsxs)(ii,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[a&&Object($a.jsx)(Mc,{figure:a.getFigureString(),gender:c,direction:2}),Object($a.jsx)(tc,{className:"avatar-shadow"}),!j&&i>0&&Object($a.jsx)(Vc,{className:"position-absolute top-1 start-1",type:"hc"}),Object($a.jsxs)(lc,{gap:1,className:"button-container",children:[Object($a.jsx)(dc,{variant:"link",fullWidth:!0,onClick:function(e){return O(n)},children:st("avatareditor.wardrobe.save")}),a&&Object($a.jsx)(dc,{variant:"link",fullWidth:!0,onClick:function(e){return b(n)},disabled:i>ce(),children:st("generic_usable.button.use")})]})]},n))})),e}),[a,j,O,b]);return Object($a.jsx)(sc,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:h})},Ps=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(null),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useState)([]),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)([]),A=Object(o.a)(N,2),w=A[0],D=A[1],U=Object(c.useState)([]),P=Object(o.a)(U,2),M=P[0],F=P[1],H=Object(c.useState)(!1),G=Object(o.a)(H,2),W=G[0],V=G[1],q=Object(c.useState)(null),Y=Object(o.a)(q,2),z=Y[0],K=Y[1],Q=Object(c.useState)(null),X=Object(o.a)(Q,2),J=X[0],Z=X[1],$=Object(c.useState)(!0),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],re=Object(c.useState)(!1),ie=Object(o.a)(re,2),se=ie[0],oe=ie[1],le=Object(c.useMemo)((function(){return L("avatar.wardrobe.max.slots",10)}),[]),ue=Object(c.useCallback)((function(e){var t=e.getParser();S(t.figureSetIds),D(t.boundsFurnitureNames)}),[]);dt(l.wb,ue);var de=Object(c.useCallback)((function(e){for(var t=e.getParser(),n=[],r=0;r<le;)n.push([null,null]),r++;var a,c=Object(s.a)(t.looks.entries());try{for(c.s();!(a=c.n()).done;){var i=Object(o.a)(a.value,2),l=i[0],u=Object(o.a)(i[1],2),d=u[0],j=u[1],b=k().createFigureContainer(d);n[l-1]=[b,j]}}catch(O){c.e(O)}finally{c.f()}F(n)}),[le]);dt(l.Ni,de);var je=Object(c.useCallback)((function(e){v&&I(v.get(e))}),[v]),be=Object(c.useCallback)((function(){var e=new Map;e.set(l.m.GENERIC,new gs),e.set(l.m.HEAD,new _s),e.set(l.m.TORSO,new Is),e.set(l.m.LEGS,new Es),p(e)}),[]),Oe=Object(c.useCallback)((function(){var e=new Map,t=new us,n=new us;t.loadAvatarData("hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",us.MALE),n.loadAvatarData("hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",us.FEMALE),e.set(us.MALE,t),e.set(us.FEMALE,n),j(e),f(e.get(us.MALE))}),[]),he=Object(c.useCallback)((function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=bs.getGender(t);var r=h;t!==r.gender&&(r=d.get(t)),e!==r.getFigureString()&&r.loadAvatarData(e,t),r!==h&&f(r),n&&(K(h.getFigureString()),Z(h.gender))}),[d,h]),fe=Object(c.useCallback)((function(e){switch(e){case os.ACTION_CLEAR:return he(h.getFigureStringWithFace(0,!1),h.gender,!1),void be();case os.ACTION_RESET:return he(z,J),void be();case os.ACTION_RANDOMIZE:var t=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=k().structure,o=new l.o(""),u=vs(i.getMandatorySetTypeIds(t,r),us.SET_TYPES),d=Object(s.a)(c);try{for(d.s();!(n=d.n()).done;){var j=n.value,b=e.getPartSetId(j),O=e.getColorIds(j);o.updatePart(j,b,O)}}catch(x){d.e(x)}finally{d.f()}var h,f=Object(s.a)(u);try{for(f.s();!(h=f.n()).done;){var g=h.value;if(!o.hasPartType(g)){var m=i.figureData.getSetType(g),v=ps(m,t,r,a);if(v){var p=[];v.isColorable&&(p=xs(i.figureData.getPalette(m.paletteID),v,r).map((function(e){return e.id}))),o.updatePart(m.type,v.id,p)}}}}catch(x){f.e(x)}finally{f.f()}return o.getFigureString()}(h,h.gender,ce(),T,[us.FACE]);return he(t,h.gender,!1),void be();case os.ACTION_SAVE:return ea(new l.xi(h.gender,h.getFigureString())),void a(!1)}}),[h,z,J,T,he,be]),ge=Object(c.useCallback)((function(e){e=bs.getGender(e),f(d.get(e))}),[d]),me=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}}),[]);return Object(c.useEffect)((function(){var e={linkReceived:me,eventUrlPrefix:"avatar-editor/"};return R(e),function(){return B(e)}}),[me]),Object(c.useEffect)((function(){F(new Array(le))}),[le]),Object(c.useEffect)((function(){W&&(I(null),ea(new l.xc))}),[W]),Object(c.useEffect)((function(){E&&V(!1)}),[E]),Object(c.useEffect)((function(){v&&je(l.m.GENERIC)}),[v,je]),Object(c.useEffect)((function(){if(h)return bs.CURRENT_FIGURE=h,be(),function(){return bs.CURRENT_FIGURE=null}}),[h,be]),Object(c.useEffect)((function(){return bs.FIGURE_SET_IDS=T,bs.BOUND_FURNITURE_NAMES=w,be(),function(){bs.FIGURE_SET_IDS=null,bs.BOUND_FURNITURE_NAMES=null}}),[T,w,be]),Object(c.useEffect)((function(){if(r)return d?void 0:(Oe(),void oe(!0))}),[r,d,Oe]),Object(c.useEffect)((function(){r&&se&&te&&(he(ae().figure,ae().gender),ne(!1))}),[r,se,te,he]),Object(c.useEffect)((function(){if(!r)return function(){ne(!0)}}),[r]),r&&h?Object($a.jsxs)(Pc,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[Object($a.jsx)(Tc,{headerText:st("avatareditor.title"),onCloseClick:function(e){return a(!1)}}),Object($a.jsxs)(Di,{children:[v&&v.size>0&&Array.from(v.keys()).map((function(e){var t=E&&E.name===e;return Object($a.jsx)(Ai,{isActive:t,onClick:function(t){return je(e)},children:st("avatareditor.category.".concat(e))},e)})),Object($a.jsx)(Ai,{isActive:W,onClick:function(e){return V(!0)},children:st("avatareditor.category.wardrobe")})]}),Object($a.jsx)(Ec,{children:Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:9,overflow:"hidden",children:[E&&!W&&Object($a.jsx)(Ds,{model:E,gender:h.gender,setGender:ge}),W&&Object($a.jsx)(Us,{figureData:h,savedFigures:M,setSavedFigures:F,loadAvatarInEditor:he})]}),Object($a.jsxs)(Jc,{size:3,overflow:"hidden",children:[Object($a.jsx)(Ts,{figureData:h}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){return fe(os.ACTION_RESET)},children:Object($a.jsx)(mc.a,{icon:"undo"})}),Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){return fe(os.ACTION_CLEAR)},children:Object($a.jsx)(mc.a,{icon:"trash"})}),Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){return fe(os.ACTION_RANDOMIZE)},children:Object($a.jsx)(mc.a,{icon:"dice"})})]}),Object($a.jsx)(dc,{className:"w-100",variant:"success",onClick:function(e){return fe(os.ACTION_SAVE)},children:st("avatareditor.save")})]})]})]})})]}):null},Ls=n(192),Ms=n(193),Fs=function(e){var t=new URLSearchParams(window.location.search).get("sso"),n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1];function s(e){fetch("https://int.lavvos.eu/?type=changebanner&banner="+e+"&sso="+t),i(!1)}return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void i(!0);case"hide":return void i(!1)}},eventUrlPrefix:"banners/"};return R(e),function(){return B(e)}}),[i]),Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsxs)(Pc,{children:[Object($a.jsx)(Tc,{headerText:"Mis banners",onCloseClick:function(e){return i(!1)}}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)("div",{className:"alert alert-primary text-center",children:["Los banners son im\xe1genes para configurar la vista de tu personaje.",Object($a.jsx)("br",{}),Object($a.jsx)("b",{children:"\xa1Selecciona el que mas te guste!"})]}),Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner0.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(0)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner1.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(1)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner2.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(2)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner3.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(3)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner4.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(4)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:2,style:{marginBottom:20},children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/banners/banner5.png",style:{marginLeft:2}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return s(5)},className:"btn btn-success btn-sm",children:"Seleccionar"})]})]})]})]})})},Hs=function(e){var t,n=new URLSearchParams(window.location.search).get("sso"),r=Object(c.useState)(!1),a=Object(o.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)(null),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)("battlePassMainView"),O=Object(o.a)(b,2),h=O[0],f=O[1];function g(e){document.getElementById(h).style.display="none",document.getElementById(e).style.display="block",f(e)}return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"open":return f("battlePassMainView"),void fetch("https://int.lavvos.eu/?type=getInfoOpenGalaxyPassEmu&sso="+n).then((function(e){return e.json()})).then((function(e){j(e),s(!0)}));case"update":return void fetch("https://int.lavvos.eu/?type=getInfoOpenGalaxyPassEmu&sso="+n).then((function(e){return e.json()})).then((function(e){j(e)}));case"hide":return void s(!1)}},eventUrlPrefix:"battlepass/"};return R(e),function(){return B(e)}}),[s]),Object($a.jsx)($a.Fragment,{children:i&&Object($a.jsxs)(Pc,{children:[Object($a.jsx)(Tc,{headerText:"Lavvos Pass",onCloseClick:function(e){return s(!1)}}),Object($a.jsx)(Ec,{children:null==d?Object($a.jsx)("div",{style:{width:"600px",height:"400px",fontSize:"16px"},className:"alert alert-primary text-center",children:"Cargando, espera por favor"}):Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("div",{id:"battlePassMainView",style:{width:"600px"},children:Object($a.jsxs)("div",{className:"row g-1",children:[Object($a.jsx)("div",{className:"col-md-4",children:Object($a.jsxs)("div",{style:{padding:"20px",backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_rain.gif)",textAlign:"center",borderRadius:"3px"},children:[Object($a.jsx)("img",{style:{position:"relative",bottom:"30px"},src:(t=d.look,"https://habbo-imaging.lavvos.eu/?figure="+t+"&gesture=sml&direction=2&effect=3&size=l&img_format=gif"),className:"img-fluid"}),Object($a.jsxs)("div",{style:{position:"relative",bottom:"10px"},children:[Object($a.jsx)("h3",{children:Object($a.jsx)("b",{children:d.name})}),Object($a.jsxs)("span",{className:"badge bg-primary",style:{fontSize:"15px",marginBottom:"3px"},children:["Nivel: ",d.level]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-info",style:{fontSize:"13px",marginBottom:"3px"},children:["Experiencia: ",d.exp]}),d.isActive?Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),Object($a.jsx)("br",{})]}):Object($a.jsx)("button",{onClick:function(){return fetch("https://int.lavvos.eu/?type=buyGalaxyPass&sso="+n),void s(!1)},className:"btn btn-success btn-sm",children:"Comprar (150 cr\xe9ditos)"})]})]})}),Object($a.jsxs)("div",{className:"col-md-8",children:[Object($a.jsx)("div",{style:{backgroundImage:"url(https://cdn.discordapp.com/attachments/929069063114752053/1005492439953440910/pantalla1.gif)",width:"100%",height:"186px",marginBottom:"8px",borderRadius:"3px"},children:Object($a.jsx)("div",{style:{margin:0,position:"absolute",top:"32%",msTransform:"translateY(-50%)",transform:"translateY(-50%)",right:"24%"},children:Object($a.jsx)("button",{onClick:function(){return g("battlePassMissionsView")},className:"btn btn-dark btn-lg",children:"Ver misiones"})})}),Object($a.jsx)("div",{style:{backgroundImage:"url(https://cdn.discordapp.com/attachments/929069063114752053/1005492439953440910/pantalla1.gif)",width:"100%",height:"185px",borderRadius:"3px"},children:Object($a.jsx)("div",{style:{margin:0,position:"absolute",top:"78%",msTransform:"translateY(-50%)",transform:"translateY(-50%)",right:"22%"},children:Object($a.jsx)("button",{onClick:function(){return g("battlePassRewardsView")},className:"btn btn-primary btn-lg",children:"Ver recompensas"})})})]})]})}),Object($a.jsxs)("div",{id:"battlePassMissionsView",style:{display:"none",width:"900px"},children:[Object($a.jsx)("div",{className:"row",children:d.missionStats.map((function(e){return Object($a.jsx)("div",{className:"col-md-6",children:Object($a.jsx)("div",{className:"alert bg-dark text-white",children:Object($a.jsxs)("div",{style:{textAlign:"left"},children:[Object($a.jsxs)("span",{className:"badge bg-info",style:{fontSize:"15px"},children:[Object($a.jsx)("img",{src:"https://4.bp.blogspot.com/-kNQ9Y7U9aq0/WV-zzHKsrLI/AAAAAAAA6uo/_C21AzCd9uQ9utBtdT5pUMsQlBiu9SAKwCKgBGAs/s1600/ed483ed9b79b282bd901da62daee7669.gif"})," Nivel ",e.id]})," \xa0",e.missionName,Object($a.jsx)("span",{style:{float:"right",marginTop:"5px"},children:e.expDone==e.expMax?Object($a.jsxs)("span",{className:"badge bg-success",children:[e.expDone,"/",e.expMax]}):Object($a.jsxs)("span",{className:"badge bg-danger",children:[e.expDone,"/",e.expMax]})})]})})})}))}),Object($a.jsx)("div",{className:"col-md-12",children:Object($a.jsx)("button",{onClick:function(){return g("battlePassMainView")},className:"btn w-100 btn-success",children:"Volver"})})]}),Object($a.jsxs)("div",{id:"battlePassRewardsView",style:{display:"none",width:"500px"},children:[Object($a.jsxs)("div",{className:"row g-0",children:[d.missionStats.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",style:{marginBottom:"6px"},children:Object($a.jsxs)("div",{style:{textAlign:"center",padding:"10px",backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_serpentine_darkblue.gif)",borderRadius:"3px",marginRight:"6px"},children:[Object($a.jsx)("img",{src:e.imageReward}),Object($a.jsxs)("span",{className:"badge bg-primary",style:{fontSize:"14px"},children:["Nivel ",e.id]}),Object($a.jsx)("br",{}),e.expDone==e.expMax?Object($a.jsx)("span",{className:"badge bg-success",children:"Conseguido"}):Object($a.jsx)("span",{className:"badge bg-danger",children:"Por conseguir"})]})})})),Object($a.jsx)("div",{className:"col-md-3",style:{marginBottom:"6px"},children:Object($a.jsxs)("div",{style:{textAlign:"center",padding:"10px",backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_serpntine_darkred.gif)",borderRadius:"3px",marginRight:"6px"},children:[Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/882679902162288651/1007401963345936395/final-1.png"}),Object($a.jsx)("span",{className:"badge bg-info",style:{fontSize:"14px"},children:"Final"}),Object($a.jsx)("br",{}),Object($a.jsx)("span",{className:"badge bg-danger",children:"Por conseguir"})]})}),Object($a.jsx)("div",{className:"col-md-3",style:{marginBottom:"6px"},children:Object($a.jsxs)("div",{style:{textAlign:"center",padding:"10px",backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_serpntine_darkred.gif)",borderRadius:"3px",marginRight:"6px"},children:[Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/882679902162288651/1007401963849261106/final-2.png"}),Object($a.jsx)("span",{className:"badge bg-info",style:{fontSize:"14px"},children:"Final"}),Object($a.jsx)("br",{}),Object($a.jsx)("span",{className:"badge bg-danger",children:"Por conseguir"})]})})]}),Object($a.jsx)("div",{className:"col-md-12",children:Object($a.jsx)("button",{onClick:function(){return g("battlePassMainView")},className:"btn w-100 btn-success",children:"Volver"})})]})]})})]})})},Bs=function(e){var t=new URLSearchParams(window.location.search).get("sso"),n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)("0"),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)("0"),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)("0"),g=Object(o.a)(f,2),m=g[0],v=g[1];return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void i(!0);case"hide":return void i(!1)}},eventUrlPrefix:"bawtool/"};return R(e),function(){return B(e)}}),[i]),Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsxs)(Pc,{style:{width:"250px"},children:[Object($a.jsx)(Tc,{headerText:"Herramienta builder",onCloseClick:function(e){return i(!1)}}),Object($a.jsxs)(Ec,{children:[Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=maxFloor&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Maxfloor"}),Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=autoFloor&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Autofloor"}),Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=reloadRoom&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Reload"}),Object($a.jsxs)("div",{className:"row",style:{marginTop:"10px"},children:[Object($a.jsx)("div",{className:"col-md-4",children:Object($a.jsx)("input",{type:"number",onChange:function(e){return d(e.target.value)},placeholder:"0",className:"form-control"})}),Object($a.jsx)("div",{className:"col-md-8",children:Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=cambiarAltura&altura="+u+"&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Cambiar altura"})})]}),Object($a.jsx)("button",{className:"btn btn-sm w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=cambiarAltura&altura=999&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Restablecer altura"}),Object($a.jsxs)("div",{className:"row",style:{marginTop:"10px"},children:[Object($a.jsx)("div",{className:"col-md-4",children:Object($a.jsx)("input",{type:"number",onChange:function(e){return v(e.target.value)},placeholder:"0",className:"form-control"})}),Object($a.jsx)("div",{className:"col-md-8",children:Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=cambiarRotacion&rotacion="+m+"&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Cambiar rotaci\xf3n"})})]}),Object($a.jsxs)("div",{className:"row",children:[Object($a.jsx)("div",{className:"col-md-4",children:Object($a.jsx)("input",{type:"number",onChange:function(e){return h(e.target.value)},placeholder:"0",className:"form-control"})}),Object($a.jsx)("div",{className:"col-md-8",children:Object($a.jsx)("button",{className:"btn w-100",onClick:function(){fetch("https://int.lavvos.eu/?type=cambiarEstado&estado="+O+"&sso="+t)},style:{backgroundColor:"var(--test-galaxytwo)"},children:"Cambiar estado"})})]})]})]})})},Gs=Object(c.createContext)({cameraRoll:null,setCameraRoll:null,selectedPictureIndex:null,setSelectedPictureIndex:null}),Ws=function(e){return Object($a.jsx)(Gs.Provider,{value:e.value,children:e.children})},Vs=Object(d.a)((function e(t,n){Object(u.a)(this,e),this.texture=t,this.imageUrl=n})),qs=function(e){var t=e.onClose,n=void 0===t?null:t,r=e.onEdit,a=void 0===r?null:r,i=e.onDelete,s=void 0===i?null:i,o=Object(c.useContext)(Gs),u=o.cameraRoll,d=void 0===u?null:u,j=o.setCameraRoll,b=void 0===j?null:j,O=o.selectedPictureIndex,h=void 0===O?-1:O,f=o.setSelectedPictureIndex,g=void 0===f?null:f,m=Object(c.useRef)(),v=h>-1?d[h]:null,p=Object(c.useCallback)((function(){if(!m||!m.current)return null;var e=m.current.getBoundingClientRect();return new l.Te(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),x=Object(c.useCallback)((function(){if(h>-1)g(-1);else{var e=G().createTextureFromRoom(ue().roomId,1,p()),t=Object(ut.a)(d);t.length>=5&&(Ha.simpleAlert(st("camera.full.body")),t.pop()),wn(dr.CAMERA_SHUTTER),t.push(new Vs(e,l.Mh.generateImageUrl(e))),b(t)}}),[d,h,p,b,g]);return Object($a.jsx)(Dc,{uniqueKey:"nitro-camera-capture",children:Object($a.jsxs)(Jc,{center:!0,className:"nitro-camera-capture",gap:0,children:[v&&Object($a.jsx)("img",{alt:"",className:"camera-area",src:v.imageUrl}),Object($a.jsxs)("div",{className:"camera-canvas drag-handler",children:[Object($a.jsx)("div",{className:"position-absolute header-close",onClick:n,children:Object($a.jsx)(mc.a,{icon:"times"})}),!v&&Object($a.jsx)("div",{ref:m,className:"camera-area camera-view-finder"}),v&&Object($a.jsx)("div",{className:"camera-area camera-frame",children:Object($a.jsxs)("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[Object($a.jsx)("button",{className:"btn btn-success me-3",title:st("camera.editor.button.tooltip"),onClick:a,children:st("camera.editor.button.text")}),Object($a.jsx)("button",{className:"btn btn-danger",onClick:s,children:st("camera.delete.button.text")})]})}),Object($a.jsx)("div",{className:"d-flex justify-content-center",children:Object($a.jsx)("div",{className:"camera-button",title:st("camera.take.photo.button.tooltip"),onClick:x})})]}),d.length>0&&Object($a.jsx)(lc,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:d.map((function(e,t){return Object($a.jsx)("img",{alt:"",src:e.imageUrl,onClick:function(e){return g(t)}},t)}))})]})})},Ys=function(e){var t=e.base64Url,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=e.onCancelClick,s=void 0===i?null:i,u=e.price,d=void 0===u?null:u,j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(0),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(!1),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(!1),N=Object(o.a)(S,2),R=N[0],k=N[1],A=Object(c.useState)(0),w=Object(o.a)(A,2),D=w[0],P=w[1],M=Object(c.useMemo)((function(){return L("camera.publish.disabled",!1)}),[]),F=Object(c.useCallback)((function(e){E((function(e){return e+1})),k(!1)}),[]);dt(l.M,F);var H=Object(c.useCallback)((function(e){var t=e.getParser();v(t.extraDataId),P(t.secondsToWait),T(t.ok),k(!1)}),[]);dt(l.L,H);var B=Object(c.useCallback)((function(e){var t=e.getParser();h(L("camera.url")+"/"+t.url)}),[]);dt(l.N,B);var W=function(e){switch(e){case"close":return void a();case"buy":if(R)return;return k(!0),void ea(new l.Af(""));case"publish":if(R)return;return k(!0),void ea(new l.uf);case"cancel":return void s()}};return Object(c.useEffect)((function(){n&&G().saveBase64AsScreenshot(n)}),[n]),d?Object($a.jsxs)(Pc,{className:"nitro-camera-checkout",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("camera.confirm_phase.title"),onCloseClick:function(e){return W("close")}}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(lc,{center:!0,children:[O&&O.length&&Object($a.jsx)(oi,{className:"picture-preview border",imageUrl:O}),(!O||!O.length)&&Object($a.jsx)(lc,{center:!0,className:"picture-preview border",children:Object($a.jsx)(Hi,{bold:!0,children:st("camera.loading")})})]}),Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object($a.jsxs)(Jc,{size:M?10:6,gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("camera.purchase.header")}),(d.credits>0||d.duckets>0)&&Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{children:st("catalog.purchase.confirmation.dialog.cost")}),d.credits>0&&Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:d.credits}),Object($a.jsx)(Vc,{type:-1})]}),d.duckets>0&&Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:d.duckets}),Object($a.jsx)(Vc,{type:5})]})]}),_>0&&Object($a.jsxs)(Hi,{children:[Object($a.jsx)(Hi,{bold:!0,children:st("camera.purchase.count.info")})," ",_,Object($a.jsx)("u",{className:"ms-1 cursor-pointer",onClick:function(){return U("inventory/toggle")},children:st("camera.open.inventory")})]})]}),Object($a.jsx)(lc,{alignItems:"center",children:Object($a.jsx)(dc,{variant:"success",disabled:R,onClick:function(e){return W("buy")},children:st(_?"camera.buy.another.button.text":"buy")})})]}),!M&&Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st(C?"camera.publish.successful":"camera.publish.explanation")}),Object($a.jsx)(Hi,{children:st(C?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),C&&Object($a.jsx)("a",{href:m,rel:"noreferrer",target:"_blank",children:st("camera.link.to.published")}),!C&&d.publishDucketPrice>0&&Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{children:st("catalog.purchase.confirmation.dialog.cost")}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:d.publishDucketPrice}),Object($a.jsx)(Vc,{type:5})]})]}),D>0&&Object($a.jsx)("div",{className:"mt-1 text-center fw-bold",children:st("camera.publish.wait",["minutes"],[Math.ceil(D/60).toString()])})]}),!C&&Object($a.jsx)(lc,{className:"d-flex align-items-end",children:Object($a.jsx)(dc,{variant:"success",disabled:R||D>0,onClick:function(e){return W("publish")},children:st("camera.publish.button.text")})})]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,children:st("camera.warning.disclaimer")}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(dc,{onClick:function(e){return W("cancel")},children:st("generic.cancel")})})]})]}):null},zs=n(31),Ks=Object(d.a)((function e(){Object(u.a)(this,e)}));Ks.COLORMATRIX="colormatrix",Ks.COMPOSITE="composite";var Qs=Object(d.a)((function e(t,n){Object(u.a)(this,e),this.effectName=t,this.thumbnailUrl=n})),Xs=function(e){var t=e.effect,n=void 0===t?null:t,r=e.thumbnailUrl,a=void 0===r?null:r,c=e.isActive,i=void 0!==c&&c,s=e.isLocked,o=void 0!==s&&s,l=e.selectEffect,u=void 0===l?null:l,d=e.removeEffect,j=void 0===d?null:d;return Object($a.jsxs)(ii,{title:st(o?"camera.effect.required.level ".concat(n.minLevel):"camera.effect.name.".concat(n.name)),itemActive:i,onClick:function(e){return!i&&u()},children:[i&&Object($a.jsx)(dc,{variant:"danger",className:"rounded-circle remove-effect",onClick:j,children:Object($a.jsx)(mc.a,{icon:"times"})}),!o&&a&&a.length>0&&Object($a.jsx)("div",{className:"effect-thumbnail-image border",children:Object($a.jsx)("img",{alt:"",src:a})}),o&&Object($a.jsxs)(Hi,{center:!0,bold:!0,children:[Object($a.jsx)("div",{children:Object($a.jsx)(mc.a,{icon:"lock"})}),n.minLevel]})]})},Js=function(e){var t=e.myLevel,n=void 0===t?0:t,r=e.selectedEffects,a=void 0===r?[]:r,c=e.effects,i=void 0===c?[]:c,s=e.thumbnails,o=void 0===s?[]:s,l=e.processAction,u=void 0===l?null:l;return Object($a.jsx)(cc,{columnCount:3,overflow:"auto",children:i&&i.length>0&&i.map((function(e,t){var r=o.find((function(t){return t.effectName===e.name})),c=a.findIndex((function(t){return t.effect.name===e.name}))>-1;return Object($a.jsx)(Xs,{effect:e,thumbnailUrl:r&&r.thumbnailUrl||null,isActive:c,isLocked:e.minLevel>n,selectEffect:function(){return u("select_effect",e.name)},removeEffect:function(){return u("remove_effect",e.name)}},t)}))})},Zs=[Ks.COLORMATRIX,Ks.COMPOSITE],$s=function(e){var t=e.picture,n=void 0===t?null:t,r=e.availableEffects,a=void 0===r?null:r,i=e.myLevel,u=void 0===i?1:i,d=e.onClose,j=void 0===d?null:d,b=e.onCancel,O=void 0===b?null:b,h=e.onCheckout,f=void 0===h?null:h,g=Object(c.useState)(Zs[0]),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(null),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useState)([]),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)([]),R=Object(o.a)(N,2),k=R[0],A=R[1],w=Object(c.useState)(!1),U=Object(o.a)(w,2),P=U[0],L=U[1],M=Object(c.useMemo)((function(){return a.filter((function(e){return e.colorMatrix}))}),[a]),F=Object(c.useMemo)((function(){return a.filter((function(e){return e.texture}))}),[a]),H=Object(c.useCallback)((function(){return v===Ks.COLORMATRIX?M:F}),[v,M,F]),B=Object(c.useCallback)((function(e){return e&&e.length&&T&&T.length?T.findIndex((function(t){return t.effect.name===e})):-1}),[T]),G=Object(c.useMemo)((function(){return B(E)}),[E,B]),W=Object(c.useMemo)((function(){return E&&T[G]||null}),[E,G,T]),V=Object(c.useCallback)((function(e){var t=G;-1!==t&&S((function(n){var r=Object(ut.a)(n),a=r[t];return r[G]=new l.Uf(a.effect,e),r}))}),[G,S]),q=Object(c.useMemo)((function(){return D().applyEffects(n.texture,T,P).src}),[n,T,P]),Y=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void j();case"cancel":return void O();case"checkout":return void f(q);case"change_tab":return void p(String(t));case"select_effect":var n=B(t);if(n>=0)return;var r=a.find((function(e){return e.name===t}));if(!r)return;return S((function(e){return[].concat(Object(ut.a)(e),[new l.Uf(r,1)])})),void I(r.name);case"remove_effect":var c=B(t);if(-1===c)return;return S((function(e){var t=Object(ut.a)(e);return t.splice(c,1),t})),void(E===t&&I(null));case"clear_effects":return I(null),void S([]);case"download":var i=new Image;i.src=q;var s=window.open("");return void s.document.write(i.outerHTML);case"zoom":return void L(!P)}}),[P,a,E,q,B,O,f,j,L,S]);return Object(c.useEffect)((function(){var e,t=[],r=Object(s.a)(a);try{for(r.s();!(e=r.n()).done;){var c=e.value;t.push(new Qs(c.name,D().applyEffects(n.texture,[new l.Uf(c,1)],!1).src))}}catch(i){r.e(i)}finally{r.f()}A(t)}),[n,a]),Object($a.jsxs)(Pc,{className:"nitro-camera-editor",children:[Object($a.jsx)(Tc,{headerText:st("camera.editor.button.text"),onCloseClick:function(e){return Y("close")}}),Object($a.jsx)(Di,{children:Zs.map((function(e){return Object($a.jsx)(Ai,{isActive:v===e,onClick:function(t){return Y("change_tab",e)},children:Object($a.jsx)("i",{className:"icon icon-camera-"+e})},e)}))}),Object($a.jsx)(Ec,{children:Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:5,overflow:"hidden",children:Object($a.jsx)(Js,{myLevel:u,selectedEffects:T,effects:H(),thumbnails:k,processAction:Y})}),Object($a.jsxs)(Jc,{size:7,justifyContent:"between",overflow:"hidden",children:[Object($a.jsxs)(Jc,{center:!0,children:[Object($a.jsx)(oi,{imageUrl:q,className:"picture-preview"}),E&&Object($a.jsxs)(Jc,{center:!0,fullWidth:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("camera.effect.name."+E)}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:1,step:.01,value:W.alpha,onChange:function(e){return V(e)},renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:t.valueNow}))}})]})]}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{onClick:function(e){return Y("clear_effects")},children:Object($a.jsx)(mc.a,{icon:"trash"})}),Object($a.jsx)(dc,{onClick:function(e){return Y("download")},children:Object($a.jsx)(mc.a,{icon:"save"})}),Object($a.jsx)(dc,{onClick:function(e){return Y("zoom")},children:Object($a.jsx)(mc.a,{icon:P?"search-minus":"search-plus"})})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{onClick:function(e){return Y("cancel")},children:st("generic.cancel")}),Object($a.jsx)(dc,{onClick:function(e){return Y("checkout")},children:st("camera.preview.button.text")})]})]})]})]})})]})},eo=function(e){var t,n,r=Object(c.useState)(0),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useState)([]),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)([]),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(-1),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(10),E=Object(o.a)(_,2),I=E[0],y=(E[1],Object(c.useState)(null)),C=Object(o.a)(y,2),T=C[0],S=C[1],k=Object(c.useState)(null),A=Object(o.a)(k,2),w=A[0],U=A[1],P=Object(c.useCallback)((function(e){b(Array.from(D().effects.values()))}),[]);t=l.Tf.INITIALIZED,n=P,Ht(t,N().cameraManager.events,n);var L=Object(c.useCallback)((function(e){var t=e.getParser();U({credits:t.creditPrice,duckets:t.ducketPrice,publishDucketPrice:t.publishDucketPrice})}),[]);dt(l.Jd,L);var M=Object(c.useCallback)((function(e){s(0)}),[]);Yt(l.Sg.ENDED,M),Object(c.useEffect)((function(){if(!D().isLoaded)return D().init(),void ea(new l.Nf)}),[]);var F=Object(c.useCallback)((function(e){switch(e){case"close":return void s(0);case"edit":return void s(2);case"delete":return void g((function(e){var t=Object(ut.a)(e);return t.splice(p,1),t}));case"editor_cancel":return void s(1)}}),[p]),H=Object(c.useCallback)((function(e){S(e),s(3)}),[]),G=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void s(1);case"hide":return void s(0);case"toggle":return void s((function(e){return e?0:1}))}}),[]);return Object(c.useEffect)((function(){var e={linkReceived:G,eventUrlPrefix:"camera/"};return R(e),function(){return B(e)}}),[G]),0===i?null:Object($a.jsxs)(Ws,{value:{cameraRoll:f,setCameraRoll:g,selectedPictureIndex:p,setSelectedPictureIndex:x},children:[1===i&&Object($a.jsx)(qs,{onClose:function(){return F("close")},onEdit:function(){return F("edit")},onDelete:function(){return F("delete")}}),2===i&&Object($a.jsx)($s,{picture:f[p],myLevel:I,onClose:function(){return F("close")},onCancel:function(){return F("editor_cancel")},onCheckout:H,availableEffects:j}),3===i&&Object($a.jsx)(Ys,{base64Url:T,onCloseClick:function(){return F("close")},onCancelClick:function(){return F("editor_cancel")},price:w})]})},to=function(e){var t=e.itemId,n=void 0===t?-1:t,r=e.state,a=void 0===r?null:r,c=e.product,i=void 0===c?null:c,s=e.active,o=void 0!==s&&s,l=e.onClick,u=void 0===l?null:l;return Object($a.jsxs)(Jc,{fit:!0,center:!0,pointer:!0,className:"campaign-spritesheet campaign-day-generic-bg rounded calendar-item ".concat(o?"active":""),onClick:function(){return u(n)},children:[a===x.STATE_UNLOCKED&&Object($a.jsx)(lc,{center:!0,className:"campaign-spritesheet unlocked-bg",children:Object($a.jsx)(lc,{center:!0,className:"campaign-spritesheet campaign-opened",children:i&&Object($a.jsx)(oi,{imageUrl:i.customImage?L("image.library.url")+i.customImage:function(e){var t=ae().getFloorItemDataByName(e),n=null;return t?n=G().getFurnitureFloorIconUrl(t.id):(t=ae().getWallItemDataByName(e))&&(n=G().getFurnitureWallIconUrl(t.id)),n}(i.productName)})})}),a!==x.STATE_UNLOCKED&&Object($a.jsxs)(lc,{center:!0,className:"campaign-spritesheet locked-bg",children:[a===x.STATE_LOCKED_AVAILABLE&&Object($a.jsx)(tc,{className:"campaign-spritesheet available"}),(a===x.STATE_LOCKED_EXPIRED||a===x.STATE_LOCKED_FUTURE)&&Object($a.jsx)(tc,{className:"campaign-spritesheet unavailable"})]})]})},no=function(e){var t=e.close,n=void 0===t?null:t,r=e.campaignName,a=void 0===r?null:r,i=e.currentDay,s=void 0===i?null:i,l=e.numDays,u=void 0===l?null:l,d=e.missedDays,j=void 0===d?null:d,b=e.openedDays,O=void 0===b?null:b,h=e.openPackage,f=void 0===h?null:h,g=e.receivedProducts,m=void 0===g?null:g,v=Object(c.useState)(s),p=Object(o.a)(v,2),_=p[0],E=p[1],I=Object(c.useState)(Math.max(0,_-1)),y=Object(o.a)(I,2),C=y[0],T=y[1],S=function(e){return O.includes(e)?x.STATE_UNLOCKED:e>s?x.STATE_LOCKED_FUTURE:j.includes(e)?x.STATE_LOCKED_EXPIRED:x.STATE_LOCKED_AVAILABLE},N=function(e){_!==e?E(e):S(e)===x.STATE_LOCKED_AVAILABLE&&f(e,!1)};return Object($a.jsxs)(Pc,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("campaign.calendar.".concat(a,".title")),onCloseClick:n}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(cc,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[Object($a.jsx)(Jc,{size:1}),Object($a.jsx)(Jc,{size:10,children:Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{fontSize:3,children:st("campaign.calendar.heading.day",["number"],[(_+1).toString()])}),Object($a.jsx)(Hi,{children:function(e){switch(S(e)){case x.STATE_UNLOCKED:return st("campaign.calendar.info.unlocked");case x.STATE_LOCKED_FUTURE:return st("campaign.calendar.info.future");case x.STATE_LOCKED_EXPIRED:return st("campaign.calendar.info.expired");default:return st("campaign.calendar.info.available.desktop")}}(_)})]}),Object($a.jsx)("div",{children:ae().isModerator&&Object($a.jsx)(dc,{variant:"danger",onClick:function(){var e=_;S(e)!==x.STATE_UNLOCKED&&f(e,!0)},children:"Force open"})})]})}),Object($a.jsx)(Jc,{size:1})]}),Object($a.jsxs)(lc,{fullHeight:!0,gap:2,children:[Object($a.jsx)(lc,{center:!0,children:Object($a.jsx)(tc,{pointer:!0,className:"campaign-spritesheet prev",onClick:function(){var e=_-1;e<0||(E(e),C>e&&T(C-1))}})}),Object($a.jsx)(Jc,{center:!0,fullWidth:!0,children:Object($a.jsx)(cc,{fit:!0,columnCount:5,gap:1,children:Object(ut.a)(Array(5)).map((function(e,t){var n=C+t;return Object($a.jsx)(Jc,{overflow:"hidden",children:Object($a.jsx)(to,{itemId:n,state:S(n),active:_===n,product:m.has(n)?m.get(n):null,onClick:N})},t)}))})}),Object($a.jsx)(lc,{center:!0,children:Object($a.jsx)(tc,{pointer:!0,className:"campaign-spritesheet next",onClick:function(){var e=_+1;e!==u&&(E(e),C+5<e+1&&T(C+1))}})})]})]})]})},ro=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(new Map),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(!1),g=Object(o.a)(f,2),m=g[0],v=g[1],x=Object(c.useCallback)((function(e){var t=e.getParser();t&&a(t.calendarData)}),[]);dt(l.O,x);var _=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=u;t.doorOpened&&(a((function(e){var t=e.clone();return t.openedDays.push(u),t})),h((function(e){var r=new Map(e);return r.set(n,new p(t.productName,t.customImage,t.furnitureClassName)),r}))),d(-1)}}),[u]);dt(l.P,_);var E=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r&&(d(e),ea(t?new l.cf(r.campaignName,e):new l.df(r.campaignName,e)))}),[r]),I=Object(c.useCallback)((function(){v(!1)}),[]),y=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2)&&"calendar"===t[1])v(!0)}),[]);return Object(c.useEffect)((function(){var e={linkReceived:y,eventUrlPrefix:"openView/"};return R(e),function(){B(e)}}),[y]),Object($a.jsx)($a.Fragment,{children:r&&m&&Object($a.jsx)(no,{close:I,campaignName:r.campaignName,currentDay:r.currentDay,numDays:r.campaignDays,openedDays:r.openedDays,missedDays:r.missedDays,openPackage:E,receivedProducts:O})})},ao=function(e){var t=new URLSearchParams(window.location.search).get("sso"),n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)("none"),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)("none"),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)("none"),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)("none"),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)("1"),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)("1"),N=Object(o.a)(S,2),k=N[0],A=N[1],w=Object(c.useState)("1"),D=Object(o.a)(w,2),U=D[0],P=D[1],L=Object(c.useState)("1"),M=Object(o.a)(L,2),F=M[0],H=M[1],G=Object(c.useState)("1"),W=Object(o.a)(G,2),V=W[0],q=W[1],Y=Object(c.useState)("1"),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=Object(c.useState)("1"),J=Object(o.a)(X,2),Z=J[0],$=J[1],ee=Object(c.useState)("1"),te=Object(o.a)(ee,2),ne=te[0],re=te[1];return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"rouletteColor":return v("block"),E("none"),d("none"),h("none"),void i(!0);case"rouletteFloor":return v("none"),E("none"),d("none"),h("block"),void i(!0);case"dice":return v("none"),E("none"),d("block"),h("none"),void i(!0);case"vendingMachine":return v("none"),E("block"),d("none"),h("none"),void i(!0);case"hide":return void i(!1)}},eventUrlPrefix:"casino/"};return R(e),function(){return B(e)}}),[i]),Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsxs)(Pc,{style:{width:"350px"},children:[Object($a.jsx)(Tc,{headerText:"Apostar",onCloseClick:function(e){return i(!1)}}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)("div",{id:"diceView",style:{display:u},children:[Object($a.jsx)("div",{className:"alert alert-primary text-center",children:Object($a.jsx)("b",{children:"Selecciona un n\xfamero del 1 al 6. Si el dado saca el mismo n\xfamero, ganas x2."})}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Selecciona un n\xfamero entre 1 y 6"}),Object($a.jsx)("input",{onChange:function(e){return T(e.target.value)},className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Moneda a apostar:"}),Object($a.jsxs)("select",{value:k,onChange:function(e){return A(e.target.value)},className:"form-control",children:[Object($a.jsx)("option",{value:"1",children:"Cr\xe9ditos"}),Object($a.jsx)("option",{value:"3",children:"Cometas"}),Object($a.jsx)("option",{value:"2",children:"Asteroides"})]}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Cantidad a apostar:"}),Object($a.jsx)("input",{onChange:function(e){return P(e.target.value)},className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(){return fetch("https://int.lavvos.eu/?type=betDadosCasino&quantity="+U+"&coin="+k+"&number="+C+"&sso="+t),void i(!1)},className:"btn btn-success w-100",children:"Apostar"})]}),Object($a.jsxs)("div",{id:"rouletteColorsView",style:{display:m},children:[Object($a.jsx)("div",{className:"alert alert-primary text-center",children:Object($a.jsxs)("b",{children:["Depende del color, ganas o pierdes.",Object($a.jsx)("br",{}),"Verde: x5",Object($a.jsx)("br",{}),"Morado: x2"]})}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Moneda a apostar:"}),Object($a.jsxs)("select",{value:Z,onChange:function(e){return $(e.target.value)},className:"form-control",children:[Object($a.jsx)("option",{value:"1",children:"Cr\xe9ditos"}),Object($a.jsx)("option",{value:"3",children:"Cometas"}),Object($a.jsx)("option",{value:"2",children:"Asteroides"})]}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Cantidad a apostar:"}),Object($a.jsx)("input",{onChange:function(e){return re(e.target.value)},className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(){return fetch("https://int.lavvos.eu/?type=betRuletaPared&quantity="+ne+"&coin="+Z+"&sso="+t),void i(!1)},className:"btn btn-success w-100",children:"Apostar"})]}),Object($a.jsxs)("div",{id:"rouletteFloorView",style:{display:O},children:[Object($a.jsx)("div",{className:"alert alert-primary text-center",children:Object($a.jsx)("b",{children:"Selecciona un n\xfamero. Si el n\xfamero es par y toca par, ganar\xe1s un x1.5. Si toca el mismo n\xfamero, ganar\xe1s un x5. Si seleccionas 0 y sale 0 ganar\xe1s un x10."})}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Selecciona un n\xfamero entre 0 y 32"}),Object($a.jsx)("input",{onChange:function(e){return H(e.target.value)},className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Moneda a apostar:"}),Object($a.jsxs)("select",{value:V,onChange:function(e){return q(e.target.value)},className:"form-control",children:[Object($a.jsx)("option",{value:"1",children:"Cr\xe9ditos"}),Object($a.jsx)("option",{value:"3",children:"Cometas"}),Object($a.jsx)("option",{value:"2",children:"Asteroides"})]}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Cantidad a apostar:"}),Object($a.jsx)("input",{onChange:function(e){return Q(e.target.value)},className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(){return fetch("https://int.lavvos.eu/?type=betRuletaSuelo&quantity="+K+"&coin="+V+"&number="+F+"&sso="+t),void i(!1)},className:"btn btn-success w-100",children:"Apostar"})]}),Object($a.jsxs)("div",{id:"vendingMachineView",style:{display:_},children:[Object($a.jsx)("div",{className:"alert alert-primary text-center",children:Object($a.jsx)("b",{children:"Si la tragaperras te da premio, ganas x2."})}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Moneda a apostar:"}),Object($a.jsxs)("select",{className:"form-control",children:[Object($a.jsx)("option",{children:"Cr\xe9ditos"}),Object($a.jsx)("option",{children:"Cometas"}),Object($a.jsx)("option",{children:"Asteroides"})]}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Cantidad a apostar:"}),Object($a.jsx)("input",{className:"form-control",type:"number",placeholder:"0"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{className:"btn btn-success w-100",children:"Apostar"})]})]})]})})},co=n(32),io=n.n(co),so=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(0),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(""),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(""),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useState)(!0),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)(""),R=Object(o.a)(N,2),k=R[0],A=R[1],w=Object(c.useState)([]),D=Object(o.a)(w,2),U=D[0],P=D[1],L=Object(c.useState)(0),M=Object(o.a)(L,2),F=M[0],H=M[1],B=Object(c.useState)(0),G=Object(o.a)(B,2),W=G[0],V=G[1],q=Object(c.useState)(0),Y=Object(o.a)(q,2),z=Y[0],K=Y[1],Q=Object(c.useState)(0),X=Object(o.a)(Q,2),J=X[0],Z=X[1],$=Object(c.useState)(0),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],re=Object(c.useState)(!1),ce=Object(o.a)(re,2),ie=ce[0],se=ce[1],oe=nn().catalogOptions,le=(void 0===oe?null:oe).giftConfiguration,ue=void 0===le?null:le,de=Object(c.useCallback)((function(){a(!1),j(0),f(0),p(""),I(""),S(!0),A(""),H(0),V(0),U.length&&K(U[0].id)}),[U]),je=Object(c.useCallback)((function(e){switch(e.type){case mt.PURCHASE_SUCCESS:return void de();case ht.INIT_GIFT:var t=e;return de(),j(t.pageId),f(t.offerId),p(t.extraData),void a(!0)}}),[de]);Qt(mt.PURCHASE_SUCCESS,je),Qt(ht.INIT_GIFT,je);var be=Object(c.useMemo)((function(){return!ue||ue.defaultStuffTypes.findIndex((function(e){return e===ue.boxTypes[F]}))>-1}),[ue,F]),Oe=Object(c.useMemo)((function(){return ue?(1e3*ue.boxTypes[F]+ue.ribbonTypes[W]).toString():""}),[ue,F,W]),he=Object(c.useMemo)((function(){if(!ue)return!1;var e=ue.boxTypes[F];return!(8===e||e>=3&&e<=6)}),[ue,F]),fe=Object(c.useCallback)((function(e){switch(e){case"prev_box":return void H((function(e){return 0===e?J:e-1}));case"next_box":return void H((function(e){return e===J?0:e+1}));case"prev_ribbon":return void V((function(e){return 0===e?te:e-1}));case"next_ribbon":return void V((function(e){return e===te?0:e+1}));case"buy":return E&&0!==E.length?void ea(new l.wf(d,h,v,E,k,z,F,W,T)):void se(!0)}}),[v,J,te,k,h,d,E,F,z,W,T]),ge=Object(c.useCallback)((function(){se(!0)}),[]);if(dt(l.zc,ge),Object(c.useEffect)((function(){se(!1)}),[E]),Object(c.useEffect)((function(){if(ue){var e,t=[],n=Object(s.a)(ue.stuffTypes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=ae().getFloorItemData(r);a&&(a.colors&&a.colors.length>0&&t.push({id:r,color:"#".concat(a.colors[0].toString(16))}))}}catch(c){n.e(c)}finally{n.f()}Z(ue.boxTypes.length-1),ne(ue.ribbonTypes.length-1),t.length&&(K(t[0].id),P(t))}}),[ue]),!ue||!ue.isEnabled||!r)return null;var me="catalog.gift_wrapping_new.box."+(be?"default":F),ve="catalog.gift_wrapping_new.ribbon.".concat(W),pe="catalog.gift_wrapping_new."+(be?"freeprice":"price");return Object($a.jsxs)(Pc,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("catalog.gift_wrapping.title"),onCloseClick:de}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsxs)(Pi,{column:!0,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("catalog.gift_wrapping.receiver")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm"+io()({" is-invalid":ie}),value:E,onChange:function(e){return I(e.target.value)}}),ie&&Object($a.jsx)(tc,{className:"invalid-feedback",children:st("catalog.gift_wrapping.receiver_not_found.title")})]}),Object($a.jsx)(Qc,{figure:ae().figure,userName:ae().userName,message:k,editable:!0,onChange:function(e){return A(e)}}),Object($a.jsxs)(tc,{className:"form-check",children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:T,onChange:function(e){return S((function(e){return!e}))}}),Object($a.jsx)("label",{style:{color:"var(--test-galaxytext)"},className:"form-check-label",children:st("catalog.gift_wrapping.show_face.title")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[z&&Object($a.jsx)(tc,{className:"gift-preview",children:Object($a.jsx)(Kc,{productType:aa.FLOOR,productClassId:z,extraData:Oe})}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{variant:"primary",onClick:function(){return fe("prev_box")},children:Object($a.jsx)(mc.a,{icon:"chevron-left"})}),Object($a.jsx)(dc,{variant:"primary",onClick:function(){return fe("next_box")},children:Object($a.jsx)(mc.a,{icon:"chevron-right"})})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontWeight:"bold",children:st(me)}),Object($a.jsxs)(lc,{style:{color:"var(--test-galaxytext)"},alignItems:"center",gap:1,children:[st(pe,["price"],[ue.price.toString()]),Object($a.jsx)(Vc,{type:-1})]})]})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{variant:"primary",onClick:function(){return fe("prev_ribbon")},children:Object($a.jsx)(mc.a,{icon:"chevron-left"})}),Object($a.jsx)(dc,{variant:"primary",onClick:function(){return fe("next_ribbon")},children:Object($a.jsx)(mc.a,{icon:"chevron-right"})})]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontWeight:"bold",children:st(ve)})]})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontWeight:"bold",children:st("catalog.gift_wrapping.pick_color")}),Object($a.jsx)(bc,{fullWidth:!0,children:U.map((function(e){return Object($a.jsx)(dc,{variant:"dark",active:e.id===z,disabled:!he,style:{backgroundColor:e.color},onClick:function(){return K(e.id)}},e.id)}))})]}),Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[Object($a.jsx)(dc,{variant:"link",onClick:de,style:{color:"var(--test-galaxytext)"},children:st("cancel")}),Object($a.jsx)(dc,{variant:"success",onClick:function(){return fe("buy")},children:st("catalog.gift_wrapping.give_gift")})]})]})]})},oo=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),u=l[0],d=l[1],j=nn(),b=j.currentType,O=void 0===b?null:b,h=j.rootNode,f=void 0===h?null:h,g=j.offersToNodes,m=void 0===g?null:g,v=j.searchResult,p=void 0===v?null:v,x=j.setSearchResult,_=void 0===x?null:x,E=j.setCurrentPage,y=void 0===E?null:E,C=function(e){e&&e.length?(a(e),d(!0)):(a(""),p&&_(null))},T=Object(c.useCallback)((function(e){if(d(!1),(e=e.toLocaleLowerCase().replace(" ",""))&&e.length){var t=ae().getAllFurnitureData({loadFurnitureData:null});if(t&&t.length){var n,r=[],a=[],c=Object(s.a)(t);try{for(c.s();!(n=c.n()).done;){var i=n.value;if((O!==S.BUILDER||i.availableForBuildersClub)&&(O!==S.NORMAL||!i.excludeDynamic)){var o=[i.className,i.name,i.description].join(" ").replace(/ /gi,"").toLowerCase();if(O===S.BUILDER&&-1===i.purchaseOfferId&&-1===i.rentOfferId)""!==i.furniLine&&a.indexOf(i.furniLine)<0&&o.indexOf(e)>=0&&a.push(i.furniLine);else if([].concat(Object(ut.a)(na(m,i.purchaseOfferId)),Object(ut.a)(na(m,i.rentOfferId))).length&&(o.indexOf(e)>=0&&r.push(i),250===r.length))break}}}catch(g){c.e(g)}finally{c.f()}for(var l=[],u=0,j=r;u<j.length;u++){var b=j[u];l.push(new sa(b))}var h=[];ra(e,a,f,h),y(new I(-1,"default_3x3",new la([],[]),l,!1,1)),_(new ja(e,l,h.filter((function(e){return e.isVisible}))))}}}),[m,O,f,y,_]);return Object(c.useEffect)((function(){if(u){var e=setTimeout((function(){return T(r)}),300);return function(){return clearTimeout(e)}}}),[r,u,T]),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(lc,{fullWidth:!0,alignItems:"center",position:"relative",children:Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("generic.search"),value:r,onChange:function(e){return C(e.target.value)},onKeyDown:function(e){return("Enter"===e.code||"NumpadEnter"===e.code)&&T(r)}})}),(!r||!r.length)&&Object($a.jsx)(dc,{variant:"primary",className:"catalog-search-button",children:Object($a.jsx)(mc.a,{icon:"search"})}),r&&!!r.length&&Object($a.jsx)(dc,{variant:"primary",className:"catalog-search-button",onClick:function(e){return C("")},children:Object($a.jsx)(mc.a,{icon:"times"})})]})},lo=function(e){var t=e.icon,n=void 0===t?0:t,r=Object(c.useMemo)((function(){return L("catalog.asset.icon.url").replace("%name%",n.toString())}),[n]);return Object($a.jsx)(oi,{imageUrl:r,style:{width:20,height:20}})},uo=function(e){var t=e.node,n=void 0===t?null:t;return Object($a.jsx)($a.Fragment,{children:n&&n.children.length>0&&n.children.map((function(e,t){return e.isVisible?Object($a.jsx)(jo,{node:e},t):null}))})},jo=function(e){var t=e.node,n=void 0===t?null:t,r=nn().activateNode,a=void 0===r?null:r;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(ii,{gap:1,column:!1,itemActive:n.isActive,onClick:function(e){return a(n)},children:[Object($a.jsx)(lo,{icon:n.iconId}),Object($a.jsx)(Hi,{grow:!0,truncate:!0,children:n.localization}),n.isBranch&&Object($a.jsx)(mc.a,{icon:n.isOpen?"caret-up":"caret-down"})]}),n.isOpen&&n.isBranch&&Object($a.jsx)(uo,{node:n})]})},bo=function(e){var t=e.node,n=void 0===t?null:t,r=nn().searchResult,a=void 0===r?null:r;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(oo,{}),Object($a.jsx)(Jc,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:Object($a.jsxs)(sc,{gap:1,columnCount:1,children:[a&&a.filteredNodes.length>0&&a.filteredNodes.map((function(e,t){return Object($a.jsx)(jo,{node:e},t)})),!a&&Object($a.jsx)(uo,{node:n})]})})]})},Oo=["columnCount"],ho=function(e){var t=e.columnCount,n=void 0===t?5:t,r=Object(Za.a)(e,Oo),a=Object(c.useState)(!1),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=nn(),f=h.currentOffer,g=void 0===f?null:f,m=h.setPurchaseOptions,v=void 0===m?null:m,p=bn(),x=p.badgeCodes,_=void 0===x?[]:x,E=p.activate,I=void 0===E?null:E,y=p.deactivate,C=void 0===y?null:y,T=Object(c.useMemo)((function(){if(!b)return null;var e=new l.Kh;return e.setValue(["0",b,"",""]),e}),[b]);return Object(c.useEffect)((function(){g&&v((function(e){var t=Object(bt.a)({},e);return t.extraParamRequired=!0,t.extraData=T&&T.getValue(1)||null,t.previewStuffData=T,t}))}),[g,T,v]),Object(c.useEffect)((function(){if(s){var e=I();return function(){return C(e)}}}),[s,I,C]),Object(c.useEffect)((function(){return u(!0),function(){return u(!1)}}),[]),Object($a.jsx)(sc,Object(bt.a)(Object(bt.a)({columnCount:n},r),{},{children:_&&_.length>0&&_.map((function(e,t){return Object($a.jsx)(ii,{itemActive:b===e,onClick:function(t){return O(e)},children:Object($a.jsx)(Gc,{badgeCode:e})},t)}))}))},fo=function(e){var t=nn(),n=t.currentPage,r=void 0===n?null:n,a=t.setCurrentOffer,i=void 0===a?null:a;return Object(c.useEffect)((function(){r&&r.offers.length&&i(r.offers[0])}),[r,i]),null},go=["offer","selectOffer","itemActive"],mo=function(e){var t=e.offer,n=void 0===t?null:t,r=e.selectOffer,a=void 0===r?null:r,i=e.itemActive,s=void 0!==i&&i,u=Object(Za.a)(e,go),d=Object(c.useState)(!1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=nn().requestOfferToMover,f=void 0===h?null:h,g=mn().isVisible,m=void 0!==g&&g,v=Object(c.useMemo)((function(){return n.pricingModel===ia.PRICING_MODEL_BUNDLE?null:n.product.getIconUrl(n)}),[n]),p=function(e){switch(e.type){case l.xe.MOUSE_DOWN:return a(n),void O(!0);case l.xe.MOUSE_UP:return void O(!1);case l.xe.ROLL_OUT:if(!b||!s||!m)return;return void f(n)}},x=n.product;return x?Object($a.jsx)(ii,Object(bt.a)(Object(bt.a)({itemImage:v,itemCount:n.pricingModel===ia.PRICING_MODEL_MULTI?x.productCount:1,itemUniqueSoldout:x.uniqueLimitedItemSeriesSize&&!x.uniqueLimitedItemsLeft,itemUniqueNumber:x.uniqueLimitedItemSeriesSize,itemActive:s,onMouseDown:p,onMouseUp:p,onMouseOut:p},u),{},{children:n.product.productType===aa.ROBOT&&Object($a.jsx)(Mc,{figure:n.product.extraParam,headOnly:!0,direction:3})})):null},vo=["columnCount","children"],po=function(e){var t=e.columnCount,n=void 0===t?5:t,r=e.children,a=void 0===r?null:r,c=Object(Za.a)(e,vo),i=nn(),s=i.currentOffer,o=void 0===s?null:s,l=i.setCurrentOffer,u=void 0===l?null:l,d=i.currentPage,j=void 0===d?null:d,b=i.setPurchaseOptions,O=void 0===b?null:b;if(!j)return null;var h=function(e){e.activate(),e.isLazy||(u(e),e.product&&e.product.productType===aa.WALL&&O((function(t){var n=Object(bt.a)({},t);return n.extraData=e.product.extraParam||null,n})))};return Object($a.jsxs)(sc,Object(bt.a)(Object(bt.a)({columnCount:n},c),{},{children:[j.offers&&j.offers.length>0&&j.offers.map((function(e,t){return Object($a.jsx)(mo,{itemActive:o&&o.offerId===e.offerId,offer:e,selectOffer:h},t)})),a]}))},xo=["children"],_o=function(e){var t=e.children,n=void 0===t?null:t,r=Object(Za.a)(e,xo),a=nn().currentOffer,c=void 0===a?null:a;return c&&c.pricingModel===ia.PRICING_MODEL_SINGLE&&c.product.isUniqueLimitedItem?Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({},r),{},{children:[Object($a.jsx)(ai,{className:"mx-auto",uniqueLimitedItemsLeft:c.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:c.product.uniqueLimitedItemSeriesSize}),n]})):null},Eo=function(e){var t=e.noGiftOption,n=void 0!==t&&t,r=e.purchaseCallback,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=(s[0],s[1],Object(c.useState)(T.NONE)),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Xt(ot.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),h=Object(o.a)(O,2),f=(h[0],h[1],nn()),g=f.currentOffer,m=void 0===g?null:g,v=(f.currentPage,f.purchaseOptions),p=void 0===v?null:v,x=f.setPurchaseOptions,_=void 0===x?null:x,E=Tn().getCurrencyAmount,I=void 0===E?null:E,y=Object(c.useCallback)((function(e){switch(e.type){case mt.PURCHASE_SUCCESS:return void b(T.NONE);case vt.PURCHASE_FAILED:case pt.NOT_ALLOWED:return void b(T.FAILED);case _t.SOLD_OUT:return void b(T.SOLD_OUT)}}),[]);Qt(mt.PURCHASE_SUCCESS,y),Qt(vt.PURCHASE_FAILED,y),Qt(pt.NOT_ALLOWED,y),Qt(_t.SOLD_OUT,y);var C=Object(c.useMemo)((function(){if(!m)return!1;if(p.extraParamRequired&&(!p.extraData||!p.extraData.length))return!1;if(m.pricingModel===ia.PRICING_MODEL_SINGLE){var e=m.product;if(e&&e.isUniqueLimitedItem)return!e.uniqueLimitedItemsLeft}return!1}),[m,p]),S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(m)if(ce()<m.clubLevel)U("habboUI/open/hccenter");else if(e)Kt(new ft(m.page.pageId,m.offerId,p.extraData));else if(b(T.PURCHASE),a)a();else{var t=m.page.pageId;ea(new l.xf(t,m.offerId,p.extraData,p.quantity))}};if(Object(c.useEffect)((function(){if(m)return function(){b(T.NONE),_({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})}}),[m,_]),Object(c.useEffect)((function(){var e=null;return j!==T.CONFIRM&&j!==T.FAILED||(e=setTimeout((function(){return b(T.NONE)}),3e3)),function(){e&&clearTimeout(e)}}),[j]),!m)return null;var N=function(){var e=m.priceInCredits*p.quantity,t=m.priceInActivityPoints*p.quantity;if(ce()<m.clubLevel)return Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("catalog.alert.hc.required")});if(C)return Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("catalog.alert.limited_edition_sold_out.title")});if(e>I(-1))return Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("catalog.alert.notenough.title")});if(t>I(m.activityPointType))return Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("catalog.alert.notenough.activitypoints.title."+m.activityPointType)});switch(j){case T.CONFIRM:return Object($a.jsx)(dc,{variant:"warning",onClick:function(e){return S()},children:st("catalog.marketplace.confirm_title")});case T.PURCHASE:return Object($a.jsx)(dc,{disabled:!0,children:Object($a.jsx)(li,{})});case T.FAILED:return Object($a.jsx)(dc,{variant:"danger",children:st("generic.failed")});case T.SOLD_OUT:return Object($a.jsx)(dc,{variant:"danger",children:st("generic.failed")+" - "+st("catalog.alert.limited_edition_sold_out.title")});case T.NONE:default:return Object($a.jsx)(dc,{disabled:p.extraParamRequired&&(!p.extraData||!p.extraData.length),onClick:function(e){return b(T.CONFIRM)},children:st("catalog.purchase_confirmation."+(m.isRentOffer?"rent":"buy"))})}};return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(N,{}),!n&&!m.isRentOffer&&Object($a.jsx)(dc,{disabled:p.quantity>1||!m.giftable||C||p.extraParamRequired&&(!p.extraData||!p.extraData.length),onClick:function(e){return S(!0)},children:st("catalog.purchase_confirmation.gift")})]})},Io=function(e){var t=e.offer,n=void 0===t?null:t,r=e.separator,a=void 0!==r&&r,c=nn().purchaseOptions,i=(void 0===c?null:c).quantity,s=void 0===i?1:i;return n?Object($a.jsxs)($a.Fragment,{children:[n.priceInCredits>0&&Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:n.priceInCredits*s}),Object($a.jsx)(Vc,{type:-1})]}),a&&n.priceInCredits>0&&n.priceInActivityPoints>0&&Object($a.jsx)(mc.a,{size:"xs",color:"black",icon:"plus"}),n.priceInActivityPoints>0&&Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:n.priceInActivityPoints*s}),Object($a.jsx)(Vc,{type:n.activityPointType})]})]}):null},yo=["gap"],Co=function(e){var t=e.gap,n=void 0===t?1:t,r=Object(Za.a)(e,yo),a=nn().currentOffer,c=void 0===a?null:a;return Object($a.jsx)(Jc,Object(bt.a)(Object(bt.a)({gap:n},r),{},{children:Object($a.jsx)(Io,{offer:c})}))},To=function(e){var t=nn(),n=t.currentOffer,r=void 0===n?null:n,a=t.roomPreviewer,i=void 0===a?null:a,o=t.purchaseOptions,u=(void 0===o?null:o).previewStuffData,d=void 0===u?null:u;return Object(c.useEffect)((function(){if(r&&r.pricingModel!==ia.PRICING_MODEL_BUNDLE&&i){var e=r.product;if(e)switch(e.productType){case aa.FLOOR:if(!e.furnitureData)return;if(e.furnitureData.specialType===Un.FIGURE_PURCHASABLE_SET){var t,n=ae().getFloorItemData(e.furnitureData.id).customParams.split(",").map((function(e){return parseInt(e)})),a=[],c=Object(s.a)(n);try{for(c.s();!(t=c.n()).done;){var o=t.value;k().isValidFigureSetForGender(o,ae().gender)&&a.push(o)}}catch(b){c.e(b)}finally{c.f()}var u=k().getFigureStringWithFigureIds(ae().figure,ae().gender,a);i.addAvatarIntoRoom(u,e.productClassId)}else i.addFurnitureIntoRoom(e.productClassId,new l.Oi(90),d,e.extraParam);return;case aa.WALL:if(!e.furnitureData)return;switch(e.furnitureData.specialType){case Un.FLOOR:return i.reset(!1),void i.updateObjectRoom(e.extraParam);case Un.WALL_PAPER:return i.reset(!1),void i.updateObjectRoom(null,e.extraParam);case Un.LANDSCAPE:i.reset(!1),i.updateObjectRoom(null,null,e.extraParam);var j=ae().getWallItemDataByName("ads_twi_windw");return void(j&&i.addWallItemIntoRoom(j.id,new l.Oi(90),j.customParams));default:return i.updateObjectRoom("default","default","default"),void i.addWallItemIntoRoom(e.productClassId,new l.Oi(90),e.extraParam)}case aa.ROBOT:return void i.addAvatarIntoRoom(e.extraParam,0);case aa.EFFECT:return void i.addAvatarIntoRoom(ae().figure,e.productClassId)}}}),[r,d,i]),r?r.pricingModel===ia.PRICING_MODEL_BUNDLE?Object($a.jsx)(Jc,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object($a.jsx)(sc,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:r.products.length>0&&r.products.map((function(e,t){return Object($a.jsx)(ii,{itemImage:e.getIconUrl(r),itemCount:e.productCount},t)}))})}):Object($a.jsx)(yi,{roomPreviewer:i,height:140}):null},So=function(e){var t=e.page,n=void 0===t?null:t,r=nn().currentOffer,a=void 0===r?null:r;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(fo,{}),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",children:[Object($a.jsx)(po,{shrink:!0}),Object($a.jsxs)(Jc,{gap:1,overflow:"hidden",children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",truncate:!0,shrink:!0,fontWeight:"bold",children:st("catalog_selectbadge")}),Object($a.jsx)(ho,{})]})]}),Object($a.jsxs)(Jc,{center:!a,size:5,overflow:"hidden",children:[!a&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(tc,{position:"relative",overflow:"hidden",children:[Object($a.jsx)(To,{}),Object($a.jsx)(_o,{fullWidth:!0,position:"absolute",className:"top-1"})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:a.localizationName}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{alignItems:"end"})}),Object($a.jsx)(Eo,{})]})]})]})]})]})},No=function(e){var t=Object.assign({},e),n=nn().currentOffer,r=void 0===n?null:n;return r&&r.badgeCode&&r.badgeCode.length?Object($a.jsx)(Gc,Object(bt.a)({badgeCode:r.badgeCode},t)):null},Ro=function(e){var t=nn(),n=t.currentOffer,r=void 0===n?null:n,a=t.purchaseOptions,c=void 0===a?null:a,i=t.setPurchaseOptions,s=void 0===i?null:i,o=c.quantity,l=void 0===o?1:o,u=function(e){isNaN(e)&&(e=1),e=Math.max(e,1),(e=Math.min(e,100))!==l&&s((function(t){var n=Object(bt.a)({},t);return n.quantity=e,n}))};return r&&r.bundlePurchaseAllowed?Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("catalog.bundlewidget.spinner.select.amount")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(mc.a,{icon:"caret-left",className:"text-black cursor-pointer",onClick:function(e){return u(l-1)}}),Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:l,onChange:function(e){return u(e.target.valueAsNumber)}}),Object($a.jsx)(mc.a,{icon:"caret-right",className:"text-black cursor-pointer",onClick:function(e){return u(l+1)}})]})]}):null},ko=function(e){var t=e.page,n=void 0===t?null:t,r=nn().currentOffer,a=void 0===r?null:r;return Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(po,{})}),Object($a.jsxs)(Jc,{center:!a,size:5,overflow:"hidden",children:[!a&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(tc,{position:"relative",overflow:"hidden",children:[Object($a.jsx)(To,{}),Object($a.jsx)(_o,{fullWidth:!0,position:"absolute",className:"top-1"}),Object($a.jsx)(No,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:a.localizationName}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsx)(Jc,{gap:1,children:Object($a.jsx)(Ro,{})}),Object($a.jsx)(Co,{justifyContent:"end",alignItems:"end"})]}),Object($a.jsx)(Eo,{})]})]})]})]})},Ao=function(e){var t=Object.assign({},e),n=nn(),r=n.currentOffer,a=void 0===r?null:r,i=n.purchaseOptions,s=(void 0===i?null:i).previewStuffData,o=void 0===s?null:s,l=Object(c.useMemo)((function(){if(!a||!o)return null;var e=o.getValue(2);return e&&e.length?e:null}),[a,o]);return l?Object($a.jsx)(Gc,Object(bt.a)({badgeCode:l,isGroup:!0},t)):null},wo=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=nn(),s=i.currentOffer,u=void 0===s?null:s,d=i.catalogOptions,j=void 0===d?null:d,b=i.setPurchaseOptions,O=void 0===b?null:b,h=j.groups,f=void 0===h?null:h,g=Object(c.useMemo)((function(){if(!f||!f.length)return null;var e=f[r];if(!e)return null;var t=new l.Kh;return t.setValue(["0",e.groupId.toString(),e.badgeCode,e.colorA,e.colorB]),t}),[r,f]);if(Object(c.useEffect)((function(){u&&O((function(e){var t=Object(bt.a)({},e);return t.extraParamRequired=!0,t.extraData=g&&g.getValue(1)||null,t.previewStuffData=g,t}))}),[u,g,O]),Object(c.useEffect)((function(){ea(new l.T)}),[]),!f||!f.length)return Object($a.jsxs)(tc,{className:"bg-muted rounded p-1 text-black text-center",children:[st("catalog.guild_selector.members_only"),Object($a.jsx)(dc,{className:"mt-1",children:st("catalog.guild_selector.find_groups")})]});var m=f[r];return Object($a.jsxs)(lc,{gap:1,children:[!!m&&Object($a.jsxs)(lc,{overflow:"hidden",className:"rounded border",children:[Object($a.jsx)(tc,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorA}}),Object($a.jsx)(tc,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorB}})]}),Object($a.jsx)("select",{className:"form-select form-select-sm",value:r,onChange:function(e){return a(parseInt(e.target.value))},children:f.map((function(e,t){return Object($a.jsx)("option",{value:t,children:e.groupName},t)}))})]})},Do=function(e){var t=e.page,n=void 0===t?null:t,r=nn().currentOffer,a=void 0===r?null:r;return Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(po,{})}),Object($a.jsxs)(Jc,{center:!a,size:5,overflow:"hidden",children:[!a&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(tc,{position:"relative",overflow:"hidden",children:[Object($a.jsx)(To,{}),Object($a.jsx)(Ao,{position:"absolute",className:"bottom-1 end-1"})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",truncate:!0,children:a.localizationName}),Object($a.jsx)(tc,{grow:!0,children:Object($a.jsx)(wo,{})}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{alignItems:"end"})}),Object($a.jsx)(Eo,{})]})]})]})]})},Uo=function(e){var t=e.page,n=void 0===t?null:t,r=Object(c.useState)(0),a=Object(o.a)(r,2),i=(a[0],a[1],nn()),s=i.currentOffer,u=void 0===s?null:s,d=(i.setCurrentOffer,i.catalogOptions);(void 0===d?null:d).groups;return Object(c.useEffect)((function(){ea(new l.T)}),[n]),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(fo,{}),Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:Object($a.jsx)(tc,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:n.localization.getText(1)}})}),Object($a.jsx)(Jc,{size:5,overflow:"hidden",gap:1,children:!!u&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{truncate:!0,children:u.localizationName}),Object($a.jsx)(tc,{grow:!0,children:Object($a.jsx)(wo,{})}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{alignItems:"end"})}),Object($a.jsx)(Eo,{noGiftOption:!0})]})})})]})]})},Po=function(e){var t=e.page,n=void 0===t?null:t;return Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:n.localization.getText(2)}}),Object($a.jsx)(tc,{overflow:"auto",dangerouslySetInnerHTML:{__html:n.localization.getText(0)}}),Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:n.localization.getText(1)}})]}),Object($a.jsxs)(Jc,{center:!0,size:5,overflow:"hidden",children:[Object($a.jsx)(oi,{imageUrl:n.localization.getImage(1)}),Object($a.jsx)(dc,{onClick:function(){return U("groups/create")},children:st("catalog.start.guild.purchase.button")})]})]})},Lo=function(e){var t=e.page,n=void 0===t?null:t;return Object($a.jsx)("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:Object($a.jsx)("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:Object($a.jsx)("div",{dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})})})},Mo=function(e){var t=e.page,n=void 0===t?null:t,r=n.localization.getImage(1);return Object($a.jsxs)(Jc,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[r&&Object($a.jsx)("img",{alt:"",src:r}),Object($a.jsx)(tc,{className:"fs-5",dangerouslySetInnerHTML:{__html:n.localization.getText(1)}})]}),Object($a.jsx)(Jc,{grow:!0,alignItems:"center",overflow:"auto",children:Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:n.localization.getText(2)}})}),Object($a.jsx)(lc,{alignItems:"center",children:Object($a.jsx)(tc,{className:"fw-bold",dangerouslySetInnerHTML:{__html:n.localization.getText(3)}})})]})},Fo=function(e){return Object($a.jsx)(Mo,Object(bt.a)({},e))},Ho=["columnCount","children"],Bo=function(e){e.columnCount;var t=e.children,n=void 0===t?null:t,r=Object(Za.a)(e,Ho),a=nn().currentOffer,c=void 0===a?null:a;return c?Object($a.jsxs)(sc,Object(bt.a)(Object(bt.a)({columnCount:5},r),{},{children:[c.products&&c.products.length>0&&c.products.map((function(e,t){return Object($a.jsx)(ii,{itemImage:e.getIconUrl(),itemCount:e.productCount},t)})),n]})):null},Go=["gap"],Wo=function(e){var t=e.gap,n=void 0===t?1:t,r=Object(Za.a)(e,Go),a=nn().currentOffer,c=void 0===a?null:a;return Object($a.jsx)(lc,Object(bt.a)(Object(bt.a)({gap:n,alignItems:"center",classNames:["bg-muted","p-1","rounded"]},r),{},{children:Object($a.jsx)(Io,{separator:!0,offer:c})}))},Vo=function(e){var t=e.page,n=void 0===t?null:t;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(fo,{}),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",children:[!!n.localization.getText(2)&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",dangerouslySetInnerHTML:{__html:n.localization.getText(2)}}),Object($a.jsx)(Jc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object($a.jsx)(Bo,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object($a.jsxs)(Jc,{size:5,overflow:"hidden",gap:1,children:[!!n.localization.getText(1)&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,small:!0,overflow:"auto",children:n.localization.getText(1)}),Object($a.jsxs)(Jc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",className:"flex-grow-1",src:n.localization.getImage(1)}),Object($a.jsx)(No,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object($a.jsx)(Wo,{position:"absolute",className:"bottom-0 end-0"})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsx)(Eo,{})})]})]})]})},qo=function(e){var t=e.page,n=void 0===t?null:t;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(fo,{}),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",children:[!!n.localization.getText(2)&&Object($a.jsx)(Hi,{dangerouslySetInnerHTML:{__html:n.localization.getText(2)}}),Object($a.jsx)(Jc,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:Object($a.jsx)(Bo,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),Object($a.jsxs)(Jc,{size:5,overflow:"hidden",gap:1,children:[!!n.localization.getText(1)&&Object($a.jsx)(Hi,{center:!0,small:!0,overflow:"auto",children:n.localization.getText(1)}),Object($a.jsxs)(Jc,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",className:"flex-grow-1",src:n.localization.getImage(1)}),Object($a.jsx)(No,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),Object($a.jsx)(Wo,{position:"absolute",className:"bottom-0 end-0"})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsx)(Eo,{})})]})]})]})},Yo=["columnCount","children"],zo=["floors","walls","views"],Ko=function(e){var t=e.columnCount,n=void 0===t?5:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,Yo),l=Object(c.useState)(null),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(-1),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=nn(),_=x.currentPage,E=void 0===_?null:_,I=x.currentOffer,y=void 0===I?null:I,C=x.setCurrentOffer,T=void 0===C?null:C,S=x.setPurchaseOptions,N=void 0===S?null:S;if(Object(c.useEffect)((function(){if(E){var e,t=[[],[],[]],n=Object(s.a)(E.offers);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.pricingModel===ia.PRICING_MODEL_SINGLE||r.pricingModel===ia.PRICING_MODEL_MULTI){var a=r.product;if(a&&(a.productType===aa.WALL||a.productType===aa.FLOOR)&&a.furnitureData)switch(a.furnitureData.className){case"floor":t[0].push(r);break;case"wallpaper":t[1].push(r);break;case"landscape":t[2].push(r)}}}}catch(c){n.e(c)}finally{n.f()}j(t),f(0),p([t[0][0],t[1][0],t[2][0]])}}),[E]),Object(c.useEffect)((function(){-1!==h&&v&&T(v[h])}),[h,v,T]),Object(c.useEffect)((function(){-1!==h&&v&&y&&N((function(e){var t=Object(bt.a)({},e);return t.extraData=v[h].product.extraParam,t.extraParamRequired=!0,t}))}),[y,h,v,N]),!d||-1===h)return null;var R=d[h];return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(bc,{children:zo.map((function(e,t){return Object($a.jsx)(dc,{active:h===t,onClick:function(e){return f(t)},children:st("catalog.spaces.tab.".concat(e))},t)}))}),Object($a.jsxs)(sc,Object(bt.a)(Object(bt.a)({columnCount:n},i),{},{children:[R&&R.length>0&&R.map((function(e,t){return Object($a.jsx)(mo,{itemActive:y&&y===e,offer:e,selectOffer:function(e){return function(e){e&&p((function(t){var n=Object(ut.a)(t);return n[h]=e,n}))}(e)}},t)})),a]}))]})},Qo=function(e){var t=e.page,n=void 0===t?null:t,r=nn(),a=r.currentOffer,i=void 0===a?null:a,s=r.roomPreviewer,o=void 0===s?null:s;return Object(c.useEffect)((function(){o.updatePreviewObjectBoundingRectangle(new l.Se)}),[o]),Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(Ko,{})}),Object($a.jsxs)(Jc,{center:!i,size:5,overflow:"hidden",children:[!i&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),i&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(tc,{position:"relative",overflow:"hidden",children:Object($a.jsx)(To,{})}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:i.localizationName}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{alignItems:"end"})}),Object($a.jsx)(Eo,{})]})]})]})]})},Xo=function(e){var t=e.page,n=void 0===t?null:t,r=Object(c.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],l=nn(),u=l.currentOffer,d=void 0===u?null:u,j=l.setPurchaseOptions,b=void 0===j?null:j;return Object(c.useEffect)((function(){d&&b((function(e){var t=Object(bt.a)({},e);return t.extraData=i,t}))}),[d,i,b]),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",children:[Object($a.jsx)(po,{}),Object($a.jsx)("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:i||"",onChange:function(e){return s(e.target.value)}})]}),Object($a.jsxs)(Jc,{center:!d,size:5,overflow:"hidden",children:[!d&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(To,{}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:d.localizationName}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{alignItems:"end"})}),Object($a.jsx)(Eo,{})]})]})]})]})},Jo=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(T.NONE),s=Object(o.a)(i,2),u=s[0],d=s[1],j=nn(),b=j.currentPage,O=void 0===b?null:b,h=j.catalogOptions,f=void 0===h?null:h,g=Tn(),m=g.purse,v=void 0===m?null:m,p=g.getCurrencyAmount,x=void 0===p?null:p,_=f.clubOffers,E=void 0===_?null:_,I=Object(c.useCallback)((function(e){switch(e.type){case mt.PURCHASE_SUCCESS:return void d(T.NONE);case vt.PURCHASE_FAILED:return void d(T.FAILED)}}),[]);Qt(mt.PURCHASE_SUCCESS,I),Qt(vt.PURCHASE_FAILED,I);var y=Object(c.useCallback)((function(e){var t="";return e.months>0&&(t=st("catalog.vip.item.header.months",["num_months"],[e.months.toString()])),e.extraDays>0&&(""!==t&&(t+=" "),t+=" "+st("catalog.vip.item.header.days",["num_days"],[e.extraDays.toString()])),t}),[]),C=Object(c.useCallback)((function(){if(!v)return"";var e=v.clubDays>0||v.clubPeriods>0?"extension.":"subscription.",t=0===r.months?"days":"months",n=0===r.months?r.extraDays:r.months;return st("catalog.vip.buy.confirm."+e+t).replace("%NUM_"+t.toUpperCase()+"%",n.toString())}),[r,v]),S=Object(c.useCallback)((function(){var e=st("catalog.vip.buy.confirm.end_date");return e=(e=(e=e.replace("%month%",r.month.toString())).replace("%day%",r.day.toString())).replace("%year%",r.year.toString())}),[r]),N=Object(c.useMemo)((function(){var e=v.clubDays;return st("catalog.vip.extend.info",["days"],[(31*v.clubPeriods+e).toString()])}),[v]),R=Object(c.useCallback)((function(){r&&(d(T.PURCHASE),ea(new l.xf(O.pageId,r.offerId,null,1)))}),[r,O]),k=Object(c.useCallback)((function(e){d(T.NONE),a(e)}),[]),A=Object(c.useCallback)((function(){if(!r)return null;if(r.priceCredits>x(-1))return Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",children:st("catalog.alert.notenough.title")});if(r.priceActivityPoints>x(r.priceActivityPointsType))return Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",children:st("catalog.alert.notenough.activitypoints.title."+r.priceActivityPointsType)});switch(u){case T.CONFIRM:return Object($a.jsx)(dc,{fullWidth:!0,variant:"warning",onClick:R,children:st("catalog.marketplace.confirm_title")});case T.PURCHASE:return Object($a.jsx)(dc,{fullWidth:!0,variant:"primary",disabled:!0,children:Object($a.jsx)(li,{})});case T.FAILED:return Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",disabled:!0,children:st("generic.failed")});case T.NONE:default:return Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(){return d(T.CONFIRM)},children:st("buy")})}}),[r,u,R,x]);return Object(c.useEffect)((function(){E||ea(new l.gc(1))}),[E]),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[Object($a.jsx)(sc,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:E&&E.length>0&&E.map((function(e,t){return Object($a.jsxs)(ii,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:r===e,className:"p-1",onClick:function(){return k(e)},children:[Object($a.jsx)("i",{className:"icon-hc-banner"}),Object($a.jsxs)(Jc,{justifyContent:"end",gap:0,children:[Object($a.jsx)(Hi,{textEnd:!0,children:y(e)}),Object($a.jsxs)(lc,{justifyContent:"end",gap:1,children:[e.priceCredits>0&&Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"end",gap:1,children:[Object($a.jsx)(Hi,{children:e.priceCredits}),Object($a.jsx)(Vc,{type:-1})]}),e.priceActivityPoints>0&&Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"end",gap:1,children:[Object($a.jsx)(Hi,{children:e.priceActivityPoints}),Object($a.jsx)(Vc,{type:e.priceActivityPointsType})]})]})]})]},t)}))}),Object($a.jsx)(Hi,{center:!0,dangerouslySetInnerHTML:{__html:st("catalog.vip.buy.hccenter")}})]}),Object($a.jsxs)(Jc,{size:5,overflow:"hidden",children:[Object($a.jsxs)(Jc,{fullHeight:!0,center:!0,overflow:"hidden",children:[O.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:O.localization.getImage(1)}),Object($a.jsx)(Hi,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:N}})]}),r&&Object($a.jsxs)(Jc,{fullWidth:!0,grow:!0,justifyContent:"end",children:[Object($a.jsxs)(lc,{alignItems:"end",children:[Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:C()}),Object($a.jsx)(Hi,{children:S()})]}),Object($a.jsxs)(Jc,{gap:1,children:[r.priceCredits>0&&Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"end",gap:1,children:[Object($a.jsx)(Hi,{children:r.priceCredits}),Object($a.jsx)(Vc,{type:-1})]}),r.priceActivityPoints>0&&Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"end",gap:1,children:[Object($a.jsx)(Hi,{children:r.priceActivityPoints}),Object($a.jsx)(Vc,{type:r.priceActivityPointsType})]})]})]}),A()]})]})]})},Zo=function(e){var t=e.text,n=void 0===t?null:t,r=Object(c.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useCallback)((function(e){var t=e.getParser(),n=st("catalog.alert.voucherredeem.ok.description");t.productName&&(n=st("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[t.productName,t.productDescription])),Ha.simpleAlert(n,null,null,null,st("catalog.alert.voucherredeem.ok.title")),b(!1),s("")}),[]);dt(l.Qi,O);var h=Object(c.useCallback)((function(e){var t=e.getParser();Ha.simpleAlert(st("catalog.alert.voucherredeem.error.description.".concat(t.errorCode)),null,null,null,st("catalog.alert.voucherredeem.error.title")),b(!1)}),[]);return dt(l.Pi,h),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:n,value:i,onChange:function(e){return s(e.target.value)}}),Object($a.jsx)(dc,{variant:"primary",onClick:function(){i&&i.length&&!j&&(ea(new l.Ef(i)),b(!0))},disabled:j,children:Object($a.jsx)(mc.a,{icon:"tag"})})]})},$o=["item","position","pointer","overflow","fullHeight","classNames","children"],el=function(e){var t=e.item,n=void 0===t?null:t,r=e.position,a=void 0===r?"relative":r,i=e.pointer,s=void 0===i||i,o=e.overflow,l=void 0===o?"hidden":o,u=e.fullHeight,d=void 0===u||u,j=e.classNames,b=void 0===j?[]:j,O=e.children,h=void 0===O?null:O,f=Object(Za.a)(e,$o),g=Object(c.useMemo)((function(){var e=["rounded","nitro-front-page-item"];return b.length&&e.push.apply(e,Object(ut.a)(b)),e}),[b]);if(!n)return null;var m=L("image.library.url")+n.itemPromoImage;return Object($a.jsxs)(Hc,Object(bt.a)(Object(bt.a)({imageUrl:m,classNames:g,position:a,fullHeight:d,pointer:s,overflow:l},f),{},{children:[Object($a.jsx)(Hi,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:n.itemName}),h]}))},tl=function(e){var t=e.page,n=void 0===t?null:t,r=e.hideNavigation,a=void 0===r?null:r,i=nn().frontPageItems,s=void 0===i?[]:i,o=Object(c.useCallback)((function(e){switch(e.type){case l.Jb.ITEM_CATALOGUE_PAGE:return void U("catalog/open/".concat(e.catalogPageLocation));case l.Jb.ITEM_PRODUCT_OFFER:return void U("catalog/open/".concat(e.productOfferId))}}),[]);return Object(c.useEffect)((function(){a()}),[n,a]),Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:4,children:s[0]&&Object($a.jsx)(el,{item:s[0],onClick:function(e){return o(s[0])}})}),Object($a.jsxs)(Jc,{size:8,children:[s[1]&&Object($a.jsx)(el,{item:s[1],onClick:function(e){return o(s[1])}}),s[2]&&Object($a.jsx)(el,{item:s[2],onClick:function(e){return o(s[2])}}),s[3]&&Object($a.jsx)(el,{item:s[3],onClick:function(e){return o(s[3])}}),Object($a.jsx)(Zo,{text:n.localization.getText(1)})]})]})},nl=function(){function e(t,n,r,a,c,i,s,o){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;Object(u.a)(this,e),this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=t,this._furniId=n,this._furniType=r,this._extraData=a,this._stuffData=c,this._price=i,this._status=s,this._averagePrice=o,this._offerCount=l}return Object(d.a)(e,[{key:"offerId",get:function(){return this._offerId},set:function(e){this._offerId=e}},{key:"furniId",get:function(){return this._furniId}},{key:"furniType",get:function(){return this._furniType}},{key:"extraData",get:function(){return this._extraData}},{key:"stuffData",get:function(){return this._stuffData}},{key:"price",get:function(){return this._price},set:function(e){this._price=e}},{key:"averagePrice",get:function(){return this._averagePrice}},{key:"image",get:function(){return this._image},set:function(e){this._image=e}},{key:"imageCallback",get:function(){return this._imageCallback},set:function(e){this._imageCallback=e}},{key:"status",get:function(){return this._status}},{key:"timeLeftMinutes",get:function(){return this._timeLeftMinutes},set:function(e){this._timeLeftMinutes=e}},{key:"offerCount",get:function(){return this._offerCount},set:function(e){this._offerCount=e}},{key:"isUniqueLimitedItem",get:function(){return this.stuffData&&this.stuffData.uniqueSeries>0}}]),e}();nl.TYPE_FLOOR=1,nl.TYPE_WALL=2;var rl=Object(d.a)((function e(){Object(u.a)(this,e)}));rl.ONGOING=1,rl.ONGOING_OWN=1,rl.SOLD=2,rl.EXPIRED=3;var al=function(e){var t=e.offerData,n=void 0===t?null:t,r=e.type,a=void 0===r?2:r,i=e.onClick,s=void 0===i?null:i,o=Object(c.useMemo)((function(){return n?st((2===n.furniType?"wallItem":"roomItem")+".name.".concat(n.furniId)):""}),[n]),l=Object(c.useCallback)((function(){if(!n)return"";if(n.status===rl.SOLD)return st("catalog.marketplace.offer.sold");if(n.timeLeftMinutes<=0)return st("catalog.marketplace.offer.expired");var e=Math.max(1,n.timeLeftMinutes),t=Math.floor(e/60),r=e-60*t+" "+st("catalog.marketplace.offer.minutes");return t>0&&(r=t+" "+st("catalog.marketplace.offer.hours")+" "+r),st("catalog.marketplace.offer.time_left",["time"],[r])}),[n]);return Object($a.jsxs)(ii,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object($a.jsx)(Yc,{productType:n.furniType===nl.TYPE_FLOOR?aa.FLOOR:aa.WALL,productClassId:n.furniId,extraData:n.extraData,style:{width:50,height:50}}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:o}),1===a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("catalog.marketplace.offer.price_own_item",["price"],[n.price.toString()])}),Object($a.jsx)(Hi,{children:l()})]}),2===a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("catalog.marketplace.offer.price_public_item",["price","average"],[n.price.toString(),n.averagePrice.toString()])}),Object($a.jsx)(Hi,{children:st("catalog.marketplace.offer_count",["count"],[n.offerCount.toString()])})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[1===a&&n.status!==rl.SOLD&&Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return s(n)})),children:st("catalog.marketplace.offer.pick")}),2===a&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return s(n)})),children:st("buy")}),Object($a.jsx)(dc,{variant:"secondary",disabled:!0,children:st("catalog.marketplace.view_more")})]})]})]})},cl=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=t.offers.map((function(e){var t=new nl(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);return t.timeLeftMinutes=e.timeLeftMinutes,t}));a(t.creditsWaiting),d(n)}}),[]);dt(l.ee,j);var b=Object(c.useCallback)((function(e){var t=e.getParser();t&&(t.success?d((function(e){return e.filter((function(e){return e.offerId!==t.offerId}))})):Ha.simpleAlert(st("catalog.marketplace.cancel_failed"),Ua.DEFAULT,null,null,st("catalog.marketplace.operation_failed.topic")))}),[]);dt(l.be,b);var O=Object(c.useMemo)((function(){return u.filter((function(e){return e.status===rl.SOLD}))}),[u]),h=Object(c.useCallback)((function(){d((function(e){var t=O.map((function(e){return e.offerId}));return e.filter((function(e){return-1===t.indexOf(e.offerId)}))})),ea(new l.Df)}),[O]),f=function(e){ea(new l.R(e.offerId))};return Object(c.useEffect)((function(){ea(new l.mc)}),[]),Object($a.jsxs)(Jc,{overflow:"hidden",children:[r<=0&&Object($a.jsx)(Hi,{center:!0,className:"bg-muted rounded p-1",children:st("catalog.marketplace.redeem.no_sold_items")}),r>0&&Object($a.jsxs)(Jc,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[Object($a.jsx)(Hi,{children:st("catalog.marketplace.redeem.get_credits",["count","credits"],[O.length.toString(),r.toString()])}),Object($a.jsx)(dc,{className:"mt-1",onClick:h,children:st("catalog.marketplace.offer.redeem")})]}),Object($a.jsxs)(Jc,{gap:1,overflow:"hidden",children:[Object($a.jsx)(Hi,{truncate:!0,shrink:!0,fontWeight:"bold",children:st("catalog.marketplace.items_found",["count"],[u.length.toString()])}),Object($a.jsx)(Jc,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:u.length>0&&u.map((function(e){return Object($a.jsx)(al,{offerData:e,type:1,onClick:f},e.offerId)}))})]})]})},il=Object(d.a)((function e(){Object(u.a)(this,e)}));il.BY_ACTIVITY=1,il.BY_VALUE=2,il.ADVANCED=3;var sl=function(e){var t=e.searchType,n=void 0===t?null:t,r=e.sortTypes,a=void 0===r?null:r,i=e.onSearch,s=void 0===i?null:i,l=Object(c.useState)(a?a[0]:3),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(""),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(0),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(0),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useCallback)((function(e){j(e),n!==il.BY_ACTIVITY&&n!==il.BY_VALUE||s({minPrice:-1,maxPrice:-1,query:"",type:e})}),[s,n]),C=Object(c.useCallback)((function(){s({minPrice:v>0?v:-1,maxPrice:E>0?E:-1,type:d,query:h})}),[E,v,s,h,d]);return Object(c.useEffect)((function(){if(a&&a.length){var e=a[0];j(e),n!==il.BY_ACTIVITY&&il.BY_VALUE!==n||s({minPrice:-1,maxPrice:-1,query:"",type:e})}}),[s,n,a]),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{className:"col-3",children:st("catalog.marketplace.sort_order")}),Object($a.jsx)("select",{className:"form-select form-select-sm",value:d,onChange:function(e){return y(parseInt(e.target.value))},children:a.map((function(e){return Object($a.jsx)("option",{value:e,children:st("catalog.marketplace.sort.".concat(e))},e)}))})]}),n===il.ADVANCED&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{className:"col-3",children:st("catalog.marketplace.search_name")}),Object($a.jsx)("input",{className:"form-control form-control-sm",type:"text",value:h,onChange:function(e){return f(e.target.value)}})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{className:"col-3",children:st("catalog.marketplace.search_price")}),Object($a.jsxs)(lc,{fullWidth:!0,gap:1,children:[Object($a.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:v,onChange:function(e){return p(e.target.valueAsNumber)}}),Object($a.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:E,onChange:function(e){return I(e.target.valueAsNumber)}})]})]}),Object($a.jsx)(dc,{variant:"secondary",className:"mx-auto",onClick:C,children:st("generic.search")})]})]})},ol=[1,2],ll=[3,4,5,6],ul=[1,2,3,4,5,6],dl=function(e){var t=Object(c.useState)(il.BY_ACTIVITY),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),u=(s[0],s[1]),d=Object(c.useState)(new Map),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)({minPrice:-1,maxPrice:-1,query:"",type:3}),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Tn().getCurrencyAmount,p=void 0===v?null:v,x=Object(c.useCallback)((function(e){m(e),ea(new l.lc(e.minPrice,e.maxPrice,e.query,e.type))}),[]),_=Object(c.useMemo)((function(){switch(r){case il.BY_ACTIVITY:return ll;case il.BY_VALUE:return ol;case il.ADVANCED:return ul}return[]}),[r]),E=Object(c.useCallback)((function(e){if(e.price>p(-1))Ha.simpleAlert(st("catalog.alert.notenough.credits.description"),Ua.DEFAULT,null,null,st("catalog.alert.notenough.title"));else{var t=e.offerId;Ha.confirm(st("catalog.marketplace.confirm_header"),(function(){ea(new l.I(t))}),null,null,null,st("catalog.marketplace.confirm_title"))}}),[p]),I=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=new Map;t.offers.forEach((function(e){var t=new nl(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);t.timeLeftMinutes=e.timeLeftMinutes,n.set(e.offerId,t)})),u(t.totalItemsFound),O(n)}}),[]),y=Object(c.useCallback)((function(e){var t=e.getParser();if(t)switch(t.result){case 1:x(g);break;case 2:O((function(e){var n=new Map(e);return n.delete(t.requestedOfferId),n})),Ha.simpleAlert(st("catalog.marketplace.not_available_header"),Ua.DEFAULT,null,null,st("catalog.marketplace.not_available_title"));break;case 3:O((function(e){var n=new Map(e),r=n.get(t.requestedOfferId);return r&&(r.offerId=t.offerId,r.price=t.newPrice,r.offerCount--,n.set(r.offerId,r)),n.delete(t.requestedOfferId),n})),Ha.confirm(st("catalog.marketplace.confirm_higher_header")+"\n"+st("catalog.marketplace.confirm_price",["price"],[t.newPrice.toString()]),(function(){ea(new l.I(t.offerId))}),null,null,null,st("catalog.marketplace.confirm_higher_title"));break;case 4:Ha.simpleAlert(st("catalog.alert.notenough.credits.description"),Ua.DEFAULT,null,null,st("catalog.alert.notenough.title"))}}),[g,x]);return dt(l.Zd,I),dt(l.ae,y),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{active:r===il.BY_ACTIVITY,onClick:function(){return a(il.BY_ACTIVITY)},children:st("catalog.marketplace.search_by_activity")}),Object($a.jsx)(dc,{active:r===il.BY_VALUE,onClick:function(){return a(il.BY_VALUE)},children:st("catalog.marketplace.search_by_value")}),Object($a.jsx)(dc,{active:r===il.ADVANCED,onClick:function(){return a(il.ADVANCED)},children:st("catalog.marketplace.search_advanced")})]}),Object($a.jsx)(sl,{sortTypes:_,searchType:r,onSearch:x}),Object($a.jsxs)(Jc,{gap:1,overflow:"hidden",children:[Object($a.jsx)(Hi,{truncate:!0,shrink:!0,fontWeight:"bold",children:st("catalog.marketplace.items_found",["count"],[b.size.toString()])}),Object($a.jsx)(Jc,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(b.values()).map((function(e,t){return Object($a.jsx)(al,{offerData:e,type:2,onClick:E},t)}))})]})]})},jl=function(e){var t=e.page,n=void 0===t?null:t,r=Object(c.useState)(-1),a=Object(o.a)(r,2),i=a[0],u=a[1],d=Object(c.useState)([]),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(-1),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Object(c.useState)([]),p=Object(o.a)(v,2),x=p[0],_=p[1],E=Object(c.useState)(-1),I=Object(o.a)(E,2),y=I[0],C=I[1],T=Object(c.useState)(!1),S=Object(o.a)(T,2),N=S[0],R=S[1],k=Object(c.useState)(""),A=Object(o.a)(k,2),w=A[0],D=A[1],U=Object(c.useState)(!0),P=Object(o.a)(U,2),L=(P[0],P[1],Object(c.useState)(-1)),M=Object(o.a)(L,2),F=M[0],H=M[1],B=nn(),W=B.currentOffer,V=void 0===W?null:W,q=B.setCurrentOffer,Y=void 0===q?null:q,z=(B.setPurchaseOptions,B.catalogOptions),K=void 0===z?null:z,Q=B.roomPreviewer,X=void 0===Q?null:Q,J=K.petPalettes,Z=void 0===J?null:J,$=Object(c.useMemo)((function(){return x.length&&-1!==y?x[y][0]:16777215}),[x,y]),ee=Object(c.useMemo)((function(){return-1!==i&&b.length&&-1!==g?st("pet.breed.".concat(i,".").concat(b[g].breedId)):""}),[i,b,g]),te=Object(c.useMemo)((function(){if(!b.length||-1===g)return"";var e=b[g].paletteId,t=16777215;if(i<=7){if(-1===y)return"";t=x[y][0]}for(var n=t.toString(16).toUpperCase();n.length<6;)n="0"+n;return"".concat(e,"\n").concat(n)}),[b,g,i,x,y]),ne=Object(c.useMemo)((function(){var e="";switch(F){case 1:e="catalog.alert.petname.long";break;case 2:e="catalog.alert.petname.short";break;case 3:e="catalog.alert.petname.chars";break;case 4:e="catalog.alert.petname.bobba"}return e&&e.length?st(e):""}),[F]),re=Object(c.useCallback)((function(){-1!==F?0!==F||ea(new l.xf(n.pageId,V.offerId,"".concat(w,"\n").concat(te),1)):ea(new l.i(w,1))}),[n,V,w,te,F]),ae=Object(c.useCallback)((function(e){var t=e.getParser();H(t.result),0===t.result?re():Kt(new vt(-1))}),[re]);return dt(l.j,ae),Object(c.useEffect)((function(){if(n&&n.offers.length){var e=n.offers[0];Y(e),u(function(e){if(!e.length)return 0;for(var t=e.length-1;t>=0&&!isNaN(parseInt(e.charAt(t)));)t--;return t>0?parseInt(e.substring(t+1)):-1}(e.localizationId)),R(!1)}}),[n,Y]),Object(c.useEffect)((function(){if(V){var e=V.product.productData;if(e){if(Z){var t,n=Object(s.a)(Z);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.breed===e.type){var a,c=[],i=Object(s.a)(r.palettes);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.sellable&&c.push(o)}}catch(u){i.e(u)}finally{i.f()}return m(c.length?0:-1),void O(c)}}}catch(u){n.e(u)}finally{n.f()}}m(-1),O([]),ea(new l.vc(e.type))}}}),[V,Z]),Object(c.useEffect)((function(){if(-1!==i){var e=function(e,t){switch(e){case 0:case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:case 5:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:var n,r=[],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value,i=G().getPetColorResult(e,c.paletteId);i&&(i.primaryColor===i.secondaryColor?r.push([i.primaryColor]):r.push([i.primaryColor,i.secondaryColor]))}}catch(o){a.e(o)}finally{a.f()}return r}}(i,b);C(e.length?0:-1),_(e)}}),[i,b]),Object(c.useEffect)((function(){if(X&&(X.reset(!1),-1!==i&&b.length&&-1!==g)){var e="".concat(i," ").concat(b[g].paletteId);i<=7&&(e+=" ".concat($.toString(16))),X.addPetIntoRoom(e)}}),[X,i,b,g,$]),Object(c.useEffect)((function(){H(-1)}),[w]),V?Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsxs)(sc,{columnCount:5,children:[!N&&b.length>0&&b.map((function(e,t){return Object($a.jsx)(ii,{itemActive:g===t,onClick:function(e){return m(t)},children:Object($a.jsx)(pi,{typeId:i,paletteId:e.paletteId,direction:2,headOnly:!0})},t)})),N&&x.length>0&&x.map((function(e,t){return Object($a.jsx)(ii,{itemHighlight:!0,itemActive:y===t,itemColor:l.ib.int2rgb(e[0]),className:"clear-bg",onClick:function(e){return C(t)}},t)}))]})}),Object($a.jsxs)(Jc,{center:!V,size:5,overflow:"hidden",children:[!V&&Object($a.jsxs)($a.Fragment,{children:[!!n.localization.getImage(1)&&Object($a.jsx)("img",{alt:"",src:n.localization.getImage(1)}),Object($a.jsx)(Hi,{center:!0,dangerouslySetInnerHTML:{__html:n.localization.getText(0)}})]}),V&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(tc,{position:"relative",overflow:"hidden",children:[Object($a.jsx)(To,{}),Object($a.jsx)(No,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),i>-1&&i<=7&&Object($a.jsx)(dc,{position:"absolute",className:"bottom-1 start-1",onClick:function(e){return R(!N)},children:Object($a.jsx)(mc.a,{icon:"fill-drip"})})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{truncate:!0,children:ee}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:st("widgets.petpackage.name.title"),value:w,onChange:function(e){return D(e.target.value)}}),F>0&&Object($a.jsx)(tc,{className:"invalid-feedback d-block m-0",children:ne})]}),Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(Co,{justifyContent:"end",alignItems:"end"})}),Object($a.jsx)(Eo,{purchaseCallback:re})]})]})]})]}):null},bl=function(e){var t=e.offer,n=void 0===t?null:t,r=e.isAvailable,a=void 0!==r&&r,i=e.onSelect,s=void 0===i?null:i,o=Object(c.useCallback)((function(){if(!n||!n.products.length)return"";var e=n.products[0];return or.getProductImageUrl(e.productType,e.furniClassId,e.extraParam)}),[n]),l=Object(c.useCallback)((function(){if(!n||!n.products.length)return"";var e=n.products[0];return st(2===or.getProductCategory(e.productType,e.furniClassId)?"wallItem.name."+e.furniClassId:"roomItem.name."+e.furniClassId)}),[n]);Object(c.useCallback)((function(){if(!n||!n.products.length)return"";var e=n.products[0];return st(2===or.getProductCategory(e.productType,e.furniClassId)?"wallItem.desc."+e.furniClassId:"roomItem.desc."+e.furniClassId)}),[n]);return Object($a.jsxs)(ii,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[Object($a.jsx)(oi,{imageUrl:o()}),Object($a.jsx)(Hi,{grow:!0,fontWeight:"bold",children:l()}),Object($a.jsx)(dc,{variant:"secondary",onClick:function(){return s(n.localizationId)},disabled:!a,children:st("catalog.club_gift.select")})]})},Ol=function(e){var t=Tn().purse,n=void 0===t?null:t,r=nn(),a=r.catalogOptions,i=void 0===a?null:a,s=r.setCatalogOptions,o=void 0===s?null:s,u=i.clubGifts,d=void 0===u?null:u,j=Object(c.useCallback)((function(){return d?d.giftsAvailable>0?st("catalog.club_gift.available",["amount"],[d.giftsAvailable.toString()]):d.daysUntilNextGift>0?st("catalog.club_gift.days_until_next",["days"],[d.daysUntilNextGift.toString()]):n.isVip?st("catalog.club_gift.not_available"):st("catalog.club_gift.no_club"):""}),[d,n]),b=Object(c.useCallback)((function(e){Ha.confirm(st("catalog.club_gift.confirm"),(function(){ea(new l.Ch(e)),o((function(e){return e.clubGifts.giftsAvailable--,Object(bt.a)({},e)}))}),null)}),[o]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{truncate:!0,shrink:!0,fontWeight:"bold",children:j()}),Object($a.jsx)(sc,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:d.offers.length>0&&d.offers.map((function(e){return Object($a.jsx)(bl,{offer:e,isAvailable:d.getOfferExtraData(e.offerId).isSelectable&&d.giftsAvailable>0,onSelect:b},e.offerId)}))})]})},hl=function(e,t){if(!e)return null;var n={page:e,hideNavigation:t};switch(e.layoutCode){case"frontpage_featured":return null;case"frontpage4":return Object($a.jsx)(tl,Object(bt.a)({},n));case"pets":return Object($a.jsx)(jl,Object(bt.a)({},n));case"pets2":return Object($a.jsx)(Fo,Object(bt.a)({},n));case"pets3":return Object($a.jsx)(Mo,Object(bt.a)({},n));case"vip_buy":return Object($a.jsx)(Jo,Object(bt.a)({},n));case"guild_frontpage":return Object($a.jsx)(Po,Object(bt.a)({},n));case"guild_forum":return Object($a.jsx)(Uo,Object(bt.a)({},n));case"guild_custom_furni":return Object($a.jsx)(Do,Object(bt.a)({},n));case"club_gifts":return Object($a.jsx)(Ol,Object(bt.a)({},n));case"marketplace_own_items":return Object($a.jsx)(cl,Object(bt.a)({},n));case"marketplace":return Object($a.jsx)(dl,Object(bt.a)({},n));case"single_bundle":return Object($a.jsx)(qo,Object(bt.a)({},n));case"room_bundle":return Object($a.jsx)(Vo,Object(bt.a)({},n));case"spaces_new":return Object($a.jsx)(Qo,Object(bt.a)({},n));case"trophies":return Object($a.jsx)(Xo,Object(bt.a)({},n));case"info_loyalty":return Object($a.jsx)(Lo,Object(bt.a)({},n));case"badge_display":return Object($a.jsx)(So,Object(bt.a)({},n));default:return Object($a.jsx)(ko,Object(bt.a)({},n))}},fl=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=nn(),b=j.catalogOptions,O=void 0===b?null:b,h=j.setCatalogOptions,f=void 0===h?null:h,g=O.marketplaceConfiguration,m=void 0===g?null:g,v=Object(c.useCallback)((function(e){var t=e.getParser();f((function(e){var n=Object(bt.a)({},e);return n.marketplaceConfiguration=t,n}))}),[f]);dt(l.ce,v);var p=Object(c.useCallback)((function(e){a(e.item)}),[]);if(Qt(gt.POST_MARKETPLACE,p),Object(c.useEffect)((function(){r&&!m&&ea(new l.kc)}),[r,m]),Object(c.useEffect)((function(){if(r)return function(){return d(0)}}),[r]),!m||!r)return null;var x=r?st(r.isWallItem?"wallItem.name."+r.type:"roomItem.name."+r.type):"",_=r?st(r.isWallItem?"wallItem.desc."+r.type:"roomItem.desc."+r.type):"";return Object($a.jsxs)(Pc,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("inventory.marketplace.make_offer.title"),onCloseClick:function(e){return a(null)}}),Object($a.jsx)(Ec,{overflow:"hidden",children:Object($a.jsxs)(cc,{fullHeight:!0,children:[Object($a.jsx)(Jc,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:Object($a.jsx)(Kc,{productType:r.isWallItem?aa.WALL:aa.FLOOR,productClassId:r.type,extraData:r.extra.toString()})}),Object($a.jsxs)(Jc,{size:8,justifyContent:"between",overflow:"hidden",children:[Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:x}),Object($a.jsx)(Hi,{truncate:!0,shrink:!0,children:_})]}),Object($a.jsxs)(Jc,{overflow:"auto",children:[Object($a.jsx)(Hi,{italics:!0,children:st("inventory.marketplace.make_offer.expiration_info",["time"],[m.offerTime.toString()])}),Object($a.jsxs)("div",{className:"input-group has-validation",children:[Object($a.jsx)("input",{className:"form-control form-control-sm",type:"number",min:0,value:u,onChange:function(e){return d(parseInt(e.target.value))},placeholder:st("inventory.marketplace.make_offer.price_request")}),(u<m.minimumPrice||isNaN(u))&&Object($a.jsx)(tc,{className:"invalid-feedback d-block",children:st("inventory.marketplace.make_offer.min_price",["minprice"],[m.minimumPrice.toString()])}),u>m.maximumPrice&&!isNaN(u)&&Object($a.jsx)(tc,{className:"invalid-feedback d-block",children:st("inventory.marketplace.make_offer.max_price",["maxprice"],[m.maximumPrice.toString()])}),!(u<m.minimumPrice||u>m.maximumPrice||isNaN(u))&&Object($a.jsx)(tc,{className:"invalid-feedback d-block",children:st("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[m.commission.toString(),(u+m.commission).toString()])})]}),Object($a.jsx)(dc,{disabled:u<m.minimumPrice||u>m.maximumPrice||isNaN(u),onClick:function(){!r||u<=m.minimumPrice||Ha.confirm(st("inventory.marketplace.confirm_offer.info",["furniname","price"],[x,u.toString()]),(function(){ea(new l.Yd(u,r.isWallItem?2:1,r.id)),a(null)}),(function(){a(null)}),null,null,st("inventory.marketplace.confirm_offer.title"))},children:st("inventory.marketplace.make_offer.post")})]})]})]})})]})},gl=function(e){var t=nn(),n=t.isVisible,r=void 0!==n&&n,a=t.setIsVisible,i=void 0===a?null:a,s=t.rootNode,o=void 0===s?null:s,l=t.currentPage,u=void 0===l?null:l,d=t.navigationHidden,j=void 0!==d&&d,b=t.setNavigationHidden,O=void 0===b?null:b,h=t.activeNodes,f=void 0===h?[]:h,g=t.searchResult,m=void 0===g?null:g,v=t.setSearchResult,p=void 0===v?null:v,x=t.openPageByName,_=void 0===x?null:x,E=t.openPageByOfferId,I=void 0===E?null:E,y=t.activateNode,C=void 0===y?null:y;return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void i(!0);case"hide":return void i(!1);case"toggle":return void i((function(e){return!e}));case"open":if(t.length>2)if(4===t.length){if("offerId"===t[2])return void I(parseInt(t[3]))}else _(t[2]);else i(!0);return}},eventUrlPrefix:"catalog/"};return R(e),function(){return B(e)}}),[i,I,_]),Object($a.jsxs)($a.Fragment,{children:[r&&Object($a.jsxs)(Pc,{uniqueKey:"catalog",className:"nitro-catalog",children:[Object($a.jsx)(Tc,{headerText:st("catalog.title"),onCloseClick:function(e){return i(!1)}}),Object($a.jsx)(Di,{children:o&&o.children.length>0&&o.children.map((function(e){return e.isVisible?Object($a.jsx)(Ai,{isActive:e.isActive,onClick:function(t){m&&p(null),C(e)},children:e.localization},e.pageId):null}))}),Object($a.jsx)(Ec,{children:Object($a.jsxs)(cc,{children:[!j&&Object($a.jsx)(Jc,{size:3,overflow:"hidden",children:f&&f.length>0&&Object($a.jsx)(bo,{node:f[0]})}),Object($a.jsx)(Jc,{size:j?12:9,overflow:"hidden",children:hl(u,(function(){return O(!0)}))})]})})]}),Object($a.jsx)(so,{}),Object($a.jsx)(fl,{})]})},ml=n(45),vl=Object(c.createContext)({chatHistoryState:null,roomHistoryState:null}),pl=function(e){return Object($a.jsx)(vl.Provider,{value:e.value,children:e.children})},xl=Object(d.a)((function e(){Object(u.a)(this,e)}));xl.TYPE_CHAT=1,xl.TYPE_ROOM_INFO=2;var _l=function(){var e=new Date;return"".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},El=function(e){var t=Object(c.useContext)(vl),n=t.chatHistoryState,r=void 0===n?null:n,a=t.roomHistoryState,i=void 0===a?null:a,s=Object(c.useState)(!1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Object(c.useCallback)((function(e){e.id=r.chats.length,r.chats.push(e),r.chats.length>1e3&&r.chats.shift(),r.notify()}),[r]),O=Object(c.useCallback)((function(e){i.roomHistory.push(e),i.roomHistory.length>10&&i.roomHistory.shift(),i.notify()}),[i]),h=Object(c.useCallback)((function(e){var t=ue();if(t){var n=t.userDataManager.getUserDataByIndex(e.objectId);if(n){var r=_l(),a={id:-1,entityId:n.webID,name:n.name,look:n.figure,entityType:n.type,message:e.message,timestamp:r,type:xl.TYPE_CHAT,roomId:t.roomId};b(a)}}}),[b]);Yt(l.Ng.CHAT_EVENT,h);var f=Object(c.useCallback)((function(e){switch(e.type){case l.Sg.STARTED:j(!0);case l.Sg.ENDED:}}),[]);Yt(l.Sg.ENDED,f),Yt(l.Sg.STARTED,f);var g=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=ue();if(n&&n.roomId===t.data.roomId&&d){var r={id:-1,entityId:t.data.roomId,name:t.data.roomName,timestamp:_l(),type:xl.TYPE_ROOM_INFO,roomId:t.data.roomId};b(r);var a={id:t.data.roomId,name:t.data.roomName};O(a),j(!1)}}}),[b,O,d]);return dt(l.jc,g),null},Il=function(){function e(){Object(u.a)(this,e),this._chats=void 0,this._notifier=void 0,this._chats=[]}return Object(d.a)(e,[{key:"notify",value:function(){this._notifier&&this._notifier()}},{key:"chats",get:function(){return this._chats}},{key:"notifier",get:function(){return this._notifier},set:function(e){this._notifier=e}}]),e}(),yl=null,Cl=function(){return yl},Tl=function(){function e(){Object(u.a)(this,e),this._roomHistory=void 0,this._notifier=void 0,this._roomHistory=[]}return Object(d.a)(e,[{key:"roomHistory",get:function(){return this._roomHistory}},{key:"notifier",get:function(){return this._notifier},set:function(e){this._notifier=e}},{key:"notify",value:function(){this._notifier&&this._notifier()}}]),e}(),Sl=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=(s[0],s[1]),u=Object(c.useState)(-1),d=Object(o.a)(u,2),j=(d[0],d[1]),b=Object(c.useState)(new Il),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(new Tl),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useRef)(null),_=Object(c.useMemo)((function(){return new ml.c({defaultHeight:25,fixedWidth:!0})}),[]),E=function(e){var t=h.chats[e.index];e.index;return Object($a.jsx)(ml.b,{cache:_,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object($a.jsxs)(lc,{style:e.style,className:"p-1",gap:1,children:[Object($a.jsx)(Hi,{variant:"muted",children:t.timestamp}),t.type===xl.TYPE_CHAT&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},pointer:!0,noWrap:!0,dangerouslySetInnerHTML:{__html:t.name+":"}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},textBreak:!0,wrap:!0,grow:!0,children:t.message})]}),t.type===xl.TYPE_ROOM_INFO&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("i",{className:"icon icon-small-room"}),Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},textBreak:!0,wrap:!0,grow:!0,children:t.name})]})]},e.key)},e.key)},I=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}}),[]);return Object(c.useEffect)((function(){var e={linkReceived:I,eventUrlPrefix:"chat-history/"};return R(e),function(){return B(e)}}),[I]),Object(c.useEffect)((function(){var e=new Il,t=new Tl;return yl=e,e.notifier=function(){return l((function(e){return e+1}))},t.notifier=function(){return j((function(e){return e+1}))},f(e),p(t),function(){e.notifier=null,t.notifier=null}}),[]),Object(c.useEffect)((function(){x&&x.current&&r&&x.current.scrollToRow(-1)}),[r]),Object($a.jsxs)(pl,{value:{chatHistoryState:h,roomHistoryState:v},children:[Object($a.jsx)(El,{}),r&&Object($a.jsxs)(Pc,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("room.chathistory.button.text"),onCloseClick:function(e){return a(!1)}}),Object($a.jsx)(Ec,{children:Object($a.jsx)(ml.a,{defaultWidth:300,defaultHeight:200,onResize:function(e){return _.clearAll()},children:function(e){var t=e.height,n=e.width;return Object($a.jsx)(ml.d,{ref:x,width:n,height:t,rowCount:h.chats.length,rowHeight:_.rowHeight,className:"chat-history-list",rowRenderer:E,deferredMeasurementCache:_})}})})]})]})},Nl=32,Rl=64,kl="x0123456789abcdefghijklmnopq",Al=Object(d.a)((function e(){Object(u.a)(this,e)}));Al.DOOR=0,Al.UP=1,Al.DOWN=2,Al.SET=3,Al.UNSET=4;var wl={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"},Dl=function(){function e(){Object(u.a)(this,e),this._currentAction=void 0,this._currentHeight=void 0,this._currentAction=Al.SET,this._currentHeight=kl[1]}return Object(d.a)(e,[{key:"currentAction",get:function(){return this._currentAction},set:function(e){this._currentAction=e}},{key:"currentHeight",get:function(){return this._currentHeight},set:function(e){this._currentHeight=e}},{key:"clear",value:function(){this._currentAction=Al.SET,this._currentHeight=kl[1]}}]),e}(),Ul=function(){function e(t,n){Object(u.a)(this,e),this._height=void 0,this._isBlocked=void 0,this._height=t,this._isBlocked=n}return Object(d.a)(e,[{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"isBlocked",get:function(){return this._isBlocked},set:function(e){this._isBlocked=e}}]),e}(),Pl=function(e,t){var n=e*Nl/2-t*Nl/2;return[n+=1024,e*Nl/4+t*Nl/4]},Ll=function(e,t){var n=e-1024;return[(n/16+t/8)/2,(t/8-n/16)/2]},Ml=function(e){switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},Fl=function(e){switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}},Hl=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(){var e;Object(u.a)(this,n);return(e=t.call(this,{width:2068,height:1124,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}))._tilemap=void 0,e._width=void 0,e._height=void 0,e._isHolding=void 0,e._doorLocation=void 0,e._lastUsedTile=void 0,e._tilemapRenderer=void 0,e._actionSettings=void 0,e._isInitialized=void 0,e._assetCollection=void 0,e._tilemap=[],e._doorLocation=new l.Se(0,0),e._width=0,e._height=0,e._isHolding=!1,e._lastUsedTile=new l.Se(-1,-1),e._actionSettings=new Dl,e}return Object(d.a)(n,[{key:"initialize",value:function(){if(!this._isInitialized){var e=ba().asset.getCollection("floor_editor");e&&(this._assetCollection=e,this._tilemapRenderer=new l.Xe(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}}},{key:"registerEventListeners",value:function(){var e=this,t=new l.Se;this._tilemapRenderer.containsPoint=function(n){return e._tilemapRenderer.worldTransform.applyInverse(n,t),e.tileHitDetection(t,!1)},this._tilemapRenderer.on("pointerup",(function(){e._isHolding=!1})),this._tilemapRenderer.on("pointerout",(function(){e._isHolding=!1})),this._tilemapRenderer.on("pointerdown",(function(t){if(t.data.originalEvent instanceof PointerEvent||t.data.originalEvent instanceof TouchEvent){var n=t.data.originalEvent;if(!(n instanceof MouseEvent&&2===n.button)){var r=t.data.global;e.tileHitDetection(r,!0)}}})),this._tilemapRenderer.on("click",(function(t){if(t.data.originalEvent instanceof PointerEvent&&2!==t.data.originalEvent.button){var n=t.data.global;e.tileHitDetection(n,!0,!0)}}))}},{key:"tileHitDetection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._tilemapRenderer.pointsBuf,a=l.ef,c=r.length;t&&(this._isHolding=!0);for(var i=0;i<c;i+=a){var s=i+a,u=r.slice(i,s),d=Nl,j=16,b=Math.floor(e.x),O=Math.floor(e.y),h=u[2],f=u[3],g=h+d/2,m=f+j/2,v=Math.abs(b-g),p=Math.abs(O-m),x=v/(.5*d)+p/(.5*j)<=1;if(x){if(this._isHolding){var _=Ll(h,f),E=Object(o.a)(_,2),I=E[0],y=E[1];n?this.onClick(I,y):this._lastUsedTile.x===I&&this._lastUsedTile.y===y||(this._lastUsedTile.x=I,this._lastUsedTile.y=y,this.onClick(I,y))}return!0}}return!1}},{key:"onClick",value:function(e,t){var n=this._tilemap[t][e],r=kl.indexOf(n.height),a=0;switch(this._actionSettings.currentAction){case Al.DOOR:return void("x"!==n.height&&(this._doorLocation.x=e,this._doorLocation.y=t,this.renderTiles()));case Al.UP:if("x"===n.height)return;a=r+1;break;case Al.DOWN:if("x"===n.height||r<=1)return;a=r-1;break;case Al.SET:a=kl.indexOf(this._actionSettings.currentHeight);break;case Al.UNSET:a=0}if(-1!==a&&r!==a){a>0&&(e+1>this._width&&(this._width=e+1),t+1>this._height&&(this._height=t+1));var c=kl[a];c&&(n.isBlocked||(this._tilemap[t][e].height=c,this.renderTiles()))}}},{key:"renderTiles",value:function(){this.tilemapRenderer.clear();for(var e=0;e<this._tilemap.length;e++)for(var t=0;t<this.tilemap[e].length;t++){var r=this.tilemap[e][t],a=r.height;this._doorLocation.x===t&&this._doorLocation.y===e&&(a=n.TILE_DOOR),r.isBlocked&&(a=n.TILE_BLOCKED);var c=Pl(t,e),i=Object(o.a)(c,2),s=i[0],l=i[1];this._tilemapRenderer.tile(this._assetCollection.getTexture("floor_editor_".concat(a)),s,l)}}},{key:"setTilemap",value:function(e,t){this._tilemap=[];for(var n=e.split("\r"),r=0,a=n.length,c=0;c<a;c++){var i=n[c];0!==i.length?i.length>r&&(r=i.length):(n.splice(c,1),a=n.length,c--)}for(var s=0;s<a;s++){this._tilemap[s]=[];for(var o=n[s],l=0;l<r;l++){var u=t[s]&&t[s][l]||!1,d=o[l];this._tilemap[s][l]=new Ul("x"!==d&&"X"!==d&&d?d:"x",u)}for(var j=r;j<Rl;j++)this.tilemap[s][j]=new Ul("x",!1)}for(var b=a;b<Rl;b++){this.tilemap[b]||(this.tilemap[b]=[]);for(var O=0;O<Rl;O++)this.tilemap[b][O]=new Ul("x",!1)}this._width=r,this._height=a}},{key:"getCurrentTilemapString",value:function(){if("x"===this._tilemap[this._height-1][this._width-1].height){this._width=-1,this._height=-1;for(var e=63;e>=0;e--)if(this._tilemap[e])for(var t=63;t>=0;t--){if(this._tilemap[e][t])"x"!==this._tilemap[e][t].height&&(t+1>this._width&&(this._width=t+1),e+1>this._height&&(this._height=e+1))}}for(var n=[],r=0;r<this._height;r++){for(var a=[],c=0;c<this._width;c++){var i=this._tilemap[r][c];a[c]=i.height}n[r]=a.join("")}return n.join("\r")}},{key:"clear",value:function(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}},{key:"tilemapRenderer",get:function(){return this._tilemapRenderer}},{key:"tilemap",get:function(){return this._tilemap}},{key:"doorLocation",get:function(){return this._doorLocation},set:function(e){this._doorLocation=e}},{key:"actionSettings",get:function(){return this._actionSettings}}],[{key:"instance",get:function(){return n._INSTANCE||(n._INSTANCE=new n),n._INSTANCE}}]),n}(l.sf);Hl._INSTANCE=null,Hl.TILE_BLOCKED="r_blocked",Hl.TILE_DOOR="r_door";var Bl=Object(c.createContext)({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),Gl=function(e){return Object($a.jsx)(Bl.Provider,Object(bt.a)({},e))},Wl=function(){return Object(c.useContext)(Bl)},Vl=["gap","children"],ql=function(e){var t=e.gap,n=void 0===t?1:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,Vl),s=Object(c.useState)(!1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Wl(),m=g.originalFloorplanSettings,v=void 0===m?null:m,p=g.setOriginalFloorplanSettings,x=void 0===p?null:p,_=g.setVisualizationSettings,E=void 0===_?null:_,I=Object(c.useRef)(null),y=Object(c.useCallback)((function(e){var t=e.getParser();x((function(e){var n=Object(bt.a)({},e);return n.reservedTiles=t.blockedTilesMap,Hl.instance.setTilemap(n.tilemap,n.reservedTiles),n})),j(!0),I.current.scrollTo(Hl.instance.view.width/3,0)}),[x]);dt(l.Jg,y);var C=Object(c.useCallback)((function(e){var t=e.getParser();x((function(e){var n=Object(bt.a)({},e);return n.entryPoint=[t.x,t.y],n.entryPointDir=t.direction,n})),E((function(e){var n=Object(bt.a)({},e);return n.entryPointDir=t.direction,n})),Hl.instance.doorLocation=new l.Se(t.x,t.y),f(!0)}),[x,E]);dt(l.sg,C);var T=function(e){var t=I.current;if(t)switch(e){case"up":t.scrollBy({top:-10});break;case"down":t.scrollBy({top:10});break;case"left":t.scrollBy({left:-10});break;case"right":t.scrollBy({left:10})}};return Object(c.useEffect)((function(){return function(){Hl.instance.clear(),E((function(e){return{wallHeight:v.wallHeight,thicknessWall:v.thicknessWall,thicknessFloor:v.thicknessFloor,entryPointDir:e.entryPointDir}}))}}),[v.thicknessFloor,v.thicknessWall,v.wallHeight,E]),Object(c.useEffect)((function(){h&&d&&Hl.instance.renderTiles()}),[h,d]),Object(c.useEffect)((function(){ea(new l.tc),ea(new l.pc),Hl.instance.tilemapRenderer.interactive=!0,I.current&&I.current.appendChild(Hl.instance.renderer.view)}),[]),Object($a.jsxs)(Jc,Object(bt.a)(Object(bt.a)({gap:n},i),{},{children:[Object($a.jsxs)(cc,{overflow:"hidden",gap:1,children:[Object($a.jsx)(Jc,{center:!0,size:1,children:Object($a.jsx)(dc,{className:"d-md-none",onClick:function(e){return T("left")},children:Object($a.jsx)(mc.a,{icon:"arrow-left"})})}),Object($a.jsxs)(Jc,{overflow:"hidden",size:10,gap:1,children:[Object($a.jsx)(lc,{justifyContent:"center",className:"d-md-none",children:Object($a.jsx)(dc,{shrink:!0,onClick:function(e){return T("up")},children:Object($a.jsx)(mc.a,{icon:"arrow-up"})})}),Object($a.jsx)(tc,{overflow:"auto",innerRef:I}),Object($a.jsx)(lc,{justifyContent:"center",className:"d-md-none",children:Object($a.jsx)(dc,{shrink:!0,onClick:function(e){return T("down")},children:Object($a.jsx)(mc.a,{icon:"arrow-down"})})})]}),Object($a.jsx)(Jc,{center:!0,size:1,children:Object($a.jsx)(dc,{className:"d-md-none",onClick:function(e){return T("right")},children:Object($a.jsx)(mc.a,{icon:"arrow-right"})})})]}),a]}))},Yl=function(e){return e.replace(/\r\n|\r|\n/g,"\n").toLowerCase()},zl=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=Object(c.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Wl().originalFloorplanSettings,d=void 0===u?null:u;return kn((function(){s(Yl(d.tilemap))})),Object($a.jsxs)(Pc,{theme:"primary-slim",className:"floorplan-import-export",children:[Object($a.jsx)(Tc,{headerText:st("floor.plan.editor.import.export"),onCloseClick:n}),Object($a.jsxs)(Ec,{children:[Object($a.jsx)("textarea",{className:"h-100",value:i,onChange:function(e){return s(e.target.value)}}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsx)(dc,{onClick:function(e){return s(Yl(d.tilemap))},children:st("floor.plan.editor.revert.to.last.received.map")}),Object($a.jsx)(dc,{onClick:function(){ea(new l.oi(i.split("\n").join("\r"),d.entryPoint[0],d.entryPoint[1],d.entryPointDir,Ml(d.thicknessWall),Ml(d.thicknessFloor),d.wallHeight-1))},children:st("floor.plan.editor.save")})]})]})]})},Kl=["style"],Ql=function(e){var t=Wl(),n=t.visualizationSettings,r=void 0===n?null:n,a=t.setVisualizationSettings,i=void 0===a?null:a,s=Object(c.useState)(Al.SET),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=function(e){d(e),Hl.instance.actionSettings.currentAction=e},g=function(e){(isNaN(e)||e<=0)&&(e=0),e>16&&(e=16),i((function(t){var n=Object(bt.a)({},t);return n.wallHeight=e,n}))};return Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)(Jc,{size:5,gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("floor.plan.editor.draw.mode")}),Object($a.jsxs)(lc,{gap:3,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(ii,{itemActive:u===Al.SET,onClick:function(e){return f(Al.SET)},children:Object($a.jsx)("i",{className:"icon icon-set-tile"})}),Object($a.jsx)(ii,{itemActive:u===Al.UNSET,onClick:function(e){return f(Al.UNSET)},children:Object($a.jsx)("i",{className:"icon icon-unset-tile"})})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(ii,{itemActive:u===Al.UP,onClick:function(e){return f(Al.UP)},children:Object($a.jsx)("i",{className:"icon icon-increase-height"})}),Object($a.jsx)(ii,{itemActive:u===Al.DOWN,onClick:function(e){return f(Al.DOWN)},children:Object($a.jsx)("i",{className:"icon icon-decrease-height"})})]}),Object($a.jsx)(ii,{itemActive:u===Al.DOOR,onClick:function(e){return f(Al.DOOR)},children:Object($a.jsx)("i",{className:"icon icon-set-door"})})]})]}),Object($a.jsxs)(Jc,{alignItems:"center",size:4,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:st("floor.plan.editor.enter.direction")}),Object($a.jsx)("i",{className:"icon icon-door-direction-".concat(r.entryPointDir," cursor-pointer"),onClick:function(){i((function(e){var t=Object(bt.a)({},e);return t.entryPointDir<7?++t.entryPointDir:t.entryPointDir=0,t}))}})]}),Object($a.jsxs)(Jc,{size:3,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:st("floor.editor.wall.height")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(mc.a,{icon:"caret-left",className:"cursor-pointer",onClick:function(){var e=r.wallHeight-1;e<=0&&(e=0),g(e)}}),Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm quantity-input",value:r.wallHeight,onChange:function(e){return g(e.target.valueAsNumber)}}),Object($a.jsx)(mc.a,{icon:"caret-right",className:"cursor-pointer",onClick:function(){var e=r.wallHeight+1;e>16&&(e=16),g(e)}})]})]})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)(Jc,{size:6,children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:[st("floor.plan.editor.tile.height"),": ",O]}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:26,step:1,value:O,onChange:function(e){return t=e,(isNaN(t)||t<=0)&&(t=0),t>26&&(t=26),h(t),void(Hl.instance.actionSettings.currentHeight=t.toString(36));var t},renderThumb:function(e,t){var n=e.style,r=Object(Za.a)(e,Kl);return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({style:Object(bt.a)({backgroundColor:"#".concat(wl[t.valueNow.toString(33)])},n)},r),{},{children:t.valueNow}))}})]}),Object($a.jsxs)(Jc,{size:6,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:st("floor.plan.editor.room.options")}),Object($a.jsxs)(lc,{className:"align-items-center",children:[Object($a.jsxs)("select",{className:"form-control form-control-sm",value:r.thicknessWall,onChange:function(e){return t=parseInt(e.target.value),void i((function(e){var n=Object(bt.a)({},e);return n.thicknessWall=t,n}));var t},children:[Object($a.jsx)("option",{value:0,children:st("navigator.roomsettings.wall_thickness.thinnest")}),Object($a.jsx)("option",{value:1,children:st("navigator.roomsettings.wall_thickness.thin")}),Object($a.jsx)("option",{value:2,children:st("navigator.roomsettings.wall_thickness.normal")}),Object($a.jsx)("option",{value:3,children:st("navigator.roomsettings.wall_thickness.thick")})]}),Object($a.jsxs)("select",{className:"form-control form-control-sm",value:r.thicknessFloor,onChange:function(e){return t=parseInt(e.target.value),void i((function(e){var n=Object(bt.a)({},e);return n.thicknessFloor=t,n}));var t},children:[Object($a.jsx)("option",{value:0,children:st("navigator.roomsettings.floor_thickness.thinnest")}),Object($a.jsx)("option",{value:1,children:st("navigator.roomsettings.floor_thickness.thin")}),Object($a.jsx)("option",{value:2,children:st("navigator.roomsettings.floor_thickness.normal")}),Object($a.jsx)("option",{value:3,children:st("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},Xl=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useCallback)((function(e){a(!1)}),[]);qt(l.ig.DISPOSED,p);var x=Object(c.useCallback)((function(e){var t=e.getParser();h((function(e){var n=Object(bt.a)({},e);return n.tilemap=t.model,n.wallHeight=t.wallHeight+1,n})),v((function(e){var n=Object(bt.a)({},e);return n.wallHeight=t.wallHeight+1,n}))}),[]);dt(l.Cb,x);var _=Object(c.useCallback)((function(e){var t=e.getParser();h((function(e){var n=Object(bt.a)({},e);return n.thicknessFloor=Fl(t.thicknessFloor),n.thicknessWall=Fl(t.thicknessWall),n})),v((function(e){var n=Object(bt.a)({},e);return n.thicknessFloor=Fl(t.thicknessFloor),n.thicknessWall=Fl(t.thicknessWall),n}))}),[]);return dt(l.rh,_),Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}},eventUrlPrefix:"floor-editor/"};return R(e),function(){return B(e)}}),[]),Object(c.useEffect)((function(){Hl.instance.initialize()}),[]),Object($a.jsxs)(Gl,{value:{originalFloorplanSettings:O,setOriginalFloorplanSettings:h,visualizationSettings:m,setVisualizationSettings:v},children:[r&&Object($a.jsxs)(Pc,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("floor.plan.editor.title"),onCloseClick:function(){return a(!1)}}),Object($a.jsxs)(Ec,{overflow:"hidden",children:[Object($a.jsx)(Ql,{}),Object($a.jsx)(ql,{overflow:"hidden"}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsx)(dc,{onClick:function(){v({wallHeight:O.wallHeight,thicknessWall:O.thicknessWall,thicknessFloor:O.thicknessFloor,entryPointDir:O.entryPointDir}),Hl.instance.doorLocation=new l.Se(O.entryPoint[0],O.entryPoint[1]),Hl.instance.setTilemap(O.tilemap,O.reservedTiles),Hl.instance.renderTiles()},children:st("floor.plan.editor.reload")}),Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{disabled:!0,children:st("floor.plan.editor.preview")}),Object($a.jsx)(dc,{onClick:function(e){return d(!0)},children:st("floor.plan.editor.import.export")}),Object($a.jsx)(dc,{onClick:function(){ea(new l.oi(Hl.instance.getCurrentTilemapString(),Hl.instance.doorLocation.x,Hl.instance.doorLocation.y,m.entryPointDir,Ml(m.thicknessWall),Ml(m.thicknessFloor),m.wallHeight-1))},children:st("floor.plan.editor.save")})]})]})]})]}),u&&Object($a.jsx)(zl,{onCloseClick:function(){return d(!1)}})]})},Jl=function(e){var t=e.friend,n=void 0===t?null:t,r=Object(c.useState)(!1),a=Object(o.a)(r,2),i=a[0],s=a[1],u=an().followFriend,d=void 0===u?null:u,j=Object(c.useRef)();return Object(c.useEffect)((function(){var e=function(e){var t=j.current;t&&(e.target===t||t.contains(e.target)||s(!1))};return document.addEventListener(l.xe.MOUSE_CLICK,e),function(){return document.removeEventListener(l.xe.MOUSE_CLICK,e)}}),[]),n?Object($a.jsxs)("div",{style:{backgroundColor:"var(--test-galaxytwo)"},ref:j,className:"btn friend-bar-item btn-lg "+(i?"friend-bar-item-active":""),onMouseOver:function(e){return s((function(e){return!e}))},onMouseOut:function(e){return s((function(e){return!e}))},children:[Object($a.jsxs)("div",{className:"friend-bar-item-head position-absolute ".concat(n.id>0?"avatar":"group"),children:[n.id>0&&Object($a.jsx)(Mc,{className:"image-friendzone",figure:n.figure,direction:2}),n.id<=0&&Object($a.jsx)(Gc,{isGroup:!0,badgeCode:n.figure})]}),Object($a.jsx)("div",{className:"text-truncate",style:{fontSize:"15px",marginTop:"3px",marginBottom:"3px",marginLeft:"7px"},children:n.name}),i&&Object($a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:function(e){return Ea(n.id)}}),n.followingAllowed&&Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:function(e){return d(n)}}),Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:function(e){return Ga(n.id)}})]})]}):Object($a.jsxs)("div",{style:{backgroundColor:"var(--test-galaxytwo)"},ref:j,className:"btn btn-lg friend-bar-item friend-bar-search",children:[Object($a.jsx)("img",{className:"position-absolute",style:{left:"2px",top:"2px"},src:"https://lavvos.eu/swfs/images/head.png"}),Object($a.jsx)("div",{className:"text-truncate",style:{fontSize:"15px",marginTop:"3px",marginBottom:"3px",marginLeft:"3px"},children:st("friend.bar.find.title")})]})},Zl=function(e){var t=e.onlineFriends,n=void 0===t?null:t,r=Object(c.useState)(0),a=Object(o.a)(r,2),i=a[0],s=a[1],l=Object(c.useRef)();return Object($a.jsxs)(lc,{innerRef:l,alignItems:"center",className:"friend-bar",children:[Object($a.jsx)(dc,{className:"friend-bar-button",disabled:i<=0,onClick:function(e){return s(i-1)},children:Object($a.jsx)(mc.a,{icon:"chevron-left"})}),Array.from(Array(3),(function(e,t){return Object($a.jsx)(Jl,{friend:n[i+t]||null},t)})),Object($a.jsx)(dc,{className:"friend-bar-button",disabled:!(n.length>3&&i+3<=n.length-1),onClick:function(e){return s(i+1)},children:Object($a.jsx)(mc.a,{icon:"chevron-right"})})]})},$l=function(e){var t=e.friend,n=void 0===t?null:t,r=e.selected,a=void 0!==r&&r,i=e.selectFriend,s=void 0===i?null:i,l=Object(c.useState)(!1),u=Object(o.a)(l,2),d=u[0],j=u[1],b=an(),O=b.followFriend,h=void 0===O?null:O,f=b.updateRelationship,g=void 0===f?null:f,m=function(e,t){e.stopPropagation(),g(n,t),j(!1)};return n?Object($a.jsxs)(gc,{justifyContent:"between",className:"px-2 py-1 ".concat(a&&"bg-primary text-white"),onClick:function(e){return s(n.id)},children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(tc,{onClick:function(e){return e.stopPropagation()},children:Object($a.jsx)(Ri,{userId:n.id})}),Object($a.jsx)("div",{children:n.name})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[!d&&Object($a.jsxs)($a.Fragment,{children:[n.followingAllowed&&Object($a.jsx)(tc,{pointer:!0,onClick:function(e){e.stopPropagation(),h(n)},className:"nitro-friends-spritesheet icon-follow",title:st("friendlist.tip.follow")}),n.online&&Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:function(e){e.stopPropagation(),Ea(n.id)},title:st("friendlist.tip.im")}),n.id>0&&Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-".concat(function(){if(!n)return"none";switch(n.relationshipStatus){case qr.RELATIONSHIP_HEART:return"heart";case qr.RELATIONSHIP_SMILE:return"smile";case qr.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}}()," cursor-pointer"),onClick:function(e){e.stopPropagation(),j(!0)},title:st("infostand.link.relationship")})]}),d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:function(e){return m(e,qr.RELATIONSHIP_HEART)}}),Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:function(e){return m(e,qr.RELATIONSHIP_SMILE)}}),Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:function(e){return m(e,qr.RELATIONSHIP_BOBBA)}}),Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:function(e){return m(e,qr.RELATIONSHIP_NONE)}})]})]})]}):null},eu=function(e){var t=e.list,n=void 0===t?null:t,r=e.selectedFriendsIds,a=void 0===r?null:r,c=e.selectFriend,i=void 0===c?null:c;return n&&n.length?Object($a.jsx)($a.Fragment,{children:n.map((function(e,t){return Object($a.jsx)($l,{friend:e,selected:a&&a.indexOf(e.id)>=0,selectFriend:i},t)}))}):null},tu=function(e){var t=e.request,n=void 0===t?null:t,r=an().requestResponse,a=void 0===r?null:r;return n?Object($a.jsxs)(gc,{justifyContent:"between",className:"px-2 py-1",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.id}),Object($a.jsx)("div",{children:n.name})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:function(e){return a(n.id,!0)}}),Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:function(e){return a(n.id,!1)}})]})]}):null},nu=["children"],ru=function(e){var t=e.children,n=void 0===t?null:t,r=Object(Za.a)(e,nu),a=an(),c=a.requests,i=void 0===c?[]:c,s=a.requestResponse,o=void 0===s?null:s;return i.length?Object($a.jsxs)(pc,Object(bt.a)(Object(bt.a)({},r),{},{children:[Object($a.jsxs)(Jc,{fullHeight:!0,justifyContent:"between",gap:1,children:[Object($a.jsx)(Jc,{gap:0,children:i.map((function(e,t){return Object($a.jsx)(tu,{request:e},t)}))}),Object($a.jsx)(lc,{justifyContent:"center",className:"px-2 py-1",children:Object($a.jsx)(dc,{onClick:function(e){return o(-1,!1)},children:st("friendlist.requests.dismissall")})})]}),n]})):null},au=function(e){var t=e.selectedFriendsIds,n=void 0===t?null:t,r=e.removeFriendsText,a=void 0===r?null:r,c=e.removeSelectedFriends,i=void 0===c?null:c,s=e.onCloseClick,o=void 0===s?null:s;return Object($a.jsxs)(Pc,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("friendlist.removefriendconfirm.title"),onCloseClick:o}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsx)("div",{children:a}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",disabled:0===n.length,onClick:i,children:st("generic.ok")}),Object($a.jsx)(dc,{fullWidth:!0,onClick:o,children:st("generic.cancel")})]})]})]})},cu=function(e){var t=e.selectedFriendsIds,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=e.sendRoomInvite,s=void 0===i?null:i,l=Object(c.useState)(""),u=Object(o.a)(l,2),d=u[0],j=u[1];return Object($a.jsxs)(Pc,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("friendlist.invite.title"),onCloseClick:a}),Object($a.jsxs)(Ec,{className:"text-black",children:[st("friendlist.invite.summary",["count"],[n.length.toString()]),Object($a.jsx)("textarea",{className:"form-control",value:d,onChange:function(e){return j(e.target.value)}}),Object($a.jsx)(Hi,{center:!0,className:"bg-muted rounded p-1",children:st("friendlist.invite.note")}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"success",disabled:0===d.length||0===n.length,onClick:function(){return s(d)},children:st("friendlist.invite.send")}),Object($a.jsx)(dc,{fullWidth:!0,onClick:a,children:st("generic.cancel")})]})]})]})},iu=function(e){var t=Object.assign({},e),n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],f=O[1],g=an(),m=g.canRequestFriend,v=void 0===m?null:m,p=g.requestFriend,x=void 0===p?null:p,_=Object(c.useCallback)((function(e){var t=e.getParser();j(t.friends),f(t.others)}),[]);return dt(l.Dd,_),Object(c.useEffect)((function(){if(a&&a.length){var e=setTimeout((function(){a&&a.length&&ea(new l.Cd(a))}),500);return function(){return clearTimeout(e)}}}),[a]),Object($a.jsxs)(pc,Object(bt.a)(Object(bt.a)({},t),{},{children:[Object($a.jsx)("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:st("generic.search"),value:a,maxLength:50,onChange:function(e){return i(e.target.value)}}),Object($a.jsxs)(Jc,{children:[d&&Object($a.jsxs)($a.Fragment,{children:[0===d.length&&Object($a.jsx)(Hi,{bold:!0,small:!0,className:"px-2 py-1",children:st("friendlist.search.nofriendsfound")}),d.length>0&&Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{bold:!0,small:!0,className:"px-2 py-1",children:st("friendlist.search.friendscaption",["cnt"],[d.length.toString()])}),Object($a.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object($a.jsx)(Jc,{gap:0,children:d.map((function(e){return Object($a.jsxs)(gc,{justifyContent:"between",className:"px-2 py-1",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:e.avatarId}),Object($a.jsx)("div",{children:e.avatarName})]}),Object($a.jsx)(lc,{alignItems:"center",gap:1,children:e.isAvatarOnline&&Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:function(t){return Ea(e.avatarId)},title:st("friendlist.tip.im")})})]},e.avatarId)}))})]})]}),h&&Object($a.jsxs)($a.Fragment,{children:[0===h.length&&Object($a.jsx)(Hi,{bold:!0,small:!0,className:"px-2 py-1",children:st("friendlist.search.noothersfound")}),h.length>0&&Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{bold:!0,small:!0,className:"px-2 py-1",children:st("friendlist.search.otherscaption",["cnt"],[h.length.toString()])}),Object($a.jsx)("hr",{className:"mx-2 mt-0 mb-1 text-black"}),Object($a.jsx)(Jc,{gap:0,children:h.map((function(e){return Object($a.jsxs)(gc,{justifyContent:"between",className:"px-2 py-1",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:e.avatarId}),Object($a.jsx)("div",{children:e.avatarName})]}),Object($a.jsx)(lc,{alignItems:"center",gap:1,children:v(e.avatarId)&&Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:function(t){return x(e.avatarId,e.avatarName)},title:st("friendlist.tip.addfriend")})})]},e.avatarId)}))})]})]})]})]}))},su=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(!1),m=Object(o.a)(g,2),v=m[0],p=m[1],x=an(),_=x.onlineFriends,E=void 0===_?[]:_,I=x.offlineFriends,y=void 0===I?[]:I,C=x.requests,T=void 0===C?[]:C,S=x.requestFriend,N=void 0===S?null:S,k=Object(c.useMemo)((function(){if(!d||!d.length)return"";var e,t=[],n=Object(s.a)(d);try{var r=function(){var n=e.value,r=E.find((function(e){return e.id===n}));if(r||(r=y.find((function(e){return e.id===n}))),!r)return"continue";t.push(r.name)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return st("friendlist.removefriendconfirm.userlist",["user_names"],[t.join(", ")])}),[y,E,d]),A=Object(c.useCallback)((function(e){e<0||j((function(t){var n=Object(ut.a)(t),r=n.indexOf(e);return r>-1?n.splice(r,1):n.push(e),n}))}),[j]);return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}));case"request":if(t.length<4)return;N(parseInt(t[2]),t[3])}},eventUrlPrefix:"friends/"};return R(e),function(){return B(e)}}),[N]),r?Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Pc,{className:"nitro-friends animate__animated animate__bounceInUp",uniqueKey:"nitro-friends",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("friendlist.friends"),onCloseClick:function(e){return a(!1)}}),Object($a.jsxs)(Ec,{overflow:"hidden",gap:1,className:"text-black p-0",children:[Object($a.jsxs)(xc,{fullHeight:!0,overflow:"hidden",children:[Object($a.jsx)(pc,{headerText:st("friendlist.friends")+" (".concat(E.length,")"),isExpanded:!0,children:Object($a.jsx)(eu,{list:E,selectedFriendsIds:d,selectFriend:A})}),Object($a.jsx)(pc,{headerText:st("friendlist.friends.offlinecaption")+" (".concat(y.length,")"),children:Object($a.jsx)(eu,{list:y,selectedFriendsIds:d,selectFriend:A})}),Object($a.jsx)(ru,{headerText:st("friendlist.tab.friendrequests")+" (".concat(T.length,")"),isExpanded:!0}),Object($a.jsx)(iu,{headerText:st("people.search.title")})]}),d&&d.length>0&&Object($a.jsxs)(lc,{gap:1,className:"p-1",children:[Object($a.jsx)(dc,{fullWidth:!0,onClick:function(){return f(!0)},children:st("friendlist.tip.invite")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",onClick:function(e){return p(!0)},children:st("generic.delete")})]})]})]}),h&&Object($a.jsx)(cu,{selectedFriendsIds:d,onCloseClick:function(){return f(!1)},sendRoomInvite:function(e){0!==d.length&&e&&0!==e.length&&(ea(new l.Fh(e,d)),f(!1))}}),v&&Object($a.jsx)(au,{selectedFriendsIds:d,removeFriendsText:k,onCloseClick:function(){return p(!1)},removeSelectedFriends:function(){0!==d.length&&(j((function(e){return ea(Object(ln.a)(l.Jf,Object(ut.a)(e))),[]})),p(!1))}})]}):null},ou=function(e){var t=e.thread,n=void 0===t?null:t,r=e.group,a=void 0===r?null:r,i=Object(c.useMemo)((function(){return a.type===fa.GROUP_CHAT&&ha(a.chats[0].extraData)}),[a]),s=Object(c.useMemo)((function(){return!(!n||!a)&&(a.type===fa.PRIVATE_CHAT&&a.userId===ae().userId||!(!i||!a.chats.length||i.userId!==ae().userId))}),[n,a,i]);return n&&a?a.userId?Object($a.jsxs)(lc,{fullWidth:!0,justifyContent:s?"end":"start",gap:2,children:[Object($a.jsxs)(tc,{shrink:!0,className:"message-avatar",children:[a.type===fa.PRIVATE_CHAT&&!s&&Object($a.jsx)(Mc,{figure:n.participant.figure,direction:2}),i&&!s&&Object($a.jsx)(Mc,{figure:i.figure,direction:2})]}),Object($a.jsxs)(tc,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(s?"right":"left"),children:[Object($a.jsxs)(tc,{className:"fw-bold",children:[s&&ae().userName,!s&&(i?i.username:n.participant.name)]}),a.chats.map((function(e,t){return Object($a.jsx)(tc,{className:"text-break",children:e.message},t)}))]}),s&&Object($a.jsx)(tc,{shrink:!0,className:"message-avatar",children:Object($a.jsx)(Mc,{figure:ae().figure,direction:4})})]}):Object($a.jsx)($a.Fragment,{children:a.chats.map((function(e,t){return Object($a.jsx)(lc,{fullWidth:!0,gap:2,justifyContent:"start",children:Object($a.jsxs)(tc,{className:"w-100 text-break",children:[e.type===pa.SECURITY_NOTIFICATION&&Object($a.jsxs)(lc,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),Object($a.jsx)(tc,{children:e.message})]}),e.type===pa.ROOM_INVITE&&Object($a.jsxs)(lc,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[Object($a.jsx)(tc,{className:"messenger-notification-icon flex-shrink-0"}),Object($a.jsxs)(tc,{children:[st("messenger.invitation")+" ",e.message]})]})]})},t)}))}):null},lu=function(e){var t=e.thread,n=void 0===t?null:t;return n.setRead(),Object($a.jsx)($a.Fragment,{children:n.groups.length>0&&n.groups.map((function(e,t){return Object($a.jsx)(ou,{thread:n,group:e},t)}))})},uu=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],f=sn(),g=f.visibleThreads,m=void 0===g?[]:g,v=f.activeThread,p=void 0===v?null:v,x=f.getMessageThread,_=void 0===x?null:x,E=f.sendMessage,I=void 0===E?null:E,y=f.setActiveThreadId,C=void 0===y?null:y,T=f.closeThread,S=void 0===T?null:T,N=Object(c.useRef)(),k=function(){return p&&p.participant&&Ga(p.participant.id)},A=function(){p&&O.length&&(I(p,O),h(""))};return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(2===t.length){if("open"===t[1])return void a(!0);var n=_(parseInt(t[1]));if(!n)return;C(n.threadId),a(!0)}},eventUrlPrefix:"friends-messenger/"};return R(e),function(){return B(e)}}),[_,C]),Object(c.useEffect)((function(){r&&p&&(N.current.scrollTop=N.current.scrollHeight)}),[r,p]),Object(c.useEffect)((function(){!r||p?!r&&p&&(d(p.threadId),C(-1)):u>0?C(u):m.length>0&&C(m[0].threadId)}),[r,p,u,m,C]),r?Object($a.jsxs)(Pc,{className:"nitro-friends-messenger animate__animated animate__bounceInDown",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("messenger.window.title",["OPEN_CHAT_COUNT"],[m.length.toString()]),onCloseClick:function(e){return a(!1)}}),Object($a.jsx)(Ec,{children:Object($a.jsxs)(cc,{overflow:"hidden",children:[Object($a.jsxs)(Jc,{size:4,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:st("toolbar.icon.label.messenger")}),Object($a.jsx)(Jc,{fullHeight:!0,overflow:"auto",children:m&&m.length>0&&m.map((function(e){return Object($a.jsxs)(ii,{itemActive:p===e,onClick:function(t){return C(e.threadId)},children:[e.unread&&Object($a.jsx)($c,{count:e.unreadCount}),Object($a.jsxs)(lc,{fullWidth:!0,alignItems:"center",gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",className:"friend-head px-1",children:[e.participant.id>0&&Object($a.jsx)(Mc,{figure:e.participant.figure,headOnly:!0,direction:3}),e.participant.id<=0&&Object($a.jsx)(Gc,{isGroup:!0,badgeCode:e.participant.figure})]}),Object($a.jsx)(Hi,{truncate:!0,grow:!0,children:e.participant.name})]})]},e.threadId)}))})]}),Object($a.jsx)(Jc,{size:8,overflow:"hidden",children:p&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,center:!0,children:st("messenger.window.separator",["FRIEND_NAME"],[p.participant.name])}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{onClick:function(){return p&&p.participant&&ea(new l.Db(p.participant.id))},children:Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-follow"})}),Object($a.jsx)(dc,{onClick:k,children:Object($a.jsx)(tc,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),Object($a.jsx)(dc,{variant:"danger",onClick:k,children:st("messenger.window.button.report")})]}),Object($a.jsx)(dc,{onClick:function(e){return S(p.threadId)},children:Object($a.jsx)(mc.a,{icon:"times"})})]}),Object($a.jsx)(Jc,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:Object($a.jsx)(Jc,{innerRef:N,overflow:"auto",children:Object($a.jsx)(lu,{thread:p})})}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:st("messenger.window.input.default",["FRIEND_NAME"],[p.participant.name]),value:O,onChange:function(e){return h(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&A()}}),Object($a.jsx)(dc,{variant:"success",onClick:A,children:st("widgets.chatinput.say")})]})]})})]})})]}):null},du=function(e){var t=an(),n=t.settings,r=void 0===n?null:n,a=t.onlineFriends,c=void 0===a?[]:a;return r?Object($a.jsxs)($a.Fragment,{children:[Object(Rc.createPortal)(Object($a.jsx)(Zl,{onlineFriends:c}),document.getElementById("toolbar-friend-bar-container")),Object($a.jsx)(su,{}),Object($a.jsx)(uu,{})]}):null},ju=function(e){var t,n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(""),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)("Notificaci\xf3n"),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)("0"),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)("gameAlert"),N=Object(o.a)(S,2),k=(N[0],N[1],Object(c.useState)("url(https://files.habboemotion.com/resources/images/homebgs/nl_green_bg.gif)")),A=Object(o.a)(k,2),w=A[0],D=A[1],U=Object(c.useState)("primary"),P=Object(o.a)(U,2),L=P[0],M=P[1],F=Object(c.useState)("undefined"),H=Object(o.a)(F,2),G=H[0],W=H[1],V=new URLSearchParams(window.location.search).get("sso");return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"@gm":return i(!1),E("Nuevo juego abierto"),T(t[2]),d(t[3]),v(t[4]),W("\ud83d\udce2 <b>Nuevo juego abierto.</b> \xa1\xdanete si quieres ganar premios!"),M("warning"),D("url(https://files.habboemotion.com/resources/images/homebgs/nl_green_bg.gif)"),void fetch("https://int.lavvos.eu/?type=getFigure&getFigure="+t[3]).then((function(e){return e.text()})).then((function(e){h(e),i(!0),new Audio("https://lavvos.eu/swfs/sounds/ding.mp3").play()}));case"@ev":return i(!1),E("Nuevo evento abierto"),T(t[2]),d(t[3]),v(t[4]),W("\ud83d\udce2 <b>Nuevo evento abierto.</b> \xa1\xdanete si quieres ganar premios!"),M("info"),D("url(https://files.habboemotion.com/resources/images/homebgs/bg_pattern_bobbaskulls1.gif)"),void fetch("https://int.lavvos.eu/?type=getFigure&getFigure="+t[3]).then((function(e){return e.text()})).then((function(e){h(e),i(!0),new Audio("https://lavvos.eu/swfs/sounds/ding.mp3").play()}));case"@pbl":return i(!1),E("Nueva oleada de publicidad abierta"),T(t[2]),d(t[3]),v(t[4]),W("\ud83d\udce2 <b>Nueva oleada de publicidad abierta.</b> \xa1\xdanete si quieres ganar premios!"),M("danger"),D("url(https://files.habboemotion.com/resources/images/homebgs/xmas_bgpattern_starsky.gif)"),void fetch("https://int.lavvos.eu/?type=getFigure&getFigure="+t[3]).then((function(e){return e.text()})).then((function(e){h(e),i(!0),new Audio("https://lavvos.eu/swfs/sounds/ding.mp3").play()}));case"hide":return void i(!1)}},eventUrlPrefix:"galert/"};return R(e),function(){return B(e)}}),[i]),Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsxs)(Pc,{style:{width:"350px"},className:"animate__animated animate__flipInX",children:[Object($a.jsx)(Tc,{headerText:_,onCloseClick:function(e){return i(!1)}}),Object($a.jsx)(Ec,{children:Object($a.jsx)("div",{children:Object($a.jsxs)("div",{className:"card",style:{backgroundImage:w},children:[Object($a.jsx)("div",{className:"alert alert-"+L+" text-center",dangerouslySetInnerHTML:{__html:G}}),Object($a.jsx)("div",{className:"card-body",children:Object($a.jsx)("div",{className:"row",children:Object($a.jsxs)("div",{className:"col-md-12 text-center",children:[Object($a.jsx)("img",{src:(t=O,"https://habbo-imaging.lavvos.eu/?figure="+t+"&gesture=sml&direction=2&effect=6&img_format=gif")}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",style:{fontSize:"12px"},children:["Juego abierto por ",u]}),Object($a.jsx)("br",{}),Object($a.jsx)("span",{className:"badge bg-"+L,style:{fontSize:"18px"},children:m}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(){return fetch("https://int.lavvos.eu/?type=goToRoom&roomId="+C+"&sso="+V),void i(!1)},className:"btn btn-success btn-sm rounded w-100",children:"Ir a sala"})]})})})]})})})]})})},bu=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0},Ou=Object(c.createContext)({groupCustomize:null,setGroupCustomize:null}),hu=function(e){return Object($a.jsx)(Ou.Provider,{value:e.value,children:e.children})},fu=function(){return Object(c.useContext)(Ou)},gu=function(){function e(t,n,r,a){Object(u.a)(this,e),this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=t,this.key=n||0,this.color=r||0,this.position=a||4}return Object(d.a)(e,[{key:"code",get:function(){return 0===this.key?null:e.getCode(this.type,this.key,this.color,this.position)}}],[{key:"getCode",value:function(e,t,n,r){return e+(t<10?"0":"")+t+(n<10?"0":"")+n+r}}]),e}();gu.BASE="b",gu.SYMBOL="s";var mu=[0,1,2,3,4,5,6,7,8],vu=function(e){var t=e.badgeParts,n=void 0===t?[]:t,r=e.setBadgeParts,a=void 0===r?null:r,i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=fu().groupCustomize,j=void 0===d?null:d,b=function(e,t,r){var c=Object(ut.a)(n);c[e][t]=r,a(c),"key"===t&&u(-1)};return n&&n.length?Object($a.jsxs)($a.Fragment,{children:[l<0&&n&&n.length>0&&n.map((function(e,t){return Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[Object($a.jsxs)(lc,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:function(e){return u(t)},children:[n[t].code&&n[t].code.length>0&&Object($a.jsx)(Gc,{badgeCode:n[t].code,isGroup:!0}),(!n[t].code||!n[t].code.length)&&Object($a.jsx)(lc,{center:!0,className:"badge-image group-badge",children:Object($a.jsx)(mc.a,{icon:"plus"})})]}),e.type!==gu.BASE&&Object($a.jsx)(cc,{gap:1,columnCount:3,children:mu.map((function(e,r){return Object($a.jsx)(tc,{pointer:!0,className:"group-badge-position-swatch ".concat(n[t].position===e?"active":""),onClick:function(n){return b(t,"position",e)}},r)}))}),Object($a.jsx)(cc,{gap:1,columnCount:8,children:j.badgePartColors.length>0&&j.badgePartColors.map((function(e,r){return Object($a.jsx)(tc,{pointer:!0,className:"group-badge-color-swatch ".concat(n[t].color===r+1?"active":""),style:{backgroundColor:"#"+e.color},onClick:function(e){return b(t,"color",r+1)}},r)}))})]},t)})),l>=0&&Object($a.jsxs)(cc,{gap:1,columnCount:5,children:[n[l].type===gu.SYMBOL&&Object($a.jsx)(Jc,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:function(e){return b(l,"key",0)},children:Object($a.jsx)(lc,{center:!0,className:"badge-image group-badge",children:Object($a.jsx)(mc.a,{icon:"times"})})}),(n[l].type===gu.BASE?j.badgeBases:j.badgeSymbols).map((function(e,t){return Object($a.jsx)(Jc,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:function(t){return b(l,"key",e.id)},children:Object($a.jsx)(Gc,{badgeCode:gu.getCode(n[l].type,e.id,n[l].color,4),isGroup:!0})},t)}))]})]}):null},pu=function(e){var t=e.groupData,n=void 0===t?null:t,r=e.setGroupData,a=void 0===r?null:r,i=e.setCloseAction,s=void 0===i?null:i,u=(e.skipDefault,Object(c.useState)(null)),d=Object(o.a)(u,2),j=d[0],b=d[1],O=fu().groupCustomize,h=void 0===O?null:O,f=Object(c.useCallback)((function(){if(!n||!j||!j.length)return!1;if(n.groupBadgeParts===j)return!0;if(n.groupId<=0)return a((function(e){var t=Object(bt.a)({},e);return t.groupBadgeParts=j,t})),!0;var e=[];return j.forEach((function(t){t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),ea(new l.Yc(n.groupId,e)),!0}),[n,j,a]);return Object(c.useEffect)((function(){if(!n.groupBadgeParts){var e=[new gu(gu.BASE,h.badgeBases[0].id,h.badgePartColors[0].id),new gu(gu.SYMBOL,0,h.badgePartColors[0].id),new gu(gu.SYMBOL,0,h.badgePartColors[0].id),new gu(gu.SYMBOL,0,h.badgePartColors[0].id),new gu(gu.SYMBOL,0,h.badgePartColors[0].id)];a((function(t){var n=e;return Object(bt.a)(Object(bt.a)({},t),{},{groupBadgeParts:n})}))}}),[n.groupBadgeParts,h,a]),Object(c.useEffect)((function(){n.groupId<=0?b(n.groupBadgeParts?Object(ut.a)(n.groupBadgeParts):null):b(n.groupBadgeParts)}),[n]),Object(c.useEffect)((function(){return s({action:f}),function(){return s(null)}}),[s,f]),Object($a.jsxs)(cc,{overflow:"hidden",gap:1,children:[Object($a.jsx)(Jc,{size:2,children:Object($a.jsx)(lc,{center:!0,className:"bg-muted rounded p-1",children:Object($a.jsx)(Gc,{badgeCode:function(){if(!j||!j.length)return"";var e="";return j.forEach((function(t){return t.code&&(e+=t.code)})),e}(),isGroup:!0})})}),Object($a.jsx)(Jc,{size:10,overflow:"auto",children:Object($a.jsx)(vu,{badgeParts:j,setBadgeParts:b})})]})},xu=function(e){var t=e.groupData,n=void 0===t?null:t,r=e.setGroupData,a=void 0===r?null:r,i=e.setCloseAction,s=void 0===i?null:i,u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],O=fu().groupCustomize,h=void 0===O?null:O,f=function(e){return 0===e?h.groupColorsA.find((function(t){return t.id===j[e]})).color:h.groupColorsB.find((function(t){return t.id===j[e]})).color},g=function(e,t){b((function(n){var r=Object(ut.a)(n);return r[e]=t,r}))},m=Object(c.useCallback)((function(){return!!(n&&j&&j.length)&&(n.groupColors===j||(n.groupId<=0?(a((function(e){var t=Object(bt.a)({},e);return t.groupColors=Object(ut.a)(j),t})),!0):(ea(new l.Zc(n.groupId,j[0],j[1])),!0)))}),[n,j,a]);return Object(c.useEffect)((function(){if(h.groupColorsA&&h.groupColorsB&&!n.groupColors){var e=[h.groupColorsA[0].id,h.groupColorsB[0].id];a((function(t){return Object(bt.a)(Object(bt.a)({},t),{},{groupColors:e})}))}}),[h,n.groupColors,a]),Object(c.useEffect)((function(){n.groupId<=0?b(n.groupColors?Object(ut.a)(n.groupColors):null):b(n.groupColors)}),[n]),Object(c.useEffect)((function(){return s({action:m}),function(){return s(null)}}),[s,m]),j?Object($a.jsxs)(cc,{overflow:"hidden",children:[Object($a.jsxs)(Jc,{size:2,gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("group.edit.color.guild.color")}),n.groupColors&&n.groupColors.length>0&&Object($a.jsxs)(lc,{overflow:"hidden",className:"rounded border",children:[Object($a.jsx)(tc,{className:"group-color-swatch",style:{backgroundColor:"#"+f(0)}}),Object($a.jsx)(tc,{className:"group-color-swatch",style:{backgroundColor:"#"+f(1)}})]})]}),Object($a.jsxs)(Jc,{size:5,gap:1,overflow:"hidden",children:[Object($a.jsx)(Hi,{bold:!0,children:st("group.edit.color.primary.color")}),Object($a.jsx)(sc,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:n.groupColors&&h.groupColorsA&&h.groupColorsA.map((function(e,t){return Object($a.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+io()({" active":n.groupColors[0]===e.id}),style:{backgroundColor:"#"+e.color},onClick:function(){return g(0,e.id)}},t)}))})]}),Object($a.jsxs)(Jc,{size:5,gap:1,overflow:"hidden",children:[Object($a.jsx)(Hi,{bold:!0,children:st("group.edit.color.secondary.color")}),Object($a.jsx)(sc,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:n.groupColors&&h.groupColorsB&&h.groupColorsB.map((function(e,t){return Object($a.jsx)("div",{className:"group-badge-color-swatch cursor-pointer"+io()({" active":n.groupColors[1]===e.id}),style:{backgroundColor:"#"+e.color},onClick:function(){return g(1,e.id)}},t)}))})]})]}):null},_u=function(e){var t=e.groupData,n=void 0===t?null:t,r=(e.setGroupData,e.purchaseCost),a=void 0===r?0:r,c=fu().groupCustomize,i=void 0===c?null:c,s=function(e){return 0===e?i.groupColorsA.find((function(t){return t.id===n.groupColors[e]})).color:i.groupColorsB.find((function(t){return t.id===n.groupColors[e]})).color};return n?Object($a.jsxs)(cc,{overflow:"hidden",gap:1,children:[Object($a.jsxs)(Jc,{size:3,children:[Object($a.jsxs)(Jc,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object($a.jsx)(Hi,{bold:!0,center:!0,children:st("group.create.confirm.guildbadge")}),Object($a.jsx)(Gc,{badgeCode:function(){if(!n||!n.groupBadgeParts||!n.groupBadgeParts.length)return"";var e="";return n.groupBadgeParts.forEach((function(t){return t.code&&(e+=t.code)})),e}(),isGroup:!0})]}),Object($a.jsxs)(Jc,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[Object($a.jsx)(Hi,{bold:!0,center:!0,children:st("group.edit.color.guild.color")}),Object($a.jsxs)(lc,{overflow:"hidden",className:"rounded border",children:[Object($a.jsx)(tc,{className:"group-color-swatch",style:{backgroundColor:"#"+s(0)}}),Object($a.jsx)(tc,{className:"group-color-swatch",style:{backgroundColor:"#"+s(1)}})]})]})]}),Object($a.jsxs)(Jc,{size:9,justifyContent:"between",children:[Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:n.groupName}),Object($a.jsx)(Hi,{children:n.groupDescription})]}),Object($a.jsx)(Hi,{overflow:"auto",children:st("group.create.confirm.info")})]}),Object($a.jsx)(Hi,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:st("group.create.confirm.buyinfo",["amount"],[a.toString()])})]})]}):null},Eu=function(e){var t=e.groupData,n=void 0===t?null:t,r=e.setGroupData,a=void 0===r?null:r,i=e.setCloseAction,s=void 0===i?null:i,u=e.close,d=void 0===u?null:u,j=e.isCreator,b=void 0!==j&&j,O=e.availableRooms,h=void 0===O?[]:O,f=Object(c.useState)(""),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(""),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(-1),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useCallback)((function(){return!!(n&&m&&m.length)&&(m===n.groupName&&_===n.groupDescription||(n.groupId<=0?!(C<=0)&&(a((function(e){var t=Object(bt.a)({},e);return t.groupName=m,t.groupDescription=_,t.groupHomeroomId=C,t})),!0):(ea(new l.ad(n.groupId,m,_||"")),!0)))}),[n,m,_,C,a]);return Object(c.useEffect)((function(){v(n.groupName||""),E(n.groupDescription||""),T(n.groupHomeroomId)}),[n]),Object(c.useEffect)((function(){return s({action:S}),function(){return s(null)}}),[s,S]),n?Object($a.jsxs)(Jc,{justifyContent:"between",overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{center:!0,className:"col-3",children:st("group.edit.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:m,maxLength:29,onChange:function(e){return v(e.target.value)}})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{center:!0,className:"col-3",children:st("group.edit.desc")}),Object($a.jsx)("textarea",{className:"form-control form-control-sm",value:_,maxLength:254,onChange:function(e){return E(e.target.value)}})]}),b&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{center:!0,className:"col-3",children:st("group.edit.base")}),Object($a.jsx)(Jc,{fullWidth:!0,gap:1,children:Object($a.jsxs)("select",{className:"form-select form-select-sm",value:C,onChange:function(e){return T(parseInt(e.target.value))},children:[Object($a.jsx)("option",{value:-1,disabled:!0,children:st("group.edit.base.select.room")}),h&&h.map((function(e,t){return Object($a.jsx)("option",{value:e.id,children:e.name},t)}))]})})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(tc,{className:"col-3",children:"\xa0"}),Object($a.jsx)(Hi,{small:!0,children:st("group.edit.base.warning")})]})]})]}),!b&&Object($a.jsx)(dc,{variant:"danger",onClick:function(){!n||n.groupId<=0||Ha.confirm(st("group.deleteconfirm.desc"),(function(){ea(new l.Lc(n.groupId)),d&&d()}),null,null,null,st("group.deleteconfirm.title"))},children:st("group.delete")}),b&&Object($a.jsx)(Hi,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:function(e){return U("navigator/create")},children:st("group.createroom")})]}):null},Iu=[1,2,3,4],yu=function(e){var t=e.onClose,n=void 0===t?null:t,r=Object(c.useState)(1),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(null),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(null),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(0),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useCallback)((function(e){var t=e.getParser(),n=[];t.availableRooms.forEach((function(e,t){return n.push({id:t,name:e})})),x(n),y(t.groupCost)}),[]);return dt(l.Ic,C),Object(c.useEffect)((function(){s(1),g({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),ea(new l.Hc)}),[g]),f?Object($a.jsxs)(Pc,{className:"nitro-group-creator",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("group.create.title"),onCloseClick:function(){b(null),g(null),n&&n()}}),Object($a.jsxs)(Ec,{children:[Object($a.jsx)(lc,{center:!0,className:"creator-tabs",children:Iu.map((function(e,t){return Object($a.jsx)(lc,{center:!0,className:"tab tab-".concat(1===e?"blue-flat":4===e?"yellow":"blue-arrow"," ").concat(i===e?"active":""),children:Object($a.jsx)(Hi,{variant:"white",children:st("group.create.steplabel.".concat(e))})},t)}))}),Object($a.jsxs)(Jc,{overflow:"hidden",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(tc,{className:"nitro-group-tab-image tab-".concat(i)}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsx)(Hi,{bold:!0,fontSize:4,children:st("group.create.stepcaption.".concat(i))}),Object($a.jsx)(Hi,{children:st("group.create.stepdesc.".concat(i))})]})]}),Object($a.jsxs)(Jc,{overflow:"hidden",children:[1===i&&Object($a.jsx)(Eu,{groupData:f,setGroupData:g,setCloseAction:b,close:null,isCreator:!0,availableRooms:p}),2===i&&Object($a.jsx)(pu,{groupData:f,setGroupData:g,setCloseAction:b}),3===i&&Object($a.jsx)(xu,{groupData:f,setGroupData:g,setCloseAction:b}),4===i&&Object($a.jsx)(_u,{groupData:f,setGroupData:g,purchaseCost:I})]}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"link",className:"text-black",onClick:function(){j&&j.action&&!j.action()||(1!==i?s((function(e){return e-1})):n())},children:st(1===i?"generic.cancel":"group.create.previousstep")}),Object($a.jsx)(dc,{disabled:4===i&&!je(),variant:4===i?je()?"success":"danger":"primary",onClick:function(){j&&j.action&&!j.action()||(4!==i?s((function(e){return 4===e?e:e+1})):function(){if(f){var e=[];f.groupBadgeParts.forEach((function(t){t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),ea(new l.Gc(f.groupName,f.groupDescription,f.groupHomeroomId,f.groupColors[0],f.groupColors[1],e))}}())},children:st(4===i?je()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},Cu=Object(d.a)((function e(){Object(u.a)(this,e)}));Cu.NOT_MEMBER=0,Cu.MEMBER=1,Cu.REQUEST_PENDING=2;var Tu=Object(d.a)((function e(){Object(u.a)(this,e)}));Tu.REGULAR=0,Tu.EXCLUSIVE=1,Tu.PRIVATE=2;var Su=["groupInformation","onClose","overflow"],Nu=["regular","exclusive","private"],Ru=function(e){var t=e.groupInformation,n=void 0===t?null:t,r=e.onClose,a=void 0===r?null:r,i=e.overflow,s=void 0===i?"hidden":i,o=Object(Za.a)(e,Su),u=n&&n.ownerName===ae().userName,d=Object(c.useCallback)((function(e){switch(e){case"members":Ca(n.id);break;case"members_pending":Ca(n.id,2);break;case"manage":ya(n.id);break;case"homeroom":Da(n.roomId);break;case"furniture":U("catalog/open/"+y.GUILD_CUSTOM_FURNI);break;case"popular_groups":U("navigator/search/groups")}}),[n]);return n?Object($a.jsxs)(cc,Object(bt.a)(Object(bt.a)({overflow:s},o),{},{children:[Object($a.jsxs)(Jc,{center:!0,size:3,overflow:"hidden",children:[Object($a.jsx)(lc,{alignItems:"center",overflow:"hidden",className:"group-badge",children:Object($a.jsx)(Gc,{badgeCode:n.badge,isGroup:!0,scale:2})}),Object($a.jsxs)(Jc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("members")},children:st("group.membercount",["totalMembers"],[n.membersCount.toString()])}),n.pendingRequestsCount>0&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("members_pending")},children:st("group.pendingmembercount",["amount"],[n.pendingRequestsCount.toString()])}),n.isOwner&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("manage")},children:st("group.manage")})]}),n.membershipType===Cu.NOT_MEMBER||n.membershipType===Cu.REQUEST_PENDING?null:u?Object($a.jsx)("i",{className:"icon icon-group-owner",title:st("group.youareowner")}):n.isAdmin?Object($a.jsx)("i",{className:"icon icon-group-admin",title:st("group.youareadmin")}):Object($a.jsx)("i",{className:"icon icon-group-member",title:st("group.youaremember")})]}),Object($a.jsxs)(Jc,{size:9,justifyContent:"between",overflow:"auto",children:[Object($a.jsxs)(Jc,{overflow:"hidden",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:n.title}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("i",{className:"icon icon-group-type-"+n.type,title:st("group.edit.settings.type.".concat(Nu[n.type],".help"))}),n.canMembersDecorate&&Object($a.jsx)("i",{className:"icon icon-group-decorate",title:st("group.memberscandecorate")})]})]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,children:st("group.created",["date","owner"],[n.createdAt,n.ownerName])})]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,overflow:"auto",className:"group-description",children:n.description})]}),Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("homeroom")},children:st("group.linktobase")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("furniture")},children:st("group.buyfurni")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){return d("popular_groups")},children:st("group.showgroups")})]}),n.type!==Tu.PRIVATE&&Object($a.jsx)(dc,{disabled:n.membershipType===Cu.REQUEST_PENDING||u,onClick:function(){n.type===Tu.PRIVATE&&n.membershipType===Cu.NOT_MEMBER||(n.membershipType!==Cu.MEMBER?n&&Ta(n.id):Ha.confirm(st("group.leaveconfirm.desc"),(function(){ea(new l.Xc(n.id,ae().userId)),a&&a()}),null))},children:st(u?"group.youareowner":n.type===Tu.PRIVATE?"":n.membershipType===Cu.MEMBER?"group.leave":n.membershipType===Cu.NOT_MEMBER&&n.type===Tu.REGULAR?"group.join":n.membershipType===Cu.REQUEST_PENDING?"group.membershippending":n.membershipType===Cu.NOT_MEMBER&&n.type===Tu.EXCLUSIVE?"group.requestmembership":void 0)})]})]})]})):null},ku=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useCallback)((function(e){var t=e.getParser();(r&&r.id===t.id||t.flag)&&a(t)}),[r]);return dt(l.Pc,i),r?Object($a.jsxs)(Pc,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("group.window.title"),onCloseClick:function(e){return a(null)}}),Object($a.jsx)(Ec,{children:Object($a.jsx)(Ru,{groupInformation:r,onClose:function(){return a(null)}})})]}):null},Au=["regular","exclusive","private"],wu=function(e){var t=e.groupData,n=void 0===t?null:t,r=e.setGroupData,a=void 0===r?null:r,i=e.setCloseAction,s=void 0===i?null:i,u=Object(c.useState)(n.groupState),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(n.groupCanMembersDecorate),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useCallback)((function(){return!!n&&(j===n.groupState&&f===n.groupCanMembersDecorate||(n.groupId<=0?(a((function(e){var t=Object(bt.a)({},e);return t.groupState=j,t.groupCanMembersDecorate=f,t})),!0):(ea(new l.bd(n.groupId,j,f?0:1)),!0)))}),[n,j,f,a]);return Object(c.useEffect)((function(){b(n.groupState),g(n.groupCanMembersDecorate)}),[n]),Object(c.useEffect)((function(){return s({action:m}),function(){return s(null)}}),[s,m]),Object($a.jsxs)(Jc,{overflow:"auto",children:[Object($a.jsx)(Jc,{children:Au.map((function(e,t){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"groupState",checked:j===t,onChange:function(e){return b(t)}}),Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("i",{className:"icon icon-group-type-".concat(t)}),Object($a.jsx)(Hi,{bold:!0,children:st("group.edit.settings.type.".concat(e,".label"))})]}),Object($a.jsx)(Hi,{children:st("group.edit.settings.type.".concat(e,".help"))})]})]},t)}))}),Object($a.jsx)(Mi,{}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:f,onChange:function(e){return g((function(e){return!e}))}}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("group.edit.settings.rights.caption")}),Object($a.jsx)(Hi,{children:st("group.edit.settings.rights.members.help")})]})]})]})},Du=[1,2,3,5],Uu=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=function(){d((function(e){return e&&e.action&&e.action(),null})),h(null)},g=Object(c.useCallback)((function(e){var t=e.getParser();O&&O.groupId===t.id&&h((function(e){var n=Object(bt.a)({},e);return n.groupName=t.title,n.groupDescription=t.description,n.groupState=t.type,n.groupCanMembersDecorate=t.canMembersDecorate,n}))}),[O]);dt(l.Pc,g);var m=Object(c.useCallback)((function(e){var t=e.getParser(),n=[];t.badgeParts.forEach((function(e,t){n.push(new l.Dc(e.isBase?l.Dc.BASE:l.Dc.SYMBOL,e.key,e.color,e.position))})),h({groupId:t.id,groupName:t.title,groupDescription:t.description,groupHomeroomId:t.roomId,groupState:t.state,groupCanMembersDecorate:t.canMembersDecorate,groupColors:[t.colorA,t.colorB],groupBadgeParts:n})}),[h]);return dt(l.dd,m),!O||O.groupId<=0?null:Object($a.jsxs)(Pc,{className:"nitro-group-manager",children:[Object($a.jsx)(Tc,{headerText:st("group.window.title"),onCloseClick:f}),Object($a.jsx)(Di,{children:Du.map((function(e){return Object($a.jsx)(Ai,{isActive:r===e,onClick:function(){return function(e){u&&u.action&&u.action(),a(e)}(e)},children:st("group.edit.tab.".concat(e))},e)}))}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(tc,{className:"nitro-group-tab-image tab-".concat(r)}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsx)(Hi,{bold:!0,fontSize:4,children:st("group.edit.tabcaption.".concat(r))}),Object($a.jsx)(Hi,{children:st("group.edit.tabdesc.".concat(r))})]})]}),Object($a.jsxs)(Jc,{grow:!0,overflow:"hidden",children:[1===r&&Object($a.jsx)(Eu,{groupData:O,setGroupData:h,setCloseAction:d,close:f}),2===r&&Object($a.jsx)(pu,{groupData:O,setGroupData:h,setCloseAction:d,skipDefault:!0}),3===r&&Object($a.jsx)(xu,{groupData:O,setGroupData:h,setCloseAction:d}),5===r&&Object($a.jsx)(wu,{groupData:O,setGroupData:h,setCloseAction:d})]})]})]})},Pu=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(-1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(0),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(""),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(null),N=Object(o.a)(S,2),k=N[0],A=N[1],w=function(e){if(e.rank===l.Wc.OWNER)return"group.members.owner";if(O.admin){if(e.rank===l.Wc.ADMIN)return"group.members.removerights";if(e.rank===l.Wc.MEMBER)return"group.members.giverights"}return""},D=Object(c.useCallback)((function(){-1!==r&&-1!==u&&-1!==m&&ea(new l.Rc(r,m,C,u))}),[r,u,m,C]),U=Object(c.useCallback)((function(e){var t=e.getParser();h(t),d(t.level),E(Math.ceil(t.totalMembersCount/t.pageSize))}),[]);dt(l.Sc,U);var P=Object(c.useCallback)((function(e){var t=e.getParser();Ha.confirm(st(t.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[k,t.furnitureCount.toString()]),(function(){ea(new l.Xc(O.groupId,t.userId)),D()}),null),A(null)}),[O,k,D]);dt(l.Jc,P);var L=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2)){var n=parseInt(t[1])||-1,r=parseInt(t[2])||3;a(n),d(r)}}),[]);return Object(c.useEffect)((function(){var e={linkReceived:L,eventUrlPrefix:"group-members/"};return R(e),function(){return B(e)}}),[L]),Object(c.useEffect)((function(){v(0)}),[r,u,C]),Object(c.useEffect)((function(){-1!==r&&-1!==u&&-1!==m&&ea(new l.Rc(r,m,C,u))}),[r,u,m,C]),Object(c.useEffect)((function(){-1!==r&&(d(-1),h(null),E(0),T(""),A(null))}),[r]),-1!==r&&O?Object($a.jsxs)(Pc,{className:"nitro-group-members",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("group.members.title",["groupName"],[O?O.groupTitle:""]),onCloseClick:function(e){return a(-1)}}),Object($a.jsxs)(Ec,{overflow:"hidden",children:[Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(lc,{center:!0,className:"group-badge",children:Object($a.jsx)(Gc,{badgeCode:O.badge,isGroup:!0,className:"mx-auto d-block"})}),Object($a.jsxs)(Jc,{fullWidth:!0,gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:st("group.members.searchinfo"),value:C,onChange:function(e){return T(e.target.value)}}),Object($a.jsxs)("select",{className:"form-select form-select-sm w-100",value:u,onChange:function(e){return d(parseInt(e.target.value))},children:[Object($a.jsx)("option",{value:"0",children:st("group.members.search.all")}),Object($a.jsx)("option",{value:"1",children:st("group.members.search.admins")}),Object($a.jsx)("option",{value:"2",children:st("group.members.search.pending")})]})]})]}),Object($a.jsx)(cc,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:O.result.map((function(e,t){return Object($a.jsxs)(lc,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[Object($a.jsx)("div",{className:"avatar-head cursor-pointer",onClick:function(){return Ga(e.id)},children:Object($a.jsx)(Mc,{figure:e.figure,headOnly:!0,direction:2})}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{bold:!0,small:!0,pointer:!0,onClick:function(t){return Ga(e.id)},children:e.name}),e.rank!==l.Wc.REQUESTED&&Object($a.jsx)(Hi,{small:!0,italics:!0,variant:"muted",children:st("group.members.since",["date"],[e.joinedAt])})]}),Object($a.jsxs)(Jc,{gap:1,children:[e.rank!==l.Wc.REQUESTED&&Object($a.jsx)(lc,{center:!0,children:Object($a.jsx)(tc,{pointer:O.admin,className:"icon icon-group-small-".concat(e.rank===l.Wc.OWNER?"owner":e.rank===l.Wc.ADMIN?"admin":O.admin&&e.rank===l.Wc.MEMBER?"not-admin":""),title:st(w(e)),onClick:function(t){return function(e){O.admin&&e.rank!==l.Wc.OWNER&&(e.rank!==l.Wc.ADMIN?ea(new l.Bc(O.groupId,e.id)):ea(new l.Cc(O.groupId,e.id)),D())}(e)}})}),O.admin&&e.rank===l.Wc.REQUESTED&&Object($a.jsx)(lc,{alignItems:"center",children:Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:st("group.members.accept"),onClick:function(t){return function(e){O.admin&&e.rank===l.Wc.REQUESTED&&(ea(new l.Tc(O.groupId,e.id)),D())}(e)}})}),O.admin&&e.rank!==l.Wc.OWNER&&e.id!==ae().userId&&Object($a.jsx)(lc,{alignItems:"center",children:Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:st(e.rank===l.Wc.REQUESTED?"group.members.reject":"group.members.kick"),onClick:function(t){return function(e){if(O.admin){if(e.rank===l.Wc.REQUESTED)return ea(new l.Uc(O.groupId,e.id)),void D();A(e.name),ea(new l.Kc(O.groupId,e.id))}}(e)}})})]})]},t)}))}),Object($a.jsxs)(lc,{gap:1,justifyContent:"between",alignItems:"center",children:[Object($a.jsx)(dc,{disabled:0===O.pageIndex,onClick:function(e){return v((function(e){return e-1}))},children:Object($a.jsx)(mc.a,{icon:"chevron-left"})}),Object($a.jsx)(Hi,{small:!0,children:st("group.members.pageinfo",["amount","page","totalPages"],[O.totalMembersCount.toString(),(O.pageIndex+1).toString(),_.toString()])}),Object($a.jsx)(dc,{disabled:O.pageIndex===_-1,onClick:function(e){return v((function(e){return e+1}))},children:Object($a.jsx)(mc.a,{icon:"chevron-right"})})]})]})]}):null},Lu=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();a(!1),Da(t.roomId)}),[]);dt(l.Vc,j);var b=Object(c.useCallback)((function(e){var t=e.getParser(),n={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};t.bases.forEach((function(e,t){return n.badgeBases.push({id:t,images:e})})),t.symbols.forEach((function(e,t){return n.badgeSymbols.push({id:t,images:e})})),t.partColors.forEach((function(e,t){return n.badgePartColors.push({id:t,color:e})})),t.colorsA.forEach((function(e,t){return n.groupColorsA.push({id:t,color:e})})),t.colorsB.forEach((function(e,t){return n.groupColorsB.push({id:t,color:e})})),n.badgeBases.sort(bu),n.badgeSymbols.sort(bu),n.badgePartColors.sort(bu),n.groupColorsA.sort(bu),n.groupColorsB.sort(bu),d(n)}),[d]);dt(l.Fc,b);var O=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"create":return void a(!0);case"manage":if(!t[2])return;return a(!1),void ea(new l.cd(Number(t[2])))}}),[]);return Object(c.useEffect)((function(){var e={linkReceived:O,eventUrlPrefix:"groups/"};return R(e),function(){return B(e)}}),[O]),Object(c.useEffect)((function(){ea(new l.Ec)}),[]),Object($a.jsxs)(hu,{value:{groupCustomize:u,setGroupCustomize:d},children:[r&&Object($a.jsx)(yu,{onClose:function(){return a(!1)}}),!r&&Object($a.jsx)(Uu,{}),Object($a.jsx)(Pu,{}),Object($a.jsx)(ku,{})]})},Mu=Object(d.a)((function e(){Object(u.a)(this,e)}));Mu.NONE="NONE",Mu.ERROR="ERROR",Mu.REJECTED="REJECTED",Mu.USER_CREATE="USER_CREATE",Mu.USER_PENDING="USER_PENDING",Mu.USER_ONGOING="USER_ONGOING",Mu.USER_FEEDBACK="USER_FEEDBACK",Mu.USER_THANKS="USER_THANKS",Mu.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",Mu.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",Mu.GUIDE_ACCEPT="GUIDE_ACCEPT",Mu.GUIDE_ONGOING="GUIDE_ONGOING",Mu.GUIDE_CLOSED="GUIDE_CLOSED",Mu.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",Mu.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",Mu.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",Mu.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",Mu.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";var Fu=function(){function e(t,n){Object(u.a)(this,e),this._message=void 0,this._roomId=void 0,this._message=t,this._roomId=n}return Object(d.a)(e,[{key:"message",get:function(){return this._message}},{key:"roomId",get:function(){return this._roomId}}]),e}(),Hu=function(){function e(t){Object(u.a)(this,e),this._userId=void 0,this._messages=void 0,this._userId=t,this._messages=[]}return Object(d.a)(e,[{key:"addChat",value:function(e){this._messages.push(e)}},{key:"userId",get:function(){return this._userId}},{key:"messages",get:function(){return this._messages}}]),e}(),Bu=function(e){var t=e.helpRequestDescription,n=void 0===t?null:t,r=(e.helpRequestAverageTime,function(e){return ea(new l.md(e))});return Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(Jc,{gap:0,className:"bg-muted p-2 rounded",children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.request.guide.accept.request.title")}),Object($a.jsx)(Hi,{variant:"muted",children:st("guide.help.request.type.1")}),Object($a.jsx)(Hi,{wrap:!0,textBreak:!0,children:n})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{variant:"success",onClick:function(e){return r(!0)},children:st("guide.help.request.guide.accept.accept.button")}),Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return r(!1)},children:st("guide.help.request.guide.accept.skip.link")})]})]})},Gu=function(e){var t=e.isOnDuty,n=void 0!==t&&t,r=e.isHandlingGuideRequests,a=void 0!==r&&r,c=e.setIsHandlingGuideRequests,i=void 0===c?null:c,s=e.isHandlingHelpRequests,o=void 0!==s&&s,l=e.setIsHandlingHelpRequests,u=void 0===l?null:l,d=e.isHandlingBullyReports,j=void 0!==d&&d,b=e.setIsHandlingBullyReports,O=void 0===b?null:b,h=e.guidesOnDuty,f=void 0===h?0:h,g=e.helpersOnDuty,m=void 0===g?0:g,v=e.guardiansOnDuty,p=void 0===v?0:v,x=e.processAction,_=void 0===x?null:x;return Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[Object($a.jsx)(tc,{className:"duty-switch"+(n?"":" off"),onClick:function(e){return _("toggle_duty")}}),Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.guide.tool.yourstatus")}),Object($a.jsx)(Hi,{children:st("guide.help.guide.tool.duty.".concat(n?"on":"off"))})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.guide.tool.tickettypeselection.caption")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",disabled:n,type:"checkbox",checked:a,onChange:function(e){return i(e.target.checked)}}),Object($a.jsx)(Hi,{children:st("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",disabled:n,type:"checkbox",checked:o,onChange:function(e){return u(e.target.checked)}}),Object($a.jsx)(Hi,{children:st("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",disabled:n,type:"checkbox",checked:j,onChange:function(e){return O(e.target.checked)}}),Object($a.jsx)(Hi,{children:st("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),Object($a.jsx)("hr",{className:"bg-dark m-0"}),Object($a.jsxs)(lc,{center:!0,gap:2,children:[Object($a.jsx)(tc,{className:"info-icon"}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:st("guide.help.guide.tool.guidesonduty",["amount"],[f.toString()])}}),Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:st("guide.help.guide.tool.helpersonduty",["amount"],[m.toString()])}}),Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:st("guide.help.guide.tool.guardiansonduty",["amount"],[p.toString()])}})]})]}),Object($a.jsx)("hr",{className:"bg-dark m-0"}),Object($a.jsxs)(lc,{justifyContent:"between",gap:2,children:[Object($a.jsx)(dc,{disabled:!0,onClick:function(e){return _("forum_link")},children:st("guide.help.guide.tool.forum.link")}),Object($a.jsx)(dc,{disabled:!0,children:st("guide.help.guide.tool.skill.link")})]})]})},Wu=function(e){var t=e.isGuide,n=void 0!==t&&t,r=(e.userId,e.userName),a=void 0===r?null:r,i=e.userFigure,s=void 0===i?null:i,u=e.isTyping,d=void 0!==u&&u,j=e.messageGroups,b=void 0===j?[]:j,O=Object(c.useState)(""),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useCallback)((function(){ea(new l.ld)}),[]),v=Object(c.useCallback)((function(){ea(new l.nd)}),[]),p=Object(c.useCallback)((function(){ea(new l.vd)}),[]),x=Object(c.useCallback)((function(e){Da(e.getParser().requesterRoomId)}),[]);dt(l.ud,x);var _=Object(c.useCallback)((function(){f&&f.length&&(ea(new l.pd(f)),g(""))}),[f]),E=Object(c.useCallback)((function(e){"Enter"===e.key&&_()}),[_]),I=Object(c.useCallback)((function(e){return e===ae().userId}),[]);return Object($a.jsxs)(Jc,{fullHeight:!0,children:[Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[n&&Object($a.jsxs)(bc,{children:[Object($a.jsx)(dc,{onClick:m,children:st("guide.help.request.guide.ongoing.visit.button")}),Object($a.jsx)(dc,{disabled:!0,onClick:v,children:st("guide.help.request.guide.ongoing.invite.button")})]}),!n&&Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{bold:!0,children:a}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.ongoing.guide.desc")})]}),Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("guide.help.common.report.link")})]}),Object($a.jsx)(Jc,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:Object($a.jsx)(Jc,{overflow:"auto",children:b.map((function(e,t){return Object($a.jsxs)(lc,{fullWidth:!0,justifyContent:I(e.userId)?"end":"start",gap:2,children:[Object($a.jsx)(tc,{shrink:!0,className:"message-avatar",children:!I(e.userId)&&Object($a.jsx)(Mc,{figure:s,direction:2})}),Object($a.jsxs)(tc,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(I(e.userId)?"right":"left"),children:[Object($a.jsxs)(Hi,{bold:!0,children:[I(e.userId)&&ae().userName,!I(e.userId)&&a]}),e.messages.map((function(e,t){return Object($a.jsx)(tc,{className:"text-break",children:e.message},t)}))]}),I(e.userId)&&Object($a.jsx)(tc,{className:"message-avatar flex-shrink-0",children:Object($a.jsx)(Mc,{figure:ae().figure,direction:4})})]},t)}))})}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("guide.help.request.guide.ongoing.input.empty",["name"],[a]),value:f,onChange:function(e){return g(e.target.value)},onKeyDown:E}),Object($a.jsx)(dc,{variant:"success",onClick:_,children:st("widgets.chatinput.say")})]}),d&&Object($a.jsx)(Hi,{variant:"muted",children:st("guide.help.common.typing")})]}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:p,children:st("guide.help.request."+(n?"guide":"user")+".ongoing.close.link")})]})},Vu=function(e){var t=e.userRequest,n=void 0===t?"":t,r=e.setUserRequest,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1];return Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("guide.help.request.user.create.help")}),Object($a.jsx)("textarea",{className:"request-message",maxLength:140,value:n,onChange:function(e){return a(e.target.value)},placeholder:st("guide.help.request.user.create.input.help")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",disabled:n.length<15||u,onClick:function(){d(!0),ea(new l.hd(1,n))},children:st("guide.help.request.user.create.input.button")})]})},qu=function(e){var t=e.userName,n=void 0===t?null:t,r=Object(c.useCallback)((function(e){ea(new l.kd(e))}),[]);return Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(lc,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{bold:!0,children:n}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.feedback.guide.desc")})]}),Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("guide.help.common.report.link")})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.request.user.feedback.closed.title")}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.feedback.closed.desc")})]}),n&&n.length>0&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"bg-dark m-0 mt-auto"}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{center:!0,bold:!0,children:st("guide.help.request.user.feedback.question")}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return r(!0)},children:st("guide.help.request.user.feedback.positive.button")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",onClick:function(e){return r(!1)},children:st("guide.help.request.user.feedback.negative.button")})]})]})]})]})},Yu=function(e){var t=e.helpRequestDescription,n=void 0===t?null:t,r=e.helpRequestAverageTime,a=void 0===r?0:r;return Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(Jc,{gap:0,className:"bg-muted rounded p-2",children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.request.guide.accept.request.title")}),Object($a.jsx)(Hi,{variant:"muted",children:st("guide.help.request.type.1")}),Object($a.jsx)(Hi,{wrap:!0,textBreak:!0,children:n})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.request.user.pending.info.title")}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.pending.info.message")}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.pending.info.waiting",["waitingtime"],[a.toString()])})]}),Object($a.jsx)(dc,{variant:"danger",onClick:function(){return ea(new l.td)},children:st("guide.help.request.user.pending.cancel.button")})]})},zu=function(e){return Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("guide.help.request.user.thanks.info.title")}),Object($a.jsx)(Hi,{children:st("guide.help.request.user.thanks.info.desc")})]})},Ku=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(st("guide.help.guide.tool.title")),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(Mu.GUIDE_TOOL_MENU),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(!1),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(!1),N=Object(o.a)(S,2),k=N[0],A=N[1],w=Object(c.useState)(!1),D=Object(o.a)(w,2),U=D[0],P=D[1],M=Object(c.useState)(0),F=Object(o.a)(M,2),H=F[0],G=F[1],W=Object(c.useState)(0),V=Object(o.a)(W,2),q=V[0],Y=V[1],z=Object(c.useState)(0),K=Object(o.a)(z,2),Q=K[0],X=K[1],J=Object(c.useState)(""),Z=Object(o.a)(J,2),$=Z[0],ee=Z[1],te=Object(c.useState)(null),ne=Object(o.a)(te,2),re=ne[0],ce=ne[1],ie=Object(c.useState)(0),se=Object(o.a)(ie,2),oe=se[0],le=se[1],ue=Object(c.useState)(0),de=Object(o.a)(ue,2),je=de[0],be=de[1],Oe=Object(c.useState)(null),he=Object(o.a)(Oe,2),fe=he[0],ge=he[1],me=Object(c.useState)(null),ve=Object(o.a)(me,2),pe=ve[0],xe=ve[1],_e=Object(c.useState)(!1),Ee=Object(o.a)(_e,2),Ie=Ee[0],ye=Ee[1],Ce=Object(c.useState)([]),Te=Object(o.a)(Ce,2),Se=Te[0],Ne=Te[1],Re=Object(c.useCallback)((function(e,t){switch(e){case Mu.GUIDE_TOOL_MENU:d(st("guide.help.guide.tool.title")),h(!1);break;case Mu.GUIDE_ACCEPT:d(st("guide.help.request.guide.accept.title")),h(!0);break;case Mu.GUIDE_ONGOING:d(st("guide.help.request.guide.ongoing.title",["name"],[t])),h(!0);break;case Mu.USER_CREATE:d(st("guide.help.request.user.create.title")),h(!1);break;case Mu.USER_PENDING:d(st("guide.help.request.user.pending.title")),h(!0);break;case Mu.USER_ONGOING:d(st("guide.help.request.user.ongoing.title",["name"],[t])),h(!0);break;case Mu.USER_FEEDBACK:d(st("guide.help.request.user.feedback.title")),h(!0);break;case Mu.USER_THANKS:d(st("guide.help.request.user.thanks.title")),h(!1)}v(e),a(!0)}),[]),ke=Object(c.useCallback)((function(e){switch(e.type){case Et.SHOW_GUIDE_TOOL:return void a(!0);case Et.HIDE_GUIDE_TOOL:return void a(!1);case Et.TOGGLE_GUIDE_TOOL:return void a((function(e){return!e}));case Et.CREATE_HELP_REQUEST:return void Re(Mu.USER_CREATE)}}),[Re]);Qt(Et.SHOW_GUIDE_TOOL,ke),Qt(Et.HIDE_GUIDE_TOOL,ke),Qt(Et.TOGGLE_GUIDE_TOOL,ke),Qt(Et.CREATE_HELP_REQUEST,ke);var Ae=Object(c.useCallback)((function(e){!e.getParser().isAllowed(l.gf.USE_GUIDE_TOOL)&&_&&(E(!1),ea(new l.rd(!1,!1,!1,!1)))}),[_,E]);dt(l.ff,Ae);var we=Object(c.useCallback)((function(e){var t=e.getParser();E(t.onDuty),Y(t.guidesOnDuty),G(t.helpersOnDuty),X(t.guardiansOnDuty)}),[E,G,Y,X]);dt(l.fd,we);var De=Object(c.useCallback)((function(e){var t=e.getParser();ce(t.helpRequestDescription),le(t.roleSpecificWaitTime),t.asGuide&&_&&Re(Mu.GUIDE_ACCEPT),t.asGuide||Re(Mu.USER_PENDING)}),[_,Re]);dt(l.gd,De);var Ue=Object(c.useCallback)((function(e){var t=e.getParser();_?(be(t.requesterUserId),ge(t.requesterName),xe(t.requesterFigure),Re(Mu.GUIDE_ONGOING,t.requesterName)):(be(t.guideUserId),ge(t.guideName),xe(t.guideFigure),Re(Mu.USER_ONGOING,t.guideName))}),[_,Re]);dt(l.wd,Ue);var Pe=Object(c.useCallback)((function(e){var t=e.getParser();ye(t.isTyping)}),[]);dt(l.sd,Pe);var Le=Object(c.useCallback)((function(e){var t=e.getParser(),n=Object(ut.a)(Se),r=n[n.length-1];r&&r.userId===t.senderId||(r=new Hu(t.senderId),n.push(r)),r.addChat(new Fu(t.chatMessage)),Ne(n)}),[Se]);dt(l.qd,Le);var Me=Object(c.useCallback)((function(e){var t=e.getParser(),n=Object(ut.a)(Se),r=n[n.length-1],a=_?ae().userId:je;r&&r.userId===a||(r=new Hu(a),n.push(r)),r.addChat(new Fu(t.roomName,t.roomId)),Ne(n)}),[_,Se,je]);dt(l.od,Me);var Fe=Object(c.useCallback)((function(e){_?(be(0),ge(null),xe(null),ye(!1),Ne([]),Re(Mu.GUIDE_TOOL_MENU)):Re(Mu.USER_FEEDBACK)}),[_,Re]);dt(l.jd,Fe);var He=Object(c.useCallback)((function(e){be(0),ge(null),xe(null),ye(!1),Ne([]),Re(_?Mu.GUIDE_TOOL_MENU:Mu.USER_THANKS)}),[_,Re]);dt(l.id,He);var Be=Object(c.useCallback)((function(e){var t=e.split("/");t.length<2||t[1]}),[]);Object(c.useEffect)((function(){var e={linkReceived:Be,eventUrlPrefix:"help/"};return R(e),function(){return B(e)}}),[Be]);var Ge=Object(c.useCallback)((function(e){switch(e){case"close":return a(!1),ee(""),void v(Mu.GUIDE_TOOL_MENU);case"toggle_duty":return C||k||U?void E((function(e){return ea(new l.rd(!e,!e&&k,!e&&U,!e&&C)),!e})):void Kt(new At([st("guide.help.guide.tool.noqueueselected.message")],null,null,null,st("guide.help.guide.tool.noqueueselected.caption"),null));case"forum_link":var t=L("group.homepage.url","").replace("%groupid%",L("guide.help.alpha.groupid","0"));return void window.open(t)}}),[C,k,U]);return r?Object($a.jsxs)(Pc,{className:"nitro-guide-tool",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:u,onCloseClick:function(e){return Ge("close")},noCloseButton:O}),Object($a.jsxs)(Ec,{className:"text-black",children:[m===Mu.GUIDE_TOOL_MENU&&Object($a.jsx)(Gu,{isOnDuty:_,isHandlingGuideRequests:k,setIsHandlingGuideRequests:A,isHandlingHelpRequests:U,setIsHandlingHelpRequests:P,isHandlingBullyReports:C,setIsHandlingBullyReports:T,guidesOnDuty:q,helpersOnDuty:H,guardiansOnDuty:Q,processAction:Ge}),m===Mu.GUIDE_ACCEPT&&Object($a.jsx)(Bu,{helpRequestDescription:re,helpRequestAverageTime:oe}),[Mu.GUIDE_ONGOING,Mu.USER_ONGOING].includes(m)&&Object($a.jsx)(Wu,{isGuide:_,userId:je,userName:fe,userFigure:pe,isTyping:Ie,messageGroups:Se}),m===Mu.USER_CREATE&&Object($a.jsx)(Vu,{userRequest:$,setUserRequest:ee}),m===Mu.USER_PENDING&&Object($a.jsx)(Yu,{helpRequestDescription:re,helpRequestAverageTime:oe}),m===Mu.USER_FEEDBACK&&Object($a.jsx)(qu,{userName:fe}),m===Mu.USER_THANKS&&Object($a.jsx)(zu,{})]})]}):null},Qu=n(131),Xu=n(196),Ju=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Rn().userFigure,x=void 0===p?null:p,_=Tn(),E=_.purse,I=void 0===E?null:E,y=_.clubStatus,C=void 0===y?null:y,T=bn(),S=T.badgeCodes,N=void 0===S?[]:S,k=T.activate,A=void 0===k?null:k,w=T.deactivate,D=void 0===w?null:w,P=function(){return st("hccenter.special.sum",["credits"],[(u.creditRewardForStreakBonus+u.creditRewardForMonthlySpent).toString()])},M=Object(c.useCallback)((function(e){var t=e.getParser();h(t.giftsAvailable)}),[]);dt(l.fb,M);var F=Object(c.useCallback)((function(e){var t=e.getParser();d(t.data)}),[]);if(dt(l.Ah,F),Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2&&"hccenter"===t[2])a(!0)},eventUrlPrefix:"habboUI/"};return R(e),function(){return B(e)}}),[]),Object(c.useEffect)((function(){v(function(e){var t=null;return Na.forEach((function(n){return e.indexOf(n)>-1&&(t=n)})),t||"HC1"}(N))}),[N]),Object(c.useEffect)((function(){if(r){var e=A();return function(){return D(e)}}}),[r,A,D]),Object(c.useEffect)((function(){ea(new l.fc),ea(new l.zh)}),[]),!r)return null;var H=Object($a.jsx)(Qu.a,{id:"popover-basic",children:Object($a.jsxs)(Qu.a.Body,{className:"text-black py-2 px-3",children:[Object($a.jsx)("h5",{children:st("hccenter.breakdown.title")}),Object($a.jsx)("div",{children:st("hccenter.breakdown.creditsspent",["credits"],[u.totalCreditsSpent.toString()])}),Object($a.jsx)("div",{children:st("hccenter.breakdown.paydayfactor.percent",["percent"],[(100*u.kickbackPercentage).toString()])}),Object($a.jsx)("div",{children:st("hccenter.breakdown.streakbonus",["credits"],[u.creditRewardForStreakBonus.toString()])}),Object($a.jsx)("hr",{className:"w-100 text-black my-1"}),Object($a.jsx)("div",{children:st("hccenter.breakdown.total",["credits","actual"],[P(),(100*(u.kickbackPercentage*u.totalCreditsSpent+u.creditRewardForStreakBonus)/100).toString()])}),Object($a.jsx)("div",{className:"btn btn-link text-primary p-0",onClick:function(){return U("habbopages/"+L("hc.center")["payday.habbopage"])},children:st("hccenter.special.infolink")})]})});return Object($a.jsxs)(Pc,{theme:"primary-slim",className:"nitro-hc-center",children:[Object($a.jsx)(Tc,{headerText:st("generic.hccenter"),onCloseClick:function(){return a(!1)}}),Object($a.jsxs)(lc,{position:"relative",className:"bg-muted p-2",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)("div",{className:"hc-logo"}),Object($a.jsx)(lc,{children:Object($a.jsx)(dc,{variant:"success",onClick:function(e){return U("catalog/open/"+L("catalog.links")["hc.buy_hc"])},children:st(C===Sa.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),Object($a.jsx)(tc,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:Object($a.jsx)(Mc,{figure:x,direction:4,scale:2})})]}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(Gc,{badgeCode:m,className:"align-self-center flex-shrink-0 me-1"}),Object($a.jsxs)(Jc,{size:5,className:"streak-info",gap:0,children:[Object($a.jsx)(Hi,{children:st("hccenter.status."+C)}),Object($a.jsx)(Hi,{dangerouslySetInnerHTML:{__html:function(){switch(C){case Sa.ACTIVE:return st("hccenter.status.".concat(C,".info"),["timeleft","joindate","streakduration"],[I.clubDays<=0?st("purse.clubdays.zero.amount.text"):I.minutesUntilExpiration>-1&&I.minutesUntilExpiration<1440?l.Ib.shortFormat(60*I.minutesUntilExpiration):l.Ib.shortFormat(86400*(31*I.clubPeriods+I.clubDays)),u.firstSubscriptionDate,l.Ib.shortFormat(86400*u.currentHcStreak)]);case Sa.EXPIRED:return st("hccenter.status.".concat(C,".info"),["joindate"],[u.firstSubscriptionDate]);default:return st("hccenter.status.".concat(C,".info"))}}()}})]})]}),L("hc.center")["payday.info"]&&Object($a.jsxs)(lc,{alignItems:"center",children:[Object($a.jsxs)(Jc,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[Object($a.jsx)("h4",{className:"mb-1",children:st("hccenter.special.title")}),Object($a.jsx)("div",{children:st("hccenter.special.info")}),Object($a.jsx)("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:function(){return U("habbopages/"+L("hc.center")["payday.habbopage"])},children:st("hccenter.special.infolink")})]}),Object($a.jsxs)("div",{className:"payday flex-shrink-0 p-2",children:[Object($a.jsx)("h5",{className:"mb-2 ms-2",children:st("hccenter.special.time.title")}),Object($a.jsxs)("div",{className:"d-flex flex-row mb-2",children:[Object($a.jsx)("div",{className:"clock me-2"}),Object($a.jsx)("h6",{className:"mb-0 align-self-center",children:u.timeUntilPayday<60?st("hccenter.special.time.soon"):l.Ib.shortFormat(60*u.timeUntilPayday)})]}),C===Sa.ACTIVE&&Object($a.jsxs)("div",{className:"pe-3",children:[Object($a.jsx)("h5",{className:"ms-2 mb-1 bolder",children:st("hccenter.special.amount.title")}),Object($a.jsxs)("div",{className:"d-flex flex-column",children:[Object($a.jsx)("div",{className:"w-100 text-center ms-4n",children:P()}),Object($a.jsx)(Xu.a,{trigger:["hover","focus"],placement:"left",overlay:H,children:Object($a.jsx)("div",{className:"btn btn-link align-self-end text-primary",children:st("hccenter.breakdown.infolink")})})]})]})]})]}),L("hc.center")["gift.info"]&&Object($a.jsxs)("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[Object($a.jsxs)("div",{children:[Object($a.jsx)("h4",{className:"mb-1",children:st("hccenter.gift.title")}),Object($a.jsx)("div",{dangerouslySetInnerHTML:{__html:O>0?st("hccenter.unclaimedgifts",["unclaimedgifts"],[O.toString()]):st("hccenter.gift.info")}})]}),Object($a.jsx)("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:function(){return U("catalog/open/"+L("catalog.links")["hc.hc_gifts"])},children:st(C===Sa.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),L("hc.center")["benefits.info"]&&Object($a.jsxs)("div",{className:"benefits text-black py-2",children:[Object($a.jsx)("h5",{className:"mb-1 text-primary",children:st("hccenter.general.title")}),Object($a.jsx)("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:st("hccenter.general.info")}}),Object($a.jsx)("button",{className:"btn btn-link p-0 text-primary",onClick:function(){return U("habbopages/"+L("hc.center")["benefits.habbopage"])},children:st("hccenter.general.infolink")})]})]})]})},Zu=Object(c.createContext)({helpReportState:null,setHelpReportState:null}),$u=function(e){return Object($a.jsx)(Zu.Provider,{value:e.value,children:e.children})},ed=function(){return Object(c.useContext)(Zu)},td=Object(d.a)((function e(){Object(u.a)(this,e)}));td.TOO_MANY_PENDING_CALLS_CODE=1,td.HAS_ABUSIVE_CALL_CODE=2;var nd=function(e){var t=Object(c.useCallback)((function(e){var t=e.getParser(),n=t.messageText;switch(t.resultType){case td.TOO_MANY_PENDING_CALLS_CODE:ea(new l.qc),Ha.simpleAlert(st("help.cfh.error.pending"),Ua.MODERATION,null,null,st("help.cfh.error.title"));break;case td.HAS_ABUSIVE_CALL_CODE:Ha.simpleAlert(st("help.cfh.error.abusive"),Ua.MODERATION,null,null,st("help.cfh.error.title"));break;default:0===n.trim().length&&(n=st("help.cfh.sent.text")),Ha.simpleAlert(n,Ua.MODERATION,null,null,st("help.cfh.sent.title"))}}),[]);dt(l.K,t);var n=Object(c.useCallback)((function(e){var t,n=e.getParser(),r=0===n.messageText.length?st("help.cfh.closed."+(1===(t=n.closeReason)?"useless":2===t?"abusive":"resolved")):n.messageText;Ha.simpleAlert(r,Ua.MODERATION,null,null,st("mod.alert.title"))}),[]);return dt(l.Kd,n),null},rd=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ed(),s=i.helpReportState,u=void 0===s?null:s,d=(i.setHelpReportState,u.reportedChats),j=u.cfhTopic,b=u.reportedUserId;return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:4,children:st("help.emergency.chat_report.subtitle")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("help.cfh.input.text")})]}),Object($a.jsx)("textarea",{className:"form-control h-100",value:r,onChange:function(e){return a(e.target.value)}}),Object($a.jsx)(dc,{variant:"success",disabled:r.length<15,onClick:function(){if(!(r.length<15)){var e=d[0].roomId,t=[];d.forEach((function(e){t.push(e.entityId),t.push(e.message)})),ea(new l.J(r,j,b,e,t)),U("help/hide")}},children:st("help.bully.submit")})]})},ad=function(e){var t=ed(),n=t.helpReportState,r=void 0===n?null:n,a=t.setHelpReportState,i=void 0===a?null:a,s=Object(c.useCallback)((function(){var e=Object.assign({},r);e.currentStep=1,i(e)}),[r,i]),o=Object(c.useCallback)((function(){ea(new l.ec(!1))}),[]),u=Object(c.useCallback)((function(){Kt(new Et(Et.CREATE_HELP_REQUEST))}),[]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:3,children:st("help.main.frame.title")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("help.main.self.description")})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{onClick:s,children:st("help.main.bully.subtitle")}),Object($a.jsx)(dc,{onClick:u,children:st("help.main.help.title")}),Object($a.jsx)(dc,{disabled:!0,children:st("help.main.self.tips.title")}),Object($a.jsx)(dc,{style:{color:"var(--test-galaxytext)"},variant:"none",onClick:o,children:st("help.main.my.sanction.status")})]})]})},cd=function(e){var t=e.username,n=void 0===t?"":t,r=e.onAction,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.webId===ae().userId&&a("close")}),[a]);dt(l.Ai,j);var b=Object(c.useCallback)((function(){u||(d(!0),ea(new l.bb(n)))}),[u,n]);return Object($a.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object($a.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:st("tutorial.name_change.info.confirm")}),Object($a.jsxs)("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[Object($a.jsx)("div",{children:st("tutorial.name_change.confirm")}),Object($a.jsx)("div",{className:"fw-bold",children:n})]}),Object($a.jsxs)("div",{className:"d-flex gap-2",children:[Object($a.jsx)("button",{className:"btn btn-success w-100",disabled:u,onClick:b,children:st("generic.ok")}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(){return a("close")},children:st("cancel")})]})]})},id=function(e){var t=e.onAction,n=void 0===t?null:t;return Object($a.jsxs)("div",{className:"d-flex flex-column gap-4 h-100",children:[Object($a.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:st("tutorial.name_change.info.main")}),Object($a.jsx)("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:st("tutorial.name_change.current",["name"],[ae().userName])}),Object($a.jsxs)("div",{className:"d-flex gap-2",children:[Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(){return n("start")},children:st("tutorial.name_change.change")}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(){return n("confirmation",ae().userName)},children:st("tutorial.name_change.keep")})]})]})},sd=function(e){var t=e.onAction,n=void 0===t?null:t,r=Object(c.useState)(""),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(null),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)([]),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useCallback)((function(e){g(!1);var t=e.getParser();if(t)switch(t.resultCode){case 0:b(!0);break;case 2:x("short");break;case 3:x("long");break;case 4:x("invalid");break;case 5:y(t.nameSuggestions),x("taken");break;case 6:x("change_not_allowed")}}),[]);dt(l.db,C);var T=Object(c.useCallback)((function(){""!==i&&(b(!1),y([]),x(null),g(!0),ea(new l.cb(i)))}),[i]),S=Object(c.useCallback)((function(e){b(!1),y([]),x(null),s(e)}),[]);return Object($a.jsxs)("div",{className:"d-flex flex-column gap-3 h-100",children:[Object($a.jsx)("div",{children:st("tutorial.name_change.info.select")}),Object($a.jsxs)("div",{className:"d-flex gap-2",children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:function(e){return S(e.target.value)}}),Object($a.jsx)("button",{className:"btn btn-primary",disabled:""===i||f,onClick:T,children:st("tutorial.name_change.check")})]}),!p&&!j&&Object($a.jsx)("div",{className:"bg-muted rounded p-2 text-center",children:st("help.tutorial.name.info")}),p&&Object($a.jsx)("div",{className:"bg-danger rounded p-2 text-center text-white",children:st("help.tutorial.name.".concat(p),["name"],[i])}),j&&Object($a.jsx)("div",{className:"bg-success rounded p-2 text-center text-white",children:st("help.tutorial.name.available",["name"],[i])}),I&&Object($a.jsx)("div",{className:"d-flex flex-column gap-2",children:I.map((function(e,t){return Object($a.jsx)("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:function(){return S(e)},children:e},t)}))}),Object($a.jsxs)("div",{className:"d-flex gap-2",children:[Object($a.jsx)("button",{className:"btn btn-success w-100",disabled:!j,onClick:function(){return n("confirmation",i)},children:st("tutorial.name_change.pick")}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(){return n("close")},children:st("cancel")})]})]})},od="INIT",ld="INPUT",ud="CONFIRMATION",dd=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(od),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(""),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useCallback)((function(e){u(od),a(!0)}),[]);Qt(It.INIT,h);var f=Object(c.useCallback)((function(e,t){switch(e){case"start":u(ld);break;case"confirmation":O(t),u(ud);break;case"close":O(""),a(!1)}}),[]),g=Object(c.useMemo)((function(){switch(l){case od:return"tutorial.name_change.title.main";case ld:return"tutorial.name_change.title.select";case ud:return"tutorial.name_change.title.confirm"}}),[l]);return r?Object($a.jsxs)(Pc,{className:"nitro-change-username",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st(g),onCloseClick:function(){return f("close")}}),Object($a.jsxs)(Ec,{className:"text-black",children:[l===od&&Object($a.jsx)(id,{onAction:f}),l===ld&&Object($a.jsx)(sd,{onAction:f}),l===ud&&Object($a.jsx)(cd,{username:b,onAction:f})]})]}):null},jd=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useCallback)((function(e){var t=e.getParser();t&&a(t)}),[]);dt(l.wh,i);var s=Object(c.useCallback)((function(e,t,n){var r="help.sanction.".concat(e);switch(t){case"ALERT":r+=".alert";break;case"MUTE":r+=".mute";break;case"BAN_PERMANENT":r+=".permban";break;default:if(r+=".ban",n>24)return st(r+=".days",["days"],[(n/24).toString()])}return st(r,["hours"],[n.toString()])}),[]);return r?Object($a.jsxs)(Pc,{className:"nitro-help",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("help.sanction.info.title"),onCloseClick:function(){return a(null)}}),Object($a.jsx)(Ec,{className:"text-black",children:Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{center:!0,size:5,overflow:"hidden",children:Object($a.jsx)(tc,{className:"index-image"})}),Object($a.jsxs)(Jc,{justifyContent:"between",size:7,overflow:"hidden",children:["cfh.reason.EMPTY"===r.sanctionReason?Object($a.jsx)("div",{className:"col-12 fw-bold",style:{color:"var(--test-galaxytext)"},children:st("help.sanction.current.none")}):Object($a.jsxs)($a.Fragment,{children:[(r.probationHoursLeft>0||r.isSanctionActive)&&Object($a.jsx)("div",{className:"col-12 fw-bold",style:{color:"var(--test-galaxytext)"},children:st("help.sanction.probation.reminder")}),Object($a.jsxs)("div",{className:"col-12 fw-bold ".concat(r.isSanctionNew?"text-danger":""),children:[st("help.sanction.last.sanction")," ",s("current",r.sanctionName,r.sanctionLengthHours)]}),Object($a.jsxs)("div",{className:"col-12",style:{color:"var(--test-galaxytext)"},children:[st("generic.start.time")," ",r.sanctionCreationTime]}),Object($a.jsxs)("div",{className:"col-12",style:{color:"var(--test-galaxytext)"},children:[st("generic.reason")," ",r.sanctionReason]}),Object($a.jsxs)("div",{className:"col-12",style:{color:"var(--test-galaxytext)"},children:[st("help.sanction.probation.days.left")," ",Math.trunc(r.probationHoursLeft/24)+1]})]}),r.hasCustomMute&&!r.isSanctionActive&&Object($a.jsx)("div",{className:"col-12 fw-bold",style:{color:"var(--test-galaxytext)"},children:st("help.sanction.custom.mute")}),r.tradeLockExpiryTime&&r.tradeLockExpiryTime.length>0&&Object($a.jsxs)("div",{className:"col-12 fw-bold",style:{color:"var(--test-galaxytext)"},children:[st("trade.locked.until")," ",r.tradeLockExpiryTime]}),Object($a.jsx)("div",{className:"col-12",children:s("next",r.nextSanctionName,r.nextSanctionLengthHours)}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return a(null)},children:st("habbo.way.ok.button")})]})]})})]}):null},bd=function(e){var t=Object(c.useState)(new Map),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ed(),s=i.helpReportState,u=void 0===s?null:s,d=i.setHelpReportState,j=void 0===d?null:d,b=u.reportedUserId,O=void 0===b?-1:b,h=Object(c.useMemo)((function(){return Cl().chats.filter((function(e){return e.type===xl.TYPE_CHAT&&e.entityId===O&&e.entityType===l.Gg.USER}))}),[O]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:4,children:st("help.emergency.chat_report.subtitle")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("help.emergency.chat_report.description")})]}),Object($a.jsxs)(Jc,{gap:1,overflow:"hidden",children:[!h.length&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("help.cfh.error.no_user_data")}),h.length>0&&Object($a.jsx)(sc,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:h.map((function(e,t){return Object($a.jsx)(ii,{onClick:function(t){return function(e){var t=new Map(r);t.has(e.id)?t.delete(e.id):t.set(e.id,e),a(t)}(e)},itemActive:r.has(e.id),children:Object($a.jsx)(Hi,{children:e.message})},e.id)}))})]}),Object($a.jsxs)(lc,{gap:2,justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"secondary",onClick:function(){j((function(e){var t=e.currentStep-1;return Object(bt.a)(Object(bt.a)({},e),{},{currentStep:t})}))},children:st("generic.back")}),Object($a.jsx)(dc,{disabled:r.size<=0,onClick:function(){!r||r.size<=0||j((function(e){var t=Array.from(r.values());return Object(bt.a)(Object(bt.a)({},e),{},{reportedChats:t,currentStep:3})}))},children:st("help.emergency.main.submit.button")})]})]})},Od=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ed(),s=(i.helpReportState,i.setHelpReportState),u=void 0===s?null:s,d=Object(c.useMemo)((function(){var e=new Map;return Cl().chats.forEach((function(t){t.type===xl.TYPE_CHAT&&t.entityType===l.Gg.USER&&t.entityId!==ae().userId&&(e.has(t.entityId)||e.set(t.entityId,{id:t.entityId,username:t.name}))})),Array.from(e.values())}),[]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:4,children:st("help.emergency.main.step.two.title")}),d.length>0&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("report.user.pick.user")})]}),Object($a.jsxs)(Jc,{gap:1,overflow:"hidden",children:[!d.length&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("report.user.error.nolist")}),d.length>0&&Object($a.jsx)(sc,{columnCount:1,columnMinHeight:25,gap:1,children:d.map((function(e,t){return Object($a.jsx)(ii,{onClick:function(t){return n=e.id,void a(r===n?-1:n);var n},itemActive:r===e.id,children:Object($a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.username}})},e.id)}))})]}),Object($a.jsxs)(lc,{gap:2,justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"secondary",onClick:function(){u((function(e){var t=e.currentStep-1;return Object(bt.a)(Object(bt.a)({},e),{},{currentStep:t})}))},children:st("generic.back")}),Object($a.jsx)(dc,{disabled:r<=0,onClick:function(){r<=0||u((function(e){var t=r;return Object(bt.a)(Object(bt.a)({},e),{},{reportedUserId:t,currentStep:2})}))},children:st("help.emergency.main.submit.button")})]})]})},hd=[],fd=function(e){var t=ed().setHelpReportState,n=void 0===t?null:t,r=Object(c.useState)(-1),a=Object(o.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)(-1),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useMemo)((function(){return hd}),[]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:4,children:st("help.emergency.chat_report.subtitle")}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("help.cfh.pick.topic")})]}),Object($a.jsxs)(Jc,{gap:1,overflow:"auto",children:[i<0&&b.map((function(e,t){return Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return s(t)},children:st("help.cfh.reason.".concat(e.name))},t)})),i>=0&&b[i].topics.map((function(e,t){return Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return j(t)},active:d===t,children:st("help.cfh.topic.".concat(e.id))},t)}))]}),Object($a.jsxs)(lc,{gap:2,justifyContent:"between",children:[Object($a.jsx)(dc,{style:{color:"var(--test-galaxytext)"},variant:"none",onClick:function(){n((function(e){var t=e.currentStep-1;return Object(bt.a)(Object(bt.a)({},e),{},{currentStep:t})}))},children:st("generic.back")}),Object($a.jsx)(dc,{style:{color:"var(--test-galaxytext)"},variant:"none",disabled:d<0,onClick:function(){i<0||d<0||n((function(e){var t=i,n=b[i].topics[d].id;return Object(bt.a)(Object(bt.a)({},e),{},{cfhCategory:t,cfhTopic:n,currentStep:4})}))},children:st("help.emergency.main.submit.button")})]})]})},gd=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0}),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}}),[]),j=Object(c.useCallback)((function(e){u({reportedUserId:e.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:2}),a(!0)}),[]);Qt(yt.REPORT_USER,j),Object(c.useEffect)((function(){var e={linkReceived:d,eventUrlPrefix:"help/"};return R(e),function(){return B(e)}}),[d]),Object(c.useEffect)((function(){r&&u({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:"",currentStep:0})}),[r]);var b=Object(c.useCallback)((function(){switch(l.currentStep){case 0:return Object($a.jsx)(ad,{});case 1:return Object($a.jsx)(Od,{});case 2:return Object($a.jsx)(bd,{});case 3:return Object($a.jsx)(fd,{});case 4:return Object($a.jsx)(rd,{})}return null}),[l.currentStep]);return Object($a.jsxs)($u,{value:{helpReportState:l,setHelpReportState:u},children:[Object($a.jsx)(nd,{}),r&&Object($a.jsxs)(Pc,{className:"nitro-help",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("help.button.cfh"),onCloseClick:function(e){return a(!1)}}),Object($a.jsx)(Ec,{className:"text-black",children:Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{center:!0,size:5,overflow:"hidden",children:Object($a.jsx)(tc,{className:"index-image"})}),Object($a.jsx)(Jc,{justifyContent:"between",size:7,overflow:"hidden",children:Object($a.jsx)(b,{})})]})})]}),Object($a.jsx)(jd,{}),Object($a.jsx)(dd,{})]})},md=function(e){var t=Object(c.useState)(!0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=(Rn().userFigure,Object(c.useState)([])),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(o.a)(f,2),m=g[0],v=g[1],p=new URLSearchParams(window.location.search).get("sso"),x=Object(c.useState)(!0),_=Object(o.a)(x,2),E=_[0],I=_[1];function y(e){return"url(https://habbo-imaging.lavvos.eu/?figure="+e+"&amp;direction=2&amp;head_direction=2)"}function C(e){return"https://lavvos.eu/profile/"+e}Object(c.useEffect)((function(){fetch("https://int.lavvos.eu/?type=getHotelViewStats&sso="+p).then((function(e){return e.json()})).then((function(e){v(e.viewPoints),d(e.diamonds),h(e.duckets),I(!1)}))}),[]);var T=Object(c.useCallback)((function(e){switch(e.type){case l.Sg.CREATED:return void a(!1);case l.Sg.ENDED:return void a(e.openLandingView)}}),[]);if(Yt(l.Sg.CREATED,T),Yt(l.Sg.ENDED,T),!r)return null;L("hotelview").images["background.colour"];var S=Oa().interpolate(L("hotelview").images.background),N=Oa().interpolate(L("hotelview").images.sun),R=Oa().interpolate(L("hotelview").images.drape),k=Oa().interpolate(L("hotelview").images.left),A=Oa().interpolate(L("hotelview").images["right.repeat"]),w=Oa().interpolate(L("hotelview").images.right);return Object($a.jsxs)("div",{className:"nitro-hotel-view",children:[Object($a.jsx)("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:Object($a.jsx)("div",{className:"row h-100",style:{marginLeft:"100px",marginTop:"50px"},children:!E&&Object($a.jsxs)("div",{className:"col-md-10 animate__animated animate__fadeInDown",children:[Object($a.jsx)("div",{className:"card",style:{backgroundColor:"var(--test-galaxy)",padding:"20px",borderRadius:"5px",marginBottom:"15px"},children:Object($a.jsxs)("div",{className:"row",children:[Object($a.jsxs)("div",{className:"col-md-10",children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"Recompensa mensual"})}),Object($a.jsx)("br",{}),Object($a.jsx)("div",{style:{height:"30px"},className:"progress",children:Object($a.jsxs)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:m+"%"},children:[m,"%"]})}),Object($a.jsxs)("small",{style:{color:"var(--test-galaxytext)"},children:["Debes llegar a 100 horas jugadas para obtener la recompensa ",Object($a.jsxs)("b",{children:["(",m,"/100)"]})," - Termina el 30 de septiembre"]})]}),Object($a.jsx)("div",{className:"col-md-2 text-center",children:Object($a.jsx)("img",{style:{marginTop:"17px"},src:"https://i.imgur.com/RJNXe26.png"})})]})}),Object($a.jsxs)("div",{className:"row",children:[Object($a.jsx)("div",{className:"col-md-6",children:Object($a.jsxs)("div",{className:"card",style:{backgroundColor:"var(--test-galaxy)",padding:"20px",borderRadius:"5px",marginBottom:"15px"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"Top cometas"})}),Object($a.jsx)("br",{}),u.map((function(e){return Object($a.jsxs)("div",{className:"row",style:{backgroundColor:"var(--test-galaxytwo)",padding:"7px",borderRadius:"5px",marginBottom:"5px"},children:[Object($a.jsx)("div",{className:"col-md-2",children:Object($a.jsx)("div",{style:{paddingBottom:"-15px"},children:Object($a.jsx)("div",{className:"user-img",style:{backgroundImage:y(e.figure),backgroundPosition:"-11px -14px",width:"45px",height:"48px",marginLeft:"5px"}})})}),Object($a.jsxs)("div",{className:"col-md-10",children:[Object($a.jsx)("br",{}),Object($a.jsxs)("div",{style:{float:"right"},children:[Object($a.jsx)("b",{children:Object($a.jsx)("span",{style:{fontSize:"14px"},className:"badge bg-dark",children:Object($a.jsx)("a",{className:"text-white",href:C(e.username),target:"_blank",children:e.username})})})," \xa0",Object($a.jsx)("b",{children:Object($a.jsxs)("span",{style:{fontSize:"14px"},className:"badge bg-primary",children:[e.vip_points," cometas"]})})]})]})]})}))]})}),Object($a.jsx)("div",{className:"col-md-6",children:Object($a.jsxs)("div",{className:"card",style:{backgroundColor:"var(--test-galaxy)",padding:"20px",borderRadius:"5px",marginBottom:"15px"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"Top asteroides"})}),Object($a.jsx)("br",{}),O.map((function(e){return Object($a.jsxs)("div",{className:"row",style:{backgroundColor:"var(--test-galaxytwo)",padding:"7px",borderRadius:"5px",marginBottom:"5px"},children:[Object($a.jsx)("div",{className:"col-md-2",children:Object($a.jsx)("div",{style:{paddingBottom:"-15px"},children:Object($a.jsx)("div",{className:"user-img",style:{backgroundImage:y(e.figure),backgroundPosition:"-11px -14px",width:"45px",height:"48px",marginLeft:"5px"}})})}),Object($a.jsxs)("div",{className:"col-md-10",children:[Object($a.jsx)("br",{}),Object($a.jsxs)("div",{style:{float:"right"},children:[Object($a.jsx)("b",{children:Object($a.jsx)("span",{style:{fontSize:"14px"},className:"badge bg-dark",children:Object($a.jsx)("a",{className:"text-white",href:C(e.username),target:"_blank",children:e.username})})})," \xa0",Object($a.jsx)("b",{children:Object($a.jsxs)("span",{style:{fontSize:"14px"},className:"badge bg-info",children:[e.activity_points," asteroides"]})})]})]})]})}))]})})]})]})})}),Object($a.jsx)("div",{className:"background position-absolute",style:S&&S.length?{backgroundImage:"url(".concat(S,")")}:{}}),Object($a.jsx)("div",{className:"sun position-absolute",style:N&&N.length?{backgroundImage:"url(".concat(N,")")}:{}}),Object($a.jsx)("div",{className:"drape position-absolute",style:R&&R.length?{backgroundImage:"url(https://lavvos.eu/swfs/banners/logohotel.png)"}:{}}),Object($a.jsx)("div",{className:"left position-absolute",style:k&&k.length?{backgroundImage:"url(".concat(k,")")}:{}}),Object($a.jsx)("div",{className:"right-repeat position-absolute",style:A&&A.length?{backgroundImage:"url(".concat(A,")")}:{}}),Object($a.jsx)("div",{className:"right position-absolute",style:w&&w.length?{backgroundImage:"url(https://lavvos.eu/swfs/banners/testt.png)"}:{}})]})},vd=["badgeCode","children"],pd=function(e){var t=e.badgeCode,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,c=Object(Za.a)(e,vd),i=bn(),s=i.selectedBadgeCode,o=void 0===s?null:s,l=i.setSelectedBadgeCode,u=void 0===l?null:l,d=i.getBadgeId,j=void 0===d?null:d,b=dn().isUnseen,O=(void 0===b?null:b)(Jn.BADGE,j(n));return Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemActive:o===n,itemUnseen:O,onMouseDown:function(e){return u(n)}},c),{},{children:[Object($a.jsx)(Gc,{badgeCode:n}),a]}))},xd=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=bn(),s=i.badgeCodes,l=void 0===s?[]:s,u=i.activeBadgeCodes,d=void 0===u?[]:u,j=i.selectedBadgeCode,b=void 0===j?null:j,O=i.isWearingBadge,h=void 0===O?null:O,f=i.canWearBadges,g=void 0===f?null:f,m=i.toggleBadge,v=void 0===m?null:m,p=i.getBadgeId,x=void 0===p?null:p,_=i.activate,E=void 0===_?null:_,I=i.deactivate,y=void 0===I?null:I,C=dn(),T=C.isUnseen,S=void 0===T?null:T,N=C.removeUnseen,R=void 0===N?null:N;return Object(c.useEffect)((function(){b&&S(Jn.BADGE,x(b))&&R(Jn.BADGE,x(b))}),[b,S,R,x]),Object(c.useEffect)((function(){if(r){var e=E();return function(){return y(e)}}}),[r,E,y]),Object(c.useEffect)((function(){return a(!0),function(){return a(!1)}}),[]),Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(sc,{columnCount:4,children:l&&l.length>0&&l.map((function(e,t){return d.indexOf(e)>=0?null:Object($a.jsx)(pd,{badgeCode:e},t)}))})}),Object($a.jsxs)(Jc,{className:"justify-content-between",size:5,overflow:"auto",children:[Object($a.jsxs)(Jc,{overflow:"hidden",gap:2,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("inventory.badges.activebadges")}),Object($a.jsx)(sc,{columnCount:3,children:d&&d.length>0&&d.map((function(e,t){return Object($a.jsx)(pd,{badgeCode:e},t)}))})]}),!!b&&Object($a.jsxs)(Jc,{grow:!0,justifyContent:"end",gap:2,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(Gc,{shrink:!0,badgeCode:b}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:it(b)})]}),Object($a.jsx)(dc,{variant:h(b)?"danger":"success",disabled:!h(b)&&!g(),onClick:function(e){return v(b)},children:st(h(b)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},_d=["title","desc","children"],Ed=function(e){var t=e.title,n=void 0===t?"":t,r=e.desc,a=void 0===r?"":r,c=e.children,i=void 0===c?null:c,s=Object(Za.a)(e,_d);return Object($a.jsxs)(cc,Object(bt.a)(Object(bt.a)({},s),{},{children:[Object($a.jsx)(Jc,{center:!0,size:5,overflow:"hidden",children:Object($a.jsx)("div",{className:"empty-image"})}),Object($a.jsxs)(Jc,{justifyContent:"center",size:7,overflow:"hidden",children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:n}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",overflow:"auto",children:a})]}),i]}))},Id=["botItem","children"],yd=function(e){var t=e.botItem,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,Id),s=Object(c.useState)(!1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=hn(),O=b.selectedBot,h=void 0===O?null:O,f=b.setSelectedBot,g=void 0===f?null:f,m=dn().isUnseen,v=(void 0===m?null:m)(Jn.BOT,n.botData.id),p=function(e){switch(e.type){case l.xe.MOUSE_DOWN:return g(n),void j(!0);case l.xe.MOUSE_UP:return void j(!1);case l.xe.ROLL_OUT:if(!d||h!==n)return;return void Xn(n)}};return Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemActive:h===n,itemUnseen:v,onMouseDown:p,onMouseUp:p,onMouseOut:p},i),{},{children:[Object($a.jsx)(Mc,{figure:n.botData.figure,direction:3,headOnly:!0}),a]}))},Cd=function(e){var t=e.roomSession,n=void 0===t?null:t,r=e.roomPreviewer,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=hn(),b=j.botItems,O=void 0===b?[]:b,h=j.selectedBot,f=void 0===h?null:h,g=j.activate,m=void 0===g?null:g,v=j.deactivate,p=void 0===v?null:v,x=dn(),_=x.isUnseen,E=void 0===_?null:_,I=x.removeUnseen,y=void 0===I?null:I;return Object(c.useEffect)((function(){if(f&&a){var e=f.botData,t=G(),n=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",a.reset(!1),a.updateRoomWallsAndFloorVisibility(!0,!0),a.updateObjectRoom(r,n,c),a.addAvatarIntoRoom(e.figure,0)}}),[a,f]),Object(c.useEffect)((function(){f&&E(Jn.BOT,f.botData.id)&&y(Jn.BOT,f.botData.id)}),[f,E,y]),Object(c.useEffect)((function(){if(u){var e=m();return function(){return p(e)}}}),[u,m,p]),Object(c.useEffect)((function(){return d(!0),function(){return d(!1)}}),[]),O&&O.length?Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(sc,{columnCount:5,children:O&&O.length>0&&O.map((function(e){return Object($a.jsx)(yd,{botItem:e},e.botData.id)}))})}),Object($a.jsxs)(Jc,{size:5,overflow:"auto",children:[Object($a.jsx)(Jc,{overflow:"hidden",position:"relative",children:Object($a.jsx)(yi,{roomPreviewer:a,height:140})}),f&&Object($a.jsxs)(Jc,{grow:!0,justifyContent:"between",gap:2,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:f.botData.name}),!!n&&Object($a.jsx)(dc,{variant:"success",onClick:function(e){return Xn(f)},children:st("inventory.furni.placetoroom")})]})]})]}):Object($a.jsx)(Ed,{title:st("inventory.empty.bots.title"),desc:st("inventory.empty.bots.desc")})},Td=["groupItem"],Sd=function(e){var t=e.groupItem,n=void 0===t?null:t,r=Object(Za.a)(e,Td),a=Object(c.useState)(!1),i=Object(o.a)(a,2),s=i[0],u=i[1],d=mn(),j=d.selectedItem,b=void 0===j?null:j,O=d.setSelectedItem,h=void 0===O?null:O,f=function(e){switch(e.type){case l.xe.MOUSE_DOWN:return h(n),void u(!0);case l.xe.MOUSE_UP:return void u(!1);case l.xe.ROLL_OUT:if(!s||n!==b)return;return void Qn(n)}},g=n.getUnlockedCount();return Object($a.jsx)(ii,Object(bt.a)({className:g?"":"opacity-0-5 ",itemImage:n.iconUrl,itemCount:n.getUnlockedCount(),itemActive:n===b,itemUniqueNumber:n.stuffData.uniqueNumber,itemUnseen:n.hasUnseenItems,onMouseDown:f,onMouseUp:f,onMouseOut:f},r))},Nd=function(e){var t=e.groupItems,n=void 0===t?[]:t,r=e.setGroupItems,a=void 0===r?null:r,i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){var e=Object(ut.a)(n);if(l&&l.length){var t=l.toLocaleLowerCase();e=n.filter((function(e){return t&&t.length&&e.name.toLocaleLowerCase().includes(t)?e:null}))}a(e)}),[n,a,l]),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("generic.search"),value:l,onChange:function(e){return u(e.target.value)}}),Object($a.jsx)(dc,{variant:"primary",children:Object($a.jsx)(mc.a,{icon:"search"})})]})},Rd=function(e){var t=e.roomSession,n=void 0===t?null:t,r=e.roomPreviewer,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=mn(),g=f.groupItems,m=void 0===g?[]:g,v=f.selectedItem,p=void 0===v?null:v,x=f.activate,_=void 0===x?null:x,E=f.deactivate,I=void 0===E?null:E,y=dn().resetItems,C=void 0===y?null:y;return Object(c.useEffect)((function(){if(p&&a){var e=p.getLastItem();if(e){var t=G(),n=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_LANDSCAPE_TYPE);if(n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",a.reset(!1),a.updateObjectRoom(r,n,c),a.updateRoomWallsAndFloorVisibility(!0,!0),e.category===Un.WALL_PAPER||e.category===Un.FLOOR||e.category===Un.LANDSCAPE){if(r=e.category===Un.FLOOR?p.stuffData.getLegacyString():r,n=e.category===Un.WALL_PAPER?p.stuffData.getLegacyString():n,c=e.category===Un.LANDSCAPE?p.stuffData.getLegacyString():c,a.updateObjectRoom(r,n,c),e.category===Un.LANDSCAPE){var i=ae().getWallItemDataByName("noob_window_double");i&&a.addWallItemIntoRoom(i.id,new l.Oi(90,0,0),i.customParams)}}else p.isWallItem?a.addWallItemIntoRoom(p.type,new l.Oi(90),e.stuffData.getLegacyString()):a.addFurnitureIntoRoom(p.type,new l.Oi(90),p.stuffData,e.extra.toString())}}}),[a,p]),Object(c.useEffect)((function(){p&&p.hasUnseenItems&&(C(Jn.FURNI,p.items.map((function(e){return e.id}))),p.hasUnseenItems=!1)}),[p,C]),Object(c.useEffect)((function(){if(u){var e=_();return function(){return I(e)}}}),[u,_,I]),Object(c.useEffect)((function(){return d(!0),function(){return d(!1)}}),[]),m&&m.length?Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:7,overflow:"hidden",children:[Object($a.jsx)(Nd,{groupItems:m,setGroupItems:h}),Object($a.jsx)(sc,{columnCount:5,children:O&&O.length>0&&O.map((function(e,t){return Object($a.jsx)(Sd,{groupItem:e},t)}))})]}),Object($a.jsxs)(Jc,{size:5,overflow:"auto",children:[Object($a.jsxs)(Jc,{overflow:"hidden",position:"relative",children:[Object($a.jsx)(yi,{roomPreviewer:a,height:140}),p&&p.stuffData.isUnique&&Object($a.jsx)(ni,{className:"top-2 end-2",position:"absolute",uniqueNumber:p.stuffData.uniqueNumber,uniqueSeries:p.stuffData.uniqueSeries}),p&&p.stuffData.rarityLevel>-1&&Object($a.jsx)(Ii,{className:"top-2 end-2",position:"absolute",level:p.stuffData.rarityLevel})]}),p&&Object($a.jsx)(Jc,{grow:!0,justifyContent:"between",gap:1,children:Object($a.jsxs)("div",{children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:p.name}),!!n&&Object($a.jsx)(dc,{style:{marginTop:"10px"},variant:"success",onClick:function(e){return Qn(p)},children:st("inventory.furni.placetoroom")}),p&&p.isSellable&&Object($a.jsx)(dc,{style:{marginTop:"10px"},onClick:function(e){return function(e){var t=e.getLastItem();return!!t&&!!t.sellable&&void Kt(new gt(t))}(p)},children:st("inventory.marketplace.sell")})]})})]})]}):Object($a.jsx)(Ed,{title:st("inventory.empty.title"),desc:st("inventory.empty.desc")})},kd=function(e){var t=e.cancelTrade,n=void 0===t?null:t,r=Object(c.useState)(null),a=Object(o.a)(r,2),i=a[0],u=a[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(null),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Object(c.useState)(null),p=Object(o.a)(v,2),x=p[0],_=p[1],E=Object(c.useState)(3),I=Object(o.a)(E,2),y=I[0],C=I[1],T=En(),S=T.ownUser,N=void 0===S?null:S,R=T.otherUser,k=void 0===R?null:R,A=T.groupItems,w=void 0===A?[]:A,D=T.tradeState,U=void 0===D?nr.TRADING_STATE_READY:D,P=T.progressTrade,L=void 0===P?null:P,M=T.removeItem,F=void 0===M?null:M,H=T.setTradeState,B=void 0===H?null:H,G=function(e,t,n,r,a){if(!N||N.accepts||!N.userItems)return!1;if(N.userItems.length<9)return!0;if(!r)return!1;var c=t.toString();return c=n===Un.POSTER?c+"poster"+a.getLegacyString():n===Un.GUILD_FURNI?function(e,t){var n=e.toString();if(!(t instanceof l.Kh))return n;for(var r=1;r<5;)n=n+","+t.getValue(r),r++;return n}(t,a):(e?"I":"S")+c,!!N.userItems.getValue(c)},W=function(e){var t=e?"lock":"unlock",n=e?"success":"danger";return Object($a.jsx)(mc.a,{icon:t,className:"text-"+n})};return Object(c.useEffect)((function(){if(U===nr.TRADING_STATE_COUNTDOWN){C(3);var e=setInterval((function(){C((function(t){var n=t-1;return 0===n&&clearInterval(e),n}))}),1e3);return function(){return clearInterval(e)}}}),[U,B]),Object(c.useEffect)((function(){0===y&&B(nr.TRADING_STATE_CONFIRMING)}),[y,B]),U!==nr.TRADING_STATE_READY&&N&&k?Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:4,overflow:"hidden",children:[Object($a.jsx)(Nd,{groupItems:w,setGroupItems:_}),Object($a.jsxs)(lc,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[Object($a.jsx)(sc,{columnCount:3,children:x&&x.length>0&&x.map((function(e,t){var n=e.getUnlockedCount();return Object($a.jsx)(ii,{className:n?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:n,itemActive:i===e,itemUniqueNumber:e.stuffData.uniqueNumber,onClick:function(t){return n&&u(e)},children:n>0&&i===e&&Object($a.jsx)(dc,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:function(e){return function(e){if(i){var t=i.getTradeItems(e);if(t&&t.length){var n,r=null,a=[],c=Object(s.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;a.push(o.id),r||(r=o)}}catch(O){c.e(O)}finally{c.f()}if(N.userItems.length+a.length<=1500)if(!r.isGroupable&&a.length)ea(new l.Xh(a.pop()));else{var u,d=[],j=Object(s.a)(a);try{for(j.s();!(u=j.n()).done;){var b=u.value;G(r.isWallItem,r.type,r.category,r.isGroupable,r.stuffData)&&d.push(b)}}catch(O){j.e(O)}finally{j.f()}d.length&&(1===d.length?ea(new l.Xh(d.pop())):ea(Object(ln.a)(l.Yh,d)))}else Ha.simpleAlert(st("trading.items.too_many_items.desc"),Ua.DEFAULT,null,null,st("trading.items.too_many_items.title"))}}}(1)},children:Object($a.jsx)(mc.a,{icon:"chevron-right"})})},t)}))}),Object($a.jsx)(tc,{fullWidth:!0,className:"badge bg-muted",children:i?i.name:st("catalog_selectproduct")})]})]}),Object($a.jsxs)(Jc,{size:8,overflow:"hidden",children:[Object($a.jsxs)(cc,{overflow:"hidden",children:[Object($a.jsxs)(Jc,{size:6,overflow:"hidden",children:[Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:[st("inventory.trading.you")," ",st("inventory.trading.areoffering"),":"]}),W(N.accepts)]}),Object($a.jsx)(sc,{columnCount:3,children:Array.from(Array(9),(function(e,t){var n=N.userItems.getWithIndex(t)||null;return n?Object($a.jsx)(ii,{itemActive:b===n,itemImage:n.iconUrl,itemCount:n.getTotalCount(),itemUniqueNumber:n.stuffData.uniqueNumber,onClick:function(e){return O(n)},children:b===n&&Object($a.jsx)(dc,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:function(e){return F(n)},children:Object($a.jsx)(mc.a,{icon:"chevron-left"})})},t):Object($a.jsx)(ii,{},t)}))}),Object($a.jsx)(tc,{fullWidth:!0,className:"badge bg-muted",children:b?b.name:st("catalog_selectproduct")})]}),Object($a.jsxs)(Jc,{size:6,overflow:"hidden",children:[Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:[k.userName," ",st("inventory.trading.isoffering"),":"]}),W(k.accepts)]}),Object($a.jsx)(sc,{columnCount:3,children:Array.from(Array(9),(function(e,t){var n=k.userItems.getWithIndex(t)||null;return n?Object($a.jsx)(ii,{itemActive:g===n,itemImage:n.iconUrl,itemCount:n.getTotalCount(),itemUniqueNumber:n.stuffData.uniqueNumber,onClick:function(e){return m(n)}},t):Object($a.jsx)(ii,{},t)}))}),Object($a.jsx)(tc,{fullWidth:!0,className:"badge bg-muted w-100",children:g?g.name:st("catalog_selectproduct")})]})]}),Object($a.jsxs)(lc,{grow:!0,justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:n,children:st("generic.cancel")}),U===nr.TRADING_STATE_READY&&Object($a.jsx)(dc,{variant:"secondary",disabled:!N.itemCount&&!k.itemCount,onClick:L,children:st("inventory.trading.accept")}),U===nr.TRADING_STATE_RUNNING&&Object($a.jsx)(dc,{variant:"secondary",disabled:!N.itemCount&&!k.itemCount,onClick:L,children:st(N.accepts?"inventory.trading.modify":"inventory.trading.accept")}),U===nr.TRADING_STATE_COUNTDOWN&&Object($a.jsx)(dc,{variant:"secondary",disabled:!0,children:st("inventory.trading.countdown",["counter"],[y.toString()])}),U===nr.TRADING_STATE_CONFIRMING&&Object($a.jsx)(dc,{variant:"secondary",onClick:L,children:st("inventory.trading.button.restore")}),U===nr.TRADING_STATE_CONFIRMED&&Object($a.jsx)(dc,{variant:"secondary",children:st("inventory.trading.info.waiting")})]})]})]}):null},Ad=["petItem","children"],wd=function(e){var t=e.petItem,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,i=Object(Za.a)(e,Ad),s=Object(c.useState)(!1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=xn(),O=b.selectedPet,h=void 0===O?null:O,f=b.setSelectedPet,g=void 0===f?null:f,m=(0,dn().isUnseen)(Jn.PET,n.petData.id),v=function(e){switch(e.type){case l.xe.MOUSE_DOWN:return g(n),void j(!0);case l.xe.MOUSE_UP:return void j(!1);case l.xe.ROLL_OUT:if(!d||n!==h)return;return void Kn(n)}};return Object($a.jsxs)(ii,Object(bt.a)(Object(bt.a)({itemActive:n===h,itemUnseen:m,onMouseDown:v,onMouseUp:v,onMouseOut:v},i),{},{children:[Object($a.jsx)(pi,{figure:n.petData.figureData.figuredata,direction:3,headOnly:!0}),a]}))},Dd=function(e){var t=e.roomSession,n=void 0===t?null:t,r=e.roomPreviewer,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=xn(),b=j.petItems,O=void 0===b?null:b,h=j.selectedPet,f=void 0===h?null:h,g=j.activate,m=void 0===g?null:g,v=j.deactivate,p=void 0===v?null:v,x=dn(),_=x.isUnseen,E=void 0===_?null:_,I=x.removeUnseen,y=void 0===I?null:I;return Object(c.useEffect)((function(){if(f&&a){var e=f.petData,t=G(),n=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,l.Ig.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:"101",r=r&&r.length?r:"101",c=c&&c.length?c:"1.1",a.reset(!1),a.updateRoomWallsAndFloorVisibility(!0,!0),a.updateObjectRoom(r,n,c),a.addPetIntoRoom(e.figureString)}}),[a,f]),Object(c.useEffect)((function(){f&&E(Jn.PET,f.petData.id)&&y(Jn.PET,f.petData.id)}),[f,E,y]),Object(c.useEffect)((function(){if(u){var e=m();return function(){return p(e)}}}),[u,m,p]),Object(c.useEffect)((function(){return d(!0),function(){return d(!1)}}),[]),O&&O.length?Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{size:7,overflow:"hidden",children:Object($a.jsx)(sc,{columnCount:5,children:O&&O.length>0&&O.map((function(e){return Object($a.jsx)(wd,{petItem:e},e.petData.id)}))})}),Object($a.jsxs)(Jc,{size:5,overflow:"auto",children:[Object($a.jsx)(Jc,{overflow:"hidden",position:"relative",children:Object($a.jsx)(yi,{roomPreviewer:a,height:140})}),f&&f.petData&&Object($a.jsxs)(Jc,{grow:!0,justifyContent:"between",gap:2,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",grow:!0,truncate:!0,children:f.petData.name}),!!n&&Object($a.jsx)(dc,{variant:"success",onClick:function(e){return Kn(f)},children:st("inventory.furni.placetoroom")})]})]})]}):Object($a.jsx)(Ed,{title:st("inventory.empty.pets.title"),desc:st("inventory.empty.pets.desc")})},Ud="inventory.furni",Pd="inventory.bots",Ld="inventory.furni.tab.pets",Md="inventory.badges",Fd=[Ud,Pd,Ld,Md],Hd=(Jn.FURNI,Jn.BOT,Jn.PET,Jn.BADGE,function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(Fd[0]),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=En(),_=x.isTrading,E=void 0!==_&&_,I=x.stopTrading,y=void 0===I?null:I,C=dn(),T=(C.getCount,C.resetCategory,function(){E&&y(),a(!1)}),S=Object(c.useCallback)((function(e){Gn&&(Vn(!1),e.placedInRoom||a(!0))}),[]);qt(l.jg.PLACED,S);var N=Object(c.useCallback)((function(e){switch(e.type){case l.Sg.CREATED:return void f(e.session);case l.Sg.ENDED:return f(null),void a(!1)}}),[]);Yt(l.Sg.CREATED,N),Yt(l.Sg.ENDED,N);var k=Object(c.useCallback)((function(e){var t,n=e.getParser(),r=Object(s.a)(n.data);try{for(r.s();!(t=r.n()).done;){var a=t.value;F().setBadgePointLimit(a.badgeId,a.limit)}}catch(c){r.e(c)}finally{r.f()}}),[]);return dt(l.t,k),Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}},eventUrlPrefix:"inventory/"};return R(e),function(){return B(e)}}),[]),Object(c.useEffect)((function(){return p(new l.Kg(G(),++l.Kg.PREVIEW_COUNTER)),function(){p((function(e){return e.dispose(),null}))}}),[]),Object(c.useEffect)((function(){!r&&E&&a(!0)}),[r,E]),r?Object($a.jsxs)(Pc,{uniqueKey:"inventory",className:"nitro-inventory",theme:E?"primary-slim":"",children:[!E&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)("div",{className:"drag-handler",children:[Object($a.jsx)("div",{style:{padding:"10px",fontSize:"21px",fontWeight:"bold",color:"var(--test-galaxytext)",display:"inline-block"},children:"Inventario"}),Fd.map((function(e,t){return Object($a.jsx)("div",{style:{display:"inline-block",backgroundColor:"var(--test-galaxytwo)",padding:"4px",borderRadius:"4px",marginRight:"5px",cursor:"pointer"},onClick:function(t){return j(e)},children:st(e)})})),Object($a.jsx)("div",{style:{display:"inline-block",float:"right",padding:"13px"},children:Object($a.jsx)("div",{style:{display:"inline-block",backgroundColor:"#a61c1c",padding:"4px",borderRadius:"4px",marginRight:"2px",cursor:"pointer"},onClick:function(){return a(!r)},children:Object($a.jsx)(mc.a,{icon:"times"})})}),Object($a.jsx)(Ec,{children:Object($a.jsxs)("div",{className:"height-fix",children:[d===Ud&&Object($a.jsx)(Rd,{roomSession:h,roomPreviewer:v}),d===Pd&&Object($a.jsx)(Cd,{roomSession:h,roomPreviewer:v}),d===Ld&&Object($a.jsx)(Dd,{roomSession:h,roomPreviewer:v}),d===Md&&Object($a.jsx)(xd,{})]})})]})}),E&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Tc,{headerText:st("inventory.title"),onCloseClick:T}),Object($a.jsx)(Ec,{children:Object($a.jsx)(kd,{cancelTrade:T})})]})]}):null}),Bd=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)("dQw4w9WgXcQ"),s=Object(o.a)(i,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"video":return u(t[2]),void a(!0);case"hide":return void a(!1)}},eventUrlPrefix:"mediaroom/"};return R(e),function(){return B(e)}}),[a]),Object($a.jsx)($a.Fragment,{children:r&&Object($a.jsxs)(Pc,{style:{height:"300px",width:"600px"},children:[Object($a.jsx)(Tc,{headerText:"Video",onCloseClick:function(e){return a(!1)}}),Object($a.jsx)(Ec,{children:Object($a.jsx)("iframe",{style:{height:"300px",width:"600px"},src:"https://www.youtube.com/embed/"+l})})]})})},Gd=Object(c.createContext)({modToolsState:null,dispatchModToolsState:null}),Wd=function(e){return Object($a.jsx)(Gd.Provider,{value:e.value,children:e.children})},Vd=function(){return Object(c.useContext)(Gd)},qd=Object(d.a)((function e(){Object(u.a)(this,e)}));qd.SET_INIT_DATA="MTA_SET_INIT_DATA",qd.SET_CURRENT_ROOM_ID="MTA_SET_CURRENT_ROOM_ID",qd.SET_OPEN_ROOMS="MTA_SET_OPEN_ROOMS",qd.SET_OPEN_USERINFO="MTA_SET_OPEN_USERINFO",qd.SET_OPEN_ROOM_CHATLOGS="MTA_SET_OPEN_CHATLOGS",qd.SET_OPEN_USER_CHATLOGS="MTA_SET_OPEN_USER_CHATLOGS",qd.SET_TICKETS="MTA_SET_TICKETS",qd.SET_CFH_CATEGORIES="MTA_SET_CFH_CATEGORIES",qd.RESET_STATE="MTA_RESET_STATE";var Yd={settings:null,currentRoomId:null,openRooms:null,openRoomChatlogs:null,openUserChatlogs:null,openUserInfo:null,tickets:null,cfhCategories:null},zd=function(e,t){switch(t.type){case qd.SET_INIT_DATA:var n=t.payload.settings||e.settings||null;return Object(bt.a)(Object(bt.a)({},e),{},{settings:n});case qd.SET_CURRENT_ROOM_ID:var r=t.payload.currentRoomId||e.currentRoomId||null;return Object(bt.a)(Object(bt.a)({},e),{},{currentRoomId:r});case qd.SET_OPEN_ROOMS:var a=t.payload.openRooms||e.openRooms||null;return Object(bt.a)(Object(bt.a)({},e),{},{openRooms:a});case qd.SET_OPEN_USERINFO:var c=t.payload.openUserInfo||e.openUserInfo||null;return Object(bt.a)(Object(bt.a)({},e),{},{openUserInfo:c});case qd.SET_OPEN_ROOM_CHATLOGS:var i=t.payload.openRoomChatlogs||e.openRoomChatlogs||null;return Object(bt.a)(Object(bt.a)({},e),{},{openRoomChatlogs:i});case qd.SET_OPEN_USER_CHATLOGS:var s=t.payload.openUserChatlogs||e.openUserChatlogs||null;return Object(bt.a)(Object(bt.a)({},e),{},{openUserChatlogs:s});case qd.SET_TICKETS:var o=t.payload.tickets||e.tickets||null;return Object(bt.a)(Object(bt.a)({},e),{},{tickets:o});case qd.SET_CFH_CATEGORIES:var l=t.payload.cfhCategories||e.cfhCategories||null;return Object(bt.a)(Object(bt.a)({},e),{},{cfhCategories:l});case qd.RESET_STATE:return Object(bt.a)({},Yd);default:return e}},Kd=function(e){var t=Vd(),n=t.modToolsState,r=void 0===n?null:n,a=t.dispatchModToolsState,i=void 0===a?null:a,s=r.openRooms,o=void 0===s?null:s,u=r.openRoomChatlogs,d=void 0===u?null:u,j=r.openUserChatlogs,b=void 0===j?null:j,O=r.openUserInfo,h=void 0===O?null:O,f=r.tickets,g=void 0===f?null:f,m=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=t.data;i({type:qd.SET_INIT_DATA,payload:{settings:n}}),i({type:qd.SET_TICKETS,payload:{tickets:n.issues}})}}),[i]),v=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=g?Array.from(g):[],r=n.findIndex((function(e){return e.issueId===t.issueData.issueId}));r>-1?n[r]=t.issueData:(n.push(t.issueData),wn(dr.MODTOOLS_NEW_TICKET)),i({type:qd.SET_TICKETS,payload:{tickets:n}})}}),[i,g]),p=Object(c.useCallback)((function(e){e.getParser()}),[]),x=Object(c.useCallback)((function(e){e.getParser()&&Ha.simpleAlert("Failed to pick issue",Ua.DEFAULT,null,null,"Error")}),[]),_=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=g?Array.from(g):[],r=n.findIndex((function(e){return e.issueId===t.issueId}));-1!==r&&(n.splice(r,1),i({type:qd.SET_TICKETS,payload:{tickets:n}}))}}),[i,g]),E=Object(c.useCallback)((function(e){var t=e.getParser();t&&(t.success?Ha.simpleAlert("Moderation action was successfull",Ua.MODERATION,null,null,"Success"):Ha.simpleAlert("There was a problem applying tht moderation action",Ua.MODERATION,null,null,"Error"))}),[]),I=Object(c.useCallback)((function(e){var t=e.getParser();if(t){var n=t.callForHelpCategories;i({type:qd.SET_CFH_CATEGORIES,payload:{cfhCategories:n}}),function(e){hd=e}(n)}}),[i]),y=Object(c.useCallback)((function(e){e.getParser()}),[]);dt(l.re,m),dt(l.Md,v),dt(l.ue,p),dt(l.Od,x),dt(l.Ld,_),dt(l.pe,E),dt(l.ab,I),dt(l.Z,y);var C=Object(c.useCallback)((function(e){switch(e.type){case l.ig.INITIALIZED:return void i({type:qd.SET_CURRENT_ROOM_ID,payload:{currentRoomId:e.roomId}});case l.ig.DISPOSED:return void i({type:qd.SET_CURRENT_ROOM_ID,payload:{currentRoomId:null}})}}),[i]);qt(l.ig.INITIALIZED,C),qt(l.ig.DISPOSED,C);var T=Object(c.useCallback)((function(e){switch(e.type){case Tt.OPEN_ROOM_INFO:var t=e;if(o&&o.includes(t.roomId))return;var n=o||[];return void i({type:qd.SET_OPEN_ROOMS,payload:{openRooms:[].concat(Object(ut.a)(n),[t.roomId])}});case Tt.OPEN_ROOM_CHATLOG:var r=e;if(d&&d.includes(r.roomId))return;var a=d||[];return void i({type:qd.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:[].concat(Object(ut.a)(a),[r.roomId])}});case Tt.OPEN_USER_INFO:var c=e;if(h&&h.includes(c.userId))return;var s=h||[];return void i({type:qd.SET_OPEN_USERINFO,payload:{openUserInfo:[].concat(Object(ut.a)(s),[c.userId])}});case Tt.OPEN_USER_CHATLOG:var l=e;if(b&&b.includes(l.userId))return;var u=b||[];return void i({type:qd.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:[].concat(Object(ut.a)(u),[l.userId])}})}}),[o,i,d,h,b]);return Qt(Tt.OPEN_ROOM_INFO,T),Qt(Tt.OPEN_ROOM_CHATLOG,T),Qt(Tt.OPEN_USER_INFO,T),Qt(Tt.OPEN_USER_CHATLOG,T),null},Qd=function(e){var t=e.records,n=void 0===t?null:t,r=function(e){var t=n[0].chatlog[e.index];return Object($a.jsx)(ml.b,{cache:o,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object($a.jsxs)(cc,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-2",children:t.timestamp}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:function(e){return Kt(new kt(t.userId))},children:t.userName}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",textBreak:!0,wrap:!0,className:"g-col-7",children:t.message})]},e.key)},e.key)},a=function(e){for(var t=null,r=null,a=!1,c=0,i=0;i<n.length;i++)if(c++,c+=(r=n[i]).chatlog.length,!(e.index>c-1)){if(e.index+1===c-r.chatlog.length){a=!0;break}var l=e.index-(c-r.chatlog.length);t=r.chatlog[l];break}return Object($a.jsxs)(ml.b,{cache:o,columnIndex:0,parent:e.parent,rowIndex:e.index,children:[a&&r&&Object($a.jsx)(s,{roomId:r.roomId,roomName:r.roomName,uniqueKey:e.key,style:e.style}),!a&&Object($a.jsxs)(cc,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-2",children:t.timestamp}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:function(e){return Kt(new kt(t.userId))},children:t.userName}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",textBreak:!0,wrap:!0,className:"g-col-7",children:t.message})]},e.key)]},e.key)},i=Object(c.useCallback)((function(){for(var e=0,t=0;t<n.length;t++)e++,e+=n[t].chatlog.length;return e}),[n]),s=function(e){return Object($a.jsxs)(lc,{gap:2,alignItems:"center",justifyContent:"between",className:"room-info bg-muted rounded p-1",style:e.style,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:"Room name:"}),Object($a.jsx)(Hi,{children:e.roomName})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{onClick:function(t){return Da(e.roomId)},children:"Visit Room"}),Object($a.jsx)(dc,{onClick:function(t){return Kt(new Nt(e.roomId))},children:"Room Tools"})]})]},e.uniqueKey)},o=new ml.c({defaultHeight:25,fixedWidth:!0});return Object($a.jsxs)($a.Fragment,{children:[n&&1===n.length&&Object($a.jsx)(s,{roomId:n[0].roomId,roomName:n[0].roomName,uniqueKey:null,style:{}}),Object($a.jsxs)(Jc,{fit:!0,gap:0,overflow:"hidden",children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object($a.jsx)(tc,{className:"g-col-2",children:"Time"}),Object($a.jsx)(tc,{className:"g-col-3",children:"User"}),Object($a.jsx)(tc,{className:"g-col-7",children:"Message"})]})}),n&&n.length>0&&Object($a.jsx)(Jc,{className:"log-container striped-children",overflow:"auto",gap:0,children:Object($a.jsx)(ml.a,{defaultWidth:400,defaultHeight:200,children:function(e){var t=e.height,c=e.width;return o.clearAll(),Object($a.jsx)(ml.d,{width:c,height:t,rowCount:n.length>1?i():n[0].chatlog.length,rowHeight:o.rowHeight,className:"log-entry-container",rowRenderer:n.length>1?a:r,deferredMeasurementCache:o})}})})]})]})},Xd=function(e){var t=e.roomId,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.roomId===n&&d(t.data)}),[n]);return dt(l.Xf,j),Object(c.useEffect)((function(){ea(new l.sc(n))}),[n]),u?Object($a.jsxs)(Pc,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"Room Chatlog ".concat(u.roomName),onCloseClick:a}),Object($a.jsx)(Ec,{className:"text-black h-100",children:u&&Object($a.jsx)(Qd,{records:[u]})})]}):null},Jd=function(e){var t=e.roomId,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=(b[0],b[1]),h=Object(c.useState)(null),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Object(c.useState)(null),p=Object(o.a)(v,2),x=(p[0],p[1]),_=Object(c.useState)(null),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useState)(!1),T=Object(o.a)(C,2),S=T[0],N=T[1],R=Object(c.useState)(0),k=Object(o.a)(R,2),A=k[0],w=k[1],D=Object(c.useState)(!1),U=Object(o.a)(D,2),P=U[0],L=U[1],M=Object(c.useState)(!1),F=Object(o.a)(M,2),H=F[0],B=F[1],G=Object(c.useState)(!1),W=Object(o.a)(G,2),V=W[0],q=W[1],Y=Object(c.useState)(""),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.flatId===n&&(O(t.data.flatId),m(t.data.room.name),x(t.data.ownerId),y(t.data.ownerName),N(t.data.ownerInRoom),w(t.data.userCount))}),[n]);dt(l.te,X);var J=Object(c.useCallback)((function(e,t){if(e)switch(e){case"alert_only":if(0===K.trim().length)return;return ea(new l.oe(l.oe.ACTION_ALERT,K,"")),void ea(new l.ne(n,H?1:0,V?1:0,P?1:0));case"send_message":if(0===K.trim().length)return;return ea(new l.oe(l.oe.ACTION_MESSAGE,K,"")),void ea(new l.ne(n,H?1:0,V?1:0,P?1:0))}}),[V,P,H,K,n]);return Object(c.useEffect)((function(){u||(ea(new l.nc(n)),d(!0))}),[n,u,d]),Object($a.jsxs)(Pc,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"Room Info"+(g?": "+g:""),onCloseClick:function(e){return a()}}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsxs)(Jc,{justifyContent:"center",grow:!0,gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(Hi,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),Object($a.jsx)(Hi,{underline:!0,pointer:!0,truncate:!0,children:I})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(Hi,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),Object($a.jsx)(Hi,{children:A})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)(Hi,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),Object($a.jsx)(Hi,{children:S?"Yes":"No"})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{onClick:function(e){return Da(n)},children:"Visit Room"}),Object($a.jsx)(dc,{onClick:function(e){return Kt(new St(n))},children:"Chatlog"})]})]}),Object($a.jsxs)(Jc,{className:"bg-muted rounded p-2",gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:P,onChange:function(e){return L(e.target.checked)}}),Object($a.jsx)(Hi,{small:!0,children:"Kick everyone out"})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:H,onChange:function(e){return B(e.target.checked)}}),Object($a.jsx)(Hi,{small:!0,children:"Enable the doorbell"})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:V,onChange:function(e){return q(e.target.checked)}}),Object($a.jsx)(Hi,{small:!0,children:"Change room name"})]})]}),Object($a.jsx)("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:K,onChange:function(e){return Q(e.target.value)}}),Object($a.jsxs)(lc,{justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return J("send_message")},children:"Send Caution"}),Object($a.jsx)(dc,{onClick:function(e){return J("alert_only")},children:"Send Alert only"})]})]})]})},Zd=function(e){switch(e){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador";default:return"Unknown"}},$d=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=e.issueId,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1];Object(c.useEffect)((function(){ea(new l.dc(a))}),[a]);var j=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.issueId===a&&d(t.data)}),[a]);return dt(l.Y,j),Object($a.jsxs)(Pc,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:"Issue Chatlog",onCloseClick:n}),Object($a.jsx)(Ec,{className:"text-black",children:u&&Object($a.jsx)(Qd,{records:[u.chatRecord]})})]})},ej=function(e){var t=e.issueId,n=void 0===t?null:t,r=e.onIssueInfoClosed,a=void 0===r?null:r,i=Vd().modToolsState,s=(void 0===i?null:i).tickets,u=void 0===s?null:s,d=Object(c.useState)(!1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useMemo)((function(){return u&&u.length?u.find((function(e){return e.issueId===n})):null}),[n,u]),f=function(e){ea(new l.eb([n],e)),a(n)},g=function(e){return Kt(new kt(e))};return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Pc,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:"Resolving issue "+n,onCloseClick:function(){return a(n)}}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",fontSize:4,children:"Issue Information"}),Object($a.jsxs)(cc,{overflow:"auto",children:[Object($a.jsx)(Jc,{size:8,children:Object($a.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object($a.jsxs)("tbody",{children:[Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},children:"Source"}),Object($a.jsx)("td",{style:{color:"var(--test-galaxytext)"},children:Zd(h.categoryId)})]}),Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},children:"Category"}),Object($a.jsx)("td",{style:{color:"var(--test-galaxytext)"},className:"text-break",children:st("help.cfh.topic."+h.reportedCategoryId)})]}),Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},children:"Description"}),Object($a.jsx)("td",{style:{color:"var(--test-galaxytext)"},className:"text-break",children:h.message})]}),Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},children:"Caller"}),Object($a.jsx)("td",{children:Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,underline:!0,pointer:!0,onClick:function(e){return g(h.reporterUserId)},children:h.reporterUserName})})]}),Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},children:"Reported User"}),Object($a.jsx)("td",{children:Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,underline:!0,pointer:!0,onClick:function(e){return g(h.reportedUserId)},children:h.reportedUserName})})]})]})})}),Object($a.jsxs)(Jc,{size:4,gap:1,children:[Object($a.jsx)(dc,{variant:"secondary",onClick:function(){return O(!b)},children:"Chatlog"}),Object($a.jsx)(dc,{onClick:function(e){return f(l.eb.RESOLUTION_USELESS)},children:"Close as useless"}),Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return f(l.eb.RESOLUTION_ABUSIVE)},children:"Close as abusive"}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return f(l.eb.RESOLUTION_RESOLVED)},children:"Close as resolved"}),Object($a.jsx)(dc,{variant:"secondary",onClick:function(e){return function(e){ea(new l.Hf([e])),a(e)}(n)},children:"Release"})]})]})]})]}),b&&Object($a.jsx)($d,{issueId:n,onCloseClick:function(){return O(!1)}})]})},tj=function(e){var t=e.myIssues,n=void 0===t?null:t,r=e.onIssueHandleClick,a=void 0===r?null:r;return Object($a.jsxs)(Jc,{gap:0,overflow:"hidden",children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:"Type"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Room/Player"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Opened"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2"})]})}),Object($a.jsx)(Jc,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((function(e){return Object($a.jsxs)(cc,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:e.categoryId}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:e.reportedUserName}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object($a.jsx)(tc,{className:"g-col-2",children:Object($a.jsx)(dc,{variant:"primary",onClick:function(t){return a(e.issueId)},children:"Handle"})}),Object($a.jsx)(tc,{className:"g-col-2",children:Object($a.jsx)(dc,{variant:"danger",onClick:function(t){return n=e.issueId,ea(new l.Hf([n]));var n},children:"Release"})})]},e.issueId)}))})]})},nj=function(e){var t=e.openIssues,n=void 0===t?null:t;return Object($a.jsxs)(Jc,{gap:0,overflow:"hidden",children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:"Type"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Room/Player"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-4",children:"Opened"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3"})]})}),Object($a.jsx)(Jc,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((function(e){return Object($a.jsxs)(cc,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:e.categoryId}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:e.reportedUserName}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object($a.jsx)(tc,{className:"g-col-3",children:Object($a.jsx)(dc,{variant:"success",onClick:function(t){return n=e.issueId,ea(new l.rf([n],!1,0,"pick issue button"));var n},children:"Pick Issue"})})]},e.issueId)}))})]})},rj=function(e){var t=e.pickedIssues,n=void 0===t?null:t;return Object($a.jsxs)(Jc,{gap:0,overflow:"hidden",children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:"Type"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Room/Player"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-4",children:"Opened"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Picker"})]})}),Object($a.jsx)(Jc,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map((function(e){return Object($a.jsxs)(cc,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:e.categoryId}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:e.reportedUserName}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-4",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:e.pickerUserName})]},e.issueId)}))})]})},aj=["Open Issues","My Issues","Picked Issues"],cj=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=Vd().modToolsState,a=(void 0===r?null:r).tickets,i=void 0===a?null:a,s=Object(c.useState)(0),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Object(c.useState)([]),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useMemo)((function(){return i?i.filter((function(e){return e.state===l.Nd.STATE_OPEN})):[]}),[i]),m=Object(c.useMemo)((function(){return i?i.filter((function(e){return e.state===l.Nd.STATE_PICKED&&e.pickerUserId===ae().userId})):[]}),[i]),v=Object(c.useMemo)((function(){return i?i.filter((function(e){return e.state===l.Nd.STATE_PICKED})):[]}),[i]),p=Object(c.useCallback)((function(e){var t=h.indexOf(e);if(-1!==t){var n=Array.from(h);n.splice(t,1),f(n)}}),[h]),x=Object(c.useCallback)((function(e){if(-1===h.indexOf(e)){var t=Array.from(h);t.push(e),f(t)}else p(e)}),[h,p]),_=Object(c.useCallback)((function(){switch(d){case 0:return Object($a.jsx)(nj,{openIssues:g});case 1:return Object($a.jsx)(tj,{myIssues:m,onIssueHandleClick:x});case 2:return Object($a.jsx)(rj,{pickedIssues:v});default:return null}}),[d,m,x,g,v]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Pc,{className:"nitro-mod-tools-tickets",children:[Object($a.jsx)(Tc,{headerText:"Tickets",onCloseClick:n}),Object($a.jsx)(Di,{children:aj.map((function(e,t){return Object($a.jsx)(Ai,{isActive:d===t,onClick:function(e){return j(t)},children:e},t)}))}),Object($a.jsx)(Ec,{gap:1,children:Object($a.jsx)(_,{})})]}),h&&h.length>0&&h.map((function(e){return Object($a.jsx)(ej,{issueId:e,onIssueInfoClosed:p},e)}))]})},ij=function(e){var t=e.userId,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.userId===n&&(h(t.data.username),d(t.data.roomChatlogs))}),[n]);return dt(l.ri,f),Object(c.useEffect)((function(){ea(new l.wc(n))}),[n]),Object($a.jsxs)(Pc,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"User Chatlog: ".concat(O||""),onCloseClick:a}),Object($a.jsx)(Ec,{className:"h-100",children:u&&Object($a.jsx)(Qd,{records:u})})]})},sj=function(){function e(t,n,r,a,c){Object(u.a)(this,e),this._actionId=void 0,this._name=void 0,this._actionType=void 0,this._sanctionTypeId=void 0,this._actionLengthHours=void 0,this._actionId=t,this._name=n,this._actionType=r,this._sanctionTypeId=a,this._actionLengthHours=c}return Object(d.a)(e,[{key:"actionId",get:function(){return this._actionId}},{key:"name",get:function(){return this._name}},{key:"actionType",get:function(){return this._actionType}},{key:"sanctionTypeId",get:function(){return this._sanctionTypeId}},{key:"actionLengthHours",get:function(){return this._actionLengthHours}}]),e}();sj.ALERT=1,sj.MUTE=2,sj.BAN=3,sj.KICK=4,sj.TRADE_LOCK=5,sj.MESSAGE=6;var oj=[new sj(1,"Alert",sj.ALERT,1,0),new sj(2,"Mute 1h",sj.MUTE,2,0),new sj(3,"Ban 18h",sj.BAN,3,0),new sj(4,"Ban 7 days",sj.BAN,4,0),new sj(5,"Ban 30 days (step 1)",sj.BAN,5,0),new sj(7,"Ban 30 days (step 2)",sj.BAN,7,0),new sj(6,"Ban 100 years",sj.BAN,6,0),new sj(106,"Ban avatar-only 100 years",sj.BAN,6,0),new sj(101,"Kick",sj.KICK,0,0),new sj(102,"Lock trade 1 week",sj.TRADE_LOCK,0,168),new sj(104,"Lock trade permanent",sj.TRADE_LOCK,0,876e3),new sj(105,"Message",sj.MESSAGE,0,0)],lj=function(e){var t=e.user,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(-1),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(-1),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(""),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Vd().modToolsState,_=void 0===x?null:x,E=_.cfhCategories,I=void 0===E?null:E,y=_.settings,C=void 0===y?null:y,T=Object(c.useMemo)((function(){var e=[];if(I&&I.length){var t,n=Object(s.a)(I);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,c=Object(s.a)(a.topics);try{for(c.s();!(r=c.n()).done;){var i=r.value;e.push(i)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){n.e(o)}finally{n.f()}}return e}),[I]),S=function(e){Ha.simpleAlert(e,Ua.DEFAULT,null,null,"Error")};return n?Object($a.jsxs)(Pc,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"Mod Action: "+(n?n.username:""),onCloseClick:function(){return a()}}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsxs)("select",{className:"form-select form-select-sm",value:d,onChange:function(e){return j(parseInt(e.target.value))},children:[Object($a.jsx)("option",{value:-1,disabled:!0,children:"CFH Topic"}),T.map((function(e,t){return Object($a.jsx)("option",{value:t,children:st("help.cfh.topic."+e.id)},t)}))]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:h,onChange:function(e){return f(parseInt(e.target.value))},children:[Object($a.jsx)("option",{value:-1,disabled:!0,children:"Sanction Type"}),oj.map((function(e,t){return Object($a.jsx)("option",{value:t,children:e.name},t)}))]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{small:!0,style:{color:"var(--test-galaxytext)"},variant:"none",children:"Optional message type, overrides default"}),Object($a.jsx)("textarea",{className:"form-control",value:v,onChange:function(e){return p(e.target.value)}})]}),Object($a.jsxs)(lc,{justifyContent:"between",gap:1,children:[Object($a.jsx)(dc,{variant:"primary",onClick:function(){var e=null,t=T[d];if(-1===d&&(e="You must select a CFH topic"),e)return S(e);var r=0===v.trim().length?st("help.cfh.topic.".concat(t.id)):v;ea(new l.pb(n.userId,d,r)),a()},children:"Default Sanction"}),Object($a.jsx)(dc,{variant:"success",onClick:function(){var e=null,t=T[d],r=oj[h];if(-1===d||-1===h?e="You must select a CFH topic and Sanction":C&&C.cfhPermission?t?r||(e="You must select a sanction"):e="You must select a CFH topic":e="You do not have permission to do this",e)S(e);else{var c=0===v.trim().length?st("help.cfh.topic.".concat(t.id)):v;switch(r.actionType){case sj.ALERT:if(!C.alertPermission)return void S("You have insufficient permissions");ea(new l.he(n.userId,c,t.id));break;case sj.MUTE:ea(new l.le(n.userId,c,t.id));break;case sj.BAN:if(!C.banPermission)return void S("You have insufficient permissions");ea(new l.ie(n.userId,c,t.id,h,106===r.actionId));break;case sj.KICK:if(!C.kickPermission)return void S("You have insufficient permissions");ea(new l.je(n.userId,c,t.id));break;case sj.TRADE_LOCK:var i=60*r.actionLengthHours;ea(new l.me(n.userId,c,i,t.id));break;case sj.MESSAGE:if(0===v.trim().length)return void S("Please write a message to user");ea(new l.ke(n.userId,v,t.id))}a()}},children:"Sanction"})]})]})]}):null},uj=function(e){var t=e.userId,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.userId===n&&d(t.data)}),[n]);dt(l.qh,j);var b=function(e){var t=u.rooms[e.index];return Object($a.jsxs)(cc,{fullHeight:!1,style:e.style,gap:1,alignItems:"center",className:"py-1 border-bottom",children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-2",children:[t.enterHour.toString().padStart(2,"0"),": ",t.enterMinute.toString().padStart(2,"0")]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",className:"g-col-7",children:t.roomName}),Object($a.jsx)(Hi,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:function(e){return Da(t.roomId)},children:"Visit Room"})]},e.key)};return Object(c.useEffect)((function(){ea(new l.uc(n))}),[n]),n?Object($a.jsxs)(Pc,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"User Visits",onCloseClick:a}),Object($a.jsx)(Ec,{className:"",gap:1,children:Object($a.jsxs)(Jc,{fullHeight:!0,gap:0,overflow:"hidden",children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-2",children:"Time"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-7",children:"Room name"}),Object($a.jsx)(tc,{style:{color:"var(--test-galaxytext)"},className:"g-col-3",children:"Visit"})]})}),Object($a.jsx)(Jc,{className:"log-container striped-children",overflow:"auto",gap:0,children:u&&Object($a.jsx)(ml.a,{defaultWidth:400,defaultHeight:200,children:function(e){var t=e.height,n=e.width;return Object($a.jsx)(ml.d,{width:n,height:t,rowCount:u.rooms.length,rowHeight:25,className:"log-entry-container",rowRenderer:b,style:{color:"var(--test-galaxytext)"}})}})})]})})]}):null},dj=function(e){var t=e.user,n=void 0===t?null:t,r=e.onCloseClick,a=void 0===r?null:r,i=Object(c.useState)(""),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(){0!==u.trim().length?(ea(new l.ke(n.userId,u,-999)),a()):Kt(new At(["Please write a message to user."],null,null,null,"Error",null))}),[u,n,a]);return n?Object($a.jsxs)(Pc,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:"Send Message",onCloseClick:function(){return a()}}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:["Message To: ",n.username]}),Object($a.jsx)("textarea",{className:"form-control",value:u,onChange:function(e){return d(e.target.value)}}),Object($a.jsx)(dc,{fullWidth:!0,onClick:j,children:"Send message"})]})]}):null},jj=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=e.userId,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(!1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useCallback)((function(e){var t=e.getParser();t&&t.data.userId===a&&d(t.data)}),[a]);dt(l.ve,I);var y=Object(c.useMemo)((function(){return u?[{localeKey:"modtools.userinfo.userName",value:u.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:u.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:u.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:u.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:u.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:u.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:u.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:u.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:l.Ib.format(60*u.minutesSinceLastLogin,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:u.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:u.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:u.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:l.Ib.format(60*u.registrationAgeInMinutes,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:u.userClassification}]:null}),[u]);return Object(c.useEffect)((function(){ea(new l.oc(a))}),[a]),u?Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Pc,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:kc.TOP_LEFT,children:[Object($a.jsx)(Tc,{headerText:st("modtools.userinfo.title",["username"],[u.userName]),onCloseClick:function(){return n()}}),Object($a.jsx)(Ec,{className:"text-black",children:Object($a.jsxs)(cc,{overflow:"hidden",children:[Object($a.jsx)(Jc,{size:8,overflow:"auto",children:Object($a.jsx)("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:Object($a.jsx)("tbody",{children:y.map((function(e,t){return Object($a.jsxs)("tr",{children:[Object($a.jsx)("th",{style:{color:"var(--test-galaxytext)"},scope:"row",children:st(e.localeKey)}),Object($a.jsxs)("td",{style:{color:"var(--test-galaxytext)"},children:[e.value,e.showOnline&&Object($a.jsx)("i",{className:"icon icon-pf-".concat(u.online?"online":"offline"," ms-2")})]})]},t)}))})})}),Object($a.jsxs)(Jc,{size:4,gap:1,children:[Object($a.jsx)(dc,{onClick:function(e){return Kt(new Rt(a))},children:"Room Chat"}),Object($a.jsx)(dc,{onClick:function(e){return h(!O)},children:"Send Message"}),Object($a.jsx)(dc,{onClick:function(e){return E(!_)},children:"Room Visits"}),Object($a.jsx)(dc,{onClick:function(e){return v(!m)},children:"Mod Action"})]})]})})]}),O&&Object($a.jsx)(dj,{user:{userId:a,username:u.userName},onCloseClick:function(){return h(!1)}}),m&&Object($a.jsx)(lj,{user:{userId:a,username:u.userName},onCloseClick:function(){return v(!1)}}),_&&Object($a.jsx)(uj,{userId:a,onCloseClick:function(){return E(!1)}})]}):null},bj=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useReducer)(zd,Yd),g=Object(o.a)(f,2),m=g[0],v=g[1],p=m.currentRoomId,x=void 0===p?null:p,_=m.openRooms,E=void 0===_?null:_,I=m.openRoomChatlogs,y=void 0===I?null:I,C=m.openUserChatlogs,T=void 0===C?null:C,S=m.openUserInfo,N=void 0===S?null:S,R=Object(c.useRef)(null),k=Object(c.useCallback)((function(e){switch(e.type){case Tt.SHOW_MOD_TOOLS:return void a(!0);case Tt.HIDE_MOD_TOOLS:return void a(!1);case Tt.TOGGLE_MOD_TOOLS:return void a((function(e){return!e}))}}),[]);Qt(Tt.SHOW_MOD_TOOLS,k),Qt(Tt.HIDE_MOD_TOOLS,k),Qt(Tt.TOGGLE_MOD_TOOLS,k);var A=Object(c.useCallback)((function(e){if(e.category===l.Cg.UNIT){var t=ue();if(t){var n=t.userDataManager.getUserDataByIndex(e.objectId);n&&n.type===l.Gg.USER&&d({userId:n.webID,username:n.name})}}}),[]);qt(l.jg.SELECTED,A);var w=Object(c.useCallback)((function(e,t){if(e)switch(e){case"toggle_room":return E?void(E.indexOf(x)>-1?w("close_room",x.toString()):Kt(new Nt(x))):void Kt(new Nt(x));case"close_room":var n=E.indexOf(Number(t)),r=Array.from(E);return r.splice(n,1),void v({type:qd.SET_OPEN_ROOMS,payload:{openRooms:r}});case"toggle_room_chatlog":return y?void(y.indexOf(x)>-1?w("close_room_chatlog",x.toString()):Kt(new St(x))):void Kt(new St(x));case"close_room_chatlog":var a=y.indexOf(Number(t)),c=Array.from(y);return c.splice(a,1),void v({type:qd.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:c}});case"toggle_user_info":if(!u)return;var i=u.userId;return N?void(N.indexOf(i)>-1?w("close_user_info",i.toString()):Kt(new kt(i))):void Kt(new kt(i));case"close_user_info":var s=N.indexOf(Number(t)),o=Array.from(N);return o.splice(s,1),void v({type:qd.SET_OPEN_USERINFO,payload:{openUserInfo:o}});case"close_user_chatlog":var l=T.indexOf(Number(t)),d=Array.from(T);return d.splice(l,1),void v({type:qd.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:d}})}}),[E,x,y,u,N,T]);return Object($a.jsxs)(Wd,{value:{modToolsState:m,dispatchModToolsState:v},children:[Object($a.jsx)(Kd,{}),r&&Object($a.jsxs)(Pc,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:kc.TOP_LEFT,theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:"Mod Tools",onCloseClick:function(e){return a(!1)}}),Object($a.jsxs)(Ec,{className:"text-black",gap:1,children:[Object($a.jsxs)(dc,{gap:1,onClick:function(e){return w("toggle_room")},disabled:!x,className:"position-relative",style:{backgroundColor:"var(--test-galaxytwo)"},variant:"none",children:[Object($a.jsx)(tc,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),Object($a.jsxs)(dc,{innerRef:R,gap:1,onClick:function(e){return w("toggle_room_chatlog")},disabled:!x,className:"position-relative",style:{backgroundColor:"var(--test-galaxytwo)"},variant:"none",children:[Object($a.jsx)(tc,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),Object($a.jsxs)(dc,{gap:1,onClick:function(){return w("toggle_user_info")},disabled:!u,className:"position-relative",style:{backgroundColor:"var(--test-galaxytwo)"},variant:"none",children:[Object($a.jsx)(tc,{className:"icon icon-user position-absolute start-1"})," User: ",u?u.username:""]}),Object($a.jsxs)(dc,{gap:1,onClick:function(){return h((function(e){return!e}))},className:"position-relative",style:{backgroundColor:"var(--test-galaxytwo)"},variant:"none",children:[Object($a.jsx)(tc,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),E&&E.map((function(e){return Object($a.jsx)(Jd,{roomId:e,onCloseClick:function(){return w("close_room",e.toString())}},e)})),y&&y.map((function(e){return Object($a.jsx)(Xd,{roomId:e,onCloseClick:function(){return w("close_room_chatlog",e.toString())}},e)})),N&&N.map((function(e){return Object($a.jsx)(jj,{userId:e,onCloseClick:function(){return w("close_user_info",e.toString())}},e)})),T&&T.map((function(e){return Object($a.jsx)(ij,{userId:e,onCloseClick:function(){return w("close_user_chatlog",e.toString())}},e)})),O&&Object($a.jsx)(cj,{onCloseClick:function(){return h(!1)}})]})},Oj=Object(c.createContext)({categories:null,setCategories:null,topLevelContext:null,setTopLevelContext:null,topLevelContexts:null,setTopLevelContexts:null,navigatorData:null,setNavigatorData:null,doorData:null,setDoorData:null,searchResult:null,setSearchResult:null}),hj=function(e){return Object($a.jsx)(Oj.Provider,{value:e.value,children:e.children})},fj=function(){return Object(c.useContext)(Oj)},gj=function(e){var t=fj(),n=t.setCategories,r=void 0===n?null:n,a=t.setTopLevelContext,i=void 0===a?null:a,o=t.topLevelContexts,u=void 0===o?null:o,d=t.setTopLevelContexts,j=void 0===d?null:d,b=t.setNavigatorData,O=void 0===b?null:b,h=t.setDoorData,f=void 0===h?null:h,g=t.setSearchResult,m=void 0===g?null:g,v=Object(c.useCallback)((function(e){var t=e.getParser();ea(new l.wg(t.roomId,!1,!1))}),[]);dt(l.eh,v);var p=Object(c.useCallback)((function(e){var t=e.getParser();t.canCreate||Ha.simpleAlert(st("navigator.cannotcreateevent.error.".concat(t.errorCode)),null,null,null,st("navigator.cannotcreateevent.title"))}),[]);dt(l.Q,p);var x=Object(c.useCallback)((function(e){ea(new l.ye),ea(new l.Ge)}),[]),_=Object(c.useCallback)((function(e){var t=e.getParser();O((function(e){var n=Object(bt.a)({},e);return n.eventMod=t.securityLevel>=l.Bh.MODERATOR,n.roomPicker=t.securityLevel>=l.Bh.COMMUNITY,n}))}),[O]),E=Object(c.useCallback)((function(e){Da(e.getParser().roomId)}),[]),I=Object(c.useCallback)((function(e){var t=e.getParser();O((function(e){var n=Object(bt.a)({},e);return n.enteredGuestRoom=null,n.currentRoomOwner=t.isOwner,n.currentRoomId=t.roomId,n})),ea(new l.wg(t.roomId,!0,!1)),l.Rd.available&&l.Rd.call("legacyTrack","navigator","private",[t.roomId])}),[O]),y=Object(c.useCallback)((function(e){var t=e.getParser();if(t.roomEnter)f({roomInfo:null,state:Ra.NONE}),O((function(e){var n=Object(bt.a)({},e);return n.enteredGuestRoom=t.data,n.currentRoomIsStaffPick=t.staffPick,!(n.createdFlatId===t.data.roomId)&&t.data.displayRoomEntryAd&&L("roomenterad.habblet.enabled",!1)&&l.Ed.openRoomEnterAd(),n.createdFlatId=0,n.enteredGuestRoom&&n.enteredGuestRoom.habboGroupId,n}));else if(t.roomForward){if(t.data.ownerName!==ae().userName&&!t.isGroupMember)switch(t.data.doorMode){case l.bg.DOORBELL_STATE:return void f((function(e){var n=Object(bt.a)({},e);return n.roomInfo=t.data,n.state=Ra.START_DOORBELL,n}));case l.bg.PASSWORD_STATE:return void f((function(e){var n=Object(bt.a)({},e);return n.roomInfo=t.data,n.state=Ra.START_PASSWORD,n}))}if(t.data.doorMode===l.bg.NOOB_STATE&&!ae().isAmbassador&&!ae().isRealNoob&&!ae().isModerator)return;te(t.data.roomId)}else O((function(e){var n=Object(bt.a)({},e);return n.enteredGuestRoom=t.data,n.currentRoomIsStaffPick=t.staffPick,n}))}),[O,f]),C=Object(c.useCallback)((function(e){var t=e.getParser();O((function(e){var n=Object(bt.a)({},e);return n.currentRoomRating=t.totalLikes,n.canRate=t.canLike,n}))}),[O]),T=Object(c.useCallback)((function(e){var t=e.getParser();t.userName&&0!==t.userName.length||f((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_WAITING,t}))}),[f]),S=Object(c.useCallback)((function(e){var t=e.getParser();t.userName&&0!==t.userName.length||f((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_ACCEPTED,t}))}),[f]),N=Object(c.useCallback)((function(e){var t=e.getParser();t.userName&&0!==t.userName.length||f((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_NO_ANSWER,t}))}),[f]),R=Object(c.useCallback)((function(e){switch(e.getParser().errorCode){case-100002:return void f((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_WRONG_PASSWORD,t}));case 4009:return void Ha.simpleAlert(st("navigator.alert.need.to.be.vip"),Ua.DEFAULT,null,null,st("generic.alert.title"));case 4010:return void Ha.simpleAlert(st("navigator.alert.invalid_room_name"),Ua.DEFAULT,null,null,st("generic.alert.title"));case 4011:return void Ha.simpleAlert(st("navigator.alert.cannot_perm_ban"),Ua.DEFAULT,null,null,st("generic.alert.title"));case 4013:return void Ha.simpleAlert(st("navigator.alert.room_in_maintenance"),Ua.DEFAULT,null,null,st("generic.alert.title"))}}),[f]),k=Object(c.useCallback)((function(e){var t=e.getParser();j(t.topLevelContexts),i(t.topLevelContexts.length?t.topLevelContexts[0]:null)}),[j,i]),A=Object(c.useCallback)((function(e){var t=e.getParser();i((function(e){var n=e;if(n||(n=u&&u.length&&u[0]||null),!n)return null;if(t.result.code!==n.code&&u&&u.length){var r,a=Object(s.a)(u);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.code===t.result.code&&(n=c)}}catch(d){a.e(d)}finally{a.f()}}var i,o=Object(s.a)(u);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.code===t.result.code&&(n=l)}}catch(d){o.e(d)}finally{o.f()}return n})),m(t.result)}),[u,i,m]),w=Object(c.useCallback)((function(e){var t=e.getParser();r(t.categories)}),[r]),D=Object(c.useCallback)((function(e){te(e.getParser().roomId)}),[]),P=Object(c.useCallback)((function(e){var t=e.getParser(),n=!1;if(O((function(e){n=e.settingsReceived;var r=Object(bt.a)({},e);return r.homeRoomId=t.homeRoomId,r.settingsReceived=!0,r})),!n){var r=-1,a=-1;void 0!==L("friend.id")&&parseInt(L("friend.id"))>0&&(r=0,ea(new l.Db(parseInt(L("friend.id"))))),void 0!==L("forward.type")&&void 0!==L("forward.id")&&(r=parseInt(L("forward.type")),a=parseInt(L("forward.id"))),2===r?Da(a):-1===r&&t.roomIdToEnter>0&&(U("navigator/close"),t.roomIdToEnter!==t.homeRoomId?te(t.roomIdToEnter):te(t.homeRoomId))}}),[O]),M=Object(c.useCallback)((function(e){var t=e.getParser();switch(t.reason){case l.S.REASON_FULL:Ha.simpleAlert(st("navigator.guestroomfull.text"),Ua.DEFAULT,null,null,st("navigator.guestroomfull.title"));break;case l.S.REASON_QUEUE_ERROR:Ha.simpleAlert(st("room.queue.error.".concat(t.parameter)),Ua.DEFAULT,null,null,st("room.queue.error.title"));break;case l.S.REASON_BANNED:Ha.simpleAlert(st("navigator.banned.text"),Ua.DEFAULT,null,null,st("navigator.banned.title"));break;default:Ha.simpleAlert(st("room.queue.error.title"),Ua.DEFAULT,null,null,st("room.queue.error.title"))}Oe()}),[]),F=Object(c.useCallback)((function(e){U("navigator/show")}),[]);return dt(l.zi,x),dt(l.Bi,_),dt(l.tg,E),dt(l.rg,I),dt(l.jc,y),dt(l.Mg,C),dt(l.eg,T),dt(l.dg,S),dt(l.fg,N),dt(l.Zb,R),dt(l.Ce,k),dt(l.Fe,A),dt(l.ze,w),dt(l.ag,D),dt(l.Ae,P),dt(l.pg,M),dt(l.De,F),null},mj=[Ra.START_DOORBELL,Ra.STATE_WAITING,Ra.STATE_NO_ANSWER,Ra.START_PASSWORD,Ra.STATE_WRONG_PASSWORD],vj=[Ra.START_DOORBELL,Ra.STATE_WAITING,Ra.STATE_NO_ANSWER],pj=(Ra.START_PASSWORD,Ra.STATE_WRONG_PASSWORD,function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=fj(),s=i.doorData,l=void 0===s?null:s,u=i.setDoorData,d=void 0===u?null:u,j=function(){l&&l.state===Ra.STATE_WAITING&&de(),d(null)};if(Object(c.useEffect)((function(){l&&l.state===Ra.STATE_NO_ANSWER&&de()}),[l]),!l||l.state===Ra.NONE||-1===mj.indexOf(l.state))return null;var b=vj.indexOf(l.state)>=0;return Object($a.jsxs)(Pc,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st(b?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:j}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:l&&l.roomInfo&&l.roomInfo.roomName}),l.state===Ra.START_DOORBELL&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.doorbell.info")}),l.state===Ra.STATE_WAITING&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.doorbell.waiting")}),l.state===Ra.STATE_NO_ANSWER&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.doorbell.no.answer")}),l.state===Ra.START_PASSWORD&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.password.info")}),l.state===Ra.STATE_WRONG_PASSWORD&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.password.retryinfo")})]}),b&&Object($a.jsxs)(Jc,{gap:1,children:[l.state===Ra.START_DOORBELL&&Object($a.jsx)(dc,{variant:"success",onClick:function(){l&&l.roomInfo&&(te(l.roomInfo.roomId),d((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_PENDING_SERVER,t})))},children:st("navigator.doorbell.button.ring")}),Object($a.jsx)(dc,{variant:"danger",onClick:j,children:st("generic.cancel")})]}),!b&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.password.enter")}),Object($a.jsx)("input",{type:"password",className:"form-control form-control-sm",onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{variant:"success",onClick:function(){l&&l.roomInfo&&(te(l.roomInfo.roomId,r),d((function(e){var t=Object(bt.a)({},e);return t.state=Ra.STATE_PENDING_SERVER,t})))},children:st("navigator.password.button.try")}),Object($a.jsx)(dc,{variant:"danger",onClick:j,children:st("generic.cancel")})]})]})]})]})}),xj=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(null),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(0),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)([]),N=Object(o.a)(S,2),R=N[0],k=N[1],A=Object(c.useState)(""),w=Object(o.a)(A,2),D=w[0],U=w[1],P=fj().categories,M=void 0===P?null:P,F=L("hc.disabled",!1),H=function(e){return L("images.url")+"/navigator/models/model_".concat(e,".png")};return Object(c.useEffect)((function(){if(!r){for(var e=[],t=10;t<=100;t+=10)e.push(t);a(e),E(e[0])}}),[r]),Object(c.useEffect)((function(){M&&M.length&&v(M[0].id)}),[M]),Object(c.useEffect)((function(){var e=L("navigator.room.models");e&&e.length&&(k(e),U(e[0].name))}),[]),Object($a.jsxs)(Jc,{overflow:"hidden",children:[Object($a.jsxs)(cc,{overflow:"hidden",children:[Object($a.jsxs)(Jc,{size:6,gap:1,overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.createroom.roomnameinfo")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:function(e){return d(e.target.value)},placeholder:st("navigator.createroom.roomnameinfo")})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.createroom.roomdescinfo")}),Object($a.jsx)("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:function(e){return h(e.target.value)},placeholder:st("navigator.createroom.roomdescinfo")})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.category")}),Object($a.jsx)("select",{className:"form-select form-select-sm",onChange:function(e){return v(Number(e.target.value))},children:M&&M.length>0&&M.map((function(e){return Object($a.jsx)("option",{value:e.id,children:st(e.name)},e.id)}))})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.maxvisitors")}),Object($a.jsx)("select",{className:"form-select form-select-sm",onChange:function(e){return E(Number(e.target.value))},children:r&&r.map((function(e){return Object($a.jsx)("option",{value:e,children:e},e)}))})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.tradesettings")}),Object($a.jsxs)("select",{className:"form-select form-select-sm",onChange:function(e){return T(Number(e.target.value))},children:[Object($a.jsx)("option",{value:"0",children:st("navigator.roomsettings.trade_not_allowed")}),Object($a.jsx)("option",{value:"1",children:st("navigator.roomsettings.trade_not_with_Controller")}),Object($a.jsx)("option",{value:"2",children:st("navigator.roomsettings.trade_allowed")})]})]})]}),Object($a.jsx)(Jc,{size:6,gap:1,overflow:"auto",children:R.map((function(e,t){return Object($a.jsxs)(ii,{fullHeight:!0,onClick:function(){return function(e,t){!e||e.clubLevel>ce()||U(R[t].name)}(e,t)},itemActive:D===e.name,overflow:"unset",gap:0,className:"p-1",disabled:ce()<e.clubLevel,children:[Object($a.jsx)(lc,{fullHeight:!0,center:!0,overflow:"hidden",children:Object($a.jsx)("img",{alt:"",src:H(e.name)})}),Object($a.jsxs)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:[e.tileSize," ",st("navigator.createroom.tilesize")]}),!F&&e.clubLevel>l.zd.NO_CLUB&&Object($a.jsx)(Vc,{position:"absolute",className:"top-1 end-1",type:"hc"})]},e.name)}))})]}),Object($a.jsx)(dc,{fullWidth:!0,variant:!u||u.length<3?"danger":"success",onClick:function(){ea(new l.Zf(u,O,"model_"+D,Number(m),Number(_),C))},disabled:!u||u.length<3,children:st("navigator.createroom.create")})]})},_j=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=Object(c.useState)(!1),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),j=d[0],b=d[1],O=fj().navigatorData,h=void 0===O?null:O,f=function(e){switch(e){case"settings":return ae().userId===h.enteredGuestRoom.ownerId||ae().isModerator;case"staff_pick":return ae().securityLevel>=l.Bh.COMMUNITY;default:return!1}},g=function(e,t){if(h&&h.enteredGuestRoom)switch(e){case"set_home_room":var r=-1;return h.homeRoomId!==h.enteredGuestRoom.roomId&&(r=h.enteredGuestRoom.roomId),void(r>0&&ea(new l.yi(r)));case"navigator_search_tag":return;case"open_room_thumbnail_camera":return void Kt(new Lt(Lt.TOGGLE_THUMBNAIL));case"open_group_info":return void Ia(h.enteredGuestRoom.habboGroupId);case"toggle_room_link":return void U("navigator/toggle-room-link");case"open_room_settings":return void ea(new l.ch(h.enteredGuestRoom.roomId));case"toggle_pick":return s((function(e){return!e})),void ea(new l.gh(h.enteredGuestRoom.roomId));case"toggle_mute":return b((function(e){return!e})),void ea(new l.Bg);case"open_floorplan_editor":return void U("floor-editor/toggle");case"close":return void n()}};return Object(c.useEffect)((function(){h&&(s(h.currentRoomIsStaffPick),h.enteredGuestRoom&&b(h.enteredGuestRoom.allInRoomMuted))}),[h]),h.enteredGuestRoom?Object($a.jsxs)(Pc,{className:"nitro-room-info",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("navigator.roomsettings.roominfo"),onCloseClick:function(){return g("close")}}),Object($a.jsx)(Ec,{children:h.enteredGuestRoom&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsx)(Ti,{roomId:h.enteredGuestRoom.roomId,customUrl:h.enteredGuestRoom.officialRoomPicRef,children:f("settings")&&Object($a.jsx)("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:function(){return g("open_room_thumbnail_camera")}})}),Object($a.jsxs)(Jc,{grow:!0,gap:1,overflow:"hidden",children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("i",{onClick:function(){return g("set_home_room")},className:"flex-shrink-0 icon icon-house-small cursor-pointer"+io()({" gray":h.homeRoomId!==h.enteredGuestRoom.roomId})}),Object($a.jsx)(Hi,{bold:!0,variant:"none",style:{color:"--var(test-galaxytext)"},children:h.enteredGuestRoom.roomName})]}),h.enteredGuestRoom.showOwner&&Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"muted",children:st("navigator.roomownercaption")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:h.enteredGuestRoom.ownerId}),Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},children:h.enteredGuestRoom.ownerName})]})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"muted",children:st("navigator.roomrating")}),Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},children:h.currentRoomRating})]}),h.enteredGuestRoom.tags.length>0&&Object($a.jsx)(lc,{alignItems:"center",gap:1,children:h.enteredGuestRoom.tags.map((function(e){return Object($a.jsxs)(Hi,{pointer:!0,className:"bg-muted rounded p-1",onClick:function(e){return g("navigator_search_tag")},children:["#",e]},e)}))})]}),Object($a.jsxs)(Jc,{alignItems:"center",gap:1,children:[f("settings")&&Object($a.jsx)("i",{className:"icon icon-cog cursor-pointer",title:st("navigator.room.popup.info.room.settings"),onClick:function(e){return g("open_room_settings")}}),Object($a.jsx)(mc.a,{icon:"link",title:st("navigator.embed.caption"),className:"cursor-pointer",onClick:function(e){return U("navigator/toggle-room-link")}})]})]}),Object($a.jsx)(Hi,{overflow:"auto",style:{maxHeight:50},children:h.enteredGuestRoom.description}),h.enteredGuestRoom.habboGroupId>0&&Object($a.jsxs)(lc,{pointer:!0,alignItems:"center",gap:1,onClick:function(){return g("open_group_info")},children:[Object($a.jsx)(Gc,{className:"flex-none",badgeCode:h.enteredGuestRoom.groupBadgeCode,isGroup:!0}),Object($a.jsx)(Hi,{variant:"none",style:{color:"--var(test-galaxytext)"},underline:!0,children:st("navigator.guildbase",["groupName"],[h.enteredGuestRoom.groupName])})]})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[f("staff_pick")&&Object($a.jsx)(dc,{onClick:function(){return g("toggle_pick")},children:st(i?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),Object($a.jsx)(dc,{variant:"danger",disabled:!0,children:st("help.emergency.main.report.room")}),f("settings")&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(dc,{onClick:function(){return g("toggle_mute")},children:st(j?"navigator.muteall_on":"navigator.muteall_off")}),Object($a.jsx)(dc,{onClick:function(){return g("open_floorplan_editor")},children:st("open.floor.plan.editor")})]})]})]})})]}):null},Ej=function(e){var t=e.onCloseClick,n=void 0===t?null:t,r=fj().navigatorData,a=void 0===r?null:r;return a.enteredGuestRoom?Object($a.jsxs)(Pc,{className:"nitro-room-link",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("navigator.embed.title"),onCloseClick:n}),Object($a.jsx)(Ec,{className:"text-black d-flex align-items-center",children:Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(Ti,{roomId:a.enteredGuestRoom.roomId,customUrl:a.enteredGuestRoom.officialRoomPicRef}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{bold:!0,fontSize:5,children:st("navigator.embed.headline")}),Object($a.jsx)(Hi,{children:st("navigator.embed.info")}),Object($a.jsx)("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:st("navigator.embed.src",["roomId"],[a.enteredGuestRoom.roomId.toString()])})]})]})})]}):null},Ij=function(e){var t=e.roomData,n=void 0===t?null:t,r=e.handleChange,a=void 0===r?null:r,i=Object(c.useState)(""),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(!1),g=Object(o.a)(f,2),m=g[0],v=g[1];return Object(c.useEffect)((function(){d(""),h(""),v(!1)}),[n]),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.roomaccess.caption")}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.roomaccess.info")})]}),Object($a.jsxs)(Jc,{overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.doormode")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:n.lockState===l.bg.OPEN_STATE&&!m,onChange:function(e){return a("lock_state",l.bg.OPEN_STATE)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.doormode.open")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:n.lockState===l.bg.DOORBELL_STATE&&!m,onChange:function(e){return a("lock_state",l.bg.DOORBELL_STATE)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.doormode.doorbell")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:n.lockState===l.bg.INVISIBLE_STATE&&!m,onChange:function(e){return a("lock_state",l.bg.INVISIBLE_STATE)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.doormode.invisible")})]}),Object($a.jsxs)(lc,{fullWidth:!0,gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"lockState",checked:n.lockState===l.bg.PASSWORD_STATE||m,onChange:function(e){return v(e.target.checked)}}),!m&&n.lockState!==l.bg.PASSWORD_STATE&&Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.doormode.password")}),(m||n.lockState===l.bg.PASSWORD_STATE)&&Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.doormode.password")}),Object($a.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:u,onChange:function(e){return d(e.target.value)},placeholder:st("navigator.roomsettings.password"),onFocus:function(e){return v(!0)}}),m&&u.length<=0&&Object($a.jsx)(Hi,{bold:!0,small:!0,variant:"danger",children:st("navigator.roomsettings.passwordismandatory")}),Object($a.jsx)("input",{type:"password",className:"form-control form-control-sm col-4",value:O,onChange:function(e){return h(e.target.value)},onBlur:function(){!m||u.length<=0||O.length<=0||u!==O||a("password",u)},placeholder:st("navigator.roomsettings.passwordconfirm")}),m&&u.length>0&&u!==O&&Object($a.jsx)(Hi,{bold:!0,small:!0,variant:"danger",children:st("navigator.roomsettings.invalidconfirm")})]})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.pets")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.allowPets,onChange:function(e){return a("allow_pets",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.allowpets")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.allowPetsEat,onChange:function(e){return a("allow_pets_eat",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},yj=function(e){var t=e.roomData,n=void 0===t?null:t,r=e.handleChange,a=void 0===r?null:r,i=e.close,s=void 0===i?null:i,u=Object(c.useState)(""),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(""),h=Object(o.a)(O,2),f=h[0],g=h[1],m=fj().categories,v=void 0===m?null:m;return Object(c.useEffect)((function(){b(n.roomName),g(n.roomDescription)}),[n]),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},className:"col-3",children:st("navigator.roomname")}),Object($a.jsxs)(Jc,{fullWidth:!0,gap:0,children:[Object($a.jsx)("input",{className:"form-control form-control-sm",value:j,maxLength:60,onChange:function(e){return b(e.target.value)},onBlur:function(){j===n.roomName||j.length<3||j.length>60||a("name",j)}}),j.length<3&&Object($a.jsx)(Hi,{bold:!0,small:!0,variant:"danger",children:st("navigator.roomsettings.roomnameismandatory")})]})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},className:"col-3",children:st("navigator.roomsettings.desc")}),Object($a.jsx)("textarea",{className:"form-control form-control-sm",value:f,maxLength:255,onChange:function(e){return g(e.target.value)},onBlur:function(){f===n.roomDescription||f.length>255||a("description",f)}})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},className:"col-3",children:st("navigator.category")}),Object($a.jsx)("select",{className:"form-select form-select-sm",value:n.categoryId,onChange:function(e){return a("category",e.target.value)},children:v&&v.map((function(e){return Object($a.jsx)("option",{value:e.id,children:st(e.name)},e.id)}))})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},className:"col-3",children:st("navigator.maxvisitors")}),Object($a.jsx)("select",{className:"form-select form-select-sm",value:n.userCount,onChange:function(e){return a("max_visitors",e.target.value)},children:Aa&&Aa.map((function(e){return Object($a.jsx)("option",{value:e,children:e},e)}))})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},className:"col-3",children:st("navigator.tradesettings")}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.tradeState,onChange:function(e){return a("trade_state",e.target.value)},children:[Object($a.jsx)("option",{value:"0",children:st("navigator.roomsettings.trade_not_allowed")}),Object($a.jsx)("option",{value:"1",children:st("navigator.roomsettings.trade_not_with_Controller")}),Object($a.jsx)("option",{value:"2",children:st("navigator.roomsettings.trade_allowed")})]})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(tc,{className:"col-3"}),Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.allowWalkthrough,onChange:function(e){return a("allow_walkthrough",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.allow_walk_through")})]}),Object($a.jsxs)(Hi,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:function(){Ha.confirm(st("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[n.roomName]),(function(){ea(new l.cg(n.roomId)),s&&s(),U("navigator/search/myworld_view")}),null,null,null,st("navigator.roomsettings.deleteroom.confirm.title"))},children:[Object($a.jsx)(mc.a,{icon:"times"}),st("navigator.roomsettings.delete")]})]})},Cj=function(e){var t,n=e.roomData,r=void 0===n?null:n,a=e.handleChange,i=void 0===a?null:a,s=Object(c.useState)(-1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Object(c.useState)([]),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useCallback)((function(e){var t=e.getParser();r&&r.roomId===t.roomId&&f(t.bannedUsers)}),[r]);dt(l.w,g);var m=Object(c.useCallback)((function(e){f((function(t){var n=Object(ut.a)(t),r=n.findIndex((function(t){return t.userId===e}));return r>=0&&n.splice(r,1),n})),ea(new l.jh(e,r.roomId)),j(-1)}),[r]);return Object(c.useEffect)((function(){ea(new l.Sf(r.roomId))}),[r.roomId]),Object($a.jsxs)(cc,{overflow:"auto",children:[Object($a.jsxs)(Jc,{size:6,children:[Object($a.jsxs)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:[st("navigator.roomsettings.moderation.banned.users")," (",h.length,")"]}),Object($a.jsx)(lc,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object($a.jsx)(Jc,{fullWidth:!0,overflow:"auto",gap:1,children:h&&h.length>0&&h.map((function(e,t){return Object($a.jsxs)(lc,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object($a.jsx)(Ri,{userName:e.userName}),Object($a.jsxs)(Hi,{pointer:!0,grow:!0,onClick:function(t){return j(e.userId)},children:[" ",e.userName]})]},t)}))})}),Object($a.jsxs)(dc,{disabled:d<=0,onClick:function(e){return m(d)},children:[st("navigator.roomsettings.moderation.unban")," ",d>0&&(null===(t=h.find((function(e){return e.userId===d})))||void 0===t?void 0:t.userName)]})]}),Object($a.jsxs)(Jc,{size:6,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.moderation.mute.header")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===r.moderationSettings.allowMute,onChange:function(e){return i("moderation_mute",e.target.checked?1:0)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.moderation.rights")})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.moderation.kick.header")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:0===r.moderationSettings.allowKick,onChange:function(e){return i("moderation_kick",e.target.checked?0:2)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.moderation.all")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===r.moderationSettings.allowKick||0===r.moderationSettings.allowKick,disabled:0===r.moderationSettings.allowKick,onChange:function(e){return i("moderation_kick",e.target.checked?1:2)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.moderation.rights")})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.moderation.ban.header")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1===r.moderationSettings.allowBan,onChange:function(e){return i("moderation_ban",e.target.checked?1:0)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.moderation.rights")})]})]})]})]})},Tj=function(e){var t=e.roomData,n=void 0===t?null:t,r=Object(c.useState)(new Map),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useCallback)((function(e){var t=e.getParser();n&&n.roomId===t.roomId&&s(t.users)}),[n]);dt(l.Bb,u);var d=Object(c.useCallback)((function(e){var t=e.getParser();n&&n.roomId===t.roomId&&s((function(e){var n=new Map(e);return n.set(t.data.userId,t.data.userName),n}))}),[n]);dt(l.zb,d);var j=Object(c.useCallback)((function(e){var t=e.getParser();n&&n.roomId===t.roomId&&s((function(e){var n=new Map(e);return n.delete(t.userId),n}))}),[n]);return dt(l.Ab,j),Object(c.useEffect)((function(){ea(new l.oh(n.roomId))}),[n.roomId]),Object($a.jsxs)(cc,{children:[Object($a.jsxs)(Jc,{size:6,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.flatctrls.userswithrights",["displayed","total"],[i.size.toString(),i.size.toString()])}),Object($a.jsx)(lc,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:Object($a.jsx)(Jc,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(i.entries()).map((function(e,t){var n=Object(o.a)(e,2),r=n[0],a=n[1];return Object($a.jsxs)(lc,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[Object($a.jsx)(Ri,{userName:a}),Object($a.jsxs)(Hi,{pointer:!0,grow:!0,onClick:function(e){return ea(new l.hh(r))},children:[" ",a]})]},t)}))})})]}),Object($a.jsx)(Jc,{size:6,justifyContent:"end",children:Object($a.jsx)(dc,{variant:"danger",disabled:!i.size,onClick:function(e){return ea(new l.If(n.roomId))},children:st("navigator.flatctrls.clear")})})]})},Sj=function(e){var t=e.roomData,n=void 0===t?null:t,r=e.handleChange,a=void 0===r?null:r,i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){d(n.chatSettings.distance)}),[n.chatSettings]),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.vip.caption")}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.vip.info")})]}),Object($a.jsxs)(cc,{overflow:"auto",children:[Object($a.jsxs)(Jc,{size:6,gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.chat_settings")}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.chat_settings.info")}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.chatSettings.mode,onChange:function(e){return a("bubble_mode",e.target.value)},children:[Object($a.jsx)("option",{value:l.Vf.CHAT_MODE_FREE_FLOW,children:st("navigator.roomsettings.chat.mode.free.flow")}),Object($a.jsx)("option",{value:l.Vf.CHAT_MODE_LINE_BY_LINE,children:st("navigator.roomsettings.chat.mode.line.by.line")})]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.chatSettings.weight,onChange:function(e){return a("chat_weight",e.target.value)},children:[Object($a.jsx)("option",{value:l.Vf.CHAT_BUBBLE_WIDTH_NORMAL,children:st("navigator.roomsettings.chat.bubbles.width.normal")}),Object($a.jsx)("option",{value:l.Vf.CHAT_BUBBLE_WIDTH_THIN,children:st("navigator.roomsettings.chat.bubbles.width.thin")}),Object($a.jsx)("option",{value:l.Vf.CHAT_BUBBLE_WIDTH_WIDE,children:st("navigator.roomsettings.chat.bubbles.width.wide")})]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.chatSettings.speed,onChange:function(e){return a("bubble_speed",e.target.value)},children:[Object($a.jsx)("option",{value:l.Vf.CHAT_SCROLL_SPEED_FAST,children:st("navigator.roomsettings.chat.speed.fast")}),Object($a.jsx)("option",{value:l.Vf.CHAT_SCROLL_SPEED_NORMAL,children:st("navigator.roomsettings.chat.speed.normal")}),Object($a.jsx)("option",{value:l.Vf.CHAT_SCROLL_SPEED_SLOW,children:st("navigator.roomsettings.chat.speed.slow")})]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.chatSettings.protection,onChange:function(e){return a("flood_protection",e.target.value)},children:[Object($a.jsx)("option",{value:l.Vf.FLOOD_FILTER_LOOSE,children:st("navigator.roomsettings.chat.flood.loose")}),Object($a.jsx)("option",{value:l.Vf.FLOOD_FILTER_NORMAL,children:st("navigator.roomsettings.chat.flood.normal")}),Object($a.jsx)("option",{value:l.Vf.FLOOD_FILTER_STRICT,children:st("navigator.roomsettings.chat.flood.strict")})]}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.chat_settings.hearing.distance")}),Object($a.jsx)("input",{type:"number",min:"0",className:"form-control form-control-sm",value:u,onChange:function(e){return d(e.target.valueAsNumber)},onBlur:function(e){return a("chat_distance",u)}})]}),Object($a.jsxs)(Jc,{size:6,gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("navigator.roomsettings.vip_settings")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:n.hideWalls,onChange:function(e){return a("hide_walls",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("navigator.roomsettings.hide_walls")})]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.wallThickness,onChange:function(e){return a("wall_thickness",e.target.value)},children:[Object($a.jsx)("option",{value:"0",children:st("navigator.roomsettings.wall_thickness.normal")}),Object($a.jsx)("option",{value:"1",children:st("navigator.roomsettings.wall_thickness.thick")}),Object($a.jsx)("option",{value:"-1",children:st("navigator.roomsettings.wall_thickness.thin")}),Object($a.jsx)("option",{value:"-2",children:st("navigator.roomsettings.wall_thickness.thinnest")})]}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:n.floorThickness,onChange:function(e){return a("floor_thickness",e.target.value)},children:[Object($a.jsx)("option",{value:"0",children:st("navigator.roomsettings.floor_thickness.normal")}),Object($a.jsx)("option",{value:"1",children:st("navigator.roomsettings.floor_thickness.thick")}),Object($a.jsx)("option",{value:"-1",children:st("navigator.roomsettings.floor_thickness.thin")}),Object($a.jsx)("option",{value:"-2",children:st("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Nj=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],Rj=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(Nj[0]),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useCallback)((function(e){var t=e.getParser();t&&(a({roomId:t.roomId,roomName:t.name,roomDescription:t.description,categoryId:t.categoryId,userCount:t.userCount,tags:t.tags,tradeState:t.tradeMode,allowWalkthrough:t.allowWalkthrough,lockState:t.state,password:null,allowPets:t.allowPets,allowPetsEat:t.allowPetsEat,hideWalls:t.hideWalls,wallThickness:t.thicknessWall,floorThickness:t.thicknessFloor,chatSettings:{mode:t.chatSettings.mode,weight:t.chatSettings.weight,speed:t.chatSettings.speed,distance:t.chatSettings.distance,protection:t.chatSettings.protection},moderationSettings:{allowMute:t.moderationSettings.allowMute,allowKick:t.moderationSettings.allowKick,allowBan:t.moderationSettings.allowBan}}),ea(new l.Sf(t.roomId)))}),[]);dt(l.dh,j);var b=function(){a(null),d(Nj[0])},O=function(e,t){a((function(n){var r=Object(bt.a)({},n);switch(e){case"name":r.roomName=String(t);break;case"description":r.roomDescription=String(t);break;case"category":r.categoryId=Number(t);break;case"max_visitors":r.userCount=Number(t);break;case"trade_state":r.tradeState=Number(t);break;case"allow_walkthrough":r.allowWalkthrough=Boolean(t);break;case"allow_pets":r.allowPets=Boolean(t);break;case"allow_pets_eat":r.allowPetsEat=Boolean(t);break;case"hide_walls":r.hideWalls=Boolean(t);break;case"wall_thickness":r.wallThickness=Number(t);break;case"floor_thickness":r.floorThickness=Number(t);break;case"lock_state":r.lockState=Number(t);break;case"password":r.lockState=l.bg.PASSWORD_STATE,r.password=String(t);break;case"moderation_mute":r.moderationSettings.allowMute=Number(t);break;case"moderation_kick":r.moderationSettings.allowKick=Number(t);break;case"moderation_ban":r.moderationSettings.allowBan=Number(t);break;case"bubble_mode":r.chatSettings.mode=Number(t);break;case"chat_weight":r.chatSettings.weight=Number(t);break;case"bubble_speed":r.chatSettings.speed=Number(t);break;case"flood_protection":r.chatSettings.protection=Number(t);break;case"chat_distance":r.chatSettings.distance=Number(t)}return ea(new l.xh(r.roomId,r.roomName,r.roomDescription,r.lockState,r.password,r.userCount,r.categoryId,r.tags.length,r.tags,r.tradeState,r.allowPets,r.allowPetsEat,r.allowWalkthrough,r.hideWalls,r.wallThickness,r.floorThickness,r.moderationSettings.allowMute,r.moderationSettings.allowKick,r.moderationSettings.allowBan,r.chatSettings.mode,r.chatSettings.weight,r.chatSettings.speed,r.chatSettings.distance,r.chatSettings.protection)),r}))};return r?Object($a.jsxs)(Pc,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[Object($a.jsx)(Tc,{headerText:st("navigator.roomsettings"),onCloseClick:b}),Object($a.jsx)(Di,{children:Nj.map((function(e){return Object($a.jsx)(Ai,{isActive:u===e,onClick:function(t){return d(e)},children:st(e)},e)}))}),Object($a.jsxs)(Ec,{children:[u===Nj[0]&&Object($a.jsx)(yj,{roomData:r,handleChange:O,close:b}),u===Nj[1]&&Object($a.jsx)(Ij,{roomData:r,handleChange:O}),u===Nj[2]&&Object($a.jsx)(Tj,{roomData:r,handleChange:O}),u===Nj[3]&&Object($a.jsx)(Sj,{roomData:r,handleChange:O}),u===Nj[4]&&Object($a.jsx)(Cj,{roomData:r,handleChange:O})]})]}):null},kj=n(130),Aj=function(e){var t=e.roomData,n=void 0===t?null:t,r=Object(c.useState)(!1),a=Object(o.a)(r,2),i=a[0],s=a[1],u=Object(c.useRef)();return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(tc,{pointer:!0,innerRef:u,className:"icon icon-navigator-info",onMouseOver:function(e){return s(!0)},onMouseLeave:function(e){return s(!1)}}),Object($a.jsx)(kj.a,{show:i,target:u.current,placement:"right",children:Object($a.jsx)(Qu.a,{children:Object($a.jsx)(Ec,{overflow:"hidden",className:"room-info image-rendering-pixelated bg-transparent",children:Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsxs)(Ti,{roomId:n.roomId,customUrl:n.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[n.habboGroupId>0&&Object($a.jsx)(Gc,{badgeCode:n.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),n.doorMode!==l.bg.OPEN_STATE&&Object($a.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(n.doorMode===l.bg.DOORBELL_STATE?"locked":n.doorMode===l.bg.PASSWORD_STATE?"password":n.doorMode===l.bg.INVISIBLE_STATE?"invisible":"")})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:n.roomName}),Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(Hi,{italics:!0,variant:"muted",children:st("navigator.roomownercaption")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.ownerId}),Object($a.jsx)(Hi,{italics:!0,children:n.ownerName})]})]}),Object($a.jsx)(Hi,{className:"flex-grow-1",children:n.description}),Object($a.jsxs)(lc,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+function(){var e=n.userCount/n.maxUserCount*100,t="bg-primary";return e>=92?t="bg-danger":e>=50?t="bg-warning":e>0&&(t="bg-success"),t}(),gap:1,children:[Object($a.jsx)(mc.a,{icon:"user"}),n.userCount]})]})]})})})})]})},wj=["roomData","children","thumbnail"],Dj=function(e){var t=e.roomData,n=void 0===t?null:t,r=e.children,a=void 0===r?null:r,c=e.thumbnail,i=void 0!==c&&c,s=Object(Za.a)(e,wj),o=fj().setDoorData,u=void 0===o?null:o,d=function(){var e=n.userCount/n.maxUserCount*100,t="bg-primary";return e>=92?t="bg-danger":e>=50?t="bg-warning":e>0&&(t="bg-success"),t},j=function(e){if(n.ownerId!==ae().userId){if(0!==n.habboGroupId)return void Da(n.roomId);switch(n.doorMode){case l.bg.DOORBELL_STATE:return void u((function(e){var t=Object(bt.a)({},e);return t.roomInfo=n,t.state=Ra.START_DOORBELL,t}));case l.bg.PASSWORD_STATE:return void u((function(e){var t=Object(bt.a)({},e);return t.roomInfo=n,t.state=Ra.START_PASSWORD,t}))}}te(n.roomId)};return i?Object($a.jsxs)(Jc,Object(bt.a)(Object(bt.a)({pointer:!0,overflow:"hidden",alignItems:"center",onClick:j,gap:0,className:"navigator-item rounded-3 small mb-1 flex-column"},s),{},{children:[Object($a.jsxs)(lc,{className:"w-100",style:{backgroundColor:"var(--test-galaxytwo)",padding:"3px",borderRadius:"3px",position:"relative",top:"10px",zIndex:"100"},children:[Object($a.jsx)(Hi,{variant:"white",truncate:!0,className:"flex-grow-1",children:n.roomName}),Object($a.jsx)(lc,{reverse:!0,alignItems:"center",gap:1,children:Object($a.jsx)(Aj,{roomData:n})}),a]}),Object($a.jsxs)(Ti,{roomId:n.roomId,customUrl:n.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[n.habboGroupId>0&&Object($a.jsx)(Gc,{badgeCode:n.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),Object($a.jsxs)(lc,{center:!0,className:"badge p-1 position-absolute m-1 "+d(),gap:1,children:[Object($a.jsx)(mc.a,{icon:"user"}),n.userCount]}),n.doorMode!==l.bg.OPEN_STATE&&Object($a.jsx)("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(n.doorMode===l.bg.DOORBELL_STATE?"locked":n.doorMode===l.bg.PASSWORD_STATE?"password":n.doorMode===l.bg.INVISIBLE_STATE?"invisible":"")})]})]})):Object($a.jsxs)(lc,Object(bt.a)(Object(bt.a)({pointer:!0,overflow:"hidden",alignItems:"center",onClick:j,gap:2,className:"navigator-item px-2 py-2 small"},s),{},{children:[Object($a.jsxs)(lc,{center:!0,className:"badge p-1 "+d(),gap:1,children:[Object($a.jsx)(mc.a,{icon:"user"}),n.userCount]}),Object($a.jsx)(Hi,{truncate:!0,grow:!0,children:n.roomName}),Object($a.jsxs)(lc,{reverse:!0,alignItems:"center",gap:1,children:[Object($a.jsx)(Aj,{roomData:n}),n.habboGroupId>0&&Object($a.jsx)("i",{className:"icon icon-navigator-room-group"}),n.doorMode!==l.bg.OPEN_STATE&&Object($a.jsx)("i",{className:"icon icon-navigator-room-"+(n.doorMode===l.bg.DOORBELL_STATE?"locked":n.doorMode===l.bg.PASSWORD_STATE?"password":n.doorMode===l.bg.INVISIBLE_STATE?"invisible":"")})]}),a]}))},Uj=["searchResult"],Pj=function(e){var t=e.searchResult,n=void 0===t?null:t,r=Object(Za.a)(e,Uj),a=Object(c.useState)(!0),i=Object(o.a)(a,2),s=i[0],l=i[1],u=Object(c.useState)(0),d=Object(o.a)(u,2),j=d[0],b=d[1];Object(c.useEffect)((function(){n&&b(n.mode)}),[n,e]);var O=j>=ka.THUMBNAILS;return Object($a.jsxs)(Jc,{className:"rounded",gap:0,children:[Object($a.jsxs)(lc,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[Object($a.jsxs)(lc,{style:{marginTop:"5px"},grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:function(e){return l((function(e){return!e}))},children:[Object($a.jsx)("div",{style:{backgroundColor:"var(--test-galaxytwo)",padding:"2px",borderRadius:"3px"},children:Object($a.jsx)(mc.a,{style:{color:"#fff"},icon:s?"minus":"plus"})}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)",fontSize:"16px",fontWeight:"bold"},children:st(function(){var e=n.code;return e&&e.length?e.startsWith("${")?e.slice(2,e.length-1):"navigator.searchcode.title."+e:n.data}())})]}),Object($a.jsx)("div",{style:{backgroundColor:"var(--test-galaxytwo)",padding:"2px",borderRadius:"3px"},children:Object($a.jsx)(mc.a,{icon:j===ka.LIST?"th":j>=ka.THUMBNAILS?"bars":null,className:"text-white",onClick:function(){b((function(e){return e===ka.LIST?ka.THUMBNAILS:ka.LIST}))}})})]})," ",s&&Object($a.jsx)($a.Fragment,{children:O?Object($a.jsx)(sc,Object(bt.a)(Object(bt.a)({columnCount:3},r),{},{columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:n.rooms.length>0&&n.rooms.map((function(e,t){return Object($a.jsx)(Dj,{roomData:e,thumbnail:!0},t)}))})):Object($a.jsx)(cc,{columnCount:1,className:"navigator-grid",gap:0,children:n.rooms.length>0&&n.rooms.map((function(e,t){return Object($a.jsx)(Dj,{roomData:e},t)}))})})]})},Lj=n(123),Mj=function(e){var t=e.sendSearch,n=void 0===t?null:t,r=Object(c.useState)(0),a=Object(o.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)(""),u=Object(o.a)(l,2),d=u[0],j=u[1],b=fj(),O=b.topLevelContext,h=void 0===O?null:O,f=b.searchResult,g=void 0===f?null:f,m=function(){if(h){var e=wa[i];e||(e=wa[0]);var t=(e.query?e.query+":":"")+d;n(t||"",h.code)}};return Object(c.useEffect)((function(){if(g){var e=g.data.split(":"),t=null,n="";if(e.length>=2){var r=Object(Lj.a)(e),a=r[0],c=r.slice(1);t=wa.find((function(e){return e.query===a})),n=c.join(":")}else n=g.data;t||(t=wa[0]),s(wa.findIndex((function(e){return e===t}))),j(n)}}),[g]),Object($a.jsxs)(lc,{fullWidth:!0,gap:1,children:[Object($a.jsx)(lc,{shrink:!0,children:Object($a.jsx)("select",{className:"form-select form-select-sm",value:i,onChange:function(e){return s(parseInt(e.target.value))},children:wa.map((function(e,t){return Object($a.jsx)("option",{value:t,children:st("navigator.filter."+e.name)},t)}))})}),Object($a.jsxs)(lc,{fullWidth:!0,gap:1,children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("navigator.filter.input.placeholder"),value:d,onChange:function(e){return j(e.target.value)},onKeyDown:function(e){return function(e){"Enter"===e.key&&m()}(e)}}),Object($a.jsx)(dc,{variant:"none",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:m,children:Object($a.jsx)("i",{className:"icon icon-searchroom"})})]})]})},Fj=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(!1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(!1),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(!0),N=Object(o.a)(S,2),k=N[0],A=N[1],w=Object(c.useState)(!1),D=Object(o.a)(w,2),U=D[0],P=D[1],L=Object(c.useState)(null),M=Object(o.a)(L,2),F=M[0],H=M[1],G=Object(c.useState)(null),W=Object(o.a)(G,2),V=W[0],q=W[1],Y=Object(c.useState)(null),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=yn(),J=Object(o.a)(X,2),Z=J[0],$=J[1],ee=Object(c.useState)({roomInfo:null,state:Ra.NONE}),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=Object(c.useState)(null),ce=Object(o.a)(ae,2),ie=ce[0],se=ce[1],oe=Object(c.useRef)(null),le=Object(c.useCallback)((function(e){if(e.type===l.Sg.CREATED)return a(!1),void h(!1)}),[]);Yt(l.Sg.CREATED,le);var ue=Object(c.useCallback)((function(e,t){h(!1),ea(new l.Ee(t,e)),T(!0)}),[]),de=Object(c.useCallback)((function(){if(u)return oe.current?(ue(oe.current.value,oe.current.code),void(oe.current=null)):void(ie?ue(ie.data,ie.code):V&&ue("",V.code));P(!0)}),[u,ie,V,ue]),je=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return a(!0),void P(!0);case"hide":return void a(!1);case"toggle":return r?void a(!1):(a(!0),void P(!0));case"toggle-room-info":return void v((function(e){return!e}));case"toggle-room-link":return void E((function(e){return!e}));case"goto":if(t.length<=2)return;if("home"===t[2]){if(Z.homeRoomId<=0)return;Da(Z.homeRoomId)}else{Da(parseInt(t[2]))}return;case"create":return a(!0),void h(!0);case"search":if(t.length>2){var n=t[2],c="";t.length>3&&(c=t[3]),oe.current={value:c,code:n},a(!0),P(!0)}return}}),[r,Z]);return Object(c.useEffect)((function(){var e={linkReceived:je,eventUrlPrefix:"navigator/"};return R(e),function(){return B(e)}}),[je]),Object(c.useEffect)((function(){ie&&T(!1)}),[ie]),Object(c.useEffect)((function(){r&&u&&U&&(de(),P(!1))}),[r,u,U,de]),Object(c.useEffect)((function(){!u&&V&&d(!0)}),[u,V]),Object(c.useEffect)((function(){r&&k&&(ea(new l.Be),A(!1))}),[r,k]),Object(c.useEffect)((function(){l.Rd.addCallback(l.Ed.OPENROOM,(function(e){return ea(new l.nb(e))}))}),[]),Object($a.jsxs)(hj,{value:{categories:F,setCategories:H,topLevelContext:V,setTopLevelContext:q,topLevelContexts:K,setTopLevelContexts:Q,navigatorData:Z,setNavigatorData:$,doorData:ne,setDoorData:re,searchResult:ie,setSearchResult:se},children:[Object($a.jsx)(gj,{}),r&&Object($a.jsxs)(Pc,{uniqueKey:"navigator",className:"nitro-navigator",children:[Object($a.jsxs)("div",{className:"drag-handler",children:[Object($a.jsx)("div",{style:{padding:"10px",fontSize:"21px",fontWeight:"bold",color:"var(--test-galaxytext)",display:"inline-block"},children:"Navegador"}),K&&K.length>0&&K.map((function(e,t){return Object($a.jsx)("div",{style:{display:"inline-block",backgroundColor:"var(--test-galaxytwo)",padding:"4px",borderRadius:"4px",marginRight:"5px",cursor:"pointer"},onClick:function(t){return ue("",e.code)},children:st("navigator.toplevelview."+e.code)})})),Object($a.jsxs)("div",{style:{display:"inline-block",float:"right",padding:"13px"},children:[Object($a.jsxs)("div",{onClick:function(){return h(!0)},style:{display:"inline-block",backgroundColor:"#1dbf4a",padding:"4px",borderRadius:"4px",marginRight:"2px",cursor:"pointer"},children:[Object($a.jsx)(mc.a,{icon:"plus"})," Crear sala"]})," \xa0",Object($a.jsx)("div",{style:{display:"inline-block",backgroundColor:"#a61c1c",padding:"4px",borderRadius:"4px",marginRight:"2px",cursor:"pointer"},onClick:function(){return a(!r)},children:Object($a.jsx)(mc.a,{icon:"times"})})]})]}),Object($a.jsxs)(Ec,{position:"relative",children:[C&&Object($a.jsx)(tc,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!O&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Mj,{sendSearch:ue}),Object($a.jsx)(Jc,{overflow:"auto",children:ie&&ie.results.map((function(e,t){return Object($a.jsx)(Pj,{searchResult:e},t)}))})]}),O&&Object($a.jsx)(xj,{})]})]}),Object($a.jsx)(pj,{}),m&&Object($a.jsx)(_j,{onCloseClick:function(){return v(!1)}}),_&&Object($a.jsx)(Ej,{onCloseClick:function(){return E(!1)}}),Object($a.jsx)(Rj,{})]})},Hj=/\n\r|\n|\r/gm,Bj=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useRef)(null),g=Object(c.useCallback)(function(){var e=Object(Bi.a)(Wi.a.mark((function e(t){var n,r,c,i;return Wi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.text();case 8:r=e.sent,c=r.split(Hj),i=c.shift().split("|"),d(i[0]),h((function(e){return i[1]&&2===i[1].split(";").length?{width:parseInt(i[1].split(";")[0]),height:parseInt(i[1].split(";")[1])}:null})),a(c.join("")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),l.Re.error("Failed to fetch ".concat(t));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),m=Object(c.useCallback)((function(e){var t=e.split("/");t.length<2||(t.shift(),g(L("habbopages.url")+t.join("/")))}),[g]);return Object(c.useEffect)((function(){var e={linkReceived:m,eventUrlPrefix:"habbopages/"};return R(e),function(){return B(e)}}),[m]),Object(c.useEffect)((function(){var e=function(e){if(e.target instanceof HTMLAnchorElement){e.preventDefault();var t=e.target.href;t&&t.length&&Ha.openUrl(t)}};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]),r?Object($a.jsxs)(Pc,{className:"nitropedia",theme:"primary-slim",style:O?{width:O.width,height:O.height}:{},children:[Object($a.jsx)(Tc,{headerText:u,onCloseClick:function(){return a(null)}}),Object($a.jsx)(Ec,{children:Object($a.jsx)(tc,{fit:!0,innerRef:f,className:"text-black",dangerouslySetInnerHTML:{__html:r}})})]}):null},Gj=n(195),Wj=n(197),Vj=function(e){new URLSearchParams(window.location.search).get("sso");var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(null),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Object(c.useState)(null),p=Object(o.a)(v,2),x=p[0],_=p[1],E=Object(c.useState)(null),I=Object(o.a)(E,2),y=I[0],C=I[1],T=Object(c.useState)(null),S=Object(o.a)(T,2),N=S[0],k=S[1],A=Object(c.useState)(""),w=Object(o.a)(A,2),D=w[0],U=w[1];return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return fetch("https://lavvos.eu/system/controllers/eha.php?getLastItems=true").then((function(e){return e.json()})).then((function(e){u(e)})),fetch("https://lavvos.eu/system/controllers/eha.php?getLastItemsCategory=1").then((function(e){return e.json()})).then((function(e){O(e)})),fetch("https://lavvos.eu/system/controllers/eha.php?getLastItemsCategory=2").then((function(e){return e.json()})).then((function(e){m(e)})),fetch("https://lavvos.eu/system/controllers/eha.php?getLastItemsCategory=3").then((function(e){return e.json()})).then((function(e){_(e)})),fetch("https://lavvos.eu/system/controllers/eha.php?getLastItemsCategory=4").then((function(e){return e.json()})).then((function(e){C(e)})),void a(!0);case"hide":return void a(!1)}},eventUrlPrefix:"ratecatalog/"};return R(e),function(){return B(e)}}),[a]),Object($a.jsx)($a.Fragment,{children:r&&Object($a.jsxs)(Pc,{style:{width:"750px",height:"550px"},children:[Object($a.jsx)(Tc,{headerText:"Cat\xe1logo de rares",onCloseClick:function(e){return a(!1)}}),Object($a.jsx)(Ec,{className:"text-dark",children:Object($a.jsxs)(Gj.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",className:"mb-3",children:[Object($a.jsx)(Wj.a,{eventKey:"home",title:"\xdaltimos rares",style:{color:"var(--test-galaxytext)"},children:null!=l&&Object($a.jsx)("div",{className:"row",children:l.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})}),Object($a.jsx)(Wj.a,{eventKey:"custom",title:"Custom",style:{color:"var(--test-galaxytext)"},children:null!=b&&Object($a.jsx)("div",{className:"row",children:b.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})}),Object($a.jsx)(Wj.a,{eventKey:"rares",title:"Rares",style:{color:"var(--test-galaxytext)"},children:null!=g&&Object($a.jsx)("div",{className:"row",children:g.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})}),Object($a.jsx)(Wj.a,{eventKey:"megas",title:"Megas",style:{color:"var(--test-galaxytext)"},children:null!=x&&Object($a.jsx)("div",{className:"row",children:x.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})}),Object($a.jsx)(Wj.a,{eventKey:"ultras",title:"Ultras",style:{color:"var(--test-galaxytext)"},children:null!=y&&Object($a.jsx)("div",{className:"row",children:y.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})}),Object($a.jsxs)(Wj.a,{eventKey:"buscar",title:"Buscar",style:{color:"var(--test-galaxytext)"},children:[Object($a.jsxs)("div",{className:"row",style:{marginBottom:"20px"},children:[Object($a.jsx)("div",{className:"col-md-10",children:Object($a.jsx)("input",{type:"text",onChange:function(e){return U(e.target.value)},className:"form-control"})}),Object($a.jsx)("div",{className:"col-md-2",children:Object($a.jsx)("button",{onClick:function(){fetch("https://lavvos.eu/system/controllers/eha.php?getItemsByName="+D).then((function(e){return e.json()})).then((function(e){k(e)}))},className:"btn btn-primary w-100",children:"Buscar"})})]}),null!=N&&Object($a.jsx)("div",{className:"row",children:N.map((function(e){return Object($a.jsx)("div",{className:"col-md-3",children:Object($a.jsxs)("div",{className:"text-center",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/bg_colour_07.gif)",padding:"10px",borderRadius:"3px",marginBottom:"10px"},children:[Object($a.jsx)("img",{src:e.image,style:{height:"120px",objectFit:"contain"}}),Object($a.jsx)("h5",{style:{color:"#000"},children:e.name}),Object($a.jsxs)("span",{className:"badge bg-dark",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/0.png"})," ",e.price_diamonds]}),Object($a.jsx)("br",{}),Object($a.jsxs)("span",{className:"badge bg-primary",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/monedas/5.png"})," ",e.price_th]})]})})}))})]})]})})]})})},qj=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(!0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useCallback)((function(e){a(0),d(null)}),[]);dt(l.rb,f);var g=Object(c.useCallback)((function(e){a(0),d(null)}),[]);dt(l.rg,g);var m=Object(c.useCallback)((function(e){var t=e.getParser();t.roomEnter&&(t.data.habboGroupId>0?(a(t.data.habboGroupId),ea(new l.Oc(t.data.habboGroupId,!1))):(a(0),d(null)))}),[]);dt(l.jc,m);var v=Object(c.useCallback)((function(e){var t=e.getParser();!u||t.groupId!==u.id&&t.groupId!==r||(a(0),d(null))}),[r,u]);dt(l.Bd,v);var p=Object(c.useCallback)((function(e){var t=e.getParser();t.id===r&&d(t)}),[r]);dt(l.Pc,p);var x=u&&u.ownerName===ae().userName;return u?Object($a.jsx)(tc,{className:"nitro-notification-bubble rounded",children:Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:function(e){return h((function(e){return!e}))},children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("group.homeroominfo.title")}),Object($a.jsx)(mc.a,{icon:O?"chevron-up":"chevron-down"})]}),O&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{pointer:!0,alignItems:"center",gap:2,onClick:function(e){return Ia(u.id)},children:[Object($a.jsx)(tc,{className:"group-badge",children:Object($a.jsx)(Gc,{badgeCode:u.badge,isGroup:!0})}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},children:u.title})]}),(u.type!==Tu.PRIVATE||x)&&Object($a.jsx)(dc,{fullWidth:!0,variant:"success",disabled:u.membershipType===Cu.REQUEST_PENDING,onClick:function(){if(x)return ya(u.id);u.type===Tu.PRIVATE&&u.membershipType===Cu.NOT_MEMBER||(u.membershipType!==Cu.MEMBER?Ta(u.id):Ha.confirm(st("group.leaveconfirm.desc"),(function(){ea(new l.Xc(u.id,ae().userId))}),null))},children:st(x?"group.manage":u.type===Tu.PRIVATE?"":u.membershipType===Cu.MEMBER?"group.leave":u.membershipType===Cu.NOT_MEMBER&&u.type===Tu.REGULAR?"group.join":u.membershipType===Cu.REQUEST_PENDING?"group.membershippending":u.membershipType===Cu.NOT_MEMBER&&u.type===Tu.EXCLUSIVE?"group.requestmembership":void 0)})]})]})}):null},Yj=function(e){var t=Object(c.useCallback)((function(e){var t=e.getParser();if(t.userId===ae().userId){var n=st("notifications.text.respect.1"),r=st("notifications.text.respect.2",["count"],[t.respectsReceived.toString()]);Ha.showSingleBubble(n,La.RESPECT),Ha.showSingleBubble(r,La.RESPECT)}}),[]);dt(l.Qf,t);var n=Object(c.useCallback)((function(e){var t=e.getParser();Ha.simpleAlert(t.message.replace(/\\r/g,"\r"),null,null,st("notifications.broadcast.title"))}),[]);dt(l.yd,n);var r=Object(c.useCallback)((function(e){var t=e.getParser(),n=st("achievements.levelup.desc"),r=it(t.data.badgeCode),a=ae().getBadgeUrl(t.data.badgeCode),c="questengine/achievements/"+t.data.category;Ha.showSingleBubble(n+" "+r,La.ACHIEVEMENT,a,c)}),[]);dt(l.c,r);var a=Object(c.useCallback)((function(e){var t=e.getParser();Ha.showClubGiftNotification(t.numGifts)}),[]);dt(l.gb,a);var i=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleModeratorMessage(t.message,t.url)}),[]);dt(l.se,i);var s=Object(c.useCallback)((function(e){var t=e.getParser();if(!(t.amountChanged<=0||5!==t.type)){var n=L("currency.asset.icon.url","").replace("%type%",t.type.toString());Ha.showSingleBubble(st("notifications.text.loyalty.received",["AMOUNT"],[t.amountChanged.toString()]),La.INFO,n)}}),[]);dt(l.f,s);var o=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleUserBannedMessage(t.message)}),[]);dt(l.qi,o);var u=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleHotelClosedMessage(t.openHour,t.openMinute,t.userThrowOutAtClose)}),[]);dt(l.Gd,u);var d=Object(c.useCallback)((function(e){var t=e.getParser(),n=st("notifications.text."+(t.boughtAsGift?"petbought":"petreceived")),r=null,a=G().getRoomObjectPetImage(t.pet.typeId,t.pet.paletteId,parseInt(t.pet.color,16),new l.Oi(135),64,null,!0);a&&(r=a.getImage().src),Ha.showSingleBubble(n,La.PETLEVEL,r)}),[]);dt(l.mf,d);var j=Object(c.useCallback)((function(e){e.getParser();Ha.showModerationDisclaimer()}),[]);dt(l.qg,j);var b=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleMOTD(t.messages)}),[]);dt(l.Wd,b);var O=Object(c.useCallback)((function(e){var t=e.getParser(),n=null,r=G().getRoomObjectPetImage(t.figureData.typeId,t.figureData.paletteId,parseInt(t.figureData.color,16),new l.Oi(135),64,null,!0);r&&(n=r.getImage().src),Ha.showSingleBubble(st("notifications.text.petlevel",["pet_name","level"],[t.petName,t.level.toString()]),La.PETLEVEL,n)}),[]);dt(l.lf,O);var h=Object(c.useCallback)((function(e){var t=e.getParser();Ha.BUBBLES_DISABLED=!t.enabled}),[]);dt(l.Id,h);var f=Object(c.useCallback)((function(e){var t=e.getParser();if(t.products&&t.products.length){var n=t.products[0];n&&Ha.showSingleBubble(st("notifications.text.club_gift.selected"),La.INFO,or.getProductImageUrl(n.productType,n.furniClassId,n.extraParam))}}),[]);dt(l.hb,f);var g=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleHotelMaintenanceMessage(t.minutesUntilMaintenance,t.duration)}),[]);dt(l.Xd,g);var m=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleModeratorCaution(t.message,t.url)}),[]);dt(l.qe,m);var v=Object(c.useCallback)((function(e){var t=e.getParser();Ha.showNotification(t.type,t.parameters)}),[]);dt(l.af,v);var p=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleHotelClosingMessage(t.openMinute)}),[]);dt(l.Hd,p);var x=Object(c.useCallback)((function(e){var t=e.getParser();Ha.handleLoginFailedHotelClosedMessage(t.openHour,t.openMinute)}),[]);return dt(l.Fd,x),null},zj=["title","close"],Kj=function(e){var t=e.title,n=void 0===t?"Nitro":t,r=e.close,a=void 0===r?null:r,c=Object(Za.a)(e,zj);return Object($a.jsx)(ji,Object(bt.a)(Object(bt.a)({title:n,close:a},c),{},{children:Object($a.jsxs)(cc,{children:[Object($a.jsx)(Jc,{center:!0,size:5,children:Object($a.jsx)("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:"\xa0"})}),Object($a.jsxs)(Jc,{size:7,children:[Object($a.jsxs)(Jc,{alignItems:"center",gap:0,children:[Object($a.jsx)(Hi,{bold:!0,fontSize:4,children:"Nitro React"}),Object($a.jsxs)(Hi,{children:["v","2.0.0"]})]}),Object($a.jsxs)(Jc,{alignItems:"center",children:[Object($a.jsxs)(Hi,{children:[Object($a.jsx)("b",{children:"Renderer:"})," v",l.Ze.RENDERER_VERSION]}),Object($a.jsxs)(Jc,{fullWidth:!0,gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return window.open("https://discord.nitrodev.co")},children:"Discord"}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,onClick:function(e){return window.open("https://git.krews.org/nitro/nitro-react")},children:"Git"}),Object($a.jsx)(dc,{fullWidth:!0,onClick:function(e){return window.open("https://git.krews.org/nitro/nitro-react/-/issues")},children:"Bug Report"})]})]})]})]})]})}))},Qj=["item","title","close"],Xj=function(e){var t=e.item,n=void 0===t?null:t,r=e.title,a=void 0===r?e.item&&e.item.title||"":r,i=e.close,s=void 0===i?null:i,l=Object(Za.a)(e,Qj),u=Object(c.useState)(!1),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useCallback)((function(){Ha.openUrl(n.clickUrl),s()}),[n,s]),h=n.alertType===Ua.DEFAULT;return Object($a.jsxs)(ji,Object(bt.a)(Object(bt.a)({className:"animate__animated animate__jackInTheBox",title:a,close:s},l),{},{type:h?Ua.DEFAULT:n.alertType,children:[Object($a.jsxs)(lc,{fullHeight:!0,overflow:"auto",gap:h||n.imageUrl&&!j?2:0,children:[h&&!n.imageUrl&&Object($a.jsx)(tc,{className:"notification-frank flex-shrink-0"}),n.imageUrl&&!j&&Object($a.jsx)("img",{src:n.imageUrl,alt:n.title,onError:function(){b(!0)},className:"align-self-baseline"}),Object($a.jsxs)(tc,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",n.clickUrl&&!h?"justify-content-center":""],children:[n.messages.length>0&&n.messages.map((function(e,t){var n=e.replace(/\r\n|\r|\n/g,"<br />");return Object($a.jsx)(tc,{dangerouslySetInnerHTML:{__html:n}},t)})),n.clickUrl&&n.clickUrl.length>0&&n.imageUrl&&!j&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"my-2 w-100"}),Object($a.jsx)(dc,{onClick:O,className:"align-self-center px-3",children:st(n.clickUrlText)})]})]})]}),(!n.imageUrl||n.imageUrl&&j)&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(Jc,{alignItems:"center",center:!0,gap:0,children:[Object($a.jsx)("hr",{className:"my-2 w-100"}),!n.clickUrl&&Object($a.jsx)(dc,{onClick:s,children:st("generic.close")}),n.clickUrl&&n.clickUrl.length>0&&Object($a.jsx)(dc,{onClick:O,children:st(n.clickUrlText)})]})})]}))},Jj=["item","title","close"],Zj=function(e){var t=e.item,n=void 0===t?null:t,r=e.title,a=void 0===r?e.item&&e.item.title||"":r,i=e.close,s=void 0===i?null:i,l=Object(Za.a)(e,Jj),u=Object(c.useState)(""),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)([]),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useCallback)((function(){Ha.openUrl(n.clickUrl),s()}),[n,s]);Object(c.useEffect)((function(){g(JSON.parse(n.messages[0]))}),[n]);var v=Object(c.useCallback)((function(e){var t=JSON.parse(n.messages[0]);g(t.filter((function(t){return t.includes(e)}))),b(e)}),[n]),p=n.clickUrl&&n.clickUrl.startsWith("event:");return Object($a.jsxs)(ji,Object(bt.a)(Object(bt.a)({title:a,close:s},l),{},{children:[Object($a.jsx)(lc,{fullWidth:!0,alignItems:"center",position:"relative",children:Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("generic.search"),value:j,onChange:function(e){return v(e.target.value)}})}),Object($a.jsx)(Jc,{fullHeight:!0,className:"py-1",overflow:"hidden",children:Object($a.jsx)(sc,{gap:1,columnCount:1,children:f&&f.map((function(e,t){return Object($a.jsx)("span",{children:e},t)}))})}),Object($a.jsx)("hr",{className:"my-2"}),Object($a.jsxs)(Jc,{alignItems:"center",center:!0,gap:1,children:[!p&&!n.clickUrl&&Object($a.jsx)(dc,{onClick:s,children:st("generic.close")}),n.clickUrl&&n.clickUrl.length>0&&Object($a.jsx)(dc,{onClick:m,children:st(n.clickUrlText)})]})]}))},$j=["item","close"],eb=function(e){var t=e.item,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,c=Object(Za.a)(e,$j);return Object($a.jsxs)(mi,Object(bt.a)(Object(bt.a)({fadesOut:!1,className:"flex-column club-gift",close:a},c),{},{children:[Object($a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-2",children:[Object($a.jsx)(Vc,{type:"hc",className:"flex-shrink-0"}),Object($a.jsx)("span",{className:"ms-1",children:st("notifications.text.club_gift")})]}),Object($a.jsxs)("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[Object($a.jsx)("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:function(){return Ha.openUrl(n.linkUrl)},children:st("notifications.button.show_gift_list")}),Object($a.jsx)("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:a,children:st("notifications.button.later")})]})]}))},tb=["item","close"],nb=function(e){var t=e.item,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,c=Object(Za.a)(e,tb),i=n.message.replace(/\r\n|\r|\n/g,"<br />");return Object($a.jsxs)(mi,Object(bt.a)(Object(bt.a)({close:a,gap:2,alignItems:"center",onClick:function(e){return n.linkUrl&&n.linkUrl.length&&Ha.openUrl(n.linkUrl)}},c),{},{children:[Object($a.jsx)(lc,{center:!0,className:"bubble-image-container",children:n.iconUrl&&n.iconUrl.length&&Object($a.jsx)("img",{className:"no-select",src:n.iconUrl,alt:""})}),Object($a.jsx)(Hi,{wrap:!0,variant:"none",style:{color:"var(--test-galaxytext)"},dangerouslySetInnerHTML:{__html:i}})]}))},rb=["item","close"],ab=function(e){var t=e.item,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,c=Object(Za.a)(e,rb),i=n.message,s=void 0===i?null:i,o=n.onConfirm,l=void 0===o?null:o,u=n.onCancel,d=void 0===u?null:u,j=n.confirmText,b=void 0===j?null:j,O=n.cancelText,h=void 0===O?null:O,f=n.title,g=void 0===f?null:f;return Object($a.jsxs)(ji,Object(bt.a)(Object(bt.a)({title:g,close:a},c),{},{type:Ua.ALERT,children:[Object($a.jsx)(lc,{grow:!0,center:!0,children:Object($a.jsx)(Hi,{children:s})}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",onClick:function(){d&&d(),a()},children:h}),Object($a.jsx)(dc,{fullWidth:!0,onClick:function(){l&&l(),a()},children:b})]})]}))},cb=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useCallback)((function(e){var t=new Pa(e.messages,e.alertType,e.clickUrl,e.clickUrlText,e.title,e.imageUrl);a((function(e){return[t].concat(Object(ut.a)(e))}))}),[]);Qt(At.ALERT,f);var g=Object(c.useCallback)((function(e){var t=new Ma(e.message,e.notificationType,e.imageUrl,e.linkUrl);d((function(e){return[t].concat(Object(ut.a)(e))}))}),[]);Qt(wt.NEW_BUBBLE,g);var m=Object(c.useCallback)((function(e){var t=new Fa(e.type,e.message,e.onConfirm,e.onCancel,e.confirmText,e.cancelText,e.title);h((function(e){return[t].concat(Object(ut.a)(e))}))}),[]);Qt(Pt.CONFIRM,m);var v=Object(c.useCallback)((function(e){a((function(t){var n=Object(ut.a)(t),r=n.findIndex((function(t){return e===t}));return r>=0&&n.splice(r,1),n}))}),[]),p=Object(c.useCallback)((function(e){d((function(t){var n=Object(ut.a)(t),r=n.findIndex((function(t){return e===t}));return r>=0&&n.splice(r,1),n}))}),[]),x=Object(c.useCallback)((function(e){h((function(t){var n=Object(ut.a)(t),r=n.findIndex((function(t){return e===t}));return r>=0&&n.splice(r,1),n}))}),[]),_=Object(c.useMemo)((function(){if(!r||!r.length)return null;var e,t=[],n=Object(s.a)(r);try{var a=function(){var n=e.value,r=function(e,t){if(!e)return null;var n={key:e.id,item:e,close:t};switch(e.alertType){case Ua.NITRO:return Object($a.jsx)(Kj,Object(bt.a)({},n));case Ua.SEARCH:return Object($a.jsx)(Zj,Object(bt.a)({},n));default:return Object($a.jsx)(Xj,Object(bt.a)({},n))}}(n,(function(){return v(n)}));t.push(r)};for(n.s();!(e=n.n()).done;)a()}catch(c){n.e(c)}finally{n.f()}return t}),[r,v]),E=Object(c.useMemo)((function(){if(!u||!u.length)return null;var e,t=[],n=Object(s.a)(u);try{var r=function(){var n=e.value,r=function(e,t){if(!e)return null;var n={key:e.id,item:e,close:t};return e.notificationType===La.CLUBGIFT?Object($a.jsx)(eb,Object(bt.a)({},n)):Object($a.jsx)(nb,Object(bt.a)({},n))}(n,(function(){return p(n)}));if(n.notificationType===La.CLUBGIFT)return t.unshift(r),"continue";t.push(r)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return t}),[u,p]),I=Object(c.useMemo)((function(){if(!O||!O.length)return null;var e,t=[],n=Object(s.a)(O);try{var r=function(){var n=e.value,r=function(e,t){if(!e)return null;var n={key:e.id,item:e,close:t};return e.confirmType,Object($a.jsx)(ab,Object(bt.a)({},n))}(n,(function(){return x(n)}));t.push(r)};for(n.s();!(e=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return t}),[O,x]);return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Yj,{}),Object($a.jsx)(Jc,{gap:1,children:E}),I,_]})},ib=function(e){var t=Tn(),n=t.purse,r=void 0===n?null:n,a=(t.hcDisabled,Object(c.useMemo)((function(){return L("system.currency.types",[])}),[])),i=Object(c.useMemo)((function(){return L("currency.display.number.short",!1)}),[]);Object(c.useMemo)((function(){if(!r)return null;var e=31*r.clubPeriods+r.clubDays,t=r.minutesUntilExpiration;return r.clubLevel===l.zd.NO_CLUB?st("purse.clubdays.zero.amount.text"):t>-1&&t<1440?l.Ib.shortFormat(60*t):l.Ib.shortFormat(86400*e)}),[r]);function o(e){return"https://lavvos.eu/swfs/monedas/"+e+".png"}var u=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!r||!r.activityPoints||!r.activityPoints.size)return null;for(var n=Array.from(r.activityPoints.keys()).filter((function(e){return a.indexOf(e)>=0})),c=0;c<e;)n.shift(),c++;c=0;var i,l=[],u=Object(s.a)(n);try{for(u.s();!(i=u.n()).done;){var d=i.value;if(t>-1&&c===t)break;l.push(Object($a.jsx)("div",{className:"currency-container",children:Object($a.jsxs)("p",{style:{textAlign:"left",color:"var(--test-galaxytext)"},children:[Object($a.jsx)("span",{className:"badge bg-dark",children:r.activityPoints.get(d)}),Object($a.jsx)("span",{style:{float:"right"},children:Object($a.jsx)("img",{src:o(d)})})]})})),c++}}catch(j){u.e(j)}finally{u.f()}return l}),[r,a,i]);return r?Object($a.jsxs)(Jc,{alignItems:"end",className:"nitro-purse-container animate__animated animate__backInDown",gap:1,style:{marginTop:"10px"},children:[Object($a.jsx)("img",{src:"https://i.imgur.com/yPUsiUF.gif",style:{objectFit:"contain",height:"45px"},className:"text-center"}),Object($a.jsx)("small",{className:"text-white",children:"Lavvos.eu | Versi\xf3n Beta"}),Object($a.jsx)("div",{className:"currency-container",children:Object($a.jsxs)("p",{style:{textAlign:"left",color:"var(--test-galaxytext)"},children:[Object($a.jsx)("span",{className:"badge bg-dark",children:r.credits}),Object($a.jsx)("span",{style:{float:"right"},children:Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/images/wallet/-1.png"})})]})}),u(0,2),Object($a.jsx)("div",{className:"currency-container",children:Object($a.jsx)("a",{target:"_blank",href:"https://lavvos.eu",children:Object($a.jsxs)("p",{style:{textAlign:"left",color:"var(--test-galaxytext)"},children:[Object($a.jsx)("small",{children:Object($a.jsx)("span",{className:"badge bg-dark",children:"Tienda"})}),Object($a.jsx)("span",{style:{float:"right"},children:Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/catalogue/icon_69.png"})})]})})}),Object($a.jsxs)("div",{children:[Object($a.jsx)("button",{onClick:function(e){return U("help/show")},className:"btn btn-sm currency-container-button",style:{width:"62px",display:"inline-block"},children:Object($a.jsx)("i",{className:"icon icon-help",style:{marginTop:"5px"}})})," \xa0",Object($a.jsx)("button",{onClick:function(e){return U("user-settings/toggle")},className:"btn btn-sm currency-container-button",style:{width:"62px",display:"inline-block"},children:Object($a.jsx)("i",{className:"icon icon-cog",style:{marginTop:"5px",marginBottom:"2px"}})})]})]}):null},sb=function(e){return Object($a.jsx)("div",{className:"nitro-right-side",children:Object($a.jsxs)(Jc,{position:"relative",gap:1,children:[Object($a.jsx)(ib,{}),Object($a.jsx)(qj,{}),Object($a.jsx)(cb,{})]})})},ob=Object(c.createContext)({roomSession:null,eventDispatcher:null,widgetHandler:null}),lb=function(e){return Object($a.jsx)(ob.Provider,{value:e.value,children:e.children})},ub=function(){return Object(c.useContext)(ob)},db=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub(),g=f.roomSession,m=void 0===g?null:g,v=f.widgetHandler,p=void 0===v?null:v,x=f.eventDispatcher,_=void 0===x?null:x,E=Object(c.useCallback)((function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r){var c=l.ib.hslToRGB(((255&e)<<16)+((255&t)<<8)+(255&n));a&&h(c),r.tint=e||t||n?c:0}}),[r]),I=Object(c.useCallback)((function(e){if(u){var t=e>>16&255,n=e>>8&255,r=255&e;u.red=t/255,u.green=n/255,u.blue=r/255}}),[u]),y=Object(c.useCallback)((function(e){if(!l.vg.isRoomPreviewerId(e.roomId))switch(e.type){case l.Dg.ROOM_BACKGROUND_COLOR:var t=e;return void(t.enable?E(t.hue,t.saturation,t.lightness,!0):E(0,0,0,!0));case l.Rf.ROOM_COLOR:var n=e,r=0,a=255;return n.bgOnly||(r=n.color,a=n.brightness),void I(l.ib.hslToRGB((16776960&l.ib.rgbToHSL(r))+a));case l.hg.ROOM_COLOR:p.processEvent(e)}}),[p,E,I]);qt(l.Dg.ROOM_BACKGROUND_COLOR,y),qt(l.Rf.ROOM_COLOR,y),qt(l.hg.ROOM_COLOR,y);var C=Object(c.useCallback)((function(e){switch(e.type){case ke.PREVIEW:return void E(e.hue,e.saturation,e.lightness);case ke.CLEAR_PREVIEW:if(!r)return;return void(r.tint=O)}}),[r,O,E]);return Ht(ke.PREVIEW,_,C),Ht(ke.CLEAR_PREVIEW,_,C),Object(c.useEffect)((function(){if(m){var e=G().getRoomInstanceRenderingCanvas(m.roomId,1);if(e){var t=new l.Ve(l.We.WHITE),n=new l.Ke,r=e.master;t.tint=0,t.width=N().width,t.height=N().height,r.addChildAt(t,0),r.filters=[n],a(t),d(n);var c=function(e){t.width=N().width,t.height=N().height};return window.addEventListener("resize",c),function(){a((function(e){return e&&e.destroy(),null})),d((function(e){return e&&e.destroy(),null})),h(0),window.removeEventListener("resize",c)}}}}),[m]),null},jb=function(e){return Object($a.jsx)("div",{className:"room-spectator"})},bb=["justifyContent","alignItems","classNames"],Ob=function(e){var t=e.justifyContent,n=void 0===t?"center":t,r=e.alignItems,a=void 0===r?"center":r,i=e.classNames,s=void 0===i?[]:i,o=Object(Za.a)(e,bb),l=Object(c.useMemo)((function(){var e=["menu-header","p-1"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]);return Object($a.jsx)(lc,Object(bt.a)({justifyContent:n,alignItems:a,classNames:l},o))},hb=Object(d.a)((function e(){Object(u.a)(this,e)}));hb.GENERIC_SKILL=0,hb.DRESS_UP=1,hb.SETUP_CHAT=2,hb.RANDOM_WALK=3,hb.DANCE=4,hb.CHANGE_BOT_NAME=5,hb.SERVE_BEVERAGE=6,hb.INCLIENT_LINK=7,hb.NUX_PROCEED=8,hb.CHANGE_BOT_MOTTO=9,hb.NUX_TAKE_TOUR=10,hb.NO_PICK_UP=12,hb.NAVIGATOR_SEARCH=14,hb.DONATE_TO_USER=24,hb.DONATE_TO_ALL=25;var fb=function(e){var t=e.chatEvent,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)("${bot.skill.chatter.configuration.text.placeholder}"===n.chat?"":n.chat),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(n.automaticChat),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(n.mixSentences),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(n.chatDelay),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useMemo)((function(){return fe(ue().roomId,n.objectId,n.category,1)}),[n]);return Object($a.jsx)(Dc,{windowPosition:kc.NOTHING,handleSelector:".drag-handler",dragStyle:{top:I.y,left:I.x},children:Object($a.jsxs)(tc,{className:"nitro-context-menu bot-chat",children:[Object($a.jsx)(Ob,{className:"drag-handler",children:st("bot.skill.chatter.configuration.title")}),Object($a.jsxs)(Jc,{className:"p-1",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"white",children:st("bot.skill.chatter.configuration.chat.text")}),Object($a.jsx)("textarea",{className:"form-control form-control-sm",placeholder:st("bot.skill.chatter.configuration.text.placeholder"),value:u,rows:7,onChange:function(e){return d(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(Hi,{fullWidth:!0,variant:"white",children:st("bot.skill.chatter.configuration.automatic.chat")}),Object($a.jsx)("input",{type:"checkbox",className:"form-check-input",checked:O,onChange:function(e){return h(e.target.checked)}})]}),Object($a.jsxs)(lc,{gap:1,alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(Hi,{fullWidth:!0,variant:"white",children:st("bot.skill.chatter.configuration.markov")}),Object($a.jsx)("input",{type:"checkbox",className:"form-check-input",checked:m,onChange:function(e){return v(e.target.checked)}})]}),Object($a.jsxs)(lc,{gap:1,alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(Hi,{fullWidth:!0,variant:"white",children:st("bot.skill.chatter.configuration.chat.delay")}),Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm",value:_,onChange:function(e){return E(e.target.valueAsNumber)}})]})]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"primary",onClick:a,children:st("cancel")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(){var e=u.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r")+";#;"+O+";#;"+_+";#;"+m;ea(new l.C(n.botId,hb.SETUP_CHAT,e)),a()},children:st("save")})]})]})]})})},gb=function(e){var t=e.item,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(-1),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=ub(),_=x.roomSession,E=void 0===_?null:_,I=x.widgetHandler,y=void 0===I?null:I,C=Object(c.useCallback)((function(){h&&G().selectRoomObject(E.roomId,h.roomIndex,l.Cg.UNIT)}),[E,h]),T=Object(c.useCallback)((function(){y.processWidgetMessage(new Rr(Rr.PET_PRODUCT,n.requestRoomObjectId,h.webID)),a()}),[y,n,h,a]),S=Object(c.useMemo)((function(){if(!h||!v)return null;var e=new l.jf(h.figure),t=v.customParams.split(" "),n=parseInt(t[0]);switch(v.specialType){case Un.PET_SHAMPOO:if(t.length<2)return null;var r,a=G().getPetColorResult(n,e.paletteId),c=G().getPetColorResultsForTag(n,t[1]),i=-1,o=Object(s.a)(c);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(u.breed===a.breed){i=parseInt(u.id);break}}}catch(H){o.e(H)}finally{o.f()}return Object($a.jsx)(pi,{typeId:e.typeId,paletteId:i,petColor:e.color,customParts:e.customParts,direction:2});case Un.PET_CUSTOM_PART:if(t.length<4)return null;for(var d=[],j=t[1].split(",").map((function(e){return parseInt(e)})),b=t[2].split(",").map((function(e){return parseInt(e)})),O=t[3].split(",").map((function(e){return parseInt(e)})),f=0;f<j.length;){var g=j[f],m=e.getCustomPart(g),p=O[f];null!=m&&(p=m.paletteId),d.push(new l.if(g,b[f],p)),f++}return Object($a.jsx)(pi,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:d,direction:2});case Un.PET_CUSTOM_PART_SHAMPOO:if(t.length<3)return null;for(var x=[],_=t[1].split(",").map((function(e){return parseInt(e)})),I=t[2].split(",").map((function(e){return parseInt(e)})),y=0;y<_.length;){var C=_[y],T=e.getCustomPart(C),S=-1;null!=T&&(S=T.partId),x.push(new l.if(_[y],S,I[y])),y++}return Object($a.jsx)(pi,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:x,direction:2});case Un.PET_SADDLE:if(t.length<4)return null;for(var N=[],R=t[1].split(",").map((function(e){return parseInt(e)})),k=t[2].split(",").map((function(e){return parseInt(e)})),A=t[3].split(",").map((function(e){return parseInt(e)})),w=0;w<R.length;)N.push(new l.if(R[w],k[w],A[w])),w++;var D,U=Object(s.a)(e.customParts);try{for(U.s();!(D=U.n()).done;){var P=D.value;-1===R.indexOf(P.layerId)&&N.push(P)}}catch(H){U.e(H)}finally{U.f()}return Object($a.jsx)(pi,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:N,direction:2});case Un.MONSTERPLANT_REBREED:case Un.MONSTERPLANT_REVIVAL:case Un.MONSTERPLANT_FERTILIZE:var L="rip",M=G().getRoomObject(E.roomId,h.roomIndex,l.Cg.UNIT);if(M&&"rip"===(L=M.model.getValue(l.Ig.FIGURE_POSTURE))){var F=h.petLevel;L=F<7?"grw".concat(F):"std"}return Object($a.jsx)(pi,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:e.customParts,posture:L,direction:2})}}),[h,v,E]);return Object(c.useEffect)((function(){var e=E.userDataManager.getUserDataByIndex(n.id);f(e);var t=se(E.roomId,n.requestRoomObjectId,l.Cg.FLOOR);if(t){p(t);var r=-1;switch(t.specialType){case Un.PET_SHAMPOO:r=0;break;case Un.PET_CUSTOM_PART:r=1;break;case Un.PET_CUSTOM_PART_SHAMPOO:r=2;break;case Un.PET_SADDLE:r=3;break;case Un.MONSTERPLANT_REVIVAL:r=4;break;case Un.MONSTERPLANT_REBREED:r=5;break;case Un.MONSTERPLANT_FERTILIZE:r=6}j(r)}}),[E,n]),h?Object($a.jsxs)(Pc,{className:"nitro-use-product-confirmation",children:[Object($a.jsx)(Tc,{headerText:st("useproduct.widget.title",["name"],[h.name]),onCloseClick:a}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsx)(Jc,{children:Object($a.jsx)(tc,{pointer:!0,className:"product-preview",onClick:C,children:S})}),Object($a.jsxs)(Jc,{justifyContent:"between",overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:2,children:[0===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.shampoo",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.shampoo")})]}),1===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.custompart",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.custompart")})]}),2===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.custompartshampoo",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.custompartshampoo")})]}),3===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.saddle",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.saddle")})]}),4===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.revive_monsterplant",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.revive_monsterplant")})]}),5===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.rebreed_monsterplant",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.rebreed_monsterplant")})]}),6===d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.fertilize_monsterplant",["productName"],[v.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.fertilize_monsterplant")})]})]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:a,children:st("useproduct.widget.cancel")}),Object($a.jsx)(dc,{variant:"success",onClick:T,children:st("useproduct.widget.use")})]})]})]})})]}):null},mb=["disabled","fullWidth","justifyContent","alignItems","classNames","onClick"],vb=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.fullWidth,a=void 0===r||r,i=e.justifyContent,s=void 0===i?"center":i,o=e.alignItems,l=void 0===o?"center":o,u=e.classNames,d=void 0===u?[]:u,j=e.onClick,b=void 0===j?null:j,O=Object(Za.a)(e,mb),h=Object(c.useMemo)((function(){var e=["menu-item","list-item"];return n&&e.push("disabled"),d.length&&e.push.apply(e,Object(ut.a)(d)),e}),[n,d]);return Object($a.jsx)(lc,Object(bt.a)({fullWidth:a,justifyContent:s,alignItems:l,classNames:h,onClick:function(e){n||b&&b(e)}},O))},pb=["justifyContent","alignItems","classNames","collapsed"],xb=function(e){var t=e.justifyContent,n=void 0===t?"center":t,r=e.alignItems,a=void 0===r?"center":r,i=e.classNames,s=void 0===i?[]:i,o=e.collapsed,l=void 0===o||o,u=Object(Za.a)(e,pb),d=Object(c.useMemo)((function(){var e=["menu-footer"];return s.length&&e.push.apply(e,Object(ut.a)(s)),e}),[s]);return Object($a.jsx)(lc,Object(bt.a)(Object(bt.a)({justifyContent:n,alignItems:a,classNames:d},u),{},{children:Object($a.jsx)(mc.a,{icon:l?"caret-up":"caret-down",className:"align-self-center text-dark"})}))},_b=["objectId","category","userType","fades","close","position","classNames","style","children","collapsable"],Eb=10,Ib=!1,yb=function(e){var t=e.objectId,n=void 0===t?-1:t,r=e.category,a=void 0===r?-1:r,i=e.userType,s=void 0===i?-1:i,u=e.fades,d=void 0!==u&&u,j=e.close,b=void 0===j?null:j,O=e.position,h=void 0===O?"absolute":O,f=e.classNames,g=void 0===f?[]:f,m=e.style,v=void 0===m?{}:m,p=e.children,x=void 0===p?null:p,_=e.collapsable,E=void 0!==_&&_,I=Object(Za.a)(e,_b),y=Object(c.useState)({x:null,y:null}),C=Object(o.a)(y,2),T=C[0],S=C[1],R=Object(c.useState)(null),k=Object(o.a)(R,2),A=k[0],w=k[1],D=Object(c.useState)(-1e6),U=Object(o.a)(D,2),P=U[0],L=U[1],M=Object(c.useState)(1),F=Object(o.a)(M,2),B=F[0],G=F[1],W=Object(c.useState)(!1),V=Object(o.a)(W,2),q=V[0],Y=V[1],z=Object(c.useState)(0),K=Object(o.a)(z,2),Q=(K[0],K[1]),X=Object(c.useState)(!1),J=Object(o.a)(X,2),Z=J[0],$=J[1],ee=Object(c.useRef)(),te=Object(c.useState)(Ib),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],ce=Object(c.useCallback)((function(e){var t=-ee.current.offsetHeight;return s>-1&&(s===l.Gg.USER||s===l.Gg.BOT||s===l.Gg.RENTABLE_BOT)?t+=e.height>50?15:0:t-=14,t}),[s]),ie=Object(c.useCallback)((function(e){var t=e,n=1;if(q){if(Q((function(e){return t+=e})),(n=1*(1-t/75))<=0)return b(),!1;G(n)}return!0}),[q,b]),se=Object(c.useCallback)((function(e,t){if(e&&t&&A){var n=ce(e);A.addValue(t.y-e.top);var r=A.getMax();r<P-3&&(r=P-3);var a=t.y-r,c=~~(t.x-ee.current.offsetWidth/2),i=~~(a+n),s=N().width-ee.current.offsetWidth-Eb,o=N().height-ee.current.offsetHeight-Eb;c<Eb?c=Eb:c>s&&(c=s),i<Eb?i=Eb:i>o&&(i=o),L(r),S({x:c,y:i})}}),[A,P,ce]),oe=Object(c.useCallback)((function(e){if(ee.current&&ie(e)){var t=fe(ue().roomId,n,a),r=ge(ue().roomId,n,a);se(t,r)}}),[n,a,ie,se]),le=Object(c.useMemo)((function(){var e=["nitro-context-menu animate__animated animate__pulse animate__slow animate__infinite"];return re&&e.push("menu-hidden"),e.push(null!==T.x?"visible":"invisible"),g.length&&e.push.apply(e,Object(ut.a)(g)),e}),[T,g,re]),de=Object(c.useMemo)((function(){var e={};return e.left=T.x||0,e.top=T.y||0,e.opacity=B,Object.keys(v).length&&(e=Object(bt.a)(Object(bt.a)({},e),v)),e}),[T,B,v]);Object(c.useEffect)((function(){w(new l.yb(25)),L(-1e6)}),[]),Object(c.useEffect)((function(){var e=!1;return Z||(e=!0,H().add(oe)),function(){e&&H().remove(oe)}}),[Z,oe]),Object(c.useEffect)((function(){if(d){var e=setTimeout((function(){return Y(!0)}),3e3);return function(){return clearTimeout(e)}}}),[d]);return Object($a.jsxs)(tc,Object(bt.a)(Object(bt.a)({innerRef:ee,position:h,classNames:le,style:de,onMouseOver:function(e){return $(!0)},onMouseOut:function(e){return $(!1)}},I),{},{children:[!(E&&Ib)&&x,E&&Object($a.jsx)(xb,{onClick:function(){ae(Ib=!Ib)},collapsed:re})]}))},Cb=function(e){var t=e.item,n=void 0===t?null:t,r=e.updateConfirmingProduct,a=void 0===r?null:r,i=e.close,s=void 0===i?null:i,u=Object(c.useState)(0),d=Object(o.a)(u,2),j=d[0],b=d[1],O=ub().roomSession,h=void 0===O?null:O;Object(c.useEffect)((function(){if(n){var e=se(h.roomId,n.requestRoomObjectId,l.Cg.FLOOR);if(e){var t=0;switch(e.specialType){case Un.PET_SHAMPOO:t=1;break;case Un.PET_CUSTOM_PART:t=2;break;case Un.PET_CUSTOM_PART_SHAMPOO:t=3;break;case Un.PET_SADDLE:t=4;break;case Un.MONSTERPLANT_REVIVAL:t=5;break;case Un.MONSTERPLANT_REBREED:t=6;break;case Un.MONSTERPLANT_FERTILIZE:t=7}b(t)}}}),[h,n]);var f=Object(c.useCallback)((function(e){if(e)switch(e){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":a(n)}}),[n,a]);return Object($a.jsxs)(yb,{objectId:n.id,category:l.Cg.UNIT,userType:l.Gg.PET,close:s,collapsable:!0,children:[Object($a.jsx)(Ob,{children:n.name}),0===j&&Object($a.jsx)(vb,{onClick:function(e){return f("use_product")},children:st("infostand.button.useproduct")}),1===j&&Object($a.jsx)(vb,{onClick:function(e){return f("use_product_shampoo")},children:st("infostand.button.useproduct_shampoo")}),2===j&&Object($a.jsx)(vb,{onClick:function(e){return f("use_product_custom_part")},children:st("infostand.button.useproduct_custom_part")}),3===j&&Object($a.jsx)(vb,{onClick:function(e){return f("use_product_custom_part_shampoo")},children:st("infostand.button.useproduct_custom_part_shampoo")}),4===j&&Object($a.jsxs)($a.Fragment,{children:[n.replace&&Object($a.jsx)(vb,{onClick:function(e){return f("replace_product_saddle")},children:st("infostand.button.replaceproduct_saddle")}),!n.replace&&Object($a.jsx)(vb,{onClick:function(e){return f("use_product_saddle")},children:st("infostand.button.useproduct_saddle")})]}),5===j&&Object($a.jsx)(vb,{onClick:function(e){return f("revive_monsterplant")},children:st("infostand.button.revive_monsterplant")}),6===j&&Object($a.jsx)(vb,{onClick:function(e){return f("rebreed_monsterplant")},children:st("infostand.button.rebreed_monsterplant")}),7===j&&Object($a.jsx)(vb,{onClick:function(e){return f("fertilize_monsterplant")},children:st("infostand.button.fertilize_monsterplant")})]})},Tb=function(e){var t=e.userData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=an().canRequestFriend,g=void 0===f?null:f,m=ub().widgetHandler,v=void 0===m?null:m,p=Object(c.useMemo)((function(){return n.amIOwner&&n.targetRoomControllerLevel<l.Yf.GUEST&&!n.isGuildRoom}),[n]),x=Object(c.useMemo)((function(){return n.amIOwner&&n.targetRoomControllerLevel===l.Yf.GUEST&&!n.isGuildRoom}),[n]),_=Object(c.useMemo)((function(){return n.canBeKicked||n.canBeBanned||n.canBeMuted||p||x}),[p,x,n]),E=Object(c.useMemo)((function(){var e=!1,t=he();if(t){var n=t.model.getValue(l.Ig.FIGURE_CARRY_OBJECT);n>0&&n<999999&&(e=!0)}return e}),[]),I=Object(c.useCallback)((function(e){var t=null,r=null,c=!0;if(e){switch(e){case"moderate":case"back_moderate":c=!1,d(1);break;case"ban":c=!1,d(2);break;case"mute":c=!1,d(3);break;case"ambassador":case"back_ambassador":c=!1,d(4);break;case"ambassador_mute":c=!1,d(5);break;case"back":c=!1,d(0);break;case"whisper":t=kr.WHISPER_USER;break;case"friend":U("friends/request/".concat(n.webID,"/").concat(n.name));break;case"relationship":c=!1,d(6);break;case"respect":var i=O-1;h(i),t=kr.RESPECT_USER,i>0&&(c=!1);break;case"ignore":t=kr.IGNORE_USER;break;case"unignore":t=kr.UNIGNORE_USER;break;case"kick":t=kr.KICK_USER;break;case"ban_hour":t=kr.BAN_USER_HOUR;break;case"ban_day":t=kr.BAN_USER_DAY;break;case"perm_ban":t=kr.BAN_USER_PERM;break;case"mute_2min":case"ambassador_mute_2min":t=kr.MUTE_USER_2MIN;break;case"mute_5min":t=kr.MUTE_USER_5MIN;break;case"mute_10min":t=kr.MUTE_USER_10MIN;break;case"give_rights":t=kr.GIVE_RIGHTS;break;case"remove_rights":t=kr.TAKE_RIGHTS;break;case"trade":t=kr.START_TRADING;break;case"report":t=kr.REPORT_CFH_OTHER;break;case"pass_hand_item":t=kr.PASS_CARRY_ITEM;break;case"ambassador_alert":t=kr.AMBASSADOR_ALERT_USER;break;case"ambassador_kick":t=kr.AMBASSADOR_KICK_USER;break;case"ambassador_mute_10min":t=kr.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":t=kr.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":t=kr.AMBASSADOR_MUTE_USER_18HOUR;break;case"rship_heart":t=kr.RELATIONSHIP_HEART;break;case"rship_smile":t=kr.RELATIONSHIP_SMILE;break;case"rship_bobba":t=kr.RELATIONSHIP_BOBBA;break;case"rship_none":t=kr.RELATIONSHIP_NONE}t&&(r=new kr(t,n.webID)),r&&v.processWidgetMessage(r)}c&&a()}),[n,O,v,a]);return Object(c.useEffect)((function(){d(0),h(n.respectLeft)}),[n]),Object($a.jsxs)(yb,{objectId:n.roomIndex,category:l.Cg.UNIT,userType:n.userType,close:a,collapsable:!0,children:[Object($a.jsx)(Ob,{className:"cursor-pointer",onClick:function(e){return Ga(n.webID)},children:n.name}),0===u&&Object($a.jsxs)($a.Fragment,{children:[g(n.webID)&&Object($a.jsxs)(vb,{onClick:function(e){return I("friend")},children:[Object($a.jsx)("i",{className:"icon icon-agregar"}),st("infostand.button.friend")]}),Object($a.jsxs)(vb,{onClick:function(e){return I("trade")},children:[Object($a.jsx)("i",{className:"icon icon-cambiar"}),st("infostand.button.trade")]}),Object($a.jsxs)(vb,{onClick:function(e){return I("whisper")},children:[Object($a.jsx)("i",{className:"icon icon-susurrar"}),st("infostand.button.whisper")]}),O>0&&Object($a.jsxs)(vb,{onClick:function(e){return I("respect")},children:[Object($a.jsx)("i",{className:"icon icon-respetos"}),st("infostand.button.respect",["count"],[O.toString()])]}),!g(n.webID)&&Object($a.jsxs)(vb,{onClick:function(e){return I("relationship")},children:[Object($a.jsx)("i",{className:"icon icon-relacion"}),st("infostand.link.relationship"),Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"})]}),!n.isIgnored&&Object($a.jsxs)(vb,{onClick:function(e){return I("ignore")},children:[Object($a.jsx)("i",{className:"icon icon-ignorar"}),st("infostand.button.ignore")]}),n.isIgnored&&Object($a.jsxs)(vb,{onClick:function(e){return I("unignore")},children:[Object($a.jsx)("i",{className:"icon icon-ignorar"}),st("infostand.button.unignore")]}),Object($a.jsxs)(vb,{onClick:function(e){return I("report")},children:[Object($a.jsx)("i",{className:"icon icon-reportar"}),st("infostand.button.report")]}),_&&Object($a.jsxs)(vb,{onClick:function(e){return I("moderate")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),Object($a.jsx)("i",{className:"icon icon-moderar"}),st("infostand.link.moderate")]}),n.isAmbassador&&Object($a.jsxs)(vb,{onClick:function(e){return I("ambassador")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),Object($a.jsx)("i",{className:"icon icon-embajador"}),st("infostand.link.ambassador")]}),E&&Object($a.jsx)(vb,{onClick:function(e){return I("pass_hand_item")},children:st("avatar.widget.pass_hand_item")})]}),1===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return I("kick")},children:st("infostand.button.kick")}),Object($a.jsxs)(vb,{onClick:function(e){return I("mute")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),st("infostand.button.mute")]}),Object($a.jsxs)(vb,{onClick:function(e){return I("ban")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),st("infostand.button.ban")]}),p&&Object($a.jsx)(vb,{onClick:function(e){return I("give_rights")},children:st("infostand.button.giverights")}),x&&Object($a.jsx)(vb,{onClick:function(e){return I("remove_rights")},children:st("infostand.button.removerights")}),Object($a.jsxs)(vb,{onClick:function(e){return I("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),2===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return I("ban_hour")},children:st("infostand.button.ban_hour")}),Object($a.jsx)(vb,{onClick:function(e){return I("ban_day")},children:st("infostand.button.ban_day")}),Object($a.jsx)(vb,{onClick:function(e){return I("ban_perm")},children:st("infostand.button.perm_ban")}),Object($a.jsxs)(vb,{onClick:function(e){return I("back_moderate")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),3===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return I("mute_2min")},children:st("infostand.button.mute_2min")}),Object($a.jsx)(vb,{onClick:function(e){return I("mute_5min")},children:st("infostand.button.mute_5min")}),Object($a.jsx)(vb,{onClick:function(e){return I("mute_10min")},children:st("infostand.button.mute_10min")}),Object($a.jsxs)(vb,{onClick:function(e){return I("back_moderate")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),4===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_alert")},children:st("infostand.button.alert")}),Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_kick")},children:st("infostand.button.kick")}),Object($a.jsxs)(vb,{onClick:function(e){return I("ambassador_mute")},children:[st("infostand.button.mute"),Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"})]}),Object($a.jsxs)(vb,{onClick:function(e){return I("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),5===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_mute_2min")},children:st("infostand.button.mute_2min")}),Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_mute_10min")},children:st("infostand.button.mute_10min")}),Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_mute_60min")},children:st("infostand.button.mute_60min")}),Object($a.jsx)(vb,{onClick:function(e){return I("ambassador_mute_18hr")},children:st("infostand.button.mute_18hour")}),Object($a.jsxs)(vb,{onClick:function(e){return I("back_ambassador")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),6===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return I("rship_heart")},children:Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),Object($a.jsx)(vb,{onClick:function(e){return I("rship_smile")},children:Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),Object($a.jsx)(vb,{onClick:function(e){return I("rship_bobba")},children:Object($a.jsx)(tc,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),Object($a.jsx)(vb,{onClick:function(e){return I("rship_none")},children:st("avatar.widget.clear_relationship")}),Object($a.jsxs)(vb,{onClick:function(e){return I("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]})]})},Sb=["classNames"],Nb=function(e){var t=e.classNames,n=void 0===t?[]:t,r=Object(Za.a)(e,Sb),a=Object(c.useMemo)((function(){var e=["menu-list"];return n.length&&e.push.apply(e,Object(ut.a)(n)),e}),[n]);return Object($a.jsx)(Jc,Object(bt.a)({classNames:a},r))},Rb=function(e){e.userId,e.userName;var t=e.roomIndex,n=void 0===t?-1:t,r=ub().eventDispatcher,a=void 0===r?null:r;return Object($a.jsx)(yb,{objectId:n,category:l.Cg.UNIT,close:null,children:Object($a.jsx)(Nb,{children:Object($a.jsx)(vb,{onClick:function(){return a.dispatchEvent(new Le(!1))},children:st("widget.avatar.stop_decorating")})})})},kb=function(e){var t=e.nameData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useMemo)((function(){return n.id!==ae().userId}),[n]);return Object($a.jsx)(yb,{objectId:n.roomIndex,category:n.category,userType:n.userType,fades:i,className:"name-only",close:a,children:Object($a.jsx)("div",{className:"text-shadow",children:n.name})})},Ab=function(e){var t=e.userData,n=void 0===t?null:t,r=e.isDancing,a=void 0!==r&&r,i=e.close,s=void 0===i?null:i,u=Object(c.useState)(a&&je()?1:0),d=Object(o.a)(u,2),j=d[0],b=d[1],O=ub(),h=O.roomSession,f=void 0===h?null:h,g=O.eventDispatcher,m=void 0===g?null:g,v=O.widgetHandler,p=void 0===v?null:v,x=Object(c.useCallback)((function(e){var t=null,r=!0;if(e){if(e.startsWith("sign_")){var a=parseInt(e.split("_")[1]);f.sendSignMessage(a)}else switch(e){case"decorate":m.dispatchEvent(new Le(!0));break;case"change_name":Kt(new It(It.INIT));break;case"change_looks":U("avatar-editor/show");break;case"expressions":r=!1,b(3);break;case"sit":t=new hr(hr.POSTURE_SIT);break;case"stand":t=new hr(hr.POSTURE_STAND);break;case"wave":t=new br(l.n.WAVE);break;case"blow":t=new br(l.n.BLOW);break;case"laugh":t=new br(l.n.LAUGH);break;case"idle":t=new br(l.n.IDLE);break;case"dance_menu":r=!1,b(1);break;case"dance":t=new pr(1);break;case"dance_stop":t=new pr(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":t=new pr(parseInt(e.charAt(e.length-1)));break;case"signs":r=!1,b(4);break;case"back":r=!1,b(0);break;case"drop_carry_item":t=new kr(kr.DROP_CARRY_ITEM,n.webID)}t&&p.processWidgetMessage(t)}r&&s()}),[f,m,p,n,s]),_=Object(c.useMemo)((function(){return n.amIOwner||n.amIAnyRoomController||n.roomControllerLevel>l.Yf.GUEST}),[n]),E=function(){var e=he();return!!e&&77===e.model.getValue(l.Ig.FIGURE_EFFECT)}();return Object($a.jsxs)(yb,{objectId:n.roomIndex,category:l.Cg.UNIT,userType:n.userType,close:s,collapsable:!0,children:[Object($a.jsx)(Ob,{className:"cursor-pointer",onClick:function(e){return Ga(n.webID)},children:n.name}),0===j&&Object($a.jsxs)($a.Fragment,{children:[n.allowNameChange&&Object($a.jsx)(vb,{onClick:function(e){return x("change_name")},children:st("widget.avatar.change_name")}),_&&Object($a.jsx)(vb,{onClick:function(e){return x("decorate")},children:st("widget.avatar.decorate")}),Object($a.jsx)(vb,{onClick:function(e){return x("change_looks")},children:st("widget.memenu.myclothes")}),je()&&!E&&Object($a.jsxs)(vb,{onClick:function(e){return x("dance_menu")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),st("widget.memenu.dance")]}),!a&&!je()&&!E&&Object($a.jsx)(vb,{onClick:function(e){return x("dance")},children:st("widget.memenu.dance")}),a&&!je()&&!E&&Object($a.jsx)(vb,{onClick:function(e){return x("dance_stop")},children:st("widget.memenu.dance.stop")}),Object($a.jsxs)(vb,{onClick:function(e){return x("expressions")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),st("infostand.link.expressions")]}),Object($a.jsxs)(vb,{onClick:function(e){return x("signs")},children:[Object($a.jsx)(mc.a,{icon:"chevron-right",className:"right"}),st("infostand.show.signs")]}),n.carryItem>0&&Object($a.jsx)(vb,{onClick:function(e){return x("drop_carry_item")},children:st("avatar.widget.drop_hand_item")})]}),1===j&&Object($a.jsxs)($a.Fragment,{children:[a&&Object($a.jsx)(vb,{onClick:function(e){return x("dance_stop")},children:st("widget.memenu.dance.stop")}),Object($a.jsx)(vb,{onClick:function(e){return x("dance_1")},children:st("widget.memenu.dance1")}),Object($a.jsx)(vb,{onClick:function(e){return x("dance_2")},children:st("widget.memenu.dance2")}),Object($a.jsx)(vb,{onClick:function(e){return x("dance_3")},children:st("widget.memenu.dance3")}),Object($a.jsx)(vb,{onClick:function(e){return x("dance_4")},children:st("widget.memenu.dance4")}),Object($a.jsxs)(vb,{onClick:function(e){return x("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),3===j&&Object($a.jsxs)($a.Fragment,{children:[oe()===l.k.POSTURE_STAND&&Object($a.jsx)(vb,{onClick:function(e){return x("sit")},children:st("widget.memenu.sit")}),ne()&&Object($a.jsx)(vb,{onClick:function(e){return x("stand")},children:st("widget.memenu.stand")}),re()&&Object($a.jsx)(vb,{onClick:function(e){return x("wave")},children:st("widget.memenu.wave")}),re()&&Object($a.jsxs)(vb,{disabled:!be(),onClick:function(e){return x("laugh")},children:[!be()&&Object($a.jsx)(Vc,{type:"hc"}),st("widget.memenu.laugh")]}),re()&&Object($a.jsxs)(vb,{disabled:!be(),onClick:function(e){return x("blow")},children:[!be()&&Object($a.jsx)(Vc,{type:"hc"}),st("widget.memenu.blow")]}),Object($a.jsx)(vb,{onClick:function(e){return x("idle")},children:st("widget.memenu.idle")}),Object($a.jsxs)(vb,{onClick:function(e){return x("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]}),4===j&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_1")},children:"1"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_2")},children:"2"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_3")},children:"3"})]}),Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_4")},children:"4"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_5")},children:"5"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_6")},children:"6"})]}),Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_7")},children:"7"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_8")},children:"8"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_9")},children:"9"})]}),Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_10")},children:"10"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_11")},children:Object($a.jsx)("i",{className:"icon icon-sign-heart"})}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_12")},children:Object($a.jsx)("i",{className:"icon icon-sign-skull"})})]}),Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_0")},children:"0"}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_13")},children:Object($a.jsx)("i",{className:"icon icon-sign-exclamation"})}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_15")},children:Object($a.jsx)("i",{className:"icon icon-sign-smile"})})]}),Object($a.jsxs)(lc,{className:"menu-list-split-3",children:[Object($a.jsx)(vb,{onClick:function(e){return x("sign_14")},children:Object($a.jsx)("i",{className:"icon icon-sign-soccer"})}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_17")},children:Object($a.jsx)("i",{className:"icon icon-sign-yellow"})}),Object($a.jsx)(vb,{onClick:function(e){return x("sign_16")},children:Object($a.jsx)("i",{className:"icon icon-sign-red"})})]}),Object($a.jsxs)(vb,{onClick:function(e){return x("back")},children:[Object($a.jsx)(mc.a,{icon:"chevron-left",className:"left"}),st("generic.back")]})]})]})},wb=function(e){var t=e.petData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub(),g=f.roomSession,m=void 0===g?null:g,v=f.widgetHandler,p=void 0===v?null:v,x=Object(c.useMemo)((function(){var e=!1,t=he();if(t){var n=t.model.getValue(l.Ig.FIGURE_CARRY_OBJECT);n>0&&n<999999&&(e=!0)}return e}),[]),_=function(e){var t=null,r=null,c=!0;if(e){switch(e){case"respect":var i=0;h((function(e){return i=e-1})),t=kr.RESPECT_PET,i>0&&(c=!1);break;case"treat":t=kr.TREAT_PET;break;case"pass_handitem":t=kr.GIVE_CARRY_ITEM_TO_PET;break;case"train":break;case"pick_up":t=kr.PICKUP_PET;break;case"mount":t=kr.MOUNT_PET;break;case"toggle_riding_permission":t=kr.TOGGLE_PET_RIDING_PERMISSION;break;case"toggle_breeding_permission":t=kr.TOGGLE_PET_BREEDING_PERMISSION;break;case"dismount":t=kr.DISMOUNT_PET;break;case"saddle_off":t=kr.SADDLE_OFF;break;case"breed":0===u||3===u&&(t=kr.REQUEST_BREED_PET);break;case"harvest":t=kr.HARVEST_PET;break;case"revive":t=kr.REVIVE_PET;break;case"compost":t=kr.COMPOST_PLANT;break;case"buy_saddle":U("catalog/open/"+L("catalog.links")["pets.buy_saddle"])}t&&(r=new kr(t,n.id)),r&&p.processWidgetMessage(r)}c&&a()};return Object(c.useEffect)((function(){d((function(e){return n.petType===l.qf.MONSTERPLANT?3:n.saddle&&!n.rider?1:n.rider?2:0})),h(n.respectsPetLeft)}),[n]),Object($a.jsxs)(yb,{objectId:n.roomIndex,category:l.Cg.UNIT,userType:l.Gg.PET,close:a,collapsable:!0,children:[Object($a.jsx)(Ob,{children:n.name}),0===u&&Object($a.jsxs)($a.Fragment,{children:[O>0&&Object($a.jsx)(vb,{onClick:function(e){return _("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])}),Object($a.jsx)(vb,{onClick:function(e){return _("train")},children:st("infostand.button.train")}),Object($a.jsx)(vb,{onClick:function(e){return _("pick_up")},children:st("infostand.button.pickup")}),n.petType===l.qf.HORSE&&Object($a.jsx)(vb,{onClick:function(e){return _("buy_saddle")},children:st("infostand.button.buy_saddle")}),[l.qf.BEAR,l.qf.TERRIER,l.qf.CAT,l.qf.DOG,l.qf.PIG].indexOf(n.petType)>-1&&Object($a.jsx)(vb,{onClick:function(e){return _("breed")},children:st("infostand.button.breed")})]}),1===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return _("mount")},children:st("infostand.button.mount")}),Object($a.jsxs)(vb,{onClick:function(e){return _("toggle_riding_permission")},gap:1,children:[Object($a.jsx)("input",{type:"checkbox",checked:!!n.publiclyRideable,readOnly:!0}),st("infostand.button.toggle_riding_permission")]}),O>0&&Object($a.jsx)(vb,{onClick:function(e){return _("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])}),Object($a.jsx)(vb,{onClick:function(e){return _("train")},children:st("infostand.button.train")}),Object($a.jsx)(vb,{onClick:function(e){return _("pick_up")},children:st("infostand.button.pickup")}),Object($a.jsx)(vb,{onClick:function(e){return _("saddle_off")},children:st("infostand.button.saddleoff")})]}),2===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return _("dismount")},children:st("infostand.button.dismount")}),O>0&&Object($a.jsx)(vb,{onClick:function(e){return _("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])})]}),3===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return _("pick_up")},children:st("infostand.button.pickup")}),n.dead&&Object($a.jsx)(vb,{onClick:function(e){return _("revive")},children:st("infostand.button.revive")}),m.isRoomOwner&&Object($a.jsx)(vb,{onClick:function(e){return _("compost")},children:st("infostand.button.compost")}),!n.dead&&n.energy/n.maximumEnergy<.98&&Object($a.jsx)(vb,{onClick:function(e){return _("treat")},children:st("infostand.button.treat")}),!n.dead&&n.level===n.maximumLevel&&n.breedable&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(vb,{onClick:function(e){return _("toggle_breeding_permission")},gap:1,children:[Object($a.jsx)("input",{type:"checkbox",checked:n.publiclyBreedable,readOnly:!0}),st("infostand.button.toggle_breeding_permission")]}),Object($a.jsx)(vb,{onClick:function(e){return _("breed")},children:st("infostand.button.breed")})]})]}),x&&Object($a.jsx)(vb,{onClick:function(e){return _("pass_hand_item")},children:st("infostand.button.pass_hand_item")})]})},Db=function(e){var t=e.petData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub(),g=f.roomSession,m=void 0===g?null:g,v=f.widgetHandler,p=void 0===v?null:v,x=Object(c.useMemo)((function(){return m.isRoomOwner||m.controllerLevel>=l.Yf.GUEST||ae().isModerator}),[m]),_=Object(c.useMemo)((function(){var e=!1,t=he();if(t){var n=t.model.getValue(l.Ig.FIGURE_CARRY_OBJECT);n>0&&n<999999&&(e=!0)}return e}),[]),E=function(e){var t=null,r=null,c=!0;if(e){switch(e){case"respect":var i=0;h((function(e){return i=e-1})),t=kr.RESPECT_PET,i>0&&(c=!1);break;case"treat":t=kr.TREAT_PET;break;case"pass_handitem":t=kr.GIVE_CARRY_ITEM_TO_PET;break;case"pick_up":t=kr.PICKUP_PET;break;case"mount":t=kr.MOUNT_PET;break;case"dismount":t=kr.DISMOUNT_PET}t&&(r=new kr(t,n.id)),r&&p.processWidgetMessage(r)}c&&a()};return Object(c.useEffect)((function(){d((function(e){return n.petType===l.qf.MONSTERPLANT?3:n.saddle&&!n.rider?1:n.rider?2:0})),h(n.respectsPetLeft)}),[n]),Object($a.jsxs)(yb,{objectId:n.roomIndex,category:l.Cg.UNIT,userType:l.Gg.PET,close:a,collapsable:!0,children:[Object($a.jsx)(Ob,{children:n.name}),0===u&&O>0&&Object($a.jsx)(vb,{onClick:function(e){return E("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])}),1===u&&Object($a.jsxs)($a.Fragment,{children:[!!n.publiclyRideable&&Object($a.jsx)(vb,{onClick:function(e){return E("mount")},children:st("infostand.button.mount")}),O>0&&Object($a.jsx)(vb,{onClick:function(e){return E("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])})]}),2===u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(vb,{onClick:function(e){return E("dismount")},children:st("infostand.button.dismount")}),O>0&&Object($a.jsx)(vb,{onClick:function(e){return E("respect")},children:st("infostand.button.petrespect",["count"],[O.toString()])})]}),3===u&&!n.dead&&n.energy/n.maximumEnergy<.98&&Object($a.jsx)(vb,{onClick:function(e){return E("treat")},children:st("infostand.button.treat")}),x&&Object($a.jsx)(vb,{onClick:function(e){return E("pick_up")},children:st("infostand.button.pickup")}),_&&Object($a.jsx)(vb,{onClick:function(e){return E("pass_hand_item")},children:st("infostand.button.pass_hand_item")})]})},Ub=function(e){var t=e.rentableBotData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(""),g=Object(o.a)(f,2),m=g[0],v=g[1],p=ub().eventDispatcher,x=void 0===p?null:p,_=Object(c.useCallback)((function(e){var t=e.getParser();if(t.botId===n.webID)switch(t.commandId){case hb.CHANGE_BOT_NAME:return h(t.data),void d(1);case hb.CHANGE_BOT_MOTTO:return v(t.data),void d(2);case hb.SETUP_CHAT:var r=t.data,c=r.split(-1===r.indexOf(";#;")?";":";#;");return void(3!==c.length&&4!==c.length||(x.dispatchEvent(new Ke(n.roomIndex,l.Cg.UNIT,n.webID,c[0],"true"===c[1].toLowerCase()||"1"===c[1],parseInt(c[2]),!!c[3]&&("true"===c[3].toLowerCase()||"1"===c[3]))),a()))}}),[n,x,a]);dt(l.y,_);var E=function(e){return ea(new l.Mf(n.webID,e))},I=function(e){var t=!0;if(e)switch(e){case"donate_to_all":E(hb.DONATE_TO_ALL),ea(new l.C(n.webID,hb.DONATE_TO_ALL,""));break;case"donate_to_user":E(hb.DONATE_TO_USER),ea(new l.C(n.webID,hb.DONATE_TO_USER,""));break;case"change_bot_name":E(hb.CHANGE_BOT_NAME),t=!1;break;case"save_bot_name":ea(new l.C(n.webID,hb.CHANGE_BOT_NAME,O));break;case"change_bot_motto":E(hb.CHANGE_BOT_MOTTO),t=!1;break;case"save_bot_motto":ea(new l.C(n.webID,hb.CHANGE_BOT_MOTTO,m));break;case"dress_up":ea(new l.C(n.webID,hb.DRESS_UP,""));break;case"random_walk":ea(new l.C(n.webID,hb.RANDOM_WALK,""));break;case"setup_chat":E(hb.SETUP_CHAT),t=!1;break;case"dance":ea(new l.C(n.webID,hb.DANCE,""));break;case"nux_take_tour":N().createLinkEvent("help/tour"),ea(new l.C(n.webID,hb.NUX_TAKE_TOUR,""));break;case"pick":ea(new l.A(n.webID))}t&&a()};Object(c.useEffect)((function(){d(0)}),[n]);var y=n.amIOwner||n.amIAnyRoomController;return Object($a.jsxs)(yb,{objectId:n.roomIndex,category:l.Cg.UNIT,userType:l.Gg.RENTABLE_BOT,close:a,collapsable:!0,children:[Object($a.jsx)(Ob,{children:n.name}),0===u&&y&&Object($a.jsxs)($a.Fragment,{children:[n.botSkills.indexOf(hb.DONATE_TO_ALL)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("donate_to_all")},children:st("avatar.widget.donate_to_all")}),n.botSkills.indexOf(hb.DONATE_TO_USER)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("donate_to_user")},children:st("avatar.widget.donate_to_user")}),n.botSkills.indexOf(hb.CHANGE_BOT_NAME)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("change_bot_name")},children:st("avatar.widget.change_bot_name")}),n.botSkills.indexOf(hb.CHANGE_BOT_MOTTO)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("change_bot_motto")},children:st("avatar.widget.change_bot_motto")}),n.botSkills.indexOf(hb.DRESS_UP)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("dress_up")},children:st("avatar.widget.dress_up")}),n.botSkills.indexOf(hb.RANDOM_WALK)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("random_walk")},children:st("avatar.widget.random_walk")}),n.botSkills.indexOf(hb.SETUP_CHAT)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("setup_chat")},children:st("avatar.widget.setup_chat")}),n.botSkills.indexOf(hb.DANCE)>=0&&Object($a.jsx)(vb,{onClick:function(e){return I("dance")},children:st("avatar.widget.dance")}),-1===n.botSkills.indexOf(hb.NO_PICK_UP)&&Object($a.jsx)(vb,{onClick:function(e){return I("pick")},children:st("avatar.widget.pick_up")})]}),1===u&&Object($a.jsxs)(Jc,{className:"menu-item",onClick:null,gap:1,children:[Object($a.jsx)(Hi,{variant:"white",children:st("bot.skill.name.configuration.new.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:O,maxLength:L("bot.name.max.length",15),onChange:function(e){return h(e.target.value)}}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"secondary",onClick:function(e){return I(null)},children:st("cancel")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return I("save_bot_name")},children:st("save")})]})]}),2===u&&Object($a.jsxs)(Jc,{className:"menu-item",onClick:null,gap:1,children:[Object($a.jsx)(Hi,{variant:"white",children:st("bot.skill.name.configuration.new.motto")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:m,maxLength:L("motto.max.length",38),onChange:function(e){return v(e.target.value)}}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"secondary",onClick:function(e){return I(null)},children:st("cancel")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return I("save_bot_motto")},children:st("save")})]})]})]})},Pb=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)([]),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(null),_=Object(o.a)(x,2),E=_[0],I=_[1],y=Object(c.useState)(!1),C=Object(o.a)(y,2),T=C[0],S=C[1],N=Object(c.useState)(!1),R=Object(o.a)(N,2),k=R[0],A=R[1],w=Object(c.useState)(!1),D=Object(o.a)(w,2),U=D[0],P=D[1],L=Object(c.useState)(null),M=Object(o.a)(L,2),F=M[0],H=M[1],B=ub(),G=(B.roomSession,B.eventDispatcher),W=void 0===G?null:G,V=B.widgetHandler,q=void 0===V?null:V,Y=Object(c.useCallback)((function(e){j((function(t){var n=Object(ut.a)(t);return n.splice(e,1),n}))}),[]),z=Object(c.useCallback)((function(e){f((function(t){var n=Object(ut.a)(t),r=n.splice(e,1)[0];return v===r&&p(null),n}))}),[v]),K=Object(c.useCallback)((function(){f([])}),[]),Q=Object(c.useCallback)((function(){I(null)}),[]),X=Object(c.useCallback)((function(){a(null)}),[]),J=Object(c.useCallback)((function(e){p(e),f([])}),[]),Z=Object(c.useCallback)((function(e){switch(e.type){case Qe.NORMAL_MODE:return void(T&&S(!1));case Qe.GAME_MODE:return void(T||S(!0))}}),[T]);Ht(Qe.NORMAL_MODE,W,Z),Ht(Qe.GAME_MODE,W,Z);var $=Object(c.useCallback)((function(e){if(r&&e.id===r.id&&a(null),e.category===l.Cg.UNIT){var t=d.findIndex((function(t){return t.roomIndex===e.id}));t>-1&&Y(t),h.length&&f((function(t){return t.filter((function(t){return t.id!==e.id}))}))}else e.category===l.Cg.FLOOR&&h.length&&f((function(t){return t.filter((function(t){return t.requestRoomObjectId!==e.id}))}));E&&(E instanceof Ge?E.id===e.id&&Q():E instanceof qe||E instanceof Ve?E.roomIndex===e.id&&Q():E instanceof We&&E.roomIndex===e.id&&Q())}),[r,E,d,h,Y,Q]);Ht(Xe.USER_REMOVED,W,$),Ht(Xe.FURNI_REMOVED,W,$);var ee=Object(c.useCallback)((function(e){switch(e.type){case Xe.OBJECT_ROLL_OVER:var t=e;if(E)return;return void q.processWidgetMessage(new Nr(Nr.GET_OBJECT_NAME,t.id,t.category));case Xe.OBJECT_ROLL_OUT:var n=e;if(!r||r.roomIndex!==n.id)return;return void a(null)}}),[E,r,q]);Ht(Xe.OBJECT_ROLL_OVER,W,ee),Ht(Xe.OBJECT_ROLL_OUT,W,ee);var te=Object(c.useCallback)((function(e){E&&Q(),h.length&&f([])}),[E,h,Q]);Ht(Xe.OBJECT_DESELECTED,W,te);var ne=Object(c.useCallback)((function(e){e.category===l.Cg.UNIT&&(a(e),K())}),[K]);Ht(Ne.TYPE,W,ne);var re=Object(c.useCallback)((function(e){r&&a(null),e.type===Ge.FURNI?Q():I(e),K()}),[r,Q,K]);Ht(Ge.FURNI,W,re),Ht(qe.OWN_USER,W,re),Ht(qe.PEER,W,re),Ht(qe.BOT,W,re),Ht(Ve.RENTABLE_BOT,W,re),Ht(We.PET_INFO,W,re);var ce=Object(c.useCallback)((function(e){A(e.isDancing)}),[]);Ht(Pe.UPDATE_DANCE,W,ce);var ie=Object(c.useCallback)((function(e){H(e)}),[]);Ht(Ke.UPDATE_CHAT,W,ie);var se=Object(c.useCallback)((function(e){p(null),f((function(t){var n,r=Object(ut.a)(t),a=Object(s.a)(e.items);try{var c=function(){var e=n.value,t=r.findIndex((function(t){return t.id===e.id}));t>-1&&r.splice(t,1),r.push(e)};for(a.s();!(n=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return r}))}),[]);Ht(et.USE_PRODUCT_BUBBLES,W,se);var oe=Object(c.useCallback)((function(e){P(e.isDecorating)}),[]);Ht(Le.UPDATE_DECORATE,W,oe);var le=Object(c.useMemo)((function(){if(ue().isDecorating=U,!U)return null;var e=ae().userId,t=ae().userName,n=ue().ownRoomIndex;return Object($a.jsx)(Rb,{userId:e,userName:t,roomIndex:n})}),[U]),de=Object(c.useMemo)((function(){if(T)return null;if(le)return le;if(r){var e=d.findIndex((function(e){return e.roomIndex===r.roomIndex}));return e>-1&&Y(e),Object($a.jsx)(kb,{nameData:r,close:X})}if(E)switch(E.type){case qe.OWN_USER:case qe.PEER:var t=E;if(t.isSpectatorMode)return null;var n=d.findIndex((function(e){return e.roomIndex===t.roomIndex}));return n>-1&&Y(n),t.isOwnUser?l.og.isRunning()?null:Object($a.jsx)(Ab,{userData:t,isDancing:k,close:Q}):Object($a.jsx)(Tb,{userData:t,close:Q});case We.PET_INFO:var a=E;return a.isOwner?Object($a.jsx)(wb,{petData:a,close:Q}):Object($a.jsx)(Db,{petData:a,close:Q});case Ve.RENTABLE_BOT:return Object($a.jsx)(Ub,{rentableBotData:E,close:Q});case Ge.FURNI:return null}return null}),[T,le,r,d,k,E,X,Q,Y]);return Object($a.jsxs)($a.Fragment,{children:[de,d.length>0&&d.map((function(e,t){return Object($a.jsx)(kb,{nameData:e,close:function(){return Y(t)}},t)})),h.length>0&&h.map((function(e,t){return Object($a.jsx)(Cb,{item:e,updateConfirmingProduct:J,close:function(){return z(t)}},e.id)})),F&&Object($a.jsx)(fb,{chatEvent:F,close:function(){return H(null)}}),v&&Object($a.jsx)(gb,{item:v,close:function(){return p(null)}})]})},Lb=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=ub(),f=(h.eventDispatcher,h.widgetHandler),g=void 0===f?null:f;Object(c.useEffect)((function(){fetch("https://int.lavvos.eu/?type=getEmojis").then((function(e){return e.json()})).then((function(e){O(e)}))}),[]);var m=Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;g.processWidgetMessage(new fr(fr.MESSAGE_CHAT,e,t,n,r)),u(!1)}),[g]);return Object(c.useEffect)((function(){l||a(null)}),[l]),Object($a.jsx)($a.Fragment,{children:Object($a.jsx)(tc,{pointer:!0,className:"icon chatemojis-icon",onClick:function(e){var t=!0;u((function(e){return t=!e})),console.log("Lavvos Emojis List"),t&&a(e.target)},style:{marginLeft:"13px",display:"inline-block"},children:Object($a.jsx)(kj.a,{show:l,target:r,placement:"top",children:Object($a.jsx)(Qu.a,{className:"nitro-chat-sticker-selector-container image-rendering-pixelated",children:Object($a.jsx)(Ec,{overflow:"hidden",className:"bg-transparent",children:null!=b?Object($a.jsx)($a.Fragment,{children:Object($a.jsx)(cc,{columnCount:4,overflow:"auto",children:b.map((function(e){return Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(tc,{className:"text-center",onClick:function(t){return function(e,t){m(t,fr.CHAT_DEFAULT,"",0);var n=!0;u((function(e){return n=!e})),console.log("Lavvos Emojis List"),n&&a(e.target)}(t,e.key)},children:[Object($a.jsx)("img",{style:{height:"22px",width:"22px"},src:(t=e.id,"https://lavvos.eu/swfs/c_images/emojis/"+t+".png")}),Object($a.jsx)("br",{}),Object($a.jsx)("span",{className:"badge bg-dark",children:e.key})]},e.id)});var t}))})}):Object($a.jsx)($a.Fragment,{})})})})})})},Mb=n(194),Fb=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=(j[1],Object(c.useState)(null)),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(!0),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(!1),E=Object(o.a)(_,2),I=E[0],y=E[1],C=ub(),T=(C.eventDispatcher,C.widgetHandler),S=void 0===T?null:T,N=!1;function R(){return null==b?null:Object($a.jsx)("div",{})}function k(){return null==f?null:Object($a.jsx)(cc,{columnCount:4,overflow:"auto",id:"giphyStickers",children:f.data.map((function(e){return Object($a.jsx)(tc,{children:Object($a.jsx)("img",{src:e.images.downsized_medium.url,width:50,height:50,className:"sticker-img",onClick:function(t){return function(e){var t=e.split(".gif");A(t[0],fr.CHAT_DEFAULT,"",2)}(e.images.fixed_height_small.url)}})},e.images.downsized_medium.url)}))})}var A=Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;S.processWidgetMessage(new fr(fr.MESSAGE_CHAT,e,t,n,r)),u(!1)}),[S]);var w="";return Object(c.useEffect)((function(){l||a(null)}),[l]),Object($a.jsx)($a.Fragment,{children:Object($a.jsx)(tc,{pointer:!0,className:"icon chatstickers-icon",onClick:function(e){if(!N){var t=!0;u((function(e){return t=!e})),t&&a(e.target),N=!1}},style:{marginLeft:"13px",display:"inline-block"},children:Object($a.jsx)(kj.a,{show:l,target:r,placement:"top",children:Object($a.jsx)(Qu.a,{className:"nitro-chat-sticker-selector-container image-rendering-pixelated",children:Object($a.jsxs)(Ec,{overflow:"hidden",className:"bg-transparent",children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{onClick:function(e){N=!0},onChange:function(e){return t=e.target.value,void(w=t);var t},type:"text",className:"form-control form-control-sm",placeholder:st("generic.search")}),Object($a.jsx)(Mb.a,{variant:"primary",className:"stickers-search-button",onClick:function(e){return function(e){if(N=!0,0==e.length)return y(!1),void x(!0);fetch("https://api.giphy.com/v1/gifs/search?api_key=4qwMrfzYMYVl1lhhl3wDaVxDNWAzAv6s&q="+e+"&limit=25&offset=0&rating=g&lang=en").then((function(e){return e.json()})).then((function(e){g(e),x(!1),y(!0)}))}(w)},children:Object($a.jsx)(mc.a,{icon:"search"})})]}),p?Object($a.jsx)(R,{}):null,I?Object($a.jsx)(k,{}):null]})})})})})},Hb=function(e){e.chatStyleId;var t=e.chatStyleIds,n=void 0===t?null:t,r=e.selectChatStyleId,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),b=j[0],O=j[1];return Object(c.useEffect)((function(){b||u(null)}),[b]),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(tc,{pointer:!0,className:"icon chatstyles-icon",onClick:function(e){var t=!1;O((function(e){return t=!e})),t&&u(e.target)}}),Object($a.jsx)(kj.a,{show:b,target:l,placement:"top",children:Object($a.jsx)(Qu.a,{className:"nitro-chat-style-selector-container image-rendering-pixelated",children:Object($a.jsx)(Ec,{overflow:"hidden",className:"bg-transparent",children:Object($a.jsx)(cc,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map((function(e){return Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:function(t){return function(e){a(e),O(!1)}(e)},children:Object($a.jsx)(tc,{className:"bubble-container",children:Object($a.jsx)(tc,{className:"chat-bubble bubble-".concat(e),children:"\xa0"})},e)},e)}))})})})})]})},Bb=function(e){var t,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],i=r[1],u=Object(c.useState)(""),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(!1),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(!1),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useState)(ae().chatStyle),T=Object(o.a)(C,2),S=T[0],N=T[1],R=Object(c.useState)(!1),k=Object(o.a)(R,2),A=k[0],w=k[1],D=Object(c.useState)(!1),U=Object(o.a)(D,2),P=U[0],M=U[1],F=Object(c.useState)(0),H=Object(o.a)(F,2),B=H[0],G=H[1],W=ub(),V=W.eventDispatcher,q=void 0===V?null:V,Y=W.widgetHandler,z=void 0===Y?null:Y,K=Object(c.useRef)(),Q=[],X=!1;var J=Object(c.useMemo)((function(){return st("widgets.chatinput.mode.whisper")}),[]),Z=Object(c.useMemo)((function(){return st("widgets.chatinput.mode.shout")}),[]),$=Object(c.useMemo)((function(){return st("widgets.chatinput.mode.speak")}),[]),ee=Object(c.useMemo)((function(){return L("chat.input.maxlength",100)}),[]),te=Object(c.useCallback)((function(){var e=document.activeElement;return!!e&&((!K||K.current!==e)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}),[K]),ne=Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;z.processWidgetMessage(new fr(fr.MESSAGE_CHAT,e,t,n,r))}),[z]),re=Object(c.useCallback)((function(){K.current.focus(),K.current.setSelectionRange(2*K.current.value.length,2*K.current.value.length)}),[K]),ie=Object(c.useCallback)((function(){i((function(e){return e===J&&j.length?"".concat(e," ").concat(j):e}))}),[j,J]),se=Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(""),z.processWidgetMessage(new fr(fr.MESSAGE_CHAT,e,t,n,r))}),[z]),oe=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&""!==e){var n=t?fr.CHAT_SHOUT:fr.CHAT_DEFAULT,r=e,a=r.split(" "),c="",s="";switch(a[0]){case J:n=fr.CHAT_WHISPER,c=a[1],s=J+" "+c+" ",a.shift(),a.shift();break;case Z:n=fr.CHAT_SHOUT,a.shift();break;case $:n=fr.CHAT_DEFAULT,a.shift()}r=a.join(" "),g(!1),y(!1),r.length<=ee&&(A&&(ae().sendChatStyleUpdate(S),w(!1)),se(r,n,c,S)),i(s)}}),[J,Z,$,ee,S,A,se]),le=Object(c.useCallback)((function(e){e&&e.length?(g(!0),y(!0)):g(!1),i(e)}),[]),de=Object(c.useCallback)((function(e){if(!P&&K.current&&!te()){document.activeElement!==K.current&&re();var t=e.target.value;switch(e.key){case" ":case"Space":return void ie();case"NumpadEnter":case"Enter":return void oe(t,e.shiftKey);case"Backspace":if(t){var n=t.split(" ");n[0]===J&&3===n.length&&""===n[2]&&i("")}return}}}),[P,K,J,te,re,ie,oe]),je=Object(c.useCallback)((function(e){b("")}),[]);Ht(Xe.OBJECT_DESELECTED,q,je);var be=Object(c.useCallback)((function(e){b(e.name)}),[]);Ht(qe.PEER,q,be);var Oe=Object(c.useCallback)((function(e){switch(e.chatMode){case we.WHISPER:return void i("".concat(J," ").concat(e.userName," "));case we.SHOUT:return}}),[J]);Ht(we.CHAT_INPUT_CONTENT,q,Oe);var he=Object(c.useCallback)((function(e){M(!0),G(e.seconds)}),[]);Ht(Se.FLOOD_CONTROL,q,he);var fe=Object(c.useCallback)((function(e){N(e),w(!0)}),[]),ge=Object(c.useMemo)((function(){var e,t=[],n=L("chat.styles"),r=Object(s.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value;a&&(a.minRank>0?ae().hasSecurity(a.minRank)&&t.push(a.styleId):a.isSystemStyle&&ae().hasSecurity(l.Yf.MODERATOR)?t.push(a.styleId):L("chat.styles.disabled").indexOf(a.styleId)>=0||(a.isHcOnly&&ce()>=l.zd.CLUB||a.isAmbassadorOnly&&ae().isAmbassador?t.push(a.styleId):a.isHcOnly||a.isAmbassadorOnly||t.push(a.styleId)))}}catch(c){r.e(c)}finally{r.f()}return t}),[]);return Object(c.useEffect)((function(){f?p||(x(!0),z.processWidgetMessage(new mr(f))):p&&(x(!1),z.processWidgetMessage(new mr(f)))}),[z,f,p]),Object(c.useEffect)((function(){if(I){var e=null;return I&&(e=setTimeout((function(){y(!1),g(!1)}),1e4)),function(){return clearTimeout(e)}}}),[I]),Object(c.useEffect)((function(){if(P){var e=0,t=setInterval((function(){G((function(t){return e=(t||0)-1})),e<0&&(clearInterval(t),M(!1))}),1e3);return function(){return clearInterval(t)}}}),[P]),Object(c.useEffect)((function(){return document.body.addEventListener("keydown",de),function(){document.body.removeEventListener("keydown",de)}}),[de]),Object(c.useEffect)((function(){K.current&&(K.current.parentElement.dataset.value=a)}),[a]),ue().isSpectator?null:Object(Rc.createPortal)(Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)("div",{id:"submenuChat",className:"animate__animated animate__fadeInUp",style:{paddingLeft:"16px",paddingRight:"13px",paddingTop:"11px",paddingBottom:"7px",position:"absolute",backgroundColor:"rgba(43, 43, 43, 0.8)",top:"-48px",borderRadius:"7px",display:"none",border:"1px #fff solid"},children:[Object($a.jsx)(Hb,{chatStyleId:S,chatStyleIds:ge,selectChatStyleId:fe}),Object($a.jsx)(Fb,{}),Object($a.jsx)(Lb,{}),Object($a.jsx)("div",{id:"microphoneOn",onClick:function(e){return function(){var e=document.getElementById("microphoneOn"),n=document.getElementById("microphoneOff"),r=document.getElementById("deleteAudio");e.style.display="none",n.style.display="inline-block",r.style.display="inline-block",navigator.mediaDevices.getUserMedia({audio:!0}).then((function(a){(t=new MediaRecorder(a)).start(),t.addEventListener("dataavailable",(function(e){Q.push(e.data)})),t.addEventListener("stop",(function(){if(e.style.display="inline-block",n.style.display="none",r.style.display="none",!X){var t=new Blob(Q);if(t.size<378461){var a=new FormData;a.append("audio",t),fetch("https://int.lavvos.eu/audio.php",{method:"POST",body:a}).then((function(e){return e.text()})).then((function(e){ne("https://int.lavvos.eu/audios/"+e+".mp3",fr.CHAT_DEFAULT,"",0)}))}else ne("No puedes subir un audio tan largo.",fr.CHAT_DEFAULT,"",0)}X=!1,Q=[]}))}))}()},style:{marginLeft:"10px",display:"inline-block"},className:"icon chatmicrophone-on-icon"}),Object($a.jsx)("div",{id:"microphoneOff",onClick:function(e){t.stop()},style:{marginLeft:"10px",display:"none"},className:"icon chatmicrophone-off-icon"}),Object($a.jsx)("div",{id:"deleteAudio",onClick:function(e){return X=!0,void t.stop()},style:{marginLeft:"10px",display:"none"},className:"icon chatdeleteaudio-icon"}),Object($a.jsx)("div",{onClick:function(){document.getElementById("submenuChat").style.display="none"},className:"icon chatequis-icon",style:{marginLeft:"10px",display:"inline-block"}})]}),Object($a.jsx)("div",{className:"nitro-chat-input-container",style:{height:"49px"},children:Object($a.jsxs)("div",{className:"chat-size input-sizer align-items-center",style:{justifyContent:"start"},children:[Object($a.jsx)("div",{onClick:function(){"block"==document.getElementById("submenuChat").style.display?document.getElementById("submenuChat").style.display="none":document.getElementById("submenuChat").style.display="block"},className:"icon chatmas-icon",style:{marginRight:"3px"}}),!P&&Object($a.jsx)("input",{style:{marginLeft:"5px"},ref:K,type:"text",className:"chat-input",placeholder:st("widgets.chatinput.default"),value:a,maxLength:ee,onChange:function(e){return le(e.target.value)},onMouseDown:function(e){return re()}}),P&&Object($a.jsxs)(Hi,{variant:"danger",children:[st("chat.input.alert.flood",["time"],[B.toString()])," "]})]})})]}),document.getElementById("toolbar-chat-input-container"))};var Gb=function(e){var t=e.chat,n=void 0===t?null:t,r=e.makeRoom,a=void 0===r?null:r,i=e.onChatClicked,s=void 0===i?null:i,u=e.bubbleWidth,d=void 0===u?l.Vf.CHAT_BUBBLE_WIDTH_NORMAL:u,j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useRef)(),g=Object(c.useMemo)((function(){switch(d){case l.Vf.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case l.Vf.CHAT_BUBBLE_WIDTH_THIN:return 240;case l.Vf.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}}),[d]);return Object(c.useEffect)((function(){var e=f.current;if(e){var t=e.offsetWidth,r=e.offsetHeight;n.width=t,n.height=r,n.elementRef=e;var c=n.left,i=n.top;return c||i||(c=n.location.x-t/2,i=e.parentElement.offsetHeight-r,n.left=c,n.top=i),n.visible||(a(n),n.visible=!0),function(){n.elementRef=null}}}),[f,n,a]),Object(c.useEffect)((function(){return h(n.visible)}),[n.visible]),Object($a.jsxs)("div",{ref:f,className:"bubble-container ".concat(O?"visible":"invisible"),onClick:function(e){return s(n)},children:[0===n.styleId&&Object($a.jsx)("div",{className:"user-container-bg",style:{backgroundColor:n.color}}),Object($a.jsxs)("div",{className:"chat-bubble bubble-".concat(n.styleId," type-").concat(n.type),style:{maxWidth:g},children:[Object($a.jsx)("div",{className:"user-container",children:n.imageUrl&&n.imageUrl.length>0&&Object($a.jsx)("div",{className:"user-image",style:{backgroundImage:"url(".concat(n.imageUrl,")")}})}),Object($a.jsxs)("div",{className:"chat-content",children:[Object($a.jsx)("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:"".concat(n.username,": ")}}),Object($a.jsx)("span",{className:"message",dangerouslySetInnerHTML:{__html:"".concat(n.formattedText)}})]}),Object($a.jsx)("div",{className:"pointer"})]})]})},Wb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,j=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;Object(u.a)(this,e),this.senderId=t,this.senderCategory=n,this.roomId=r,this.text=a,this.formattedText=c,this.username=i,this.location=s,this.type=o,this.styleId=l,this.imageUrl=d,this.color=j,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.visible=!1,this.skipMovement=!1,this._top=0,this._left=0,this.id=++e.BUBBLE_COUNTER}return Object(d.a)(e,[{key:"top",get:function(){return this._top},set:function(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+"px")}},{key:"left",get:function(){return this._left},set:function(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+"px")}}]),e}();Wb.BUBBLE_COUNTER=0;var Vb=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!(e.left+r+e.width<t.left+r||e.left+r>t.left+r+t.width||e.top+e.height<t.top+n||e.top>t.top+n+t.height)},qb=0,Yb=function(e){var t=Object(c.useState)({mode:l.Vf.CHAT_MODE_FREE_FLOW,weight:l.Vf.CHAT_BUBBLE_WIDTH_NORMAL,speed:l.Vf.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:l.Vf.FLOOD_FILTER_NORMAL}),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(qb++),b=Object(o.a)(j,2),O=b[0],h=(b[1],ub()),f=h.roomSession,g=void 0===f?null:f,m=h.eventDispatcher,v=void 0===m?null:m,p=h.widgetHandler,x=void 0===p?null:p,_=Object(c.useRef)(),E=Object(c.useCallback)((function(){d((function(e){if(e){var t=e.filter((function(e){return e.top>2*-e.height}));if(t.length!==e.length)return t}return e}))}),[]),I=Object(c.useCallback)((function(e){d((function(t){return t&&t.forEach((function(t){t.skipMovement?t.skipMovement=!1:t.top-=e})),t})),E()}),[E]),y=Object(c.useCallback)((function(e,t,n){var r=u.length;if(r)for(var a=r-1;a>=0;a--){var c=u[a];if(!(!c||e===c||n.indexOf(c)>=0||c.top-t>=e.top+e.height)&&Vb(e,c,-t,4)){var i=Math.abs(c.top+c.height-e.top);n.push(c),c.top-=i,c.skipMovement=!0,y(c,i,n)}}}),[u]),C=Object(c.useCallback)((function(e){if(r.mode===l.Vf.CHAT_MODE_FREE_FLOW)e.skipMovement=!0,y(e,0,[e]),E();else{var t=e.top+e.height,n=e.height,a=_.current.offsetHeight-t,c=n-a;a<n&&(u.forEach((function(t){t!==e&&(t.top-=c)})),E())}}),[r,u,E,y]),T=Object(c.useCallback)((function(e){var t=new Wb(e.userId,e.userCategory,e.roomId,e.text,function(e,t){var n="";if(e.toLowerCase().includes("onerror=")&&(e="kekw"),e.toLowerCase().includes("javascript:")&&(e="kekw"),e.toLowerCase().includes("onmouseover=")&&(e="kekw"),e.toLowerCase().includes("<audio")&&e.toLowerCase().includes("<img")&&(e="kekw"),e.toLowerCase().includes("<audio")&&e.toLowerCase().includes("<h")&&(e="kekw"),e.toLowerCase().includes("<script")&&(e="kekw"),e.includes("giphy.com/media")&&(e="<img src='"+e+".gif' style='max-width: 150px; object-fit: contain;'/>"),e.includes("https://lavvos.eu/swfs/c_images/emojis")&&(e="<img src='"+e+"'/>"),e.includes("https://int.lavvos.eu/audios/")&&(e="<audio style='height: 20px; position: relative; top: 3px;' controls src='"+e+"'/>"),e.startsWith("@")&&e.indexOf("@",1)>-1)for(var r=null;null!==(r=/@[a-zA-Z]+@/g.exec(e));){var a=r[0].toString(),c=a.substr(1,a.length-2),i=e.replace(a,"");n=ur.has(c)?'<span style="color: '+ur.get(c)+'">'+i+"</span>":i;break}else n=e;return n}(e.text,e.styleId),e.userName,new l.Se(e.userX,e.userY),e.chatType,e.styleId,e.userImage,e.userColor&&("#"+e.userColor.toString(16).padStart(6,"0")||!1));d((function(e){return[].concat(Object(ut.a)(e),[t])}))}),[]);Ht(Ae.CHAT_EVENT,v,T);var S=Object(c.useCallback)((function(e){if(u.length&&e.roomId===g.roomId){var t=e.offsetX;u.forEach((function(e){return e.elementRef&&(e.left+=t)}))}}),[g,u]);qt(l.gg.ROOM_DRAG,S);var R=Object(c.useCallback)((function(e){x.processWidgetMessage(new Nr(Nr.GET_OBJECT_INFO,e.senderId,e.senderCategory)),x.processWidgetMessage(new gr(gr.MESSAGE_SELECT_AVATAR,e.senderId,e.username,e.roomId))}),[x]),k=Object(c.useCallback)((function(){if(!r)return 6e3;switch(r.speed){case l.Vf.CHAT_SCROLL_SPEED_FAST:return 3e3;case l.Vf.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case l.Vf.CHAT_SCROLL_SPEED_SLOW:return 12e3}}),[r]),A=Object(c.useCallback)((function(e){var t=e.getParser();t.roomEnter&&a(t.chat)}),[]);dt(l.jc,A);var w=Object(c.useCallback)((function(e){var t=e.getParser();a(t.chat)}),[]);dt(l.Wf,w),Object(c.useEffect)((function(){var e=function(e){if(_&&_.current){var t=_.current.offsetHeight,n=Math.round(document.body.offsetHeight*L("chat.viewer.height.percentage"));_.current.style.height="".concat(n,"px"),d((function(e){return e&&e.forEach((function(e){return e.top-=t-n})),e}))}};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]);var D=Object(c.useCallback)((function(e){"MOVE_CHATS"!==e.type||I(15)}),[I]);return Object(c.useEffect)((function(){var e,t={workerMessageReceived:D};return e=t,N().addWorkerEventTracker(e),ta({type:"CREATE_INTERVAL",time:k(),timerId:O,response:{type:"MOVE_CHATS"}}),function(){ta({type:"REMOVE_INTERVAL",timerId:O}),function(e){N().removeWorkerEventTracker(e)}(t)}}),[O,D,k]),Object($a.jsx)("div",{ref:_,className:"nitro-chat-widget",children:u.map((function(e){return Object($a.jsx)(Gb,{chat:e,makeRoom:C,onChatClicked:R,bubbleWidth:r.weight},e.id)}))})},zb=function(e){var t=e.title,n=void 0===t?null:t,r=e.items,a=void 0===r?null:r,i=e.displayItemId,s=void 0!==i&&i,l=e.onCloseClick,u=void 0===l?null:l,d=Object(c.useState)(null),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(""),f=Object(o.a)(h,2),g=f[0],m=f[1],v=ub().widgetHandler,p=void 0===v?null:v,x=Object(c.useMemo)((function(){if(!a)return[];if(!g||!g.length)return a;var e=g.toLocaleLowerCase();return a.filter((function(t){return t.name.toLocaleLowerCase().includes(e)}))}),[a,g]),_=Object(c.useCallback)((function(e){O(e),p.processWidgetMessage(new Nr(Nr.SELECT_OBJECT,e.id,e.category))}),[p,O]),E=function(e){var t=x[e.index];return Object($a.jsx)(lc,{alignItems:"center",position:"absolute",className:"rounded px-1"+(b===t?" bg-muted":""),pointer:!0,style:e.style,onClick:function(e){return _(t)},children:Object($a.jsxs)(Hi,{truncate:!0,children:[t.name," ",s&&" - "+t.id]})},e.key)};return Object($a.jsxs)(Pc,{className:"nitro-chooser-widget",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:n,onCloseClick:u}),Object($a.jsxs)(Ec,{overflow:"hidden",children:[Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:st("generic.search"),value:g,onChange:function(e){return m(e.target.value)}}),Object($a.jsx)(Jc,{fullHeight:!0,overflow:"auto",children:Object($a.jsx)(ml.a,{defaultWidth:0,defaultHeight:0,children:function(e){var t=e.width,n=e.height;return Object($a.jsx)(ml.d,{width:t,height:n,rowCount:x.length,rowHeight:20,rowRenderer:E})}})})]})]})},Kb=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=(b[0],b[1]),h=ub(),f=h.eventDispatcher,g=void 0===f?null:f,m=h.widgetHandler,v=void 0===m?null:m,p=Object(c.useCallback)((function(){r&&O((function(e){return e&&clearTimeout(e),setTimeout((function(){return v.processWidgetMessage(new Sr(Sr.FURNI_CHOOSER))}),100)}))}),[r,v]),x=Object(c.useCallback)((function(e){d(e.items),a(!0)}),[]);Ht(Te.FURNI_CHOOSER_CONTENT,g,x);var _=Object(c.useCallback)((function(e){if(r)switch(e.type){case Xe.FURNI_ADDED:case Xe.FURNI_REMOVED:return void p()}}),[r,p]);Ht(Xe.FURNI_ADDED,g,_),Ht(Xe.FURNI_REMOVED,g,_);var E=Object(c.useCallback)((function(){a(!1),d(null)}),[]);return u?Object($a.jsx)(zb,{title:st("widget.chooser.furni.title"),displayItemId:ae().hasSecurity(l.Bh.MODERATOR),items:u,onCloseClick:E}):null},Qb=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(null),j=Object(o.a)(d,2),b=(j[0],j[1]),O=ub(),h=O.eventDispatcher,f=void 0===h?null:h,g=O.widgetHandler,m=void 0===g?null:g,v=Object(c.useCallback)((function(){r&&b((function(e){return e&&clearTimeout(e),setTimeout((function(){return m.processWidgetMessage(new Sr(Sr.USER_CHOOSER))}),100)}))}),[r,m]),p=Object(c.useCallback)((function(e){u(e.items),a(!0)}),[]);Ht(Te.USER_CHOOSER_CONTENT,f,p);var x=Object(c.useCallback)((function(e){if(r)switch(e.type){case Xe.USER_ADDED:case Xe.USER_REMOVED:return void v()}}),[r,v]);Ht(Xe.USER_ADDED,f,x),Ht(Xe.USER_REMOVED,f,x);var _=Object(c.useCallback)((function(){a(!1),u(null)}),[]);return r?Object($a.jsx)(zb,{title:st("widget.chooser.user.title"),displayItemId:!1,items:l,onCloseClick:_}):null},Xb=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Sn(),s=i.users,l=void 0===s?[]:s,u=i.answer,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(!!l.length)}),[l]),r?Object($a.jsxs)(Pc,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("navigator.doorbell.title"),onCloseClick:function(e){return a(!1)}}),Object($a.jsxs)(Ec,{overflow:"hidden",gap:0,children:[Object($a.jsx)(Jc,{gap:2,children:Object($a.jsxs)(cc,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[Object($a.jsx)(tc,{className:"g-col-6",style:{color:"var(--test-galaxytext)"},children:st("generic.username")}),Object($a.jsx)(tc,{className:"g-col-6"})]})}),Object($a.jsx)(Jc,{overflow:"auto",className:"striped-children",gap:0,children:l&&l.length>0&&l.map((function(e){return Object($a.jsxs)(cc,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[Object($a.jsx)(tc,{className:"g-col-6",style:{color:"var(--test-galaxytext)"},children:e}),Object($a.jsx)(tc,{className:"g-col-6",children:Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"end",gap:1,children:[Object($a.jsx)(dc,{variant:"success",onClick:function(){return d(e,!0)},children:st("generic.accept")}),Object($a.jsx)(dc,{variant:"danger",onClick:function(){return d(e,!1)},children:st("generic.deny")})]})})]},e)}))})]})]}):null},Jb=["objectId","category","noFollow","position"],Zb=function(e){var t=e.objectId,n=void 0===t?-1:t,r=e.category,a=void 0===r?-1:r,i=e.noFollow,s=void 0!==i&&i,l=e.position,u=void 0===l?"absolute":l,d=Object(Za.a)(e,Jb),j=Object(c.useState)({x:-1,y:-1}),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useRef)(),g=Object(c.useCallback)((function(){var e=ue();return fe(e.roomId,n,a,1)}),[n,a]),m=Object(c.useCallback)((function(){var e=g();e&&f.current&&h({x:Math.round(e.left+e.width/2-f.current.offsetWidth/2),y:Math.round(e.top-f.current.offsetHeight+10)})}),[g]);return Object(c.useEffect)((function(){var e=!1;return s?m():(e=!0,N().ticker.add(m)),function(){e&&N().ticker.remove(m)}}),[m,s]),Object($a.jsx)(tc,Object(bt.a)({innerRef:f,position:u,visible:O.x+(f.current?f.current.offsetWidth:0)>-1,className:"object-location",style:{left:O.x,top:O.y}},d))},$b=function(e){var t=e.roomIndex,n=void 0===t?-1:t,r=e.request,a=void 0===r?null:r,c=e.hideFriendRequest,i=void 0===c?null:c,s=an().requestResponse,o=void 0===s?null:s;return Object($a.jsx)(Zb,{objectId:n,category:l.Cg.UNIT,children:Object($a.jsx)(tc,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:2,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},fontSize:6,children:st("widget.friendrequest.from",["username"],[a.name])}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:function(e){return i(a.requesterUserId)}})]}),Object($a.jsxs)(lc,{justifyContent:"end",gap:1,children:[Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return o(a.requesterUserId,!1)},children:st("widget.friendrequest.decline")}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return o(a.requesterUserId,!0)},children:st("widget.friendrequest.accept")})]})]})})})},eO=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),u=Object(o.a)(i,2),d=u[0],j=u[1],b=ub(),O=b.roomSession,h=void 0===O?null:O,f=b.eventDispatcher,g=void 0===f?null:f,m=an().requests,v=void 0===m?[]:m,p=function(e){j((function(t){if(t.indexOf(e)>=0)return t;var n=Object(ut.a)(t);return n.push(e),n}))},x=Object(c.useCallback)((function(e){if(e.category===l.Cg.UNIT){var t=h.userDataManager.getUserDataByIndex(e.id);if(t&&t.type===l.Hg.getTypeNumber(l.Hg.USER)){if(e.type===Xe.USER_ADDED){var n=v.find((function(e){return e.requesterUserId===t.webID}));if(!n||r.find((function(e){return e.request.requesterUserId===t.webID})))return;var c=Object(ut.a)(r);c.push({roomIndex:t.roomIndex,request:n}),a(c)}}else if(e.type===Xe.USER_REMOVED){var i=r.findIndex((function(t){return t.roomIndex===e.id}));if(-1===i)return;var s=Object(ut.a)(r);s.splice(i,1),a(s)}}}),[h,v,r]);return Ht(Xe.USER_ADDED,g,x),Ht(Xe.USER_REMOVED,g,x),Object(c.useEffect)((function(){if(v&&v.length){var e,t=[],n=Object(s.a)(v);try{for(n.s();!(e=n.n()).done;){var r=e.value,c=h.userDataManager.getUserData(r.requesterUserId);c&&t.push({roomIndex:c.roomIndex,request:r})}}catch(i){n.e(i)}finally{n.f()}a(t)}}),[h,v]),v.length?Object($a.jsx)($a.Fragment,{children:r.map((function(e,t){return d.indexOf(e.request.requesterUserId)>=0?null:Object($a.jsx)($b,{roomIndex:e.roomIndex,request:e.request,hideFriendRequest:p},t)}))}):null},tO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(0),g=Object(o.a)(f,2),m=g[0],v=g[1],p=ub(),x=p.roomSession,_=void 0===x?null:x,E=p.eventDispatcher,I=void 0===E?null:E,y=Object(c.useCallback)((function(){I.dispatchEvent(new ke(ke.CLEAR_PREVIEW)),a(-1)}),[I]),C=Object(c.useCallback)((function(){return _.isRoomOwner||_.controllerLevel>=l.Yf.GUEST||ae().isModerator}),[_]),T=Object(c.useCallback)((function(e){switch(e.type){case l.mg.REQUEST_BACKGROUND_COLOR:if(!C())return;var t=G().getRoomObject(e.roomId,e.objectId,e.category),n=t.model;return a(t.id),d(parseInt(n.getValue(l.Ig.FURNITURE_ROOM_BACKGROUND_COLOR_HUE))),h(parseInt(n.getValue(l.Ig.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION))),void v(parseInt(n.getValue(l.Ig.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)));case Xe.FURNI_REMOVED:if(r!==e.objectId)return;return void y()}}),[r,C,y]);qt(l.mg.REQUEST_BACKGROUND_COLOR,T),Ht(Xe.FURNI_REMOVED,I,T);var S=Object(c.useCallback)((function(e){switch(e){case"apply":ea(new l.h(r,u,O,m));break;case"toggle":_.useMultistateItem(r)}}),[_,r,u,O,m]);return Object(c.useEffect)((function(){-1!==r&&I.dispatchEvent(new ke(ke.PREVIEW,u,O,m))}),[I,r,u,O,m]),-1===r?null:Object($a.jsxs)(Pc,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[Object($a.jsx)(Tc,{headerText:st("widget.backgroundcolor.title"),onCloseClick:y}),Object($a.jsxs)(Ec,{overflow:"hidden",justifyContent:"between",children:[Object($a.jsxs)(Jc,{overflow:"auto",gap:1,children:[Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{bold:!0,children:st("widget.backgroundcolor.hue")}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:360,value:u,onChange:function(e){return d(e)},thumbClassName:"thumb degree",renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:t.valueNow}))}})]}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{bold:!0,children:st("widget.backgroundcolor.saturation")}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:255,value:O,onChange:function(e){return h(e)},thumbClassName:"thumb percent",renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:t.valueNow}))}})]}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{bold:!0,children:st("widget.backgroundcolor.lightness")}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:255,value:m,onChange:function(e){return v(e)},thumbClassName:"thumb percent",renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:t.valueNow}))}})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"primary",onClick:function(e){return S("toggle")},children:st("widget.backgroundcolor.button.on")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"primary",onClick:function(e){return S("apply")},children:st("widget.backgroundcolor.button.apply")})]})]})]})},nO=Object(d.a)((function e(t,n,r,a,c,i,s){Object(u.a)(this,e),this.objectId=t,this.category=n,this.color=r,this.ownerName=a,this.date=c,this.message=i,this.customTitle=s})),rO=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ub().widgetHandler,s=void 0===i?null:i,u=Object(c.useCallback)((function(e){switch(e.type){case l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:case l.mg.REQUEST_BADGE_DISPLAY_ENGRAVING:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;var r=new l.Kh;r.initializeFromRoomObjectModel(n.model);var c=it(r.getValue(1)),i=ct(r.getValue(1)),s=r.getValue(2),o=r.getValue(3);return void a(new nO(t.objectId,t.category,"1",o,s,i,c));case Xe.FURNI_REMOVED:var u=e;return void a((function(e){return e&&u.id===e.objectId&&u.category===e.category?null:e}))}}),[]);qt(l.mg.REQUEST_BADGE_DISPLAY_ENGRAVING,u),qt(l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,u),Ht(Xe.FURNI_REMOVED,s.eventDispatcher,u);var d=Object(c.useCallback)((function(e){"close"!==e||a(null)}),[]);return r?Object($a.jsx)(Si,{color:r.color,message:r.message,date:r.date,senderName:r.ownerName,customTitle:r.customTitle,onCloseClick:function(){return d("close")}}):null},aO=function(e){var t=e.objectId,n=void 0===t?-1:t,r=e.close,a=void 0===r?null:r,c=ub().roomSession,i=void 0===c?null:c;return Object($a.jsxs)(Pc,{className:"nitro-use-product-confirmation",children:[Object($a.jsx)(Tc,{headerText:st("effectbox.header.title"),onCloseClick:a}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsx)(lc,{gap:2,children:Object($a.jsxs)(Jc,{justifyContent:"between",children:[Object($a.jsx)(Hi,{children:st("effectbox.header.description")}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:a,children:st("generic.cancel")}),Object($a.jsx)(dc,{variant:"success",onClick:function(){i.useMultistateItem(n),a()},children:st("generic.ok")})]})]})})})]})},cO=function(e){var t=e.objectId,n=void 0===t?-1:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(-1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub(),g=f.roomSession,m=void 0===g?null:g,v=f.widgetHandler,p=void 0===v?null:v;return Object(c.useEffect)((function(){if(m&&-1!==n){var e=se(m.roomId,n,l.Cg.FLOOR);if(e){d(e);var t=-1;if(e.specialType===Un.MONSTERPLANT_SEED)t=0;-1!==t?h(t):a()}}}),[m,n,a]),-1===O?null:Object($a.jsxs)(Pc,{className:"nitro-use-product-confirmation",children:[Object($a.jsx)(Tc,{headerText:st("useproduct.widget.title.plant_seed",["name"],[u.name]),onCloseClick:a}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsx)(Jc,{children:Object($a.jsx)(tc,{className:"product-preview",children:Object($a.jsx)(tc,{className:"monsterplant-image"})})}),Object($a.jsxs)(Jc,{justifyContent:"between",overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:2,children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.plant_seed",["productName"],[u.name])}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.plant_seed")})]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:a,children:st("useproduct.widget.cancel")}),Object($a.jsx)(dc,{variant:"success",onClick:function(){p.processWidgetMessage(new Rr(Rr.MONSTERPLANT_SEED,n)),a()},children:st("widget.monsterplant_seed.button.use")})]})]})]})})]})},iO=function(e){var t=e.objectId,n=void 0===t?-1:t,r=e.close,a=void 0===r?null:r,i=Object(c.useState)(-1),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(us.MALE),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=ub().roomSession,_=void 0===x?null:x;return Object(c.useEffect)((function(){var e=-1,t=ae().figure,r=ae().gender,c=[];if(_&&n>=0){var i=se(_.roomId,n,l.Cg.FLOOR);if(i&&i.specialType===Un.FIGURE_PURCHASABLE_SET){e=0;var o,u=i.customParams.split(",").map((function(e){return parseInt(e)})),d=Object(s.a)(u);try{for(d.s();!(o=d.n()).done;){var b=o.value;k().isValidFigureSetForGender(b,r)&&c.push(b)}}catch(O){d.e(O)}finally{d.f()}}}-1!==e?(f(r),p(k().getFigureStringWithFigureIds(t,r,c)),j(e)):a()}),[_,n,a]),-1===d?null:Object($a.jsxs)(Pc,{className:"nitro-use-product-confirmation",children:[Object($a.jsx)(Tc,{headerText:st("useproduct.widget.title.bind_clothing"),onCloseClick:a}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsx)(Jc,{children:Object($a.jsx)(tc,{className:"mannequin-preview",children:Object($a.jsx)(Mc,{figure:v,direction:2})})}),Object($a.jsxs)(Jc,{justifyContent:"between",overflow:"auto",children:[Object($a.jsxs)(Jc,{gap:2,children:[Object($a.jsx)(Hi,{children:st("useproduct.widget.text.bind_clothing")}),Object($a.jsx)(Hi,{children:st("useproduct.widget.info.bind_clothing")})]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(dc,{variant:"danger",onClick:a,children:st("useproduct.widget.cancel")}),Object($a.jsx)(dc,{variant:"success",onClick:function(){M().send(new l.Cf(n)),M().send(new l.xi(h,v)),a()},children:st("useproduct.widget.bind_clothing")})]})]})]})})]})},sO="MONSTERPLANT_SEED_CONFIRMATION",oO="PURCHASABLE_CLOTHING_CONFIRMATION",lO="GROUP_FURNITURE",uO="EFFECTBOX_OPEN",dO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(-1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(null),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(!1),y=Object(o.a)(I,2),C=y[0],T=y[1],S=ub(),N=S.roomSession,R=void 0===N?null:N,k=S.widgetHandler,A=void 0===k?null:k,w=Object(c.useCallback)((function(){a(-1),E(null),T(!1),d(null)}),[]),D=function(){h(null),v(-1)},U=Object(c.useCallback)((function(e){var t=G().getRoomObject(R.roomId,e.objectId,e.category);if(t)switch(e.type){case l.mg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!Z(t))return;return v(t.id),h(sO),void w();case l.mg.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!Z(t))return;return v(t.id),h(uO),void w();case l.mg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!Z(t))return;return v(t.id),h(oO),void w();case l.mg.OPEN_FURNI_CONTEXT_MENU:switch(a(t.id),e.contextMenu){case l.lb.FRIEND_FURNITURE:return void d(l.lb.FRIEND_FURNITURE);case l.lb.MONSTERPLANT_SEED:return void(Z(t)&&d(l.lb.MONSTERPLANT_SEED));case l.lb.MYSTERY_BOX:return;case l.lb.RANDOM_TELEPORT:return void d(l.lb.RANDOM_TELEPORT);case l.lb.PURCHASABLE_CLOTHING:return void(Z(t)&&d(l.lb.PURCHASABLE_CLOTHING))}return;case l.mg.CLOSE_FURNI_CONTEXT_MENU:return void(t.id===r&&w())}}),[R,r,w]);qt(l.mg.OPEN_FURNI_CONTEXT_MENU,U),qt(l.mg.CLOSE_FURNI_CONTEXT_MENU,U),qt(l.mg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,U),qt(l.mg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,U),qt(l.mg.REQUEST_EFFECTBOX_OPEN_DIALOG,U);var P=Object(c.useCallback)((function(e){var t=e.getParser();a(t.objectId),E(t),T(t.userIsMember),d(lO)}),[]);dt(l.Nc,P);var L=function(e){if(e)switch(e){case"use_friend_furni":R.useMultistateItem(r);break;case"use_monsterplant_seed":h(sO),v(r);break;case"use_random_teleport":A.processWidgetMessage(new Ir(Ir.USE,r,l.Cg.FLOOR));break;case"use_purchaseable_clothing":h(oO),v(r);break;case"join_group":return Ta(_.guildId),void T(!0);case"go_to_group_homeroom":_&&Da(_.guildHomeRoomId)}w()};return Object($a.jsxs)($a.Fragment,{children:[O===sO&&Object($a.jsx)(cO,{objectId:m,close:D}),O===oO&&Object($a.jsx)(iO,{objectId:m,close:D}),O===uO&&Object($a.jsx)(aO,{objectId:m,close:D}),r>=0&&u&&Object($a.jsxs)(yb,{objectId:r,category:l.Cg.FLOOR,close:w,fades:!0,children:[u===l.lb.FRIEND_FURNITURE&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Ob,{children:st("friendfurni.context.title")}),Object($a.jsx)(vb,{onClick:function(e){return L("use_friend_furni")},children:st("friendfurni.context.use")})]}),u===l.lb.MONSTERPLANT_SEED&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Ob,{children:st("furni.mnstr_seed.name")}),Object($a.jsx)(vb,{onClick:function(e){return L("use_monsterplant_seed")},children:st("widget.monsterplant_seed.button.use")})]}),u===l.lb.RANDOM_TELEPORT&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Ob,{children:st("furni.random_teleport.name")}),Object($a.jsx)(vb,{onClick:function(e){return L("use_random_teleport")},children:st("widget.random_teleport.button.use")})]}),u===l.lb.PURCHASABLE_CLOTHING&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Ob,{children:st("furni.generic_usable.name")}),Object($a.jsx)(vb,{onClick:function(e){return L("use_purchaseable_clothing")},children:st("widget.generic_usable.button.use")})]}),u===lO&&_&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Ob,{className:"cursor-pointer text-truncate",onClick:function(){return Ia(_.guildId)},children:_.guildName}),!C&&Object($a.jsx)(vb,{onClick:function(e){return L("join_group")},children:st("widget.furniture.button.join.group")}),Object($a.jsx)(vb,{onClick:function(e){return L("go_to_group_homeroom")},children:st("widget.furniture.button.go.to.group.home.room")}),_.guildHasReadableForum&&Object($a.jsx)(vb,{onClick:function(e){return L("open_forum")},children:st("widget.furniture.button.open_group_forum")})]})]})]})},jO=40,bO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(-1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub().eventDispatcher,g=void 0===f?null:f,m=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0),e=Math.abs(e),t||e>jO&&(e=jO),d(parseFloat(e.toFixed(2))),t||h(100*e)}),[]),v=Object(c.useCallback)((function(e){if(e.type===Ue.UPDATE_CUSTOM_STACK_HEIGHT)a(e.objectId),m(e.height,!0)}),[m]);Ht(Ue.UPDATE_CUSTOM_STACK_HEIGHT,g,v);var p=Object(c.useCallback)((function(e){var t=e.getParser();r===t.furniId&&m(t.height,!0)}),[r,m]);dt(l.Xb,p);var x=Object(c.useCallback)((function(e){ea(new l.Wb(r,~~e))}),[r]);return Object(c.useEffect)((function(){if(-1!==r&&-1!==O){var e=setTimeout((function(){return x(~~O)}),10);return function(){return clearTimeout(e)}}}),[r,O,x]),-1===r?null:Object($a.jsxs)(Pc,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("widget.custom.stack.height.title"),onCloseClick:function(){a(-1),d(0)}}),Object($a.jsxs)(Ec,{justifyContent:"between",children:[Object($a.jsx)(Hi,{children:st("widget.custom.stack.height.text")}),Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:jO,step:.01,value:u,onChange:function(e){return m(e)},renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:t.valueNow}))}}),Object($a.jsx)("input",{type:"number",min:0,max:jO,value:u,onChange:function(e){return m(parseFloat(e.target.value))}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{onClick:function(e){return x(-100)},children:st("furniture.above.stack")}),Object($a.jsx)(dc,{onClick:function(e){return x(0)},children:st("furniture.floor.level")})]})]})]})},OO=Object(d.a)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(u.a)(this,e),this.id=t,this.type=n,this.color=r,this.light=a})),hO=[7665141,21495,15161822,15353138,15923281,8581961,0],fO=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],gO=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(0),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(0),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(0),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(0),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(16777215),N=Object(o.a)(S,2),R=N[0],k=N[1],A=Object(c.useState)(255),w=Object(o.a)(A,2),D=w[0],U=w[1],P=Object(c.useState)(0),M=Object(o.a)(P,2),F=M[0],H=M[1],B=Object(c.useState)(0),G=Object(o.a)(B,2),W=G[0],V=G[1],q=Object(c.useState)(0),Y=Object(o.a)(q,2),z=Y[0],K=Y[1],Q=ub(),X=Q.eventDispatcher,J=void 0===X?null:X,Z=Q.widgetHandler,$=void 0===Z?null:Z,ee=Object(c.useCallback)((function(e){switch(e.type){case Me.PRESETS:var t,n=e,r=[],c=Object(s.a)(n.presets);try{for(c.s();!(t=c.n()).done;){var i=t.value;r.push(new OO(i.id,i.type,i.color,i.brightness))}}catch(l){c.e(l)}finally{c.f()}return d(r),h(n.selectedPresetId),void a(!0);case Me.HIDE:return void a(!1);case Fe.DIMMER_STATE:var o=e;return E(m),v(o.state),h(o.presetId),T(o.effectId),H(o.effectId),k(o.color),V(o.color),U(o.brightness),void K(o.brightness)}}),[m]);Ht(Me.PRESETS,J,ee),Ht(Me.HIDE,J,ee),Ht(Fe.DIMMER_STATE,J,ee);var te=Object(c.useCallback)((function(e){var t=u[e-1];t&&(h(t.id),H(t.type),V(t.color),K(t.light))}),[u]),ne=Object(c.useCallback)((function(){$.processWidgetMessage(new _r(R,D,2===C)),a(!1)}),[$,R,D,C]),re=Object(c.useCallback)((function(){$.processWidgetMessage(new xr)}),[$]),ae=Object(c.useCallback)((function(){if(0!==m){var e=O-1;if(!(O<1||O>u.length)){var t=u[e];!t||F===t.type&&W===t.color&&z===t.light||(d((function(n){var r=Object(ut.a)(n);return r[e]=new OO(t.id,F,W,z),r})),$.processWidgetMessage(new Er(t.id,F,W,z,!0)))}}}),[$,m,O,u,F,W,z]),ce=Object(c.useCallback)((function(e){return~~(100*(e-76)/179+0)}),[]),ie=Object(c.useMemo)((function(){return L("widget.dimmer.colorwheel",!1)}),[]);return Object(c.useEffect)((function(){0===m&&0===_||$.processWidgetMessage(new _r(W,z,2===F))}),[$,m,_,W,z,F]),r?Object($a.jsxs)(Pc,{className:"nitro-room-widget-dimmer",children:[Object($a.jsx)(Tc,{headerText:st("widget.dimmer.title"),onCloseClick:ne}),1===m&&Object($a.jsx)(Di,{children:u.map((function(e){return Object($a.jsx)(Ai,{isActive:O===e.id,onClick:function(t){return te(e.id)},children:st("widget.dimmer.tab.".concat(e.id))},e.id)}))}),Object($a.jsxs)(Ec,{children:[0===m&&Object($a.jsxs)(Jc,{alignItems:"center",children:[Object($a.jsx)(tc,{className:"dimmer-banner"}),Object($a.jsx)(Hi,{center:!0,className:"bg-muted rounded p-1",children:st("widget.dimmer.info.off")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:re,children:st("widget.dimmer.button.on")})]}),1===m&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:st("widget.backgroundcolor.hue")}),ie&&Object($a.jsx)("input",{type:"color",className:"form-control",value:at.makeColorNumberHex(W),onChange:function(e){return V(at.convertFromHex(e.target.value))}}),!ie&&Object($a.jsx)(cc,{gap:1,columnCount:7,children:hO.map((function(e,t){return Object($a.jsx)(Jc,{fullWidth:!0,pointer:!0,className:"color-swatch rounded"+io()({" active":e===W}),onClick:function(){return V(e)},style:{backgroundColor:fO[t]}},t)}))})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:st("widget.backgroundcolor.lightness")}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:76,max:255,value:z,onChange:function(e){return K(e)},thumbClassName:"thumb percent",renderThumb:function(e,t){return Object($a.jsx)("div",Object(bt.a)(Object(bt.a)({},e),{},{children:ce(t.valueNow)}))}})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:2===F,onChange:function(e){return H(e.target.checked?2:1)}}),Object($a.jsx)(Hi,{children:st("widget.dimmer.type.checkbox")})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"danger",onClick:re,children:st("widget.dimmer.button.off")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:ae,children:st("widget.dimmer.button.apply")})]})]})]})]}):null},mO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=ub(),j=d.eventDispatcher,b=void 0===j?null:j,O=d.widgetHandler,h=void 0===O?null:O,f=Object(c.useCallback)((function(e){a(e.objectId),u(e.value)}),[]);Ht(De.CREDIT_FURNI_UPDATE,b,f);var g=function(){a(-1),u(0)};return-1===r?null:Object($a.jsxs)(Pc,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("catalog.redeem.dialog.title"),onCloseClick:g}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsxs)(lc,{overflow:"hidden",gap:2,children:[Object($a.jsx)(Jc,{center:!0,children:Object($a.jsx)(tc,{className:"exchange-image"})}),Object($a.jsxs)(Jc,{grow:!0,justifyContent:"between",overflow:"hidden",children:[Object($a.jsxs)(Jc,{gap:1,overflow:"auto",children:[Object($a.jsx)(Hi,{fontWeight:"bold",children:st("creditfurni.description",["credits"],[l.toString()])}),Object($a.jsx)(Hi,{children:st("creditfurni.prompt")})]}),Object($a.jsx)(dc,{variant:"success",onClick:function(){h.processWidgetMessage(new vr(vr.REDEEM,r)),g()},children:st("catalog.redeem.dialog.button.exchange")})]})]})})]})},vO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=ub().eventDispatcher,j=void 0===d?null:d,b=Object(c.useCallback)((function(e){if(e.type===He.UPDATE_EXTERNAL_IMAGE)return a(e.objectId),void u(e.photoData)}),[]);return Ht(He.UPDATE_EXTERNAL_IMAGE,j,b),-1!==r&&l?Object($a.jsxs)(Pc,{className:"nitro-external-image-widget",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:"",onCloseClick:function(){a(-1),u(null)}}),Object($a.jsxs)(Ec,{children:[Object($a.jsx)(lc,{center:!0,className:"picture-preview border border-black",style:l.w?{backgroundImage:"url("+l.w+")"}:{},children:!l.w&&Object($a.jsx)(Hi,{bold:!0,children:st("camera.loading")})}),l.m&&l.m.length&&Object($a.jsx)(Hi,{center:!0,children:l.m}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(Hi,{children:l.n||""}),Object($a.jsx)(Hi,{children:new Date(1e3*l.t).toLocaleDateString()})]})]})]}):null},pO=Object(d.a)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(u.a)(this,e),this.objectId=t,this.category=n,this.type=r,this.usernames=a,this.figures=c,this.date=i})),xO=function(e){var t=ub(),n=t.eventDispatcher,r=void 0===n?null:n,a=(t.widgetHandler,Object(c.useState)(null)),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useState)(0),j=Object(o.a)(d,2),b=j[0],O=j[1],h=function(e){switch(e.type){case l.mg.REQUEST_FRIEND_FURNITURE_ENGRAVING:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;var r=n.model.getValue(l.Ig.FURNITURE_DATA),a=n.model.getValue(l.Ig.FURNITURE_FRIENDFURNI_ENGRAVING);if("1"===r[0]){if(6!==r.length)return;u(new pO(t.objectId,t.category,a,[r[1],r[2]],[r[3],r[4]],r[5])),O(0)}return;case Xe.FURNI_REMOVED:var c=e;return void u((function(e){return e&&c.id===e.objectId&&c.category===e.category?null:e}))}};qt(l.mg.REQUEST_FRIEND_FURNITURE_ENGRAVING,h),Ht(Xe.FURNI_REMOVED,r,h);var f=Object(c.useCallback)((function(e){var t=e.getParser();u(new pO(t.furniId)),O(t.start?1:2)}),[]);dt(l.Vd,f);var g=Object(c.useCallback)((function(e){switch(e){case"close_view":return void u(null);case"accept_request":return ue().connection.send(new l.Eb(s.objectId,!0)),void g("close_request");case"reject_request":return ue().connection.send(new l.Eb(s.objectId,!1)),void g("close_request");case"close_request":return O(0),void u(null)}}),[s]),m=Object(c.useCallback)((function(e){g("close_request")}),[g]);return dt(l.Td,m),dt(l.Ud,m),Object($a.jsxs)($a.Fragment,{children:[b>0&&Object($a.jsxs)(Pc,{className:"nitro-engraving-lock",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("friend.furniture.confirm.lock.caption"),onCloseClick:function(e){return g("close_request")}}),Object($a.jsxs)(Ec,{children:[Object($a.jsx)("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:st("friend.furniture.confirm.lock.subtitle")}),Object($a.jsx)("div",{className:"d-flex justify-content-center mb-2",children:Object($a.jsx)("div",{className:"engraving-lock-stage-"+b})}),2===b&&Object($a.jsx)("div",{className:"text-small text-black text-center mb-2",children:st("friend.furniture.confirm.lock.other.locked")}),Object($a.jsxs)("div",{className:"d-flex",children:[Object($a.jsx)("button",{className:"btn btn-primary w-100 me-2",onClick:function(e){return g("reject_request")},children:st("friend.furniture.confirm.lock.button.cancel")}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return g("accept_request")},children:st("friend.furniture.confirm.lock.button.confirm")})]})]})]}),s&&s.usernames.length>0&&Object($a.jsx)(Dc,{handleSelector:".nitro-engraving-lock-view",children:Object($a.jsxs)("div",{className:"nitro-engraving-lock-view engraving-lock-"+s.type,children:[Object($a.jsx)("div",{className:"engraving-lock-close",onClick:function(e){return g("close_view")}}),Object($a.jsxs)("div",{className:"d-flex justify-content-center",children:[Object($a.jsx)("div",{className:"engraving-lock-avatar",children:Object($a.jsx)(Mc,{figure:s.figures[0],direction:2})}),Object($a.jsx)("div",{className:"engraving-lock-avatar",children:Object($a.jsx)(Mc,{figure:s.figures[1],direction:4})})]}),Object($a.jsxs)("div",{className:"text-center mt-1",children:[Object($a.jsxs)("div",{children:[0===s.type&&st("lovelock.engraving.caption"),3===s.type&&st("wildwest.engraving.caption")]}),Object($a.jsx)("div",{children:s.date}),Object($a.jsxs)("div",{className:"d-flex justify-content-center",children:[Object($a.jsx)("div",{className:"me-4",children:s.usernames[0]}),Object($a.jsx)("div",{children:s.usernames[1]})]})]})]})})]})},_O=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),_=(x[0],x[1]),E=Object(c.useState)(null),I=Object(o.a)(E,2),y=I[0],C=I[1],T=Object(c.useState)(null),S=Object(o.a)(T,2),N=S[0],R=S[1],k=Object(c.useState)(-1),A=Object(o.a)(k,2),w=A[0],D=A[1],P=Object(c.useState)(null),L=Object(o.a)(P,2),M=L[0],F=L[1],H=Object(c.useState)(!1),B=Object(o.a)(H,2),W=B[0],V=B[1],q=Object(c.useState)(null),Y=Object(o.a)(q,2),z=Y[0],K=Y[1],Q=Object(c.useState)(!1),X=Object(o.a)(Q,2),J=X[0],Z=X[1],$=ub(),ee=$.roomSession,te=void 0===ee?null:ee,ne=$.eventDispatcher,re=void 0===ne?null:ne,ce=$.widgetHandler,ie=void 0===ce?null:ce,se=Object(c.useCallback)((function(){J||a(-1),v(null),_(!1)}),[J]),oe=Object(c.useCallback)((function(e){return""}),[]),le=Object(c.useCallback)((function(e){switch(e.type){case ze.PACKAGEINFO:return Z(!1),a(e.objectId),v(e.giftMessage),_(e.isController),C(e.purchaserName),R(e.purchaserFigure),void K(e.imageUrl);case ze.CONTENTS_FLOOR:case ze.CONTENTS_LANDSCAPE:case ze.CONTENTS_WALLPAPER:var t=null;return e.type===ze.CONTENTS_FLOOR?t="packagecard_icon_floor":e.type===ze.CONTENTS_LANDSCAPE?t="packagecard_icon_landscape":e.type===ze.CONTENTS_WALLPAPER&&(t="packagecard_icon_wallpaper"),a(e.objectId),d(e.classId),h(e.itemType),v(e.giftMessage),_(e.isController),D(e.placedItemId),F(e.placedItemType),V(e.placedInRoom),void K(oe(t));case ze.CONTENTS_CLUB:return a(e.objectId),d(e.classId),h(e.itemType),v(e.giftMessage),_(e.isController),void K(oe("packagecard_icon_hc"));case ze.CONTENTS:if(!J)return;return a(e.objectId),d(e.classId),h(e.itemType),v(e.giftMessage),_(e.isController),D(e.placedItemId),F(e.placedItemType),V(e.placedInRoom),void K(e.imageUrl);case ze.CONTENTS_IMAGE:if(!J)return;K(e.imageUrl)}}),[J,oe]);Ht(ze.PACKAGEINFO,re,le),Ht(ze.CONTENTS,re,le),Ht(ze.CONTENTS_FLOOR,re,le),Ht(ze.CONTENTS_LANDSCAPE,re,le),Ht(ze.CONTENTS_WALLPAPER,re,le),Ht(ze.CONTENTS_CLUB,re,le),Ht(ze.CONTENTS_IMAGE,re,le);var ue=Object(c.useCallback)((function(e){e.id===r&&se(),e.id===w&&W&&V(!1)}),[r,w,W,se]);Ht(Xe.FURNI_REMOVED,re,ue);var de=Object(c.useCallback)((function(){a(-1),Z(!1),D(-1),V(!1),v(null),_(!1)}),[]),je=Object(c.useMemo)((function(){if(O!==aa.WALL)return!1;var e=ae().getWallItemData(u);if(!e)return!1;var t=e.className;return"floor"===t||"landscape"===t||"wallpaper"===t}),[u,O]),be=Object(c.useMemo)((function(){return-1===r?"":je?"widget.furni.present.spaces.message_opened":"widget.furni.present.message_opened"}),[r,je]),Oe=Object(c.useCallback)((function(e){switch(e){case 0:return void U("catalog/open");case 1:return Z(!0),void ie.processWidgetMessage(new Tr(Tr.OPEN_PRESENT,r));case 2:return;case 3:if(w>0&&W)if(M===aa.PET)te.pickupPet(w);else{var t=G().getRoomObject(te.roomId,w,l.Cg.FLOOR);t&&G().processRoomObjectOperation(t.id,l.Cg.FLOOR,l.Eg.OBJECT_PICKUP)}return void de()}}),[te,ie,r,W,w,M,de]);return-1===r?null:Object($a.jsxs)(Pc,{className:"nitro-gift-opening",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st(y?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[y]),onCloseClick:de}),Object($a.jsxs)(Ec,{center:!0,children:[-1===w&&Object($a.jsxs)(Jc,{overflow:"hidden",children:[Object($a.jsx)(lc,{center:!0,overflow:"auto",children:Object($a.jsx)(Qc,{userName:y,figure:N,message:m})}),Object($a.jsxs)(lc,{gap:1,children:[y&&Object($a.jsx)(dc,{fullWidth:!0,onClick:function(e){return Oe(0)},children:st("widget.furni.present.give_gift",["name"],[y])}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return Oe(1)},children:st("widget.furni.present.open_gift")})]})]}),w>-1&&Object($a.jsxs)(Jc,{overflow:"hidden",children:[Object($a.jsxs)(lc,{center:!0,overflow:"auto",gap:2,children:[Object($a.jsx)("img",{src:z,className:"no-select",alt:""}),Object($a.jsx)(Hi,{wrap:!0,children:st(be,["product"],[m])})]}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,onClick:function(e){return Oe(3)},children:st("widget.furni.present.put_in_inventory")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(e){return Oe(2)},children:st(W?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),y&&y.length&&Object($a.jsx)(dc,{fullWidth:!0,onClick:function(e){return Oe(0)},children:st("widget.furni.present.give_gift",["name"],[y])})]})]})]})]})},EO=["perteam","mostwins","classic"],IO=["alltime","daily","weekly","monthly"],yO=function(e){var t=Object(c.useState)(new Map),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ub().roomSession,s=void 0===i?null:i,u=Object(c.useCallback)((function(e){switch(e.type){case l.mg.REQUEST_HIGH_SCORE_DISPLAY:var t=G().getRoomObject(s.roomId,e.objectId,e.category);if(!t)return;var n=t.model.getValue(l.Ig.FURNITURE_DATA_FORMAT),r=l.bf.getData(n);return r.initializeFromRoomObjectModel(t.model),void a((function(e){var n=new Map(e);return n.set(t.id,r),n}));case l.mg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(e.roomId!==s.roomId)return;return void a((function(t){var n=new Map(t);return n.delete(e.objectId),n}))}}),[s]);return qt(l.mg.REQUEST_HIGH_SCORE_DISPLAY,u),qt(l.mg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,u),r.size?Object($a.jsx)($a.Fragment,{children:Array.from(r.entries()).map((function(e,t){var n=Object(o.a)(e,2),r=n[0],a=n[1];return Object($a.jsx)(Zb,{objectId:r,category:l.Cg.FLOOR,children:Object($a.jsxs)(Jc,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[Object($a.jsx)(Ob,{children:st("high.score.display.caption",["scoretype","cleartype"],[st("high.score.display.scoretype.".concat(EO[a.scoreType])),st("high.score.display.cleartype.".concat(IO[a.clearType]))])}),Object($a.jsxs)(Nb,{overflow:"hidden",gap:1,className:"h-100",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",children:[Object($a.jsx)(Hi,{center:!0,bold:!0,variant:"white",className:"col-8",children:st("high.score.display.users.header")}),Object($a.jsx)(Hi,{center:!0,bold:!0,variant:"white",className:"col-4",children:st("high.score.display.score.header")})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsx)(Jc,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:a.entries.map((function(e,t){return Object($a.jsxs)(lc,{alignItems:"center",children:[Object($a.jsx)(Hi,{center:!0,variant:"white",className:"col-8",children:e.users.join(", ")}),Object($a.jsx)(Hi,{center:!0,variant:"white",className:"col-4",children:e.score})]},t)}))})]})]})},t)}))}):null},CO=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(-1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=ub(),g=(f.roomSession,f.eventDispatcher),m=void 0===g?null:g,v=(f.widgetHandler,Object(c.useCallback)((function(){ve(u,O,l.Eg.OBJECT_ROTATE_POSITIVE)}),[u,O])),p=Object(c.useCallback)((function(){ve(u,O,l.Eg.OBJECT_MOVE)}),[u,O]),x=Object(c.useCallback)((function(){ve(u,O,l.Eg.OBJECT_PICKUP)}),[u,O]),_=Object(c.useCallback)((function(e){switch(e.type){case Xe.OBJECT_REQUEST_MANIPULATION:return a(!0),d(e.id),void h(e.category);case Xe.FURNI_REMOVED:return void(e.id===u&&(a(!1),d(-1),h(-1)));case Xe.OBJECT_DESELECTED:return a(!1),d(-1),void h(-1)}}),[u]);Ht(Xe.OBJECT_REQUEST_MANIPULATION,m,_),Ht(Xe.OBJECT_DESELECTED,m,_);var E=Object(c.useCallback)((function(e){e.isDecorating||(p(),a(!1),d(-1),h(-1))}),[p]);return Ht(Le.UPDATE_DECORATE,m,E),Object(c.useEffect)((function(){r?(m.dispatchEvent(new Le(!0)),p()):m.dispatchEvent(new Le(!1))}),[m,r,p]),r?Object($a.jsx)(Zb,{objectId:u,category:O,children:Object($a.jsxs)("div",{className:"btn-group",children:[Object($a.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:x,children:Object($a.jsx)(mc.a,{icon:"times"})}),Object($a.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:v,children:Object($a.jsx)(mc.a,{icon:"undo"})})]})}):null},TO=["hd",99999,[99998]],SO=[l.p.CHEST_ACCESSORY,l.p.COAT_CHEST,l.p.CHEST,l.p.LEGS,l.p.SHOES,l.p.WAIST_ACCESSORY],NO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=(O[0],O[1]),f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(l.zd.NO_CLUB),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(null),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(l.zd.NO_CLUB),N=Object(o.a)(S,2),R=(N[0],N[1]),A=Object(c.useState)(-1),w=Object(o.a)(A,2),D=w[0],U=w[1],P=ub(),L=P.roomSession,M=void 0===L?null:L,F=P.eventDispatcher,H=void 0===F?null:F,B=Object(c.useCallback)((function(e){var t=k().createFigureContainer(e.figure),n=k().getFigureClubLevel(t,e.gender,SO);a(e.objectId),j(e.figure),h(e.gender),v(e.name),E(n),M.isRoomOwner||M.controllerLevel>=l.Yf.GUEST||ae().isModerator?U(0):ae().gender.toLowerCase()!==e.gender.toLowerCase()?U(4):ce()<n?U(3):U(2)}),[M]);Ht(Ye.MANNEQUIN_UPDATE,H,B);var G=function(e){var t,n=Object(s.a)(e.getPartTypeIds());try{for(n.s();!(t=n.n()).done;){var r=t.value;SO.indexOf(r)>=0||e.removePart(r)}}catch(a){n.e(a)}finally{n.f()}e.updatePart(TO[0],TO[1],TO[2])},W=Object(c.useCallback)((function(e){switch(e){case 3:ea(new l.Qb(r));break;case 2:ea(new l.Sb(r));break;case 1:return void ea(new l.Rb(r,m))}U(-1)}),[r,m]);return Object(c.useEffect)((function(){switch(D){case 0:case 4:var e=k().createFigureContainer(d);G(e),T(e.getFigureString()),R(_);break;case 1:var t=k().createFigureContainer(ae().figure);G(t),T(t.getFigureString()),R(k().getFigureClubLevel(t,ae().gender,SO));break;case 2:case 3:var n=function(e,t){var n,r=k().createFigureContainer(e),a=k().createFigureContainer(t),c=Object(s.a)(SO);try{for(c.s();!(n=c.n()).done;){var i=n.value;r.removePart(i)}}catch(d){c.e(d)}finally{c.f()}var o,l=Object(s.a)(a.getPartTypeIds());try{for(l.s();!(o=l.n()).done;){var u=o.value;r.updatePart(u,a.getPartSetId(u),a.getPartColorIds(u))}}catch(d){l.e(d)}finally{l.f()}return r}(ae().figure,d);T(n.getFigureString()),R(_)}}),[D,d,_]),-1===D?null:Object($a.jsxs)(Pc,{className:"nitro-mannequin",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("mannequin.widget.title"),onCloseClick:function(e){return U(-1)}}),Object($a.jsx)(Ec,{center:!0,children:Object($a.jsxs)(lc,{gap:2,overflow:"hidden",children:[Object($a.jsx)(Jc,{children:Object($a.jsxs)(tc,{position:"relative",className:"mannequin-preview",children:[Object($a.jsx)(Mc,{figure:C,direction:2}),_>0&&Object($a.jsx)(Vc,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),Object($a.jsxs)(Jc,{justifyContent:"between",overflow:"auto",children:[0===D&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("input",{type:"text",className:"form-control",value:m,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){return function(e){"Enter"===e.key&&W(1)}(e)}}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(dc,{variant:"success",onClick:function(e){return U(1)},children:st("mannequin.widget.style")}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return W(2)},children:st("mannequin.widget.wear")})]})]}),1===D&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:m}),Object($a.jsx)(Hi,{wrap:!0,children:st("mannequin.widget.savetext")})]}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsx)(Hi,{underline:!0,pointer:!0,onClick:function(e){return U(0)},children:st("mannequin.widget.back")}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return W(3)},children:st("mannequin.widget.save")})]})]}),2===D&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:m}),Object($a.jsx)(Hi,{children:st("mannequin.widget.weartext")})]}),Object($a.jsx)(dc,{variant:"success",onClick:function(e){return W(2)},children:st("mannequin.widget.wear")})]}),3===D&&Object($a.jsx)(Hi,{children:st("mannequin.widget.clubnotification")}),4===D&&Object($a.jsx)(Hi,{children:st("mannequin.widget.wronggender")})]})]})})]})},RO=Object(d.a)((function e(t,n,r,a){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Object(u.a)(this,e),this.objectId=t,this.category=n,this.color=r,this.text=a,this.canModify=c,this.isEditing=i})),kO=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],AO=["blue","pink","green","yellow"];function wO(e){var t=kO.indexOf(e);return-1===t&&(t=0),AO[t]}var DO=function(e){var t=ub(),n=t.eventDispatcher,r=void 0===n?null:n,a=(t.widgetHandler,Object(c.useState)(null)),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useCallback)((function(e){switch(e.type){case l.mg.REQUEST_STICKIE:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;var r=n.model.getValue(l.Ig.FURNITURE_ITEMDATA);if(r.length<6)return;var a=null,c=null;return r.indexOf(" ")>0?(a=r.slice(0,r.indexOf(" ")),c=r.slice(r.indexOf(" ")+1,r.length)):a=r,void u(new RO(t.objectId,t.category,a,c,ue().isRoomOwner||ae().isModerator,!1));case Xe.FURNI_REMOVED:var i=e;return void u((function(e){return e&&i.id===e.objectId&&i.category===e.category?null:e}))}}),[]);qt(l.mg.REQUEST_STICKIE,d),Ht(Xe.FURNI_REMOVED,r,d);var j=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"close":return void u(null);case"trash":return void u((function(e){return e?(G().deleteRoomObject(e.objectId,e.category),null):null}));case"changeColor":return void u((function(e){var n=new RO(e.objectId,e.category,t,e.text,e.canModify);return G().modifyRoomObjectData(n.objectId,n.category,n.color,n.text),n}));case"changeText":return void u((function(e){var n=new RO(e.objectId,e.category,e.color,t,e.canModify);return G().modifyRoomObjectData(n.objectId,n.category,n.color,n.text),n}));case"editMode":return void u((function(e){return e.canModify?new RO(e.objectId,e.category,e.color,e.text,e.canModify,!0):e}))}}),[]);return s?Object($a.jsx)(Dc,{handleSelector:".drag-handler",windowPosition:kc.NOTHING,children:Object($a.jsxs)("div",{className:"nitro-stickie nitro-stickie-image stickie-"+wO(s.color),children:[Object($a.jsxs)("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[Object($a.jsx)("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:s.canModify&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:function(e){return j("trash")}}),kO.map((function(e){return Object($a.jsx)("div",{className:"stickie-color ms-1",onClick:function(t){return j("changeColor",e)},style:{backgroundColor:at.makeColorHex(e)}},e)}))]})}),Object($a.jsx)("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:function(e){return j("close")}})]}),Object($a.jsx)("div",{className:"stickie-context",children:s.isEditing?Object($a.jsx)("textarea",{className:"context-text",defaultValue:s.text||"",tabIndex:0,onBlur:function(e){return j("changeText",e.target.value)},autoFocus:!0}):Object($a.jsx)("div",{className:"context-text",onClick:function(e){return j("editMode")},children:s.text})})]})}):null},UO=function(e){var t=ub(),n=(t.eventDispatcher,t.widgetHandler),r=void 0===n?null:n,a=Object(c.useState)(null),i=Object(o.a)(a,2),s=i[0],u=i[1],d=Object(c.useCallback)((function(e){switch(e.type){case l.mg.REQUEST_TROPHY:var t=e,n=G().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;var r=n.model.getValue(l.Ig.FURNITURE_DATA),a=n.model.getValue(l.Ig.FURNITURE_EXTRAS);a||(a="0");var c=n.model.getValue(l.Ig.FURNITURE_COLOR),i=r.substring(0,r.indexOf("\t")),s=(r=r.substring(i.length+1,r.length)).substring(0,r.indexOf("\t")),o=r.substr(s.length+1,r.length);return void u(new nO(t.objectId,t.category,c,i,s,o));case Xe.FURNI_REMOVED:var d=e;return void u((function(e){return e&&d.id===e.objectId&&d.category===e.category?null:e}))}}),[]);qt(l.mg.REQUEST_TROPHY,d),Ht(Xe.FURNI_REMOVED,r.eventDispatcher,d);var j=Object(c.useCallback)((function(e){"close"!==e||u(null)}),[]);return s?Object($a.jsx)(Si,{color:s.color,message:s.message,date:s.date,senderName:s.ownerName,onCloseClick:function(){return j("close")}}):null},PO=n(125),LO=Object(d.a)((function e(){Object(u.a)(this,e)}));LO.UNSTARTED=-1,LO.ENDED=0,LO.PLAYING=1,LO.PAUSED=2,LO.BUFFERING=3,LO.CUED=5;var MO=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(-1),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)(null),y=Object(o.a)(I,2),C=y[0],T=y[1],S=Object(c.useState)(null),N=Object(o.a)(S,2),R=N[0],k=N[1],A=Object(c.useState)(!1),w=Object(o.a)(A,2),D=w[0],U=w[1],P=Object(c.useState)(null),L=Object(o.a)(P,2),M=L[0],F=L[1],H=ub().eventDispatcher,B=void 0===H?null:H,G=Object(c.useCallback)((function(e){if(e.type===$e.UPDATE_YOUTUBE_DISPLAY)a(e.objectId),U(e.hasControl)}),[]),W=Object(c.useCallback)((function(){a(-1),T(null),k(null),U(!1),d(null),v(null),h(null),E(-1)}),[]);Ht($e.UPDATE_YOUTUBE_DISPLAY,B,G);var V=Object(c.useCallback)((function(e){if(-1!==r){var t=e.getParser();r===t.furniId&&(d(t.videoId),h(t.startAtSeconds),v(t.endAtSeconds),E(t.state))}}),[r]),q=Object(c.useCallback)((function(e){if(-1!==r){var t=e.getParser();r===t.furniId&&(k(t.playlists),T(t.selectedPlaylistId),d(null),E(-1),v(null),h(null))}}),[r]),Y=Object(c.useCallback)((function(e){if(-1!==r){var t=e.getParser();if(r===t.furniId)switch(t.commandId){case 1:E(LO.PLAYING),M.getPlayerState()!==LO.PLAYING&&M.playVideo();break;case 2:E(LO.PAUSED),M.getPlayerState()!==LO.PAUSED&&M.pauseVideo()}}}),[r,M]);dt(l.dj,V),dt(l.cj,q),dt(l.bj,Y);var z=Object(c.useCallback)((function(e){switch(e){case"playlist_prev":ea(new l.mb(r,Wr.CONTROL_COMMAND_PREVIOUS_VIDEO));break;case"playlist_next":ea(new l.mb(r,Wr.CONTROL_COMMAND_NEXT_VIDEO));break;case"video_pause":D&&u&&u.length&&ea(new l.mb(r,Wr.CONTROL_COMMAND_PAUSE_VIDEO));break;case"video_play":D&&u&&u.length&&ea(new l.mb(r,Wr.CONTROL_COMMAND_CONTINUE_VIDEO));break;default:if(C===e)return T(null),void ea(new l.Jh(r,""));ea(new l.Jh(r,e)),T(e)}}),[D,r,C,u]),K=Object(c.useCallback)((function(e){F(e.target)}),[]),Q=Object(c.useCallback)((function(e){if(F(e.target),r)switch(e.target.getPlayerState()){case-1:case 1:return void(1!==_&&z("video_play"));case 2:2!==_&&z("video_pause")}}),[_,r,z]),X=Object(c.useMemo)((function(){return O||m?{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:O,end:m}}:{height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1}}}),[m,O]);return-1===r?null:Object($a.jsxs)(Pc,{className:"youtube-tv-widget",children:[Object($a.jsx)(Tc,{headerText:"",onCloseClick:W}),Object($a.jsx)(Ec,{children:Object($a.jsxs)("div",{className:"row w-100 h-100",children:[Object($a.jsxs)("div",{className:"youtube-video-container col-9",children:[u&&u.length>0&&Object($a.jsx)(PO.a,{videoId:u,opts:X,onReady:K,onStateChange:Q,containerClassName:"youtubeContainer"}),(!u||0===u.length)&&Object($a.jsx)("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:st("widget.furni.video_viewer.no_videos")})]}),Object($a.jsxs)("div",{className:"playlist-container col-3",children:[Object($a.jsxs)("span",{className:"playlist-controls justify-content-center d-flex",children:[Object($a.jsx)("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:function(){return z("playlist_prev")}}),Object($a.jsx)("i",{className:"icon icon-youtube-next cursor-pointer",onClick:function(){return z("playlist_next")}})]}),Object($a.jsx)("div",{className:"mb-1",children:st("widget.furni.video_viewer.playlists")}),Object($a.jsx)(cc,{columnCount:1,className:"playlist-grid",children:R&&R.map((function(e,t){return Object($a.jsxs)(ii,{onClick:function(){return z(e.video)},itemActive:e.video===C,children:[Object($a.jsx)("b",{children:e.title})," - ",e.description]},t)}))})]})]})})]})},FO=function(e){return Object($a.jsxs)("div",{className:"position-absolute nitro-room-widgets top-0 start-0 w-100 h-100",children:[Object($a.jsx)(tO,{}),Object($a.jsx)(dO,{}),Object($a.jsx)(bO,{}),Object($a.jsx)(gO,{}),Object($a.jsx)(xO,{}),Object($a.jsx)(_O,{}),Object($a.jsx)(mO,{}),Object($a.jsx)(yO,{}),Object($a.jsx)(CO,{}),Object($a.jsx)(NO,{}),Object($a.jsx)(DO,{}),Object($a.jsx)(UO,{}),Object($a.jsx)(rO,{}),Object($a.jsx)(vO,{}),Object($a.jsx)(MO,{})]})},HO=function(e){var t=e.botData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r;return n?Object($a.jsxs)(Jc,{className:"nitro-infostand rounded",style:{backgroundColor:"var(--test-galaxy)"},children:[Object($a.jsx)("div",{className:"nitro-infostand-title",children:Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},small:!0,wrap:!0,children:n.name}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:a})]})})}),Object($a.jsxs)(Jc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Jc,{fullWidth:!0,className:"body-image bot",children:Object($a.jsx)(Mc,{figure:n.figure,direction:4})}),Object($a.jsx)(Jc,{grow:!0,center:!0,gap:0,children:n.badges.length>0&&n.badges.map((function(e){return Object($a.jsx)(Gc,{badgeCode:e,showInfo:!0},e)}))})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsx)(lc,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:Object($a.jsx)(Hi,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:n.motto})}),n.carryItem>0&&Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)("hr",{className:"m-0"}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.handitem",["item"],[st("handitem"+n.carryItem)])})]})]})]}):null},BO=function(e){var t=e.furniData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=ub(),u=i.roomSession,d=void 0===u?null:u,j=(i.eventDispatcher,i.widgetHandler),b=void 0===j?null:j,O=Object(c.useState)(0),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(!1),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(!1),E=Object(o.a)(_,2),I=E[0],y=E[1],C=Object(c.useState)(!1),T=Object(o.a)(C,2),S=T[0],N=T[1],R=Object(c.useState)([]),k=Object(o.a)(R,2),A=k[0],w=k[1],D=Object(c.useState)([]),P=Object(o.a)(D,2),L=P[0],M=P[1],F=Object(c.useState)([]),H=Object(o.a)(F,2),B=H[0],W=H[1],V=Object(c.useState)([]),q=Object(o.a)(V,2),Y=q[0],z=q[1],K=Object(c.useState)(!1),Q=Object(o.a)(K,2),X=Q[0],J=Q[1],Z=Object(c.useState)(0),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(0),re=Object(o.a)(ne,2),ae=re[0],ce=re[1],ie=Object(c.useState)(!1),se=Object(o.a)(ie,2),oe=se[0],le=se[1],ue=Object(c.useState)(!1),de=Object(o.a)(ue,2),je=de[0],be=de[1],Oe=Object(c.useState)(null),he=Object(o.a)(Oe,2),fe=he[0],ge=he[1];Object(c.useEffect)((function(){var e=0,t=!1,r=!1,a=!1,c=[],i=[],o=[],u=[],j=!1,b=0,O=0,h=!1,f=!1,m=n.roomControllerLevel>=l.Yf.GUEST;if((m||n.isOwner||n.isRoomOwner||n.isAnyRoomController)&&(t=!0,r=!n.isWallItem,n.roomControllerLevel>=l.Yf.MODERATOR&&(h=!0)),n.isAnyRoomController&&(f=!0),(n.usagePolicy===l.uh.EVERYBODY||n.usagePolicy===l.uh.CONTROLLER&&m||n.extraParam===l.th.JUKEBOX&&m||n.extraParam===l.th.USABLE_PRODUCT&&m)&&(a=!0),n.extraParam){if(n.extraParam===l.th.CRACKABLE_FURNI){var v=n.stuffData;a=!0,j=!0,b=v.hits,O=v.target}if(h){var p=n.extraParam.substr(l.th.BRANDING_OPTIONS.length);if(p){var _,E=p.split("\t"),I=Object(s.a)(E);try{for(I.s();!(_=I.n()).done;){var C=_.value.split("=");C&&2===C.length&&(c.push(C[0]),i.push(C[1]))}}catch(U){I.e(U)}finally{I.f()}}}}if(h){var T=G().getRoomObject(d.roomId,n.id,n.isWallItem?l.Cg.WALL:l.Cg.FLOOR);if(T){var S=T.model.getValue(l.Ig.FURNITURE_CUSTOM_VARIABLES),R=T.model.getValue(l.Ig.FURNITURE_DATA);if(S&&S.length){var k,A=Object(s.a)(S);try{for(A.s();!(k=A.n()).done;){var D=k.value;o.push(D),u.push(R[D]||"")}}catch(U){A.e(U)}finally{A.f()}}}}n.isOwner||n.isAnyRoomController?e=2:(n.isRoomOwner||n.roomControllerLevel>=l.Yf.GUILD_ADMIN)&&(e=1),n.isStickie&&(e=0),g(e),x(t),y(r),N(a),w(c),M(i),W(o),z(u),J(j),te(b),ce(O),le(h),be(f),ge(null),n.groupId&&ea(new l.Oc(n.groupId,!1))}),[d,n]);var me=Object(c.useCallback)((function(e){var t=e.getParser();n&&n.groupId===t.id&&!t.flag&&(fe&&ge(null),ge(t.title))}),[n,fe]);dt(l.Pc,me);var ve=Object(c.useCallback)((function(e,t){var n=Array.from(L);n[e]=t,M(n)}),[L]),pe=Object(c.useCallback)((function(e,t){var n=Array.from(Y);n[e]=t,z(n)}),[Y]),xe=Object(c.useCallback)((function(){if(0===A.length||0===L.length)return"";for(var e="",t=0;t<A.length;){e=e+(A[t]+"=")+L[t]+"\t",t++}return e}),[A,L]),_e=Object(c.useCallback)((function(e){if(e&&""!==e){var t=null,r=null;switch(e){case"buy_one":return void U("catalog/open/offerId/".concat(n.purchaseOfferId));case"move":t=Ir.MOVE;break;case"rotate":t=Ir.ROTATE;break;case"pickup":t=2===f?Ir.PICKUP:Ir.EJECT;break;case"use":t=Ir.USE;break;case"save_branding_configuration":t=Ir.SAVE_STUFF_DATA,r=xe();break;case"save_custom_variables":for(var a=new Map,c=0;c<B.length;c++){var i=B[c],s=Y[c];i&&i.length&&s&&s.length&&a.set(i,s)}ea(new l.Hh(n.id,a))}t&&b.processWidgetMessage(new Ir(t,n.id,n.category,n.purchaseOfferId,r))}}),[b,n,f,B,Y,xe]),Ee=Object(c.useCallback)((function(){var e=n.stuffData;return e&&e instanceof l.Kh?e.getValue(2):null}),[n]);return n?Object($a.jsxs)(Jc,{gap:1,alignItems:"end",children:[Object($a.jsxs)(Jc,{className:"nitro-infostand rounded",style:{backgroundColor:"var(--test-galaxy)"},children:[Object($a.jsx)("div",{className:"nitro-infostand-title",children:Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},small:!0,wrap:!0,children:n.name}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:a})]})})}),Object($a.jsxs)(Jc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{position:"relative",gap:1,children:[n.stuffData.isUnique&&Object($a.jsx)("div",{className:"position-absolute end-0",children:Object($a.jsx)(ni,{uniqueNumber:n.stuffData.uniqueNumber,uniqueSeries:n.stuffData.uniqueSeries})}),n.stuffData.rarityLevel>-1&&Object($a.jsx)("div",{className:"position-absolute end-0",children:Object($a.jsx)(Ii,{level:n.stuffData.rarityLevel})}),n.image&&n.image.src.length&&Object($a.jsx)("img",{className:"d-block mx-auto",src:n.image.src,alt:""})]}),Object($a.jsx)("br",{})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",className:"bg-primary rounded py-1 px-2",children:[Object($a.jsx)("img",{src:"https://4.bp.blogspot.com/-SG4h-ciWPJY/WWf0spNEazI/AAAAAAAA7jA/VRKVjhzjmAId1nvNeG1hlneobpeeOjVtACKgBGAs/s1600/katalogi_ikoni_special_offers.gif"})," \xa0",Object($a.jsx)(Hi,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:n.description})]})}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"rgb(53, 196, 96)"},children:Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.ownerId}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("furni.owner",["name"],[n.ownerName])})]})}),n.purchaseOfferId>0&&Object($a.jsxs)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"rgb(209, 82, 84)"},children:[Object($a.jsx)("img",{src:"https://1.bp.blogspot.com/-4OnX3Id1PBA/WV-zzM-fUYI/AAAAAAAA6uo/T9IdzwyELNEKFi4FcY956S73uErSQ0nwQCKgBGAs/s1600/1904049800.png"})," \xa0",Object($a.jsx)(Hi,{variant:"white",small:!0,pointer:!0,onClick:function(e){return _e("buy_one")},children:st("infostand.button.buy")})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[X&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"m-0"}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.crackable_furni.hits_remaining",["hits","target"],[ee.toString(),ae.toString()])})]}),n.groupId>0&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"m-0"}),Object($a.jsxs)(lc,{pointer:!0,alignItems:"center",gap:2,onClick:function(){return Ia(n.groupId)},children:[Object($a.jsx)(Gc,{badgeCode:Ee(),isGroup:!0}),Object($a.jsx)(Hi,{variant:"white",underline:!0,children:fe})]})]}),oe&&Object($a.jsxs)($a.Fragment,{children:[je&&Object($a.jsx)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"rgb(64, 64, 64)"},children:Object($a.jsxs)(Hi,{small:!0,wrap:!0,variant:"white",children:["ID: ",n.id]})}),A.length>0&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"m-0"}),Object($a.jsx)(Jc,{gap:1,children:A.map((function(e,t){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:L[t],onChange:function(e){return ve(t,e.target.value)}})]},t)}))})]})]}),B.length>0&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"m-0 my-1"}),Object($a.jsx)(Jc,{gap:1,children:B.map((function(e,t){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:e}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:Y[t],onChange:function(e){return pe(t,e.target.value)}})]},t)}))})]})]})]})]}),Object($a.jsxs)(lc,{gap:1,justifyContent:"end",children:[p&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(e){return _e("move")},children:st("infostand.button.move")}),I&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(e){return _e("rotate")},children:st("infostand.button.rotate")}),0!==f&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(e){return _e("pickup")},children:st(1===f?"infostand.button.eject":"infostand.button.pickup")}),S&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(e){return _e("use")},children:st("infostand.button.use")}),A.length>0&&L.length>0&&A.length===L.length&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(){return _e("save_branding_configuration")},children:st("save")}),B.length>0&&Y.length>0&&B.length===Y.length&&Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(){return _e("save_custom_variables")},children:st("save")})]})]}):null},GO=function(e){var t=e.petData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r;return n?Object($a.jsx)(Jc,{className:"nitro-infostand rounded",children:Object($a.jsxs)(Jc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:n.name}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:a})]}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("pet.breed.".concat(n.petType,".").concat(n.petBreed))}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Jc,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:Object($a.jsx)(pi,{figure:n.petFigure,posture:n.posture,direction:4})}),Object($a.jsxs)(Jc,{grow:!0,gap:1,children:[Object($a.jsx)(Hi,{variant:"white",center:!0,small:!0,wrap:!0,children:st("pet.level",["level","maxlevel"],[n.level.toString(),n.maximumLevel.toString()])}),Object($a.jsxs)(Jc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"white",small:!0,truncate:!0,children:st("infostand.pet.text.happiness")}),Object($a.jsxs)(tc,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object($a.jsx)(lc,{fit:!0,center:!0,position:"absolute",children:Object($a.jsx)(Hi,{variant:"white",small:!0,children:n.happyness+"/"+n.maximumHappyness})}),Object($a.jsx)(tc,{className:"bg-info rounded pet-stats",style:{width:n.happyness/n.maximumHappyness*100+"%"}})]})]}),Object($a.jsxs)(Jc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"white",small:!0,truncate:!0,children:st("infostand.pet.text.experience")}),Object($a.jsxs)(tc,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object($a.jsx)(lc,{fit:!0,center:!0,position:"absolute",children:Object($a.jsx)(Hi,{variant:"white",small:!0,children:n.experience+"/"+n.levelExperienceGoal})}),Object($a.jsx)(tc,{className:"bg-purple rounded pet-stats",style:{width:n.experience/n.levelExperienceGoal*100+"%"}})]})]}),Object($a.jsxs)(Jc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Hi,{variant:"white",small:!0,truncate:!0,children:st("infostand.pet.text.energy")}),Object($a.jsxs)(tc,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[Object($a.jsx)(lc,{fit:!0,center:!0,position:"absolute",children:Object($a.jsx)(Hi,{variant:"white",small:!0,children:n.energy+"/"+n.maximumEnergy})}),Object($a.jsx)(tc,{className:"bg-success rounded pet-stats",style:{width:n.energy/n.maximumEnergy*100+"%"}})]})]})]})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.petrespect",["count"],[n.respect.toString()])}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("pet.age",["age"],[n.age.toString()])}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.ownerId}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.petowner",["name"],[n.ownerName])})]})})]})}):null},WO=function(e){var t=e.rentableBotData,n=void 0===t?null:t,r=e.close,a=void 0===r?null:r,i=Object(c.useMemo)((function(){return!(n.botSkills.indexOf(hb.NO_PICK_UP)>=0)&&!(!n.amIOwner&&!n.amIAnyRoomController)}),[n]);if(n)return Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(Jc,{className:"nitro-infostand rounded",style:{backgroundColor:"var(--test-galaxy)"},children:[Object($a.jsx)("div",{className:"nitro-infostand-title",children:Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},small:!0,wrap:!0,children:n.name}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:a})]})})}),Object($a.jsxs)(Jc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Jc,{fullWidth:!0,className:"body-image bot",children:Object($a.jsx)(Mc,{figure:n.figure,direction:4})}),Object($a.jsx)(Jc,{grow:!0,center:!0,gap:0,children:n.badges.length>0&&n.badges.map((function(e){return Object($a.jsx)(Gc,{badgeCode:e,showInfo:!0},e)}))})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",className:"bg-primary rounded py-1 px-2",children:[Object($a.jsx)(mc.a,{icon:"pencil-alt",className:"small",style:{marginLeft:"1px"}})," \xa0\xa0",Object($a.jsx)(Hi,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:n.motto})]})}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"rgb(53, 196, 96)"},children:Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.ownerId}),Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.botowner",["name"],[n.ownerName])})]})}),n.carryItem>0&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"rgb(209, 82, 84)"},children:[Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/catalogue/icon_70.png"})," \xa0",Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.handitem",["item"],[st("handitem"+n.carryItem)])})]})})]})]})]}),i&&Object($a.jsx)(lc,{justifyContent:"end",children:Object($a.jsx)(dc,{variant:"none",className:"text-white",style:{backgroundColor:"var(--test-galaxytwo)"},onClick:function(){return ea(new l.A(n.webID))},children:st("infostand.button.pickup")})})]})},VO=function(e){var t=e.relationships,n=void 0===t?null:t,r=function(e){var t=e.type,r=n&&n.relationshipStatusMap.hasKey(t)?n.relationshipStatusMap.getValue(t):null;if(!r||!r.friendCount)return null;var a=l.Ff.RELATIONSHIP_NAMES[t].toLocaleLowerCase();return Object($a.jsxs)(lc,{alignItems:"center",gap:1,style:{backgroundColor:"#7d7d7d",padding:5},children:[Object($a.jsx)("i",{className:"nitro-friends-spritesheet icon-".concat(a)}),Object($a.jsxs)(Hi,{small:!0,variant:"none",style:{color:"var(--test-galaxytext)"},onClick:function(e){return Ga(r.randomFriendId)},children:[r.randomFriendName,r.friendCount>1&&" "+st("extendedprofile.relstatus.others.".concat(a),["count"],[(r.friendCount-1).toString()])]})]})};return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(r,{type:l.Ff.HEART}),Object($a.jsx)(r,{type:l.Ff.SMILE}),Object($a.jsx)(r,{type:l.Ff.BOBBA})]})},qO=function(e){var t=e.userData,n=void 0===t?null:t,r=e.setUserData,a=void 0===r?null:r,i=e.close,s=void 0===i?null:i,u=Object(c.useState)(null),d=Object(o.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],g=h[1],m=Object(c.useState)(null),v=Object(o.a)(m,2),p=v[0],x=v[1],_=ub(),E=_.eventDispatcher,I=void 0===E?null:E,y=_.widgetHandler,C=void 0===y?null:y,T=(L("user.badges.max.slots",5),Object(c.useState)(null)),S=Object(o.a)(T,2),N=S[0],R=S[1],k=new URLSearchParams(window.location.search).get("sso"),A=function(e){!f||e.length>L("motto.max.length",38)||(C.processWidgetMessage(new Or(e)),g(!1))},w=Object(c.useCallback)((function(e){n&&n.webID===e.userId&&a((function(t){var n=rt(t);return n.badges=e.badges,n}))}),[n,a]);Ht(l.Yg.RSUBE_BADGES,I,w);var D=Object(c.useCallback)((function(e){n&&n.roomIndex===e.roomIndex&&a((function(t){var n=rt(t);return n.figure=e.figure,n.motto=e.customInfo,n.achievementScore=e.activityPoints,n}))}),[n,a]);Ht(l.ah.USER_FIGURE,I,D);var U=Object(c.useCallback)((function(e){n&&n.roomIndex===e.roomIndex&&a((function(t){var n=rt(t),r=-1===e.status||e.habboGroupId<=0;return n.groupId=r?-1:e.habboGroupId,n.groupName=r?null:e.habboGroupName,n.groupBadgeId=r?null:ae().getGroupBadge(e.habboGroupId),n}))}),[n,a]);Ht(l.Tg.FAVOURITE_GROUP_UPDATE,I,U);var P=Object(c.useCallback)((function(e){var t=e.getParser();n&&n.webID===t.userId&&x(t)}),[n]);return dt(l.Gf,P),Object(c.useEffect)((function(){return g(!1),b(n.motto),ea(new l.Ei(n.webID)),fetch("https://int.lavvos.eu/?type=getbanner&sso="+k+"&username="+n.name).then((function(e){return e.text()})).then((function(e){R(null==e||"ERROR"==e?"https://lavvos.eu/swfs/banners/banner1.png":"https://lavvos.eu/swfs/banners/banner"+e.replace(/\n/g,"")+".png")})),function(){g(!1),b(null),x(null)}}),[n]),n?Object($a.jsxs)(Jc,{className:"nitro-infostand rounded",style:{backgroundColor:"var(--test-galaxy)"},children:[Object($a.jsx)("div",{className:"nitro-infostand-title",children:Object($a.jsx)(Jc,{gap:1,children:Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(Ri,{userId:n.webID}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},small:!0,wrap:!0,children:n.name})]}),Object($a.jsx)(mc.a,{icon:"times",className:"cursor-pointer",onClick:s})]})})}),Object($a.jsxs)(Jc,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(Jc,{fullWidth:!0,className:"body-image",onClick:function(e){return Ga(n.webID)},style:{backgroundImage:"url("+N+")",borderRadius:"10px"},children:Object($a.jsx)(Mc,{figure:n.figure,direction:4})}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(tc,{className:"badge-image",children:n.badges[0]&&Object($a.jsx)(Gc,{badgeCode:n.badges[0],showInfo:!0})}),Object($a.jsx)(tc,{pointer:n.groupId>0,className:"badge-image",onClick:function(e){return Ia(n.groupId)},children:n.groupId>0&&Object($a.jsx)(Gc,{badgeCode:n.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:n.groupName})})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(tc,{className:"badge-image",children:n.badges[1]&&Object($a.jsx)(Gc,{badgeCode:n.badges[1],showInfo:!0})}),Object($a.jsx)(tc,{className:"badge-image",children:n.badges[2]&&Object($a.jsx)(Gc,{badgeCode:n.badges[2],showInfo:!0})})]}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)(tc,{className:"badge-image",children:n.badges[3]&&Object($a.jsx)(Gc,{badgeCode:n.badges[3],showInfo:!0})}),Object($a.jsx)(tc,{className:"badge-image",children:n.badges[4]&&Object($a.jsx)(Gc,{badgeCode:n.badges[4],showInfo:!0})})]})]})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",className:"bg-primary rounded py-1 px-2",children:[n.type!==qe.OWN_USER&&Object($a.jsxs)(lc,{grow:!0,alignItems:"center",gap:2,children:[Object($a.jsx)(mc.a,{icon:"pencil-alt",className:"small",style:{marginLeft:"1px"}}),Object($a.jsx)(lc,{grow:!0,alignItems:"center",className:"motto-content",children:Object($a.jsx)(Hi,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:j})})]}),n.type===qe.OWN_USER&&Object($a.jsxs)(lc,{grow:!0,alignItems:"center",gap:2,children:[Object($a.jsx)(mc.a,{icon:"pencil-alt",className:"small",style:{marginLeft:"1px"}}),Object($a.jsxs)(lc,{grow:!0,alignItems:"center",className:"motto-content",children:[!f&&Object($a.jsxs)(Hi,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:function(e){return g(!0)},children:[j,"\xa0"]}),f&&Object($a.jsx)("input",{type:"text",className:"motto-input",maxLength:L("motto.max.length",38),value:j,onChange:function(e){return b(e.target.value)},onBlur:function(e){return A(e.target.value)},onKeyDown:function(e){e.stopPropagation(),"Enter"!==e.key||A(e.target.value)},autoFocus:!0})]})]})]}),Object($a.jsx)("hr",{className:"m-0"})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"#35c460"},children:[Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/catalogue/icon_256.png"})," \xa0",Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.achievement_score")+" "+n.achievementScore})]}),n.carryItem>0&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(lc,{alignItems:"center",className:"rounded py-1 px-2",style:{backgroundColor:"#d15254"},children:[Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/catalogue/icon_70.png"})," \xa0",Object($a.jsx)(Hi,{variant:"white",small:!0,wrap:!0,children:st("infostand.text.handitem",["item"],[st("handitem"+n.carryItem)])})]})})]}),Object($a.jsx)(Jc,{gap:1,children:Object($a.jsx)(VO,{relationships:p})})]})]}):null},YO=function(e){var t=ub(),n=t.eventDispatcher,r=void 0===n?null:n,a=t.widgetHandler,i=void 0===a?null:a,s=Object(c.useState)(null),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useCallback)((function(){d(null)}),[]),b=Object(c.useCallback)((function(e){switch(e.type){case Xe.OBJECT_SELECTED:var t=e;return void i.processWidgetMessage(new Nr(Nr.GET_OBJECT_INFO,t.id,t.category));case Xe.OBJECT_DESELECTED:return void j();case Xe.FURNI_REMOVED:case Xe.USER_REMOVED:var n=e;return void d((function(t){switch(e.type){case Xe.FURNI_REMOVED:if(t instanceof Ge&&t.id===n.id)return null;break;case Xe.USER_REMOVED:if(t instanceof qe||t instanceof Ve){if(t.roomIndex===n.id)return null}else if(t instanceof We&&t.roomIndex===n.id)return null}return t}));case Ge.FURNI:case qe.OWN_USER:case qe.PEER:case qe.BOT:case Ve.RENTABLE_BOT:case We.PET_INFO:return void d(e);default:return void console.log(e)}}),[i,j]);Ht(Xe.OBJECT_SELECTED,r,b),Ht(Xe.OBJECT_DESELECTED,r,b),Ht(Xe.USER_REMOVED,r,b),Ht(Xe.FURNI_REMOVED,r,b),Ht(Ge.FURNI,r,b),Ht(qe.OWN_USER,r,b),Ht(qe.PEER,r,b),Ht(qe.BOT,r,b),Ht(Ve.RENTABLE_BOT,r,b),Ht(We.PET_INFO,r,b),Ht(We.PET_INFO,r,b);var O=Object(c.useCallback)((function(){if(!u)return null;switch(u.type){case Ge.FURNI:return Object($a.jsx)(BO,{furniData:u,close:j});case qe.OWN_USER:case qe.PEER:return Object($a.jsx)(qO,{userData:u,setUserData:d,close:j});case qe.BOT:return Object($a.jsx)(HO,{botData:u,close:j});case Ve.RENTABLE_BOT:return Object($a.jsx)(WO,{rentableBotData:u,close:j});case We.PET_INFO:return Object($a.jsx)(GO,{petData:u,close:j})}return null}),[u,j]);return u?Object($a.jsx)(Jc,{alignItems:"end",className:"nitro-infostand-container animate__animated animate__backInRight",style:{marginBottom:"20px"},children:O()}):null},zO=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=ub().roomSession,s=void 0===i?null:i,l=Object(c.useCallback)((function(e){switch(e.type){case Lt.SHOW_THUMBNAIL:return void a(!0);case Lt.HIDE_THUMBNAIL:return void a(!1);case Lt.TOGGLE_THUMBNAIL:return void a((function(e){return!e}))}}),[]);Qt(Lt.SHOW_THUMBNAIL,l),Qt(Lt.HIDE_THUMBNAIL,l),Qt(Lt.TOGGLE_THUMBNAIL,l);var u=Object(c.useCallback)((function(e){G().saveTextureAsScreenshot(e,!0),a(!1)}),[]);return r?Object($a.jsx)(ui,{roomId:s.roomId,textureReceiver:u,onClose:function(){return a(!1)}}):null},KO=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),_=(x[0],x[1],Object(c.useState)(!1)),E=Object(o.a)(_,2),I=E[0],y=E[1],C=yn(),T=Object(o.a)(C,2),S=T[0],N=(T[1],ub()),R=N.roomSession,k=void 0===R?null:R,A=(N.widgetHandler,new URLSearchParams(window.location.search).get("sso"));var w=function(e){switch(e){case"settings":return void U("navigator/toggle-room-info");case"zoom":return void a((function(e){var t=G().getRoomInstanceRenderingCanvasScale(k.roomId,1);return e?t*=2:t/=2,G().setRoomInstanceRenderingCanvasScale(k.roomId,1,t),!e}));case"chat_history":return void U("chat-history/toggle");case"like_room":return void ea(new l.zg(1));case"toggle_room_link":return void U("navigator/toggle-room-link")}},D=Object(c.useCallback)((function(e){var t=e.getParser();t.roomEnter&&(u!==t.data.roomName&&d(t.data.roomName),O!==t.data.ownerName&&h(t.data.ownerName),m!==t.data.tags&&v(t.data.tags))}),[u,O,m]);return dt(l.jc,D),Object(c.useEffect)((function(){y(!0);var e=setTimeout((function(){return y(!1)}),5e3);return function(){return clearTimeout(e)}}),[u,O,m]),Object($a.jsxs)(lc,{className:"nitro-room-tools-container",gap:2,style:{marginBottom:"45px"},children:[Object($a.jsxs)(Jc,{center:!0,className:"nitro-room-tools p-2",children:[Object($a.jsx)(tc,{pointer:!0,title:st("room.settings.button.text"),className:"icon icon-cog",onClick:function(){return w("settings")}}),Object($a.jsx)(tc,{pointer:!0,title:st("room.zoom.button.text"),onClick:function(){return w("zoom")},className:"icon "+io()({"icon-zoom-less":!r,"icon-zoom-more":r})}),Object($a.jsx)(tc,{pointer:!0,title:st("room.chathistory.button.text"),onClick:function(){return w("chat_history")},className:"icon icon-chat-history"}),Object($a.jsx)(tc,{pointer:!0,title:st("room.chathistory.button.text"),onClick:function(e){fetch("https://int.lavvos.eu/?type=builderTool&sso="+A)},className:"icon icon-baw-tool"}),Object($a.jsx)(tc,{pointer:!0,title:st("room.chathistory.button.text"),onClick:function(e){return U("ratecatalog/show")},className:"icon icon-ltd-catalog"}),S.canRate&&Object($a.jsx)(tc,{pointer:!0,title:st("room.like.button.text"),onClick:function(){return w("like_room")},className:"icon icon-like-room"})]}),Object($a.jsx)(Jc,{justifyContent:"center",children:Object($a.jsx)(fi,{type:Oi.SLIDE_LEFT,inProp:I,timeout:300,children:Object($a.jsx)(Jc,{center:!0,children:Object($a.jsxs)(Jc,{className:"nitro-room-tools-info rounded py-2 px-3",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{wrap:!0,variant:"none",style:{color:"var(--test-galaxytext)"},fontSize:4,children:u}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},fontSize:5,children:O})]}),m&&m.length>0&&Object($a.jsx)(lc,{gap:2,children:m.map((function(e,t){return Object($a.jsxs)(Hi,{small:!0,variant:"white",className:"rounded bg-primary p-1",children:["#",e]},t)}))})]})})})})]})},QO="0",XO=function(e){var t=e.question,n=void 0===t?null:t,r=e.canVote,a=void 0===r?null:r,c=e.vote,i=void 0===c?null:c,s=e.noVotes,o=void 0===s?null:s,l=e.yesVotes,u=void 0===l?null:l;return Object($a.jsxs)(Jc,{gap:2,className:"wordquiz-question p-2",children:[!a&&Object($a.jsxs)(lc,{fullWidth:!0,alignItems:"center",gap:2,children:[Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:Object($a.jsx)(Hi,{variant:"white",children:o})}),Object($a.jsx)(Hi,{variant:"white",center:!0,textBreak:!0,children:n}),Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:Object($a.jsx)(Hi,{variant:"white",children:u})})]}),a&&Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{variant:"white",center:!0,textBreak:!0,children:n}),Object($a.jsxs)(lc,{fullWidth:!0,justifyContent:"center",gap:1,children:[Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:function(e){return i(QO)},children:Object($a.jsx)(tc,{className:"word-quiz-dislike"})}),Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:function(e){return i("1")},children:Object($a.jsx)(tc,{className:"word-quiz-like"})})]})]})]})},JO=n(82),ZO=["userIndex","vote"],$O=function(e){var t=e.userIndex,n=void 0===t?null:t,r=e.vote,a=void 0===r?null:r,c=Object(Za.a)(e,ZO);return Object($a.jsx)(Zb,Object(bt.a)(Object(bt.a)({objectId:n,category:JO.Eg.UNIT},c),{},{children:Object($a.jsx)(lc,{center:!0,pointer:!0,className:"bg-".concat(a===QO?"danger":"success"," rounded p-1"),children:Object($a.jsx)(tc,{className:"word-quiz-".concat(a===QO?"dislike":"like","-sm")})})}))},eh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=Object(c.useState)(null),f=Object(o.a)(h,2),g=(f[0],f[1]),m=Object(c.useState)(new Map),v=Object(o.a)(m,2),p=v[0],x=v[1],_=Object(c.useState)(new Map),E=Object(o.a)(_,2),I=E[0],y=E[1],C=ub(),T=C.eventDispatcher,S=void 0===T?null:T,N=C.widgetHandler,R=void 0===N?null:N,k=C.roomSession,A=void 0===k?null:k,w=Object(c.useCallback)((function(){a(-1),u(null)}),[]),D=Object(c.useCallback)((function(e){switch(e.type){case tt.NEW_QUESTION:a(e.id),u(e.question),O(!1),x(new Map),y(new Map),g((function(t){if(t&&clearTimeout(t),e.duration>0){var n=e.duration<1e3?4e3:e.duration;return setTimeout((function(){return w()}),n)}return null}));break;case tt.QUESTION_ANSWERED:var t=A.userDataManager.getUserData(e.userId);if(!t)return;x(e.answerCounts),y((function(n){if(!n.has(t.roomIndex)){var r=new Map(I);return r.set(t.roomIndex,{value:e.value,secondsLeft:3}),r}return n}));break;case tt.QUESTION_FINISHED:l&&l.id===e.questionId&&(x(e.answerCounts),O(!0),g((function(e){return e&&clearTimeout(e),setTimeout((function(){return w()}),4e3)}))),y(new Map)}}),[l,A.userDataManager,I,w]);Ht(tt.NEW_QUESTION,S,D),Ht(tt.QUESTION_ANSWERED,S,D),Ht(tt.QUESTION_FINISHED,S,D);var U=Object(c.useCallback)((function(e){if(!b&&l){var t=new Cr(Cr.ANSWER,r);t.questionId=l.id,t.answers=[e],R.processWidgetMessage(t),O(!0)}}),[b,r,l,R]),P=Object(c.useCallback)((function(){y((function(e){var t=[];if(e.forEach((function(e,n){e.secondsLeft--,e.secondsLeft<=0&&t.push(n)})),0===t.length)return e;var n=new Map(e);return t.forEach((function(e){return n.delete(e)})),n}))}),[]);return Object(c.useEffect)((function(){var e=setInterval((function(){return P()}),1e3);return function(){return clearInterval(e)}}),[P]),Object(c.useEffect)((function(){return function(){g((function(e){return e&&clearTimeout(e),null}))}}),[]),Object($a.jsxs)($a.Fragment,{children:[l&&Object($a.jsx)(XO,{question:l.content,canVote:!b,vote:U,noVotes:p.get(QO)||0,yesVotes:p.get("1")||0}),I&&Array.from(I.entries()).map((function(e,t){var n=Object(o.a)(e,2),r=n[0],a=n[1];return Object($a.jsx)($O,{userIndex:r,vote:a.value},t)}))]})},th=function(e){var t=ub(),n=t.roomSession,r=void 0===n?null:n,a=t.eventDispatcher,i=void 0===a?null:a,s=t.widgetHandler,o=void 0===s?null:s,u=Object(c.useCallback)((function(e){if(i&&!l.vg.isRoomPreviewerId(e.roomId))switch(e.type){case l.ig.NORMAL_MODE:return void i.dispatchEvent(new Qe(Qe.NORMAL_MODE,e.roomId));case l.ig.GAME_MODE:return void i.dispatchEvent(new Qe(Qe.GAME_MODE,e.roomId));case l.vh.ROOM_ZOOM:var t=e;return void G().setRoomInstanceRenderingCanvasScale(e.roomId,1,t.level,null,null,!1,t.asDelta)}}),[i]);qt(l.ig.NORMAL_MODE,u),qt(l.ig.GAME_MODE,u),qt(l.vh.ROOM_ZOOM,u);var d=Object(c.useCallback)((function(e){}),[]),j=Object(c.useCallback)((function(e){}),[]),b=Object(c.useCallback)((function(e){if(r&&o){var t=e.objectId,n=e.category,a=null;switch(e.type){case l.jg.SELECTED:(function(e){var t=!1,n=G().getRoomObject(e.roomId,e.objectId,e.category);return n&&1===n.model.getValue(l.Ig.FURNITURE_SELECTION_DISABLED)&&(t=!0,ae().isModerator&&(t=!1)),t})(e)||(a=new Xe(Xe.OBJECT_SELECTED,t,n,e.roomId));break;case l.jg.DESELECTED:a=new Xe(Xe.OBJECT_DESELECTED,t,n,e.roomId);break;case l.jg.ADDED:var c=null;switch(n){case l.Cg.FLOOR:case l.Cg.WALL:c=Xe.FURNI_ADDED;break;case l.Cg.UNIT:c=Xe.USER_ADDED}c&&(a=new Xe(c,t,n,e.roomId));break;case l.jg.REMOVED:var i=null;switch(n){case l.Cg.FLOOR:case l.Cg.WALL:i=Xe.FURNI_REMOVED;break;case l.Cg.UNIT:i=Xe.USER_REMOVED}i&&(a=new Xe(i,t,n,e.roomId));break;case l.jg.REQUEST_MOVE:$(r,t,n)&&ve(t,n,l.Eg.OBJECT_MOVE);break;case l.jg.REQUEST_ROTATE:$(r,t,n)&&ve(t,n,l.Eg.OBJECT_ROTATE_POSITIVE);break;case l.jg.REQUEST_MANIPULATION:$(r,t,n)&&(a=new Xe(Xe.OBJECT_REQUEST_MANIPULATION,t,n,e.roomId));break;case l.jg.MOUSE_ENTER:a=new Xe(Xe.OBJECT_ROLL_OVER,t,n,e.roomId);break;case l.jg.MOUSE_LEAVE:a=new Xe(Xe.OBJECT_ROLL_OUT,t,n,e.roomId);break;case l.mg.REQUEST_CREDITFURNI:o.processWidgetMessage(new yr(yr.REQUEST_CREDITFURNI,t,n,e.roomId));break;case l.mg.REQUEST_STICKIE:o.processWidgetMessage(new yr(yr.REQUEST_STICKIE,t,n,e.roomId));break;case l.mg.REQUEST_PRESENT:o.processWidgetMessage(new yr(yr.REQUEST_PRESENT,t,n,e.roomId));break;case l.mg.REQUEST_TROPHY:o.processWidgetMessage(new yr(yr.REQUEST_TROPHY,t,n,e.roomId));break;case l.mg.REQUEST_TEASER:o.processWidgetMessage(new yr(yr.REQUEST_TEASER,t,n,e.roomId));break;case l.mg.REQUEST_ECOTRONBOX:o.processWidgetMessage(new yr(yr.REQUEST_ECOTRONBOX,t,n,e.roomId));break;case l.mg.REQUEST_DIMMER:o.processWidgetMessage(new yr(yr.REQUEST_DIMMER,t,n,e.roomId));break;case l.mg.REQUEST_PLACEHOLDER:o.processWidgetMessage(new yr(yr.REQUEST_PLACEHOLDER,t,n,e.roomId));break;case l.mg.REQUEST_CLOTHING_CHANGE:o.processWidgetMessage(new yr(yr.REQUEST_CLOTHING_CHANGE,t,n,e.roomId));break;case l.mg.REQUEST_PLAYLIST_EDITOR:o.processWidgetMessage(new yr(yr.REQUEST_PLAYLIST_EDITOR,t,n,e.roomId));break;case l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:o.processWidgetMessage(new yr(yr.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,t,n,e.roomId));break;case l.mg.REQUEST_BADGE_DISPLAY_ENGRAVING:o.processWidgetMessage(new yr(yr.REQUEST_BADGE_DISPLAY_ENGRAVING,t,n,e.roomId));break;case l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED:G().getRoomObject(e.roomId,t,n).model.getValue(l.Ig.FURNITURE_OWNER_ID)===ae().userId&&o.processWidgetMessage(new yr(yr.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,t,n,e.roomId));break;case l.mg.OPEN_WIDGET:case l.mg.CLOSE_WIDGET:case l.mg.OPEN_FURNI_CONTEXT_MENU:case l.mg.CLOSE_FURNI_CONTEXT_MENU:case l.mg.REMOVE_DIMMER:case l.mg.REQUEST_MANNEQUIN:case l.ng.USE_PRODUCT_FROM_INVENTORY:case l.ng.USE_PRODUCT_FROM_ROOM:case l.mg.REQUEST_BACKGROUND_COLOR:case l.mg.REQUEST_FRIEND_FURNITURE_ENGRAVING:case l.mg.REQUEST_HIGH_SCORE_DISPLAY:case l.mg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case l.mg.REQUEST_INTERNAL_LINK:case l.mg.REQUEST_ROOM_LINK:o.processEvent(e);break;case l.lg.FURNI_CLICK:case l.lg.FURNI_DOUBLE_CLICK:d(e);break;case l.lg.TOOLTIP_SHOW:case l.lg.TOOLTIP_HIDE:j(e)}if(a){var s=!0;a instanceof Xe&&(s=!l.vg.isRoomPreviewerId(a.roomId)),s&&o.eventDispatcher.dispatchEvent(a)}}}),[r,o,d,j]);qt(l.jg.SELECTED,b),qt(l.jg.DESELECTED,b),qt(l.jg.ADDED,b),qt(l.jg.REMOVED,b),qt(l.jg.PLACED,b),qt(l.jg.REQUEST_MOVE,b),qt(l.jg.REQUEST_ROTATE,b),qt(l.jg.REQUEST_MANIPULATION,b),qt(l.jg.MOUSE_ENTER,b),qt(l.jg.MOUSE_LEAVE,b),qt(l.mg.REQUEST_CREDITFURNI,b),qt(l.mg.REQUEST_STICKIE,b),qt(l.mg.REQUEST_PRESENT,b),qt(l.mg.REQUEST_TROPHY,b),qt(l.mg.REQUEST_TEASER,b),qt(l.mg.REQUEST_ECOTRONBOX,b),qt(l.mg.REQUEST_DIMMER,b),qt(l.mg.REQUEST_PLACEHOLDER,b),qt(l.mg.REQUEST_CLOTHING_CHANGE,b),qt(l.mg.REQUEST_PLAYLIST_EDITOR,b),qt(l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,b),qt(l.mg.REQUEST_BADGE_DISPLAY_ENGRAVING,b),qt(l.mg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,b),qt(l.mg.OPEN_WIDGET,b),qt(l.mg.CLOSE_WIDGET,b),qt(l.mg.OPEN_FURNI_CONTEXT_MENU,b),qt(l.mg.CLOSE_FURNI_CONTEXT_MENU,b),qt(l.mg.REMOVE_DIMMER,b),qt(l.mg.REQUEST_MANNEQUIN,b),qt(l.ng.USE_PRODUCT_FROM_INVENTORY,b),qt(l.ng.USE_PRODUCT_FROM_ROOM,b),qt(l.mg.REQUEST_BACKGROUND_COLOR,b),qt(l.mg.REQUEST_FRIEND_FURNITURE_ENGRAVING,b),qt(l.mg.REQUEST_HIGH_SCORE_DISPLAY,b),qt(l.mg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,b),qt(l.mg.REQUEST_INTERNAL_LINK,b),qt(l.mg.REQUEST_ROOM_LINK,b),qt(l.lg.FURNI_CLICK,b),qt(l.lg.FURNI_DOUBLE_CLICK,b),qt(l.lg.TOOLTIP_SHOW,b),qt(l.lg.TOOLTIP_HIDE,b);var O=Object(c.useCallback)((function(e){o&&o.processEvent(e)}),[o]);Yt(l.Ng.CHAT_EVENT,O),Yt(l.Ng.FLOOD_EVENT,O),Yt(l.Og.RSDE_DANCE,O),Yt(l.Yg.RSUBE_BADGES,O),Yt(l.ah.USER_FIGURE,O),Yt(l.Tg.FAVOURITE_GROUP_UPDATE,O),Yt(l.Vg.PET_STATUS_UPDATE,O),Yt(l.Qg.DOORBELL,O),Yt(l.Qg.RSDE_REJECTED,O),Yt(l.Qg.RSDE_ACCEPTED,O),Yt(l.Pg.ROOM_DIMMER_PRESETS,O),Yt(l.Xg.RSPE_PRESENT_OPENED,O),Yt(l.Ug.PET_INFO,O),Yt(l.bh.ANSWERED,O),Yt(l.bh.FINISHED,O),Yt(l.bh.QUESTION,O),Yt(l.Wg.OFFER,O),Yt(l.Wg.ERROR,O),Yt(l.Wg.CONTENT,O);var h=Object(c.useCallback)((function(e){if(e){var t=st("error.title"),n="";switch(e.type){case l.Rg.RSEME_MAX_PETS:n=st("room.error.max_pets");break;case l.Rg.RSEME_MAX_NUMBER_OF_OWN_PETS:n=st("room.error.max_own_pets");break;case l.Rg.RSEME_KICKED:n=st("room.error.kicked"),t=st("generic.alert.title");break;case l.Rg.RSEME_PETS_FORBIDDEN_IN_HOTEL:n=st("room.error.pets.forbidden_in_hotel");break;case l.Rg.RSEME_PETS_FORBIDDEN_IN_FLAT:n=st("room.error.pets.forbidden_in_flat");break;case l.Rg.RSEME_NO_FREE_TILES_FOR_PET:n=st("room.error.pets.no_free_tiles");break;case l.Rg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:n=st("room.error.pets.selected_tile_not_free");break;case l.Rg.RSEME_BOTS_FORBIDDEN_IN_HOTEL:n=st("room.error.bots.forbidden_in_hotel");break;case l.Rg.RSEME_BOTS_FORBIDDEN_IN_FLAT:n=st("room.error.bots.forbidden_in_flat");break;case l.Rg.RSEME_BOT_LIMIT_REACHED:n=st("room.error.max_bots");break;case l.Rg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:n=st("room.error.bots.selected_tile_not_free");break;case l.Rg.RSEME_BOT_NAME_NOT_ACCEPTED:n=st("room.error.bots.name.not.accepted");break;default:return}Ha.simpleAlert(n,Ua.DEFAULT,null,null,t)}}),[]);return Yt(l.Rg.RSEME_KICKED,h),Yt(l.Rg.RSEME_PETS_FORBIDDEN_IN_HOTEL,h),Yt(l.Rg.RSEME_PETS_FORBIDDEN_IN_FLAT,h),Yt(l.Rg.RSEME_MAX_PETS,h),Yt(l.Rg.RSEME_MAX_NUMBER_OF_OWN_PETS,h),Yt(l.Rg.RSEME_NO_FREE_TILES_FOR_PET,h),Yt(l.Rg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,h),Yt(l.Rg.RSEME_BOTS_FORBIDDEN_IN_HOTEL,h),Yt(l.Rg.RSEME_BOTS_FORBIDDEN_IN_FLAT,h),Yt(l.Rg.RSEME_BOT_LIMIT_REACHED,h),Yt(l.Rg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,h),Yt(l.Rg.RSEME_BOT_NAME_NOT_ACCEPTED,h),o?Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(Pb,{}),Object($a.jsx)(Yb,{}),Object($a.jsx)(Bb,{}),Object($a.jsx)(Xb,{}),Object($a.jsx)(FO,{}),Object($a.jsx)(YO,{}),Object($a.jsx)(KO,{}),Object($a.jsx)(zO,{}),Object($a.jsx)(Kb,{}),Object($a.jsx)(Qb,{}),Object($a.jsx)(eh,{}),Object($a.jsx)(eO,{})]}):null},nh=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useRef)(),b=Object(c.useCallback)((function(e){if(!l.vg.isRoomPreviewerId(e.roomId)){var t=ue();if(t)switch(e.type){case l.ig.INITIALIZED:return pe(e.roomId),void a(t);case l.ig.DISPOSED:return void a(null)}}}),[]);qt(l.ig.INITIALIZED,b),qt(l.ig.DISPOSED,b);var O=Object(c.useCallback)((function(e){switch(e.type){case l.Sg.CREATED:return t=e.session,void ee().startSession(t);case l.Sg.ENDED:return void a(null)}var t}),[]);Yt(l.Sg.CREATED,O),Yt(l.Sg.ENDED,O);var h=Object(c.useCallback)((function(){var e=N().renderer.view;if(e){e.style.width="".concat(Math.floor(window.innerWidth),"px"),e.style.height="".concat(Math.floor(window.innerHeight),"px");var t=N();t.renderer.resolution=window.devicePixelRatio,t.renderer.resize(window.innerWidth,window.innerHeight),me(window.innerWidth,window.innerHeight,1),t.render()}}),[]);return Object(c.useEffect)((function(){if(r){var e=new Qr(r,new l.vb);e.registerHandler(new Yr),e.registerHandler(new Jr),e.registerHandler(new Kr),e.registerHandler(new zr),e.registerHandler(new Zr),e.registerHandler(new $r),e.registerHandler(new Vr),e.registerHandler(new wr),e.registerHandler(new Dr),e.registerHandler(new Ur),e.registerHandler(new Pr),e.registerHandler(new Mr),e.registerHandler(new Br),e.registerHandler(new Lr),e.registerHandler(new Wr),e.registerHandler(new Hr),e.registerHandler(new Fr),e.registerHandler(new Gr),d(e);var t=G(),n=r.roomId;h();var a=t.getRoomInstanceDisplay(n,1,window.innerWidth,window.innerHeight,l.ug.SCALE_ZOOMED_IN);if(a){var c=t.getRoomInstanceGeometry(n,1);if(c){var i=((t.getRoomInstanceVariable(n,l.ph.ROOM_MIN_X)||0)+(t.getRoomInstanceVariable(n,l.ph.ROOM_MAX_X)||0))/2,s=((t.getRoomInstanceVariable(n,l.ph.ROOM_MIN_Y)||0)+(t.getRoomInstanceVariable(n,l.ph.ROOM_MAX_Y)||0))/2;i+=19,s+=19;var o=Math.sqrt(800)*Math.tan(30/180*Math.PI);c.location=new l.Oi(i,s,o)}var u=N().stage;u&&(u.addChild(a),pe(r.roomId))}}else d(null)}),[r,h]),Object(c.useEffect)((function(){var e=N().renderer.view;if(e){e.onclick=function(e){return Y(e)},e.onmousemove=function(e){return Y(e)},e.onmousedown=function(e){return Y(e)},e.onmouseup=function(e){return Y(e)},e.ontouchstart=function(e){return J(e)},e.ontouchmove=function(e){return J(e)},e.ontouchend=function(e){return J(e)},e.ontouchcancel=function(e){return J(e)},h();var t=j.current;return t&&t.appendChild(e),window.addEventListener("resize",h),function(){t&&t.removeChild(e),window.removeEventListener("resize",h)}}}),[h]),Object($a.jsx)(lb,{value:{roomSession:r,eventDispatcher:u&&u.eventDispatcher,widgetHandler:u},children:Object($a.jsx)(tc,{fit:!0,innerRef:j,className:!r&&"d-none",children:r&&u&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(db,{}),Object($a.jsx)(th,{}),r.isSpectator&&Object($a.jsx)(jb,{})]})})})},rh=["useGuideTool","unseenAchievementCount","setMeExpanded","children"],ah=function(e){var t=e.useGuideTool,n=void 0!==t&&t,r=e.unseenAchievementCount,a=void 0===r?0:r,i=e.setMeExpanded,s=void 0===i?null:i,o=e.children,u=void 0===o?null:o,d=(Object(Za.a)(e,rh),Object(c.useRef)()),j=new URLSearchParams(window.location.search).get("sso");return Object(c.useEffect)((function(){var e=ue();e&&G().selectRoomObject(e.roomId,e.ownRoomIndex,l.Cg.UNIT)}),[]),Object(c.useEffect)((function(){var e=function(e){return s(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener(l.xe.MOUSE_CLICK,e)}}),[s]),Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)(lc,{innerRef:d,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,style:{marginBottom:"27px"},children:[n&&Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-helper-tool",onClick:function(e){return Kt(new Et(Et.TOGGLE_GUIDE_TOOL))}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-achievements",onClick:function(e){return U("achievements/toggle")},children:a>0&&Object($a.jsx)($c,{count:a})}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-profile",onClick:function(e){return Ga(ae().userId)}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-rooms",onClick:function(e){return U("navigator/search/myworld_view")}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-clothing",onClick:function(e){return U("avatar-editor/toggle")}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-battle-pass",onClick:function(e){fetch("https://int.lavvos.eu/?type=openGalaxyPassEmu&sso="+j)}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-banners",onClick:function(e){return U("banners/show")}}),Object($a.jsx)(tc,{pointer:!0,className:"navigation-item icon icon-me-settings",onClick:function(e){return U("user-settings/toggle")}}),u]})})},ch=function(e){var t=e.isInRoom,n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),d=u[0],j=u[1],b=Rn().userFigure,O=void 0===b?null:b,h=dn().getFullCount,f=void 0===h?0:h,g=jt().getTotalUnseen,m=void 0===g?0:g,v=an().requests,p=void 0===v?[]:v,x=sn().iconState,_=void 0===x?ga.HIDDEN:x,E=ae().isModerator,I=Object(c.useCallback)((function(e){var t=e.getParser();j(t.isAllowed(l.gf.USE_GUIDE_TOOL))}),[j]);dt(l.ff,I);var y=Object(c.useCallback)((function(e,t,n,r){var a=document.body.getElementsByClassName(e)[0];if(a){t.className="toolbar-icon-animation",t.style.visibility="visible",t.style.left=n+"px",t.style.top=r+"px",document.body.append(t);var c=a.getBoundingClientRect(),i=t.getBoundingClientRect(),s=i.x-c.x,o=i.y-c.y,u=Math.sqrt(s*s+o*o),d=500-Math.abs(1/u*100*500*.5),j="ToolbarBouncing[".concat(e,"]");l.we.getMotionByTag(j)||(l.we.runMotion(new l.Bf(new l.Ri(d+8),new l.tb(a,400,12))).tag=j);var b=new l.Bf(new l.ub(new l.Pd(t,d,c.x-i.x+20,c.y-i.y,100,1),1),new l.sb(t));l.we.runMotion(b)}}),[]),C=Object(c.useCallback)((function(e){y("icon-inventory",e.image,e.x,e.y)}),[y]);return qt(l.Ye.ANIMATE_ICON,C),Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(fi,{type:Oi.FADE_IN,inProp:a,timeout:300,children:Object($a.jsx)(ah,{useGuideTool:d,unseenAchievementCount:m,setMeExpanded:i})}),Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",gap:3,className:"nitro-toolbar py-1 px-3 animate__animated animate__backInUp",style:{marginBottom:"17px"},children:[Object($a.jsx)(lc,{gap:2,alignItems:"center",children:Object($a.jsxs)(lc,{alignItems:"center",gap:2,style:{marginBottom:"3px",paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},children:[Object($a.jsx)(lc,{style:{borderRadius:"50%",backgroundColor:"var(--test-galaxytwo)",padding:"26px"},center:!0,pointer:!0,className:"navigation-item item-avatar icon-border "+(a?"active ":""),onClick:function(e){return i(!a)},children:Object($a.jsx)(Mc,{figure:O,direction:2,position:"absolute"})}),t&&Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-habbo icon-border message-icon-show",onClick:function(e){return Oe()}}),!t&&Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-house icon-border",onClick:function(e){return U("navigator/goto/home")}}),Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-rooms icon-border",onClick:function(e){return U("navigator/toggle")}}),Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-catalog icon-border",onClick:function(e){return U("catalog/toggle")}}),Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-inventory icon-border",onClick:function(e){return U("inventory/toggle")},children:f>0&&Object($a.jsx)($c,{count:f})}),t&&Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-camera icon-border",onClick:function(e){return U("camera/toggle")}}),E&&Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-modtools icon-border",onClick:function(e){return Kt(new Tt(Tt.TOGGLE_MOD_TOOLS))}})]})}),Object($a.jsx)(lc,{alignItems:"center",id:"toolbar-chat-input-container"}),Object($a.jsxs)(lc,{alignItems:"center",gap:2,children:[Object($a.jsx)("div",{style:{marginBottom:"3px",paddingTop:6,paddingBottom:6,paddingLeft:10,paddingRight:10},children:Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-friendall icon-border",onClick:function(e){return U("friends/toggle")},children:p.length>0&&Object($a.jsx)($c,{count:p.length})}),(_===ga.SHOW||_===ga.UNREAD)&&Object($a.jsx)(tc,{style:{borderRadius:"16px",backgroundColor:"var(--test-galaxy)",padding:"25px"},pointer:!0,className:"navigation-item icon icon-border icon-message  ".concat(_===ga.UNREAD&&"is-unseen"),onClick:function(e){return Ea()}})]})}),Object($a.jsx)(tc,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},ih=(n(183),function(e){var t=!1,n=Object(c.useState)(!0),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)([]),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=(b[0],b[1],Object(c.useState)(new Audio(""))),h=Object(o.a)(O,2),f=h[0],g=(h[1],Object(c.useRef)(),new URLSearchParams(window.location.search).get("sso"));function m(){fetch("https://lavvos.eu/api/get/online.php").then((function(e){return e.text()})).then((function(e){document.getElementById("usersOnline").innerHTML=e}))}function v(e,t,n){return Object($a.jsxs)("div",{className:"animate__animated animate__fadeInDown",style:{padding:"10px",backgroundColor:"var(--test-galaxy)",color:"var(--test-galaxytext)",borderRadius:"5px",width:"270px",marginBottom:"20px",wordBreak:"break-all"},children:[Object($a.jsxs)("div",{style:{textAlign:"left",marginBottom:"10px"},children:[Object($a.jsx)("span",{className:"badge bg-danger",children:"Nueva menci\xf3n recibida"}),Object($a.jsx)("span",{style:{float:"right",cursor:"pointer"},children:Object($a.jsx)("span",{onClick:function(){return x(n)},className:"badge bg-danger",children:"x"})})]}),Object($a.jsxs)("div",{style:{marginBottom:"10px"},children:[Object($a.jsxs)("b",{children:[e,":"]})," \xa0",t]}),Object($a.jsx)("input",{onChange:function(e){return t=e.target.value,void(p=t);var t},className:"form-control",type:"text",style:{marginBottom:"4px"}}),Object($a.jsx)("button",{onClick:function(){return function(e,t){fetch("https://int.lavvos.eu/?type=mentionUser&userToMention="+e+"&message="+p+"&sso="+g),x(t)}(e,n)},className:"btn btn-success btn-sm w-100",children:"Responder"})]})}Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");t.length<2||"o"!==t[1]||function(e,t){_.apply(this,arguments)}(t[2],t[3])},eventUrlPrefix:"mal/"};return R(e),function(){return B(e)}}),[i]),Object(c.useEffect)((function(){var e=setInterval((function(){return t.apply(this,arguments)}),3e3);function t(){return(t=Object(Bi.a)(Wi.a.mark((function t(){return Wi.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.paused&&f.play(),new Promise((function(e){return setTimeout(e,1e3)})),f.paused||clearInterval(e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[]);var p="";function x(e){d((function(t){return t.filter((function(t){return t.id!==e}))}))}function _(){return(_=Object(Bi.a)(Wi.a.mark((function e(t,n){var r,a;return Wi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Math.random(),a=v(t,n,r),d((function(e){return[].concat(Object(ut.a)(e),[{id:r,alert:a}])})),new Audio("https://lavvos.eu/swfs/sounds/plin.mp3").play();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return m(),setInterval(m,2e4),f.volume=.1,f.autoplay=!0,Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsx)($a.Fragment,{children:Object($a.jsxs)("div",{className:"nitro-left-side animate__animated animate__backInDown",children:[Object($a.jsxs)("a",{href:"https://lavvos.eu",target:"_blank",className:"nitro-left-side-button btn btn-sm rounded-pill border border-light",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/images/casa.png",style:{marginTop:"2px",marginBottom:"2px"}})," Web"]}),Object($a.jsxs)("button",{onClick:function(e){return U("help/show")},style:{backgroundColor:"var(--test-galaxytwo)",marginLeft:"7px"},className:"btn btn-sm rounded-pill border border-light nitro-left-side-button",children:[Object($a.jsx)("img",{src:"https://lavvos.eu/swfs/images/frank.gif",style:{marginTop:"2px",marginBottom:"2px"}})," Ayuda"]}),Object($a.jsxs)("button",{style:{backgroundColor:"var(--test-galaxytwo)",marginLeft:"7px"},className:"btn btn-sm rounded-pill border border-light nitro-left-side-button",children:[Object($a.jsx)("img",{style:{transform:"scale(0.9)"},src:"https://lavvos.eu/swfs/images/ons.png"}),Object($a.jsx)("b",{id:"usersOnline",children:"0"})," \xa0"]}),Object($a.jsx)("button",{style:{backgroundColor:"var(--test-galaxytwo)",marginLeft:"7px"},className:"btn btn-sm rounded-pill border border-light nitro-left-side-button",children:Object($a.jsxs)("div",{style:{padding:"4px"},children:[Object($a.jsx)(mc.a,{id:"startRadio",style:{display:"none",fontSize:"17px"},onClick:function(e){return function(){f.src="";var e=f.play();void 0!==e&&e.then((function(e){document.getElementById("startRadio").style.display="none",document.getElementById("pauseRadio").style.display="inline-block",t=!0})).catch((function(e){}))}()},icon:"play"}),Object($a.jsx)(mc.a,{id:"pauseRadio",style:{fontSize:"17px"},onClick:function(e){return document.getElementById("startRadio").style.display="inline-block",document.getElementById("pauseRadio").style.display="none",f.pause(),f.src="",void(t=!1)},icon:"pause"}),"\xa0\xa0",Object($a.jsx)(mc.a,{style:{fontSize:"17px"},onClick:function(e){t&&1!=f.volume&&(f.volume=f.volume+.1)},icon:"plus"})," \xa0",Object($a.jsx)(mc.a,{style:{fontSize:"17px"},onClick:function(e){return function(){if(t){if(f.volume<.1)return;.1!=f.volume&&(f.volume=f.volume-.1)}}()},icon:"minus"})]})}),Object($a.jsx)("div",{id:"mentionAlerts",style:{marginTop:"20px"},children:null!=u&&Object($a.jsx)($a.Fragment,{children:u.map((function(e){return Object($a.jsx)($a.Fragment,{children:e.alert})}))})})]})})})}),sh=["badges","gap","justifyContent"],oh=function(e){var t=e.badges,n=void 0===t?null:t;e.gap,e.justifyContent,Object(Za.a)(e,sh);return Object($a.jsx)($a.Fragment,{children:n&&n.length>0&&n.map((function(e,t){return Object($a.jsx)(Jc,{center:!0,children:Object($a.jsx)(Gc,{badgeCode:e},e)},e)}))})},lh=function(e){var t=e.relationships,n=void 0===t?null:t,r=function(e){var t=e.type,r=n&&n.relationshipStatusMap.hasKey(t)?n.relationshipStatusMap.getValue(t):null,a=l.Ff.RELATIONSHIP_NAMES[t].toLocaleLowerCase();return Object($a.jsxs)(lc,{fullWidth:!0,gap:1,children:[Object($a.jsx)(lc,{center:!0,className:"user-relationship",children:Object($a.jsx)("i",{className:"nitro-friends-spritesheet icon-".concat(a)})}),Object($a.jsxs)(Jc,{grow:!0,gap:0,children:[Object($a.jsxs)(lc,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[Object($a.jsxs)(Hi,{small:!0,underline:!0,pointer:!0,onClick:function(e){return r&&r.randomFriendId>=1&&Ga(r.randomFriendId)},children:[(!r||0===r.friendCount)&&st("extendedprofile.add.friends"),r&&r.friendCount>=1&&r.randomFriendName]}),r&&r.friendCount>=1&&Object($a.jsx)(lc,{center:!0,position:"relative",className:"avatar-image-container",children:Object($a.jsx)(Mc,{figure:r.randomFriendFigure,headOnly:!0,direction:4})})]}),Object($a.jsxs)(Hi,{small:!0,italics:!0,className:"user-relationship-count",children:[(!r||0===r.friendCount)&&st("extendedprofile.no.friends.in.this.category"),r&&r.friendCount>1&&st("extendedprofile.relstatus.others.".concat(a),["count"],[(r.friendCount-1).toString()]),"\xa0"]})]})]})};return Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)(r,{type:l.Ff.HEART}),Object($a.jsx)(r,{type:l.Ff.SMILE}),Object($a.jsx)(r,{type:l.Ff.BOBBA})]})},uh=function(e){var t=e.relationships,n=void 0===t?null:t,r=e.friendsCount,a=void 0===r?null:r;return Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,children:[Object($a.jsx)("b",{children:st("extendedprofile.friends.count")})," ",a]}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,small:!0,children:st("extendedprofile.relstatus")}),Object($a.jsx)(Jc,{children:Object($a.jsx)(lh,{relationships:n})})]})},dh=["itsMe","groups","onLeaveGroup","overflow","gap"],jh=function(e){var t=e.itsMe,n=void 0===t?null:t,r=e.groups,a=void 0===r?null:r,i=e.onLeaveGroup,s=void 0===i?null:i,u=e.overflow,d=void 0===u?"hidden":u,j=(e.gap,Object(Za.a)(e,dh)),b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useCallback)((function(e){var t=e.getParser();h&&h===t.id&&!t.flag&&p(t)}),[h]);return dt(l.Pc,x),Object(c.useEffect)((function(){h&&ea(new l.Oc(h,!1))}),[h]),Object(c.useEffect)((function(){p(null),a.length>0&&f((function(e){return e===a[0].groupId&&ea(new l.Oc(a[0].groupId,!1)),a[0].groupId}))}),[a]),a&&a.length?Object($a.jsxs)(cc,Object(bt.a)(Object(bt.a)({overflow:d,gap:2},j),{},{children:[Object($a.jsx)(Jc,{alignItems:"center",size:2,overflow:"auto",children:Object($a.jsx)(sc,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:a.map((function(e,t){return Object($a.jsxs)(ii,{overflow:"unset",itemActive:h===e.groupId,onClick:function(){return f(e.groupId)},className:"p-1",children:[n&&Object($a.jsx)("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(e.favourite?"favorite":"not-favorite"),onClick:function(){return function(e){ea(e.favourite?new l.ed(e.groupId):new l.Mc(e.groupId))}(e)}}),Object($a.jsx)(Gc,{badgeCode:e.badgeCode,isGroup:!0})]},t)}))})}),Object($a.jsx)(Jc,{size:10,overflow:"hidden",children:v&&Object($a.jsx)(Ru,{groupInformation:v,onClose:s})})]})):Object($a.jsx)(Jc,{center:!0,fullHeight:!0,children:Object($a.jsxs)(lc,{justifyContent:"center",gap:2,children:[Object($a.jsx)(tc,{className:"no-group-spritesheet image-1"}),Object($a.jsx)(tc,{className:"no-group-spritesheet image-2"}),Object($a.jsx)(tc,{className:"no-group-spritesheet image-3"})]})})},bh=function(e){var t=e.userProfile,n=void 0===t?null:t,r=Object(c.useState)(n.requestSent),a=Object(o.a)(r,2),i=a[0],s=a[1],u=n.id===ae().userId,d=!i&&!u&&!n.isMyFriend&&!n.requestSent;return Object(c.useEffect)((function(){s(n.requestSent)}),[n]),Object($a.jsxs)(lc,{gap:2,children:[Object($a.jsx)(Jc,{center:!0,className:"avatar-container",children:Object($a.jsx)(Mc,{figure:n.figure,direction:2})}),Object($a.jsxs)(Jc,{children:[Object($a.jsxs)(Jc,{gap:0,children:[Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,children:n.username}),Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",italics:!0,textBreak:!0,small:!0,children:[n.motto,"\xa0"]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,children:[Object($a.jsx)("b",{children:st("extendedprofile.created")})," ",n.registration]}),Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,children:[Object($a.jsx)("b",{children:st("extendedprofile.last.login")})," ",l.Ib.format(n.secondsSinceLastVisit,".ago",2)]}),Object($a.jsxs)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,children:[Object($a.jsx)("b",{children:st("extendedprofile.achievementscore")})," ",n.achievementPoints]})]}),Object($a.jsxs)(lc,{gap:1,children:[n.isOnline&&Object($a.jsx)("i",{className:"icon icon-pf-online"}),!n.isOnline&&Object($a.jsx)("i",{className:"icon icon-pf-offline"}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[d&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",small:!0,underline:!0,pointer:!0,onClick:function(){s(!0),ea(new l.Of(n.username))},children:st("extendedprofile.addasafriend")}),!d&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("i",{className:"icon icon-pf-tick"}),u&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("extendedprofile.me")}),n.isMyFriend&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("extendedprofile.friend")}),(i||n.requestSent)&&Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",children:st("extendedprofile.friendrequestsent")})]})]})]})]})]})},Oh=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useCallback)((function(){r&&r.id===ae().userId&&Ga(r.id)}),[r]),g=Object(c.useCallback)((function(e){var t=e.getParser();r&&t.userId===r.id&&d(t.badges)}),[r]);dt(l.wi,g);var m=Object(c.useCallback)((function(e){var t=e.getParser();r&&t.userId===r.id&&h(t)}),[r]);dt(l.Gf,m);var v=Object(c.useCallback)((function(e){var t=e.getParser(),n=!1;a((function(e){return e&&e.id&&(n=e.id===t.id),t})),n||(d([]),h(null)),ea(new l.vi(t.id)),ea(new l.Ei(t.id))}),[]);dt(l.Di,v);var p=Object(c.useCallback)((function(e){if(r&&e.category===l.Cg.UNIT){var t=ue().userDataManager.getUserDataByIndex(e.objectId);t.type===l.Gg.USER&&Ga(t.webID)}}),[r]);return qt(l.jg.SELECTED,p),r?Object($a.jsxs)(Pc,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[Object($a.jsx)(Tc,{headerText:st("extendedprofile.caption"),onCloseClick:function(){a(null),d([]),h(null)}}),Object($a.jsxs)(Ec,{overflow:"hidden",children:[Object($a.jsxs)(cc,{fullHeight:!1,gap:2,children:[Object($a.jsxs)(Jc,{size:7,gap:1,className:"user-container pe-2",children:[Object($a.jsx)(bh,{userProfile:r}),Object($a.jsx)(cc,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:Object($a.jsx)(oh,{fullWidth:!0,center:!0,badges:u})})]}),Object($a.jsx)(Jc,{size:5,children:O&&Object($a.jsx)(uh,{relationships:O,friendsCount:r.friendsCount})})]}),Object($a.jsx)(lc,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:Object($a.jsxs)(lc,{alignItems:"center",gap:1,onClick:function(e){return U("navigator/search/hotel_view/owner:".concat(r.username))},children:[Object($a.jsx)("i",{className:"icon icon-rooms"}),Object($a.jsx)(Hi,{style:{color:"var(--test-galaxytext)"},variant:"none",bold:!0,underline:!0,pointer:!0,children:st("extendedprofile.rooms")})]})}),Object($a.jsx)(jh,{fullWidth:!0,itsMe:r.id===ae().userId,groups:r.groups,onLeaveGroup:f})]})]}):null},hh=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(null),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Zt(),b=Object(o.a)(j,2),O=b[0],h=b[1],f=en(),g=Object(o.a)(f,2),m=g[0],v=g[1],p=new URLSearchParams(window.location.search).get("sso"),x="",_="",E="";var I=Object(c.useCallback)((function(e){var t=e.getParser(),n=new l.Ue;n.volumeSystem=t.volumeSystem,n.volumeFurni=t.volumeFurni,n.volumeTrax=t.volumeTrax,n.oldChat=t.oldChat,n.roomInvites=t.roomInvites,n.cameraFollow=t.cameraFollow,n.flags=t.flags,n.chatType=t.chatType,d(n),Wt(n)}),[]);dt(l.Gi,I);var y=Object(c.useCallback)((function(e,t){var n=!0,r=u.clone();switch(e){case"close_view":return a(!1),void(n=!1);case"oldchat":r.oldChat=t,ea(new l.Hi(r.oldChat));break;case"room_invites":r.roomInvites=t,ea(new l.Ii(r.roomInvites));break;case"camera_follow":r.cameraFollow=t,ea(new l.Fi(r.cameraFollow));break;case"system_volume":r.volumeSystem=t,r.volumeSystem=Math.max(0,r.volumeSystem),r.volumeSystem=Math.min(100,r.volumeSystem);break;case"furni_volume":r.volumeFurni=t,r.volumeFurni=Math.max(0,r.volumeFurni),r.volumeFurni=Math.min(100,r.volumeFurni);break;case"trax_volume":r.volumeTrax=t,r.volumeTrax=Math.max(0,r.volumeTrax),r.volumeTrax=Math.min(100,r.volumeTrax)}n&&d(r),Wt(r)}),[u]),C=Object(c.useCallback)((function(e){if("volume"===e)ea(new l.Ji(Math.round(u.volumeSystem),Math.round(u.volumeFurni),Math.round(u.volumeTrax)))}),[u]);return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void a(!0);case"hide":return void a(!1);case"toggle":return void a((function(e){return!e}))}},eventUrlPrefix:"user-settings/"};return R(e),function(){return B(e)}}),[]),Object(c.useEffect)((function(){u&&Kt(u)}),[u]),r?Object($a.jsxs)(Pc,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("widget.memenu.settings.title"),onCloseClick:function(e){return y("close_view")}}),Object($a.jsxs)(Ec,{className:"text-black",children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:u.oldChat,onChange:function(e){return y("oldchat",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("memenu.settings.chat.prefer.old.chat")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:u.roomInvites,onChange:function(e){return y("room_invites",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("memenu.settings.other.ignore.room.invites")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:u.cameraFollow,onChange:function(e){return y("camera_follow",e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("memenu.settings.other.disable.room.camera.follow")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:O,onChange:function(e){return h(e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("memenu.settings.other.place.multiple.objects")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:function(e){return v(e.target.checked)}}),Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("memenu.settings.other.skip.purchase.confirmation")})]})]}),Object($a.jsx)("hr",{}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},bold:!0,children:st("widget.memenu.settings.volume")}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("widget.memenu.settings.volume.ui")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:0===u.volumeSystem?"volume-mute":u.volumeSystem>0?"volume-down":null,className:u.volumeSystem>=50?"text-muted":""}),Object($a.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:u.volumeSystem,onChange:function(e){return y("system_volume",e.target.value)},onMouseUp:function(){return C("volume")}}),Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:"volume-up",className:u.volumeSystem<50?"text-muted":""})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("widget.memenu.settings.volume.furni")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:0===u.volumeFurni?"volume-mute":u.volumeFurni>0?"volume-down":null,className:u.volumeFurni>=50?"text-muted":""}),Object($a.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:u.volumeFurni,onChange:function(e){return y("furni_volume",e.target.value)},onMouseUp:function(){return C("volume")}}),Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:"volume-up",className:u.volumeFurni<50?"text-muted":""})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:st("widget.memenu.settings.volume.trax")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:0===u.volumeTrax?"volume-mute":u.volumeTrax>0?"volume-down":null,className:u.volumeTrax>=50?"text-muted":""}),Object($a.jsx)("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:u.volumeTrax,onChange:function(e){return y("trax_volume",e.target.value)},onMouseUp:function(){return C("volume")}}),Object($a.jsx)(mc.a,{style:{color:"var(--test-galaxytext)"},icon:"volume-up",className:u.volumeTrax<50?"text-muted":""})]})]}),Object($a.jsx)("hr",{}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{variant:"none",style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"Color de la interfaz"})}),Object($a.jsx)("div",{id:"alertColor",className:"alert alert-warning",children:"Recuerda guardar los cambios para mantener siempre la misma configuraci\xf3n."}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Color principal"}),Object($a.jsx)("input",{className:"form-control form-control-color",type:"color",onChange:function(e){return function(e){var t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);document.querySelector("html").style.setProperty("--test-galaxy","rgba(".concat(t,", ").concat(n,", ").concat(r,", .81)")),x="rgba(".concat(t,", ").concat(n,", ").concat(r,", .81)")}(e.target.value)}}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Color del texto"}),Object($a.jsx)("input",{className:"form-control form-control-color",type:"color",onChange:function(e){return function(e){var t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);document.querySelector("html").style.setProperty("--test-galaxytext","rgba(".concat(t,", ").concat(n,", ").concat(r,")")),_="rgba(".concat(t,", ").concat(n,", ").concat(r,")")}(e.target.value)}}),Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"Color secundario"}),Object($a.jsx)("input",{className:"form-control form-control-color",type:"color",onChange:function(e){return function(e){var t=parseInt(e.substr(1,2),16),n=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);document.querySelector("html").style.setProperty("--test-galaxytwo","rgba(".concat(t,", ").concat(n,", ").concat(r,")")),E="rgba(".concat(t,", ").concat(n,", ").concat(r,")")}(e.target.value)}})]}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return function(){var e=document.getElementById("alertColor");if(""==x||""==_||""==E)return e.classList.remove("alert-warning"),e.classList.add("alert-danger"),void(e.innerHTML="Debes de seleccionar todos los colores para poder guardar los cambios.");fetch("https://int.lavvos.eu/?type=setColors&sso="+p+"&colorPrimary="+x+"&colorText="+_+"&colorSecondary="+E),e.classList.remove("alert-warning"),e.classList.remove("alert-danger"),e.classList.add("alert-success"),e.innerHTML="Se han guardado los cambios con \xe9xito"}()},className:"btn btn-success btn-sm w-100",children:"Guardar"})]})]})]})]}):null},fh=function(e){var t=new URLSearchParams(window.location.search).get("sso"),n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)("home"),l=Object(o.a)(s,2),u=l[0],d=l[1];function j(e){switch(e){case 1:fetch("https://lavvos.eu/system/controllers/eha.php?changeLook=ch-215-1189.sh-305-92.hr-851-45.ea-987463055-62-62.hd-209-2.lg-710-82.wa-2007-1408.ca-3175-1408&sso="+t);break;case 2:fetch("https://lavvos.eu/system/controllers/eha.php?changeLook=hr-515-45.hd-629-2.ch-255-91.lg-710-1409.sh-906-80.he-1603-80&sso="+t);break;case 3:fetch("https://lavvos.eu/system/controllers/eha.php?changeLook=hr-989999875-1092.hd-629-2.ch-665-64.lg-3174-1195-1408.sh-305-92.he-1606-1408.ca-1807-1408&sso="+t);break;case 4:fetch("https://lavvos.eu/system/controllers/eha.php?changeLook=ch-250-64.sh-3016-110.hr-828-1028.ea-987463055-62-62.hd-180-1006.lg-3078-110.he-3071-92&sso="+t)}d("rooms")}function b(e){fetch("https://lavvos.eu/system/controllers/eha.php?chooseWelcomeRoom="+e+"&sso="+t),d("furni")}return Object(c.useEffect)((function(){var e={linkReceived:function(e){var t=e.split("/");if(!(t.length<2))switch(t[1]){case"show":return void i(!0);case"hide":return void i(!1)}},eventUrlPrefix:"welcomewizard/"};return R(e),function(){return B(e)}}),[i]),Object($a.jsx)($a.Fragment,{children:a&&Object($a.jsxs)(Pc,{children:[Object($a.jsx)(Tc,{headerText:"Bienvenid@ a Lavvos",onCloseClick:function(e){return i(!1)}}),Object($a.jsx)(Ec,{className:"text-dark",children:Object($a.jsxs)(Gj.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",className:"mb-3",activeKey:u,children:[Object($a.jsxs)(Wj.a,{eventKey:"home",title:"Bienvenida",style:{width:"630px"},children:[Object($a.jsxs)(Ls.a,{children:[Object($a.jsx)(Ms.a,{md:12,children:Object($a.jsx)("div",{className:"alert bg-warning",children:Object($a.jsxs)("div",{style:{textAlign:"left"},children:[Object($a.jsx)("b",{children:"\xbfYa tienes cuenta?"})," Inicia sesi\xf3n para no empezar de 0.",Object($a.jsx)("span",{style:{float:"right"},children:Object($a.jsx)("a",{href:"https://lavvos.eu/logout",children:Object($a.jsx)("span",{className:"badge bg-success",children:"Iniciar sesi\xf3n"})})})]})})}),Object($a.jsxs)(Ms.a,{md:7,style:{color:"var(--test-galaxytext)"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"\xa1Nos complace darte la bienvenida a Lavvos!"})}),"Bienvenido a tu mundo virtual favorito. Aqu\xed podr\xe1s conocer ",Object($a.jsx)("br",{}),"nuevas amistades, jugar o crear tus propios juegos, ",Object($a.jsx)("br",{}),"participar en eventos organizados por el equipo...",Object($a.jsx)("br",{}),"\xa1Y mucho mas!",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),Object($a.jsxs)("b",{style:{color:"var(--test-galaxytext)"},children:["\xbfEst\xe1s listo para empezar?",Object($a.jsx)("br",{}),"\xa1Estamos encantados de que est\xe9s aqu\xed!"]})]}),Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/WhatIsHabbo/ill_15.png",style:{objectFit:"contain"}})})]}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("changeName")},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"changeName",title:"Cambia tu nombre",style:{width:"630px"},children:[Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:9,style:{color:"var(--test-galaxytext)"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},children:Object($a.jsx)("b",{children:"\xa1Cambia tu nombre!"})}),"Para cambiar tu nombre, debes clickear encima de tu personaje",Object($a.jsx)("br",{})," y seleccionar un nombre.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),Object($a.jsxs)("b",{children:["Si quieres mantener tu cuenta, te recomendamos que lo cambies",Object($a.jsx)("br",{})," ya que actualmente tienes un nombre gen\xe9rico."]}),Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),"Despu\xe9s podr\xe1s usar el nombre asignado para iniciar sesi\xf3n.",Object($a.jsx)("br",{}),"Mas adelante te pediremos que crees una contrase\xf1a.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),Object($a.jsx)("b",{children:"\xa1Recuerda, es muy importante que cambies tu nombre!"})]}),Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/888286259850653737/1006174235439415396/7b80162084a09cf4927c0710494ac903.png",style:{objectFit:"contain"}})})]}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("appearance")},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"appearance",title:"Apariencia",children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},className:"text-center",children:Object($a.jsx)("b",{style:{color:"var(--test-galaxytext)"},children:"\xbfQu\xe9 tal si empezamos por cambiarnos la apariencia?"})}),Object($a.jsx)("div",{className:"container",children:Object($a.jsxs)(Ls.a,{children:[Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("div",{className:"text-white look-image card",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/ruled_paper.gif)"},children:Object($a.jsxs)("div",{className:"card-body",children:[Object($a.jsx)("img",{className:"mx-auto d-block",src:"https://habbo-imaging.lavvos.eu/?figure=ch-215-1189.sh-305-92.hr-851-45.ea-987463055-62-62.hd-209-2.lg-710-82.wa-2007-1408.ca-3175-1408&gesture=sml&action=wav&direction=3"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return j(1)},className:"btn btn-success btn-sm w-100",children:"Seleccionar"})]})})}),Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("div",{className:"text-white look-image card",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/ruled_paper.gif)"},children:Object($a.jsxs)("div",{className:"card-body",children:[Object($a.jsx)("img",{className:"mx-auto d-block",src:"https://habbo-imaging.lavvos.eu/?figure=hr-515-45.hd-629-2.ch-255-91.lg-710-1409.sh-906-80.he-1603-80&gesture=sml&action=wav&direction=3"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return j(2)},className:"btn btn-success btn-sm w-100",children:"Seleccionar"})]})})}),Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("div",{className:"text-white look-image card",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/ruled_paper.gif)"},children:Object($a.jsxs)("div",{className:"card-body",children:[Object($a.jsx)("img",{className:"mx-auto d-block",src:"https://habbo-imaging.lavvos.eu/?figure=hr-989999875-1092.hd-629-2.ch-665-64.lg-3174-1195-1408.sh-305-92.he-1606-1408.ca-1807-1408&gesture=sml&action=wav&direction=3"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return j(3)},className:"btn btn-success btn-sm w-100",children:"Seleccionar"})]})})}),Object($a.jsx)(Ms.a,{md:3,children:Object($a.jsx)("div",{className:"text-white look-image card",style:{backgroundImage:"url(https://files.habboemotion.com/resources/images/homebgs/ruled_paper.gif)"},children:Object($a.jsxs)("div",{className:"card-body",children:[Object($a.jsx)("img",{className:"mx-auto d-block",src:"https://habbo-imaging.lavvos.eu/?figure=ch-250-64.sh-3016-110.hr-828-1028.ea-987463055-62-62.hd-180-1006.lg-3078-110.he-3071-92&gesture=sml&action=wav&direction=3"}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return j(4)},className:"btn btn-success btn-sm w-100",children:"Seleccionar"})]})})})]})}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(e){return U("avatar-editor/show")},children:"Abrir vestidor"}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("rooms")},style:{marginTop:"5px"},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"rooms",title:"Salas",children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},className:"text-center",children:Object($a.jsx)("b",{children:"\xbfContinuamos con tu primera sala?"})}),Object($a.jsx)("div",{className:"text-center",style:{color:"var(--test-galaxytext)"},children:"Hemos creado algunas salas predeterminadas, puedes seleccionar entre ellas.  Si no te gustan, \xa1puedes crear la tuya!"})," ",Object($a.jsx)("br",{}),Object($a.jsx)("div",{className:"container",children:Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:4,className:"text-center",children:[Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/1005777601723387934/1007205463525437541/unknown.png",className:"room-welcome-image rounded-circle",style:{height:"130px"}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return b(1)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:4,className:"text-center",children:[Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/1005777601723387934/1007205858679197766/unknown.png",className:"room-welcome-image rounded-circle",style:{height:"130px"}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return b(2)},className:"btn btn-success btn-sm",children:"Seleccionar"})]}),Object($a.jsxs)(Ms.a,{md:4,className:"text-center",children:[Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/1005777601723387934/1007208121422319627/unknown.png",className:"room-welcome-image rounded-circle",style:{height:"130px"}}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{onClick:function(e){return b(3)},className:"btn btn-success btn-sm",children:"Seleccionar"})]})]})}),Object($a.jsx)("br",{}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(e){return U("navigator/create")},children:"\xa1Prefiero crearme mi sala!"}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("furni")},style:{marginTop:"5px"},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"furni",title:"Furni",children:[Object($a.jsx)("div",{className:"container",children:Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:7,style:{color:"var(--test-galaxytext)"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},className:"text-center",children:Object($a.jsx)("b",{children:"\xbfQu\xe9 son los furnis?"})}),"Furni es el nombre que recibe un mueble del hotel. ",Object($a.jsx)("br",{}),"Puedes encontrar furnis de distintas categor\xedas en el ",Object($a.jsx)("br",{}),"el hotel, la mayor\xeda de ellos los puedes encontrar ",Object($a.jsx)("br",{}),"en el cat\xe1logo. Tambi\xe9n existen algunos furnis ",Object($a.jsx)("br",{}),"que solo podr\xe1s ganar en eventos realizados por ",Object($a.jsx)("br",{}),"el staff. Cuando compres un furni, este se guardar\xe1 ",Object($a.jsx)("br",{}),"en tu inventario, y desde ah\xed podr\xe1s colocarlo ",Object($a.jsx)("br",{}),"en cualquiera de tus salas."]}),Object($a.jsx)(Ms.a,{md:5,children:Object($a.jsx)("img",{src:"https://images.habbo.com/c_images/HabboWay/habboway_3b.png",alt:""})})]})}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(e){return U("catalog/show")},style:{marginBottom:"5px"},children:"Abrir cat\xe1logo de furnis"}),Object($a.jsx)("button",{className:"btn btn-danger w-100",onClick:function(e){return U("inventory/show")},style:{marginBottom:"5px"},children:"Abrir inventario"}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("friends")},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"friends",title:"Amigos",children:[Object($a.jsx)("div",{className:"container",children:Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:7,style:{color:"var(--test-galaxytext)"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},className:"text-center",children:Object($a.jsx)("b",{children:"\xbfC\xf3mo agrego a amigos?"})}),"Para agregar a un amigo a consola, debes hacer click ",Object($a.jsx)("br",{}),"en su personaje, al hacerlo se te abrir\xe1 un men\xfa",Object($a.jsx)("br",{}),"encima de su cabeza con varias opciones, selecciona",Object($a.jsx)("br",{}),"la opci\xf3n de A\xf1adir amig@ y una vez aceptado lo",Object($a.jsx)("br",{}),"tendr\xe1s en la consola.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),"Tambi\xe9n puedes recibir solicitudes de otros",Object($a.jsx)("br",{}),"usuarios y aceptarlos desde la consola."]}),Object($a.jsx)(Ms.a,{md:5,children:Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/888286259850653737/974177651008880692/segs.png",alt:""})})]})}),Object($a.jsx)("button",{className:"btn btn-primary w-100",onClick:function(e){return U("friends/show")},children:"Abrir consola"}),Object($a.jsx)("button",{className:"btn btn-success w-100",onClick:function(e){return d("security")},style:{marginTop:"5px"},children:"Siguiente"})]}),Object($a.jsxs)(Wj.a,{eventKey:"security",title:"Seguridad",children:[Object($a.jsx)("div",{className:"container",children:Object($a.jsxs)(Ls.a,{children:[Object($a.jsxs)(Ms.a,{md:7,style:{color:"var(--test-galaxytext)"},children:[Object($a.jsx)("h4",{style:{color:"var(--test-galaxytext)"},className:"text-center",children:Object($a.jsx)("b",{children:"\xa1Crea una contrase\xf1a!"})}),"Si no has creado una contrase\xf1a a la hora de registrarte,",Object($a.jsx)("br",{}),"te damos la posibilidad de que lo hagas ahora.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),"Te recomendamos una contrase\xf1a que tenga mas de 6 ",Object($a.jsx)("br",{}),"car\xe1cteres y contenga n\xfameros y letras.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),Object($a.jsxs)("b",{children:["Al darle click a crear nueva contrase\xf1a se te abrir\xe1",Object($a.jsx)("br",{}),"una pesta\xf1a con la secci\xf3n de configuraci\xf3n.",Object($a.jsx)("br",{}),Object($a.jsx)("br",{}),"Recuerda que es muy importante que establezcas una",Object($a.jsx)("br",{}),"contrase\xf1a."]}),Object($a.jsx)("br",{}),Object($a.jsx)("br",{})]}),Object($a.jsx)(Ms.a,{md:5,children:Object($a.jsx)("img",{src:"https://cdn.discordapp.com/attachments/888286259850653737/974908816787378206/elmayor1.png",alt:""})})]})}),Object($a.jsx)("a",{href:"https://lavvos.eu/me/settings",onClick:function(e){return i(!1)},target:"_blank",className:"btn btn-primary w-100",children:"Crear nueva contrase\xf1a"}),Object($a.jsx)("button",{className:"btn btn-danger w-100",onClick:function(e){return i(!1)},style:{marginTop:"5px"},children:"Cerrar"})]})]})})]})})},gh=Object(c.createContext)({trigger:null,setTrigger:null,intParams:null,setIntParams:null,stringParam:null,setStringParam:null,furniIds:null,setFurniIds:null,actionDelay:null,setActionDelay:null,saveWired:null}),mh=function(e){return Object($a.jsx)(gh.Provider,{value:e.value,children:e.children})},vh=function(){return Object(c.useContext)(gh)},ph=function(e){var t=vh(),n=t.trigger,r=void 0===n?null:n,a=t.furniIds,i=void 0===a?[]:a,s=t.setFurniIds,o=void 0===s?null:s,l=Object(c.useCallback)((function(e){var t=e.objectId;t<=0||o((function(e){var n=Object(ut.a)(e),a=e.indexOf(t);return a>=0?(n.splice(a,1),Qa.hide(t)):n.length<r.maximumItemSelectionCount&&(n.push(t),Qa.show(t)),n}))}),[r,o]);return Qt(Ft.SELECT_OBJECT,l),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.pickfurnis.caption",["count","limit"],[i.length.toString(),r.maximumItemSelectionCount.toString()])}),Object($a.jsx)(Hi,{small:!0,children:st("wiredfurni.pickfurnis.desc")})]})},xh=function(e){var t=e.wiredType,n=void 0===t?"":t,r=e.requiresFurni,a=void 0===r?za.STUFF_SELECTION_OPTION_NONE:r,i=e.save,s=void 0===i?null:i,l=e.validate,u=void 0===l?null:l,d=e.children,j=void 0===d?null:d,b=e.hasSpecialInput,O=void 0!==b&&b,h=Object(c.useState)(null),f=Object(o.a)(h,2),g=f[0],m=f[1],v=Object(c.useState)(null),p=Object(o.a)(v,2),x=p[0],_=p[1],E=Object(c.useState)(!1),I=Object(o.a)(E,2),y=I[0],C=I[1],T=vh(),S=T.trigger,N=void 0===S?null:S,R=T.setTrigger,k=void 0===R?null:R,A=T.setIntParams,w=void 0===A?null:A,D=T.setStringParam,U=void 0===D?null:D,P=T.setFurniIds,L=void 0===P?null:P,M=T.saveWired,F=void 0===M?null:M,H=function(){return k(null)};return Object(c.useEffect)((function(){y&&(F(),C(!1))}),[y,F]),Object(c.useEffect)((function(){if(N){var e=N.spriteId||-1,t=ae().getFloorItemData(e);return t?(m(t.name),_(t.description)):(m("NAME: "+e),_("NAME: "+e)),O&&(w(N.intData),U(N.stringData)),a>za.STUFF_SELECTION_OPTION_NONE&&L((function(e){return e&&e.length&&Qa.clearSelectionShaderFromFurni(e),N.selectedItems&&N.selectedItems.length?(Qa.applySelectionShaderToFurni(N.selectedItems),N.selectedItems):[]})),function(){C(!1),w([]),U(null),L((function(e){return e&&e.length&&Qa.clearSelectionShaderFromFurni(e),[]}))}}}),[N,O,a,w,U,L]),Object($a.jsxs)(Pc,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[Object($a.jsx)(Tc,{headerText:st("wiredfurni.title"),onCloseClick:H}),Object($a.jsxs)(Ec,{children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("i",{className:"icon icon-wired-".concat(n)}),Object($a.jsx)(Hi,{bold:!0,children:g})]}),Object($a.jsx)(Hi,{small:!0,children:x})]}),!!j&&Object($a.jsx)("hr",{className:"m-0 bg-dark"}),j,a>za.STUFF_SELECTION_OPTION_NONE&&Object($a.jsxs)($a.Fragment,{children:[Object($a.jsx)("hr",{className:"m-0 bg-dark"}),Object($a.jsx)(ph,{})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)(dc,{fullWidth:!0,variant:"success",onClick:function(){u&&!u()||(s&&s(),C(!0))},children:st("wiredfurni.ready")}),Object($a.jsx)(dc,{fullWidth:!0,variant:"secondary",onClick:H,children:st("cancel")})]})]})]})},_h=function(e){var t=e.requiresFurni,n=void 0===t?za.STUFF_SELECTION_OPTION_NONE:t,r=e.save,a=void 0===r?null:r,i=e.hasSpecialInput,s=void 0!==i&&i,o=e.children,l=void 0===o?null:o,u=vh(),d=u.trigger,j=void 0===d?null:d,b=u.actionDelay,O=void 0===b?0:b,h=u.setActionDelay,f=void 0===h?null:h;return Object(c.useEffect)((function(){f(j.delayInPulses)}),[j,f]),Object($a.jsxs)(xh,{wiredType:"action",requiresFurni:n,save:a,hasSpecialInput:s,children:[l,!!l&&Object($a.jsx)("hr",{className:"m-0 bg-dark"}),Object($a.jsxs)(Jc,{children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.delay",["seconds"],[Wa(O)])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:0,max:20,value:O,onChange:function(e){return f(e)}})]})]})},Eh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setStringParam,h=void 0===O?null:O;return Object(c.useEffect)((function(){var e=b.stringData.split(Xa);e.length>0&&a(e[0]),e.length>1&&u(e[1].length>0?e[1]:"hd-180-1.ch-210-66.lg-270-82.sh-290-81")}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return h(r+Xa+l)},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(lc,{center:!0,children:[Object($a.jsx)(Mc,{figure:l,direction:4}),Object($a.jsx)(dc,{onClick:function(e){return u(ae().figure)},children:st("wiredfurni.params.capture.figure")})]})]})},Ih=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setStringParam,h=void 0===O?null:O,f=d.setIntParams,g=void 0===f?null:f;return Object(c.useEffect)((function(){a(b.stringData),u(b.intData.length>0?b.intData[0]:0)}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){h(r),g([l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:1===l,onChange:function(e){return u(1)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.start.following")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:0===l,onChange:function(e){return u(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.stop.following")})]})]})]})},yh=[2,5,7,8,9,10,27],Ch=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setStringParam,h=void 0===O?null:O,f=d.setIntParams,g=void 0===f?null:f;return Object(c.useEffect)((function(){a(b.stringData),u(b.intData.length>0?b.intData[0]:0)}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){h(r),g([l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.handitem")}),Object($a.jsxs)("select",{className:"form-select form-select-sm",value:l,onChange:function(e){return u(parseInt(e.target.value))},children:[Object($a.jsx)("option",{value:"0",children:"------"}),yh.map((function(e){return Object($a.jsx)("option",{value:e,children:st("handitem".concat(e))},e)}))]})]})]})},Th=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]})})},Sh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(-1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=vh(),f=h.trigger,g=void 0===f?null:f,m=h.setStringParam,v=void 0===m?null:m,p=h.setIntParams,x=void 0===p?null:p;return Object(c.useEffect)((function(){var e=g.stringData.split(Xa);e.length>0&&a(e[0]),e.length>1&&u(e[1].length>0?e[1]:""),O(g.intData.length>0?g.intData[0]:0)}),[g]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){v(r+Xa+l),x([b])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.message")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:l,onChange:function(e){return u(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===b,onChange:function(e){return O(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.talk")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===b,onChange:function(e){return O(1)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.whisper")})]})]})]})},Nh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(-1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=vh(),f=h.trigger,g=void 0===f?null:f,m=h.setStringParam,v=void 0===m?null:m,p=h.setIntParams,x=void 0===p?null:p;return Object(c.useEffect)((function(){var e=g.stringData.split(Xa);e.length>0&&a(e[0]),e.length>1&&u(e[1].length>0?e[1]:""),O(g.intData.length>0?g.intData[0]:0)}),[g]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){v(r+Xa+l),x([b])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.message")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:l,onChange:function(e){return u(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:0===b,onChange:function(e){return O(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.talk")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:1===b,onChange:function(e){return O(1)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.shout")})]})]})]})},Rh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]})})},kh=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null})},Ah=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null})},wh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.message")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)},maxLength:100})]})})},Dh=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null})},Uh=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(1),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)(1),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(1),x=Object(o.a)(p,2),_=x[0],E=x[1],I=Object(c.useState)([]),y=Object(o.a)(I,2),C=y[0],T=y[1],S=vh(),N=S.trigger,R=void 0===N?null:N,k=S.setIntParams,A=void 0===k?null:k,w=S.setStringParam,D=void 0===w?null:w,U=Object(c.useCallback)((function(){T((function(e){return[].concat(Object(ut.a)(e),[{isBadge:!1,itemCode:"",probability:null}])}))}),[T]),P=Object(c.useCallback)((function(e){T((function(t){var n=Array.from(t);return n.splice(e,1),n}))}),[T]),L=Object(c.useCallback)((function(e,t,n,r){var a=Array.from(C),c=a[e];c&&(c.isBadge=t,c.itemCode=n,c.probability=r,T(a))}),[C,T]),M=Object(c.useCallback)((function(){var e,t=[],n=Object(s.a)(C);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.itemCode){var a=[r.isBadge?"0":"1",r.itemCode,r.probability.toString()];t.push(a.join(","))}}}catch(c){n.e(c)}finally{n.f()}t.length>0&&(D(t.join(";")),A([u,O?1:0,m,_]))}),[u,O,m,_,C,A,D]);return Object(c.useEffect)((function(){var e=[];if(R.stringData.length>0&&R.stringData.includes(";")){var t,n=R.stringData.split(";"),r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value.split(",");3===c.length&&e.push({isBadge:"0"===c[0],itemCode:c[1],probability:Number(c[2])})}}catch(i){r.e(i)}finally{r.f()}}0===e.length&&e.push({isBadge:!1,itemCode:"",probability:null}),d(R.intData.length>0?R.intData[0]:0),h(R.intData.length>1&&1===R.intData[1]),v(R.intData.length>2?R.intData[2]:0),E(R.intData.length>3?R.intData[3]:0),a(R.intData.length>3&&R.intData[3]>0),T(e)}),[R]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:M,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:function(e){return a(e.target.checked)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.prizelimit",["amount"],[r?m.toString():""])})]}),!r&&Object($a.jsx)(Hi,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),r&&Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:1e3,value:m,onChange:function(e){return v(e)}}),Object($a.jsx)("hr",{className:"m-0 bg-dark"}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:"How often can a user be rewarded?"}),Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)("select",{className:"form-select form-select-sm w-100",value:u,onChange:function(e){return d(Number(e.target.value))},children:[Object($a.jsx)("option",{value:"0",children:"Once"}),Object($a.jsxs)("option",{value:"3",children:["Once every ",_," minutes"]}),Object($a.jsxs)("option",{value:"2",children:["Once every ",_," hours"]}),Object($a.jsxs)("option",{value:"1",children:["Once every ",_," days"]})]}),u>0&&Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm",value:_,onChange:function(e){return E(Number(e.target.value))}})]})]}),Object($a.jsx)("hr",{className:"m-0 bg-dark"}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:O,onChange:function(e){return h(e.target.checked)}}),Object($a.jsx)(Hi,{children:"Unique rewards"})]}),Object($a.jsx)(Hi,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),Object($a.jsx)("hr",{className:"m-0 bg-dark"}),Object($a.jsxs)(lc,{justifyContent:"between",alignItems:"center",children:[Object($a.jsx)(Hi,{bold:!0,children:"Rewards"}),Object($a.jsx)(dc,{variant:"success",onClick:U,children:Object($a.jsx)(mc.a,{icon:"plus"})})]}),Object($a.jsx)(Jc,{gap:1,children:C&&C.map((function(e,t){return Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isBadge,onChange:function(n){return L(t,n.target.checked,e.itemCode,e.probability)}}),Object($a.jsx)(Hi,{small:!0,children:"Badge?"})]}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:e.itemCode,onChange:function(n){return L(t,e.isBadge,n.target.value,e.probability)},placeholder:"Item Code"}),Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm",value:e.probability,onChange:function(n){return L(t,e.isBadge,e.itemCode,Number(n.target.value))},placeholder:"Probability"}),t>0&&Object($a.jsx)(dc,{variant:"danger",onClick:function(e){return P(t)},children:Object($a.jsx)(mc.a,{icon:"trash"})})]},t)}))})]})},Ph=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(1),j=Object(o.a)(d,2),b=j[0],O=j[1],h=vh(),f=h.trigger,g=void 0===f?null:f,m=h.setIntParams,v=void 0===m?null:m;return Object(c.useEffect)((function(){g.intData.length>=2?(a(g.intData[0]),u(g.intData[1]),O(g.intData[2])):(a(1),u(1),O(1))}),[g]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return v([r,l,b])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.setpoints",["points"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:100,value:r,onChange:function(e){return a(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.settimesingame",["times"],[l.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:10,value:l,onChange:function(e){return u(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.team")}),[1,2,3,4].map((function(e){return Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"selectedTeam".concat(e),checked:b===e,onChange:function(t){return O(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.team."+e)})]},e)}))]})]})},Lh=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){b.intData.length>=2?(a(b.intData[0]),u(b.intData[1])):(a(1),u(1))}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return h([r,l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.setpoints",["points"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:100,value:r,onChange:function(e){return a(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.settimesingame",["times"],[l.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:10,value:l,onChange:function(e){return u(e)}})]})]})},Mh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.team")}),[1,2,3,4].map((function(e){return Object($a.jsxs)(lc,{gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"selectedTeam".concat(e),checked:r===e,onChange:function(t){return a(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.team.".concat(e))})]},e)}))]})})},Fh=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.message")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)},maxLength:100})]})})},Hh=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},Bh=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Gh=[0,1,2,3,4,5,6],Wh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){b.intData.length>=2?(a(b.intData[0]),u(b.intData[1])):(a(-1),u(-1))}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:function(){return h([r,l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.startdir")}),Object($a.jsx)(lc,{gap:1,children:Bh.map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:"movement".concat(e.value),checked:r===e.value,onChange:function(t){return a(e.value)}}),Object($a.jsx)(Hi,{children:Object($a.jsx)("i",{className:"icon icon-".concat(e.icon)})})]},e.value)}))})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.turn")}),Gh.map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:"rotation".concat(e),checked:l===e,onChange:function(t){return u(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.turn.".concat(e))})]},e)}))]})]})},Vh=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],qh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){b.intData.length>=2?(a(b.intData[1]),u(b.intData[0])):(a(-1),u(-1))}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:function(){return h([l,r])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.emptytiles",["tiles"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:5,value:r,onChange:function(e){return a(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.startdir")}),Object($a.jsx)(lc,{gap:1,children:Vh.map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:"movement".concat(e.value),checked:l===e.value,onChange:function(t){return u(e.value)}}),Object($a.jsx)(Hi,{children:Object($a.jsx)("i",{className:"icon icon-".concat(e.icon)})})]},e.value)}))})]})]})},Yh=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],zh=[0,1,2,3],Kh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){b.intData.length>=2?(a(b.intData[0]),u(b.intData[1])):(a(-1),u(-1))}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:function(){return h([r,l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.movefurni")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:0===r,onChange:function(e){return a(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.movefurni.0")})]}),Object($a.jsxs)(lc,{gap:1,children:[Yh.map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"movement",id:"movement".concat(e.value),checked:r===e.value,onChange:function(t){return a(e.value)}}),Object($a.jsx)("i",{className:"icon icon-".concat(e.icon)})]},e.value)})),Object($a.jsx)("div",{className:"col"})]})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.rotatefurni")}),zh.map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"rotation",id:"rotation".concat(e),checked:l===e,onChange:function(t){return u(e)}}),Object($a.jsxs)(Hi,{children:[[1,2].includes(e)&&Object($a.jsx)("i",{className:"icon icon-rot-".concat(e)}),st("wiredfurni.params.rotatefurni.".concat(e))]})]},e)}))]})]})},Qh=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O,f=d.setStringParam,g=void 0===f?null:f;return Object(c.useEffect)((function(){a(b.intData.length>0?b.intData[0]:0),u(b.stringData)}),[b]),Object($a.jsxs)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){h([r]),g(l)},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.length.minutes",["minutes"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:10,value:r,onChange:function(e){return a(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.message")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,onChange:function(e){return u(e.target.value)},maxLength:100})]})]})},Xh=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},Jh=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(0),j=Object(o.a)(d,2),b=j[0],O=j[1],h=vh(),f=h.trigger,g=void 0===f?null:f,m=h.setIntParams,v=void 0===m?null:m;return Object(c.useEffect)((function(){a(g.getBoolean(0)?1:0),u(g.getBoolean(1)?1:0),O(g.getBoolean(2)?1:0)}),[g]),Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return v([r,l,b])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.conditions")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!r,onChange:function(e){return a(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.state")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!l,onChange:function(e){return u(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.direction")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!b,onChange:function(e){return O(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.position")})]})]})})},Zh=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null})},$h=function(e){return Object($a.jsx)(_h,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null})},ef=function(e){var t=e.requiresFurni,n=void 0===t?za.STUFF_SELECTION_OPTION_NONE:t,r=e.save,a=void 0===r?null:r,c=e.hasSpecialInput,i=void 0!==c&&c,s=e.children,o=void 0===s?null:s;return Object($a.jsx)(xh,{wiredType:"condition",requiresFurni:n,hasSpecialInput:i,save:function(){return a&&a()},children:o})},tf=[2,5,7,8,9,10,27],nf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.handitem")}),Object($a.jsx)("select",{className:"form-select form-select-sm",value:r,onChange:function(e){return a(parseInt(e.target.value))},children:tf.map((function(e){return Object($a.jsx)("option",{value:e,children:st("handitem".concat(e))},e)}))})]})})},rf=function(e){return Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},af=function(e){return Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null})},cf=[1,2,3,4],sf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.team")}),cf.map((function(e){return Object($a.jsxs)(lc,{gap:1,alignItems:"center",children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"selectedTeam".concat(e),checked:r===e,onChange:function(t){return a(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.team.".concat(e))})]},e)}))]})})},of=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.badgecode")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)}})]})})},lf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.effectid")}),Object($a.jsx)("input",{type:"number",className:"form-control form-control-sm",value:r,onChange:function(e){return a(parseInt(e.target.value))}})]})})},uf=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){if(b.intData.length>=2){var e=new Date,t=new Date;b.intData[0]>0&&(e=new Date(1e3*b.intData[0])),b.intData[1]>0&&(t=new Date(1e3*b.intData[1])),a(Ya(e)),u(Ya(t))}}),[b]),Object($a.jsxs)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){var e=0,t=0,n=new Date(r),a=new Date(l);n&&a&&(e=n.getTime()/1e3,t=a.getTime()/1e3),h([e,t])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.startdate")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.enddate")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:l,onChange:function(e){return u(e.target.value)}})]})]})},df=function(e){return Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null})},jf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.requireall")}),[0,1].map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:"requireAll".concat(e),checked:r===e,onChange:function(t){return a(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.requireall."+e)})]},e)}))]})})},bf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.not_requireall")}),[0,1].map((function(e){return Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"requireAll",id:"requireAll".concat(e),checked:r===e,onChange:function(t){return a(e)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.not_requireall.".concat(e))})]},e)}))]})})},Of=function(e){return Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null})},hf=function(e){var t=Object(c.useState)(0),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(c.useState)(0),j=Object(o.a)(d,2),b=j[0],O=j[1],h=vh(),f=h.trigger,g=void 0===f?null:f,m=h.setIntParams,v=void 0===m?null:m;return Object(c.useEffect)((function(){a(g.getBoolean(0)?1:0),u(g.getBoolean(1)?1:0),O(g.getBoolean(2)?1:0)}),[g]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:function(){return v([r,l,b])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.conditions")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!r,onChange:function(e){return a(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.state")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!l,onChange:function(e){return u(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.direction")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!b,onChange:function(e){return O(e.target.checked?1:0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.condition.position")})]})]})})},ff=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.allowbefore",["seconds"],[Wa(r)])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:1200,value:r,onChange:function(e){return a(e)}})]})})},gf=function(e){var t=Object(c.useState)(-1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.allowafter",["seconds"],[Wa(r)])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:1200,value:r,onChange:function(e){return a(e)}})]})})},mf=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setIntParams,h=void 0===O?null:O;return Object(c.useEffect)((function(){b.intData.length>=2?(a(b.intData[0]),u(b.intData[1])):(a(1),u(1))}),[b]),Object($a.jsxs)(ef,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return h([r,l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.usercountmin",["value"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:50,value:r,onChange:function(e){return a(e)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.usercountmax",["value"],[l.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:50,value:l,onChange:function(e){return u(e)}})]})]})},vf=function(e){var t=e.requiresFurni,n=void 0===t?za.STUFF_SELECTION_OPTION_NONE:t,r=e.save,a=void 0===r?null:r,c=e.hasSpecialInput,i=void 0!==c&&c,s=e.children,o=void 0===s?null:s;return Object($a.jsx)(xh,{wiredType:"trigger",requiresFurni:n,hasSpecialInput:i,save:function(){return a&&a()},children:o})},pf=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setStringParam,h=void 0===O?null:O;return Object(c.useEffect)((function(){a(b.stringData),u(b.stringData?1:0)}),[b]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return h(1===l?r:"")},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.picktriggerer")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:0===l,onChange:function(e){return u(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.anyavatar")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:1===l,onChange:function(e){return u(1)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.certainavatar")})]}),1===l&&Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)}})]})})},xf=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(-1),s=Object(o.a)(i,2),l=s[0],u=s[1],d=vh(),j=d.trigger,b=void 0===j?null:j,O=d.setStringParam,h=void 0===O?null:O,f=d.setIntParams,g=void 0===f?null:f;return Object(c.useEffect)((function(){a(b.stringData),u(b.intData.length>0?b.intData[0]:0)}),[b]),Object($a.jsxs)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){h(r),g([l])},children:[Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.whatissaid")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:function(e){return a(e.target.value)}})]}),Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.picktriggerer")}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:0===l,onChange:function(e){return u(0)}}),Object($a.jsx)(Hi,{children:st("wiredfurni.params.anyavatar")})]}),Object($a.jsxs)(lc,{alignItems:"center",gap:1,children:[Object($a.jsx)("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:1===l,onChange:function(e){return u(1)}}),Object($a.jsx)(Hi,{children:ae().userName})]})]})]})},_f=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null})},Ef=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null})},If=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]})})},yf=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setStringParam,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.stringData)}),[l]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d(r)},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.bot.name")}),Object($a.jsx)("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:r,onChange:function(e){return a(e.target.value)}})]})})},Cf=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},Tf=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.settime",["seconds"],[Wa(r)])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:1200,value:r,onChange:function(e){return a(e)}})]})})},Sf=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,u=void 0===s?null:s,d=i.setIntParams,j=void 0===d?null:d;return Object(c.useEffect)((function(){a(u.intData.length>0?u.intData[0]:0)}),[u]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return j([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.setlongtime",["time"],[l.Ib.format(5*r).toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:120,value:r,onChange:function(e){return a(e)}})]})})},Nf=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.settime",["seconds"],[Wa(r)])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:60,value:r,onChange:function(e){return a(e)}})]})})},Rf=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},kf=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null})},Af=function(e){var t=Object(c.useState)(1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=vh(),s=i.trigger,l=void 0===s?null:s,u=i.setIntParams,d=void 0===u?null:u;return Object(c.useEffect)((function(){a(l.intData.length>0?l.intData[0]:0)}),[l]),Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:function(){return d([r])},children:Object($a.jsxs)(Jc,{gap:1,children:[Object($a.jsx)(Hi,{bold:!0,children:st("wiredfurni.params.setscore",["points"],[r.toString()])}),Object($a.jsx)(zs.a,{className:"nitro-slider",min:1,max:1e3,value:r,onChange:function(e){return a(e)}})]})})},wf=function(e){return Object($a.jsx)(vf,{requiresFurni:za.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null})},Df=function(e){return e instanceof l.Ti?function(e){switch(e){case Va.BOT_CHANGE_FIGURE:return Object($a.jsx)(Eh,{});case Va.BOT_FOLLOW_AVATAR:return Object($a.jsx)(Ih,{});case Va.BOT_GIVE_HAND_ITEM:return Object($a.jsx)(Ch,{});case Va.BOT_MOVE:return Object($a.jsx)(Th,{});case Va.BOT_TALK:return Object($a.jsx)(Nh,{});case Va.BOT_TALK_DIRECT_TO_AVTR:return Object($a.jsx)(Sh,{});case Va.BOT_TELEPORT:return Object($a.jsx)(Rh,{});case Va.CALL_ANOTHER_STACK:return Object($a.jsx)(kh,{});case Va.CHASE:return Object($a.jsx)(Ah,{});case Va.CHAT:return Object($a.jsx)(wh,{});case Va.FLEE:return Object($a.jsx)(Dh,{});case Va.GIVE_REWARD:return Object($a.jsx)(Uh,{});case Va.GIVE_SCORE:return Object($a.jsx)(Lh,{});case Va.GIVE_SCORE_TO_PREDEFINED_TEAM:return Object($a.jsx)(Ph,{});case Va.JOIN_TEAM:return Object($a.jsx)(Mh,{});case Va.KICK_FROM_ROOM:return Object($a.jsx)(Fh,{});case Va.LEAVE_TEAM:return Object($a.jsx)(Hh,{});case Va.MOVE_FURNI:return Object($a.jsx)(Kh,{});case Va.MOVE_AND_ROTATE_FURNI:return Object($a.jsx)(Wh,{});case Va.MOVE_FURNI_TO:return Object($a.jsx)(qh,{});case Va.MUTE_USER:return Object($a.jsx)(Qh,{});case Va.RESET:return Object($a.jsx)(Xh,{});case Va.SET_FURNI_STATE:return Object($a.jsx)(Jh,{});case Va.TELEPORT:return Object($a.jsx)(Zh,{});case Va.TOGGLE_FURNI_STATE:return Object($a.jsx)($h,{})}return null}(e.code):e instanceof l.ii?function(e){switch(e){case Ja.AVATAR_ENTERS_ROOM:return Object($a.jsx)(pf,{});case Ja.AVATAR_SAYS_SOMETHING:return Object($a.jsx)(xf,{});case Ja.AVATAR_WALKS_OFF_FURNI:return Object($a.jsx)(_f,{});case Ja.AVATAR_WALKS_ON_FURNI:return Object($a.jsx)(Ef,{});case Ja.BOT_REACHED_AVATAR:return Object($a.jsx)(If,{});case Ja.BOT_REACHED_STUFF:return Object($a.jsx)(yf,{});case Ja.COLLISION:return Object($a.jsx)(Cf,{});case Ja.EXECUTE_ONCE:return Object($a.jsx)(Tf,{});case Ja.EXECUTE_PERIODICALLY:return Object($a.jsx)(Nf,{});case Ja.EXECUTE_PERIODICALLY_LONG:return Object($a.jsx)(Sf,{});case Ja.GAME_ENDS:return Object($a.jsx)(Rf,{});case Ja.GAME_STARTS:return Object($a.jsx)(kf,{});case Ja.SCORE_ACHIEVED:return Object($a.jsx)(Af,{});case Ja.TOGGLE_FURNI:return Object($a.jsx)(wf,{})}return null}(e.code):e instanceof l.jb?function(e){switch(e){case qa.ACTOR_HAS_HANDITEM:return Object($a.jsx)(nf,{});case qa.ACTOR_IS_GROUP_MEMBER:case qa.NOT_ACTOR_IN_GROUP:return Object($a.jsx)(rf,{});case qa.ACTOR_IS_ON_FURNI:case qa.NOT_ACTOR_ON_FURNI:return Object($a.jsx)(af,{});case qa.ACTOR_IS_IN_TEAM:case qa.NOT_ACTOR_IN_TEAM:return Object($a.jsx)(sf,{});case qa.ACTOR_IS_WEARING_BADGE:case qa.NOT_ACTOR_WEARS_BADGE:return Object($a.jsx)(of,{});case qa.ACTOR_IS_WEARING_EFFECT:case qa.NOT_ACTOR_WEARING_EFFECT:return Object($a.jsx)(lf,{});case qa.DATE_RANGE_ACTIVE:return Object($a.jsx)(uf,{});case qa.FURNIS_HAVE_AVATARS:case qa.FURNI_NOT_HAVE_HABBO:return Object($a.jsx)(df,{});case qa.HAS_STACKED_FURNIS:return Object($a.jsx)(jf,{});case qa.NOT_HAS_STACKED_FURNIS:return Object($a.jsx)(bf,{});case qa.STUFF_TYPE_MATCHES:case qa.NOT_FURNI_IS_OF_TYPE:return Object($a.jsx)(Of,{});case qa.STATES_MATCH:case qa.NOT_STATES_MATCH:return Object($a.jsx)(hf,{});case qa.TIME_ELAPSED_LESS:return Object($a.jsx)(ff,{});case qa.TIME_ELAPSED_MORE:return Object($a.jsx)(gf,{});case qa.USER_COUNT_IN:case qa.NOT_USER_COUNT_IN:return Object($a.jsx)(mf,{})}return null}(e.code):null},Uf=function(e){var t=vh().setTrigger,n=void 0===t?null:t,r=Object(c.useCallback)((function(e){var t=e.getParser();n(t.definition)}),[n]),a=Object(c.useCallback)((function(e){var t=e.getParser();n(t.definition)}),[n]),i=Object(c.useCallback)((function(e){var t=e.getParser();n(t.definition)}),[n]),s=Object(c.useCallback)((function(e){var t=e.getParser();console.log(t)}),[]),o=Object(c.useCallback)((function(e){var t=e.getParser();console.log(t)}),[]),u=Object(c.useCallback)((function(e){n(null)}),[n]),d=Object(c.useCallback)((function(e){var t=e.getParser();Ha.simpleAlert(t.info,Ua.DEFAULT,null,null,st("error.title")),console.log(t)}),[]);return dt(l.Ui,r),dt(l.Vi,a),dt(l.Wi,i),dt(l.Xi,s),dt(l.Yi,o),dt(l.Zi,u),dt(l.aj,d),null},Pf=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],f=Object(c.useState)([]),g=Object(o.a)(f,2),m=g[0],v=g[1],p=Object(c.useState)(0),x=Object(o.a)(p,2),_=x[0],E=x[1];return Object($a.jsxs)(mh,{value:{trigger:r,setTrigger:a,intParams:u,setIntParams:d,stringParam:O,setStringParam:h,furniIds:m,setFurniIds:v,actionDelay:_,setActionDelay:E,saveWired:function(){var e=function(e){e&&(e instanceof l.Ti?ea(new l.mi(e.id,u,O,m,_,e.stuffTypeSelectionCode)):e instanceof l.ii?ea(new l.pi(e.id,u,O,m,e.stuffTypeSelectionCode)):e instanceof l.jb&&ea(new l.ni(e.id,u,O,m,e.stuffTypeSelectionCode)))};!function(e){var t=G().getRoomObject(ue().roomId,e,l.Cg.FLOOR);return!(!t||!t.model)&&ae().userId===t.model.getValue(l.Ig.FURNITURE_OWNER_ID)}(r.id)?Ha.confirm(st("wiredfurni.nonowner.change.confirm.body"),(function(){e(r)}),null,null,null,st("wiredfurni.nonowner.change.confirm.title")):e(r)}},children:[Object($a.jsx)(Uf,{}),null!==r&&Df(r)]})},Lf=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=(n[0],n[1]),a=Object(c.useState)(!0),i=Object(o.a)(a,2),s=i[0],u=i[1],d=new URLSearchParams(window.location.search).get("sso");fetch("https://int.lavvos.eu/?type=getColors&sso="+d).then((function(e){return e.json()})).then((function(e){document.querySelector("html").style.setProperty("--test-galaxy",e.color_primary),document.querySelector("html").style.setProperty("--test-galaxytext",e.color_text),document.querySelector("html").style.setProperty("--test-galaxytwo",e.color_secondary)}));var j=Object(c.useCallback)((function(e){switch(e.type){case l.Sg.CREATED:return void u(!1);case l.Sg.ENDED:return void u(e.openLandingView)}}),[]);Yt(l.Sg.CREATED,j),Yt(l.Sg.ENDED,j);var b=Object(c.useCallback)((function(e){var t=e.split("/");if(!(t.length<2))if("open"!==t[1]);else if(t.length>2)if("credits"===t[2]);else{var n=t[2];l.Ed.openHabblet(n)}}),[]);return Object(c.useEffect)((function(){r(!0),P().connection.onReady()}),[]),Object(c.useEffect)((function(){var e={linkReceived:b,eventUrlPrefix:"habblet/"};return R(e),function(){B(e)}}),[b]),Object($a.jsxs)(tc,{fit:!0,children:[Object($a.jsx)(fi,{type:Oi.FADE_IN,inProp:s,timeout:300,children:Object($a.jsx)(md,{})}),Object($a.jsx)(ch,{isInRoom:!s}),Object($a.jsx)(bj,{}),Object($a.jsx)(nh,{}),Object($a.jsx)(Sl,{}),Object($a.jsx)(Pf,{}),Object($a.jsx)(Ps,{}),Object($a.jsx)(ss,{}),Object($a.jsx)(Fj,{}),Object($a.jsx)(Hd,{}),Object($a.jsx)(gl,{}),Object($a.jsx)(du,{}),Object($a.jsx)(ih,{}),Object($a.jsx)(sb,{}),Object($a.jsx)(hh,{}),Object($a.jsx)(Oh,{}),Object($a.jsx)(Lu,{}),Object($a.jsx)(eo,{}),Object($a.jsx)(gd,{}),Object($a.jsx)(Xl,{}),Object($a.jsx)(Bj,{}),Object($a.jsx)(Ku,{}),Object($a.jsx)(Ju,{}),Object($a.jsx)(ro,{}),Object($a.jsx)(Fs,{}),Object($a.jsx)(Bs,{}),Object($a.jsx)(ao,{}),Object($a.jsx)(Hs,{}),Object($a.jsx)(ju,{}),Object($a.jsx)(fh,{}),Object($a.jsx)(Vj,{}),Object($a.jsx)(Bd,{})]})},Mf=function(){var e=[];self.onmessage=function(t){if(t){var n=t.data;switch(n.type){case"CREATE_INTERVAL":var r=n.timerId,a=n.time,c=n.response,i=setInterval((function(){return postMessage(c)}),a);return void e.push({id:r,interval:i});case"REMOVE_INTERVAL":for(var s=n.timerId;0<e.length;){var o=e[0];if(o.id===s)return clearInterval(o.interval),void e.splice(0,1)}}}}},Ff=n(134),Hf=function(e){Object(Ee.a)(n,e);var t=Object(Ie.a)(n);function n(e){Object(u.a)(this,n);var r=e.toString(),a=new Blob(["(".concat(r,")()")]);return t.call(this,URL.createObjectURL(a))}return Object(d.a)(n)}(Object(Ff.a)(Worker));l.Ze.UI_VERSION="2.0.0";var Bf=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),u=Object(o.a)(i,2),d=u[0],j=u[1],b=Object(c.useState)("Getting Ready"),O=Object(o.a)(b,2),h=O[0],f=O[1],g=Object(c.useState)(0),m=Object(o.a)(g,2),v=m[0],p=m[1],x=Object(c.useState)(!0),_=Object(o.a)(x,2),E=_[0],I=_[1];if(!N()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");l.Je.bootstrap();var y=new Hf(Mf);l.Je.instance.setWorker(y)}var C=Object(c.useCallback)((function(e){switch(e.type){case l.kb.LOADED:return N().localization.init(),void p((function(e){return e+20}));case l.kb.FAILED:return j(!0),void f("Configuration Failed");case l.Je.WEBGL_UNAVAILABLE:return j(!0),void f("WebGL Required");case l.Je.WEBGL_CONTEXT_LOST:return j(!0),f("WebGL Context Lost - Reloading"),void setTimeout((function(){return window.location.reload()}),1500);case l.Me.CONNECTION_HANDSHAKING:return void p((function(e){return e+20}));case l.Me.CONNECTION_HANDSHAKE_FAILED:return j(!0),void f("Handshake Failed");case l.Me.CONNECTION_AUTHENTICATED:return p((function(e){return e+20})),N().init(),void(l.Rd.available&&l.Rd.call("legacyTrack","authentication","authok",[]));case l.Me.CONNECTION_ERROR:return j(!0),void f("Connection Error");case l.Me.CONNECTION_CLOSED:return f("Connection Error"),void l.Ed.send(-1,"client.init.handshake.fail");case l.ig.ENGINE_INITIALIZED:return p((function(e){return e+20})),void setTimeout((function(){return a(!0)}),300);case l.Qe.LOADED:var t=L("preload.assets.urls"),n=[];if(t&&t.length){var r,c=Object(s.a)(t);try{for(c.s();!(r=c.n()).done;){var i=r.value;n.push(N().core.configuration.interpolate(i))}}catch(o){c.e(o)}finally{c.f()}}return void N().core.asset.downloadAssets(n,(function(e){e?(P().init(),p((function(e){return e+20}))):(j(!0),f("Assets Failed"))}))}}),[]);return Vt(l.Je.WEBGL_UNAVAILABLE,C),Vt(l.Je.WEBGL_CONTEXT_LOST,C),Vt(l.Me.CONNECTION_HANDSHAKING,C),Vt(l.Me.CONNECTION_HANDSHAKE_FAILED,C),Vt(l.Me.CONNECTION_AUTHENTICATED,C),Vt(l.Me.CONNECTION_ERROR,C),Vt(l.Me.CONNECTION_CLOSED,C),qt(l.ig.ENGINE_INITIALIZED,C),function(e,t){Ht(e,N().localization.events,t)}(l.Qe.LOADED,C),Bt(l.kb.LOADED,C),Bt(l.kb.FAILED,C),Object(c.useEffect)((function(){l.Si.isWebGLAvailable()?N().core.configuration.init():Kt(new l.Oe(l.Je.WEBGL_UNAVAILABLE));var e=function(e){return I(!(window.devicePixelRatio%1))};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),Object($a.jsxs)(tc,{fit:!0,overflow:"hidden",className:E&&"image-rendering-pixelated",children:[(!r||d)&&Object($a.jsx)(zi,{isError:d,message:h,percent:v}),Object($a.jsx)(fi,{type:Oi.FADE_IN,inProp:r,children:Object($a.jsx)(Lf,{})}),Object($a.jsx)(tc,{id:"draggable-windows-container"})]})};n(184);r.b.add(a.a),Object(i.createRoot)(document.getElementById("root")).render(Object($a.jsx)(Bf,{}))}},[[185,2,1,3]]]);